
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://fightingff.github.io/notebooks/OOP/">
      
      
        <link rel="prev" href="../ADS/">
      
      
        <link rel="next" href="../Info/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>OOP - FF's Notebooks</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#oop" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FF&#39;s Notebooks" class="md-header__button md-logo" aria-label="FF's Notebooks" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FF's Notebooks
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OOP
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/fightingff/notebooks" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    fightingff/notebooks
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FF&#39;s Notebooks" class="md-nav__button md-logo" aria-label="FF's Notebooks" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FF's Notebooks
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fightingff/notebooks" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    fightingff/notebooks
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://isshikihugh.github.io/zju-cs-asio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZJU CS Masters' Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Courses
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Courses
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大一
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            大一
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ASM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    x86 Asm
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大二上
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            大二上
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DigitLogic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Digit Logic Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CS231n/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CS 231n
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大二下
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            大二下
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    OOP
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OOP
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      整理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="整理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      声明 &amp; 定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#varibles-scope-lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      Varibles Scope &amp; Lifetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tricks" class="md-nav__link">
    <span class="md-ellipsis">
      Tricks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buzzwords" class="md-nav__link">
    <span class="md-ellipsis">
      Buzzwords
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stl" class="md-nav__link">
    <span class="md-ellipsis">
      STL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class" class="md-nav__link">
    <span class="md-ellipsis">
      Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      构造
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      析构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      权限
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overload" class="md-nav__link">
    <span class="md-ellipsis">
      Overload 重载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embedded-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Embedded Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      Inheritance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polymorphism" class="md-nav__link">
    <span class="md-ellipsis">
      Polymorphism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overloading-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Overloading Operator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overloading Operator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prototypes" class="md-nav__link">
    <span class="md-ellipsis">
      ProtoTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argument-passing" class="md-nav__link">
    <span class="md-ellipsis">
      Argument passing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Type conversion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static" class="md-nav__link">
    <span class="md-ellipsis">
      Static
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#const" class="md-nav__link">
    <span class="md-ellipsis">
      Const
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-delete" class="md-nav__link">
    <span class="md-ellipsis">
      New &amp; Delete
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-argument" class="md-nav__link">
    <span class="md-ellipsis">
      Default argument（默认参数）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inline" class="md-nav__link">
    <span class="md-ellipsis">
      Inline（内联）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Namespace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    <span class="md-ellipsis">
      Template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    <span class="md-ellipsis">
      Exception
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smart-pointer" class="md-nav__link">
    <span class="md-ellipsis">
      Smart Pointer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stream" class="md-nav__link">
    <span class="md-ellipsis">
      Stream
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design" class="md-nav__link">
    <span class="md-ellipsis">
      Design
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volatile" class="md-nav__link">
    <span class="md-ellipsis">
      *Volatile
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extern" class="md-nav__link">
    <span class="md-ellipsis">
      *Extern 特殊用法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    <span class="md-ellipsis">
      *Union
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    <span class="md-ellipsis">
      *Enum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define" class="md-nav__link">
    <span class="md-ellipsis">
      *Define
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Information Theory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RiscV/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computer Organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_3_6" id="__nav_3_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UCB-Sysadmin DeCal
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_6">
            <span class="md-nav__icon md-icon"></span>
            UCB-Sysadmin DeCal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Bandit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bandit for fun
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大三上
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            大三上
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computer Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Make/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Makefile & CMake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vim
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Materials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Materials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AI_Materials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AI Materials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/fightingff/AI" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    My AI Repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      整理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="整理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      声明 &amp; 定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#varibles-scope-lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      Varibles Scope &amp; Lifetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tricks" class="md-nav__link">
    <span class="md-ellipsis">
      Tricks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buzzwords" class="md-nav__link">
    <span class="md-ellipsis">
      Buzzwords
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stl" class="md-nav__link">
    <span class="md-ellipsis">
      STL
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#class" class="md-nav__link">
    <span class="md-ellipsis">
      Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      构造
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      析构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      权限
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overload" class="md-nav__link">
    <span class="md-ellipsis">
      Overload 重载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embedded-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Embedded Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      Inheritance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polymorphism" class="md-nav__link">
    <span class="md-ellipsis">
      Polymorphism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overloading-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Overloading Operator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overloading Operator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prototypes" class="md-nav__link">
    <span class="md-ellipsis">
      ProtoTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argument-passing" class="md-nav__link">
    <span class="md-ellipsis">
      Argument passing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Type conversion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static" class="md-nav__link">
    <span class="md-ellipsis">
      Static
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#const" class="md-nav__link">
    <span class="md-ellipsis">
      Const
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-delete" class="md-nav__link">
    <span class="md-ellipsis">
      New &amp; Delete
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-argument" class="md-nav__link">
    <span class="md-ellipsis">
      Default argument（默认参数）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inline" class="md-nav__link">
    <span class="md-ellipsis">
      Inline（内联）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Namespace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    <span class="md-ellipsis">
      Template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    <span class="md-ellipsis">
      Exception
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smart-pointer" class="md-nav__link">
    <span class="md-ellipsis">
      Smart Pointer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stream" class="md-nav__link">
    <span class="md-ellipsis">
      Stream
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design" class="md-nav__link">
    <span class="md-ellipsis">
      Design
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volatile" class="md-nav__link">
    <span class="md-ellipsis">
      *Volatile
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extern" class="md-nav__link">
    <span class="md-ellipsis">
      *Extern 特殊用法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#union" class="md-nav__link">
    <span class="md-ellipsis">
      *Union
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    <span class="md-ellipsis">
      *Enum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define" class="md-nav__link">
    <span class="md-ellipsis">
      *Define
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="oop">OOP</h1>
<hr />
<h2 id="_1">整理</h2>
<h3 id="_2">声明 &amp; 定义</h3>
<p>声明不分配内存，定义分配内存</p>
<p>如 extern（<em>除了 <code>extern const</code> 这个比较特殊</em>）, struct, class 内都是声明</p>
<h3 id="varibles-scope-lifetime">Varibles Scope &amp; Lifetime</h3>
<table>
<thead>
<tr>
<th></th>
<th>scope</th>
<th>lifetime</th>
<th>storage</th>
</tr>
</thead>
<tbody>
<tr>
<td>local</td>
<td>{}</td>
<td>{}</td>
<td>stack</td>
</tr>
<tr>
<td>global</td>
<td>global</td>
<td>program</td>
<td>global</td>
</tr>
<tr>
<td>static local</td>
<td>{}</td>
<td>program (init when called)</td>
<td>global</td>
</tr>
<tr>
<td>member(private)</td>
<td>class</td>
<td>object</td>
<td>object</td>
</tr>
<tr>
<td>static member</td>
<td>class</td>
<td>program</td>
<td>global</td>
</tr>
<tr>
<td>malloc(new)</td>
<td>passed in-out</td>
<td>malloc-free(delete)</td>
<td>heap</td>
</tr>
</tbody>
</table>
<h3 id="tricks">Tricks</h3>
<ul>
<li>
<p>编程复杂度 与 现实要求 冲突时，一般选择服从现实要求比较“顺”</p>
</li>
<li>
<p><code>assert</code> 用于调试，不会在release版本中执行，其本质是一个宏，如果条件为假，则输出错误信息并终止程序（<code>#define NDEBUG</code> 可以关闭）</p>
</li>
<li>
<p>没有成员变量的类 的 size 为1，用来区分，但是在其子类中不会有这个区分，即为0</p>
</li>
<li>
<p>计算类的大小时要求 各成员变量<strong>对齐</strong>，即每个变量的地址都是其大小的整数倍，并且按照声明的顺序排列。</p>
<p>如果有虚函数，会多一个指针，指向虚函数表，大小为8（64位系统）</p>
<p>此外，还要求类的大小是最大成员变量的整数倍，因此最后可能还会有一些<strong>填充</strong>字节。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1 byte, assume start at 0</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">  </span><span class="c1">// 4 bytes, but need to start at 4, so 3 bytes padding</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1 byte, start at 8, but 3 bytes padding</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">};</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1">// sizeof(A) = 12</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>注意这里的各成员变量指的都是基本数据类型，如果类内有其他对象，也是将其拆开计算</p>
<p>比如经过实验可以得到 <code>sizeof(string) = 32</code>，并且其内部有一个指针，导致对齐大小为8</p>
</div>
</li>
<li>
<p>函数传入 &amp; 传出</p>
<p><img alt="1715311286030" src="../image/OOP/1715311286030.png" /></p>
</li>
</ul>
<hr />
<h2 id="buzzwords">Buzzwords</h2>
<ul>
<li>
<p>Encapsulation: 封装</p>
</li>
<li>
<p>Inheritance: 继承</p>
</li>
<li>
<p>Polymorphism: 多态，一个函数可以有多种形态，一个基类指针可以呈现不同的派生类对象</p>
<details class="tip">
<summary>多态</summary>
<ul>
<li>
<p>静态多态：函数（运算法）重载</p>
</li>
<li>
<p>动态多态：虚函数，覆写</p>
</li>
</ul>
</details>
</li>
<li>
<p>Overriding: 覆盖，即子类完全覆盖父类的方法，包括函数名、参数、返回值</p>
</li>
<li>
<p>Overloading: 重载，即函数名相同，参数不同</p>
</li>
<li>
<p>Interface: 接口</p>
</li>
<li>
<p>Cohesion: 內聚, 一个类内的功能高度相关</p>
</li>
<li>
<p>Coupling: 耦合， 不同类之间的关联程度</p>
</li>
<li>
<p>Collection classes: 容器</p>
</li>
<li>
<p>Template: 模板</p>
</li>
<li>
<p>Responsibility-driven design: 责任驱动设计</p>
</li>
<li>
<p>Generic: 泛型</p>
</li>
<li>
<p>Field: 字段</p>
</li>
<li>
<p>Parameter: 函数参数</p>
</li>
</ul>
<hr />
<h2 id="stl">STL</h2>
<blockquote>
<p><strong>Standard Template Library</strong></p>
</blockquote>
<ul>
<li>
<p><em>工程中慎用 <code>&lt;bits/stdc++.h&gt;</code> 头文件，降低编译压力</em></p>
</li>
<li>
<p>Containers</p>
<ul>
<li>
<p>vector</p>
<ul>
<li>
<p>内部实现：</p>
<ul>
<li>
<p>动态内存分配，当容量不足时，会将容量扩大为原来的两倍，然后将原来的元素复制到新的内存空间中，释放原来的内存空间。</p>
</li>
<li>
<p>插入均摊时间复杂度为 O(1)</p>
</li>
<li>
<p>删除元素时，会将后面的元素向前移动，时间复杂度为 O(n) </p>
</li>
</ul>
</li>
<li>
<p>初始化构造</p>
<ul>
<li>
<p><code>vector&lt;int&gt;p(capacity (,k) )</code> (capacity 个 k，默认为0) </p>
</li>
<li>
<p><code>vector&lt;int&gt;p{1,2,3}</code> (初始化列表，capacity 为 3)</p>
</li>
</ul>
</li>
<li>
<p>vector [] “可以”越界访问，（因为实际上的容量可能大于它显示的capacity），.at() 会抛出异常</p>
<p><em>（乱穿马路违法，但是一般没人会来管你。没撞死算幸运，撞死活该。）</em>  </p>
</li>
</ul>
</li>
<li>
<p>deque (double ended queue) </p>
<ul>
<li>
<p>内部实现： </p>
<ul>
<li>
<p>使用缓存区块存取元素，使用 map 建立缓存区块的索引，当缓存区块不足时，会重新分配内存空间。</p>
</li>
<li>
<p>两端插入和删除均摊时间复杂度为 O(1)，但实现上比 vector 复杂</p>
</li>
<li>
<p>缓存区内部实现与 vector 类似 </p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>list  (doubly linked list)</p>
<ul>
<li>
<p><code>list.begin() != list.end()</code> (不推荐使用 &lt; ，可能会出错)</p>
</li>
<li>
<p><code>copy(L, R, vector&lt;&gt;it)</code> 链表展平为 vector </p>
</li>
</ul>
</li>
<li>
<p>forward_list</p>
</li>
<li>
<p>*string  </p>
</li>
<li>
<p>set</p>
</li>
<li>
<p>map    </p>
</li>
</ul>
</li>
<li>
<p>Algorithms</p>
</li>
<li>
<p>Iterators</p>
<p><img alt="1719387047873" src="../image/OOP/1719387047873.png" /></p>
<p><img alt="1719387018801" src="../image/OOP/1719387018801.png" /></p>
</li>
</ul>
<hr />
<h2 id="container">Container</h2>
<blockquote>
<p>容器，collection of objects that can store an arbitrary number of other objects.</p>
</blockquote>
<ul>
<li>
<p>通常用 size 来表示其中 object 的数量</p>
</li>
<li>
<p>通常用 capacity 来表示目前内存分配的容量</p>
</li>
</ul>
<hr />
<h2 id="class">Class</h2>
<blockquote>
<p>类，一种用户自定义的数据类型，用于封装数据和方法</p>
<p><em>关于内部数据存储，具有地址对齐性，即一个短变量只会在一行内读出，不会跨行读取</em></p>
</blockquote>
<h3 id="_3">构造</h3>
<ul>
<li>
<p>全局变量构造在main函数之外，main函数之前构造，main函数之后析构，按书写顺序构造，反序析构</p>
</li>
<li>
<p>类内构造（事实上可以将基类认为是一个声明在最前面的隐式成员变量）</p>
<ol>
<li>
<p>调用父类构造函数（检查调用的构造函数的初始化列表内是否有相应代理构造，若没有则调用默认构造）</p>
</li>
<li>
<p>按<strong>顺序</strong>调用成员构造函数（检查调用的构造函数的初始化列表内是否有相应代理构造，若没有则调用默认构造），其中<strong>这里的顺序是按照声明的顺序，而不是初始化列表的顺序</strong></p>
</li>
<li>
<p>调用自身构造函数以及之后的构造函数体   </p>
</li>
</ol>
</li>
<li>
<p>初始化变量时 <code>= x, (x)</code> 在编译器优化下都会调用构造函数，并且根据题目来看认为他们完全相同，但是本质上应该是不同的？</p>
<details class="info">
<summary>初始化</summary>
<p>有等号的称为赋值初始化，没有等号的称为直接初始化</p>
<ul>
<li>
<p><code>= x</code> 本应先调用构造函数创建临时对象，然后调用拷贝构造函数，因此不能用于下面提到的 <code>explicit</code> ；但是正常时编译器会优化，直接调用拷贝构造函数</p>
</li>
<li>
<p><code>(x)</code> 才是真正显式调用构造函数，即 <code>T(x)</code></p>
</li>
</ul>
</details>
</li>
<li>
<p><strong>Delegating Constructor（代理构造）</strong></p>
<ul>
<li>
<p>一个构造函数可以调用另一个构造函数，减少代码重复</p>
</li>
<li>
<p><code>A(int x, int y): A(x) {}</code></p>
</li>
</ul>
</li>
<li>
<p><strong>Copy Constructor</strong></p>
<blockquote>
<p><code>T::T (const T&amp;)</code></p>
<p>复制一份</p>
</blockquote>
<ul>
<li>
<p>函数调用的赋值</p>
<ul>
<li>
<p>用函数本地变量返回赋值只会调用拷贝构造一次</p>
</li>
<li>
<p>直接返回构造不需要调用拷贝构造（将相应内存直接放在函数体上方）</p>
</li>
</ul>
<p><img alt="1715310755018" src="../image/OOP/1715310755018.png" /></p>
</li>
<li>
<p>member-wise copy: 拷贝指针小心，否则可能会影响源对象</p>
</li>
</ul>
</li>
<li>
<p><strong>Move Constructor</strong></p>
<blockquote>
<p><code>T::T (const T&amp;&amp;)</code></p>
<p>传递指针，销毁原对象，而不是复制所有的实际数据</p>
</blockquote>
<ul>
<li>使用 <code>std::move()</code> 转为右值</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>
<p><em>全局变量处在多文件时，构造顺序是不确定的</em>                                            </p>
</li>
<li>
<p>进入函数时，所有本地变量所占据空间已经分配完毕，并且<strong>实参量会调用拷贝构造函数（const Tp &amp;x）来传值</strong></p>
</li>
<li>
<p>构造列表只能初始化 non-static 的成员，包括<strong>可以初始化const常量</strong></p>
</li>
</ul>
</div>
<h3 id="_4">析构</h3>
<ul>
<li>
<p>编译器控制，当变量结束生命周期时自动调用</p>
</li>
<li>
<p>同等条件下，析构函数的调用顺序与构造函数的调用顺序相反（栈一样，避免依赖关系影响） </p>
</li>
</ul>
<h3 id="_5">权限</h3>
<ul>
<li>
<p>private</p>
<ul>
<li>
<p>仅在<strong>类</strong>内部可见</p>
</li>
<li>
<p><strong>边界是类, 不是对象（类内可以访问其他同类对象的私有成员），并且由编译器控制（可以绕过，如利用指针为所欲为）</strong>  </p>
</li>
</ul>
</li>
<li>
<p>public</p>
<ul>
<li>都可以访问，与 structure 类似 </li>
</ul>
</li>
<li>
<p>protected</p>
<ul>
<li>与private的区别是子类可见（<em>留给子类的遗产</em>） </li>
</ul>
</li>
<li>
<p>default</p>
<ul>
<li>class 默认是 private 的，struct 默认是 public 的 </li>
</ul>
</li>
<li>
<p>friend</p>
<ul>
<li>
<p>权限授权，可以访问该类的私有成员 和 保护成员</p>
</li>
<li>
<p>友元不是成员函数</p>
</li>
<li>
<p>友元的友元不一定是友元，即友元关系不可继承</p>
</li>
</ul>
</li>
</ul>
<h3 id="overload">Overload 重载</h3>
<ul>
<li>
<p>函数名相同，参数不同</p>
</li>
<li>
<p>不能使用 auto-cast, 会造成二义性</p>
</li>
</ul>
<h3 id="embedded-objects">Embedded Objects</h3>
<blockquote>
<p>A class <strong>has</strong> other classes</p>
</blockquote>
<ul>
<li>
<p>Storage：按照书写顺序在内存中存储 </p>
</li>
<li>
<p>Constructor &amp; Deconstructor：同样是顺序构造，逆序析构</p>
</li>
<li>
<p>Fully v/s <strong>By Reference</strong></p>
<ul>
<li>
<p>logical relationship</p>
</li>
<li>
<p>size of is not known</p>
</li>
<li>
<p>resource is to be allocated / connected at run-time</p>
</li>
<li>
<p><em>Only C++ can use fully</em> </p>
</li>
</ul>
</li>
</ul>
<h3 id="inheritance">Inheritance</h3>
<blockquote>
<p>继承性，面向对象的重要思想</p>
</blockquote>
<ul>
<li>
<p>Advantage</p>
<ul>
<li>
<p>Avoid code duplication</p>
</li>
<li>
<p>Code reuse</p>
</li>
<li>
<p>Easier maintenance: 修改模块对其他模块影响小</p>
</li>
<li>
<p>Extendibility： 易于添加新功能</p>
</li>
</ul>
</li>
<li>
<p>可继承的成员</p>
<blockquote>
<p>本质上内存里父类对象会放在子类对象的前面（<em>可以将子类指针赋给父类指针</em>）</p>
</blockquote>
<ul>
<li>
<p><strong>public / protected</strong> member data</p>
</li>
<li>
<p><strong>public / protected</strong> member functions</p>
</li>
<li>
<p><em>static</em> 仍然为class-wide，依赖它的属性 </p>
</li>
</ul>
</li>
<li>
<p>Constructor &amp; Deconstructor</p>
<ul>
<li>
<p>构造先父类后子类</p>
</li>
<li>
<p>析构同样反向 </p>
</li>
</ul>
</li>
<li>
<p><strong>Name Hiding</strong></p>
<ul>
<li>
<p>一旦出现overload，则所有同名的函数都得覆写，否则父类的会被隐藏</p>
</li>
<li>
<p>可以使用 <code>using base::f;</code> 把它找出来</p>
</li>
</ul>
</li>
<li>
<p><strong>Inheritance Access Protection</strong></p>
<ul>
<li>
<p>public / protected / private: 定义继承的父类成员的访问权限</p>
</li>
<li>
<p>private: default(并不是OOP语意)</p>
</li>
<li>
<p>同样可以使用 <code>using</code> 改变访问权限，前提是要获得相应成员的访问权限，即可以将 <code>private/protected</code> 继承关系的部分成员改为 <code>public</code></p>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="polymorphism">Polymorphism</h3>
<blockquote>
<p>多态性，静态声明 &amp; 动态类型</p>
</blockquote>
<ul>
<li>
<p>Subtyping</p>
<p>子类对象可以赋给父类对象, 因为所有父类具有的派生类都有；同时可以通过多态机制（如虚函数等），使得父类指针可以调用子类特有功能</p>
<p><img alt="1714098664603" src="../image/OOP/1714098664603.png" /> </p>
</li>
<li>
<p>Up-casting</p>
<p>向上造型，子类对象赋给父类对象（指针 / 引用），不会丢失子类的信息</p>
<p>但是只能调用父类的成员，不能调用子类的成员</p>
</li>
<li>
<p><strong>virtual</strong></p>
<ul>
<li>
<p>定义一个接口，让编译器知道该函数将会被子类覆写，从而可以在Up-casting时用父类指针/引用调用子类函数</p>
</li>
<li>
<p>本质上是动态变量的绑定（dynamic binding），即在运行时根据dynamic type才确定调用的函数，而非编译时的静态绑定。因此速度会相对慢一点，除非编译器发现是静态绑定，会自动转为静态绑定</p>
<p>有个特殊的情况是默认参数，因为默认参数是在编译时确定的，因此会使用静态绑定，也就是调用<strong>当前指针</strong>类型的默认参数，而不是动态绑定的子类的默认参数</p>
</li>
<li>
<p>编译器执行静态检查，因此父类内的接口不可省略（只要父类定义为虚函数，子类中该函数就自动成为虚函数）</p>
</li>
<li>
<p><strong>构造函数和静态函数（没有类的vptr等）不能是虚函数，但是析构函数可以是虚函数</strong></p>
<p>类似的，一般虚函数无法内联，因为需要在运行时才能确定调用的函数；除非编译器发现是静态绑定 </p>
</li>
<li>
<p>内存存储：</p>
<p><strong>头部</strong>存一个vptr指针，且为实例构造时存入，具体如下：</p>
<ul>
<li>
<p><strong>vptr</strong>：虚函数表指针，指向虚函数表，存储虚函数的地址</p>
</li>
<li>
<p><strong>vtable</strong>：虚函数表，存储虚函数的地址</p>
</li>
<li>
<p><strong>vfunc</strong>：虚函数，存储函数的地址</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">g</span><span class="p">();</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">};</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">h</span><span class="p">();</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">};</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">B</span><span class="p">();</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="o">**</span><span class="n">vptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="o">**</span><span class="p">)</span><span class="n">p</span><span class="p">;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="o">*</span><span class="n">vtable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">vptr</span><span class="p">;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)())</span><span class="n">vtable</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w">    </span><span class="c1">//B::f</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">g</span><span class="p">)()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)())</span><span class="n">vtable</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w">    </span><span class="c1">//A::g</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">h</span><span class="p">)()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)())</span><span class="n">vtable</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w">    </span><span class="c1">//B::h</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="c1">// 关于函数调用，可以直接调用，也可以通过指针调用</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">    </span><span class="c1">// 但是注意到这样调用是没有传入this指针的，因此在函数内无法访问成员变量，但是函数调用本质上是指针还是可以的</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="c1">//(*f)();</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">    </span><span class="c1">//f();</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>纯虚函数：</p>
<ul>
<li>
<p><code>virtual Type F() = 0</code></p>
</li>
<li>
<p>只要存在一个纯虚函数，整个类成为抽象类，不能定义对象；其继承类必须实现所有纯虚函数，否则也成为抽象类</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>多继承</p>
<ul>
<li>virtual inheritance 处理菱形继承关系，不将父类放到子类中，而利用指针索引</li>
</ul>
</li>
</ul>
<hr />
<h3 id="overloading-operator">Overloading Operator</h3>
<ul>
<li>
<p>Can</p>
<p><img alt="1715911657490" src="../image/OOP/1715911657490.png" /></p>
</li>
<li>
<p>Can't</p>
<p><img alt="1715911919152" src="../image/OOP/1715911919152.png" /></p>
</li>
<li>
<p>Don't</p>
<p><code>&amp;&amp;</code> <code>||</code> <code>,</code></p>
</li>
</ul>
<h4 id="prototypes">ProtoTypes</h4>
<ul>
<li>
<p>Tips</p>
<p><img alt="1715913261767" src="../image/OOP/1715913261767.png" /></p>
</li>
<li>
<p>Member operator</p>
<p><em>注意，调用时左边应该为对象（左结合）</em></p>
<ul>
<li>
<p>binary</p>
<ul>
<li><code>T operator+(const T &amp;x)</code></li>
</ul>
</li>
<li>
<p>unary</p>
<ul>
<li><code>T operator-()</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Global operator</p>
<p><em>为了访问私有变量，可以使用 public / friend</em></p>
<ul>
<li>
<p>binary</p>
<ul>
<li><code>T operator+(const T &amp;x, const T &amp;y)</code></li>
</ul>
</li>
<li>
<p>unary</p>
<ul>
<li><code>T operator-(const T &amp;x)</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Some</p>
<p><img alt="1715913842344" src="../image/OOP/1715913842344.png" /></p>
<p><img alt="1715914279609" src="../image/OOP/1715914279609.png" /></p>
<p>(Relational, just need define <code>==</code> &amp; <code>&lt;</code>)</p>
<p><img alt="1715914907475" src="../image/OOP/1715914907475.png" /></p>
<p><img alt="1715915485582" src="../image/OOP/1715915485582.png" /></p>
<p><img alt="1715915499073" src="../image/OOP/1715915499073.png" /></p>
<p><img alt="1715915619644" src="../image/OOP/1715915619644.png" /></p>
<p><img alt="1715915874386" src="../image/OOP/1715915874386.png" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>这里检查自我赋值问题是考虑到 赋值时往往先将原本存储的数据释放，若不检查自我赋值则会导致数据丢失</p>
</div>
<p><img alt="1715916428225" src="../image/OOP/1715916428225.png" /></p>
</li>
</ul>
<h4 id="argument-passing">Argument passing</h4>
<ul>
<li>
<p>read-only argument: <code>const T &amp;x</code></p>
</li>
<li>
<p>const member function(not change <code>this</code>): <code>const T</code></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>最简单的理解方法，认为成员函数的参数列表跟python一样有一个 <code>this</code> 指针</p>
<p>如果是 <code>const</code> 成员函数，那么 <code>this</code> 指针是 <code>const</code>的，相当于会导致函数参数列表不同 </p>
</div>
</li>
<li>
<p>const result(can't be L-value): <code>const T</code></p>
</li>
<li>
<p>always use reference</p>
</li>
</ul>
<h4 id="type-conversion">Type conversion</h4>
<blockquote>
<p><code>explicit</code> to avoid <code>implicit conversion</code></p>
</blockquote>
<details class="info">
<summary>explicit</summary>
<p>当加上 <code>explicit</code> 时，只能通过 <code>T(x)</code> 显示转换，不能通过 <code>x</code> 隐式转换</p>
<p><em>可以避免一些不必要的隐式转换，如 <code>T a = 1;</code>，必须严格调用</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="k">explicit</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">};</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">//Error</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">A</span><span class="w"> </span><span class="nf">a</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">//OK</span>
</code></pre></div>
</details>
<p><img alt="1715916652058" src="../image/OOP/1715916652058.png" /></p>
<p><img alt="1715916854154" src="../image/OOP/1715916854154.png" /></p>
<hr />
<h2 id="static">Static</h2>
<ul>
<li>
<p>deprecated：（过时）</p>
<blockquote>
<p>限制外部访问</p>
</blockquote>
<ul>
<li>
<p>static free function</p>
</li>
<li>
<p>static global variables</p>
</li>
</ul>
</li>
<li>
<p>static local variables</p>
<ul>
<li>
<p>持久存储，多次调用保存上次的值    </p>
</li>
<li>
<p>本质上是 <strong>访问受限的全局变量</strong>，在函数被第一次调用时构造，在程序结束时析构(如果被构造了) </p>
</li>
</ul>
</li>
<li>
<p>static member variables</p>
<ul>
<li>
<p>所有对象共享，不属于对象，属于类</p>
</li>
<li>
<p>不能在类内初始化，需要在类外初始化，并且一定要初始化（相当于定义一个全局变量）</p>
<p><strong>static variable 需要全局定义申请内存空间（包括private / public）</strong> </p>
<p><code>Tp ClassName::StaticVariable = x;</code></p>
</li>
<li>
<p>可以通过类名访问，也可以通过对象访问</p>
</li>
</ul>
</li>
<li>
<p>static member function </p>
<ul>
<li>
<p>只能访问 static member variables</p>
</li>
<li>
<p>可以使用 <code>ClassName::Function()</code> 调用，也可以通过对象调用（<code>.</code> / <code>-&gt;</code>）  </p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="reference">Reference</h2>
<p><code>Tp &amp;x = v</code></p>
<p><strong>本质上相当于给变量起了一个别名，方便变量的引用，不会分配内存空间（否则对于一个对象的拷贝可能开销过大）</strong></p>
<p><strong>实质上就是使用指针实现的，但是注意引用不能为空，所以引用这个“语法糖”会更加安全</strong></p>
<ul>
<li>
<p>在定义时初始化为一个左值，且不能改变指向 (左值引用<code>&amp;</code>)</p>
</li>
<li>
<p>在定义时初始化为一个右值，且可以改变指向，相当于记下了一个临时变量 (右值引用<code>&amp;&amp;</code>)</p>
</li>
</ul>
<blockquote>
<p>No pointers to references <code>(Tp&amp;) *p</code></p>
<p>References to pointers OK <code>(Tp*) &amp;p</code></p>
</blockquote>
<ul>
<li>
<p><em>Left value &amp; Right value</em></p>
<ul>
<li>
<p>Left value: <code>.</code> <code>[]</code> <code>-&gt;</code> <code>*</code></p>
</li>
<li>
<p>Right value: others  </p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="const">Const</h2>
<blockquote>
<p><strong>不可赋值（可以在创建时初始化一次）</strong></p>
</blockquote>
<ul>
<li>
<p>const &amp; pointer</p>
<p>观察<code>*</code>位置</p>
<ul>
<li>
<p>const 在 <code>*</code> 前，说明指向的内容不可修改</p>
</li>
<li>
<p>const 在 <code>*</code> 后，说明该指针不可修改</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>可以将一个变量的地址赋给一个指向常量的指针，但是不能将一个指向常量的指针赋给一个普通指针</p>
<p>原因是显然的，不能通过指针修改常量的值</p>
</div>
</li>
<li>
<p>声明 const function</p>
<ul>
<li>
<p><code>const</code> 修饰函数，表示该函数不会修改成员变量  (const *this)</p>
</li>
<li>
<p>因此，const object 只能调用 const function, 使编译器能够检查错误</p>
</li>
<li>
<p>*建议能加 const 的函数都加上，比如const对象默认只能调用const/static函数，本质上类的成员函数的附带指针 <code>this</code> 就是 <code>Class *const</code> ，加了const后就是 <code>const Class *const</code> *</p>
</li>
</ul>
</li>
<li>
<p>关于定义数组 [const size]：</p>
<ul>
<li>
<p>本地变量可以直接使用，因为在函数内可以自由分配栈空间</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">n</span><span class="p">];</span><span class="c1">//OK</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>对象成员的数组定义不能用size，哪怕已经直接初始化，因为编译器不能确定（const 常量可能在初始化列表中被重新初始化）</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span><span class="w">  </span><span class="c1">//Error</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="n">A</span><span class="p">()</span><span class="o">:</span><span class="n">n</span><span class="p">(</span><span class="mi">6</span><span class="p">){}</span><span class="w">  </span><span class="c1">// Legal and powerful</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="c1">// Thus &quot;change&quot; the n to 6 when the object is constructed</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="p">};</span>
</code></pre></div>
</li>
<li>
<p>enum &amp; static 可以用来定义数组大小</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">};</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">n</span><span class="p">];</span><span class="w">  </span><span class="c1">//OK</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">[</span><span class="n">m</span><span class="p">];</span><span class="w">  </span><span class="c1">//OK</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="p">};</span>
</code></pre></div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果要使用其他文件中的 const 变量，并且没有引用相应的头文件，需要在<strong>定义</strong>（赋初值）时加上 <code>extern</code> 关键字</p>
</div>
</li>
</ul>
<hr />
<h2 id="new-delete">New &amp; Delete</h2>
<blockquote>
<p>new 动态申请空间，返回指针</p>
<p>delete ([ ]) p 释放空间，[ ] 取决于单一对象还是数组</p>
<p>本质上是运算符</p>
</blockquote>
<ul>
<li>
<p>new的实质 </p>
<ul>
<li>
<p>申请的空间没有默认初始值（直接给内存中的垃圾值），可以用 <code>{}</code> 初始化</p>
</li>
<li>
<p>对于对象，需要有默认构造函数才能满足默认构造 </p>
</li>
<li>
<p>前面有一个标记头，记录了口令和大小，用于 delete 时检查; 之后是实际申请的空间</p>
</li>
</ul>
</li>
<li>
<p>delete的实质</p>
<ul>
<li>
<p>检查对象的析构函数，<strong>并调用析构（在释放内存前）</strong></p>
</li>
<li>
<p>往前走一个单位，检查口令和空间大小，不对会抛出异常</p>
</li>
<li>
<p>不加 [ ] 只会释放第一个对象的空间，而不会释放记录的空间大小，同时系统也会失去这部分内存的信息（最后不再调用剩余的析构）</p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="default-argument">Default argument（默认参数）</h2>
<ul>
<li>
<p>默认参数“从右往左连续写”</p>
</li>
<li>
<p>默认参数值是静态的（编译器处理），<strong>在声明中写默认值，不能在定义中写</strong> </p>
<ul>
<li>
<p>因此本质上是定义了一个带参函数，小心重载时的重复错误</p>
</li>
<li>
<p><em>头文件内定义的默认值可能会被篡改</em></p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="inline">Inline（内联）</h2>
<blockquote>
<p>本质上相当于将函数代码直接拷贝到当前代码块中（<strong>直接添加到当前文件的.obj中，而不是后续通过link连接</strong>），避免函数调用的开销</p>
<p><strong>inline 函数（包括body）相当于声明，不是定义（也可以理解成 <code>inline</code> 一定要在定义上使用），因此要整个放在头文件中，让编译器处理。编译器不会分配函数空间，而是直接将对应指令“抄下来”，在需要的地方直接填上去。</strong></p>
</blockquote>
<ul>
<li>
<p>会增长代码，本质上是用“空间换时间”</p>
</li>
<li>
<p>inline 函数复杂时可能会被编译器放弃 inline</p>
<p>一般是比较短小且频繁调用的函数</p>
<p>~~递归不适合~~</p>
</li>
<li>
<p>class 成员函数加上 body 直接默认 inline，无需特殊标记</p>
<p><em>当长度过长时，可以在头文件内用 inline 声明， 然后直接将定义写在下方（都在头文件内，都加inline）</em></p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">虚函数</p>
<p>虚函数也可以成为内联函数，但由于内联函数是在编译时展开，而虚函数是在运行时动态绑定，因此虚函数内联只有在编译器可以确定调用的函数时才会展开（如对象直接调用，而不是指针调用），否则会按照虚函数的方式动态调用。</p>
</div>
<hr />
<h2 id="namespace">Namespace</h2>
<blockquote>
<p>Expresses a logical grouping of classes, functions, variables, etc.</p>
<p><em>{}末尾没有 分号 作为结束</em></p>
</blockquote>
<ul>
<li>
<p><code>::</code></p>
<ul>
<li>
<p><code>::</code> 全局作用域</p>
</li>
<li>
<p><code>class::</code> 类作用域</p>
</li>
<li>
<p><code>namespace::</code> 命名空间作用域  </p>
</li>
</ul>
</li>
<li>
<p>using 简化</p>
<ul>
<li>
<p><code>using namespace Name;</code></p>
<p><code>using Name::Func;</code></p>
<p><code>using Name::Class;</code></p>
</li>
<li>
<p>using 可能会导致同名成员冲突，但是只有调用冲突成员时才会报错，using并不会马上报错。为了解决冲突问题，可以通过显式指明命名空间。</p>
</li>
</ul>
</li>
<li>
<p>alias 重命名</p>
<ul>
<li><code>namespace NewName = OldName;</code></li>
</ul>
</li>
<li>
<p>代替<code>typedef</code></p>
<ul>
<li><code>using TypeName = OldType;</code></li>
</ul>
</li>
<li>
<p>openness</p>
<ul>
<li>同一个命名空间可以分布在多个文件中</li>
</ul>
</li>
</ul>
<hr />
<h2 id="template">Template</h2>
<blockquote>
<p>generic programming（泛型编程）</p>
</blockquote>
<ul>
<li>
<p>Function Template</p>
<p>本质上也是声明，由编译器发现相关调用后创建，因此需要在头文件中定义</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">T</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">}</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1">//强制类型调用</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">func</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>模板函数必须保证调用的参数类型完全一致，自动类型转换无效！</p>
</div>
<details class="tip">
<summary>函数调用顺序</summary>
<ol>
<li>
<p>精确类型</p>
</li>
<li>
<p>精确模板</p>
</li>
<li>
<p>overloading</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">){</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Template&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;}</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">template</span><span class="o">&lt;&gt;</span><span class="w">  </span><span class="c1">// 特化</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">){</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;}</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">){</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Function&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;}</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(){</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="c1">// 直接定义的优先，然后是精确特化的模板函数，最后才是函数模板                     </span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="p">}</span>
</code></pre></div>
</details>
</li>
<li>
<p>Class Template</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="p">};</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="n">T</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="p">}</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="c1">// 调用</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="n">A</span><span class="o">&lt;</span><span class="n">type</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</code></pre></div>
</li>
<li>
<p>拓展用法</p>
<ul>
<li>
<p>多个模板参数</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">U</span><span class="w"> </span><span class="p">...</span><span class="o">&gt;</span>
</code></pre></div>
</li>
<li>
<p>嵌套模板</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w">    </span><span class="c1">//现代编译器无所谓那个空格了</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="c1">//函数指针</span>
</code></pre></div>
</li>
<li>
<p>默认参数</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">para</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="o">&gt;</span><span class="w">  </span><span class="c1">// 内部相当于一个字面量</span>
</code></pre></div>
</li>
<li>
<p>继承模板</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>friend</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="k">friend</span><span class="w"> </span><span class="n">T</span><span class="p">;</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>static member</p>
<p>相当于每种类型都有一个独立的 static member</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="p">}</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>
</li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>一般模板（类）函数的定义和声明必须在同一个头文件中，因为模板在编译阶段实例化，否则会报错</strong></p>
<p><em>还有一种很笨的方法可以将他们分开：直接在头文件中挨个定义相关的模板类</em></p>
</div>
<hr />
<h2 id="exception">Exception</h2>
<details class="danger">
<summary>处理异常办法</summary>
<ol>
<li>
<p>直接终止程序</p>
</li>
<li>
<p>返回错误码(简单可行)</p>
</li>
<li>
<p>抛出异常  </p>
</li>
</ol>
</details>
<ul>
<li>
<p><strong>throw</strong></p>
<p>可以用<code>throw</code>关键字来声明过程可能发生的异常(实际在C++11开始已经不推荐使用了，因为不是在编译时检查)</p>
<p>若抛出非法异常，程序会终止，触发<code>std::bad_exception</code>，调用<code>std::unexpected()</code>函数(默认终止程序，可以人为覆写<code>std::set_unexpected(func)</code>)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="k">throw</span><span class="p">(</span><span class="n">Type1</span><span class="p">,</span><span class="w"> </span><span class="n">Type2</span><span class="p">);</span><span class="w"> </span><span class="c1">//只能抛出Type1, Type2</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="k">throw</span><span class="p">(...);</span><span class="w"> </span><span class="c1">//可以抛出任何异常,貌似会报错，不如不写</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="k">throw</span><span class="p">();</span><span class="w"> </span><span class="c1">//不抛出异常</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="k">noexcept</span><span class="p">;</span><span class="w"> </span><span class="c1">//不抛出异常</span>
</code></pre></div>
</li>
<li>
<p><strong>try-catch</strong></p>
<p>handler 选择原则：</p>
<ul>
<li>
<p>对于一般类型，会选择精确的匹配，一般不会自动转换</p>
</li>
<li>
<p>对于类，会使用<strong>“is-a”</strong>关系进行逐条判断，因此子类的异常处理应该放在父类前面</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="o">&amp;</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 一般用引用，避免拷贝</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// ... 表示捕获所有异常</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">    </span><span class="k">throw</span><span class="p">;</span><span class="w">  </span><span class="c1">// propagate, 继续向上层抛出同样的异常，只能在catch中使用</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>std::exception</p>
<p><img alt="1717408534157" src="../image/OOP/1717408534157.png" /></p>
</li>
<li>
<p>special case</p>
<ul>
<li>
<p>constructor</p>
<p>分两步：先进行成员基本初始化（<strong>指针赋0</strong>），再申请内存空间等资源，如果失败则抛出异常</p>
<p>否则若中途抛出异常，如内存分配了一半，指针还未赋值，析构函数无法释放内存，造成内存泄漏</p>
</li>
<li>
<p>destructor</p>
<p>会触发<code>std::terminate()</code>函数，因此析构函数不应该抛出异常，应该在设计时避免</p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="smart-pointer">Smart Pointer</h2>
<blockquote>
<p>A reference count is a count of the number of times an object is shared</p>
<p>UCObject: Use-Count Object</p>
<p>UCPointer: Smart Use-Count Pointer point to UCObject</p>
</blockquote>
<p><img alt="1717729817519" src="../image/OOP/1717729817519.png" /></p>
<p>新建对象：新建临时UCP -&gt; UCP赋值 -&gt; UCP 析构</p>
<ul>
<li>
<p><code>static_cast</code></p>
<p>静态转换，如默认类型间，子类指针当父类</p>
<p><em>不会进行运行时类型检查，不安全</em></p>
</li>
<li>
<p><code>dynamic_cast</code></p>
<p>动态转换，如多态类型间，父类当子类等down-casting</p>
<p><em>会在cast时进行动态类型检查，若检查出错，如父类当子类，会使得相应的结果为0</em></p>
</li>
<li>
<p><code>const_cast</code></p>
<p>用于修改（去掉）类型的const和volatile（必须与内存交互，不可暂存寄存器）属性</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">const_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="c1">//ok</span>
</code></pre></div>
</li>
<li>
<p><code>reinterpret_cast</code></p>
<p>重新解释类型，如指针和整数间的转换，几乎支持所有类型的转换</p>
<p><em>不会进行类型检查，可能会破坏结构，不安全</em></p>
</li>
</ul>
<hr />
<h2 id="stream">Stream</h2>
<details class="note">
<summary>background</summary>
<p><img alt="1718589909064" src="../image/OOP/1718589909064.png" /></p>
</details>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>一般C类（scanf/printf）与C++类（cin/cout）不要混用，因为各自的缓冲区不同，可能会出现问题</p>
</div>
<p><img alt="1718590641763" src="../image/OOP/1718590641763.png" /></p>
<p>（都是 istream/ostream 的子类）</p>
<ul>
<li>
<p>流的特性</p>
<ul>
<li>
<p>单向流动</p>
</li>
<li>
<p>一维</p>
</li>
<li>
<p>不停流动，只能读取暂时的片段</p>
</li>
</ul>
</li>
<li>
<p>Operations</p>
<ul>
<li>
<p>Extractor</p>
<p><img alt="1718591900144" src="../image/OOP/1718591900144.png" />
（cerr由 2&gt; 重定向）</p>
<ul>
<li>
<p>Text Stream</p>
<ul>
<li>
<p>可读</p>
</li>
<li>
<p>以行为单位</p>
</li>
<li>
<p>可能会被操作系统等进行翻译（如unix的\n）</p>
</li>
</ul>
</li>
<li>
<p>Binary Stream</p>
<ul>
<li>
<p>二进制流</p>
</li>
<li>
<p>以字节为单位，不会被翻译修改</p>
</li>
</ul>
</li>
</ul>
<p><img alt="1718592620269" src="../image/OOP/1718592620269.png" /></p>
<p>（相当于把cin.get()的参数写到了get函数参数里）</p>
<p><img alt="1718592357164" src="../image/OOP/1718592357164.png" /></p>
<p>(一般不使用cin.getline(char*, int)，因为要预先构造一个char数组，不如直接用string)</p>
</li>
<li>
<p>Inserter</p>
<p><img alt="1718592723094" src="../image/OOP/1718592723094.png" /></p>
<p>（Flush只能刷新当前文件的缓冲区，不一定刷新系统缓冲区）</p>
</li>
<li>
<p>Manipulators</p>
<p><code>#include &lt;iomanip&gt;</code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>一般 manipulator 都是一直有效的，直到下一个 manipulator 出现</p>
</div>
<ul>
<li>
<p>manip</p>
<p><img alt="1718592945298" src="../image/OOP/1718592945298.png" /></p>
</li>
<li>
<p>create manip</p>
<p><img alt="1718593154217" src="../image/OOP/1718593154217.png" /></p>
</li>
<li>
<p>flag</p>
<p>每一个 flag 都用一个 word 里的一个 bit 表示，因此可以直接用 <code>setf()</code> 和 <code>unsetf()</code> 来设置</p>
<p><img alt="1718593115924" src="../image/OOP/1718593115924.png" /></p>
<p><img alt="1718593893040" src="../image/OOP/1718593893040.png" /></p>
<details class="example">
<summary>Example</summary>
<p><img alt="1718593957565" src="../image/OOP/1718593957565.png" /></p>
</details>
<p><img alt="1718593401719" src="../image/OOP/1718593401719.png" /></p>
<details class="example">
<summary>Example</summary>
<p><img alt="1718593455167" src="../image/OOP/1718593455167.png" /></p>
</details>
</li>
</ul>
</li>
<li>
<p>Others</p>
<p><img alt="1718592317201" src="../image/OOP/1718592317201.png" /></p>
<p><img alt="1718592445349" src="../image/OOP/1718592445349.png" /></p>
<p><img alt="1718592697348" src="../image/OOP/1718592697348.png" /></p>
</li>
</ul>
</li>
<li>
<p>States</p>
<p><img alt="1718593526361" src="../image/OOP/1718593526361.png" /></p>
<p><img alt="1718593552506" src="../image/OOP/1718593552506.png" /></p>
<details class="example">
<summary>Example</summary>
<p><img alt="1718593742876" src="../image/OOP/1718593742876.png" /></p>
</details>
</li>
</ul>
<hr />
<h2 id="design">Design</h2>
<ul>
<li>
<p>Class Design:</p>
<ul>
<li>
<p>understandable</p>
</li>
<li>
<p>maintainable</p>
</li>
<li>
<p>reusable</p>
</li>
</ul>
</li>
<li>
<p>Software Change:</p>
<ul>
<li>extended, maintained, ported, adapted</li>
</ul>
</li>
<li>
<p>Code quality:</p>
<ul>
<li>
<p>Coupling（耦合）</p>
<p>模块联系的紧密程度，越低越好（loose coupling），从而提高可维护性</p>
<ul>
<li>
<p>不需要知道对方的内部实现</p>
</li>
<li>
<p>修改一个模块不会影响其他模块(会影响所有依赖于当前模块的模块)</p>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">解耦</p>
<ul>
<li>
<p>call-back</p>
<p>Actor依赖于Button, 从而Button不再依赖于Actor，可以重用</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Listener</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onEvent</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="p">}</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Listener</span><span class="p">{</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="n">Listener</span><span class="w"> </span><span class="o">*</span><span class="n">listener</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setListener</span><span class="p">(</span><span class="n">Listener</span><span class="w"> </span><span class="o">*</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">        </span><span class="n">listener</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">;</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">onEvent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="p">}</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="k">class</span><span class="w"> </span><span class="nc">Actor</span><span class="p">{</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">    </span><span class="n">Actor</span><span class="p">(</span><span class="n">Button</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">        </span><span class="n">button</span><span class="o">-&gt;</span><span class="n">setListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">onEvent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="p">}</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="k">class</span><span class="w"> </span><span class="nc">Button</span><span class="p">{</span>
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">    </span><span class="n">Event</span><span class="w"> </span><span class="o">*</span><span class="n">event</span><span class="p">;</span>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">onClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="w">        </span><span class="n">event</span><span class="o">-&gt;</span><span class="n">onEvent</span><span class="p">();</span>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>message mechanism</p>
<p>常用两种方式：</p>
<ol>
<li>
<p>通过中央媒介进行字符串消息传递，不知道具体模块信息</p>
</li>
<li>
<p>由一个中间模块统一注册各个角色</p>
</li>
</ol>
</li>
</ul>
</div>
<ul>
<li>
<p>Cohesion（内聚）</p>
<p>一个模块所承担的功能聚焦在一起，功能的多样性越少越好</p>
<p>一个模块只负责一个业务逻辑 -&gt; high cohesion</p>
</li>
</ul>
</li>
<li>
<p>Code Duplication</p>
<ul>
<li>设计问题，且非常难以维护</li>
</ul>
</li>
<li>
<p>Responsibility-driven design</p>
<ul>
<li>
<p>新增功能时，应该考虑哪个类应该负责这个功能</p>
</li>
<li>
<p>每个类应该只能负责处理自己的数据（<strong>应该从数据出发设计类</strong>），从而 localizing change</p>
</li>
</ul>
</li>
<li>
<p>Refactoring</p>
<ul>
<li>
<p>重构代码，使代码更易于理解和维护，重构的目的是为了提高代码质量，使代码更易于理解和维护</p>
</li>
<li>
<p>重构的原则是：不改变代码的功能，只改变代码的结构</p>
</li>
<li>
<p><strong>回归测试：</strong>重构后的代码要进行回归测试，确保重构后的代码没有引入新的bug</p>
</li>
</ul>
</li>
</ul>
<hr />
<hr />
<h2 id="volatile">*Volatile</h2>
<p>表示变量可能会在外部被修改（如外部中断等），因此编译器不会对其进行优化，每次都会重新读取，而不会使用寄存器缓存</p>
<p>甚至指针、const等都无法保证其不被修改</p>
<hr />
<h2 id="extern">*Extern 特殊用法</h2>
<ul>
<li>
<p>由于C与C++ <code>*.o</code> 文件的不同，C++由于支持函数重载会在编译时将函数名改变来附带参数信息，而C不会，因此在C++中调用C函数时需要使用 <code>extern "C" {}</code> 来避免这种情况</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1">//xx.h</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(...)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="c1">//xx.c</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">add</span><span class="p">(){</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="p">}</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="c1">//xx.cpp</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;xx.h&quot;</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>反过来，如果C中调用C++函数，也需要在CPP文件中使用 <code>extern "C" {}</code> 来避免这种情况</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="c1">//xx.h</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">();</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="p">}</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="c1">//xx.cpp</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">add</span><span class="p">(){</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="p">}</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="c1">//xx.c</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">add</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
</li>
</ul>
<p>需要注意的是，上面这两种方法编译时都需要先编译成 <code>*.o</code> 文件，然后再链接，否则会出现找不到函数的情况</p>
<hr />
<h2 id="union">*Union</h2>
<p><img alt="1719329942755" src="../image/OOP/1719329942755.png" /></p>
<hr />
<h2 id="enum">*Enum</h2>
<p>一般的 <code>enum</code> 在当前作用域内相当于是全局的，相互之间没有隔离，因此可能会造成重名错误</p>
<ul>
<li>
<p>Enum class</p>
<ul>
<li>
<p>限制枚举的作用域，避免全局污染</p>
</li>
<li>
<p>限制枚举的隐式转换</p>
</li>
<li>
<p>限制枚举的取值范围</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Color</span><span class="w"> </span><span class="p">{</span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">};</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">Color</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="o">::</span><span class="n">red</span><span class="p">;</span>
</code></pre></div>
</li>
</ul>
<hr />
<h2 id="define">*Define</h2>
<ul>
<li>
<p><code>#</code> 用于将参数转换为字符串，并且会自动忽略参数两边的空格，若有多个参数则会自动连接并用一个单一空格隔开</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="cp">#define PRINT(x) cout &lt;&lt; #x &lt;&lt; endl;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="n">PRINT</span><span class="p">(</span><span class="w">   </span><span class="mi">123</span><span class="w">   </span><span class="mi">456</span><span class="w">   </span><span class="p">);</span><span class="w"> </span><span class="c1">// cout &lt;&lt; &quot;123 456&quot; &lt;&lt; endl;</span>
</code></pre></div>
</li>
<li>
<p><code>##</code> 用于将两个参数连接在一起，且自动忽略空格，成为一个新的元素，并且若参数中存在另外的宏定义，也会阻止宏定义的展开</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="cp">#define PRINT(x, y) cout &lt;&lt; x##y &lt;&lt; endl;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="n">PRINT</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">);</span><span class="w"> </span><span class="c1">// cout &lt;&lt; 123456 &lt;&lt; endl;</span>
</code></pre></div>
</li>
<li>
<p><code>\</code> 用于将写不下的宏定义延续到下一行</p>
</li>
<li>
<p><code>do { ... } while(0)</code> 用于将多条语句作为一个整体，避免多条语句被拆开的问题</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.top", "navigation.sections"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/wsqstar/ResHosting@0.031/build/js/Sakura.js"></script>
      
    
  </body>
</html>