{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to FF's Notebooks","text":""},{"location":"#some-interesting-cs-courses","title":"Some interesting CS Courses","text":""},{"location":"#_1","title":"\u5927\u4e00","text":"<ul> <li>x86 ASM<ul> <li>Taught by BHH, a hacker in my dream.</li> <li>One of the most meaningful classes I've taken, where I learn from hardware implementation in computer (My fundation on ICS) to basic x86 ASM compiling and programming. </li> </ul> </li> </ul>"},{"location":"#_2","title":"\u5927\u4e8c\u4e0a","text":"<ul> <li> <p>Digit Logic Design</p> <ul> <li>Taught by CM, one of the best teacher I've met.</li> <li>Concretely learn the basic digit design, and some basic hardware programming (Verilog)</li> </ul> </li> <li> <p>CS231n</p> <ul> <li>My work in learning CS231n</li> <li>It's truly the best course for me to learn CV<ul> <li>Give me a preliminary understanding of CV</li> <li>Introduce many popular and typical Algorithms, FC, CNN, RNN, Transformer, GAN, Self-Supervised \u2026\u2026</li> <li>Leads me to try to read some famous papers by myself</li> <li>Help me gain a deeper insight into the model with moderately difficult project which can be auto-checked </li> </ul> </li> </ul> </li> </ul>"},{"location":"#_3","title":"\u5927\u4e8c\u4e0b","text":"<ul> <li> <p>ADS</p> <ul> <li>Taught by CH, my senior and a intelligent researcher </li> <li>Learn some advanced data structures, algorithm, and some advanced analysis</li> <li>Despite of my experience in Informatics Olympiad, I still feel it challenging</li> </ul> </li> <li> <p>OOP</p> <ul> <li>Taught by WK, a famous teacher in ZJU</li> <li>Learn some basic OOP concepts and some advanced design patterns using C++</li> <li>Additionally, I learn some advanced knowledge about C++ following the CPlusPlusThings</li> </ul> </li> <li> <p>Information Theory</p> <ul> <li>Taught by YGD, a professor in ZJU</li> <li>Learn some basic information theory, which is significant in machine learning theory especially in proof, so I think it's necessary to take this course carefully and take notes</li> </ul> </li> <li> <p>Database</p> <ul> <li>Taught by MXY, a gentle professor and Big Data scholar in ZJU</li> <li>Learn basic and advanced database concepts and SQL programming</li> <li>Too many points, so I choose to fork other people's notes and take some notes by myself</li> <li>link</li> </ul> </li> <li> <p>Computer Organization</p> <ul> <li>Taught by YK, a professor in ZJU</li> <li>Learn some deep computer organization concepts of RISC-V structure(Single Cycle CPU, Pipelined-CPU, Cache...), which is significant in computer architecture especially in hardware design, so I think it's necessary to take this course carefully and take notes</li> <li>Since I'm so busy in this semester, I choose to fork other people's notes and only take some additional notes</li> </ul> </li> </ul>"},{"location":"#_4","title":"\u5927\u4e09\u4e0b","text":"<p>\uff5e\u8ff7\uff5e\u5fd9\uff5e\uff0c\u4e0d\u77e5\u9053\u5e72\u5565\u4e86\uff0c\u8bfe\u7a0b\u7b14\u8bb0\u4e3b\u8981fork\u522b\u4eba\u7684\u505a\u4e00\u4e9b\u5fae\u8c03</p> <ul> <li> <p>Computer Architecture</p> <ul> <li>Taught by WXH, a professor in ZJU</li> <li>Learn some deep computer architecture concepts of RISC-V structure as \"Computer Organization Plus\".</li> </ul> </li> <li> <p>Network</p> <ul> <li>Taught by ZKG, an interesting professor in ZJU</li> <li>Learn some basic network concepts and some advanced network programming</li> </ul> </li> <li> <p>Operating System</p> <ul> <li>Taught by SJW, a responsible professor in ZJU</li> <li>Learn some basic OS concepts and some advanced OS programming</li> </ul> </li> </ul>"},{"location":"#some-useful-tools-in-learning","title":"Some useful tools in learning","text":"<ul> <li> <p>Git</p> <ul> <li>Undoubtedly one of the most useful tools as distributed version control system</li> <li>Workspace history recorded</li> <li>Remote workspace storage &amp; cooperation</li> </ul> </li> <li> <p>Makefile &amp; CMake</p> <ul> <li>Makefile is a tool to compile and link multiple source codes</li> <li>CMake is a efficient tool to help generate Makefile (Basically learned to tutorial STEP3)</li> </ul> </li> </ul>"},{"location":"#collections-of-materials","title":"Collections of Materials","text":"<ul> <li> <p>AI Materials</p> <ul> <li>Record some useful and famous papers and resources in my AI learning. </li> </ul> </li> <li> <p>My AI repositoy</p> <ul> <li>Some little notes of my AI trying. </li> </ul> </li> </ul>"},{"location":"ADS/","title":"ADS","text":"<p>\u7b2c\u4e00\u8282\u8bfe\u5c31\u8bb2\u4e86AVL+Splay+\u644a\u8fd8\u5206\u6790\uff0c\u8ba9\u4fe1\u606f\u7ade\u8d5b\u9000\u5f79\u9009\u624b\u7684\u6211\u5df2\u7ecf\u6c57\u6d41\u6d43\u80cc\u2026\u2026</p>"},{"location":"ADS/#_1","title":"\u671f\u672b\u6982\u5ff5\u6574\u7406","text":"<p>\u56fe\u8bba</p> <ul> <li> <p>Vertex Cover\uff1a \u6700\u5c0f\u9876\u70b9\u8986\u76d6\uff0c\u6700\u5c11\u7684\u9876\u70b9\u4f7f\u5f97\u6bcf\u6761\u8fb9\u81f3\u5c11\u6709\u4e00\u4e2a\u7aef\u70b9\u5728\u5176\u4e2d</p> <p>$\\pho </p> </li> <li> <p>Independent Set\uff1a \u6700\u5927\u72ec\u7acb\u96c6\uff0c\u6700\u591a\u7684\u9876\u70b9\u4f7f\u5f97\u4efb\u610f\u4e24\u4e2a\u9876\u70b9\u4e0d\u76f8\u90bb</p> </li> <li> <p>Dominating Set\uff1a \u6700\u5c0f\u652f\u914d\u96c6\uff0c\u6700\u5c11\u7684\u9876\u70b9\u4f7f\u5f97\u6bcf\u4e2a\u9876\u70b9\u6216\u8005\u5728\u5176\u4e2d\uff0c\u6216\u8005\u4e0e\u5176\u4e2d\u7684\u67d0\u4e2a\u9876\u70b9\u76f8\u90bb</p> </li> <li> <p>Clique\uff1a \u6700\u5927\u56e2\uff0c\u6700\u591a\u7684\u9876\u70b9\u4f7f\u5f97\u56e2\u5185\u4efb\u610f\u4e24\u4e2a\u9876\u70b9\u76f8\u90bb</p> </li> <li> <p>Vertex Cut\uff1a\u6700\u5c0f\u5272\uff0c\u5220\u6389\u70b9\u4f7f\u5f97\u56fe\u4e0d\u8fde\u901a</p> </li> <li> <p>Max Cut\uff1a\u4ea4\u53c9\u7684\u8fb9\u6743\u503c\u548c\u6700\u5927</p> <p></p> </li> </ul> <p>\u6027\u8d28\uff1a</p> <p>\u4e8c\u5206\u56fe\uff1a\u6700\u5c0f\u5272 = \u6700\u5927\u5339\u914d = \u6700\u5c0f\u70b9\u8986\u76d6 = n-\u6700\u5927\u72ec\u7acb\u96c6</p>"},{"location":"ADS/#data-structrure","title":"Data Structrure","text":""},{"location":"ADS/#avl","title":"AVL","text":"<p>\u5b9a\u4e49\uff1a\u4efb\u610f\u8282\u70b9\u5de6\u53f3\u5b50\u6811\u9ad8\u5ea6\u5dee\u4e0d\u5927\u4e8e1</p> <p>Balance factor = \\(h_L - h_R \\in \\set{-1, 0, 1}\\)</p> <ul> <li> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1a</p> <ul> <li> <p>\u5bf9\u4e8e\u5e38\u89c1\u64cd\u4f5c\uff08\u63d2\u5165\u3001\u5220\u9664\u3001\u67e5\u8be2\uff09\\(O(h)\\)</p> </li> <li> <p>\u7531\u5b9a\u4e49\uff0c\u8ba9\u9ad8\u5ea6\u6700\u5927\uff0c\u6709\\(N_{h} = N_{h-1} + N_{h-2} + 1\\)</p> </li> <li> <p>\u5316\u7b80\uff0c\u5f97\u5230\\((N_{h} + 1)= (N_{h-1} + 1) + (N_{h-2} + 1)\\)</p> </li> <li> <p>\u7531\u6590\u6ce2\u90a3\u5951\u6570\u5217\u76f8\u5173\u77e5\u8bc6\uff0c\u5f97\\(N_h = F_{h+3} - 1\\) (\u7a7a\u6811\u4e3a-1)</p> </li> <li> <p>\u7531\u6b64\u53ef\u5f97\uff0c\\(h = O(\\log N)\\)</p> </li> </ul> </li> <li> <p>\u7ef4\u62a4\uff08Rotation\uff09</p> <ul> <li> <p>\u7531\u5b9a\u4e49\u7684\u4e25\u683c\u6027\uff0c\u53ef\u77e5\u53ea\u8981\u5904\u7406\u6700\u5c0f\u4e0d\u5e73\u8861\u5b50\u6811\u5373\u53ef\uff0c\u5e76\u4e14\u4e0a\u9762\u8fd8\u6709\u53ef\u80fd\u4e0d\u5e73\u8861\uff0c\u63d2\u5165\u7684\u65cb\u8f6c\u590d\u6742\u5ea6\u4e3a \\(O(1)\\)\uff0c\u5220\u9664\u7684\u65cb\u8f6c\u590d\u6742\u5ea6\u4e3a \\(O(h)\\)</p> </li> <li> <p>\u4e2a\u4eba\u611f\u89c9\u65cb\u8f6c\u53cd\u800c\u4e0d\u591f\u76f4\u89c2\uff0c\u66f4\u50cf\u662f\u5c06\u4e0b\u9762\u7684\u8282\u70b9\u5f80\u4e0a\u9762\u201c\u62ce\u201d\u8d77\u6765\uff0c\u4ece\u800c\u8be5\u8282\u70b9\uff08\u5b50\u6811\u6839\u8282\u70b9\uff09\u7684\u5404\u4e2a\u513f\u5b50\u5411\u4e24\u8fb9\u201c\u6389\u4e0b\u53bb\u201d\uff0c\u6574\u68f5\u5b50\u6811\u4e5f\u5c31\u50cf\u662f\u88ab\u5c55\u5e73\u4e86\u4e00\u6837\u66f4\u52a0\u5e73\u8861\u4e86\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u66f4\u65b0\u7684\u8282\u70b9\u5728\u4e0b\u65b9\uff0c\u800c\u771f\u6b63\u5904\u7406\uff08\u5373\u7ed3\u6784\u62a5\u9519\uff09\u7684\u8282\u70b9\u5728\u4e0a\u65b9\u4f5c\u4e3aGrandparent</p> </li> <li> <p>LL / RR Rotation</p> <ul> <li> <p>\u5355\u94fe\u503e\u659c\uff0c\u5c06\u4e2d\u95f4\u8282\u70b9\u62ce\u8d77\u6765\uff08\u5c06\u4e2d\u95f4\u8282\u70b9\u5411\u4e0a\u65cb\u8f6c\uff09\u5c31\u597d</p> </li> <li> <p></p> </li> </ul> </li> <li> <p>LR / RL Rotation</p> <ul> <li> <p>\u5f2f\u66f2\u94fe\uff0c\u5c06\u6743\u503c\u4e3a\u4e2d\u95f4\u503c\uff08\u6700\u4e0b\u7aef\u513f\u5b50\uff09\u7684\u8282\u70b9\u62ce\u8d77\u6765\uff0c\u8be5\u8282\u70b9\u7684\u4e24\u4e2a\u513f\u5b50\u5206\u522b\u5411\u4e24\u8fb9\u6389\u4e0b\u53bb</p> </li> <li> <p>\u8fd8\u6709\u4e00\u79cd\u7406\u89e3\uff0c\u5c06\u8fd9\u79cd\u60c5\u51b5\u7406\u89e3\u4e3a\u6700\u4e0b\u7aef\u513f\u5b50\u5411\u4e0arotation\u4e24\u6b21 </p> </li> <li> <p></p> </li> </ul> </li> </ul> </li> </ul> Code AVL Tree<pre><code>struct Node{\n    int data, H;\n    Node *Ls, *Rs;\n    Node(int data): data(data), H(0), Ls(NULL), Rs(NULL){}\n    int Update(){\n        int HL = -1, HR = -1;\n        if(Ls != NULL) HL = Ls-&gt;H;\n        if(Rs != NULL) HR = Rs-&gt;H;\n        H = max(HL, HR) + 1;\n        return abs(HL - HR);\n    }\n};\nstruct AVL{\n    Node *Rot;\n\n    //Structure\n    void Clear(Node *x){\n        if(x-&gt;Ls) Clear(x-&gt;Ls);\n        if(x-&gt;Rs) Clear(x-&gt;Rs);\n        delete x;\n    }\n    Node *Insert(Node *p, int x){\n        if(p == NULL) return new Node(x);\n        if(x &lt; p-&gt;data) p-&gt;Ls = Insert(p-&gt;Ls, x);else p-&gt;Rs = Insert(p-&gt;Rs, x);\n\n        if(p-&gt;Update() &gt; 1) return Balance(p,x);\n        return p;\n    }\n    void Rotate(Node **X, Node **Y, bool p){\n        // p = 0 -&gt; Left, p = 1 -&gt; Right\n        // rotate X to Y\n        if(!p){\n            (*Y)-&gt;Ls = (*X)-&gt;Rs;\n            (*X)-&gt;Rs = *Y;\n        }else{\n            (*Y)-&gt;Rs = (*X)-&gt;Ls;\n            (*X)-&gt;Ls = *Y;\n        }\n        (*Y)-&gt;Update(), (*X)-&gt;Update();\n    }\n    Node *Balance(Node *Trouble, int x){\n        Node *G = Trouble, *F, *X;\n        bool p, q;\n        if(x &lt; G-&gt;data) F = G-&gt;Ls, p = 0;else F = G-&gt;Rs, p = 1;\n        if(x &lt; F-&gt;data) X = F-&gt;Ls, q = 0;else X = F-&gt;Rs, q = 1;\n        if(p ^ q) Rotate(&amp;X, &amp;F, q), Rotate(&amp;X, &amp;G, p);\n            else Rotate(&amp;F, &amp;G, p), X = F;\n        return X;\n    }\n\n    void Print(Node *x){\n        printf(\"%d \",x-&gt;data);\n        if(x-&gt;Ls) Print(x-&gt;Ls);\n        if(x-&gt;Rs) Print(x-&gt;Rs);\n    }\n\n    // User\n    void Clear(){if(Rot) Clear(Rot);Rot = NULL;}\n    void PrintRoot(){printf(\"%d\\n\",Rot-&gt;data);}\n    void Insert(int x){Rot = Insert(Rot, x);}\n\n}Tree;\n</code></pre>"},{"location":"ADS/#splay","title":"Splay","text":"<ul> <li> <p>\u6bcf\u6b21\u67e5\u8be2\u65f6\uff0c\u5c06\u67e5\u8be2\u7684\u8282\u70b9\u65cb\u8f6c\u5230\u6839\u8282\u70b9\uff0c\u4ece\u800c\u5728\u8fc7\u7a0b\u4e2d\u5c06\u6811\u5c55\u5e73</p> </li> <li> <p>\u7531\u4e8e\u52a8\u6001\u81ea\u9002\u5e94\u7b49\u7279\u6027\uff0c\u5b9e\u9645\u4e0asplay\u6811\u975e\u5e38\u5f3a\u5927</p> </li> <li> <p>\u5747\u644a\u590d\u6742\u5ea6\uff1a\\(O(\\log N)\\)</p> </li> <li> <p>\u7ef4\u62a4\uff08ZigZag\uff09</p> <ul> <li> <p>\u76ee\u7684\u4e0eAVL\u7565\u6709\u4e0d\u540c\uff0cAVL\u5b8c\u5168\u662f\u4e3a\u4e86\u4fdd\u6301\u6811\u7684\u5e73\u8861\uff0c\u800cSplay\u662f\u4e3a\u4e86\u5c06\u67e5\u8be2\u7684\u8282\u70b9\u5411\u4e0a\u79fb\u52a8\u7684\u540c\u65f6\u5c3d\u91cf\u5c55\u5e73\u6811\uff08\u4e00\u822c\u4e3a\u6bcf\u6b21\u8003\u8651\u5f53\u524d\u8282\u70b9\u3001\u7236\u8282\u70b9\u548c\u7956\u5148\u8282\u70b9\uff0c\u9009\u62e9\u6700\u5408\u9002\u7684\u65cb\u8f6c\u65b9\u6cd5\uff09</p> </li> <li> <p>Zig</p> <ul> <li> <p>\u5df2\u7ecf\u662f\u6839\u8282\u70b9\u7684\u513f\u5b50\uff0c\u76f4\u63a5\u5411\u4e0a\u65cb\u8f6c\u4e00\u6b21\u5373\u53ef</p> </li> <li> <p> </p> </li> </ul> </li> <li> <p>ZigZig</p> <ul> <li> <p>\u503e\u659c\u94fe\uff0c\u5c06\u5f53\u524d\u8282\u70b9\u7684\u7236\u8282\u70b9\u5411\u4e0a\u65cb\u8f6c\u4e00\u6b21\uff0c\u518d\u5c06\u5f53\u524d\u8282\u70b9\u5411\u4e0a\u65cb\u8f6c\u4e00\u6b21</p> </li> <li> <p>\u4e0d\u80fd\u76f4\u63a5\u5c06\u5f53\u524d\u8282\u70b9\u5411\u4e0a\u65cb\u8f6c\u4e24\u6b21\uff0c\u56e0\u4e3a\u8fd9\u6837\u4f1a\u5bfc\u81f4\u503e\u659c\u94fe\u6b6a\u5411\u53e6\u4e00\u8fb9</p> </li> <li> <p>\u4e5f\u53ef\u4ee5\u770b\u6210\u76f4\u63a5\u5c06\u5f53\u524d\u8282\u70b9\u5f80\u6700\u4e0a\u9762\u4e00\u63d0\uff0c\u5269\u4e0b\u7684\u513f\u5b50\u4eec\u201c\u7eb7\u7eb7\u201d\u5f80\u4e0b\u6389</p> </li> <li> <p></p> </li> </ul> </li> <li> <p>ZigZag </p> <ul> <li> <p>\u5f2f\u66f2\u94fe\uff0c\u76f4\u63a5\u5c06\u5f53\u524d\u8282\u70b9\u5411\u4e0a\u65cb\u8f6c\u4e24\u6b21</p> </li> <li> <p>\u4e5f\u53ef\u4ee5\u770b\u6210\u76f4\u63a5\u5c06\u5f53\u524d\u8282\u70b9\u5f80\u6700\u4e0a\u9762\u4e00\u63d0\uff0c\u4e24\u4e2a\u513f\u5b50\u88ab\u7236\u8282\u70b9\u548c\u7956\u5148\u8282\u70b9\u5747\u5206\uff0c\u4ece\u800c\u8d8b\u5411\u5e73\u8861</p> </li> <li> <p></p> </li> </ul> </li> </ul> </li> <li> <p>NOTES:</p> <ul> <li>Splaying roughly halves the depth of most nodes on the access path. </li> </ul> </li> </ul> Code (Not checked yet) Splay Tree<pre><code>struct Node{\n    Node *fa, *v[2];\n    int data;\n    Node (int x, Node *F, Node *Pivot):data(x),fa(F),v{Pivot, Pivot}{}\n};\ntypedef Node *Pt;\nPt NUL;// A trick to avoid NULL pointer\nstruct SplayTree{\n    Pt Rot;\n    void Print(Pt i){// Preorder\n        if(i == NUL) return;\n        cout &lt;&lt; i-&gt;data &lt;&lt; \" \";\n        Print(i-&gt;v[0]), Print(i-&gt;v[1]);\n    }\n    bool Is(Pt i){return (i-&gt;fa-&gt;v[1] == i);}// 0: left son, 1: right son\n    void Rotate(Pt i){ // Rotate i to its father\n        Pt F = i-&gt;fa, G = F-&gt;fa; bool p = Is(i), q = Is(F);\n        F-&gt;v[p] = i-&gt;v[p ^ 1], i-&gt;v[p^1]-&gt;fa = F;\n        F-&gt;fa = i, i-&gt;v[p^1] = F;\n        G-&gt;v[q] = i, i-&gt;fa = G;\n    }\n    void Splay(Pt i){// Splay i to the root\n        while(i-&gt;fa != NUL){\n            if(i-&gt;fa-&gt;fa != NUL) Rotate(Is(i) == Is(i-&gt;fa) ? i-&gt;fa : i), Rotate(i);\n                else Rotate(i);\n        }\n        Rot = i;\n    }\n    void Insert(Pt &amp;i, Pt F, int x){\n        if(i == NUL) return (void)(Splay(i = new Node(x, F, NUL)));\n        Insert(i-&gt;v[x &gt; i-&gt;data], i, x);\n    }\n\n    // User Interface\n    void Clear(){Rot = NUL = new Node(-1, NULL, NULL);}\n    void Print(){Print(Rot);cout &lt;&lt; endl;}\n    void Insert(int x){Insert(Rot, NUL, x);}\n    void Find(int x){\n        Pt i = Rot;\n        while(i != NUL &amp;&amp; i-&gt;data != x) i = i-&gt;v[x &gt; i-&gt;data];\n        if(i != NUL) Splay(i);\n    }\n    void Delete(int x){\n        Find(x);// Splay x to the root\n        if(Rot-&gt;v[0] == NUL) Rot = Rot-&gt;v[1], Rot-&gt;fa = NUL;\n        else{\n            Pt i = Rot-&gt;v[0], X = Rot;\n            while(i-&gt;v[1] != NUL) i = i-&gt;v[1];// Find the maximum in the left subtree\n            Splay(i);\n            i-&gt;v[1] = X-&gt;v[1], X-&gt;v[1]-&gt;fa = i;\n        }\n    }\n}Tree;\n</code></pre>"},{"location":"ADS/#b-tree","title":"B+ Tree","text":"<p>\u4e00\u79cd\u591a\u8def\u641c\u7d22\u6811\uff0c\u5e38\u7528\u4e8e\u6570\u636e\u5e93\u7d22\u5f15\u3001\u6587\u4ef6\u7cfb\u7edf\u7b49</p> <ul> <li> <p>\u7279\u5f81 \uff08Order of M\uff09</p> <ul> <li> <p>\u6839\u8282\u70b9\u6709\\([2,M]\\)\u4e2a\u5b50\u8282\u70b9</p> </li> <li> <p>\u5176\u4f59\u975e\u53f6\u8282\u70b9\u6709\\([[\\frac{M+1}{2}],M]\\)\u4e2a\u5b50\u8282\u70b9\uff0c\u7528 K - 1 \u4e2a\u5173\u952e\u5b57\u8fdb\u884c\u533a\u95f4\u5212\u5206</p> </li> <li> <p>\u6240\u6709\u53f6\u8282\u70b9\u5728\u540c\u4e00\u5c42\uff0c\u4e14\u90fd\u5728\u6700\u5e95\u5c42, \u4e14\u90fd\u6709\\([[\\frac{M+1}{2}],M]\\)\u4e2a\u5173\u952e\u5b57</p> </li> </ul> </li> <li> <p>\u4f18\u52bf\uff1a</p> <ul> <li> <p>\u53ef\u4ee5\u770b\u51fa\uff0cB+\u6811\u7684\u9ad8\u5ea6\u975e\u5e38\u4f4e\uff0c\u6574\u68f5\u6811\u603b\u4f53\u4e0a\u975e\u5e38\u201c\u6241\u5e73\u201d\uff0c\u56e0\u800c\u67e5\u8be2\u6548\u7387\u975e\u5e38\u9ad8</p> </li> <li> <p>\u7531\u4e8e\u53f6\u8282\u70b9\u90fd\u5728\u540c\u4e00\u5c42\uff0c\u82e5\u5bf9\u5144\u5f1f\u8282\u70b9\u95f4\u5efa\u7acb\u6307\u9488\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fdb\u884c\u8303\u56f4\u67e5\u8be2</p> </li> </ul> </li> <li> <p>\u7ef4\u62a4</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li> <p>\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u627e\u5230\u5408\u9002\u7684\u53f6\u8282\u70b9\uff0c\u63d2\u5165\u5173\u952e\u5b57</p> </li> <li> <p>\u82e5\u53f6\u8282\u70b9\u5173\u952e\u5b57\u6570\u76ee\u8d85\u8fc7\u4e0a\u9650\uff0c\u5c06\u8282\u70b9\u5747\u5206\u4e3a\\([\\frac{M+1}{2}],[\\frac{M}{2}]\\)\u4e24\u90e8\u5206\uff0c\u5e76\u66f4\u65b0\u5212\u5206\u5173\u952e\u5b57\u4e3a\u53f3\u534a\u8fb9\u7684\u6700\u5c0f\u503c</p> </li> <li> <p>\u9012\u5f52\u5411\u4e0a\uff0c\u82e5\u7236\u8282\u70b9\u5173\u952e\u5b57\u6570\u76ee\u8d85\u8fc7\u4e0a\u9650\uff0c\u5206\u88c2\u4e3a\\([\\frac{M+1}{2}],[\\frac{M}{2}]\\)\u4e24\u90e8\u5206\uff0c\u5e76\u66f4\u65b0\u7236\u8282\u70b9\u5904\u5173\u952e\u5b57\u4e3a\u4e2d\u95f4\u5269\u4f59\u7684\u4e00\u4e2a\u5212\u5206\u5173\u952e\u5b57</p> </li> <li> <p>\u82e5\u5230\u8fbe\u6839\u8282\u70b9\uff0c\u5219\u65b0\u5efa\u8282\u70b9\uff0c\u5373\u5168\u6811\u9ad8\u5ea6\u52a0\u4e00</p> </li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u627e\u5230\u5408\u9002\u7684\u53f6\u8282\u70b9\uff0c\u5220\u9664\u5173\u952e\u5b57</p> </li> <li> <p>\u82e5\u53f6\u8282\u70b9\u5173\u952e\u5b57\u6570\u76ee\u4f4e\u4e8e\u4e0b\u9650\uff0c\u627e\u5230\u5144\u5f1f\u8282\u70b9\uff0c\u82e5\u5144\u5f1f\u8282\u70b9\u5173\u952e\u5b57\u6570\u76ee\u5927\u4e8e\u4e0b\u9650\uff0c\u548c\u5144\u5f1f\u5e73\u5206\u8282\u70b9</p> </li> <li> <p>\u82e5\u5144\u5f1f\u8282\u70b9\u5173\u952e\u5b57\u6570\u76ee\u4e5f\u4f4e\u4e8e\u4e0b\u9650\uff0c\u5c06\u5f53\u524d\u8282\u70b9\u4e0e\u5144\u5f1f\u8282\u70b9\u5408\u5e76\uff0c\u5220\u9664\u7236\u8282\u70b9\u5904\u7684\u4e00\u4e2a\u5173\u952e\u5b57</p> </li> <li> <p>\u9012\u5f52\u5411\u4e0a\uff0c\u5bf9\u7236\u8282\u70b9\u8fdb\u884c\u76f8\u540c\u64cd\u4f5c</p> </li> <li> <p>\u82e5\u5230\u8fbe\u6839\u8282\u70b9\uff0c\u4e14\u6839\u8282\u70b9\u5173\u952e\u5b57\u6570\u76ee\u4e3a0\uff0c\u5220\u9664\u6839\u8282\u70b9\uff0c\u5373\u5168\u6811\u9ad8\u5ea6\u51cf\u4e00        </p> </li> </ul> </li> </ul> </li> </ul> Code (Delete Not Carefully Checked yet) <p>\u6211\u89c9\u5f97B+\u6811\u6700\u6076\u5fc3\u7684\u4e00\u70b9\u5c31\u5728\u4e8e\u4ed6\u7684\u5185\u90e8\u8282\u70b9\u4e0e\u53f6\u7ed3\u70b9\u5b9a\u4e49\u7684\u4e0d\u4e00\u81f4\u6027\uff0c\u5bfc\u81f4\u7f16\u5199\u4ee3\u7801\u975e\u5e38\u9ebb\u70e6\uff08\u5bf9\u4e8e\u6211\u8fd9\u79cd\u5177\u6709\u201c\u7edf\u4e00\u6027\u5199\u6cd5\u201d\u5f3a\u8feb\u75c7\u7684\u4eba\u6765\u8bf4\uff09</p> <p>\u7ed3\u679c\u5c31\u662f\u767d\u767d\u82b1\u8d39\u6570\u5c0f\u65f6\u53bb\u5199\u63ba\u6742\u7740\u5404\u79cd IsLeaf \u8fd0\u7b97\u7684\u5f0f\u5b50\uff0c\u548c\u65e0\u7a77\u65e0\u5c3d\u7684Debug</p> <p>\u56e0\u6b64\uff0c\u60e8\u75db\u6559\u8bad\uff1a\u5f88\u591a\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u5206\u7c7b\uff0c\u589e\u52a0\u4ee3\u7801\u957f\u5ea6\uff0c\u5927\u5927\u964d\u4f4e\u7f16\u7801\u590d\u6742\u5ea6\uff01\uff01\uff01 </p> B+ Tree<pre><code>const int Order = 5;\nstruct Node{\n    int M;                  //  Number of keys\n    int Key[Order + 1];     //  Keys\n    Node* Child[Order + 1]; //  Children\n    Node *Ls, *Rs;          //  Left and Right Sibling\n    int Height;              //  Height of the node for printing\n    Node(){\n        M = Height = 0;\n        Ls = Rs = NULL;\n        for(int i = 0; i &lt;= Order; i++) Child[i] = NULL, Key[i] = 0;\n    }\n    Node *Split(){\n        Node *j = new Node();\n        j-&gt;Height = Height;\n        j-&gt;Rs = Rs, Rs = j, j-&gt;Ls = this;\n        if(Height){ // Internal Node\n            for(int k = (Order + 1 &gt;&gt; 1); k &lt; M ; k++){\n                j-&gt;Key[j-&gt;M] = Key[k], j-&gt;Child[j-&gt;M] = Child[k];\n                j-&gt;M++;\n            }\n            j-&gt;Child[j-&gt;M] = Child[M], M = (M - 1 &gt;&gt; 1);\n        }else{  // Leaf Node\n            for(int k = (Order + 1 &gt;&gt; 1); k &lt; M ; k++) j-&gt;Key[j-&gt;M++] = Key[k];\n            M = (M + 1 &gt;&gt; 1);\n        }\n        return j;\n    }\n};\nint tp[Order &lt;&lt; 1]; Node *tq[Order &lt;&lt; 1];\nstruct BpTree{\n    Node *Rot;\n    #define IsLeaf(x) ((x)-&gt;Height == 0)\n    void Insert(Node *i, Node *F, int x){\n        int k;\n        if(IsLeaf(i)){// Leaf Node can contain more keys\n            for(k = 0; k &lt; i-&gt;M; k++) if(i-&gt;Key[k] == x) return (void)(printf(\"Key %d is duplicated\\n\", x));\n            while(k &amp;&amp; i-&gt;Key[k - 1] &gt; x) i-&gt;Key[k] = i-&gt;Key[k - 1], k--;\n            i-&gt;Key[k] = x, i-&gt;M++;\n            return;\n        }\n\n        // search for the child to insert\n        for(k = 0; k &lt; i-&gt;M; k++) if(i-&gt;Key[k] &gt; x) break;\n        Insert(i-&gt;Child[k], i, x);\n        if(i-&gt;Child[k]-&gt;M - (IsLeaf(i-&gt;Child[k])) &lt; Order) return;\n\n        // split the child\n        Node *j = i-&gt;Child[k]-&gt;Split();\n        for(int t = i-&gt;M; t &gt; k; t--) i-&gt;Child[t + 1] = i-&gt;Child[t], i-&gt;Key[t] = i-&gt;Key[t - 1];\n        i-&gt;Child[k + 1] = j, i-&gt;Key[k] = i-&gt;Child[k]-&gt;Key[i-&gt;Child[k]-&gt;M], i-&gt;M++;\n    }\n    int GetChild(Node *F, Node *i){\n        for(int k = 0; k &lt;= F-&gt;M; k++) if(F-&gt;Child[k] == i) return k;\n        return -1;\n    }\n    void Delete(Node *i, Node *F, int x){\n        int k;\n        if(IsLeaf(i)){\n            for(k = 0; k &lt; i-&gt;M; k++) if(i-&gt;Key[k] &gt;= x) break;\n            if(i-&gt;Key[k] != x) return;\n            i-&gt;M--;\n            for(; k &lt; i-&gt;M; k++) i-&gt;Key[k] = i-&gt;Key[k + 1];\n            return;\n        }\n        for(k = 0; k &lt; i-&gt;M ; k++) if(i-&gt;Key[k] &gt; x) break;\n        Node *s = i-&gt;Child[k], *t = k == i-&gt;M ? i-&gt;Child[k - 1] : i-&gt;Child[k + 1];\n        Delete(s, i, x);\n        if(s-&gt;M + 1 - IsLeaf(s) &gt;= (Order + 1 &gt;&gt; 1)) return;\n\n        if(k == i-&gt;M) swap(s,t), k--;// s --&gt; t\n        if(IsLeaf(s)){ // cope with leaf node\n            if(s-&gt;M + t-&gt;M &gt; Order){// Borrow from sibling\n                int cnt = (s-&gt;M + t-&gt;M &gt;&gt; 1), M = 0;\n                for(int j = 0; j &lt; s-&gt;M; j++) tp[++M] = s-&gt;Key[j];\n                for(int j = 0; j &lt; t-&gt;M; j++) tp[++M] = t-&gt;Key[j];//merge together\n\n                s-&gt;M = t-&gt;M = 0;\n                for(int j = 1;j &lt;= cnt; j++) s-&gt;Key[s-&gt;M++] = tp[j];//average\n                for(int j = cnt + 1; j &lt;= M; j++) t-&gt;Key[t-&gt;M++] = tp[j];\n                i-&gt;Key[k] = t-&gt;Key[0];\n            }else{ // merge leaf\n                for(int j = 0; j &lt; t-&gt;M; j++) s-&gt;Key[s-&gt;M++] = t-&gt;Key[j];\n                i-&gt;M--;\n                for(int j = k; j &lt; i-&gt;M; j++) i-&gt;Key[j] = i-&gt;Key[j + 1], i-&gt;Child[j + 1] = i-&gt;Child[j + 2];\n                s-&gt;Rs = t-&gt;Rs;\n                if(t-&gt;Rs != NULL) t-&gt;Rs-&gt;Ls = s;\n            }\n        }else{\n            if(s-&gt;M + 1 + t-&gt;M + 1 &gt; Order){// Borrow from sibling(average with sibling)\n                int cnt = (s-&gt;M + t-&gt;M &gt;&gt; 1), M = 0;\n                for(int j = 0; j &lt; s-&gt;M; j++) tp[++M] = s-&gt;Key[j], tq[M] = s-&gt;Child[j];\n                tp[++M] = i-&gt;Key[k], tq[M] = s-&gt;Child[s-&gt;M];\n                for(int j = 0; j &lt; t-&gt;M; j++) tp[++M] = t-&gt;Key[j], tq[M] = t-&gt;Child[j];\n                tq[M + 1] = t-&gt;Child[t-&gt;M];//merge together\n\n                s-&gt;M = t-&gt;M = 0;\n                for(int j = 1; j &lt;= cnt; j++) s-&gt;Key[s-&gt;M] = tp[j], s-&gt;Child[s-&gt;M++] = tq[j];\n                s-&gt;Child[s-&gt;M] = tq[cnt + 1];\n                for(int j = cnt + 2; j &lt;= M; j++) t-&gt;Key[t-&gt;M] = tp[j], t-&gt;Child[t-&gt;M++] = tq[j];\n                t-&gt;Child[t-&gt;M] = tq[M + 1];//average\n                i-&gt;Key[k] = tp[cnt + 1];\n            }else{\n                s-&gt;Key[s-&gt;M] = i-&gt;Key[k];\n                for(int j = 0; j &lt; t-&gt;M; j++) s-&gt;Key[++s-&gt;M] = t-&gt;Key[j], s-&gt;Child[s-&gt;M] = t-&gt;Child[j];\n                s-&gt;Child[++s-&gt;M] = t-&gt;Child[t-&gt;M];\n                i-&gt;M--;\n                for(int j = k; j &lt; i-&gt;M; j++) i-&gt;Key[j] = i-&gt;Key[j + 1], i-&gt;Child[j + 1] = i-&gt;Child[j + 2];\n            }\n        }\n    }\n\n    // interface for user\n    void Clear(){Rot = new Node();}\n    void Insert(int x){\n        Insert(Rot, NULL, x);\n        Node *i = Rot;\n        if(i-&gt;M - IsLeaf(i) &gt;= Order){// Split the root if necessary\n            Rot = new Node();\n            Node *j = i-&gt;Split();\n            Rot-&gt;Key[0] = i-&gt;Key[i-&gt;M], Rot-&gt;M = 1, Rot-&gt;Child[0] = i, Rot-&gt;Child[1] = j;\n            Rot-&gt;Height = i-&gt;Height + 1;\n        }\n    }\n\n    void Delete(int x){\n        if(Rot == NULL) return(void)(puts(\"Empty\"));\n        Delete(Rot, NULL, x);\n        if(!Rot-&gt;M) Rot = Rot-&gt;Child[0];\n    }\n    void Print(){// BFS\n        if(Rot == NULL) return (void)(puts(\"Empty\"));\n        queue&lt;Node*&gt; Q;\n        Q.push(Rot);\n        int lst = Rot-&gt;Height;\n        while(!Q.empty()){\n            Node *x = Q.front(); Q.pop();\n            if(x-&gt;Height != lst) putchar('\\n'), lst = x-&gt;Height;\n            putchar('[');\n            for(int i = 0; i &lt; x-&gt;M - 1; i++) printf(\"%d,\", x-&gt;Key[i]);\n            printf(\"%d]\", x-&gt;Key[x-&gt;M - 1]);\n            for(int i = 0; i &lt;= x-&gt;M; i++) if(x-&gt;Child[i] != NULL) Q.push(x-&gt;Child[i]);\n        }\n        puts(\"\");\n    }\n}B;\n</code></pre>"},{"location":"ADS/#rb-tree","title":"RB Tree","text":"<p>\u7b2c\u4e8c\u8282\u8bfe\u5c31\u8bb2\u624b\u6495\u7ea2\u9ed1\u6811 &amp; B+\u6811\uff0c\u8fd9\u5c31\u662fZJU\u7684ADS, \u6050\u6016\u5982\u65af\u2026\u2026</p> <p>\u4e00\u79cd\u81ea\u5e73\u8861\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5e38\u7528\u4e8eC++ STL\u4e2d\u7684set\u548cmap\uff0c\u4ee5\u53caLinux\u5185\u6838\u4e2d\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b49</p> <p>\u6548\u7387\u8f83\u9ad8\u4e14\u6bd4\u4e00\u822c\u5e73\u8861\u6811\u7a33\u5b9a\uff0c\u4f46\u5b9e\u73b0\u2026\u2026</p> <ul> <li> <p>\u7279\u5f81\uff08\u719f\u8bb0\uff1f\uff01\uff09</p> <ol> <li> <p>\u6bcf\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u7ea2\u8272\uff0c\u8981\u4e48\u662f\u9ed1\u8272</p> </li> <li> <p>\u6839\u8282\u70b9\u662f\u9ed1\u8272</p> </li> <li> <p>\u6bcf\u4e2a\u53f6\u8282\u70b9\u90fd\u4e3aNIL\u8282\u70b9\uff0c\u4e14\u4e3a\u9ed1\u8272</p> </li> <li> <p>\u4e0d\u80fd\u6709\u4e24\u4e2a\u76f8\u90bb\u7684\u7ea2\u8272\u8282\u70b9</p> </li> <li> <p>\u4ece\u4efb\u4e00\u8282\u70b9\u5230\u5176\u6bcf\u4e2a\u53f6\u8282\u70b9\u7684\u6240\u6709\u8def\u5f84\u90fd\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\uff08\u4e5f\u6b63\u662f\u57fa\u4e8e\u6b64\u6211\u4eec\u5b9a\u4e49\u4e86\u6811\u7684\u9ed1\u9ad8\uff09</p> </li> </ol> </li> <li> <p>\u590d\u6742\u5ea6\u5206\u6790</p> operation complexity rotation recoloring Insert O(logN) O(1) O(logN) Delete O(logN) O(1) O(logN) <ul> <li> <p>\u5e38\u89c1\u64cd\u4f5c\u5747\u4e3a\\(O(logN)\\)</p> </li> <li> <p>\u7ef4\u62a4\u7684\u65cb\u8f6c\u6b21\u6570\u4e3a\u5e38\u6570\u65f6\u95f4\uff0c\u6240\u4ee5\u975e\u5e38\u5feb </p> </li> </ul> <p>\u9996\u5148\u5b9a\u4e49\u9ed1\u9ad8 bh(x) \u4e3a\u4ece\u8282\u70b9 x \u5230\u5176\u6bcf\u4e2a\u53f6\u8282\u70b9\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u9ed1\u8272\u8282\u70b9\u6570\u76ee\uff08\u4e0d\u5305\u62ec\u81ea\u5df1\uff09</p> <ul> <li> <p>\u8bc1\u660e\uff1a</p> <ul> <li> <p>\u9996\u5148\uff0c\u7531\u7ea2\u9ed1\u6811\u5b9a\u4e49\uff0c\\(h(x) &lt;= 2bh(x)\\)</p> </li> <li> <p>\u4f7f\u7528\u6570\u5b66\u5f52\u7eb3\u6cd5\uff0c\u5bf9\u4e8e\u4efb\u610f\u8282\u70b9 x\uff0c\u5176\u5b50\u6811\u7684\u8282\u70b9\u6570\u76ee \\(N(x) &gt;= 2^{bh(x)} - 1\\)</p> <ul> <li> <p>\u56e0\u4e3a\u5bf9\u4e8e\u4efb\u610f\u8282\u70b9\uff0c\u5176\u5b50\u8282\u70b9\u7684\u9ed1\u9ad8\u4e3a bh(x) \u6216 bh(x) - 1</p> </li> <li> <p>\u4ece\u800c\u7531\u5f52\u7eb3\u5047\u8bbe\uff0c\u6709 \\(N(x) &gt;= 2^{bh(x) - 1} - 1 + 2^{bh(x) - 1} - 1 + 1 = 2^{bh(x)} - 1\\)</p> </li> </ul> </li> <li> <p>\u7efc\u4e0a\uff0c\u5f97\u8bc1     </p> </li> </ul> </li> </ul> </li> <li> <p>\u7ef4\u62a4</p> <p>\u4e3b\u8981\u53c2\u8003\u4e86\u7b97\u6cd5\u5bfc\u8bba\uff0c\u611f\u89c9\u76f8\u5bf9\u4e8e\u8bfe\u4ef6\uff0c\u5c06\u5b50\u6811\u7684\u5206\u5e03\u753b\u51fa\u6765\uff0c\u66f4\u52a0\u6e05\u6670\u660e\u4e86\u4e00\u4e9b</p> <ul> <li> <p>\u6211\u89c9\u5f97\uff0c\u672c\u8d28\u4e0a\u63d2\u5165\u548c\u5220\u9664\u6700\u5173\u6ce8\u7684\u8fd8\u662f\u9ed1\u9ad8\u7684\u7ef4\u62a4\uff0c\u56e0\u6b64\u5173\u952e\u6b65\u9aa4\u90fd\u662f\u5728\u8c03\u6574\u6811\u7684\u5f62\u6001\u7684\u540c\u65f6\uff0c\u5982\u4f55\u5bf9\u9ed1\u9ad8\u4e0d\u4ea7\u751f\u5f71\u54cd</p> <ul> <li> <p>\u57fa\u4e8e\u540c\u9ad8\u5ea6\u540c\u65f6\u53d8\u5316\u7684\u4e0d\u53d8</p> <ul> <li> <p>\u9ed1\u4e0b\u653e\uff1a\u5c06\u9ed1\u8272\u8282\u70b9\u7684\u4e24\u4e2a\u7ea2\u8272\u513f\u5b50\u53d8\u4e3a\u9ed1\u8272\uff0c\u81ea\u5df1\u53d8\u4e3a\u7ea2\u8272</p> </li> <li> <p>\u9ed1\u4e0a\u63d0\uff1a\u5c06\u4e24\u9ed1\u8272\u513f\u5b50\u7684\u9ed1\u8272\u6c47\u805a\u5230\u7ea2\u8272\u7684\u7236\u4eb2\u8eab\u4e0a\uff0c\u513f\u5b50\u53d8\u7ea2 </p> </li> </ul> </li> <li> <p>\u65cb\u8f6c\u4e0d\u53d8</p> <ul> <li> <p>\u5728\u65cb\u8f6c\u65f6\uff0c\u82e5\u4e0b\u65b9\u5f85\u8f6c\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u5219\u65cb\u8f6c\u540e\u7ee7\u627f\u5176\u539f\u672c\u7236\u8282\u70b9\u7684\u989c\u8272\uff0c\u539f\u672c\u7236\u8282\u70b9\u53d8\u7ea2\uff0c\u9ed1\u9ad8\u4e0d\u53d8</p> </li> <li> <p>\u7279\u522b\u7684\uff0c\u7ea2\u8282\u70b9\u8f6c\u6765\u8f6c\u53bb\u5e76\u4e0d\u4f1a\u5bf9\u9ed1\u9ad8\u4ea7\u751f\u5f71\u54cd   </p> </li> </ul> </li> </ul> </li> <li> <p>\u63d2\u5165 </p> <ul> <li>\u6309\u6b63\u5e38\u4e8c\u53c9\u6392\u5e8f\u6811\u7684\u65b9\u5f0f\uff0c\u63d2\u5165\u4e00\u4e2a\u7ea2\u8272\u8282\u70b9 \u2014\u2014 \u6b64\u65f6\u4e0d\u4f1a\u5f71\u54cd\u9ed1\u9ad8\uff0c\u4f46\u53ef\u80fd\u51fa\u73b0\u4e24\u4e2a\u76f8\u90bb\u7684\u7ea2\u8272\u8282\u70b9\uff0c\u4ece\u800c\u9700\u8981\u8fdb\u884c\u8c03\u6574</li> </ul> <p>\uff08\u63d2\u5165\u9ed1\u8272\u8282\u70b9\u4f1a\u5bf9\u5230\u6839\u6574\u6761\u8def\u5f84\u4ea7\u751f\u7834\u574f\uff0c\u66f4\u52a0\u96be\u8c03\u6574\uff09</p> <ul> <li> <p>\u7b80\u5355\u60c5\u51b5\uff1a\u7236\u8282\u70b9\u4e3a\u9ed1\u8272\uff0c\u4e0d\u9700\u8981\u8c03\u6574</p> </li> <li> <p>\u590d\u6742\u60c5\u51b5\uff1a\u7236\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u63d2\u5165\u4e3b\u8981\u5173\u6ce8\u201c\u53d4\u201d\u8282\u70b9\uff08z\u4e3a\u5f53\u524d\u8282\u70b9\uff0cy\u4e3a\u53d4\u8282\u70b9\uff09</p> <ul> <li> <p>Case 1</p> <ul> <li>\u53d4\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u5219\u7956\u7236\u8282\u70b9\u5fc5\u4e3a\u9ed1\u8272\uff0c\u90a3\u4e48\u5b9e\u884c\u4e00\u6b21\u201c\u9ed1\u4e0b\u653e\u201d\u64cd\u4f5c\uff0c\u5c06\u7956\u7236\u8282\u70b9\u7684\u9ed1\u8272\u5411\u4e0b\u4f20\u9012\u5230\u5176\u5b50\u8282\u70b9\uff0c\u81ea\u5df1\u53d8\u4e3a\u7ea2\u8272\u5373\u53ef</li> </ul> <p></p> </li> <li> <p>Case 2 &amp; Case 3</p> <ul> <li> <p>Case 2, \u53d4\u8282\u70b9\u4e3a\u5f53\u524d\u8282\u70b9\u7684\u540c\u4fa7\u8282\u70b9\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5f53\u524d\u8282\u70b9\u7684\u4e00\u6b21\u65cb\u8f6c\uff0c\u53d8\u4e3a\u5f02\u4fa7\u7684\u60c5\u51b5\uff08\u6b64\u65f6 z \u53d8\u6210\u539f\u6765\u7684\u7236\u8282\u70b9\u4e86\uff09</p> </li> <li> <p>Case 3, \u53d4\u8282\u70b9\u4e3a\u5f53\u524d\u8282\u70b9\u7684\u5f02\u4fa7\u8282\u70b9\uff0c\u800c\u7236\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u6b21\u4e0a\u8ff0\u7684\u4e0d\u53d8\u65cb\u8f6c\u5b8c\u6210\u8c03\u6574</p> </li> <li> <p>\u4ece\u7ed3\u679c\u6765\u770b\uff0c\u5b9e\u9645\u4e0a\u662f\u975e\u5e38\u597d\u7406\u89e3\u7684\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4e0b\u56fe\u4e2d A &lt; B &lt; C, \u4ece\u800c\u5e94\u5c06B\u65cb\u8f6c\u5230\u6700\u4e2d\u592e\uff0c\u4f7f\u5e73\u8861\u6811\u5c3d\u53ef\u80fd\u5e73\u8861 </p> </li> </ul> <p> </p> </li> </ul> </li> </ul> </li> <li> <p>\u5220\u9664 </p> <ul> <li> <p>\u548c\u4e00\u822c\u7684\u4e8c\u53c9\u67e5\u627e\u6811\u4e00\u6837\uff0c\u5148\u7528\u8282\u70b9\u7684\u524d\u9a71/\u540e\u7ee7\u8282\u70b9\u66ff\u6362\uff08\u989c\u8272\u4e0d\u53d8\uff09\uff0c\u7136\u540e\u5220\u9664\u524d\u9a71/\u540e\u7ee7\u8282\u70b9</p> </li> <li> <p>\u8fd9\u6837\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5220\u9664\u4e86\u9ed1\u8272\u8282\u70b9\u5f71\u54cd\u9ed1\u9ad8\uff0c\u6216\u8005\u51fa\u73b0\u4e24\u4e2a\u76f8\u90bb\u7684\u7ea2\u8272\u8282\u70b9</p> </li> <li> <p>\u7b80\u5355\u60c5\u51b5\uff1a\u5220\u9664\u7684\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5f71\u54cd\uff0c\u4e0d\u9700\u8981\u8c03\u6574</p> </li> <li> <p>\u590d\u6742\u60c5\u51b5\uff1a\u5220\u9664\u4e86\u9ed1\u8272\u8282\u70b9\uff0c\u5f71\u54cd\u5f88\u5927\uff0c\u4f1a\u5bfc\u81f4\u591a\u4e2a\u7279\u5f81\u4e0d\u7b26\u5408</p> <p>\u672c\u8d28\u4e0a\uff0c\u5c31\u662f\u5bfc\u81f4\u4e86\u66ff\u6362\u8282\u70b9 x \u8fd9\u9897\u5b50\u6811\u7684\u9ed1\u9ad8\u90fd\u504f\u5c11\u4e861, \u6240\u4ee5\u63a5\u4e0b\u6765\u5c31\u662f\u8ba8\u8bba\u5982\u4f55\u4f18\u96c5\u5730\u5c06\u4ed6\u4eec\u5168\u90e8+1</p> <p>\u4e0b\u9762\u8ba8\u8bba\u66ff\u6362\u8282\u70b9 x \u4e3a\u9ed1\u8272\u7684\u60c5\u51b5\uff08\u7ea2\u8272\u7684\u8bdd\u76f4\u63a5\u67d3\u9ed1\u5373\u53ef\uff0c\u8fd8\u53ef\u4ee5\u987a\u4fbf\u907f\u514d\u76f8\u90bb\u7ea2\u8272\u8282\u70b9\uff09\uff0c\u5220\u9664\u4e3b\u8981\u5173\u6ce8\u5144\u5f1f\u8282\u70b9 w </p> <ul> <li> <p>Case 1</p> <ul> <li>\u5144\u5f1f\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u5219\u8fdb\u884c\u4e00\u6b21\u4e0a\u8ff0\u7684\u4e0d\u53d8\u65cb\u8f6c\uff0c\u5c06\u5144\u5f1f\u8282\u70b9\u53d8\u4e3a\u9ed1\u8272\uff0c\u7236\u8282\u70b9\u53d8\u4e3a\u7ea2\u8272\uff08\u7ea2\u8282\u70b9\u4e0a\u65b9\u4e0b\u65b9\uff0c\u539f\u6765\u5fc5\u9ed1\uff09\uff0c\u8f6c\u5316\u4e3a\u4e0b\u9762\u8981\u8ba8\u8bba\u7684\u60c5\u5f62</li> </ul> <p></p> </li> <li> <p>Case 2</p> <ul> <li>\u5144\u5f1f\u8282\u70b9\u4e3a\u9ed1\u8272\uff0c\u4e14\u5144\u5f1f\u8282\u70b9\u7684\u4e24\u4e2a\u513f\u5b50\u90fd\u4e3a\u9ed1\u8272, \u5219\u5e72\u8106\u5c06\u5144\u5f1f\u8282\u70b9\u53d8\u4e3a\u7ea2\u8272\uff0c\u8fd9\u6837\u5f53\u524d\u8282\u70b9\u548c\u5144\u5f1f\u8282\u70b9\u7684\u5b50\u6811\u76f8\u5f53\u4e8e\u201c\u626f\u5e73\u201d\u4e86\u90fd\u5dee1\uff0c\u4ece\u800c\u53ef\u4ee5\u5411\u4e0a\u9012\u5f52\u8c03\u6574\uff0c\u5373\u5f53\u524d\u5f85\u8c03\u6574\u8282\u70b9\u53d8\u4e3a\u7236\u8282\u70b9</li> </ul> <p></p> </li> <li> <p>Case 3</p> <ul> <li>\u5144\u5f1f\u8282\u70b9\u4e3a\u9ed1\u8272\uff0c\u4e14\u5144\u5f1f\u8282\u70b9\u7684\u5f02\u4fa7\u5b50\u8282\u70b9\u4e3a\u9ed1\u8272\uff0c\u540c\u4fa7\u5b50\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7\u4e00\u6b21\u4e0d\u53d8\u65cb\u8f6c\uff0c\u5c06\u8be5\u7ea2\u8272\u8282\u70b9\u53d8\u4e3a\u9ed1\u8272\u5144\u5f1f\uff0c\u5e76\u83b7\u5f97\u5f02\u4fa7\u5b50\u8282\u70b9\uff0c\u8f6c\u5316\u4e3aCase 4</li> </ul> <p> </p> </li> <li> <p>Case 4</p> <ul> <li>\u5144\u5f1f\u8282\u70b9\u4e3a\u9ed1\u8272\uff0c\u4e14\u5144\u5f1f\u8282\u70b9\u7684\u5f02\u4fa7\u5b50\u8282\u70b9\u4e3a\u7ea2\u8272\uff0c\u6b64\u65f6\u5c06\u7236\u8282\u70b9\u65cb\u8f6c\u4e0b\u6765\u5f3a\u5236\u67d3\u9ed1\u6765\u8865\u507f\u5b50\u6811\u9ed1\u9ad8\uff0c\u5144\u5f1f\u8282\u70b9\u65cb\u8f6c\u5230\u4e0a\u65b9\u5e76\u7ee7\u627f\u7236\u8282\u70b9\u7684\u989c\u8272\uff0c\u5e76\u5c06\u5269\u4e0b\u7684\u4e00\u4e2a\u513f\u5b50\u4e5f\u67d3\u9ed1\uff0c\u7ef4\u62a4\u5176\u4f59\u5b50\u6811\u7684\u9ed1\u9ad8\u4e0d\u53d8\uff0c\u76f4\u63a5Over\uff08\u53ef\u4ee5\u68c0\u67e5\u6bcf\u9897\u5b50\u6811\u6240\u7ecf\u8fc7\u7684\u8def\u5f84\uff0c\u6070\u597d\u5b8c\u7f8e\u7b26\u5408\uff0c\u8fc7\u4e8e\u5de7\u5999\uff01\uff09</li> </ul> <p> </p> </li> </ul> </li> </ul> </li> <li> <p>\u4e0a\u9762\u63d0\u5230\u7684\u90fd\u662f\u81ea\u5e95\u5411\u4e0a\u8c03\u6574\u7684\u65b9\u6cd5\uff0c\u8fd8\u6709\u4e00\u79cd\u81ea\u9876\u5411\u4e0b\u7684\u529e\u6cd5\uff0c\u5373\u5728\u7528\u5faa\u73af\u63d2\u5165/\u5bfb\u627e\u5173\u952e\u5b57\u7684\u540c\u65f6\u5bf9\u6811\u7684\u5f62\u6001\u8fdb\u884c\u7ef4\u62a4\u548c\u8c03\u6574\uff0c\u4f7f\u5f97\u63d2\u5165/\u5220\u9664\u540e\u6811\u7684\u5f62\u6001\u76f4\u63a5\u6ee1\u8db3\u8981\u6c42\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u8dd1\u5f97\u66f4\u5feb\u4e00\u70b9</p> </li> </ul> </li> </ul> Code <p>\u9762\u5411Luogu P3369\u5e73\u8861\u6811\u6a21\u677f\u9898\u5199\u7684\uff0c\u8dd1\u5f97\u560e\u560e\u5feb\uff0c\u8fd9\u5c31\u662fRBTree! \u4f46\u662f\u82b1\u4e86\u6211\u4e00\u4e0b\u5348debug\uff01\uff01\uff01</p> <p>\u4e3b\u8981\u6ce8\u610f\u7a7a\u8282\u70b9\u7684\u4e00\u4e9b\u5904\u7406\uff08\u63d0\u524d\u5c06\u5bf9\u5e94\u6307\u9488\u8bb0\u4e0b\u6765\u9632\u6b62\u540e\u9762\u88ab\u66f4\u6539\uff09\uff0c\u4ee5\u53ca\u53ca\u65f6\u66f4\u65b0\u6839\u8282\u70b9\u7684\u6307\u9488</p> Red Black Tree<pre><code>const int INF = 1e9;\nenum Color {RED, BLACK};\nstruct Node{\n    int data, size; // size denotes the number of nodes in subtree x\n    Color color;\n    Node *v[2], *F;\n    Node(int x = 0, Color c = BLACK, Node *fa = NULL, Node *NIL = NULL){\n        data = x, size = 0, color = c, F = fa;\n        v[0] = v[1] = NIL;\n    }\n    void Update(){size = v[0]-&gt;size + v[1]-&gt;size + 1;}\n};\ntypedef Node *Pt;\nPt NIL = new Node(-1, BLACK, NIL, NIL);\nstruct RBTree{\n    Node *Rot;\n    #define Is(i) ((i)-&gt;F-&gt;v[1] == (i))\n    void Rotate(Pt i){ // Rotate i to i-&gt;F\n        Pt F = i-&gt;F; bool p = Is(i), q = Is(F);\n        F-&gt;v[p] = i-&gt;v[p ^ 1], i-&gt;v[p ^ 1]-&gt;F = F;// first cope with external nodes\n        i-&gt;F = F-&gt;F, F-&gt;F-&gt;v[q] = i;               // then i and F\n        F-&gt;F = i, i-&gt;v[p ^ 1] = F;\n        F-&gt;Update(), i-&gt;Update();\n        if(F == Rot) Rot = i;\n    }\n    void FixUp_Insert(Pt i){\n        while(i-&gt;F-&gt;color == RED){\n            bool p = Is(i), q = Is(i-&gt;F) ^ 1;\n            Pt F = i-&gt;F, U = F-&gt;F-&gt;v[q];\n\n            if(U-&gt;color == RED){ // case 1: uncle is red, black down\n                F-&gt;color = U-&gt;color = BLACK;\n                F-&gt;F-&gt;color = RED, i = F-&gt;F;\n                continue;\n            }\n\n            if(p == q){ // case 2: uncle is black but same side, rotate to case 3\n                Rotate(i);\n                swap(i, F), p ^= 1;\n            }\n\n            // case 3: uncle is black and different side, rotate and recolor\n            F-&gt;color = BLACK, F-&gt;F-&gt;color = RED;\n            Rotate(F);\n            break;\n        }\n    }\n    void Insert(Pt &amp;i, Pt fa, int x){\n        if(i == NIL){\n            i = new Node(x, RED, fa, NIL), i-&gt;size = 1;\n            FixUp_Insert(i);\n            return;\n        }\n        i-&gt;size++, Insert(i-&gt;v[x &gt; i-&gt;data], i, x);\n    }\n    Pt Find(Pt i, int x){\n        if(i == NIL) return NIL;\n        i-&gt;size--;\n        if(i-&gt;data == x) return i;\n        return Find(i-&gt;v[x &gt; i-&gt;data], x);\n    }\n    void FixUp_Delete(Pt i){\n        // Print();\n        while(i != Rot &amp;&amp; i-&gt;color == BLACK){\n            bool p = Is(i);\n            Pt F = i-&gt;F, S = F-&gt;v[p ^ 1];\n            if(S-&gt;color == RED){ // case 1: sibling is red\n                S-&gt;color = BLACK, F-&gt;color = RED;\n                Rotate(S);\n                S = F-&gt;v[p ^ 1];\n                // if(S == NIL) assert(i != NIL);\n            }\n\n            if(S-&gt;v[0]-&gt;color == BLACK &amp;&amp; S-&gt;v[1]-&gt;color == BLACK){ // case 2: sibling is black and both children are black\n                S-&gt;color = RED, i = F;\n                continue;\n            }\n\n            if(S-&gt;v[p ^ 1]-&gt;color == BLACK){ // case 3: sibling is black and the child in the opposite side is black\n                S-&gt;v[p]-&gt;color = BLACK, S-&gt;color = RED;\n                Rotate(S-&gt;v[p]);// rotate to case 4\n                S = F-&gt;v[p ^ 1];\n            }\n\n            // case 4: sibling is black and the child in the opposite side is red\n            S-&gt;color = F-&gt;color, F-&gt;color = BLACK, S-&gt;v[p ^ 1]-&gt;color = BLACK;\n            Rotate(S);\n            i = Rot;\n        }\n        i-&gt;color = BLACK;\n    }\n    int Rank(Pt i, int x){\n        if(i == NIL) return 0;\n        if(i-&gt;data &lt; x) return i-&gt;v[0]-&gt;size + 1 + Rank(i-&gt;v[1], x);\n        return Rank(i-&gt;v[0], x);\n    }\n    int Kth(Pt i, int k){\n        if(i-&gt;v[0]-&gt;size + 1 == k) return i-&gt;data;\n        if(i-&gt;v[0]-&gt;size + 1 &lt; k) return Kth(i-&gt;v[1], k - i-&gt;v[0]-&gt;size - 1);\n        return Kth(i-&gt;v[0], k);\n    }\n    int Pre(Pt i, int x){\n        if(i == NIL) return -INF;\n        if(i-&gt;data &lt; x) return max(i-&gt;data, Pre(i-&gt;v[1], x));\n        return Pre(i-&gt;v[0], x);\n    }\n    int Next(Pt i, int x){\n        if(i == NIL) return INF;\n        if(i-&gt;data &gt; x) return min(i-&gt;data, Next(i-&gt;v[0], x));\n        return Next(i-&gt;v[1], x);\n    }\n\n    // interface for user\n    void Clear(){Rot = NIL;}\n    void Insert(int x){\n        Insert(Rot, NIL, x);\n        Rot-&gt;color = BLACK;\n    }\n    void Delete(int x){\n        Pt i = Find(Rot, x);\n        Color dc = i-&gt;color;// deleted color\n        if(i == NIL) return;\n        if(i-&gt;v[0] == NIL || i-&gt;v[1] == NIL){ // i has at most one child\n            bool p = (i-&gt;v[1] != NIL);\n            i-&gt;v[p]-&gt;F = i-&gt;F, i-&gt;F-&gt;v[Is(i)] = i-&gt;v[p];\n            i = i-&gt;v[p];\n            if(i-&gt;F == NIL) Rot = i;\n        }else{\n            Pt j = i-&gt;v[0];j-&gt;size--;\n            while(j-&gt;v[1] != NIL) j = j-&gt;v[1], j-&gt;size--;// maximum in left subtree\n\n            dc = j-&gt;color;\n            i-&gt;data = j-&gt;data;// replace i with j\n            i = j-&gt;v[0], i-&gt;F = j-&gt;F, j-&gt;F-&gt;v[Is(j)] = i; // delete j\n        }\n        if(dc == BLACK) FixUp_Delete(i);\n    }\n    int Rank(int x){return Rank(Rot, x);}\n    int Kth(int k){return Kth(Rot, k);}\n    int Pre(int x){return Pre(Rot, x);}\n    int Next(int x){return Next(Rot, x);}\n}Tree;\n</code></pre>"},{"location":"ADS/#reverse-index","title":"Reverse Index","text":"<p>\u5c31\u662f\u4e00\u4e2a\u90bb\u63a5\u77e9\u9635\u4e00\u6837\u7684\u611f\u89c9\uff0c\u9644\u52a0\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u4f18\u5316\uff0c\u6ca1\u5565\u597d\u8bf4\u7684</p> <p>\u4e00\u4e9b\u4e13\u6709\u540d\u8bcd\uff1a</p> <p></p> <p></p> <p></p> <p></p> <ul> <li> <p>Notes</p> <ul> <li> <p>word stemming \u4f1a\u63d0\u9ad8\u53ec\u56de\u7387\uff0c\u4f46\u662f\u4f1a\u5f71\u54cd\u7cbe\u5ea6</p> </li> <li> <p>Thresholding \u6ce8\u610f\u662fdocument\u8fd8\u662fquery,\u4e24\u8005\u64cd\u4f5c\u65b9\u5f0f\u4e0d\u4e00\u6837</p> </li> <li> <p>In data retrieval, the response time is more important than the relevance of the answer set. </p> </li> </ul> </li> </ul>"},{"location":"ADS/#leftist-tree","title":"Leftist Tree","text":"<p>\u4e00\u79cd\u81ea\u5e73\u8861\u4e8c\u53c9\u5806\uff0c\u5e38\u7528\u4e8e\u4e24\u5806\u7684\u5feb\u901f\u5408\u5e76\u64cd\u4f5c</p> <ul> <li> <p>\u7279\u5f81\uff1a</p> <ul> <li> <p>\u5806\u7684\u7279\u6027\uff1a\u6839\u8282\u70b9\u4e3a\u5b50\u6811\u4e2d\u7684\u6700\u5927 / \u6700\u5c0f\u503c</p> </li> <li> <p>\u5de6\u504f\uff1aNpl(Ls) &gt;= Npl(Rs)</p> <ul> <li> <p>\u5176\u4e2dNpl(x)\u4e3ax\u5230\u6700\u8fd1\u7a7a\u8282\u70b9\u7684\u8ddd\u79bb\uff0cNpl(x) = min{Npl(C)} + 1</p> </li> <li> <p>\u89c4\u5b9aNpl(NULL) = -1 </p> </li> </ul> </li> </ul> </li> <li> <p>\u7ef4\u62a4\uff1a</p> <ul> <li> <p>\u6838\u5fc3\u64cd\u4f5c merge</p> <ul> <li> <p>\u9009\u4e24\u9897\u6811\u4e2d\u6839\u8282\u70b9\u5c0f\u7684\u90a3\u68f5\u4f5c\u4e3a\u4e3b\u6811</p> </li> <li> <p>\u9012\u5f52\u5408\u5e76\u5176\u53f3\u5b50\u6811\u4e0e\u5269\u4e0b\u7684\u90a3\u68f5\u6811</p> </li> <li> <p>\u9012\u5f52\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u5bf9\u5de6\u504f\u6027\u8d28\u8fdb\u884c\u7ef4\u62a4\uff0c\u4ea4\u6362\u4e0d\u7b26\u6027\u8d28\u7684\u5de6\u53f3\u5b50\u6811\u5e76\u7ef4\u62a4 Npl</p> </li> </ul> </li> <li> <p>\u63d2\u5165</p> <ul> <li>\u53ef\u4ee5\u89c6\u4e3a\u4e3b\u6811\u4e0e\u4e00\u4e2a\u5355\u4e00\u8282\u70b9\u7684\u6811\u5408\u5e76</li> </ul> </li> <li> <p>\u5220\u9664\uff08\u6700\u503c\uff09</p> <ul> <li>\u76f4\u63a5\u5220\u9664\u6839\u8282\u70b9\uff0c\u5e76\u5408\u5e76\u5176\u4e24\u68f5\u5b50\u6811 </li> </ul> </li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u5206\u6790</p> <ul> <li> <p>\u53ef\u4ee5\u5229\u7528\u7c7b\u4f3c\u7ea2\u9ed1\u6811\u4e2d\u7684\u6570\u5b66\u5f52\u7eb3\u6cd5\uff0c\u8bc1\u660e</p> <p>\u53f3\u8def\u5f84\u4e0a\u6709 \\(r\\) \u4e2a\u8282\u70b9\u7684\u5de6\u504f\u6811\u81f3\u5c11\u6709 \\(2^r - 1\\)\u4e2a\u8282\u70b9</p> <p>\u5373\u53f3\u8def\u5f84\u957f\u5ea6\u4e3a\\(O(logN)\\)</p> </li> <li> <p>\u800c\u5de6\u504f\u6811\u7684\u5408\u5e76\u64cd\u4f5c\u663e\u7136\u590d\u6742\u5ea6\u4e3a\u53f3\u8def\u5f84\u957f\u5ea6\u4e4b\u548c\uff0c\u56e0\u6b64\u590d\u6742\u5ea6\u4e3a\\(O(logN)\\) </p> </li> </ul> </li> </ul> Code (passed Luogu P3377) Leftist Tree<pre><code>struct Node{\n    int Key, pos, Npl;\n    Node *Ls, *Rs;\n    Node(int _Key, int _Npl = 0,  int _pos = 0, Node *_s = NULL):Key(_Key), Npl(_Npl), Ls(_s), Rs(_s), pos(_pos){}\n    bool operator &lt;(const Node &amp;Y)const{return Key == Y.Key ? pos &lt; Y.pos : Key &lt; Y.Key;} // for this specific test problem\n};\nclass Leftist{\n    private:\n        Node *Rot;\n        static Node *NIL;\n        Node *Merge(Node *L, Node *R){\n            if(L == NIL) return R;\n            if(R == NIL) return L;\n            if(*R &lt; *L) swap(L, R); // choose the root\n            L-&gt;Rs = Merge(L-&gt;Rs, R);\n            if(L-&gt;Ls-&gt;Npl &lt; L-&gt;Rs-&gt;Npl) swap(L-&gt;Ls, L-&gt;Rs); // maintain the property\n            L-&gt;Npl = L-&gt;Rs-&gt;Npl + 1;        // update Npl\n            return L;\n        }\n    public:\n        Leftist():Rot(NIL){}\n        void Clear(){Rot = NIL;}\n        void Push(int Key, int pos = 0){Rot = Merge(Rot, new Node(Key, 0, pos, NIL));}\n        bool Empty(){return Rot != NIL;}\n        int Top(){return Rot-&gt;Key;}\n        int Top_pos(){return Rot-&gt;pos;} // for this specific problem\n        int Pop(){\n            int Key = Rot-&gt;Key;\n            Rot = Merge(Rot-&gt;Ls, Rot-&gt;Rs);\n            return Key;\n        }\n        void Merge(Leftist T){Rot = Merge(Rot, T.Rot);}\n};\nNode *Leftist::NIL = new Node(-1, -1);  // NULL Node\n</code></pre>"},{"location":"ADS/#skew-heap","title":"Skew Heap","text":"<p>\u4e5f\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u4e8c\u53c9\u5806\uff0c\u5e38\u7528\u4e8e\u4e24\u5806\u7684\u5feb\u901f\u5408\u5e76\u64cd\u4f5c</p> <ul> <li> <p>\u7279\u5f81\uff1a</p> <ul> <li> <p>\u5806\u7684\u7279\u6027\uff1a\u6839\u8282\u70b9\u4e3a\u5b50\u6811\u4e2d\u7684\u6700\u5927 / \u6700\u5c0f\u503c</p> </li> <li> <p>Skew\uff1a\u4e0d\u518d\u7ef4\u62a4Npl\uff0c\u800c\u662f\u901a\u8fc7\u6bcf\u6b21\u5f3a\u5236\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\u7684\u65b9\u5f0f\u6765\u7ef4\u62a4\u5e73\u8861</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a \u4e3a\u4e86\u5e73\u8861\uff0c\u6bcf\u6b21\u5de6\u8fb9\u585e\u4e00\u4e2a\uff0c\u53f3\u8fb9\u585e\u4e00\u4e2a</p> </li> <li> <p>\u8fd8\u6709\u201c\u4e2d\u5eb8\u201d\u7248\uff0crandomize heap, \u540c\u6837\u4e0d\u7528\u7ef4\u62a4Npl, \u4e0d\u8fc7\u4e3a\u6bcf\u6b21\u968f\u673a\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\uff0c\u671f\u671b\u5e73\u8861\uff0c\u5176\u4f59\u5199\u6cd5\u4e00\u6a21\u4e00\u6837</p> </li> </ul> </li> <li> <p>\u7ef4\u62a4\uff1a</p> <ul> <li> <p>\u6838\u5fc3\u64cd\u4f5c merge</p> <ul> <li> <p>\u9009\u4e24\u68f5\u6811\u4e2d\u6839\u8282\u70b9\u5c0f\u7684\u4f5c\u4e3a\u4e3b\u6811\uff0c\u4ea4\u6362\u5176\u5de6\u53f3\u8282\u70b9</p> </li> <li> <p>\u9012\u5f52\u5408\u5e76\u5176\u5de6\u8282\u70b9\u4e0e\u5269\u4e0b\u7684\u4e00\u68f5\u6811</p> </li> <li> <p>\u5f53\u67d0\u68f5\u6811\u5df2\u7ecf\u4e3a\u7a7a\u65f6\u53ef\u4ee5\u76f4\u63a5\u63a5\u4e0a\uff0c\u505c\u6b62\u9012\u5f52\uff08\u4f1a\u5bfc\u81f4\u8fd9\u68f5\u5269\u4e0b\u7684\u5b50\u6811\u5185\u90e8\u6ca1\u6709\u5145\u5206\u65cb\u8f6c\uff0c\u5f71\u54cd\u89c1\u4e0b\u65b9\u590d\u6742\u5ea6\u5206\u6790\uff09    </p> </li> </ul> </li> <li> <p>\u5176\u4f59\u64cd\u4f5c\u540c\u5de6\u504f\u6811\u90fd\u7c7b\u4f3c </p> </li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1a </p> </li> </ul> <p>\u91c7\u7528\u5929\u624d\u7684\u52bf\u80fd\u5206\u6790\u6cd5</p> <p>\u5b9a\u4e49\u52bf\u80fd\u51fd\u6570 \\(\\Phi(i) = N_{heavy\\ nodes}\\)</p> <p>\u5176\u4e2d heavy node \u91cd\u8282\u70b9 \u5b9a\u4e49\u4e3a\u53f3\u5b50\u6811\u6bd4\u5de6\u5b50\u6811\u5927\u7684\u8282\u70b9</p> <p>\u6ce8\u610f\u5230\u6bcf\u6b21\u5408\u5e76\u90fd\u53d1\u751f\u5728\u5de6\u8fb9\uff0c\u800c\u5de6\u8fb9\u90fd\u662f\u53f3\u8fb9\u6362\u8fc7\u53bb\u7684\uff0c\u56e0\u6b64\u5b9e\u9645\u4e0a\u662f\u5728\u53f3\u8def\u5f84\u4e0a\u64cd\u4f5c\uff0c\u5de6\u8fb9\u7684\u90a3\u4e9b\u7ed3\u6784\u4e0d\u53d8\uff0c\u53ea\u8981\u5173\u6ce8\u64cd\u4f5c\u524d\u6574\u68f5\u6811\u7684\u53f3\u8def\u5f84</p> <p>\u5c06\u53f3\u8def\u5f84\u5355\u72ec\u5265\u79bb\u51fa\u6765\uff0c\u8bbe \\(H_i = l_i + h_i\\) (\\(H_i\\) \u4e3a\u53f3\u8def\u5f84\u8282\u70b9\u6570\uff0c\\(l_i\\) \u4e3a\u5176\u4e2dlight node, \\(h_i\\) \u4e3a\u5176\u4e2dheavy node)</p> <p>\u5219\u5bf9\u4e8e\u4e00\u6b21merge, $$ c_i \\leq H_1 + H_2 = l_1 + h_1 + l_2 + h_2 $$</p> <p>\u800c\u6bcf\u6b21 merge \u4e4b\u540e\uff0c \u53f3\u8def\u5f84\u4e0a\u6240\u6709\u7684\u91cd\u8282\u70b9\u5c06\u4f1a\u53d8\u6210\u8f7b\u8282\u70b9\uff0c \u8f7b\u8282\u70b9\u6709\u53ef\u80fd\u4f1a\u53d8\u6210\u91cd\u8282\u70b9</p> <p>\u5219 $$ \\Delta \\Phi(i) \\leq (l_1 + l_2) - (h_1 + h_2) $$ (\u53f3\u8def\u5f84\u5916\u7684\u91cd\u8282\u70b9\u4e0d\u53d8\uff0c\u4f1a\u88ab\u62b5\u6d88)</p> <p>\u7efc\u4e0a\uff0c\u5f97\u5230 $$ \\hat{c_i} \\leq c_i + \\Delta \\Phi(i) = 2(l_1 + l_2) $$</p> <p>\u6839\u636e\u8f7b\u8282\u70b9\u5b9a\u4e49\uff0c\u5de6\u5b50\u6811\u4e00\u5b9a\u5927\u4e8e\u53f3\u5b50\u6811\uff0c\u800c\u4e14\u5728\u53f3\u8def\u5f84\u4e0a\uff0c\u4ece\u800c \\(l_1 + l_2 = O(logN)\\)</p> <p>\u5373\u8bc1\u660e\u4e86\u6bcf\u6b21 merge \u7684\u644a\u8fd8\u4ee3\u4ef7\u4e3a \\(O(logN)\\)</p> <p>\u4e0b\u9762\u8bf4\u660e\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u63d0\u524d\u7ec8\u6b62\u4e0d\u4f1a\u5f71\u54cd\u644a\u8fd8\u4ee3\u4ef7\uff1a</p> <p>\u9996\u5148\uff0c\u63d0\u524d\u7ec8\u6b62\u786e\u5b9e\u4f1a\u5bfc\u81f4\u5269\u4e0b\u7684\u90a3\u68f5\u5b50\u6811\u4e2d\u7684\u91cd\u8282\u70b9\u672a\u88ab\u8f6c\u5316\u4e3a\u8f7b\u8282\u70b9</p> <p>\u4f46\u662f\u89c2\u5bdf\u4e0a\u65b9 \\(\\Delta \\Phi(i)\\) \u7684\u5f0f\u5b50\u4f1a\u53d1\u73b0\uff0c\u8fd9\u90e8\u5206 \\(\\Delta h\\) \u5728\u524d\u540e\u7684\u52bf\u80fd\u51fd\u6570\u4e2d\u4fdd\u6301\u4e0d\u53d8\uff0c\u4f1a\u88ab\u76f4\u63a5\u62b5\u6d88\uff0c\u56e0\u6b64\u539f\u5f0f\u4ecd\u7136\u6210\u7acb</p> Code\uff08passed Luogu P3377\uff09 SkewHeap<pre><code>struct Node{\n    int Key, pos;\n    Node *Ls, *Rs;\n    Node(int _Key, int _pos):Key(_Key), pos(_pos), Ls(NULL), Rs(NULL){}\n    bool operator &lt;(const Node &amp;Y)const{return Key == Y.Key ? pos &lt; Y.pos : Key &lt; Y.Key;} // for this specific test problem\n};\nclass SkewHeap{\n    private:\n        Node *Rot;\n        Node *Merge(Node *L, Node *R){\n            if(L == NULL) return R;         \n            if(R == NULL) return L;\n            if(*R &lt; *L) swap(L, R); // choose the smaller one as the root\n            swap(L-&gt;Ls, L-&gt;Rs);\n            L-&gt;Ls = Merge(L-&gt;Ls, R);\n            return L;\n        }\n    public:\n        void Clear(){Rot = NULL;}\n        void Push(int Key, int pos = 0){Rot = Merge(Rot, new Node(Key, pos));}\n        bool Empty(){return Rot != NULL;}\n        int Top(){return Rot-&gt;Key;}\n        int Top_pos(){return Rot-&gt;pos;}\n        int Pop(){\n            int Key = Rot-&gt;Key;\n            Rot = Merge(Rot-&gt;Ls, Rot-&gt;Rs);\n            return Key;\n        }\n        void Merge(SkewHeap T){Rot = Merge(Rot, T.Rot);}\n};\n</code></pre>"},{"location":"ADS/#binomial-queue","title":"Binomial Queue","text":"<ul> <li> <p>\u7279\u5f81</p> <ul> <li> <p>\u7531\u4e00\u7cfb\u5217\u4e8c\u9879\u6811\u7ec4\u6210\uff0c\u6bcf\u4e2a\u4e8c\u9879\u6811\u90fd\u662f\u4e00\u9897\u8282\u70b9\u6570\u4e3a\\(2^K\\)\u7684\u6811\uff0c\u6ee1\u8db3\u7b2c\\(R\\)\u5c42\u7684\u8282\u70b9\u6570\u4e3a\\(C_{K}^{R}\\)</p> </li> <li> <p>\u672c\u8d28\u4e0a\u6bcf\u68f5\u6811\u5c31\u4ee3\u8868\u4e8c\u8fdb\u5236\u4f4d\u7684\u4e00\u4e2a\u201c1\u201d\uff0c \u56e0\u6b64\u4e00\u5207\u64cd\u4f5c\u90fd\u53ef\u4ee5\u770b\u6210\u5728\u4e8c\u8fdb\u5236\u4e0a\u7684\u8fd0\u7b97</p> </li> </ul> </li> <li> <p>\u7ef4\u62a4</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li>\u76f8\u5f53\u4e8e\u4e8c\u8fdb\u5236+1, \u65b0\u8282\u70b9\u76f4\u63a5\u4e3a\u4e00\u9897\u5b50\u6811\uff0c\u7136\u540e\u5411\u4e0a\u8fdb\u4f4d\u5408\u5e76</li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u627e\u6700\u5c0f\u503c\u663e\u7136\u9700\u8981\u904d\u5386\u6240\u6709\u6811\u6839</p> </li> <li> <p>\u5220\u9664\u6839\u8282\u70b9\u76f8\u5f53\u4e8e\u4e8c\u8fdb\u5236-1, \u5220\u9664\u67d0\u9897\u6811\u6839\u8282\u70b9\u540e\uff0c\u5c06\u5176\u5b50\u6811\u5206\u89e3\u4e3a\u4e00\u4e2a\u65b0\u7684\u4e8c\u9879\u961f\u5217\uff0c\u7136\u540e\u4e24\u4e8c\u8fdb\u5236\u6570\u76f8\u52a0\u5408\u5e76</p> </li> </ul> </li> <li> <p>\u5408\u5e76</p> <ul> <li> <p>\u4e24\u4e2a\u4e8c\u9879\u961f\u5217\u5408\u5e76\uff0c\u76f8\u5f53\u4e8e\u4e8c\u8fdb\u5236\u76f8\u52a0\uff0c\u7136\u540e\u5c06\u8fdb\u4f4d\u7684\u90e8\u5206\u5408\u5e76</p> </li> <li> <p>\u4e24\u68f5\u4e8c\u9879\u6811\u5408\u5e76\uff0c\u4e3a\u4e86\u5e94\u7528\u5e38\u7528\u7684\u201cLeft-Child-Next-Sibling\u201d\u5b58\u50a8\u6cd5\uff0c\u4e00\u822c\u5c06\u5b50\u6811\u6309\u5927\u5c0f\u5012\u6392\uff0c\u7136\u540e\u65b0\u6765\u4e00\u9897\u540c\u7b49\u5927\u5c0f\u7684\u5b50\u6811\u65f6\uff0c\u76f4\u63a5\u5c06\u6839\u5927\u7684\u63d2\u5230\u6839\u5c0f\u7684\u5de6\u513f\u5b50\u4e0a\u5373\u53ef</p> <p>\uff08\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u9645\u6709\u70b9\u667a\u969c\uff0c\u4e0d\u5982\u52a0\u4e0a\u6700\u5de6\u6700\u53f3\u513f\u5b50\u6307\u9488\uff0c\u8be6\u89c1\u4e0b\u65b9\u4ee3\u7801\u90e8\u5206\uff09 </p> </li> </ul> </li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1a</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li> <p>\u8003\u8651\u5355\u6b21\u8fdb\u4f4d\uff0c\u6700\u574f\u590d\u6742\u5ea6\u4e3a\\(O(logN)\\)</p> </li> <li> <p>\u4f46\u662f\u8003\u8651\u6bcf\u4e00\u4f4d\u6240\u80fd\u8d21\u732e\u7684\u8fdb\u4f4d\u6b21\u6570</p> \\[ T(N) = \\frac{N}{2} + \\frac{N}{2^2} + \\frac{N}{2^3} + \\cdots = O(N) \\] <p>\u56e0\u6b64\uff0c\u63d2\u5165\u64cd\u4f5c\u7684\u5747\u644a\u590d\u6742\u5ea6\u4e3a\\(O(1)\\) </p> </li> </ul> </li> <li> <p>\u5408\u5e76 </p> <ul> <li> <p>\u7531\u4e0a\u53ef\u77e5\uff0c\u4e24\u68f5\u4e8c\u9879\u6811\u7684\u5408\u5e76\u662f\\(O(1)\\)\u7684</p> </li> <li> <p>\u4e8c\u9879\u961f\u5217\u7684\u5408\u5e76\u64cd\u4f5c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e8c\u8fdb\u5236\u7684\u52a0\u6cd5\uff0c\u56e0\u6b64\u590d\u6742\u5ea6\u4e3a\\(O(logN) * O(1) = O(logN)\\)</p> </li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u67e5\u8be2\u6700\u5c0f\u503c\u663e\u7136\u4e3a\\(O(logN)\\)</p> </li> <li> <p>\u5220\u9664\u672c\u8d28\u4e0a\u5c31\u662f\u4e8c\u9879\u961f\u5217\u7684\u5408\u5e76\uff0c\u56e0\u6b64\u590d\u6742\u4e3a\\(O(logN)\\) </p> </li> </ul> </li> </ul> </li> </ul> Code (Passed Luogu P3378) <p>\u7eaf\u5c5e\u81ea\u5df1NT\uff0c\u60f3\u8981\u5b9e\u73b0\u5168\u94fe\u8868\u7248\u7684\uff0c\u7136\u540e\u5c31\u88ab\u5404\u79cdNULL\u6307\u9488\u548c\u574f\u6307\u9488\u6298\u78e8\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u7a7a\u6307\u9488\u5224\u65ad\u3001\u7ed3\u6784\u4f53\u91cd\u8f7d\u5c0f\u4e8e\u53f7\u540e\u5fd8\u8bb0\u52a0\u201c*\u201d\u5bfc\u81f4\u6307\u9488\u5185\u5b58\u5730\u5740\u6bd4\u5927\u5c0f\u7b49\uff09</p> <p>\u800c\u4e14\u6211\u8d8a\u5199\u8d8a\u89c9\u5f97\u8bfe\u4ef6\u4e2d\u4e3a\u4e86\u6ee1\u8db3left-child-next-sibling\u7684\u5b58\u50a8\u65b9\u5f0f\u800c\u5012\u6392\u513f\u5b50\u5b9e\u5728\u662f\u592a\u667a\u969c\u4e86\uff0c\u56e0\u4e3a\u4e8c\u8fdb\u5236\u52a0\u6cd5\u5e94\u8be5\u662f\u4ece\u4f4e\u4f4d\u5f00\u59cb\u8fd0\u7b97\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u5220\u9664\u64cd\u4f5c\u8fc7\u4e8e\u5c34\u5c2c\uff0c\u751a\u81f3\u9700\u8981\u989d\u5916\u5f00\u9500\u53cd\u8f6c\u94fe\u8868\u7b49</p> <p>\u56e0\u6b64\u7ecf\u5386\u5404\u79cd\u9519\u8bef\u540e\uff0c\u6211\u9009\u62e9\u6b63\u6392\u513f\u5b50\uff0c\u4fdd\u8bc1merge\u7684\u7edf\u4e00\u6027\uff0c\u5e76\u4e14\u5206\u522b\u4f7f\u7528\u5de6\u53f3\u6307\u9488\u6765\u8bb0\u5f55\u6700\u5de6\u8fb9\u7684\u513f\u5b50\u548c\u6700\u53f3\u8fb9\u7684\u513f\u5b50\uff0c\u4fdd\u8bc1\u4e86\u4e8c\u9879\u6811\u5408\u5e76\u4ecd\u7136\u4e3aO(1)\uff0c~~\u7528\u8f83\u5c0f\u7684\u7a7a\u95f4\u5927\u5927\u964d\u4f4e\u4e86\u7f16\u7801\u590d\u6742\u5ea6~~</p> <p>\u6b64\u5916\uff0c\u7531\u4e8e\u7528\u94fe\u8868\u5b9e\u73b0\uff0c\u4e24\u68f5\u4e8c\u9879\u6811\u5305\u62ec\u8fdb\u4f4d\u7684\u4e8c\u9879\u6811\u7684\u5927\u5c0f\u5173\u7cfb\u5e76\u4e0d\u80fd\u4fdd\u8bc1\uff0c\u56e0\u6b64\u5728\u53cc\u6307\u9488\u7684\u57fa\u7840\u4e0a\u53c8\u8981\u52a0\u5165\u5404\u79cd\u7e41\u7410\u7684\u5224\u65ad\uff0c\u786e\u5b9e\u662f\u6709\u70b9\u9ebb\u70e6\u7684\uff0c\u8fd8\u662f\u6570\u7ec4\u5b9e\u73b0\u6bd4\u8f83\u597d\uff01\uff01\uff01</p> Binomial Queue<pre><code>class BinomialQueue{\nprivate:\n    struct Node{\n        int data, size;\n        Node *Ls, *nxt, *Rs;    // left-child-next-sibling + right-child to simplify the coding\n        Node(int _data): data(_data), size(1), Ls(NULL), nxt(NULL), Rs(NULL){}\n        bool operator &lt; (const Node &amp;rhs) const{return data &lt; rhs.data;}\n    };\n    Node *Rots;\n    Node *Merge(Node *i, Node *j){// Merge two binomial trees in O(1)\n        if(i == NULL) return j;\n        if(j == NULL) return i;\n        if(*j &lt; *i) swap(i, j);\n        if(i-&gt;Ls == NULL) i-&gt;Ls = i-&gt;Rs = j; else i-&gt;Rs-&gt;nxt = j, i-&gt;Rs = j;\n        i-&gt;size += j-&gt;size, i-&gt;nxt = j-&gt;nxt = NULL;\n        return i;\n    }\n    void Merge(BinomialQueue *BQ){\n        if(BQ == NULL) return;\n        Node *i = Rots, *j = BQ-&gt;Rots, *k = NULL, *t = NULL, *tp = NULL; \n        // i is the current node of this, j is the current node of BQ, k is the carry node\n        // t is the new line of the result, tp is the current node of the new line\n        Rots = NULL;\n        while(i != NULL || j != NULL || k != NULL){\n            if(i == NULL || (j != NULL &amp;&amp; j-&gt;size &lt; i-&gt;size)) swap(i, j);\n            Node *nxti = NULL, *nxtj = NULL;\n            if(i != NULL) nxti = i-&gt;nxt;\n            if(j != NULL) nxtj = j-&gt;nxt; // store the next node of i and j, otherwise it will be changed\n            if(i != NULL &amp;&amp; j != NULL){ // easy task \n                if(k != NULL &amp;&amp; k-&gt;size &lt; i-&gt;size) tp = k, k= NULL;          // easy\n                else if(i-&gt;size == j-&gt;size) tp = k, k = Merge(i, j), i = nxti, j = nxtj; // 1 + 1 + ?\n                else if(k != NULL) tp = NULL, k = Merge(i, k), i = nxti;    // 1 + 1 + 0\n                else tp = i, i = nxti;                                      // 1\n            }else{\n                int cnt = (i != NULL) + (j != NULL) + (k != NULL);\n                if(cnt == 1){   // 1 node in the line  1 + 0 + 0\n                    if(i != NULL) tp = i, i = nxti;\n                    else if(j != NULL) tp = j, j = nxtj;\n                    else tp = k, k = NULL;\n                }\n                else if(k-&gt;size == i-&gt;size) tp = NULL, k = Merge(i, k), i = nxti;  // 1 + 0 + 1\n                else tp = k, k = NULL;   // 0 + 0 + 1 \n            }\n            if(tp != NULL)\n                if(Rots == NULL) Rots = t = tp;else t-&gt;nxt = tp, t = t-&gt;nxt;\n            if(j == NULL &amp;&amp; k == NULL){t-&gt;nxt = i;break;} // break the loop to minimize the time complexity\n        }\n    }\n\npublic:\n    BinomialQueue(): Rots(NULL){}\n    BinomialQueue(Node *x): Rots(x){}\n    bool Empty(){return Rots == NULL;}\n    int Top(){  // return the minimum element\n        if(Empty()) return -1;\n        Node *i = Rots;\n        int res = i-&gt;data;\n        while(i != NULL) res = min(res, i-&gt;data), i = i-&gt;nxt;\n        return res;\n    }\n\n    void Insert(int x){Merge(new BinomialQueue(new Node(x)));}\n\n    int Pop(){ // pop the min\n        if(Empty()) return -1;\n        Node *i = Rots, *Pre = NULL, *Pos = i, *Pos_Pre = NULL;\n        while(i != NULL){\n            if(*i &lt; *Pos) Pos = i, Pos_Pre = Pre;\n            Pre = i, i = i-&gt;nxt;\n        }\n        if(Pos_Pre == NULL) Rots = Pos-&gt;nxt;else Pos_Pre-&gt;nxt = Pos-&gt;nxt;\n\n        int res = Pos-&gt;data;\n        Merge(new BinomialQueue(Pos-&gt;Ls));\n        return res;\n    }\n\n    void Print(){  // for debug\n        queue&lt;Node *&gt;Q;\n        Q.push(Rots);\n        while(!Q.empty()){\n            Node *j = Q.front(); Q.pop();\n            if(j == NULL) continue;\n            for(; j != NULL; j = j-&gt;nxt) Q.push(j-&gt;Ls), printf(\"%d \", j-&gt;data);\n            puts(\"\");\n        }\n        puts(\"\");\n    }\n};\n</code></pre>"},{"location":"ADS/#fibonacci-heap","title":"Fibonacci Heap","text":"<ul> <li> <p>\u7279\u5f81</p> <ul> <li> <p>\u6709\u70b9\u7c7b\u4f3c\u4e0e\u4e8c\u9879\u961f\u5217\uff0c\u7531\u4e00\u5806\u5b50\u6811\u4e32\u63a5\u800c\u6210\uff0c\u4f46\u662f\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709\u4efb\u610f\u591a\u7684\u513f\u5b50\uff0c\u800c\u4e14\u4e0d\u518d\u662f\u4e8c\u9879\u6811</p> </li> <li> <p>\u5144\u5f1f\u95f4\u901a\u8fc7\u5faa\u73af\u53cc\u5411\u94fe\u8868\u4e32\u63a5\uff0c\u7236\u5b50\u95f4\u540c\u6837\u4f7f\u7528\u7c7b\u4f3c\u201cLeft-Child-Next-Sibling\u201d\u5b58\u50a8\u65b9\u5f0f </p> </li> <li> <p>\u5177\u6709\u6700\u5c0f\u5806\u7684\u6027\u8d28\uff0c\u5373\u6839\u8282\u70b9\u4e3a\u6700\u5c0f\u503c </p> </li> </ul> </li> <li> <p>\u7ef4\u62a4</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li>\u76f4\u63a5\u5728root list\u4e2d\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u8282\u70b9\uff0c\u7136\u540e\u66f4\u65b0\u6700\u5c0f\u503c</li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u5220\u9664\u6700\u5c0f\u503c\uff0c\u5c06\u5176\u5b50\u6811\u5168\u90e8\u63d2\u5165\u5230root list\u4e2d</p> </li> <li> <p>\u795e\u5947\u5408\u5e76</p> <ul> <li> <p>\u5c06root list\u4e2d\u6240\u6709\u5ea6\u76f8\u540c\uff08\u8fd9\u91cc\u5ea6 \u6307\u8282\u70b9\u7684\u76f4\u8fde\u513f\u5b50\u6570\u76ee\uff09\u7684\u5b50\u6811\u6309\u5c0f\u6839\u5806\u7684\u65b9\u5f0f\u5408\u5e76</p> </li> <li> <p>\u91cd\u590d\u5904\u7406\uff0c\u76f4\u81f3root list\u4e2d\u6ca1\u6709\u5ea6\u76f8\u540c\u7684\u5b50\u6811   </p> </li> </ul> </li> </ul> </li> <li> <p>\u5408\u5e76</p> <ul> <li>\u4e24\u4e2a\u5806\u5408\u5e76\uff0c\u76f8\u5f53\u4e8e\u4e24\u4e2aroot list\u505a\u5faa\u73af\u53cc\u5411\u94fe\u8868\u7684\u5408\u5e76\uff0c\u7136\u540e\u66f4\u65b0\u6700\u5c0f\u503c\u5373\u53ef</li> </ul> </li> <li> <p>\u51cf\u5c0f\u5173\u952e\u5b57</p> <ul> <li> <p>\u5c06\u8282\u70b9\u7684\u5173\u952e\u5b57\u51cf\u5c0f\uff0c\u7136\u540e\u4e0e\u7236\u8282\u70b9\u6bd4\u8f83\uff0c\u5982\u679c\u5c0f\u4e8e\u7236\u8282\u70b9\uff0c\u5219\u4e0d\u6ee1\u8db3\u5c0f\u6839\u5806\u7684\u6027\u8d28\uff0c\u5c06\u8fd9\u68f5\u5b50\u6811\u6458\u4e0b\u653e\u5230root list\u4e2d\uff0c\u7136\u540e\u5411\u4e0a\u7ea7\u8054\u5904\u7406</p> </li> <li> <p>\u82e5\u67d0\u4e2a\u975e\u6839\u8282\u70b9\u5df2\u7ecf\u5931\u53bb\u4e86\u4e24\u4e2a\u513f\u5b50\uff0c\u5219\u5c06\u5176\u6458\u4e0b\u653e\u5230root list\u4e2d\uff0c\u9012\u5f52\u5411\u4e0a\u7ea7\u8054\u5904\u7406 </p> </li> </ul> </li> <li> <p>\u5220\u9664\u8282\u70b9</p> <ul> <li>\u5c06\u8282\u70b9\u7684\u5173\u952e\u5b57\u51cf\u5c0f\u5230\u8d1f\u65e0\u7a77\uff0c\u7136\u540e\u5220\u9664\u6700\u5c0f\u503c\u5373\u53ef</li> </ul> </li> </ul> </li> <li> <p>\u590d\u6742\u5ea6\u5206\u6790</p> <p>\u91c7\u7528\u52bf\u80fd\u5206\u6790\u6cd5\uff0c\u5b9a\u4e49\u52bf\u80fd\u51fd\u6570 \\(\\Phi(H) = t(H) + 2m(H)\\)\uff0c\u5176\u4e2d \\(t(H)\\) \u4e3aroot list\u4e2d\u7684\u8282\u70b9\u6570\uff0c\\(m(H)\\) \u4e3a\u5df2\u7ecf\u6807\u8bb0\u8fc7\u7684\u8282\u70b9\u6570\uff08\u5373\u5df2\u7ecf\u5931\u53bb\u4e00\u4e2a\u513f\u5b50\u7684\u975e\u6839\u8282\u70b9\uff09</p> <p>\u5148\u8981\u8bc1\u660e\u4e00\u70b9\uff1aN \u4e2a\u8282\u70b9\u7684\u6590\u6ce2\u90a3\u5951\u5806\u7684\u5b50\u6811\u7684\u6700\u5927\u5ea6\u6570 \\(D_n = O(logN)\\)</p> <p>\u4e3a\u6b64\uff0c\u8bbe\u8282\u70b9 x \u6240\u5728\u5b50\u6811\u7684\u8282\u70b9\u6570\u4e3a \\(S_x\\)\uff0c\u5219 \\(S_x \\geq F_{k+2}\\), \u5176\u4e2d \\(F_k\\) \u4e3a\u7b2c k \u4e2a\u6590\u6ce2\u90a3\u5951\u6570</p> <p>\u8bc1\u660e\uff1a</p> <p>\u9996\u5148\uff0c\u5bf9\u4e8e x \u7684\u6240\u6709\u6309\u6dfb\u52a0\u987a\u5e8f\u6392\u5217\u7684\u5b50\u6811\\(y_i\\)\uff0c\u6709\\(y_i \\geq (i-1) -1 =i-2\\)\uff08\u56e0\u4e3a\u53ea\u6709\u5ea6\u6570\u76f8\u540c\u624d\u80fd\u5408\u5e76\uff0c\u5e76\u4e14\u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u5931\u53bb\u4e00\u4e2a\u513f\u5b50\uff09</p> <p>\u8bbe\u5ea6\u6570\u4e3a k \u7684\u8282\u70b9\u6240\u5728\u5b50\u6811\u7684\u6700\u5c0f\u5927\u5c0f\u4e3a\\(S_k\\)\uff0c\u5219\u6709 \\(S_k \\geq 2 + \\Sigma_2^k size(y_i) \\geq 2 + \\Sigma_{2}^{k}S_{i-2} \\geq F_{k+2}\\)</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li>\u76f4\u63a5\u63d2\u5165\u5230root list\uff0c\u663e\u7136\u590d\u6742\u5ea6\u4e3a\\(O(1)\\)</li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u67e5\u8be2\u6700\u5c0f\u503c\u53ef\u4ee5\u76f4\u63a5\u7528\u4e00\u4e2a\u6307\u9488\u8bb0\u5f55\uff0c\u56e0\u6b64\u4e3a\\(O(1)\\)</p> </li> <li> <p>\u5220\u9664\u65f6\uff0c\u9996\u5148\u9700\u8981\u5c06\u6240\u6709\u5b50\u6811\u63d2\u5165\u5230root list\u4e2d\uff0c\u9700\u8981\\(O(D_N) = O(logN)\\)</p> </li> <li> <p>\u795e\u5947\u5408\u5e76\u7684\u5747\u644a\u5206\u6790</p> <ul> <li> <p>\u5408\u5e76\u9700\u8981\u5904\u7406\u7684\u603b\u7ed3\u70b9\u6570\u6700\u5927\u4e3a \\(D_N + t(H) - 1\\)\uff0c\u7531\u4e8e\u6bcf\u6b21\u5408\u5e76\u90fd\u4f1a\u51cf\u5c11\u4e00\u4e2a\u8282\u70b9\uff0c\u56e0\u6b64\u5b9e\u9645\u5f00\u9500\u7684\u590d\u6742\u5ea6\u4e3a\\(O(D_N + t(H) - 1)\\)</p> </li> <li> <p>\u5904\u7406\u8fc7\u540e\uff0c\u663e\u7136\\(t(H) \\leq D_N + 1\\) </p> </li> <li> <p>\u56e0\u6b64\u603b\u5747\u644a\u590d\u6742\u5ea6      $$\\hat c_i = O(D_N + t(H)) + \\Delta \\Phi $$</p> \\[= O(D_N + t(H)) + ((D_N + 1 + 2m(H)) - (t(H) + 2m(H))) \\] \\[= O(D_N) = O(logN)\\] </li> </ul> </li> </ul> </li> <li> <p>\u5408\u5e76</p> <ul> <li>\u4e24\u4e2a\u94fe\u8868\u5408\u5e76\uff0c\u663e\u7136\u590d\u6742\u5ea6\u4e3a\\(O(1)\\)</li> </ul> </li> <li> <p>\u51cf\u5c0f\u5173\u952e\u5b57</p> <ul> <li> <p>\u4e3b\u8981\u5728\u4e8e\u9012\u5f52\u5411\u4e0a\u7ea7\u8054\u65ad\u5f00\u7684\u5904\u7406\uff0c\u4e0b\u9762\u8bc1\u660e\u5176\u5747\u644a\u590d\u6742\u5ea6\u4e3a\\(O(1)\\)</p> <p>\u5047\u8bbe\u8c03\u7528\u4e86 k \u6b21\u9012\u5f52\u5411\u4e0a\u7684\u64cd\u4f5c\uff0c\u5373\u62d4\u6389\u4e86 k - 1 \u4e2a\u8282\u70b9\uff0c\u590d\u6742\u5ea6\u4e3a \\(O(k)\\)</p> <p>\\(\\Delta \\Phi \\leq (t(H) + (k - 1) + 1 + 2(m(H) - (k - 1) + 1)) - (t(H) + 2m(H)) = 4 - c\\) </p> <p>\u5176\u4e2d\u524d\u9762\u6839\u8282\u70b9\u7684 +1 \u8868\u793a\u51cf\u5c0f\u5173\u952e\u5b57\u7684\u8fd9\u68f5\u5b50\u6811\uff0c\u540e\u9762\u7684 +1 \u8868\u793a\u6700\u540e\u505c\u6b62\u65f6\u53ef\u80fd\u7684\u65b0\u589e\u6807\u8bb0</p> <p>\u56e0\u6b64\uff0c\u6700\u7ec8\u7684\u5747\u644a\u590d\u6742\u5ea6 </p> \\[\\hat c_i = O(k) + \\Delta \\Phi = O(1)\\] </li> </ul> </li> </ul> </li> </ul> Code (Passed Luogu P3371 &amp; P4779) <p>\u6590\u6ce2\u90a3\u5951\u7684\u4f18\u8d8a\u6027\u4e3b\u8981\u4f53\u73b0\u5728\u63d2\u5165\u548c\u51cf\u5c0f\u5173\u952e\u5b57\u7684\u64cd\u4f5c\u4e0a\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5728\\(O(1)\\)\u7684\u65f6\u95f4\u5185\u5b8c\u6210</p> <p>\u56e0\u6b64\uff0c\u5728\u5220\u9664\u8f83\u5c11\u7684\u60c5\u51b5\u4e0b\uff0c\u6590\u6ce2\u90a3\u5951\u5806\u7684\u6548\u7387\u662f\u975e\u5e38\u9ad8\u7684\uff0c\u4f46\u662f\u5728\u5220\u9664\u8f83\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u7531\u4e8e\u603b\u4f53\u5e38\u6570\u8f83\u5927\uff0c\u53ef\u80fd\u4f1a\u6bd4\u4e00\u822c\u7684\u5806\u66f4\u6162</p> <p>\u7ecf\u5178\uff1a\u6590\u6ce2\u90a3\u5951\u5806\u4f18\u5316DIJ \u590d\u6742\u5ea6 \\(O(N + MlogM) --&gt; O(NlogN + M)\\)\uff0c\u5728\u7a20\u5bc6\u56fe\u7684\u4f18\u5316\u6548\u679c\u8fd8\u662f\u975e\u5e38\u660e\u663e\u7684</p> Fibonacci Heap<pre><code>class FiboHeap{\nprivate:\n    struct Node{\n        int pos, data;// pos denotes the node, data denotes the distance\n        int degree;     // degree records the direct children of this node\n        Node *Ls, *Rs, *Fa, *Son;//Ls &amp; Rs for cycle list with siblings, Fa for parent, Son for  a single child (randomly chosen)\n        bool mark;      // spcecial signal for FiboHeap, set to 1 if a child of this node has been removed\n        Node(int _pos, int _data){    // new Node at node _pos with value _data\n            pos = _pos, data = _data;\n            degree = 0;\n            Ls = Rs = this, Fa = Son = NULL;\n            mark = 0;\n        }\n        void Remove(){  // remove this Node from the cycle-list\n            this-&gt;Ls-&gt;Rs = this-&gt;Rs;\n            this-&gt;Rs-&gt;Ls = this-&gt;Ls;\n            this-&gt;Ls = this-&gt;Rs = this, this-&gt;Fa = NULL;\n        }\n        void Link(Node *L, Node *R){ // link this node between L and R\n            L-&gt;Rs = this, this-&gt;Ls = L;\n            R-&gt;Ls = this, this-&gt;Rs = R;\n        }\n    };\n    int Size;\n    Node *Min;\n    Node *Dis[MaxN];\n    void Consolidate(){ // Consolidating the nodes (subtrees) in root list\n        static Node *A[MaxS];// A[i] denotes the subtree with degree i\n        Node *p = Min, *q;\n        LL S = 0; // State of the degree of the root list, more precisely locate the nodes not null\n        while(p != NULL){\n            q = p, p = p-&gt;Rs;\n            if(q == p) p = NULL;\n            q-&gt;Remove();\n            while(A[q-&gt;degree] != NULL){    // merge the subtree with the same degree, ensure the degree of the root list is unique\n                Node *t = A[q-&gt;degree];\n                if(q-&gt;data &gt; t-&gt;data) swap(q, t); // minimum heap\n\n                t-&gt;Fa = q, S ^= 1ll &lt;&lt; (q-&gt;degree), A[q-&gt;degree++] = NULL;\n                if(q-&gt;Son == NULL) q-&gt;Son = t;else t-&gt;Link(q-&gt;Son-&gt;Ls, q-&gt;Son);\n            }\n            S |= 1ll &lt;&lt; (q-&gt;degree), A[q-&gt;degree] = q;\n        }\n        Min = NULL;\n        while(S){\n            int i = __builtin_ctzll(S);// find the first bit 1\n            S ^= 1ll &lt;&lt; i;\n            if(Min == NULL) Min = A[i], Min-&gt;Ls = Min-&gt;Rs = Min;\n            else{\n                A[i]-&gt;Link(Min-&gt;Ls, Min);\n                if(A[i]-&gt;data &lt; Min-&gt;data) Min = A[i];\n            }\n            A[i] = NULL;\n        }\n    }\n    void Cut(Node *p, Node *q){ // cut p from its parent q\n        if(q-&gt;Son == p)\n            if(p == p-&gt;Rs) q-&gt;Son = NULL;else q-&gt;Son = p-&gt;Rs;\n        p-&gt;Remove(), q-&gt;degree--;\n\n        p-&gt;mark = 0, p-&gt;Link(Min-&gt;Ls, Min);\n    }\n    void CascadingCut(Node *p){ // cascading cut p recursively\n        Node *q = p-&gt;Fa;\n        if(q != NULL){\n            if(p-&gt;mark == 0) p-&gt;mark = 1;\n            else Cut(p, q), CascadingCut(q);\n        }\n    }\npublic:\n    FiboHeap(): Min(NULL), Size(0){}\n    void Clear(){Min = NULL, Size = 0;}\n    bool Empty(){return !Size;} // check if the heap is empty\n    void Insert(int i, int x){\n        Size++;\n        Node *p = new Node(i, x);  // build a new Node &amp; insert it into root list\n        if(Min == NULL){\n            Min = p;\n            Min-&gt;Ls = Min-&gt;Rs = Min;\n        }else{\n            p-&gt;Link(Min-&gt;Ls, Min);\n            if(p-&gt;data &lt; Min-&gt;data) Min = p;\n        }\n        Dis[i] = p;\n    }\n    int Top(){return Min-&gt;data;} // get the minimum value\n    bool Find(int i){return Dis[i] != NULL;}    // check if the i-th node is in the heap\n    int GetData(int i){return Dis[i]-&gt;data;} // get the value of i-th node\n    void Merge(FiboHeap *H){    // merge two heaps(not used in this problem)\n        if(H-&gt;Min == NULL) return;\n        if(Min == NULL) return (void)(Min = H-&gt;Min, Size = H-&gt;Size);\n        Node *L = Min-&gt;Ls, *R = H-&gt;Min-&gt;Ls;\n        Min-&gt;Ls = R, R-&gt;Rs = Min;\n        L-&gt;Rs = H-&gt;Min, H-&gt;Min-&gt;Ls = L;\n        Size += H-&gt;Size;\n        if(H-&gt;Min-&gt;data &lt; Min-&gt;data) Min = H-&gt;Min;\n    }\n    int Pop(){  // pop the minimum value\n        Node *p = Min-&gt;Son, *q;\n        while(p != NULL){   // split the subtree of the minimum node, and insert them into the root list\n            q = p, p = p-&gt;Rs;\n            if(p == q) p = NULL;\n            q-&gt;Remove(), q-&gt;Link(Min-&gt;Ls, Min);\n        }\n        p = Min;\n\n        if(p == p-&gt;Rs) Min = NULL;\n        else{\n            Min = p-&gt;Rs, p-&gt;Remove();\n            Consolidate();\n        }\n        Size--;\n        return p-&gt;pos; \n    }       \n    void Decrease(int i, int x){    // decrease the value of i-th Node to x\n        Node *p = Dis[i];\n        p-&gt;data = x;\n\n        if(p-&gt;Fa != NULL){      // if the node is not in the root list\n            Node *q = p-&gt;Fa;\n            if(p-&gt;data &lt; q-&gt;data){  // if the value of the node is smaller than its parent, cut it &amp; cascading cut its parent\n                Cut(p, q);\n                CascadingCut(q);\n            }\n        }\n\n        if(x &lt; Min-&gt;data) Min = p;  // update the minimum value\n    }\n};\n</code></pre>"},{"location":"ADS/#algorithm","title":"Algorithm","text":""},{"location":"ADS/#amortized-analysis","title":"Amortized Analysis (\u644a\u8fd8\u5206\u6790)","text":"<p>worst-case bound &gt;= amortized bound &gt;= average-case bound(\u5f3a\u5f31\u5173\u7cfb)</p> <ul> <li> <p>Aggregated Analysis (\u805a\u7c7b\u5206\u6790)</p> <ul> <li> <p>\u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3aN\u7684\u64cd\u4f5c\u5e8f\u5217\uff0c\u82e5\u8be5\u64cd\u4f5c\u5e8f\u5217\u7684\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aT(N),\u5219\u8be5\u64cd\u4f5c\u5e8f\u5217\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\uff08\u644a\u8fd8\u4ee3\u4ef7\uff09\u4e3a T(N) / N</p> </li> <li> <p>\u7b80\u5355\u7c97\u66b4\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u4e0d\u591f\u7cbe\u786e\uff0c\u56e0\u4e3a T(N) \u5e76\u4e0d\u4e00\u5b9a\u597d\u6c42 </p> </li> </ul> </li> <li> <p>Accounting Method (\u6838\u7b97\u6cd5)</p> <ul> <li> <p>\u4e3a\u6bcf\u4e2a\u64cd\u4f5c\u5206\u914d\u4e00\u4e2a\u989d\u5916\u644a\u8fd8\u4ee3\u4ef7\uff0c\u4ece\u800c\u4fbf\u4e8e\u4f30\u8ba1\u603b\u4ee3\u4ef7</p> </li> <li> <p>\u5e38\u89c1\u7406\u89e3\uff1a \u5c06\u989d\u5916\u5206\u914d\u7684\u4ee3\u4ef7\u89c6\u4e3a\u5b58\u94b1\uff0c\u4e4b\u540e\u7684\u4e00\u4e9b\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7\u53d6\u94b1\u6765\u89e3\u51b3\uff0c\u4ece\u800c\u4f7f\u5f97\u603b\u4ee3\u4ef7\u4e0d\u4f1a\u8d85\u8fc7\u9884\u671f</p> </li> <li> <p>\u4e2a\u4eba\u611f\u89c9\uff0c\u4e0d\u5982\u76f4\u63a5\u4ece\u5b9a\u4e49\u5f0f\u4e0a\u53bb\u7406\u89e3</p> <ul> <li> <p>\\(\\sum_{i=1}^{n}c_i + \\sum_{i=1}^{n}t_i \\leq \\sum_{i=1}^{n}a_i\\)</p> </li> <li> <p>\\(c_i\\) \u4e3a\u5b9e\u9645\u6bcf\u4e00\u6b65\u7684\u4ee3\u4ef7\uff0c\\(t_i\\) \u4e3a\u989d\u5916\u644a\u8fd8\u4ee3\u4ef7\uff0c\\(a_i\\) \u4e3a\u4f30\u8ba1\u7684\u644a\u8fd8\u4ee3\u4ef7</p> </li> <li> <p>\u56e0\u800c\u53ea\u8981\u8ba9\\(t_i \\geq 0\\), \u5c31\u80fd\u4fdd\u8bc1\u5206\u6790\u7684\u590d\u6742\u5ea6\u4e00\u5b9a\u662f\u4e0a\u754c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u7c7b\u4f3c\u4e8e\u6570\u5217\u653e\u7f29\uff0c\u901a\u8fc7\u5408\u7406~~\uff08\u7384\u5b66\uff09~~\u7684\u5206\u914d\u6743\u503c\uff0c\u4f7f\u5f97\u603b\u548c\u4e0d\u4f1a\u8d85\u8fc7\u9884\u671f</p> </li> </ul> </li> </ul> </li> <li> <p>Potential Method\uff08\u52bf\u80fd\u6cd5\uff09</p> <ul> <li> <p>\u7ed9\u6bcf\u4e2a\u72b6\u6001\u5206\u914d\u4e00\u4e2a\u52bf\u80fd\uff0c\u5c06\u644a\u8fd8\u4ee3\u4ef7\u89c6\u4e3a\u52bf\u80fd\u7684\u53d8\u5316</p> <ul> <li> <p>\\(c_i\\) \u4e3a\u5b9e\u9645\u6bcf\u4e00\u6b65\u7684\u4ee3\u4ef7\uff0c\\(a_i\\) \u4e3a\u4f30\u8ba1\u7684\u644a\u8fd8\u4ee3\u4ef7\uff0c\\(\\Phi_i\\) \u4e3a\u52bf\u80fd</p> </li> <li> <p>\\(\\Phi_0 = 0\\)</p> </li> <li> <p>\\(c_i + \\Phi_i - \\Phi_{i-1} =a_i\\) </p> </li> <li> <p>\u4e24\u8fb9\u6c42\u548c\uff0c\u5f97\u5230 \\(\\sum_{i=1}^{n}c_i + \\Phi_{n} = \\sum_{i=1}^{n}a_i\\)</p> </li> </ul> </li> <li> <p>\u4ece\u800c\u76f8\u5f53\u4e8e\u83b7\u5f97\u6bd4\u6838\u7b97\u6cd5\u66f4\u52a0\u5bbd\u677e\u7684\u6761\u4ef6\uff0c\u6211\u4eec\u4e0d\u518d\u9700\u8981\u6bcf\u4e00\u6b65\u7684\u644a\u8fd8\u4ee3\u4ef7\u90fd\u4e3a\u6b63\uff0c\u53ea\u8981\u9009\u62e9\u4e00\u4e2a\u7384\u5b66\u7684\u52bf\u80fd\u51fd\u6570\uff08\u8003\u8651\u9898\u76ee\u7279\u6027\uff09\uff0c\u4fdd\u8bc1\u6700\u540e\u4e00\u4e2a\u72b6\u6001\u7684\u52bf\u80fd\u4e3a\u6b63\u5373\u53ef</p> </li> <li> <p>Splay Tree</p> <ul> <li> <p>\u9009\u62e9\u52bf\u80fd\u51fd\u6570 \\(\\Phi = \\sum_{i=1}^{n}log(size_i)\\), \u5373\u4e3a\u6bcf\u4e2a\u8282\u70b9\u7684\u5b50\u6811\u5927\u5c0f\u4e4b\u548c</p> </li> <li> <p>\u5bf9\u4e09\u79cd\u65cb\u8f6c\u64cd\u4f5c\u8fdb\u884c\u5206\u522b\u5206\u6790\uff0c\u53ef\u4ee5\u8bc1\u660e\uff0c\u6bcf\u6b21\u65cb\u8f6c\u7684\u644a\u8fd8\u4ee3\u4ef7\u4e3a \\(O(logN)\\)</p> </li> <li> <p></p> </li> </ul> </li> </ul> </li> <li> <p>NOTES:</p> <ul> <li>Amortized bounds are weaker than the corresponding worst-case bounds, because there is no guarantee for any single operation. </li> </ul> </li> </ul>"},{"location":"ADS/#backtracking","title":"BackTracking","text":"<p>\\(\\alpha - \\beta\\) pruning</p> <ul> <li> <p>\\(\\alpha\\)</p> <ul> <li> <p>\u6c42\u6700\u5927\u503c\uff0c\u5f53\u524d\u8282\u70b9\u6c42\u6700\u5c0f\u503c\u4e14\u5f53\u524d\u503c\u5df2\u7ecf\u504f\u5c0f</p> <p></p> </li> </ul> </li> <li> <p>\\(\\beta\\)</p> <ul> <li> <p>\u6c42\u6700\u5c0f\u503c\uff0c\u5f53\u524d\u8282\u70b9\u6c42\u6700\u5927\u503c\u4e14\u5f53\u524d\u503c\u5df2\u7ecf\u504f\u5927</p> <p> </p> </li> </ul> </li> </ul> \u274c <p>Evaluating the time complexity in backtracking algorithms involves considering various factors. Some important elements that affect time complexity in backtracking include:</p> <p></p> <ul> <li> <p>The number of decisions or choices to be made at each step.</p> </li> <li> <p>The size of the problem space or the search space.</p> </li> <li> <p>Constraints and pruning techniques applied to reduce the search space.</p> </li> <li> <p></p> </li> </ul>"},{"location":"ADS/#divide-and-conquer","title":"Divide and Conquer\uff08\u5206\u6cbb\uff09","text":"<p>\u5206\u6cbb\u662f\u975e\u5e38\u91cd\u8981\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u65b9\u6cd5\uff0c\u4f46\u5728\u8bfe\u4e2d\u66f4\u6ce8\u91cd\u76f8\u5173\u5206\u6cbb\u65f6\u95f4\u590d\u6742\u5ea6\u9012\u63a8\u5f0f\u7684\u8ba1\u7b97</p> <p>\\(T(N) = a T(N/b) + f(N)\\)</p> <ul> <li> <p>\u5e26\u5165\u6cd5</p> <ul> <li> <p>\u5f97\u5230\u4e00\u4e2a\u597d\u7684\u731c\u6d4b\uff08\u53ef\u4ee5\u7528\u540e\u9762\u4ecb\u7ecd\u7684\u9012\u5f52\u6811\u8f85\u52a9\uff09</p> </li> <li> <p>\u4f7f\u7528\u6570\u5b66\u5f52\u7eb3\u6cd5\u5b8c\u6210\u8bc1\u660e</p> <p>\u6ce8\u610f\u8fd9\u91cc\u8fd0\u7b97\u8981\u6c42\u76f8\u5173\u5e38\u6570 c \u4fdd\u6301\u4e25\u683c\u4e00\u81f4\u6027\uff0c\u5373\u663e\u5f0f\u5730\u8bc1\u660e \\(T(N) \\leq cF(N)\\) \u5426\u5219\u754c\u662f\u4e0d\u5bf9\u7684</p> <p>\u4f8b\u5982\u5bf9\u4e8e\u6700\u7ecf\u5178\u7684 \\(T(N) = 2 T(N/2) + N\\)</p> \\[ T(N) \\leq 2 c (N/2) log(N/2) + N = cNlog(N) +(1-c)N \\leq cNlogN = O(N)\\] \\[ T(N) \\leq 2c (N/2) + N = (c+1)N \\neq O(N)\\] </li> <li> <p>\u7b97\u6cd5\u5bfc\u8bba\u4e2d\u63d0\u5230\uff0c\u6709\u65f6\u5f52\u7eb3\u5047\u8bbe\u4e0d\u591f\u5f3a\u65f6\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u51cf\u53bb\u4e00\u4e2a\u4f4e\u9636\u9879\u6765\u5f25\u8865</p> </li> </ul> </li> <li> <p>\u9012\u5f52\u6811 </p> </li> </ul> <p>\u5982\u4e0a\u9762\u63d0\u5230\u7684\uff0c\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684 \u83b7\u5f97\u731c\u6d4b \u751a\u81f3 \u76f4\u63a5\u8ba1\u7b97\u7b54\u6848 \u7684\u65b9\u6cd5</p> <ul> <li> <p>\u4e00\u822c\u7684\uff0c\u5bf9\u4e8e\u4e0a\u9762\u63d0\u5230\u7684\u201c\u5de5\u6574\u201d\u7684\u5f0f\u5b50\uff0c\u4ed6\u7684\u9012\u5f52\u6811\u662f\u4e00\u68f5\u5b8c\u5168 a \u53c9\u6811\uff0c\u603b\u5171\u6709 \\(\\log_b^N\\) \u5c42\uff0c\u7b2c i \u5c42\u6709 \\(a^i\\) \u4e2a\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u4ee3\u4ef7\u4e3a \\(f(N/b^i)\\)\uff0c\u56e0\u6b64\u7b2c i \u5c42\u603b\u4ee3\u4ef7\u4e3a \\(a^i f(N/b^i)\\)</p> <p>\u6700\u540e\u4e00\u5c42\u4e25\u683c\u65f6\u89c6\u4e3a \\(\\Theta(a^{log_b^N}) = \\Theta(N^{log_b^a})\\) \uff0c\u5b9e\u9645\u76f4\u63a5\u5f53T(1)=O(1)\u76f4\u63a5\u8ba1\u7b97\u4e5f\u53ef</p> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> \\[ T(N) = 3 T(N/4) + cN^2 \\] <p></p> </li> <li> <p>\u5bf9\u4e8e\u6b6a\u659c\u7684\u5f0f\u5b50\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u5f0f\u5b50\uff0c\u6709\u65f6\u7cbe\u786e\u7684\u4ee3\u4ef7\u4f1a\u5f88\u96be\u8ba1\u7b97\uff0c~~\u611f\u6027\u7406\u89e3\u731c\u6d4b~~</p> \\[ T(N) = T(N/3) + T(2N/3) + cN \\] <p>\u6574\u68f5\u6811\u5e94\u8be5\u662f\u53f3\u659c\u7684\uff0c\u524d\u9762\u51e0\u5c42\u7684\u4ee3\u4ef7\u5de7\u6070\u597d\u4e3a \\(cN\\)\uff0c\u800c\u540e\u9762\u51e0\u5c42\u663e\u7136\u4f1a\u94fa\u4e0d\u6ee1\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u4e0a\u754c \\(O(N\\log_{\\frac{3}{2}}^N)\\) \uff08\u5982\u679c\u6070\u597d\u94fa\u6ee1\uff09\uff0c\u8fdb\u800c\u731c\u6d4b \\(T(N) = O(N \\log{N})\\) \uff0c\u53ef\u4ee5\u7528\u4ee3\u5165\u6cd5\u9a8c\u8bc1  </p> <p></p> </li> <li> <p>\u4e3b\u65b9\u6cd5</p> </li> </ul> <p>\\(f(N) = O(N^{\\log_b^a - \\epsilon}), T(N) = \\Theta(N^{\\log_b^a})\\)</p> <p>\\(f(N) = \\Theta(N^{\\log_b^a}), T(N) = \\Theta(N^{\\log_b^a} \\log N)\\)</p> <p>\\(f(N) = \\Omega(N^{\\log_b^a + \\epsilon}), T(N) = \\Theta(f(N)) (\\exists c &lt; 1, af(n/b) \\leq cf(n))\\)</p> <ul> <li> <p>\u7b80\u5355\u8bb0\u5fc6\uff0c\u5c31\u662f\u770b\u9012\u5f52\u5f0f\u7684\u524d\u4e00\u9879\u5927\u8fd8\u662f\u540e\u4e00\u9879\u5927\uff0c\u6216\u8005\u8bf4\uff0c\u9012\u5f52\u6811\u4e0a\u7684\u53f6\u5b50\u8282\u70b9\u4ee3\u4ef7\u5927\u8fd8\u662f\u6839\u8282\u70b9\u4ee3\u4ef7\u5927\uff0c\u82e5\u76f8\u7b49\u5219\u90fd\u7edf\u8ba1\u4e58\u4e0alogN</p> <p>\u5176\u4e2d\u8fd9\u91cc\u6307\u7684\u5927\u5c0f\u662f\u591a\u9879\u5f0f\u610f\u4e49\u4e0a\u7684\u5927\u5c0f\uff0c\u76f8\u5dee\u4e3a \\(N^{\\epsilon}\\) \u500d\uff0c\u6bd4\u5982 \\(N\\) \u4e0e \\(N \\log N\\) \u5c31\u4e0d\u80fd\u5728\u8fd9\u4e2a\u610f\u4e49\u4e0b\u6bd4\u5927\u5c0f\uff0c\u4e5f\u5c31\u65e0\u6cd5\u4f7f\u7528\u4e00\u822c\u7684\u4e3b\u65b9\u6cd5</p> <p>\u5173\u4e8ecase 3\u7684\u6b63\u5219\u5316\u6761\u4ef6\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4fdd\u8bc1\u6839\u8282\u70b9\u6700\u5927</p> </li> <li> <p>\u8bc1\u660e\uff08\u7ed3\u5408\u9012\u5f52\u6811\uff09</p> <p></p> <ul> <li>\u6839\u636e\u4e09\u79cd\u60c5\u51b5\u7684\u6761\u4ef6\uff0c\u5bf9\u51e0\u4f55\u7ea7\u6570\u8fdb\u884c\u6c42\u548c\uff0c\u6bd4\u8f83\u5bb9\u6613\u5f97\u5230\u7ed3\u8bba </li> </ul> </li> <li> <p>\u524d\u9762\u63d0\u5230\u7684\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5b9e\u9645\u4e0a\u4e0b\u4e24\u79cd\u7b26\u5408\u539f\u672c\u4e3b\u5b9a\u7406\u7684\u6761\u4ef6\uff0c\u53ea\u8981\u8003\u8651\u4e2d\u95f4\u90a3\u79cd\u5e42\u6307\u6570\u4e00\u6837(\\(N^{\\log_b^a} = N^k\\))\u4f46\u540e\u9762\u6302\u4e86\u4e2alog\u5c3e\u5df4\u7684\u60c5\u51b5</p> <p>\u7528\u9012\u5f52\u6811\u6c42\u548c\u540e\u4f1a\u53d1\u73b0</p> \\[ T(N) = N^{\\log_b^a} \\Sigma_{i=0}^{\\log_b^a} \\lg^p \\frac{N}{b^i} = N^{\\log_b^a} \\Sigma_{i=0}^{\\log_b^a} (\\lg{N} - \\lg{b^i})^p \\] \\[\\approx N^{\\log_b^a} \\Sigma_{i=0}^{\\log_b^a} \\lg^p{N}=N^{\\log_b^a} \\log_b^a \\lg^p{N} \\] \\[= \\Theta(N^{\\log_b^a} \\lg^{p+1}{N})\\] <p></p> </li> </ul> \u274c <ul> <li> <p></p> <p>closest points pair problem\uff0c\u9700\u8981\u5c06\u5750\u6807\u6309\u7167 x \u8f74\u6392\u5e8f</p> <p>\u8de8\u8d8a\u4e2d\u7ebf\u7684\u5982\u4e0b\u5904\u7406\uff0c\u5176\u4e2d\u5728\u9012\u5f52\u8fc7\u7a0b\u4e2d\u5b8c\u6210\u5bf9y\u8f74\u7684\u6392\u5e8f</p> <p></p> </li> </ul>"},{"location":"ADS/#fft-fntt","title":"FFT &amp; FNTT","text":"<p>Fast Fourier Transform &amp; Fast Number Theoretic Transform</p> <p>Here we only discuss the application of FFT in polynomial multiplication</p> <p>For coefficient representated polynomials \\(A(x) = \\sum_{i=0}^{n-1} a_i x^i, B(x) = \\sum_{i=1}^{n-1} b_i x^i\\), the polynomial multication can seen as the convolutions which needs \\(O(n^2)\\) </p> <p>We can also represent a n-degree polynomial as a vector of n points \\(\\{(x_1, A(x_1)), (x_2, A(x_2)), ... (x_{n-1},A(x_{n-1}))\\}\\)</p> <p>proof: Lagrange Interpolation using Vandermonde Matrix</p> \\[ \\begin{bmatrix} 1 &amp; x_0 &amp; x_0^2 &amp; \\cdots &amp; x_0^{n-1} \\\\  1 &amp; x_1 &amp; x_1^2 &amp; \\cdots &amp; x_1^{n-1} \\\\  \\vdots &amp; \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots \\\\  1 &amp; x_{n-1} &amp; x_{n-1}^2 &amp; \\cdots &amp; x_{n-1}^{n-1} \\end{bmatrix}  \\begin{bmatrix} a_0 \\\\ a_1 \\\\ \\vdots \\\\ a_{n-1} \\end{bmatrix} =  \\begin{bmatrix} A(x_0) \\\\ A(x_1) \\\\ \\vdots \\\\ A(x_{n-1}) \\end{bmatrix} \\] <p>If all \\(x_i\\) are unique, then the determinant of the vandermonde matrix is \\(\\prod_{0 \\leq i &lt; j &lt; n} (x_j - x_i) \\neq 0\\), which means there exists a unique solution for the coefficient vector, or say, the polynomial can be uniquely represented by the n points</p> <p>Then the polynomial multiplication can be seen as the vector dot product, which can be done in \\(O(n)\\)</p> <p>If we use point-value representaion \\(\\{(x_i,A(x_i))\\}, \\{x_i, B(x_i)\\}\\), then the polynomial multiplication can be seen as a vector dot product, which can be done in \\(O(n)\\)</p> <p>So the key point is the fast transformation between the coefficient representation and point-value representation, Which can be done in \\(O(nlogn)\\) using FFT</p> <p></p> <ul> <li> <p>coeffcient to point-value</p> <ul> <li> <p>If we randomly choose n points, then the transformation should be done in \\(O(n) * O(n) = O(n^2)\\),  which is not so good</p> </li> <li> <p>Here we choose a novel method, selecting the complex n powers of n-th root of unity \\(w_n = e^{2\\pi i / n}\\), that is, \\(w_n^0, w_n, w_n^2, ... w_n^{n-1}\\)</p> <ul> <li> <p>Special property:</p> <ul> <li> <p>Definition: \\(w_n^n = 1\\)</p> </li> <li> <p>Halving Lemma: \\(w_{2n}^{2k} = w_n^k\\) </p> <p>Proved easily by Euler's Formula, \\(w_{2n}^{2k} = e^{2\\pi i \\frac{2k}{2n}} = e^{2\\pi i \\frac{k}{n}} = w_n^k\\) </p> </li> <li> <p>Inverse Lemma: \\(w_n^{k + \\frac{n}{2}} = -w_n^{k}\\)</p> <p>Proved easily by Euler's Formula, \\(w_n^{k + \\frac{n}{2}} = e^{2\\pi i \\frac{k + \\frac{n}{2}}{n}} = e^{2\\pi i \\frac{k}{n} + \\pi i} = -e^{2\\pi i \\frac{k}{n}} = -w_n^k\\)</p> </li> <li> <p>Summation Lemma: \\(\\sum_{i=0}^{n-1} w_n^{ik} = \\begin{cases} n &amp; \\text{if } n | k \\\\ 0 &amp; \\text{otherwise} \\end{cases}\\)</p> <p>Proved easily by the geometric progression, \\(S = 1 + w_n^k + w_n^{2k} + ... + w_n^{(n-1)k} = \\frac{1 - w_n^{nk}}{1 - w_n^k} = 0\\)</p> </li> <li> <p>Halving &amp; Inverse Lemmas are quite useful in the FFT algorithm, which can be seen as a divide-and-conquer algorithm</p> </li> </ul> </li> </ul> </li> <li> <p>Considre a polynomial \\(A(x) = a_0 + a_1 x + a_2 x^2 + ... + a_{n-1} x^{n-1}\\),where \\(n = 2^k\\) (Easier to cope with, so we can append 0s as coefficients to make it a power of 2)</p> <p>Then we divide the polynomial into two parts:</p> \\[ A_1(x) = a_0 + a_2 x + a_4 x^2 + ... + a_{n-2} x^{n/2 - 1} \\] \\[ A_2(x) = a_1 + a_3 x + a_5 x^2 + ... + a_{n-1} x^{n/2 - 1} \\] <p>Then we can see that </p> \\[A(x) = A_1(x^2) + xA_2(x^2)\\] <p>Substitute \\(w_n^k\\) and using Halving Lemma</p> \\[A(w_n^k) = A_1(w_{n}^{2k}) + w_n^k A_2(w_{n}^{2k}) = A_1(w_{\\frac{n}{2}}^k) + w_n^k A_2(w_{\\frac{n}{2}}^k)\\] <p>Substituting the rest \\(w_{n}^{k+\\frac{n}{2}}\\) and using Inverse Lemma</p> \\[A(w_n^{k+\\frac{n}{2}}) = A_1(w_{\\frac{n}{2}}^k) - w_n^k A_2(w_{\\frac{n}{2}}^k)\\] <p>Now to get \\(A(w_n^{k})\\) for \\(k=0,1,...n-1\\)\uff0cwe only need to calculate \\(A_1(w_{\\frac{n}{2}}^k)\\) and \\(A_2(w_{\\frac{n}{2}}^k)\\) for \\(k=0,1,...\\frac{n}{2}-1\\), which is just half of the original problem!</p> FFT<pre><code>    FFT(A[0,1,...n-1]){\n        if(n == 1) return A;\n        A1 = FFT(A[0,2,...n-2])\n        A2 = FFT(A[1,3,...n-1])\n\n        w = exp(2 * pi * i / n)\n        for(int k = 0; k &lt; n/2; k++){\n            A[k] = A1[k] + w^k * A2[k];\n            A[k + n/2] = A1[k] - w^k * A2[k];\n        }\n        return A;\n    }\n</code></pre> </li> <li> <p>More efficient way</p> <p>Use Butterfly Operation instead of Recursion</p> <p>Maybe because of this photo so-called butterfly?</p> <p></p> <p>Check the clearer picture below, we can find the final position is just the inverse of its original position's binary represention!</p> <p>So based on this discovery, we can easily transform the recursive version into an iterative version, which is more efficient.</p> <p> </p> </li> </ul> </li> <li> <p>point-value to coefficient</p> <p>Use the Lagrange Interpolation as mentioned above</p> <ul> <li> <p>The Vandermond Matrix \\(V_n A = Y\\)</p> \\[ \\begin{bmatrix} 1 &amp; 1^1 &amp; 1^2 &amp; \\cdots &amp; 1^{n-1} \\\\  1 &amp; w_n^1 &amp; w_n^2 &amp; \\cdots &amp; w_n^{n-1} \\\\  \\vdots &amp; \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots \\\\  1 &amp; w_n^{n-1} &amp; w_n^{2(n-1)} &amp; \\cdots &amp; w_n^{(n-1)(n-1)} \\end{bmatrix}  \\begin{bmatrix} a_0 \\\\ a_1 \\\\ \\vdots \\\\ a_{n-1} \\end{bmatrix} =  \\begin{bmatrix} y_0 \\\\ y_1 \\\\ \\vdots \\\\ y_{n-1} \\end{bmatrix} \\] <p>Recall the knowledge in Linear Algebra, the next step is to calculate the \\(V_n^{-1}\\), then \\(A = V_n^{-1}Y\\)</p> <p>Consider the definition of inverse matrix</p> \\[V_n^{-1} V_n = I_n\\] \\[I_{ij} = \\sum_{k=0}^{n-1} V^{-1}_{ik} V_{kj} = \\sum_{k=0}^{n-1} V^{-1}_{ik} w_n^{kj}\\] <p>Thinking of the Summation Lemma, we can easily find the \\(V_{ij}^{-1} = w_n^{-ij}\\), which is the similar form of the \\(V_n\\), like a vector-direction inverse on the complex plane</p> <p>So given the point-value representation, we can solve the corresponding coefficient representation by just changing the \\(w_n^k\\) to \\(w_n^{-k}\\) </p> </li> </ul> </li> </ul> <p>In conclusion, the FFT algorithm is a very efficient algorithm for polynomial multiplication, which can be done in \\(O(n \\log n)\\)</p> <p>However, since the use of double type in the complex number calculation, the precision of the result may be affected. We can then put the problem into the modulo field, which is the Fast Number Theoretic Transform (FNTT).</p> <p>Wonderfully, the FNTT is almost the same as the FFT, except that we change the complex n-th root of unity to the primitive root of the modulo field, which has the same properties as the n-th root of unity as mentioned above.</p> <ul> <li> <p>primitive root g:</p> \\[g_n^n \\equiv 1 \\pmod{P}\\] \\[g_n^{\\frac{n}{2}} \\equiv -1 \\pmod{P}\\] \\[g_l = g^{\\frac{P-1}{l}} \\pmod{P}\\] </li> <li> <p>Example: </p> <p>RB-Tree count: Count the number of different RB-Trees with N nodes.</p> <p>Using Generating Function \\(T_h(x)\\) for the RB-Trees with black height h </p> \\[T_h(x) = \\sum_{i=0}^{n} a_i x^i\\] <p>where \\(a_i\\) denotes the number of RB-Trees with black height h and i nodes</p> <p>Consider the  subtree of a RB-Tree</p> \\[\\begin{cases} T_{h-1}(x)\\  (black \\ subtree) \\\\ xT_{h-1}^2(x) \\ (red \\ subtree, must \\ have \\ two \\ black \\  sub-subtrees) \\\\  \\end{cases}\\] <p>Since a black root have two subtrees where order matters, we can easily get the recursive formula</p> \\[T_h(x) = x N_{h-1}^2= x(T_{h-1}(x) + xT_{h-1}^2(x))^2\\] <p>The answer is the sum of all \\(a_n\\)</p> <p>If the module prime is not good like 998244353 with primitive root, we need complicated MTT, which I haven't learned yet</p> </li> </ul> Code RB-Tree Count<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n#define LL long long\nint N;\n// Coefficient representation of polynomial\nclass Poly{ \nprivate: \n    // Primitive root of P 998244353(7 * 17 * 2^23 + 1) is 3\n    // _G = 3 ^ (-1) (Mod P)\n    static const int G = 3, _G = 332748118;\n\n    // Coefficients a[i] * x^i\n    vector&lt;int&gt;a;\n\n    // quick pow x^y in O(log(y))\n    static int Pow(int x, int y){\n        int s = 1, w = x;\n        while(y){\n            if(y &amp; 1) s = (LL) s * w % P;\n            w = (LL) w * w % P, y &gt;&gt;= 1;\n        }\n        return s;\n    }\npublic:\n    // Module \n    static const int P = 998244353;\n    Poly(int L) : a(vector&lt;int&gt;(L, 0)) {}\n    Poly(vector&lt;int&gt; &amp;_a) : a(_a) {}\n\n    // the length of the polynomial\n    inline int Length()const{return a.size();}\n\n    // robust access to the coeffcient a[i]\n    inline int Para(int i)const{return i &lt; Length() ? a[i] : 0;}\n\n    // add a constant (in this problem is just for +1)\n    Poly operator +(const int B){\n        Poly C = *this;\n        C.a[0] += B;\n        return C;\n    }\n\n    // addition of two polynomial: just add the corresponding coefficient, O(length)\n    Poly operator +(const Poly &amp;B){\n        Poly C(max(this-&gt;Length(), B.Length()));\n        for(int i = 0; i &lt; C.Length(); i++) C.a[i] = (this-&gt;Para(i) + B.Para(i)) % P;\n        return C;\n    }\n\n    // plus x^i, just like shift\n    Poly operator &lt;&lt; (int i){\n        Poly C = *this;\n        C.a.resize(Length() + i);   // make more capacity\n        for(int k = C.Length() - 1; k &gt;= i; k--) C.a[k] = C.a[k - i];   //move the data\n        for(int k = i - 1; k &gt;= 0; k--) C.a[k] = 0; // set the first ones to 0\n        return C;\n    }\n\n    // FNTT: fast number-theoretic transform\n    // f = 1: transform the coefficient representation to point-value representaion \n    // f = -1: inv-transform as f = 1, to transform back to coefficient representation using interpolating polynomial\n    // both done in O(nlogn)\n    void NTT(vector&lt;int&gt; &amp;A, int f, vector&lt;int&gt; &amp;pos){\n        // butterfly operation, transform the recursive into loops\n        int n = A.size();\n        for(int i = 0; i &lt; n; i++) if(i &lt; pos[i]) swap(A[i], A[pos[i]]);\n\n        // bottom-up calculation \n        for(int L = 1; L &lt; n; L &lt;&lt;= 1){\n            // the primitive root chosen W_n / (W_n ^ -1)\n            int Wl = Pow((~f) ? G : _G, (P - 1) / (L &lt;&lt; 1));\n            for(int j = 0; j &lt; n; j += (L &lt;&lt; 1)){\n                int Wk = 1;// twiddle factor\n                for(int k = 0; k &lt; L; k++, Wk = (LL) Wk * Wl % P){\n                    // recursively done, A[j+k] &amp; A[j+k+L] are calculated at the same time\n                    int x = A[j + k], y = (LL) Wk * A[j + k + L] % P;\n                    A[j + k] = (x + y) % P, A[j + k + L] = (x - y + P) % P;\n                }\n            } \n        }\n    }\n\n    // NTT\n    Poly operator *(const Poly &amp;_B){\n        // append 0s to ensure the length to be the power of 2\n        // it makes recursion more easily without influence the answer\n        int L = 1;\n        while((1&lt;&lt;L) &lt; this-&gt;Length() + _B.Length()) L++;  \n        vector&lt;int&gt; A = a, B = _B.a, C(1&lt;&lt;L), pos(1&lt;&lt;L);\n        // make transformation for the butterfly operation\n        for(int i = 0;i &lt; (1&lt;&lt;L); i++) pos[i] = (pos[i&gt;&gt;1] &gt;&gt; 1) | ((i &amp; 1) &lt;&lt; (L - 1));\n        L = 1 &lt;&lt; L;\n        A.resize(L), B.resize(L);\n\n        NTT(A, 1, pos), NTT(B, 1, pos);   // change to point-value representation\n        // multiplication can be done in O(n) now in point-value representation\n        for(int i = 0; i &lt; L; i++) C[i] = (LL)A[i] * B[i] % P;  \n        NTT(C, -1, pos);    // to transform back\n        int Inv = Pow(L, P - 2);   // 1/n in module space\n        // trick: remove the coefficient that over n, which can't contribute to the answer\n        C.resize(min(N + 1, this-&gt;Length() + _B.Length())); \n        for(int i = 0; i &lt; C.size();i++) C[i] = (LL) C[i] * Inv % P;\n        return Poly(C); \n    }\n\n    // for debug\n    void Print(){\n        for(auto i:a) cout &lt;&lt; i &lt;&lt; \" \";\n        cout &lt;&lt; endl;\n    }\n};\n\nint main(){\n    cin &gt;&gt; N;\n    // T[i] denotes the generating function of RB-Tree that with bh(root) = i+1\n    // ai is the number of RB-trees with i nodes\n    // T[i] = Sum(ai * x^i)\n    vector&lt;Poly&gt; T;\n    // T[0] --&gt; bh(root) = 1\n    // a0 = 0 (impossible)\n    // a1 = 1 (only root)\n    // a2 = 2 (root with single red child)\n    // a3 = 1 (root with two red children)\n    vector&lt;int&gt; T0{0, 1, 2, 1};\n    T.push_back(Poly(T0));\n    int Ans = T[0].Para(N);\n\n    // by the amortized analysis proof in class, we know N &gt;= 2^bh(root) - 1\n    // thus bh(root) &lt;= log(N+1)\n    for(int i=1, h = log2(N + 1);i &lt; h;i++){\n        // T[i] = x * T[i-1]^2 * (1 + x * T[i-1])^2\n        Poly Ti =((T[i-1] * T[i-1] &lt;&lt; 1) + T[i-1]);\n        Ti = Ti * Ti &lt;&lt; 1;\n        // add answer for N nodes\n        Ans = (Ans + Ti.Para(N)) % Poly::P;\n        T.push_back(Ti);\n    }\n    cout &lt;&lt; Ans &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"ADS/#greedy","title":"*Greedy","text":"<p>\u5c31\u8bb2\u4e86\u6700\u7ecf\u5178\u7684\u4efb\u52a1\u8c03\u5ea6\u95ee\u9898\u548cHuffman\u7f16\u7801\u95ee\u9898\uff0c\u7565\u8fc7\u4e86\u3002</p> <p>Huffman Tree\u7684\u4e00\u4e2a\u5c0f\u6027\u8d28</p> <p>\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u90fd\u6709\u4e24\u4e2a\u5b50\u8282\u70b9\uff0c\u6240\u6709\u7684\u5b57\u7b26\u96c6\u90fd\u5728\u53f6\u5b50\u8282\u70b9\u4e0a</p> <p>\u56e0\u6b64\u6709 \\(n_{\\text{leaf}} + n_{\\text{internal}} = 2 n_{\\text{internal}} + 1\\)\uff0c\u5373 \\(n_{\\text{leaf}} = n_{\\text{internal}} + 1\\)</p> \u274c <ul> <li> <p></p> <p>\u4e00\u4e2a\u6784\u9020\u4f8b\u5b50\u5982\u4e0b\uff0c\u5b9e\u9645\u4e0a\u4e0b\u9762\u7684\u8fd1\u4f3c\u7b97\u6cd5\u91cc\u9762\u5df2\u7ecf\u8bb2\u4e86 Set Cover\u7684\u754c\u662f\\(O(\\log n)\\)\uff0c\u4e3a2\u7684\u662f\u53e6\u4e00\u4e2a\u9009\u8fb9\u7b97\u6cd5</p> <p></p> </li> </ul> <ul> <li> <p></p> <p>\u5927\u610f\u4e86\uff0c\u5e94\u8be5\u60f3\u5230\u7b97\u6cd51\u4f1a\u5bfc\u81f4\u4e4b\u540e\u65b0\u5f00\u7684\u623f\u95f4\u7684\u4efb\u52a1\u6392\u5f97\u4e0d\u591f\u7d27\u5bc6\uff0c\u5bfc\u81f4\u51fa\u95ee\u9898\u7684</p> </li> </ul> <ul> <li> <p></p> <p>\u9898\u76ee\u610f\u601d\u5e94\u8be5\u662f\u8003\u5bdf \u8d2a\u5fc3\u53ef\u80fd\u53ea\u662f\u6700\u4f18\u89e3\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u6700\u4f18\u89e3\u4e0d\u4e00\u5b9a\u6bcf\u4e00\u6b65\u90fd\u4f1a\u91c7\u7528\u8d2a\u5fc3\u7b56\u7565</p> </li> </ul> <ul> <li> <p> </p> <p>\uff1f\u521d\u59cb\u72b6\u6001\u5e94\u8be5\u662fw1 \uff1f\uff1f\uff1f</p> </li> </ul>"},{"location":"ADS/#np-completeness","title":"NP-Completeness","text":"<ul> <li> <p>Relation</p> <ul> <li> <p>P=NP</p> <p></p> </li> <li> <p>P != NP</p> <p></p> </li> <li> <p>Language Problem</p> <p></p> </li> </ul> </li> <li> <p>P: Polynomial Time</p> <ul> <li>The class of problems that can be solved in polynomial time</li> </ul> </li> <li> <p>NP: Nondeterministic Polynomial Time</p> <ul> <li>The class of problems for which a solution can be verified in polynomial time</li> </ul> </li> <li> <p>NP-Hard</p> <ul> <li> <p>A problem is NP-Hard if every problem in NP can be reduced to it in polynomial time (\\(L^{'} \\leq_p L\\), not harder than)</p> </li> <li> <p>May not in NP</p> </li> </ul> </li> <li> <p>NP-Complete</p> <ul> <li>A problem is NP-Complete if it is in NP and is NP-Hard</li> </ul> <p>Note</p> <p>Turing Halting Problem is not NPC, but it is NP-Hard </p> </li> <li> <p>Some items:</p> <ul> <li> <p>deterministic turing machine: a machine that can only have one possible state at any time</p> </li> <li> <p>non-deterministic turing machine: a machine that can have multiple possible states at any time, and can choose best one</p> </li> </ul> </li> <li> <p>Some NPC problems</p> <p></p> <ul> <li> <p>SAT: Given a boolean formula, is there an assignment of truth values to the variables that makes the formula true?</p> </li> <li> <p>3-SAT: Given a boolean formula in conjunctive normal form, where each clause has exactly 3 literals, is there an assignment of truth values to the variables that makes the formula true?</p> </li> <li> <p>Vertex Cover: Given a graph G and an integer k, is there a set of k vertices such that each edge in G is incident to at least one vertex in the set?</p> </li> <li> <p>Hamiltonian Cycle: Given a graph G, is there a simple cycle that visits every vertex exactly once?</p> </li> <li> <p>Subset Sum: Given a set of integers and an integer k, is there a subset of the integers that sums to k?</p> </li> <li> <p>Traveling Salesman Problem: Given a set of cities and distances between them, is there a tour that visits each city exactly once and has total length at most k?</p> </li> <li> <p>Knapsack Problem: Given a set of items, each with a weight and a value, and a knapsack with a weight limit, is there a subset of the items that fits in the knapsack and has total value at least k?</p> </li> <li> <p>Partition: Given a set of integers, is there a partition of the integers into two sets such that the sum of the integers in each set is equal?</p> </li> </ul> </li> <li> <p>Language</p> <p></p> <p></p> </li> </ul> \u274c <ul> <li>SAT &amp; 3-SAT are NPC, but 2-SAT is P</li> </ul> <ul> <li> <p></p> <p>\u6ce8\u610f\u5927O\u8bb0\u53f7\u7684\u542b\u4e49\uff01\uff01\uff01\u4e0d\u4e00\u5b9a\u8981\u8fbe\u5230\\(O(N^3)\\)!!!</p> <p>Clique\u4e5f\u662fNPC</p> </li> </ul> <ul> <li> <p></p> <p>NP\u5305\u62ecP,\u53ef\u80fdX\u662fP\uff1f\u90a3\u6837\u5e94\u8be5\u4e00\u4e2a\u90fd\u4e0d\u5bf9 </p> </li> </ul> <ul> <li> <p></p> <p>\u50bb\u903c\u4e86\uff0c\u663e\u7136DAG\u7684\u6700\u957f\u8def\u968f\u4fbf\u505a</p> <p>BC\u90fd\u662fNPC\uff0c\u90fd\u662f\u4e0d\u53ef\u80fd\u6709\u8fd9\u4e48\u7cbe\u786e\u7684\u7b97\u6cd5\u7684\uff0c\u6709\u7684\u8bdd\u5c31P=NP\u4e86</p> </li> </ul> <ul> <li> <p> </p> <p>D\u4e0d\u4e00\u5b9a\uff0c\u4f46\u662fP\u6839\u636e\u4e0a\u9762\u7684\u56fe\u662f\u53ef\u4ee5\u786e\u5b9a\u7684</p> </li> </ul>"},{"location":"ADS/#approximation","title":"Approximation","text":"<p>\\(\\rho(n)\\)-approximation algorithm: \\(\\max\\{\\frac{C}{C^*},\\frac{C^*}{C}\\}\\leq \\rho(n)\\)</p> <ul> <li> <p>approximation scheme: \\(\\forall \\epsilon &gt; 0, \\exists \\rho(n) \\leq 1 + \\epsilon\\)</p> </li> <li> <p>PTAS: Polynomial Time Approximation Scheme</p> <p>\u590d\u6742\u5ea6\u4e3a\u89c4\u6a21n\u7684\u4e00\u4e2a\u591a\u9879\u5f0f</p> </li> <li> <p>FPTAS: Fully Polynomial Time Approximation Scheme</p> <p>\u590d\u6742\u5ea6\u540c\u65f6\u4e3a\u89c4\u6a21n\u4ee5\u53ca \\(\\frac{1}{\\epsilon}\\) \u7684\u4e00\u4e2a\u591a\u9879\u5f0f</p> </li> <li> <p>Some problems:</p> <ul> <li> <p>Vertex Cover: \\(\\rho(n) = 2\\)</p> <ul> <li>\u6bcf\u6b21\u6311\u9009\u4e00\u6761\u8fb9\uff0c\u5c06\u5176\u4e24\u7aef\u7684\u70b9\u52a0\u5165\u96c6\u5408\uff0c\u5e76\u5220\u9664\u5bf9\u5e94\u90bb\u8fb9\uff0c\u76f4\u5230\u6240\u6709\u8fb9\u90fd\u88ab\u8986\u76d6 </li> </ul> </li> <li> <p>Set Cover: \\(\\rho(n) = O(\\log n)\\)</p> <ul> <li>\u6bcf\u6b21\u9009\u62e9\u8986\u76d6\u6700\u591a\u672a\u8986\u76d6\u5143\u7d20\u7684\u96c6\u5408\uff0c\u76f4\u5230\u6240\u6709\u5143\u7d20\u90fd\u88ab\u8986\u76d6</li> </ul> </li> <li> <p>\u4e09\u89d2\u4e0d\u7b49\u5f0f\u7ea6\u675f\u7684TSP: \\(\\rho(n) = 2\\)</p> <ul> <li>\u751f\u6210\u6811\u7684\u6700\u5c0f\u8fb9\u6743\u548c\u5373\u4e3aTSP\u7684\u4e0b\u754c\uff0c\u7136\u540e\u904d\u5386\u751f\u6210\u6811\u4f7f\u5f97\u6bcf\u6761\u8fb9\u6070\u597d\u88ab\u8bbf\u95ee\u4e24\u6b21\uff0c\u6839\u636e\u4e09\u89d2\u4e0d\u7b49\u5f0f\uff0c\u53ef\u4ee5\u8bc1\u660e\u8fd9\u4e2a\u89e3\u4e3a\u4e0a\u754c</li> </ul> </li> <li> <p>Bin packing</p> <ul> <li> <p>Next Fit: \\(\\rho(n) = 2\\)</p> <ul> <li>\u6bcf\u6b21\u53ea\u8003\u8651\u4e0a\u4e00\u6876\u80fd\u5426\u88c5\u4e0b\uff0c\u5219\u76f8\u90bb\u6876\u76f8\u52a0\u5fc5\u5927\u4e8e1,\u4ece\u800c\u5f97\u51fa\u4e0a\u754c </li> </ul> </li> <li> <p>First Fit: \\(\\rho(n) = 1.7\\) </p> <ul> <li>\u6bcf\u6b21\u627e\u5230\u7b2c\u4e00\u4e2a\u80fd\u88c5\u4e0b\u7684\u6876</li> </ul> </li> <li> <p>Best Fit\uff1a\\(\\rho(n) = 1.7\\)</p> <ul> <li>\u6bcf\u6b21\u627e\u5230\u6700\u5408\u9002\u7684\u6876\uff08\u5269\u4f59\u7a7a\u95f4\u6700\u5c0f\u7684\uff09</li> </ul> </li> <li> <p>Online\uff1a\\(\\rho(n) \\geq \\frac{5}{3}\\) </p> </li> <li> <p>Offline: \\(\\rho(n) \\leq \\frac{11}{9}M+\\frac{6}{9}\\)</p> </li> </ul> </li> <li> <p>Knapsack</p> <ul> <li> <p>greedy</p> <p>\\(P_{greedy} = \\max \\{P_{max},P_{density}\\}\\)</p> <p> </p> </li> <li> <p>round</p> <p></p> </li> </ul> </li> <li> <p>K-centers</p> <ul> <li> <p>binary search &amp; check: \\(\\rho(n) = 2\\)</p> <ul> <li> <p>\u4e8c\u5206\u641c\u7d22\u534a\u5f84\uff0c\u7136\u540e\u68c0\u67e5\u76f4\u5f84\u4e3a2r\u662f\u5426\u80fd\u591f\u8986\u76d6\u6240\u6709\u70b9 </p> <p></p> </li> </ul> </li> <li> <p>smarter way: \\(\\rho(n) = 2\\)</p> <p> </p> </li> <li> <p>lower bound: \\(\\rho(n) = 2\\)</p> <p></p> </li> </ul> </li> </ul> </li> </ul> \u274c <ul> <li> <p></p> <p>\u6709\u53cd\u4f8b</p> </li> </ul> <ul> <li> <p></p> <p>C</p> </li> </ul>"},{"location":"ADS/#local-search","title":"Local Search","text":"<ul> <li> <p>Gradient Descent</p> <ul> <li> <p>\u4ece\u4e00\u4e2a\u521d\u59cb\u89e3\u5f00\u59cb\uff0c\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u90bb\u57df\u5185\u7684\u66f4\u4f18\u89e3\uff0c\u76f4\u5230\u627e\u4e0d\u5230\u66f4\u4f18\u89e3\u4e3a\u6b62</p> </li> <li> <p>\u4f46\u662f\u53ef\u80fd\u4f1a\u9677\u5165\u5c40\u90e8\u6700\u4f18\u89e3</p> </li> </ul> </li> <li> <p>Metropolis Algorithm</p> <ul> <li> <p>\u4e00\u79cd\u8499\u7279\u5361\u6d1b\u91c7\u6837\u7b97\u6cd5\uff0c\u4ee5\u4e00\u5b9a\u6982\u7387\uff08\\(e^{-\\frac{\\Delta{cost}}{kT}}\\)\uff09\u63a5\u53d7\u66f4\u5dee\u7684\u89e3\uff0c\u4ece\u800c\u907f\u514d\u9677\u5165\u5c40\u90e8\u6700\u4f18\u89e3</p> <p></p> </li> </ul> </li> <li> <p>Simulated Annealing</p> <ul> <li>\u6a21\u62df\u9000\u706b\u7b97\u6cd5\uff0c\u662fMetropolis Algorithm\u7684\u4e00\u4e2a\u53d8\u79cd\uff0c\u901a\u8fc7\u9010\u6e10\u964d\u4f4e\u63a5\u53d7\u66f4\u5dee\u89e3\u7684\u6982\u7387\uff0c\u4ece\u800c\u9010\u6e10\u6536\u655b\u5230\u5168\u5c40\u6700\u4f18\u89e3</li> </ul> </li> <li> <p>Example</p> <ul> <li> <p>Vertex Cover</p> <ul> <li> <p>\u4ece\u5168\u96c6\u5f00\u59cb\uff0c\u6bcf\u6b21\u968f\u673a\u5220\u9664\u4e00\u4e2a\u70b9\uff0c\u68c0\u67e5\u662f\u5426\u4ecd\u7136\u662f\u8986\u76d6</p> </li> <li> <p>\u53ef\u80fd\u4f1a\u9677\u5165\u5c40\u90e8\u6700\u4f18\u89e3\uff0c\u53ef\u4ee5\u901a\u8fc7Metropolis Algorithm\u6216\u8005Simulated Annealing\u6765\u907f\u514d</p> </li> </ul> </li> <li> <p>Hopfield Network</p> <ul> <li> <p>Definations</p> <p></p> </li> <li> <p>\u7b97\u6cd5\u6d41\u7a0b\uff1a\u6bcf\u6b21\u968f\u673a\u7ffb\u8f6c\u4e00\u4e2a\u4e0d\u7a33\u5b9a\u7684\u70b9\uff0c\u76f4\u5230\u6240\u6709\u70b9\u90fd\u7a33\u5b9a\u4e3a\u6b62</p> <p></p> </li> <li> <p>\u52bf\u80fd\u5206\u6790\uff1a\\(\\Phi(S) = \\sum_{e \\in good} |W_e|\\)</p> <p>\u90a3\u4e48\u6bcf\u6b21\u7ffb\u8f6c\u4e00\u4e2a\u70b9\uff0c\u52bf\u80fd\u81f3\u5c11\u589e\u59271\uff0c\u56e0\u6b64\u6700\u591a\u9700\u8981\\(\\sum_{e} |W_e|\\)</p> <p>\\(\\rho(n) = 2\\)</p> </li> </ul> </li> <li> <p>Max-Cut</p> <ul> <li> <p>\u7c7b\u4f3c Hopfield Network\uff0c\u6bcf\u6b21\u968f\u673a\u7ffb\u8f6c\u4e00\u4e2a\u70b9(\u66f4\u6539\u9635\u8425)\uff0c\u76f4\u5230\u6240\u6709\u70b9\u90fd\u7a33\u5b9a\u4e3a\u6b62\uff0c\u8fd9\u6837\u53ef\u4ee5\u8fbe\u52302-approximation\uff0c\u4f46\u53ef\u80fd\u4e0d\u4e00\u5b9a\u80fd\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u7ec8\u6b62</p> </li> <li> <p>\u8fd1\u4f3c\u7b97\u6cd5</p> <p></p> <p>\u7b80\u8981\u8bc1\u660e</p> <p>\u8003\u8651\\((1+\\frac{1}{x})^x \\geq 2\\)\uff0c\u4ee3\u5165\\(x=\\frac{|V|}{2\\epsilon}\\)\uff0c\u5219\u6bcf\\(x\\)\u6b21\u7ffb\u8f6c\u52bf\u80fd\u81f3\u5c11\u589e\u5927\u4e3a\u539f\u6765\u76842\u500d</p> </li> </ul> </li> </ul> \u274c <ul> <li> </li> </ul> </li> </ul>"},{"location":"ADS/#randomized-algorithm","title":"Randomized Algorithm","text":"<ul> <li> <p>Hiring Problem</p> <p>(\u5728\u6570\u6a21\u8bfe\u4e0a\u5df2\u7ecf\u7814\u7a76\u8fc7\u5404\u79cd\u62bd\u8c61\u7248\u672c\u4e86)</p> <ul> <li> <p>Naive (Randomized Permutaion)</p> <p>\u6bcf\u6b21\u96c7\u4f63\u6bd4\u524d\u9762\u6240\u6709\u4eba\u90fd\u4f18\u79c0\u7684\u4eba</p> <ul> <li> <p>\u671f\u671b\u96c7\u4f63\u4eba\u6570\uff1a</p> <p>\u8003\u8651\u7b2ci\u4e2a\u4eba\u4e3a\u6700\u4f18\u79c0\u7684\u6982\u7387\u4e3a\\(\\frac{1}{i}\\)\uff0c\u5219\u671f\u671b\u96c7\u4f63\u4eba\u6570</p> \\[c_n = \\sum_{i=1}^{n} \\frac{1}{i} \\approx \\ln n\\] </li> </ul> <p>Randomizing</p> <ol> <li> <p>\u7ed9\u6bcf\u4e2a\u5143\u7d20\u968f\u673a\u8d4b\u4e88\u4e00\u4e2a\u4f18\u5148\u7ea7\uff08\u4e00\u822c\u4e3a\\([1, n^3]\\)\uff09\uff0c\u7136\u540e\u6309\u7167\u4f18\u5148\u7ea7\u6392\u5e8f</p> </li> <li> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u5143\u7d20\\(i\\)\uff0c\u968f\u673a\u4e0e\\([i+1, n]\\)\u7684\u67d0\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u4ea4\u6362</p> </li> </ol> </li> <li> <p>Online</p> <p>\u603b\u5171\u53ea\u96c7\u4f631\u4eba\uff0c\u6bcf\u6b21\u9700\u8981\u5f53\u573a\u505a\u51b3\u5b9a</p> <ul> <li> <p>\u671f\u671b\u96c7\u4f63\u5230\u6700\u4f18\u79c0\u7684\u4eba\uff1a</p> <p>\u8003\u8651\u5148\u8003\u5bdf\u524d\\(k\\)\u4e2a\u4eba\uff0c\u7136\u540e\u4f7f\u7528\u524d\u9762\u7684\u7b56\u7565\uff0c\u5373\u9009\u62e9\u7b2c\u4e00\u4e2a\u6bd4\u524d\u9762\u6240\u6709\u4eba\u90fd\u4f18\u79c0\u7684\u4eba</p> <p>\u5bf9\u4e8e\u7b2c\\(i\\)\u4e2a\u4eba\uff0c\u5176\u4e3a\u6700\u4f18\u79c0\u7684\u6982\u7387\u4e3a\\(\\frac{1}{n}\\)</p> <p>\u800c\u4ed6\u8981\u88ab\u9009\u5230\uff0c\u9700\u8981\u524d\u9762\u4f4d\u7f6e\u5728\\([k+1, i-1]\\)\u7684\u4eba\u90fd\u4e0d\u88ab\u9009\uff0c\u4e5f\u5373\u524d\u9762\\(i-1\\)\u4e2a\u4eba\u7684\u6700\u5927\u503c\u53ea\u80fd\u5728\\([1, k]\\)\u4e2d\uff0c\u6982\u7387\u4e3a\\(\\frac{k}{i-1}\\)</p> <p>\u663e\u7136\uff0c\u4e0a\u8ff0\u4e24\u4e2a\u6761\u4ef6\u662f\u72ec\u7acb\u7684\uff0c\u56e0\u6b64\u6210\u529f\u9009\u5230\\(i\\)\u4e14\u4ed6\u6070\u597d\u662f\u6700\u4f18\u79c0\u7684\u6982\u7387\u4e3a\\(\\frac{1}{n} \\cdot \\frac{k}{i-1}\\)</p> <p>\u4ece\u800c\u96c7\u4f63\u5230\u6700\u4f18\u79c0\u7684\u4eba\u7684\u6982\u7387\u4e3a</p> \\[\\sum_{i=k+1}^{n} \\frac{1}{n} \\cdot \\frac{k}{i-1} = \\frac{k}{n} \\sum_{i=k}^{n-1} \\frac{1}{i} \\approx \\frac{k}{n} \\ln \\frac{n}{k}\\] <p>\u5bf9\\(k\\)\u6c42\u5bfc\uff0c\u5f97\u5230</p> \\[\\frac{d}{dk} \\frac{k}{n} \\ln \\frac{n}{k} = \\frac{1}{n}\uff08\\ln{n} - \\ln{k} - 1\uff09 = 0 \\implies k = \\frac{n}{e}\\] <p>\u4ece\u800c\u53d6\\(k = \\frac{n}{e}\\)\u65f6\uff0c\u6982\u7387\u6700\u5927\uff0c\u4e3a\\(\\frac{1}{e}\\)</p> </li> </ul> </li> </ul> </li> <li> <p>Randomized Quick Sort</p> <ul> <li> <p>\u671f\u671b\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\\(O(n \\log n)\\)</p> </li> <li> <p>\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\\(O(n^2)\\) </p> </li> <li> <p>\u8bc1\u660e\uff1a</p> <p>\u5feb\u901f\u6392\u5e8f\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u672c\u8d28\u4e0a\u6765\u6e90\u4e8e\u5212\u5206\u65f6\u4e0epivot\u7684\u6bd4\u8f83\u6b21\u6570</p> <p>Warning</p> <p>\u4e3a\u4e86\u4fbf\u4e8e\u5206\u6790\uff0c\u6211\u4eec\u4e0b\u9762\u6240\u8bf4\u7684\u7b2c\\(i\\)\u4e2a\u5143\u7d20\uff0c\u6307\u7684\u662f\u5728\u6392\u5e8f\u540e\u7684\u5e8f\u5217\u4e2d\u7684\u7b2c\\(i\\)\u4e2a\u5143\u7d20\uff0c\u800c\u4e0d\u662f\u5728\u539f\u5e8f\u5217\u4e2d\u7684\u7b2c\\(i\\)\u4e2a\u5143\u7d20</p> <p>\u505a\u5230\u76f8\u5173\u9898\u76ee\u65f6\u9700\u8981\u5c0f\u5fc3\uff01\uff01\uff01</p> <p>\u8003\u8651\u7b2c\\(i\\)\u4e0e\u7b2c\\(j\\)\u4e2a\u5143\u7d20\u7684\u6bd4\u8f83\u6b21\u6570\uff0c\u663e\u7136\u6700\u591a\u6bd4\u8f831\u6b21\uff0c\u56e0\u4e3a\u6bd4\u8f83\u5f53\u4e14\u4ec5\u5f53\u5176\u4e2d\u4e00\u4e2a\u88ab\u9009\u4e3apivot\uff0c\u53e6\u4e00\u4e2a\u88ab\u5212\u5206\u540e\u4e0d\u4f1a\u518d\u88ab\u6bd4\u8f83</p> <p>\u4ece\u800c\u6bd4\u8f83\u6b21\u6570\u7684\u671f\u671b\\(E_{ij} = 1 \\cdot P_{ij} = P_{ij}\\)</p> <p>\u800c\u4e24\u8005\u8981\u6bd4\u8f83\uff0c\u9664\u4e86\u5176\u4e2d\u4e00\u4e2a\u88ab\u9009\u4e3apivot\u5916\uff0c\u8fd8\u9700\u8981\u4ed6\u4eec\u6ca1\u6709\u88ab\u5212\u5206\u4e3a\u5230\u4e24\u8fb9\uff0c\u5373\u4ed6\u4eec\u4e4b\u95f4\u6ca1\u6709\u5176\u4ed6\u5143\u7d20\u88ab\u9009\u4e3apivot</p> <p>\u56e0\u6b64\uff0c\u5bf9\u4e8e\\([i,j]\\)\u8fd9\u4e2a\u5b50\u533a\u95f4\uff0cpivot\u7684\u9009\u62e9\u662f\u7b49\u6982\u7684\uff0c\\(P_{ij} = \\frac{2}{j-i+1}\\)\uff08\u5373\u9009\u62e9\\(i\\)\u6216\\(j\\)\u4f5c\u4e3apivot\u7684\u6982\u7387\uff09</p> <p>\u4ece\u800c\uff0c\u5bf9\u4e8e\u6574\u4e2a\u5e8f\u5217\uff0c\u6bd4\u8f83\u6b21\u6570\u7684\u671f\u671b\u4e3a</p> \\[E(n) = \\sum_{i=1}^{n-1} \\sum_{j=i+1}^{n} P_{ij} = \\sum_{i=1}^{n-1} \\sum_{j=i+1}^{n} \\frac{2}{j-i+1} &lt; 2n \\sum_{k=1}^{n} \\frac{1}{k} = O(n \\log n)\\] </li> </ul> \u274c <ul> <li> <p></p> <p>\u9996\u5148\uff0c\u7531\u4e8e\u662f\u671f\u671b\u5206\u6790\uff0c\u53ef\u4ee5\u76f4\u63a5\u628a\u6743\u503c\u90fd\u770b\u62101</p> <p>B.</p> <p>A. \u6bcf\u4e00\u4e2a\u5b50\u53e5\u7684\u6982\u7387\u88ab\u6ee1\u8db3\u7684\u6982\u7387\u4e3a\\(1-\\frac{1}{2^n}\\)\uff0c\u8bed\u53e5\u8d8a\u957f\uff0c\u6982\u7387\u8d8a\u5927\u3002\u8003\u8651\u6700\u574f\u60c5\u51b5\uff0cn=1\uff0c\u6b64\u65f6\u6982\u7387\u6070\u597d\u4e3a\\(\\frac{1}{2}\\)\uff0c\u56e0\u6b64\u6ee1\u8db3\u63d0\u8bae</p> <p>B. \u540cA\uff0c\u8ba1\u7b97\u5f97\u5b50\u53e5\u88ab\u6ee1\u8db3\u5f97\u6982\u7387\u6700\u4f4e\u4e3a\\(\\frac{7}{8}\\)\uff0c\u56e0\u6b64\u76f8\u5e94\u671f\u671b\u5e94\u4e3a\\(\\frac{8}{7}\\)</p> <p>C. \u540c\u6837\u8003\u8651\u6700\u574f\u60c5\u51b5\uff0c\u5373\u5b50\u53e5\u5c3d\u91cf\u77ed\uff1a\u7531\u4e8e\u9898\u76ee\u8bbe\u5b9a\u7684\u6761\u4ef6\uff0c\u8003\u8651\u957f\u5ea61\u548c2</p> <p>\u5219\u5e0c\u671b\u5f97\u5230 \\(max_p min \\{p, min\\{1-p^2, 1-(1-p)^2, 1-p(1-p)\\}\\}\\)\uff0c\u8ba1\u7b97\u5f97\u6700\u5927\u503c\u4e3a\\(p=\\frac{\\sqrt{5}-1}{2}\\)</p> <p>D. \u9898\u76ee\u5e94\u8be5\u610f\u601d\u662f\u66f4\u7d27\u7684\u754c</p> </li> </ul> </li> </ul>"},{"location":"ADS/#parallel","title":"Parallel","text":"<p>\u901a\u8fc7\u5e76\u884c\u52a0\u901f\u7b97\u6cd5\u7684\u6267\u884c\u3002\u5f88\u591a\u65f6\u5019\u4e3a\u4e86\u6316\u6398\u5e76\u884c\u6027\uff0c\u53ef\u80fd\u4f1a\u8bbe\u8ba1\u4e00\u4e2a\u5de5\u4f5c\u8d1f\u8f7d\u53d8\u5927\u7684\u7b97\u6cd5\uff0c\u4f46\u662f\u7531\u4e8e\u5e76\u884c\u6027\uff0c\u6574\u4f53\u7684\u8fd0\u884c\u6548\u7387\u53cd\u800c\u4f1a\u63d0\u9ad8\u3002</p> <ul> <li> <p>\u8fd0\u884c\u57fa\u7840\uff1a</p> <ul> <li> <p>PRAM\uff08Parallel Random Access Machine\uff09</p> </li> <li> <p>Access</p> <p></p> </li> </ul> </li> <li> <p>\u5173\u952e\u5b9a\u4e49</p> <ul> <li> <p>\\(T_p\\) \u8868\u793ap\u4e2a\u5904\u7406\u5668\u65f6\u7684\u5b9e\u9645\u5de5\u4f5c\u6548\u7387\uff0c\u4e5f\u5373\u5904\u7406\u5668\u5e76\u884c\u8c03\u7528\u7684\u6b21\u6570</p> </li> <li> <p>\\(W\\) (Workload) \u8868\u793a\u603b\u5de5\u4f5c\u91cf\uff0c\u6613\u77e5 \\(W = T_1\\)</p> </li> <li> <p>\\(D\\) (Depth) \u8868\u793a\u5e76\u884c\u5c42\u6570\uff0c\u6613\u77e5 \\(D = T_{\\infty}\\)</p> </li> <li> <p>\\(\\frac{W}{p} \\leq T_p \\leq \\frac{W}{p} + D\\) </p> </li> </ul> </li> <li> <p>Summation</p> <ul> <li> <p>Balanced Binary Tree \u6a21\u578b\uff08Bottom-Up\uff09</p> <p>\\(D = O(log N)\\) </p> <p>\\(W = O(N)\\)</p> <p></p> </li> </ul> </li> <li> <p>Prefix-Summation</p> <ul> <li> <p>\u7531\u4e8e\u9700\u8981\u8ba1\u7b97\u524d\u7f00\u548c\uff0c\u56e0\u6b64\u5728\u4e0a\u8ff0\u8ba1\u7b97\u51fa\u7684B\u8282\u70b9\u7684\u57fa\u7840\u4e0a\uff0c\u8fdb\u884cTop-Down\u8ba1\u7b97\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u5230\u8d77\u6700\u53f3\u8282\u70b9\u7684\u524d\u7f00\u548c\uff0c\u8bb0\u4e3aC</p> <p>\u66f4\u65b0\u7b56\u7565\uff1a</p> <ul> <li> <p>\u82e5\u4e3a\u53f3\u513f\u5b50\uff0c\u5219\u6613\u5f97\u503c\u548c\u7236\u8282\u70b9\u76f8\u7b49</p> </li> <li> <p>\u82e5\u4e3a\u5de6\u513f\u5b50\uff0c\u5219\u9700\u8981\u4ece\u4e0a\u4e00\u5c42\u7236\u8282\u70b9\u7684\u5de6\u5144\u5f1f\u83b7\u5f97\u524d\u534a\u6bb5\u7684\u7ed3\u679c\uff0c\u518d\u7d2f\u52a0\u4e0a\u81ea\u5df1</p> </li> </ul> <p></p> </li> <li> <p>\u590d\u6742\u5ea6\u76f8\u5f53\u4e8e\u5728\u539f\u6765\u7b97\u6cd5\u7684\u57fa\u7840\u4e0a\u591a\u505a\u4e86\u4e00\u904d\u800c\u5df2\uff0c\u6ca1\u6709\u5f71\u54cd</p> <p>\\(D = O(log N)\\) </p> <p>\\(W = O(N)\\)</p> </li> </ul> </li> <li> <p>Merge</p> <ul> <li> <p>\u8003\u8651\u5f52\u5e76\u6392\u5e8f\u7684merge\u73af\u8282\uff0c\u5982\u679c\u4f7f\u7528\u5e38\u89c4\u7684\u4e32\u884c\u6765\u505a\uff0c\u590d\u6742\u5ea6\u4e3a\u7ebf\u6027\\(O(N)\\)</p> <p>\u4e3a\u4e86\u6316\u6398\u5e76\u884c\u6027\uff0c\u6211\u4eec\u5e0c\u671b\u4e3a\u6bcf\u4e00\u4e2a\u5143\u7d20\u76f4\u63a5\u627e\u5230\u5176\u5408\u5e76\u540e\u7684\u987a\u5e8f\uff0c\u800c\u8fd9\u672c\u8d28\u4e0a\u5c31\u662f\u627e\u4e24\u4e2a\u5e8f\u5217\u4e2d\u6709\u591a\u5c11\u4e2a\u6570\u6bd4\u81ea\u5df1\u5c0f\uff1a</p> <p>\u5df1\u65b9\u7684\u7531\u4e8e\u6709\u5e8f\u5df2\u7ecf\u901a\u8fc7\u4f4d\u7f6e\u5f97\u5230\uff0c\u53ea\u8981\u5f97\u5230\u5bf9\u65b9\u5e8f\u5217\u4e2d\u7684\u4e2a\u6570\u5373\u53ef\uff0c\u800c\u8fd9\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u5728\u6709\u5e8f\u5e8f\u5217\u4e2d\u6c42rank\u95ee\u9898</p> <p></p> </li> <li> <p>\u5e76\u884c\u4e8c\u5206\u67e5\u627e\uff1a</p> <p>\u6bcf\u4e2a\u5143\u7d20\u5728\u5bf9\u65b9\u5e8f\u5217\u4e2d\u8fdb\u884c\u4e8c\u5206\u67e5\u627e</p> <p>\\(D = O(log N)\\)</p> <p>\\(W = O(N log N)\\)</p> </li> <li> <p>\u5206\u5757\uff1a</p> <p>\u901a\u8fc7\u5de7\u5999\u7684\u8bbe\u8ba1\u5e73\u8861\u590d\u6742\u5ea6\uff1a</p> <p>\u5728\u6bcf\u4e2a\u5e8f\u5217\u4e2d\u6bcf \\(p\\)\u4e2a\u5143\u7d20 \u53d6\u4e00\u4e2apivot\u8fdb\u884c\u4e8c\u5206\u67e5\u627e\uff0c\u627e\u5230\u5176\u5728\u5bf9\u65b9\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e</p> <p>\\(D = O(logN),\\qquad W = O(\\frac{N}{p} \\times logN)\\)</p> <p>\u6b64\u65f6\u6839\u636e\u8fde\u63a5\u5173\u7cfb\uff0c\u4e24\u4e2a\u5e8f\u5217\u90fd\u88ab\u5206\u6210\u4e86\u5c0f\u4e8e\u7b49\u4e8e\\(p\\)\u7684\u5757\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5757\u5e94\u5f53\u6309\u987a\u5e8f\u4e0e\u5bf9\u5e94\u5757\u8fdb\u884c\u5408\u5e76\uff0c\u6b64\u65f6\u5bf9\u5bf9\u5e94\u7684\u5757\u4e4b\u95f4\u8c03\u7528\u6734\u7d20\u7684\u4e32\u884c\u65b9\u6cd5\u8fdb\u884c\u5408\u5e76\u5373\u53ef</p> <p>\\(D = O(p), \\qquad W = O(N)\\)</p> <p></p> <p>\u7efc\u4e0a\uff0c\u82e5\u53d6\\(p=logN\\)\uff0c\u5f97\u5230</p> <p>\\(D = O(log N)\\)</p> <p>\\(W = O(N)\\)</p> </li> </ul> </li> <li> <p>Maximum Finding</p> \u7ed3\u8bba\u901f\u89c8 \\(D\\) \\(W\\) \u6734\u7d20\u5206\u6cbb \\(O(logN)\\) \\(O(N)\\) \u5e76\u884c\u4e8c\u91cd\u5faa\u73af \\(O(1)\\) \\(O(N^2)\\) \u9012\u5f52\u5206\u5757\uff08\\(p=\\sqrt{N}\\)\uff09 \\(O(loglogN)\\) \\(O(NloglogN)\\) \u9012\u5f52\u5206\u5757\uff08\\(p=loglogN\\)\uff09 \\(O(loglogN)\\) \\(O(N)\\) \u968f\u673a\u91c7\u6837 \\(O(1)\\) \\(O(N)\\) <ul> <li> <p>\u5229\u7528\u524d\u9762\u6c42\u548c\u7c7b\u4f3c\u7684Balanced Binary Tree \u5206\u6cbb</p> <p>\\(D = O(logN)\\)</p> <p>\\(W = O(N)\\)</p> </li> <li> <p>\u5145\u5206\u6316\u6398\u5e76\u884c\u6027\uff0c\u91c7\u7528\u5e76\u884c\u7684\u4e8c\u91cd\u5faa\u73af\uff0c\u5373\u5e76\u884c\u8fdb\u884c\\(N^2\\)\u5bf9\u6bd4\u8f83\uff0c\u4e00\u65e6\u6709\u4e00\u7ec4\u6bd4\u8f83\u4e0d\u6ee1\u8db3\u5219\u6dd8\u6c70\uff08\u9700\u8981common CRCW\u7b56\u7565\u652f\u6301\uff09</p> <p>\\(D = O(1)\\)</p> <p>\\(W = O(N^2)\\)</p> </li> <li> <p>\u8003\u8651\u9012\u5f52\u5206\u5757\uff0c\u53ef\u4ee5\u5f97\u5230\u6240\u8c13 Doubly-logarithmic Paradigm</p> <p>\u82e5\u6bcf\\(p\\)\u4e2a\u5206\u6210\u4e00\u5757\uff0c\u5757\u4e0e\u5757\u4e4b\u95f4\u5e76\u884c\u5904\u7406\uff0c\u6700\u540e\u5bf9\\(\\frac{N}{p}\\)\u5757\u8fdb\u884c\u6c47\u603b\uff0c\u5219\u5bb9\u6613\u5f97\u5230\u590d\u6742\u5ea6\u7684\u9012\u63a8\u5f0f</p> <p>\\(D(N) = D(p) + F_D(\\frac{N}{p}), \\qquad W(N) = \\frac{N}{p}W(p) + F_W(\\frac{N}{p})\\)</p> <p>\u82e5\u90fd\u91c7\u7528\u4e0a\u8ff0 \u5e76\u884c\u4e8c\u91cd\u5faa\u73af \u7684\u65b9\u6cd5\uff0c\u5219\u6709 </p> <p>\\(D(N) = D(p) + O(1), \\qquad W(N) = \\frac{N}{p}W(p) + O((\\frac{N}{p})^2)\\)</p> <p>\u53d6\\(p=\\sqrt{N}\\)\uff0c\u53ef\u4ee5\u5f97\u5230\u4f18\u5316\uff1a</p> <p>\\(D(N) = O(loglogN)\\)</p> <p>\\(W(N) = O(N log log N)\\)</p> </li> <li> <p>\u7a76\u6781\u786c\u51d1</p> <p>\u5728\u524d\u9762\u9012\u5f52\u5206\u5757\u5f97\u5230\u7684\u6bd4\u8f83\u4f18\u79c0\u7684\u7b97\u6cd5\u57fa\u7840\u4e0a\uff0c\u8003\u8651\u5148\u4f7f\u7528\\(p=loglogN\\)\u5206\u5757\uff0c\u6bcf\u4e00\u4e2a\u5757\u5185\u76f4\u63a5\u7528\u6734\u7d20\u7684\u4e32\u884c\u7ebf\u6027\u7b97\u6cd5\u8fdb\u884c\u6c42\u89e3\uff0c\u800c\u5408\u5e76\u65f6\u4f7f\u7528\u4e0a\u65b9\u7684\u9012\u5f52\u5206\u5757\u65b9\u6cd5</p> <p>\\(D(N) = O(p) + O(loglog \\frac{N}{p}) = O(loglogN)\\)</p> <p>\\(W(N) = O(N) + O(\\frac{N}{p} loglog \\frac{N}{p}) = O(N)\\)</p> </li> <li> <p>\u968f\u673a\u91c7\u6837</p> <ol> <li> <p>\u968f\u673a\u9009\u53d6\\(N^{\\frac{7}{8}}\\)\u4e2a\u5143\u7d20\u4f5c\u4e3a\u91c7\u6837\u7684\u5e8f\u5217</p> <p>\\(D = O(1), \\qquad W = O(N^{\\frac{7}{8}})\\)</p> </li> <li> <p>\u6bcf\\(N^{\\frac{1}{8}}\\)\u4e3a\u4e00\u5757\u5206\u7ec4\uff0c\u5f97\u5230\\(N^{\\frac{3}{4}}\\)\u5757\uff0c\u6bcf\u7ec4\u5185\u4f7f\u7528 \u5e76\u884c\u4e8c\u91cd\u5faa\u73af \u8fdb\u884c\u6c42\u89e3\u6700\u5927\u503c</p> <p>\\(D = O(1), \\qquad W = O(N^{\\frac{3}{4}} \\times (N^{\\frac{1}{8}})^2) = O(N)\\)</p> </li> <li> <p>\u6bcf\\(N^{\\frac{1}{4}}\\)\u4e3a\u4e00\u5757\u5206\u7ec4\uff0c\u5f97\u5230\\(N^{\\frac{1}{2}}\\)\u5757\uff0c\u6bcf\u7ec4\u5185\u4f7f\u7528 \u5e76\u884c\u4e8c\u91cd\u5faa\u73af \u8fdb\u884c\u6c42\u89e3\u6700\u5927\u503c</p> <p>\\(D = O(1), \\qquad W = O(N^{\\frac{1}{2}} \\times (N^{\\frac{1}{4}})^2) = O(N)\\)</p> </li> <li> <p>\u5269\u4e0b\u7684 \\(N^{\\frac{1}{2}}\\) \u5757\u76f4\u63a5\u4f7f\u7528 \u5e76\u884c\u4e8c\u91cd\u5faa\u73af \u6c42\u89e3\u6700\u7ec8\u7b54\u6848</p> <p>\\(D = O(1), \\qquad W = O((N^{\\frac{1}{2}})^2) = O(N)\\)</p> </li> </ol> <p>\u7efc\u4e0a\uff0c\u603b\u590d\u6742\u5ea6\u4e3a</p> <p>\\(D=O(1)\\)</p> <p>\\(W=O(N)\\)</p> \u8865\u5145\u8bf4\u660e <p></p> </li> </ul> </li> </ul> \u274c <ul> <li> <p></p> <p>\u53ef\u4ee5\u8ba4\u4e3a\u968f\u673a\u7b97\u6cd5\u5df2\u7ecf\u89e3\u51b3\u4e86</p> </li> </ul> <ul> <li> <p> </p> <p>\u9898\u76ee\u610f\u601d\u4e3a\uff1a\u7ed9\u5b9a\u9009\u9879\u91cc\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u63a8\u51faW(N) \u548c T(N)</p> </li> </ul>"},{"location":"ADS/#external-sorting","title":"External Sorting","text":"<ul> <li> <p>External Memory Model</p> <ul> <li> <p>\u6709\u5185\u5b58\u548c\u5916\u5b58\u4e4b\u5206\uff0c\u5185\u5b58\u53ef\u4ee5\u5feb\u901f\u8fdb\u884c\u968f\u673a\u8bbf\u95ee\uff0c\u800c\u5916\u5b58\u5b9e\u73b0\u968f\u673a\u8bbf\u95ee\u9700\u8981\u5f00\u9500\u5f88\u5927\u7684I/O\u64cd\u4f5c</p> </li> <li> <p>\u901a\u5e38\u5185\u5b58\u8fdc\u5c0f\u4e8e\u5916\u5b58\uff0c\u56e0\u6b64\u9700\u8981\u8bbe\u8ba1\u4e00\u4e9b\u7b97\u6cd5\uff0c\u5728\u5185\u5b58\u91cc\u8fdb\u884c\u5b9e\u9645\u6392\u5e8f\uff0c\u5728\u5916\u5b58\u4e2d\u53ea\u8fdb\u884c\u5c3d\u53ef\u80fd\u5c11\u7684\u987a\u5e8fI/O\u64cd\u4f5c</p> </li> </ul> </li> <li> <p>\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5</p> <ul> <li> <p>Block\uff1a\u5185\u5b58\u548c\u5916\u5b58\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u5355\u4f4d\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u636e\u5757</p> </li> <li> <p>Run\uff1a\u4e00\u6b21\u5185\u5b58\u6392\u5e8f\u7684\u7ed3\u679c\uff0c\u5373\u4e00\u4e2a\u6709\u5e8f\u7684\u5b50\u5e8f\u5217\uff0c\u521d\u59cb\u4e00\u822c\u4e3a\u5185\u5b58\u5927\u5c0f</p> </li> <li> <p>Tape\uff1a\u62bd\u8c61\u6a21\u578b\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u987a\u5e8f\u8bfb\u5199\u7684\u78c1\u5934\uff0c\u4e00\u822c k-way merge \u9700\u8981 k + 1 \u4e2atape</p> </li> <li> <p>Pass\uff1a\u4e00\u6b21\u5185\u5b58\u6392\u5e8f\u7684\u8fc7\u7a0b\uff0c\u5373\u5c06\u5916\u5b58\u6570\u636e\u8bfb\u5165\u5185\u5b58\uff0c\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u5199\u56de\u5916\u5b58</p> </li> </ul> </li> <li> <p>External Merge Sort</p> <ul> <li> <p>Split\uff1a</p> <ul> <li> <p>\u5e38\u89c4\uff1a\u5c06\u5916\u5b58\u6570\u636e\u5206\u6210\u82e5\u5e72\u5757\uff0c\u6bcf\u5757\u5927\u5c0f\u4e3a\u5185\u5b58\u5927\u5c0f\uff0c\u7136\u540e\u5728\u5185\u5b58\u4e2d\u8c03\u7528\u5185\u90e8\u6392\u5e8f\u7b97\u6cd5\u8fdb\u884c\u6392\u5e8f\uff0c\u5199\u56de\u78c1\u76d8</p> </li> <li> <p>Replacement Selection\uff1a</p> <p>\u589e\u5927run\u7684\u521d\u59cb\u5927\u5c0f\uff0c\u964d\u4f4epass\u7684\u6b21\u6570\uff0c\u63d0\u9ad8\u6548\u7387</p> <p>\u5927\u4f6cDonald Knuth\u53d1\u660e\u7684\u7b97\u6cd5\uff1a\u4f7f\u7528\u5185\u5b58\u7ef4\u62a4\u4e00\u4e2a\u5806\uff0c\u6bcf\u6b21\u5c06\u5806\u9876\u5143\u7d20\u5199\u5165\u5916\u5b58\uff0c\u7136\u540e\u5c06\u65b0\u5143\u7d20\u52a0\u5165\u5806\u3002\u82e5\u65b0\u5199\u5165\u7684\u5143\u7d20\u6bd4\u5f53\u524drun\u7684\u672b\u5c3e\u5143\u7d20\u5c0f\uff0c\u5219\u5e94\u8be5\u65b0\u5f00\u4e00\u4e2arun,\u6b64\u65f6\u76f4\u63a5\u5c06\u8be5\u5143\u7d20\u653e\u5230\u5185\u5b58\u672b\u5c3e\uff0c\u5373\u5185\u5b58\u524d\u534a\u90e8\u5206\u4e3a\u5806\u7a7a\u95f4\uff0c\u540e\u534a\u90e8\u5206\u4e3a\u4e0b\u4e00\u4e2arun\u7684\u7f13\u5b58\uff0c\u7b49\u5230\u5806\u7a7a\u95f4\u4e3a\u7a7a\u5219\u8fdb\u884c\u91cd\u5efa\u5806\u7ee7\u7eed\u4e0a\u8ff0\u8fc7\u7a0b\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528\u6240\u8c13\u201csnowplow\u201d\u7406\u8bba\u611f\u6027\u7406\u89e3\u5176run\u7684\u5927\u5c0f\u4f1a\u589e\u5927\u4e3a\u539f\u6765\u7684\u4e24\u500d\uff0c\u4ece\u800c\u51cf\u5c11pass\u7684\u6b21\u6570</p> </li> </ul> </li> <li> <p>Merge\uff1a</p> <ul> <li> <p>Simple k-way merge</p> <p>\u5728\\(\\frac{k}{2}\\)\u4e2atape\u95f4\u6765\u56de\u5012\u817e\uff0c\u56e0\u6b64\u6240\u7528 \\(tape = 2k\\)</p> </li> <li> <p>k-way merge\uff1a</p> <p>\u5c06k\u4e2arun\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5757\u8bfb\u5165\u5185\u5b58\uff0c\u7559\u4e0b\u4e00\u4e2a\u5185\u5b58\u5757\u4f5c\u4e3a\u8f93\u51fabuffer, \u4f7f\u7528\u5806\u8fdb\u884ck\u8def\u5f52\u5e76\u6392\u5e8f\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5199\u56de\u5916\u5b58\uff0c\u76f4\u5230\u6240\u6709run\u90fd\u88ab\u5408\u5e76</p> <p>\u8fd9\u6837\u6240\u9700\u7684\u5185\u5b58\u4e3a\\(block = k+1\\)</p> <p>\u4f18\u5316\u7684\\(pass = 1 + \\lceil \\log_k(runs) \\rceil\\)</p> </li> <li> <p>\u5e76\u884c\u4f18\u5316\uff1a</p> <p>\u4e0a\u8ff0\u6734\u7d20\u7684\u591a\u8def\u5408\u5e76\u7b97\u6cd5\u6709\u4e2a\u95ee\u9898\uff0c\u5f53\u67d0\u8def\u7684\u6570\u636e\u5757\u5904\u7406\u5b8c\u65f6\uff0c\u6574\u4e2a\u7b97\u6cd5\u4f1a\u88ab\u963b\u585e\uff0c\u7b49\u5f85\u8fd9\u4e00\u8def\u7684\u65b0\u6570\u636e\u5757\u5199\u5165\uff08\u4e00\u822c\u8ba4\u4e3a\u6570\u636e\u5757\u4e0d\u80fd\u540c\u65f6\u8bfb\u5199\uff09</p> <p>\u4e3a\u6b64\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u5e76\u884c\u624b\u6bb5\uff0c\u6bcf\u4e2a\u6570\u636e\u5757\u5206\u62102\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u4e3a\u5f53\u524d\u5904\u7406\u7684\u6570\u636e\u5757\uff0c\u53e6\u4e00\u90e8\u5206\u4e3a\u5e76\u884c\u5199\u5165\u4e0b\u4e00\u4e2a\u6570\u636e\u5757\uff0c\u4ece\u800c\u907f\u514d\u963b\u585e\uff08\u8f93\u51fabuffer\u540c\u7406\uff09</p> <p>\u6b64\u65f6\u9700\u8981\u7684\\(block = 2 k + 2\\)</p> </li> <li> <p>Polyphase Merge(tape \u4f18\u5316)</p> <p>\u5982\u4e0a\u7684k-way merge\u7b97\u6cd5\u9700\u8981 2(k+1) \u4e2atape\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u6280\u5de7\uff0c\u5145\u5206\u5229\u7528\u7a7a\u95f4\uff0c\u8fbe\u5230\u53ea\u9700 k+1 \u4e2atape</p> <p>\u4ee5\u4e8c\u8def\u5f52\u5e76\u4e3a\u4f8b</p> <p></p> <p>\u901a\u8fc7\u5206\u914d\u521d\u59cbrun\u7684\u4e2a\u6570\u4e3a\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff0c\u6bcf\u6b21\u7684run\u7684\u4e2a\u6570\u53ef\u4ee5\u8f97\u8f6c\u76f8\u51cf\u3001\u6eda\u52a8\u51cf\u5c0f</p> <p>\u5bf9\u4e8ek\u8def\u5f52\u5e76\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b\u4f3c\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528k\u4e2a\u8fde\u7eed\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\u8fdb\u884c\u6eda\u52a8</p> <p>\u4f46\u662f\u8fd9\u6837\u7684\u65b9\u6cd5\u663e\u7136\u4f1a\u5bfc\u81f4pass\u7684\u6b21\u6570\u589e\u52a0\uff0c\u56e0\u6b64\u9700\u8981\u6743\u8861</p> </li> </ul> \u8fed\u4ee3\u5f52\u5e76 <p>\u5bf9\u4e8e\u591a\u8def\u5f52\u5e76\uff0c\u9664\u4e86\u4f7f\u7528\u5806\u8fdb\u884c\u8f85\u52a9\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u5f52\u5e76\u7684\u65b9\u6cd5\uff0c\u5373\u6bcf\u6b21\u5408\u5e76\u4e24\u4e2arun</p> <p>\u201c\u5408\u5e76\u679c\u5b50\u201d\u5373\u89c6\u611f\uff0c\u53ef\u4ee5\u4f7f\u7528\u54c8\u592b\u66fc\u6811\u8fdb\u884c\u4f18\u5316</p> <p></p> </li> </ul> </li> </ul> \u274c <ul> <li> <p></p> <p>2k tapes </p> </li> </ul>"},{"location":"AI_Materials/","title":"AI Materials","text":""},{"location":"AI_Materials/#cv","title":"CV","text":"<ul> <li> <p>CNN</p> <ul> <li>The pioneering work of CNN. The paper introduces the convolutional layer, pooling layer, fully connected layer, and the implementation of the CNN model.</li> </ul> </li> <li> <p>transformer</p> <ul> <li>The pioneering work of the transformer. The paper introduces the self-attention mechanism and the multi-head attention mechanism, as well as the implementation of the transformer model.</li> </ul> </li> <li> <p>GAN</p> <ul> <li>The pioneering work of GAN, which introduces the generator and discriminator mechanism in GAN.</li> </ul> </li> <li> <p>cGAN</p> <ul> <li> <p>Reference Blog</p> <ul> <li>Help build a network from scrat </li> </ul> </li> <li> <p>Deep Generative Image Models using a Laplacian Pyramid of Adversarial Networks</p> </li> <li> <p>ganhacks</p> </li> <li> <p>pix2pix </p> </li> </ul> </li> <li> <p>Unsupervised GAN</p> <ul> <li> <p>Refernce Blog</p> <ul> <li>A detailed explanation of GAN and its implementation, as well as the unsupervised GAN.</li> </ul> </li> <li> <p>Tutorial: Generative Adversarial Networks </p> </li> <li> <p>CycleGAN (style transfer)</p> </li> <li> <p>CycleGAN (Chinese font transfer) </p> </li> </ul> </li> </ul>"},{"location":"AI_Materials/#rnn","title":"RNN","text":"<ul> <li> <p>word2vec</p> <ul> <li>A detailed explanation of word2vec and its implementation CBOW &amp; SG, as well as two optimization methods, negative sampling and hierarchical softmax. </li> </ul> </li> </ul>"},{"location":"AI_Materials/#rl","title":"RL","text":"<ul> <li> <p>DQN</p> <ul> <li>The pioneering work of DQN, which introduces the experience replay mechanism and the target network mechanism.</li> </ul> </li> <li> <p>A3C</p> <ul> <li>The pioneering work of A3C, which introduces the actor-critic mechanism and the asynchronous training mechanism.</li> </ul> </li> <li> <p>Converge </p> <ul> <li>Prove the convergence and stability of the algorithm.</li> </ul> </li> <li> <p>DDPG</p> </li> </ul>"},{"location":"AI_Materials/#tips","title":"Tips","text":"<ul> <li>CUDA restart</li> </ul> <pre><code>sudo rmmod nvidia_uvm\nsudo modprobe nvidia_uvm\n</code></pre>"},{"location":"ASM/","title":"x86\u6c47\u7f16\u8bed\u8a00\u57fa\u7840","text":""},{"location":"ASM/#_1","title":"\u57fa\u672c\u89c4\u5219","text":"<ul> <li> <p>\u5bc4\u5b58\u5668\uff1a</p> </li> <li> <p>ax  bx cx dx\uff08\u8ba1\u7b97\u5e38\u7528\uff09</p> </li> <li>ds cs(\u6307\u4ee4\u548c\u6570\u636e\u6bb5\u5730\u5740)\uff0css(\u5806\u6808\u5730\u5740)\uff0ces\uff08\u6bb5\u5bc4\u5b58\u5668)     \u6bb5\u5bc4\u5b58\u5668\u4e0d\u53ef\u4ee5\u76f4\u63a5\u8d4b\u503c\u5e38\u6570\u6216\u8ba1\u7b97\uff0c\u53ea\u80fd\u7528\u5bc4\u5b58\u5668\u6216\u53d8\u91cf\u8d4b\u503c</li> <li>si  di  bx  bp sp (\u504f\u79fb\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u5373\u53ef\u4ee5\u653e\u8fdb[ ]\u4e2d)     \uff08\u5176\u4e2dss:sp\u6307\u5411\u6808\u9876\uff0cbp\u4e5f\u5e38\u7528\u4e8e\u6808\u4e2d\u5143\u7d20\uff09</li> <li>ip \uff08\u6307\u4ee4\u6307\u9488\uff0c\u6307\u4ee4\u7684\u504f\u79fb\u5730\u5740\uff09</li> <li>FL \uff0816\u4f4d\u8bb0\u5f55\u8fd0\u7b97\u72b6\u6001\uff09</li> <li>\u53cc\u76ee\u8fd0\u7b97\u4f4d\u5bbd\u76f8\u7b49\u4e14\u53ef\u786e\u5b9a\uff0c\u5e76\u4e14\u4e0d\u80fd\u540c\u65f6\u4e3a\u5185\u5b58\u5730\u5740   \u53d8\u91cf\u5f3a\u5236\u89c4\u5b9a\u4f4d\u5bbd\uff1a<code>byte/word/dword ptr</code></li> </ul> <p>\u5b9a\u4e49\u7684\u53d8\u91cf\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u4e5f\u5c5e\u4e8e\u53ef\u786e\u5b9a\u5bbd\u5ea6\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5 <code>mov a,0</code> - assume   \u672c\u8d28\u4e0a\u4e3a\u7701\u7565\u6bb5\u5730\u5740\u7684\u66ff\u6362</p> <p>(\u540c\u4e00\u4e2a\u6bb5\u4e0e\u591a\u4e2a\u6bb5\u5bc4\u5b58\u5668\u6709\u5173\u8054\u65f6:ds &gt; ss &gt; es &gt; cs)</p> <p>\u4f8b\u5982assume ds:data\u5373\u5c06data:\u81ea\u52a8\u66ff\u6362\u4e3ads:   \u6240\u4ee5\u4e00\u822c\u7a0b\u5e8f\u5f00\u5934\u6709</p> <pre><code>mov ax,data\nmov ds,ax\n</code></pre>"},{"location":"ASM/#_2","title":"\u6570\u636e\u5b58\u50a8","text":"<ul> <li>\u5185\u5b58\u4e2d\u5c0f\u7aef\u89c4\u5219\uff0c\u4f4e\u4f4d\u5728\u524d\uff0c\u9ad8\u4f4d\u5728\u540e</li> </ul> <p>\u5982    1234H  ---&gt;      34   12</p> <p>\u53ef\u7528\u4e0b\u9762\u4e24\u6bb5C\u8bed\u8a00\u4ee3\u7801\u9a8c\u8bc1</p> <pre><code>   unsigned short int a = 0x1234;\n   unsigned char *p;\n   p = (unsigned char *)&amp;a;\n   printf(\"%X %X\", p[0], p[1]);\n\n\n   unsigned char a[2]={0x12, 0x34};\n   unsigned short int *p;\n   p = (unsigned short int *)a;\n   printf(\"%X\", *p);\n</code></pre> <ul> <li>\u7b26\u53f7\u4e0d\u533a\u5206</li> </ul> <pre><code>a db 0FFh\n</code></pre> <p>\u5230\u5e95\u4ee3\u8868255\u8fd8\u662f-1,\u5728\u5b9a\u4e49\u65f6\u5e76\u4e0d\u786e\u5b9a</p> <p>\u4f46\u662f\u5728\u5f15\u7528\u53d8\u91cfa\u65f6\u53ef\u4ee5\u7528\u6307\u4ee4\u6765\u533a\u5206\u5b83\u662f\u975e\u7b26\u53f7\u8fd8\u662f\u6709\u7b26\u53f7</p> <p>\u4f8b\u5982 <code>imul  a</code>\u6307\u4ee4\u8868\u793a\u4e58\u4ee5  -1 \uff0c\u800c <code>mul a</code>\u6307\u4ee4\u5219\u8868\u793a\u4e58\u4ee5 255</p> <ul> <li>\u6bb5\u5730\u5740\uff1a\u504f\u79fb\u5730\u5740\uff08\u903b\u8f91\u5730\u5740\u5bfb\u5740\uff09   \u4ee55\u4f4d16\u8fdb\u5236\u7684\u5f62\u5f0f   XXXX:0000~~XXXX:FFFF   64KB   \u903b\u8f91\u5730\u5740XXXX0+YYYY   \u9700\u8981\u6ce8\u610f\u4e00\u4e2a\u7269\u7406\u5730\u5740\u53ef\u4ee5\u8868\u793a\u6210\u591a\u4e2a\u903b\u8f91\u5730\u5740</li> </ul> <p><code>12398h=1234:0058=1235:0048=1236:0038=1230:0098</code></p> <ul> <li> <p>\u5bfb\u5740\u65b9\u5f0f</p> </li> <li> <p>\u76f4\u63a5\u5bfb\u5740\uff08\u504f\u79fb\u5730\u5740\u4e3a\u5e38\u6570\uff0c\u6bb5\u5730\u5740\u5fc5\u987b\u4e3a\u6bb5\u5bc4\u5b58\u5668\uff09     1000H:[2000H]\u274c</p> </li> <li>\u95f4\u63a5\u5bfb\u5740\uff08\u504f\u79fb\u5730\u5740\u4e3a\u5bc4\u5b58\u5668+\u53d8\u91cf/\u6570\u7ec4\uff09</li> <li> <p>\u53d6\u5730\u5740\u8fd0\u7b97</p> </li> <li> <p>lea &amp; offset</p> <p><pre><code>\u8bbeabc\u7684\u504f\u79fb\u5730\u5740=1000h\nlea dx, abc         ; lea dx, [1000h]\nmov dx, offset abc  ; mov dx, 1000h\n\nmov dx, offset ds:[bx+si+3]   ; \u8bed\u6cd5\u9519\u8bef\nlea dx, ds:[bx+si+3]          ; dx=bx+si+3\nmov dx, bx+si+3               ; \u9519\u8bef\n\nlea eax, [eax+eax*4]          ; EAX=EAX*5 \u7528lea\u505a\u4e58\u6cd5\n</code></pre>   - lds &amp; les</p> <p>\u53d6\u8fdc\u6307\u9488\uff0c\u5e76\u5206\u522b\u628a\u6bb5\u5730\u5740\u8d4b\u7ed9ds/es\uff0c\u504f\u79fb\u5730\u5740\u8d4b\u7ed9\u76f8\u5e94\u76ee\u6807 - \u8fdc\u8fd1\u6307\u9488</p> </li> <li> <p>near ptr(\u504f\u79fb\u5730\u5740)</p> </li> <li> <p>far ptr   (\u6bb5\u5730\u5740:\u504f\u79fb\u5730\u5740)</p> <p>\u5047\u5b9a\u628a\u4e00\u4e2a\u8fdc\u6307\u94881234h:5678h\u5b58\u653e\u5230\u5730\u57401000:0000\u4e2d\uff0c\u5219\u5185\u5b58\u5e03\u5c40\u5982\u4e0b\uff1a  &amp;p=1000:0000 1000:0000 78h 1000:0001 56h 1000:0002 34h 1000:0003 12h</p> </li> </ul>"},{"location":"ASM/#_3","title":"\u7b97\u672f\u8fd0\u7b97","text":"<ul> <li><code>inc / dec  x</code>\u5355\u76ee\u8fd0\u7b97\uff08\u81ea\u52a0\u81ea\u51cf\uff0c\u4e0d\u5f71\u54cdCF\uff09</li> <li><code>add / sub  a,b</code>  \u53cc\u76ee\u8fd0\u7b97</li> <li><code>mul x</code> \u5355\u76ee\u8fd0\u7b97   \u6839\u636ex\u5bbd\u5ea6\u786e\u5b9a\u4e58\u6cd5\u5bbd\u5ea6</li> </ul> <p><pre><code>mul [1]     ah:al   = al * x\nmul [2]     dx:ax   = ax * x\nmul [4]     edx:eax = eax *x\n</code></pre> - <code>div x</code> \u5355\u76ee\u8fd0\u7b97</p> <p>\u57fa\u672c\u53ef\u89c6\u4e3a\u4e58\u6cd5\u7684\u9006\u8fd0\u7b97\uff0c\u5176\u4e2ddx\u5b58\u4f59\u6570\uff0cax\u5b58\u5546</p> <p>\uff08\u6ce8\u610fdx\u7684\u6e05\u7a7a\uff0c\u5426\u5219\u6613\u51fa\u73b0divide overflow\u62a5\u9519\uff09</p> <p>32\u4f4d\u5341\u8fdb\u5236\u8f93\u51fa</p> <p><pre><code>   mov di, 0; \u6570\u7ec4s\u7684\u4e0b\u6807\n   mov eax, abc\n   mov cx, 0; \u7edf\u8ba1push\u7684\u6b21\u6570\nagain:\n   mov edx, 0; \u88ab\u9664\u6570\u4e3aEDX:EAX\n   mov ebx, 10\n   div ebx; EAX=\u5546, EDX=\u4f59\u6570\n   add dl, '0'\n   push dx\n   inc cx; \u76f8\u5f53\u4e8eadd cx, 1\n   cmp eax, 0\n   jne again\npop_again:\n   pop dx\n   mov s[di], dl\n   inc di\n   dec cx; \u76f8\u5f53\u4e8esub cx, 1\n   jnz pop_again\n</code></pre> - <code>&amp;     |     ^      ~      &lt;&lt;     &gt;&gt;   and   or    xor    not    shl    shr</code></p> <p>\u7b80\u5355\u4f4d\u8fd0\u7b97</p> <p>\uff08\u79fb\u4f4d\u8fd0\u7b97\u6700\u540e\u79fb\u51fa\u7684\u4e00\u4f4d\u5b58\u5230CF\u4e2d\uff09 - ```   rol       ror   <pre><code>\u5faa\u73af\u79fb\u4f4d\n\n```c\nC\u8bed\u8a00\nrol()  return x&lt;&lt;n | x&gt;&gt;(sizeof(x)*8-n)\nror()  return x&gt;&gt;n | x&lt;&lt;(sizeof(x)*8-n)\n</code></pre></p> <p>\u7528\u8fd9\u4e9b\u6307\u4ee4\u6765\u5b8c\u6210\u5341\u516d\u8fdb\u5236\u8f93\u51fa\uff1a</p> <p><pre><code>again:\n   rol ax, 4  ;\u53d6\u51fa\u6700\u9ad84\u4f4d\u5230\u4f4e\u4f4d\n   push ax\n   and ax, 000Fh\n   cmp ax, 10\n   jb is_digit\nis_alpha:\n   sub al, 10\n   add al, 'A'\n   jmp finish_4bits\nis_digit:\n   add al, '0'\nfinish_4bits:\n   mov s[di], al\n   pop ax\n   pop cx\n   add di, 1\n   sub cx, 1\n   jnz again\n</code></pre> - sal: shift arithmetic left  \u7b97\u672f\u5de6\u79fb   sar: shift arithmetic right \u7b97\u672f\u53f3\u79fb   sal\u53casar\u662f\u9488\u5bf9\u7b26\u53f7\u6570\u7684\u79fb\u4f4d\u8fd0\u7b97, \u5bf9\u8d1f\u6570\u53f3\u79fb\u7684\u65f6\u5019\u8981\u5728\u5de6\u8fb9\u88651, \u5bf9\u6b63\u6570\u53f3\u79fb\u7684\u65f6\u5019\u5de6\u8fb9\u88650, \u65e0\u8bba\u5bf9\u6b63\u6570\u8fd8\u662f\u8d1f\u6570\u5de6\u79fb\u53f3\u8fb9\u90fd\u88650</p>"},{"location":"ASM/#_4","title":"\u5806\u6808","text":"<ul> <li><code>push x</code></li> </ul> <p>16\u4f4d\u621632\u4f4d\uff0csp=sp-sizeof(x) - <code>pop x</code></p> <p>16\u4f4d\u621632\u4f4d\uff0csp=sp+sizeof(x) - <code>pushf &amp; popf</code> \u4fdd\u62a4FL\u72b6\u6001\u5bc4\u5b58\u5668 - \u624b\u52a8\u5b9a\u4e49\u5806\u6808\u7a7a\u95f4</p> <pre><code>stk segment stack\ndb 200h dup(0)    ;\u6216\u5199\u6210dw 100h dup(0)\nstk ends\n</code></pre>"},{"location":"ASM/#fl","title":"FL\u72b6\u6001\u5bc4\u5b58\u5668","text":"<p>CF ZF SF OF AF PF(\u72b6\u6001) DF TF IF\uff08\u63a7\u5236\uff09</p> <p>mov\u6307\u4ee4\u4e0d\u5f71\u54cd\u4efb\u4f55\u6807\u5fd7\u4f4d</p> <ul> <li>CF\uff08Carry Flag\uff09   \u52a0\u6cd5\u8fdb\u4f4d\uff0c\u51cf\u6cd5\u501f\u4f4d</li> </ul> <p><pre><code>jc  jnc  (jump if (not)carry flag)\nadc      (add+CF)\nsbb      (sub+CF)\nclc CF=0\nstc CF=1\n</code></pre> - ZF(Zero Flag) - SF (Sign Flag   1 --&gt; - ) - OF (Overflow Flag) - PF\uff08Parity Flag\uff09</p> <p>\u5947\u5076\u6807\u5fd7\uff0c\u53ef\u505a\u6821\u9a8c\uff0c\u4f4e\u516b\u4f4d\u4e2d\u76841\u7684\u4e2a\u6570\uff0c1 --&gt; \u6709\u5076\u6570\u4e2a1 - AF(Auxiliary Flag)</p> <p>\u8f85\u52a9\u8fdb\u4f4d\u6807\u5fd7\uff0c1 --&gt; \u7b2c\u56db\u4f4d\u4e0e\u9ad8\u56db\u4f4d\u8fdb\u4f4d\u6216\u501f\u4f4d\u65f6 - DF(Direction Flag)   \u5b57\u7b26\u4e32\u590d\u5236\u65b9\u5411</p> <p><pre><code>cld DF=0 \u6b63\u65b9\u5411\nstd DF=1 \u53cd\u65b9\u5411\n</code></pre> - IF(Interrupt Flag)   1 --&gt; \u5141\u8bb8\u4e2d\u65ad</p> <p><pre><code>cli   (\u7f6e0)\n\u514d\u6253\u6270\u7a0b\u5e8f\u6bb5\nsti  \uff08\u7f6e1\uff09\n</code></pre> - TF(Trap Flag)   1 --&gt; \u8fdb\u5165\u5355\u6b65\u6a21\u5f0f\uff0c\u6bcf\u6761\u6307\u4ee4\u540e\u9690\u542bint 1H\uff08callback\uff09   \u7528\u4e8edebug\uff0c\u53cd\u8c03\u8bd5   \u88ab\u52a8\u9632\u5fa1\uff1a\u6821\u9a8c\u4ee3\u7801\u9632\u6b62\u66f4\u6539   \u4e3b\u52a8\u9632\u5fa1\uff1a\u62a2\u593a\u8d44\u6e90\uff0c\u81ea\u5df1\u83b7\u5f97int 1H\u4e3b\u52a8\u6743</p>"},{"location":"ASM/#_5","title":"\u5b57\u7b26\u4e32\u64cd\u4f5c","text":"<ul> <li>xlat(\u67e5\u8868)</li> </ul> <p>al=ds:[bx+al] - movsb movsw movsd(\u5bbd\u5ea6\u4e0d\u540c)</p> <p>\u2460ds:si   \u6e90\u5b57\u7b26\u4e32(si\u5c31\u662fsource index)   \u2461es:di  \u76ee\u6807\u5b57\u7b26\u4e32(di\u5c31\u662fdestination index)   \u2462cx      \u79fb\u52a8\u6b21\u6570   \u2463DF=0 \u5373\u65b9\u5411\u6807\u5fd7\u8bbe\u6210\u6b63\u65b9\u5411(\u7528\u6307\u4ee4cld) - stosb stosw stosd(\u5bbd\u5ea6\u4e0d\u540c)</p> <p>mov es:[di],     al/ax/eax</p>"},{"location":"ASM/#_6","title":"\u5173\u4e8e\u5faa\u73af","text":"<pre><code>loop label    ;while(--CX) jmp label\nloopz label   ;while(ZF &amp;&amp; --CX) jmp label\nloopnz label  ;while(!ZF &amp;&amp; --CX) jmp label\n</code></pre>"},{"location":"ASM/#_7","title":"\u5e38\u7528\u4e2d\u65ad","text":"<pre><code>\u7b49\u6548\u64cd\u4f5c\npushf, push cs, push ip\ntf = 0, if = 0\nip = word ptr 0:[n*4], cs = word ptr 0:[n*4+2]\n\nmov ah,01H\nint 21H           ;al=getchar()\n\nmov ah,02H\nint 21H           ;putchar(dl)\n\nmov ah,09H\nint 21H           ;cout &lt;&lt; ds:[dx]--&gt;'$'\n\nmov ah,0AH  \nint 21H           ;getline( ds:[dx+2] )\n          ;\u5176\u4e2dds:[dx]\u4e3a\u6700\u5927\u8bfb\u5165\u91cf\uff08\u8bb0\u5f97\u7f6e\u4e00\u4e2a\u5927\u6570\uff09\n          ;ds:[dx+1] \u4e3a\u5b9e\u9645\u8bfb\u5230\u7684\u5b57\u7b26\u6570 \n\nmov ah,4CH\nint 21H           ;exit\n\nmov ah,00H\nint 16H           ;AH = BIOS scan code\n                  ;AL = ASCII character\n\nmov ah,3DH\nint 21H           ;openfile\n\n;AL = access and sharing modes\n;DS:DX -&gt; ASCIZ filename\n;CL = attribute mask of files to look for\n\n;Return:\n;CF clear if successful\n;AX = file handle\n;CF set on error\n;AX = error code (01h,02h,03h,04h,05h,0Ch,56h)\n</code></pre>"},{"location":"ASM/#bcd","title":"\u5173\u4e8eBCD\u7801","text":"<p>\u4e00\u79cd\u7528\u5341\u516d\u8fdb\u5236\u8868\u793a\u5341\u8fdb\u5236\u6570\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u7aef\u53e3\u4e2d\u65f6\u949f</p> <p>15H   <code>&lt;----&gt;</code>   15D</p> <ul> <li> <p>\u538b\u7f29BCD    4\u4f4d\u8868\u793a\u4e00\u4e2a\u5341\u8fdb\u5236\u4f4d</p> </li> <li> <p>daa  \u52a0\u6cd5\u8c03\u6574     \u5177\u4f53\u5730</p> </li> </ul> <p><pre><code>if((AL &amp; 0FH) &gt;= 0AH) AL += 6H     //\u4f4e\u4f4d\nif((AL &amp; 0F0H) &gt;= 0AH) AL += 60H   //\u9ad8\u4f4d\n</code></pre>   - das \u51cf\u6cd5\u8c03\u6574\u7c7b\u4f3c - \u975e\u538b\u7f29BCD     8\u4f4d\u8868\u793a\u4e00\u4e2a\u5341\u8fdb\u5236\u4f4d</p> <p>8\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7684\u9ad8\u56db\u4f4d\u6ca1\u7528</p> <p>0306H  <code>&lt;----&gt;</code>  3366H  <code>&lt;----&gt;</code> 36D</p> <ul> <li>aaa  \u52a0\u6cd5\u8c03\u6574</li> <li>\u5177\u4f53\u5730</li> </ul> <p><pre><code>if((AL &amp; 0FH) &gt;= 0AH) AL += 6 , AH++\n</code></pre>   - aas \u51cf\u6cd5\u8c03\u6574\u7c7b\u4f3c   - aam \u4e58\u6cd5\u8c03\u6574</p> <pre><code>```cpp\nAH /= 10\nAL %= 10\n```\n</code></pre> <ul> <li> <p>aad \u9664\u6cd5 \u524d \u9884\u5148\u8c03\u6574</p> <pre><code>AL = (AH * 10 + AL) &amp; 0FFH\nAH = 0\n</code></pre> </li> </ul>"},{"location":"Bandit/","title":"Bandit","text":"<p>Learning linux commands and security concepts for fun!</p>"},{"location":"Bandit/#level-0","title":"Level 0","text":"<pre><code>ssh bandit0@bandit.labs.overthewire.org -p 2220\npassword: bandit0\n</code></pre>"},{"location":"Bandit/#level-0-level-1","title":"Level 0 -&gt; Level 1","text":"<pre><code>cat readme\npassword: ZjLjTmM6FvvyRnrb2rfNWOZOTa6ip5If\n\n# du - estimate file space usage\n</code></pre>"},{"location":"Bandit/#level-1-level-2","title":"Level 1 -&gt; Level 2","text":"<pre><code># - is a special character as argument, representing stdin/stdout\n# func1 | func2 - pipe the output of func1 as input to func2\ncat ./-\npassword: 263JGJPfgU6LtdEvgfWU1XP5yac29mFx\n</code></pre>"},{"location":"Bandit/#level-2-level-3","title":"Level 2 -&gt; Level 3","text":"<pre><code># spaces in filename: escape with '/' or use quotes\ncat spaces\\ in\\ this\\ filename\ncat \"spaces in this filename\"\ncat spaces*\npassword: MNk8KNH3Usiio41PRUEoDFPqfxLPlSmx\n</code></pre>"},{"location":"Bandit/#level-3-level-4","title":"Level 3 -&gt; Level 4","text":"<pre><code># hidden files start with '.'\nfind . -name \"*\"\nls -a\npassword: 2WmrDFRmJIq3IPxneAaMGhap0pFhF3NJ\n</code></pre>"},{"location":"Bandit/#level-4-level-5","title":"Level 4 -&gt; Level 5","text":"<pre><code># file - determine file type\nfile inhere/* # will get only one ASCII text file(others are data)\ncat inhere/-file07\npassword: 4oQYVPkxZOOEOO5pTW81FB8j8lxXGUQw\n</code></pre>"},{"location":"Bandit/#level-5-level-6","title":"Level 5 -&gt; Level 6","text":"<pre><code># find - search for files in a directory hierarchy\nfind inhere -size 1033c | xargs cat\npassword: HWasnPhtq9AVKe0dmk45nxy20cvUa6EG\n</code></pre>"},{"location":"Bandit/#level-6-level-7","title":"Level 6 -&gt; Level 7","text":"<pre><code># find - search for files in a directory hierarchy\nfind / -user bandit7 -group bandit6 -size 33c 2&gt;/dev/null | xargs cat\npassword: morbNTDkSW6jIlUc0ymOdMaLnOlFVAaj\n</code></pre>"},{"location":"Bandit/#level-7-level-8","title":"Level 7 -&gt; Level 8","text":"<pre><code># grep - print lines matching a pattern\ngrep \"millionth\" data.txt\npassword: dfwvzFQi4mU0wfNbFOe9RoWskMLg7eEc\n</code></pre>"},{"location":"Bandit/#level-8-level-9","title":"Level 8 -&gt; Level 9","text":"<pre><code># sort - sort lines of text files\n# uniq - report or omit repeated lines\n# sort | uniq - sort and remove duplicates\nsort data.txt | uniq -u\npassword: 4CKMh1JI91bUIZZPXDqGanal4xvAg0JM\n</code></pre>"},{"location":"Bandit/#level-9-level-10","title":"Level 9 -&gt; Level 10","text":"<pre><code># strings - print the strings of printable characters in files\nstrings data.txt | grep \"==\"\npassword: FGUW5ilLVJrxX9kMYMmlN4MgbpfMiqey\n</code></pre>"},{"location":"Bandit/#level-10-level-11","title":"Level 10 -&gt; Level 11","text":"<pre><code># base64 - base64 encode/decode data and print to standard output\n# base64 is a simple encoding scheme that encodes binary data as text, not encryption\nbase64 -d data.txt\npassword: dtR173fZKb0RRsDFSGsg2RWnpNVj3qRr\n</code></pre>"},{"location":"Bandit/#level-11-level-12","title":"Level 11 -&gt; Level 12","text":"<pre><code># tr - translate or delete characters, use array inference to map characters\n# tr 'A-Za-z' 'N-ZA-Mn-za-m' - ROT13\ntr 'A-Za-z' 'N-ZA-Mn-za-m' &lt; data.txt\npassword: 7x16WNeHIi5YkIhWsfFIqoognUTyj9Q4\n</code></pre>"},{"location":"Bandit/#level-12-level-13","title":"Level 12 -&gt; Level 13","text":"<pre><code># xxd - make a hexdump or do the reverse\nxxd -r data.txt &gt; data\nfile data\n# data is a gzip compressed data\nmv data data.gz\ngzip -d data.gz\nfile data\n# data is a bzip2 compressed data\nmv data data.bz2\nbzip2 -d data.bz2\nfile data\n# data is a gzip compressed data\nmv data data.gz\ngzip -d data.gz\nfile data\n# data is GNU tar archive\nmv data data.tar\ntar -xvf data.tar\nfile data5.bin\n# data5.bin is a POSIX tar archive\nmv data5.bin data5.tar\ntar -xvf data5.tar\n# data6.bin is a bzip2 compressed data\nmv data6.bin data6.bz2\nbzip2 -d data6.bz2\nfile data6\n# data6 is a POSIX tar archive\nmv data6 data6.tar\ntar -xvf data6.tar\n# data8.bin is a gzip compressed data\nmv data8.bin data8.gz\ngzip -d data8.gz\n# data8 is a ASCII text file\ncat data8\npassword: FO5dwFsc0cbaIiH0h8J2eUks2vdTDwAn\n</code></pre>"},{"location":"Bandit/#level-13-level-14","title":"Level 13 -&gt; Level 14","text":"<pre><code># ssh user@host -i keyfile -p port\n# gain correct port\ncat /etc/ssh/sshd_config\nssh bandit14@localhost -i sshkey.private -p 2220\npassword: MU4VWeTyJk8ROof1qqmcBPaLh7lDCPvS\n</code></pre>"},{"location":"Bandit/#level-14-level-15","title":"Level 14 -&gt; Level 15","text":"<pre><code># nc - arbitrary TCP and UDP connections and listens\n# telnet - user interface to the TELNET protocol\necho \"MU4VWeTyJk8ROof1qqmcBPaLh7lDCPvS\" | nc localhost 30000\ntelnet localhost 30000\npassword: 8xCjnmgoKbGLhHFAZlGE5Tmu4M2tKJQo\n</code></pre>"},{"location":"Bandit/#level-15-level-16","title":"Level 15 -&gt; Level 16","text":"<pre><code># openssl - OpenSSL command line tool\necho \"8xCjnmgoKbGLhHFAZlGE5Tmu4M2tKJQo\" | openssl s_client -connect localhost:30001 -ign_eof \n# -ign_eof\u9632\u6b62\u6587\u4ef6EOF\u5173\u95ed\u8fde\u63a5\npassword: kSkvUpMQ7lBYyCM4GBPvCvT1BfWRy0Dx\n</code></pre>"},{"location":"Bandit/#level-16-level-17","title":"Level 16 -&gt; Level 17","text":"<pre><code># nmap - Network exploration tool and security / port scanner\nnmap -p 31000-32000 localhost\necho \"kSkvUpMQ7lBYyCM4GBPvCvT1BfWRy0Dx\" | openssl s_client -connect localhost:31790 -ign_eof\npassword: private.key\nchmod 400 private.key\nssh bandit17@localhost -i privatekey -p 2220\n</code></pre> private key <pre><code>MIIEogIBAAKCAQEAvmOkuifmMg6HL2YPIOjon6iWfbp7c3jx34YkYWqUH57SUdyJ\nimZzeyGC0gtZPGujUSxiJSWI/oTqexh+cAMTSMlOJf7+BrJObArnxd9Y7YT2bRPQ\nJa6Lzb558YW3FZl87ORiO+rW4LCDCNd2lUvLE/GL2GWyuKN0K5iCd5TbtJzEkQTu\nDSt2mcNn4rhAL+JFr56o4T6z8WWAW18BR6yGrMq7Q/kALHYW3OekePQAzL0VUYbW\nJGTi65CxbCnzc/w4+mqQyvmzpWtMAzJTzAzQxNbkR2MBGySxDLrjg0LWN6sK7wNX\nx0YVztz/zbIkPjfkU1jHS+9EbVNj+D1XFOJuaQIDAQABAoIBABagpxpM1aoLWfvD\nKHcj10nqcoBc4oE11aFYQwik7xfW+24pRNuDE6SFthOar69jp5RlLwD1NhPx3iBl\nJ9nOM8OJ0VToum43UOS8YxF8WwhXriYGnc1sskbwpXOUDc9uX4+UESzH22P29ovd\nd8WErY0gPxun8pbJLmxkAtWNhpMvfe0050vk9TL5wqbu9AlbssgTcCXkMQnPw9nC\nYNN6DDP2lbcBrvgT9YCNL6C+ZKufD52yOQ9qOkwFTEQpjtF4uNtJom+asvlpmS8A\nvLY9r60wYSvmZhNqBUrj7lyCtXMIu1kkd4w7F77k+DjHoAXyxcUp1DGL51sOmama\n+TOWWgECgYEA8JtPxP0GRJ+IQkX262jM3dEIkza8ky5moIwUqYdsx0NxHgRRhORT\n8c8hAuRBb2G82so8vUHk/fur85OEfc9TncnCY2crpoqsghifKLxrLgtT+qDpfZnx\nSatLdt8GfQ85yA7hnWWJ2MxF3NaeSDm75Lsm+tBbAiyc9P2jGRNtMSkCgYEAypHd\nHCctNi/FwjulhttFx/rHYKhLidZDFYeiE/v45bN4yFm8x7R/b0iE7KaszX+Exdvt\nSghaTdcG0Knyw1bpJVyusavPzpaJMjdJ6tcFhVAbAjm7enCIvGCSx+X3l5SiWg0A\nR57hJglezIiVjv3aGwHwvlZvtszK6zV6oXFAu0ECgYAbjo46T4hyP5tJi93V5HDi\nTtiek7xRVxUl+iU7rWkGAXFpMLFteQEsRr7PJ/lemmEY5eTDAFMLy9FL2m9oQWCg\nR8VdwSk8r9FGLS+9aKcV5PI/WEKlwgXinB3OhYimtiG2Cg5JCqIZFHxD6MjEGOiu\nL8ktHMPvodBwNsSBULpG0QKBgBAplTfC1HOnWiMGOU3KPwYWt0O6CdTkmJOmL8Ni\nblh9elyZ9FsGxsgtRBXRsqXuz7wtsQAgLHxbdLq/ZJQ7YfzOKU4ZxEnabvXnvWkU\nYOdjHdSOoKvDQNWu6ucyLRAWFuISeXw9a/9p7ftpxm0TSgyvmfLF2MIAEwyzRqaM\n77pBAoGAMmjmIJdjp+Ez8duyn3ieo36yrttF5NSsJLAbxFpdlc1gvtGCWW+9Cq0b\ndxviW8+TFVEBl1O4f7HVm6EpTscdDxU+bCXWkfjuRb7Dy9GOtt9JPsX8MBTakzh3\nvBgsyi/sN3RqRBcGU40fOoZyfAMT8s1m/uYv52O6IgeuZ/ujbjY=\n</code></pre>"},{"location":"Bandit/#level-17-level-18","title":"Level 17 -&gt; Level 18","text":"<pre><code># diff - compare files line by line\ndiff passwords.old passwords.new\npassword: x2gLTTjFwMOhQ8oWNbMN362QKxfRqGlO\n</code></pre>"},{"location":"Bandit/#level-18-level-19","title":"Level 18 -&gt; Level 19","text":"<pre><code># ssh -t command - force pseudo-tty allocation\nssh bandit18@localhost -t cat readme\npassword: cGWpMaKXVwDUNgPAVJbWYuGHVn9zl3j8\n</code></pre>"},{"location":"Bandit/#level-19-level-20","title":"Level 19 -&gt; Level 20","text":"<pre><code># \u7c7b\u4f3c\u4e8esetuid\uff0c\u8bbe\u7f6e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6743\u9650\n./bandit20-do cat /etc/bandit_pass/bandit20\npassword: 0qXahG8ZjOVMN9Ghs7iOWsCfZyXOUbYO\n</code></pre>"},{"location":"Bandit/#level-20-level-21","title":"Level 20 -&gt; Level 21","text":"<pre><code># nc - arbitrary TCP and UDP connections and listens\n# nc -l - listen for incoming connections\n# nc -l -p port - listen on port\n# use tmux to keep the connection\nnc -l -p 6666\n./suconnect 6666\n\npassword: EeoULMCra2q0dSkYj561DX7s1CpBuOBt\n</code></pre>"},{"location":"Bandit/#level-21-level-22","title":"Level 21 -&gt; Level 22","text":"<pre><code># cron - daemon to execute scheduled commands\n\ncat /etc/cron.d/cronjob_bandit22\ncat /usr/bin/cronjob_bandit22.sh\ncat /tmp/t7O6lds9S0RqQh9aMcz6ShpAoZKF7fgv\npassword: tRae0UfB9v0UzbCdn9cY0gQnds9GF58Q\n</code></pre>"},{"location":"Bandit/#level-22-level-23","title":"Level 22 -&gt; Level 23","text":"<pre><code>cat /etc/cron.d/cronjob_bandit23\ncat /usr/bin/cronjob_bandit23.sh\ncat /tmp/$(echo I am user bandit23 | md5sum | cut -d ' ' -f 1)\npassword: 0Zf11ioIjMVN551jX3CmStKLYqjk54Ga\n# easily get the next password as well\npassword: gb8KRRCsshuZXI0tUuR6ypOFjiZbf3G8\n</code></pre>"},{"location":"Bandit/#level-23-level-24","title":"Level 23 -&gt; Level 24","text":"<pre><code># similar to Level 22 -&gt; Level 23\n</code></pre>"},{"location":"Bandit/#level-24-level-25","title":"Level 24 -&gt; Level 25","text":"exit telnet <pre><code># write a script to brute force the password\n\n#!/bin/bash\n# brute force script\nfor i in {0000..9999}; do\n    echo $i\n    res=$(echo \"gb8KRRCsshuZXI0tUuR6ypOFjiZbf3G8 ${i}\" | timeout -s SIGINT 0.01 nc localhost 30002)\n    if [[ \"$res\" != *\"Wrong\"* ]]; then\n        echo \"Password found: ${i}\"\n        echo $res\n        break\n    fi\ndone\n\n# run the script\n./script.sh\npassword: iCi86ttT4KSNe1armKiwbQNmB3YJP3q4\n</code></pre>"},{"location":"Bandit/#level-25-level-26","title":"Level 25 -&gt; Level 26","text":"<pre><code># use sshkey to login will be blocked\ncat /etc/passwd | grep bandit26\n# bandit26:x:11026:11026:bandit level 26:/home/bandit26:/usr/bin/showtext\ncat /usr/bin/showtext\n# the script changes the shell to more command and exits\n# so we should resize the terminal and get into interactive mode to avoid the auto exit\nssh bandit26@localhost -p 2220 -i bandit26.sshkey\n:e /etc/bandit_pass/bandit26\npassword: s0773xxkk0MXfdqOfPRVr9L3jJBUOgCZ\n</code></pre>"},{"location":"Bandit/#level-26-level-27","title":"Level 26 -&gt; Level 27","text":"<pre><code># into vi\n:set shell=/bin/bash\n:shell\n./bandit27-do cat /etc/bandit_pass/bandit27\npassword: upsNCc7vzaRDx6oZC6GiR6ERwe1MowGB\n</code></pre>"},{"location":"Bandit/#level-27-level-28","title":"Level 27 -&gt; Level 28","text":"<pre><code>git clone ssh://bandit27-git@localhost:2220/home/bandit27-git/repo\ncat repo/README\npassword: Yz9IpL0sBcCeuG7m9uQFt8ZNpS4HZRcN\n</code></pre>"},{"location":"Bandit/#level-28-level-29","title":"Level 28 -&gt; Level 29","text":"<pre><code># similar to Level 27 -&gt; Level 28\ngit clone ssh://bandit28-git@localhost:2220/home/bandit28-git/repo\ncat repo/README.md\n\n# check git log\ngit log\n\n# check details of the commit\ngit log -p\n\npassword: 4pT1t5DENaYuqnqvadYs1oE4QLCdjmJ7\n</code></pre>"},{"location":"Bandit/#level-29-level-30","title":"Level 29 -&gt; Level 30","text":"<pre><code># similar to Level 27 -&gt; Level 28\ngit clone ssh://bandit29-git@localhost:2220/home/bandit29-git/repo\n\n# check git log\ngit log -p\n\n# check hidden branches\ngit branch -a\ngit checkout dev\ncat README.md\n\npassword: qp30ex3VLz5MDG1n91YowTv4Q8l7CDZL\n</code></pre>"},{"location":"Bandit/#level-30-level-31","title":"Level 30 -&gt; Level 31","text":"<pre><code>git clone ssh://bandit30-git@localhost:2220/home/bandit30-git/repo\ncat repo/README.md\n# just an empty file\n\n# check git log\ngit log -p\n\n# check hidden branches\ngit branch -a\n\n# check the tag\ngit tag\ngit show secret\n\npassword: fb5S2xb7bRyFmAvQYQGEqsbhVyJqhnDy\n</code></pre>"},{"location":"Bandit/#level-31-level-32","title":"Level 31 -&gt; Level 32","text":"<pre><code># wrte the demanding txt file\ngit add key.txt -f\ngit commit -m \"add key.txt\"\ngit push\n\npassword: 3O9RfhqyAlVBEZpVb6LYStshZoqoSx5K\n</code></pre>"},{"location":"Bandit/#level-32-level-33","title":"Level 32 -&gt; Level 33","text":"<pre><code># UPPERCASE SHELL\n# use $0 to get the shell\n$0\ncat /etc/bandit_pass/bandit33\n\npassword: tQdtbs5D5i2vJwkO8mEyYEyTL8izoeJ0\n</code></pre>"},{"location":"Bandit/#level-33","title":"Level 33","text":"<p>Hooraay! You have completed the Bandit challenges! \ud83c\udf89</p>"},{"location":"CA/","title":"\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784","text":""},{"location":"CA/#chapter-1","title":"Chapter 1","text":"<p>\u4e00\u4e9b\u516c\u5f0f</p> <p></p>"},{"location":"CA/#_2","title":"\u82af\u7247\u8fdb\u5316","text":"<ul> <li> <p>Moore's Law</p> </li> <li> <p>Dennard Scaling\uff08\u5fae\u7f29\uff09</p> </li> <li> <p>Post-Moore's Era</p> <ul> <li> <p>\u7ee7\u7eed\u5fae\u7f29</p> </li> <li> <p>\u5c01\u88c5\u6280\u672f</p> </li> <li> <p>\u9ad8\u6027\u80fd\u8ba1\u7b97\uff08\u5982\u91cf\u5b50\u8ba1\u7b97\uff09</p> </li> </ul> </li> <li> <p>Multi-Core parallelism</p> <ul> <li> <p>Amdahl's Law: \\(S = \\frac{1}{(1-P)+\\frac{P}{N}}\\)</p> </li> <li> <p>Data-level parallelism</p> </li> <li> <p>Task-level parallelism</p> </li> <li> <p>Instruction-level parallelism</p> </li> <li> <p>Thread-level parallelism    </p> </li> </ul> </li> </ul>"},{"location":"CA/#_3","title":"\u79cd\u7c7b","text":"<ul> <li> <p>PMD\uff08\u4fbf\u643a\u5f0f\u79fb\u52a8\u8bbe\u5907\uff09</p> </li> <li> <p>Desktop</p> </li> <li> <p>Server</p> </li> <li> <p>Cluster / WSC(warehouse-scale computer)</p> </li> <li> <p>Embedded</p> </li> </ul>"},{"location":"CA/#power-energy","title":"Power &amp; Energy","text":"<p>Power(\u529f\u7387) \u4ee3\u8868\u5355\u4f4d\u65f6\u95f4\u7684\u80fd\u91cf\u6d88\u8017\uff0c\u5355\u4f4d\u662f\u74e6\u7279</p> <p>Energy(\u80fd\u91cf) \u4ee3\u8868\u603b\u7684\u80fd\u91cf\u6d88\u8017\uff0c\u662f\u529f\u7387\u5bf9\u65f6\u95f4\u7684\u7d2f\u79ef</p> <p>\u56e0\u6b64\uff0c\u529f\u7387\u4f4e\u4e0d\u4ee3\u8868\u6700\u7ec8\u7684\u80fd\u91cf\u6d88\u8017\u4f4e</p>"},{"location":"CA/#energy-save-strategy","title":"Energy-Save Strategy","text":"<ul> <li> <p>Do nothing well</p> <p>\u5173\u95ed\u4e0d\u5fc5\u8981\u7684\u4efb\u52a1</p> </li> <li> <p>DVFS(Dynamic Voltage and Frequency Scaling)</p> <p>\u52a8\u6001\u8c03\u6574\u7535\u538b\u548c\u9891\u7387</p> </li> <li> <p>Design for typical case</p> <p>\u4e3a\u5178\u578b\u60c5\u51b5\u8bbe\u8ba1</p> </li> <li> <p>Overclocking - Turbo mode</p> <p>\u8d85\u9891\uff0c\u7f29\u77ed\u4efb\u52a1\u65f6\u95f4\u6765\u964d\u4f4e\u603b\u6d88\u8017</p> </li> </ul>"},{"location":"CA/#reliability","title":"Reliability","text":"<p>\u4e00\u4e9b\u6982\u5ff5</p> <ul> <li>MTTF(Mean Time To Failure)</li> <li>MTTR(Mean Time To Repair)</li> <li>MTBF(Mean Time Between Failure) = MTTF + MTTR</li> <li>Availability = MTTF / MTBF</li> </ul> <p>Fault -&gt; Error -&gt; Failure</p> <ul> <li> <p>Dependability V/S Redundancy</p> <ul> <li> <p>Time Redundancy</p> <p>\u591a\u6b21\u91cd\u590d\u6267\u884c\u540c\u4e00\u4e2a\u4efb\u52a1\uff0c\u6765\u907f\u514d\u9519\u8bef</p> </li> <li> <p>Resource Redundancy</p> <p>\u591a\u4e2a\u8d44\u6e90\uff0c\u5982\u591a\u4e2adisk, \u6765\u964d\u4f4e\u7cfb\u7edf\u5d29\u6e83\u7684\u6982\u7387</p> </li> </ul> </li> </ul>"},{"location":"CA/#raid","title":"RAID","text":"<p>\u6211\u7684\u8ba1\u7ec4\u7b14\u8bb0</p>"},{"location":"CA/#performance","title":"Performance","text":"<ul> <li>CPU time</li> <li>Elapsed time(Wall-clock time / Response time)</li> <li> <p>Benchmark</p> <p>Benchmark\u662f\u4e00\u79cd\u7528\u6765\u8bc4\u4f30\u8ba1\u7b97\u673a\u6027\u80fd\u7684\u65b9\u6cd5\uff0c\u901a\u5e38\u662f\u4e00\u6bb5\u7a0b\u5e8f\u6216\u8005\u4e00\u7ec4\u7a0b\u5e8f\uff0c\u7528\u6765\u6d4b\u8bd5\u8ba1\u7b97\u673a\u7684\u6027\u80fd</p> <ul> <li>SPEC(Systerm Performance Evaluation Corporation)</li> </ul> </li> </ul>"},{"location":"CA/#quantitative-principle","title":"Quantitative Principle","text":"<ul> <li> <p>Parallelism</p> <ul> <li>Amdahl's Law</li> </ul> </li> <li> <p>Locality</p> <ul> <li> <p>Temporal Locality(\u65f6\u95f4\u5c40\u90e8\u6027)</p> </li> <li> <p>Spatial Locality(\u7a7a\u95f4\u5c40\u90e8\u6027)</p> </li> </ul> </li> <li> <p>CPU Performance</p> <ul> <li> <p>\\(CPU_{time} = IC \\times CPI \\times T\\)</p> <ul> <li> <p>\\(CPI = \\frac{Cycles}{Instruction}\\)</p> </li> <li> <p>\\(T = \\frac{Seconds}{Cycle}\\)</p> </li> <li> <p>\\(IC = Instruction Count\\)</p> </li> </ul> </li> <li> <p>\\(IPC = \\frac{1}{CPI}\\)(CPU throughput)</p> </li> </ul> </li> </ul>"},{"location":"CS231n/","title":"CS 231n","text":"<p>Systematical learning Machine Learning in CV</p>"},{"location":"CS231n/#resources","title":"Resources","text":"<ul> <li>My Repository</li> <li>Official Notes</li> <li>Course Website</li> </ul>"},{"location":"CS231n/#some-newly-learned-thoughts","title":"Some newly-learned thoughts","text":""},{"location":"CS231n/#training-sets-validation-sets-test-sets","title":"Training sets, validation sets &amp; test sets","text":"<ul> <li>We should isolate the test sets with the training process, \"just test the final model at the very end\" to avoid overfitting</li> <li>Often validation sets are extracted from training sets</li> </ul>"},{"location":"CS231n/#parameters-in-linear-model","title":"Parameters in Linear Model","text":"<ul> <li>We can view the Weight Matrix as a set of templates, and the scores as the similarity between the input and the templates</li> <li>So when printing the weights, we can somehow visualize the templates we learned</li> <li>Picture below is what we learned from the CIFAR-10 dataset using SVM   </li> </ul>"},{"location":"CS231n/#svm-support-vector-machine","title":"SVM (Support Vector Machine)","text":"<ul> <li>Hinge Loss: \\(L_i = \\sum_{j\\neq y_i} \\max(0, s_j - s_{y_i} + margin)\\), so-called max-margin loss because it encourages the correct class to have a score higher than the incorrect class by at least a margin</li> <li>The hinge loss is \"easy to be satisfied\" since it only cares about the margin, not the exact value of the score (e.g. [1,0] &amp; [100,-100] both have the same loss when the margin is 1)</li> </ul>"},{"location":"CS231n/#differentiation-on-vectors","title":"Differentiation on Vectors","text":"<ul> <li>Split: Trying to do the differentiation on a smaller vector or even a single element instead of a matrix.</li> </ul> <p>For example, solving Softmax - Cross Entropy Loss: \\(x\\) is a 1-D linear vector \\(\\frac{\\partial{Loss}}{\\partial{x}}=\\frac{\\partial{Loss}}{\\partial{score}} \\frac{\\partial{score}}{\\partial{x}}= -\\frac{1}{score_i} \\frac{\\partial{score_i}}{\\partial{x_i}}=-\\frac{1}{score_i} score_i (score_i - (y_i == i))\\)</p> <ul> <li>Dimension: Use Dimension to check or gain a overview of the result.</li> </ul>"},{"location":"CS231n/#process","title":"Process","text":"<ul> <li> <p>Preprocessing matters a lot.</p> <ul> <li>Mean subtraction: Subtract the mean of the data, thus the data should be centered around the origin</li> <li>Normalization: Divide the data by the standard deviation, thus the data should be normalized to a similar scale</li> <li>PCA: Reduce the dimension of the data, thus the data should be more efficient to compute.For example, SVD etc.</li> <li>Feature extraction: Extract the features from the raw data, thus the data should be more informative to the model. For example, HOG, Color Histogram etc.</li> <li>Data Augmentation: Generate more data from the original data, thus the model should be more robust to the noise. For example, flip, rotate, crop etc.</li> </ul> </li> <li> <p>Training</p> <ul> <li>Optimization: The gradient descent, the stochastic gradient descent, the mini-batch gradient descent, the momentum, the RMSprop, the Adam etc.</li> <li>Hyparameter Debug: The learning rate, the regularization strength, the number of hidden units, the number of layers, the number of epochs, the batch size etc.</li> <li>Monitor the Process: The loss, the accuracy, the gradient, the weights, the features etc.</li> <li>Visualize the Result: The weights, the features, the templates etc.</li> </ul> </li> </ul>"},{"location":"CS231n/#assignment","title":"Assignment","text":""},{"location":"CS231n/#assignment-1","title":"Assignment 1","text":""},{"location":"CS231n/#k-nn-k-nearest-neighbors","title":"K-NN (K Nearest Neighbors)","text":"<ul> <li>No training, just memorizing the data</li> <li>In prediction, compute the Distance with every sample (Costly)</li> <li>Use K-fold cross validation to find the best K. Concretely speaking, split the training sets into K folds, and choose each as validation set, and evaluate the model finally.</li> </ul>"},{"location":"CS231n/#svm-support-vector-machine_1","title":"SVM (Support Vector Machine)","text":"<ul> <li>Hinge Loss: \\(L_i = \\sum_{j\\neq y_i} \\max(0, s_j - s_{y_i} + margin)\\)</li> <li>Regularization: \\(L = \\frac{1}{N} \\sum_i L_i + \\frac{1}{2}\\lambda |W|^2\\), where \\(\\lambda\\) is the regularization strength</li> <li> <p>Gradient Descent:</p> <ul> <li>\\(W -= \\alpha \\nabla_W L\\),</li> <li>\\(\\nabla_W L_{yi} = - \\Sigma_{j \\neq y_i}1(w_jx_i + \\Delta &gt; 0)x_i\\)</li> <li>\\(\\nabla_W L_i = 1(w_jx_i + \\Delta &gt; 0)x_i\\)</li> </ul> </li> </ul>"},{"location":"CS231n/#softmax","title":"Softmax","text":"<ul> <li>Cross Entropy Loss: \\(L_i = -\\log(\\frac{e^{score_{y_i}}}{\\Sigma_j e^{score_j}})\\)</li> <li>Gradient Descent: \\(W -= \\alpha \\nabla_W L\\), where \\(\\nabla_W L_i = -x_i(\\frac{e^{score_{y_i}}}{\\Sigma_j e^{score_j}} - 1)\\)</li> </ul>"},{"location":"CS231n/#2-layer-network","title":"2-Layer Network","text":"<ul> <li>Combination of the lessons above. Not so hard to complete.</li> <li>Softmax gradient, however, seems hard to do right? But the final implement of training 2-layer network runs well and achieves the accuray of about 50%</li> <li></li> </ul>"},{"location":"CS231n/#feature-extraction","title":"Feature Extraction","text":"<ul> <li>Color Histogram: Count the number of pixels in each color channel</li> <li>HOG (Histogram of Oriented Gradients): Count the number of gradients in each direction</li> <li>Training on raw pixel V/S on features: After extracting the features, the model can outperform the raw pixel model a lot.</li> </ul>"},{"location":"CS231n/#assignment-2","title":"Assignment 2","text":""},{"location":"CS231n/#fully-connected-neural-network","title":"Fully Connected Neural Network","text":"<ul> <li>Multi-layer packaged class</li> <li> <p>Optimization</p> <ul> <li> <p>SGD(Stochastic Gradient Descent):</p> <p>\\(W -= \\alpha \\ d_W\\) </p> <ul> <li>Simplest way (converge slowly)</li> </ul> </li> <li> <p>SGD_Momentum:</p> <p>\\(v = \\beta v - \\alpha \\ d_W\\) </p> <p>\\(W += v\\) </p> <ul> <li>Simulate the physical process as ball rolling down the hill</li> </ul> </li> <li> <p>RMSprop:</p> <p>\\(cache = \\beta cache + (1-\\beta) d_W^2\\) </p> <p>\\(W -= \\alpha \\frac{d_W}{\\sqrt{cache} + \\epsilon}\\) (\\(\\epsilon\\) avoids division by zero) </p> <ul> <li>Adjust the learning rate adaptively, but the gradient may become too small</li> </ul> </li> <li> <p>Adam:</p> <p>\\(m = \\beta_1 m + (1-\\beta_1) d_W\\) </p> <p>\\(v = \\beta_2 v + (1-\\beta_2) d_W^2\\) </p> <p>\\(mt = \\frac{m}{1-\\beta_1^t}\\) </p> <p>\\(vt = \\frac{v}{1-\\beta_2^t}\\) </p> <p>\\(W -= \\alpha \\frac{mt}{\\sqrt{vt} + \\epsilon}\\) </p> <ul> <li>Combine the advantages of RMSprop and Momentum</li> </ul> </li> </ul> </li> </ul>"},{"location":"CS231n/#normalization","title":"Normalization","text":"<ul> <li> <p>Batch Normalization:</p> <ul> <li>Normalize the input of each layer, thus the model should be more robust to the noise and the gradient should be more stable, - But the performance depends on the batch size a lot.</li> <li>Gradient reference</li> </ul> </li> <li> <p>Layer Normalization:</p> <ul> <li>Normalize the input of each sample, thus the model should be more robust to the noise and the gradient should be more stable.</li> <li>But the performance may be influenced by the feature dimensions.</li> <li>Gradient is easy. We can transpose the matrix and transform the problem into the batch normalization.</li> <li>(N,D) -&gt; (D,N)</li> </ul> </li> <li> <p>Problem: The result of my code seems somewhat strange, like normalization works worse than without normalization. I think the problem may be the learning rate or the batch size, but I have no energy to debug it. </p> </li> </ul>"},{"location":"CS231n/#dropout","title":"Dropout","text":"<ul> <li>Randomly set some neurons to zero, thus the model should be more robust to the noise and the overfitting should be avoided.</li> <li><code>mask = (np.random.rand(*x.shape) &lt; p) / p</code></li> <li><code>p</code> is the probability of keeping a neuron active, and thus the mean of the output (or mathematical expectation) should be the same as the input.</li> </ul>"},{"location":"CS231n/#convolutional-neural-network","title":"Convolutional Neural Network","text":"<ul> <li> <p>Convolution Layer</p> <ul> <li> <p>Filter</p> <ul> <li>The learned template to extract the features</li> <li>Often \\(3*3*C\\) with stride 1</li> <li>Share parameters. Using the same filter to do convolution on the whole input, thus the model should be more efficient to compute and the number of parameters should be highly reduced.</li> <li>Too large filter may lead to a linear model, and costs more memory.</li> <li>Examples of features</li> </ul> <p></p> </li> <li> <p>Padding</p> <ul> <li>Add some zeros around the input, thus the output should be the same size as the input, which is convenient for the next layer to compute.</li> <li>Avoid the information loss on edges.</li> <li>\\(P = \\frac{F-1}{2}\\), where \\(F\\) is the size of the filter and \\(S = 1\\)</li> </ul> </li> <li> <p>Pooling</p> <ul> <li>Max Pooling: \\(max(x)\\) (Popular in practice, often \\(2 * 2\\))</li> <li>Average Pooling: \\(mean(x)\\)</li> <li>Reduce the size of the input, thus the model should be more efficient to compute and the number of parameters should be highly reduced.</li> <li>Avoid the overfitting and the noise.</li> </ul> </li> <li> <p>Layer Strutcture</p> <ul> <li>Input: \\(N * C * H * W\\)</li> <li>Filter: \\(F * C * HH * WW\\)</li> <li>Output: \\(N * F * H' * W'\\)</li> <li>Activation (often Relu): \\(N * F * H' * W'\\)</li> <li>Pooling: \\(N * F * H'' * W''\\)</li> </ul> </li> </ul> </li> <li> <p>Normalization</p> <ul> <li> <p>Spatial Batch Normalization</p> <ul> <li>Similar to Batch Normalization.</li> <li><code>X = x.transpose(0, 2, 3, 1).reshape(-1, C)</code></li> </ul> </li> <li> <p>Group Normalization</p> <ul> <li>Similar to Layer Normalization.</li> <li><code>X = x.reshape(N*G, -1)</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"CS231n/#pytorch","title":"PyTorch","text":"<ul> <li>Useful tool to build the model and train the model</li> <li>Tutorial</li> <li>Docs</li> <li> <p>Structure</p> <ul> <li> <p><code>nn.Module</code></p> <ul> <li>Personalized model, more flexible</li> <li>Implement <code>forward</code> function</li> </ul> </li> <li> <p><code>nn.Sequential</code></p> <ul> <li>Simple model, just concatenate the layers</li> </ul> </li> </ul> </li> <li> <p>Optimization</p> <ul> <li><code>optim.SGD</code></li> <li><code>optim.Adam</code></li> <li><code>optim.RMSprop</code></li> <li>Backward Propagation</li> </ul> <pre><code>    optimizer.zero_grad() # clear\n\n    loss.backward()       # backpropagation\n\n    optimizer.step()      # update\n</code></pre> </li> <li> <p>Training</p> </li> </ul>"},{"location":"CS231n/#assignment-3","title":"Assignment 3","text":""},{"location":"CS231n/#visualizing","title":"Visualizing","text":"<ul> <li> <p>Salicency Maps</p> <ul> <li>A saliency map tells us the degree to which each pixel in the image affects the classification score for that image. </li> <li>To compute it, we compute the gradient of the unnormalized score corresponding to the correct class with respect to the pixels of the image.</li> <li>Or say, it visualizes the feature map of the input image.</li> </ul> </li> <li> <p>Fooling Images</p> <ul> <li>We can perform gradient ascent on the input image to maximize the class score, stopping when the network classifies the image as the target class. </li> <li>In practice, the fooling images often just looks like blurring the original image a little bit.</li> </ul> </li> <li> <p>Class Visualization</p> <ul> <li>We can also synthesize an image to maximize the classification score of a particular class </li> <li>Or say, visualizes what the network thinks various classes look like.</li> <li>Looks like AIGC images</li> </ul> </li> </ul>"},{"location":"CS231n/#rnn-captioning","title":"RNN Captioning","text":"<ul> <li> <p>Vanilla RNN</p> <ul> <li>The simplest RNN, but the gradient may vanish or explode.</li> <li>Use the hidden state to store the information of the previous time step, and use the input to update the hidden state.</li> <li> <p>\\(h_t = \\tanh(W_{hh}h_{t-1} + W_{xh}x_t)\\)</p> <p>\\(y_t = W_{hy}h_t\\)</p> </li> <li>The gradient is easy to compute, but the performance is not so good.</li> </ul> </li> <li> <p>LSTM</p> <ul> <li>The most popular RNN, with the forget gate, the input gate, the output gate.</li> <li>The gradient is easy to compute, and the performance is good.</li> <li> <p>\\(f_t = \\sigma(W_{hf}h_{t-1} + W_{xf}x_t + b_f)\\)</p> <p>\\(i_t = \\sigma(W_{hi}h_{t-1} + W_{xi}x_t + b_i)\\)</p> <p>\\(o_t = \\sigma(W_{ho}h_{t-1} + W_{xo}x_t + b_o)\\)</p> <p>\\(g_t = \\tanh(W_{hg}h_{t-1} + W_{xg}x_t + b_g)\\)</p> <p>\\(c_t = f_t \\odot c_{t-1} + i_t \\odot g_t\\)</p> <p>\\(h_t = o_t \\odot \\tanh(c_t)\\)</p> </li> </ul> </li> </ul>"},{"location":"CS231n/#transformer","title":"Transformer","text":"<ul> <li> <p>Attention Is All You Need</p> </li> <li> <p>Highly Recommend Movie By Hung-yi Lee </p> </li> <li> <p>Actually I havn't understood it well yet today, 2024.2.27</p> <p>After watching the lecture of Lee, now I got some new thoughts, 2024.2.28</p> </li> <li> <p>Structure</p> <ul> <li>Basic structure in paper:</li> </ul> <p></p> <ul> <li>Abstract structure:</li> </ul> <p></p> </li> <li> <p>Attention Mechanism</p> <ul> <li> <p>Self-Attention</p> <ul> <li>Scaled Dot-Product Attention</li> </ul> <p>\\(Attention(Q,K,V) = softmax(\\frac{QK^T}{\\sqrt{d_k}})V\\)</p> <p>Q is the query to match others, K is the key to be matched, V is the value to be extracted </p> <p></p> <ul> <li> <p>Use Dot-Product to compute the relationship between the query and the key, and use the softmax to normalize the result.</p> </li> <li> <p>Concretely, \\(Q_i\\) will be used to compute the attention score with all \\(K_j\\), and the corresponding result \\(score_{i, j}\\) will be used to compute the weighted sum of all \\(V_j\\), which is the output</p> </li> <li> <p>Finally multiply the value with the normalized result, converting the attention score to the output. </p> </li> </ul> </li> <li> <p>Multi-Head Attention</p> <ul> <li> <p>Split the input/output dimension into multiple smaller heads.</p> </li> <li> <p>Compute the attention score with multiple parallel attention mechanisms, and concatenate the result.</p> </li> </ul> <p></p> <ul> <li>Thus the model should be more expressive and the performance should be better, for multiple smller attention mechanisms can capture different features and run more efficiently.</li> </ul> </li> </ul> </li> <li> <p>Embedding</p> <ul> <li> <p>Positional Encoding</p> <ul> <li> <p>Since transformer discards the sequential information, we need to add the positional encoding to the input embedding.</p> </li> <li> <p>Just add the position embedding to the input embedding.</p> </li> </ul> <p>\\(PE(pos,\\ 2i) \\ \\ \\ \\ \\ \\ = \\sin(pos/10000^{2i/d_{model}})\\)</p> <p>\\(PE(pos,2i+1) = \\cos(pos/10000^{2i/d_{model}})\\)</p> <ul> <li>Use the sine and cosine function to encode the position information, because it's easy to add length when training length changes.</li> </ul> </li> <li> <p>Word Embedding</p> <ul> <li> <p>Use the pre-trained word embedding, or train the word embedding with the model.</p> </li> <li> <p>Similar to that of RNN.</p> </li> </ul> </li> </ul> </li> <li> <p>Other Tricks</p> <ul> <li> <p>Residual Connection</p> </li> <li> <p>Normalization</p> </li> <li> <p>Feed Forward Network</p> </li> <li> <p>Optimizer </p> </li> </ul> </li> <li> <p>Training</p> <ul> <li> <p>Input features</p> <ul> <li> <p>Embedding</p> <ul> <li>Embedding the features annd positional encoding</li> </ul> </li> <li> <p>Encoders </p> <ul> <li> <p>Multi-Head Attention</p> <ul> <li>Compute the attention score with multi-head attention, where both the query, the key and the value are derived from the input features</li> </ul> <p></p> <ul> <li>It looks like the input query with itself, or say, the input features are used to compute the attention score (relationships) with itself, so it's called self-attention. </li> </ul> </li> <li> <p>Multi-layers </p> <ul> <li>Multiple feed forward network with residual connection and normalization</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>Output words (Expected Answers)</p> <ul> <li> <p>Embedding</p> <ul> <li>Feed in the Output in parallel</li> </ul> <p>For example </p> <p>With mask, it's just like spliting a sentence into N datas where \\(O_i\\) contains the first \\(i\\) words, and is to predict the next one. </p> <p>Thus the model should be more efficient to train in parallel.</p> <ul> <li> <p>Mask</p> <ul> <li> <p>To train the model in parallel, we need to mask the future words, otherwise the model may cheat.</p> </li> <li> <p>A trilled matrix is great to mask the future words.</p> </li> </ul> </li> </ul> </li> <li> <p>Decoders</p> <ul> <li> <p>2 Multi-Head Attention</p> <ul> <li> <p>Self. </p> <p>Compute the attention score with multi-head attention, where the query, the key and the value are all derived from the output features.</p> </li> <li> <p>Combine.</p> <p>Compute the attention score with multi-head attention, where the query is derived from the output features, and the key and the value are derived from the input features.</p> </li> </ul> </li> <li> <p>Multi-layers</p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>Prediction</p> <ul> <li> <p>Output starts with a  token. <li> <p>Use the model to pick the next most possible word, and feed it back to the model.</p> </li> <li> <p>Repeat until the  token is picked. <li> <p>Some thoughts of my opnion</p> <ul> <li> <p>Compared to CNN, the transformer can access the global information, ganining the ability to capture the long-range dependencies, and thus the performance should be better.</p> </li> <li> <p>Compared to RNN, the transformer can train in parallel instead of sequentially, and thus the model should be more efficient to train.</p> </li> </ul> </li>"},{"location":"CS231n/#gan-generative-adversarial-network","title":"GAN (Generative Adversarial Network)","text":"<ul> <li> <p>Paper</p> </li> <li> <p>Structure</p> <ul> <li> <p>Generator</p> <ul> <li> <p>To generate the fake data.</p> </li> <li> <p>Viewed as a possibility distribution, trying to fit the real data distribution. </p> </li> </ul> </li> <li> <p>Discriminator</p> <ul> <li>To distinguish the real data from the fake data through learning the real data distribution.</li> </ul> </li> </ul> </li> <li> <p>Main Idea</p> <ul> <li> <p>A Min-Max Game</p> <ul> <li> <p>The generator tries to generate the fake data to cheat the discriminator</p> <p>The discriminator tries to distinguish the real data from the fake data.</p> </li> <li> \\[\\underset{G}{\\text{minimize}}\\; \\underset{D}{\\text{maximize}}\\; \\mathbb{E}_{x \\sim p_\\text{data}}\\left[\\log D(x)\\right] + \\mathbb{E}_{z \\sim p(z)}\\left[\\log \\left(1-D(G(z))\\right)\\right]\\] </li> <li> <p>The two are just like playing aganist each other, and thus both models should be trained to be better and better to \"beat\" the other one.</p> <p>Finally the generator should be able to fit the real data distribution well while the discriminator should just be fooled as a random guesser (with 50% possibility).</p> </li> <li> <p></p> <p>Black points denote real data</p> <p>Green ones denote generator distribution</p> <p>Blue ones denote output of the discriminator (possibility to be real)</p> </li> </ul> </li> </ul> </li> <li> <p>Training</p> <ul> <li> <p>Build the generator and the discriminator</p> </li> <li> <p>Key Steps</p> <ul> <li> <p>Generate the fake data using the generator</p> </li> <li> <p>Use the real-fake data loss to train the discriminator for P steps</p> <ul> <li> \\[ \\ell_D = -\\mathbb{E}_{x \\sim p_\\text{data}}\\left[\\log D(x)\\right] - \\mathbb{E}_{z \\sim p(z)}\\left[\\log \\left(1-D(G(z))\\right)\\right]\\] </li> </ul> </li> <li> <p>Use the fake data loss to train the generator for Q steps</p> <ul> <li> \\[ \\ell_G = -\\mathbb{E}_{z \\sim p(z)}\\left[\\log \\left(D(G(z))\\right)\\right]\\] </li> </ul> </li> </ul> </li> <li> <p>Important tricks on loss functions</p> <ul> <li> <p>Here we actually convert the min-max game to a min-min (mind the minus) game, because a min-max game is hard to train and may fall into a cycle.</p> </li> <li> <p>We use batch average to approximate the expectation, highly reducing the cost of computation.</p> </li> </ul> </li> <li> <p>PS: The training optimization and tricks of normal deep learning are still useful, and many so-called improved GAN models are based on these tricks.</p> </li> </ul> </li> <li> <p>Some improved models</p> <ul> <li> <p>LSGAN (Least Squares GAN)</p> <ul> <li> <p>Paper</p> </li> <li> <p>Use the least squares loss instead of the binary cross entropy loss, thus the gradient should be more stable and sharp.</p> </li> <li> \\[\\underset{G}{\\text{minimize}}\\; \\underset{D}{\\text{maximize}}\\; \\mathbb{E}_{x \\sim p_\\text{data}}\\left[(D(x)-1)^2\\right] + \\mathbb{E}_{z \\sim p(z)}\\left[D(G(z))^2\\right]\\] </li> </ul> </li> <li> <p>DC-GAN (Deep Convolutional GAN)</p> <ul> <li> <p>Paper</p> </li> <li> <p>Use the convolutional neural network to build the generator and the discriminator, bettering the performance.</p> </li> </ul> </li> <li> <p>Results on MNIST</p> </li> </ul> <p></p> </li> </ul>"},{"location":"CS231n/#self-supervised-learning","title":"Self-Supervised Learning","text":"<ul> <li> <p>Main Idea</p> <ul> <li>Use the data without labels to self-supervise the model.</li> </ul> </li> <li> <p>Contrastive Learning</p> <ul> <li> <p>Main Idea</p> <ul> <li> <p>Doing Augumentation on the input data to get a positive pair, and combine the loss of both positive pairs and negative pairs to train the model. </p> </li> <li> <p>That is, when distinguishing a totally different data, the model may easily do it by grabbing some unimportant features. So we feed them with similar data, force the model to extract the significant features.</p> </li> </ul> </li> <li> <p>SimCLR (Simple Contrastive Learning)</p> <ul> <li> <p>Paper</p> </li> <li> <p>Structure</p> <ul> <li> <p>Two branches to generate the positive pairs</p> </li> <li> <p>\\(f()\\) to extract the features</p> </li> <li> <p>\\(g()\\) to project the features, or say, a typical classifier</p> </li> <li> <p> </p> </li> </ul> </li> <li> <p>Training</p> <ul> <li> <p>Generate positive pairs (seemed quite important in training) </p> <p></p> </li> <li> <p>Feed in the batched 2*N datas, where larger N preferred</p> </li> <li> <p>Minimize the loss (Maximize the agreement)</p> <ul> <li> \\[\\ell = -\\frac{1}{2N}\\sum_{i=1}^{N}\\left[\\log\\frac{\\exp(sim(f(x_i),f(x_{i^+}))/ \\tau)}{\\sum_{j=1}^{2N} (j!=i) \\exp(sim(f(x_i),f(x_j))/ \\tau)}\\right]\\] </li> </ul> </li> </ul> </li> <li> <p>Results</p> <ul> <li> <p>Improved the performance of a pre-trained model a lot.</p> </li> <li> <p> </p> </li> </ul> </li> </ul> </li> </ul> </li> </ul>"},{"location":"Database/","title":"DataBase","text":"<p>Fork Yile Liu</p>"},{"location":"Database/#_1","title":"\u7b2c\u4e00\u7ae0 \u5f15\u5165","text":""},{"location":"Database/#_2","title":"\u6570\u636e\u5e93\u91cd\u8981\u95ee\u9898","text":"<ul> <li> <p>data persistence: \u6570\u636e\u6301\u4e45\u5316</p> </li> <li> <p>convenience in accessing data: \u65b9\u4fbf\u7684\u6570\u636e\u8bbf\u95ee</p> </li> <li> <p>data integrity: \u6570\u636e\u5b8c\u6574\u6027</p> </li> <li> <p>concurrency control for multiple user: \u591a\u7528\u6237\u5e76\u53d1\u63a7\u5236</p> </li> <li> <p>failure recovery: \u5931\u8d25\u6062\u590d</p> </li> <li> <p>security control: \u5b89\u5168\u63a7\u5236</p> </li> </ul>"},{"location":"Database/#_3","title":"\u7cfb\u7edf\u7ed3\u6784","text":"<ul> <li> <p>Physical Level: \u6570\u636e\u5728\u78c1\u76d8\u4e0a\u7684\u5b58\u50a8\u65b9\u5f0f</p> </li> <li> <p>Logical Level: \u6570\u636e\u5728\u7528\u6237\u770b\u6765\u7684\u5b58\u50a8\u65b9\u5f0f</p> </li> <li> <p>View Level: \u7528\u6237\u770b\u5230\u7684\u6570\u636e</p> </li> </ul>"},{"location":"Database/#_4","title":"\u6570\u636e\u5e93\u8bed\u8a00","text":"<ul> <li> <p>DDL (Data Definition Language)</p> <ul> <li> <p>\u6570\u636e\u5b9a\u4e49\u8bed\u8a00\uff0c\u5b9a\u4e49\u6570\u636e\u5e93\u7684\u7ed3\u6784</p> <pre><code>    create table student(\n        name varchar(20),\n        ...\n        primary key(name),\n        foreign key(name) \n    );\n</code></pre> </li> <li> <p>DDL interpreter: \u7528\u4e8e\u89e3\u91caDDL\u8bed\u53e5\uff0c\u5c06\u5176\u8f6c\u5316\u4e3a\u5185\u90e8\u6570\u636e\u7ed3\u6784</p> </li> </ul> </li> <li> <p>DML (Data Manipulation Language)</p> <ul> <li> <p>\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c</p> </li> <li> <p>Procedural DML: \u901a\u8fc7\u8fc7\u7a0b\u5316\u8bed\u8a00\u8fdb\u884c\u64cd\u4f5c</p> </li> <li> <p>Declarative DML(nonprocedural): \u901a\u8fc7\u58f0\u660e\u5f0f\u8bed\u8a00\u8fdb\u884c\u64cd\u4f5c(\u4f8b\u5982SQL\uff0c\u66f4\u52a0\u5e38\u89c1)</p> </li> <li> <p>DML compiler: \u7528\u4e8e\u89e3\u91caDML\u8bed\u53e5</p> </li> </ul> </li> <li> <p>Query Processor</p> <ul> <li>query -&gt; parse and translate -&gt; relational-algebra -&gt; optimizer -&gt; query plan -&gt; execute plan</li> </ul> </li> <li> <p>transaction management</p> <ul> <li> <p>\u4e8b\u52a1\u7ba1\u7406\uff0c\u4fdd\u8bc1\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027</p> </li> <li> <p>\u4e8b\u52a1\uff1a\u4e00\u7cfb\u5217\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c</p> </li> </ul> </li> </ul>"},{"location":"Database/#_5","title":"\u7b2c\u4e8c\u7ae0 \u6570\u636e\u5e93\u6982\u5ff5","text":""},{"location":"Database/#_6","title":"\u6982\u5ff5\u5f15\u5165","text":""},{"location":"Database/#table","title":"Table","text":"<p>\u53ef\u4ee5\u7c7b\u6bd4excel\uff0c\u6570\u636e\u5e93\u4ee5\u8868\u7684\u5f62\u5f0f\u7ec4\u7ec7\u6570\u636e\u3002\u8868\u4e2d\u7684\u4e00\u5217\u662f\u67d0\u4e00\u7c7b\u6570\u636e\uff0c\u4e00\u884c\u662f\u67d0\u4e00\u4e2a\u4e8b\u7269\u5177\u6709\u7684\u591a\u7c7b\u6570\u636e\u7684\u96c6\u5408\u3002\u4e00\u5f20\u8868\u662f\u591a\u4e2a\u96c6\u5408\u7ec4\u6210\u7684\u5927\u96c6\u5408\u3002</p> <p>\u6ce8\u610f\u6839\u636e\u96c6\u5408\u4e0d\u80fd\u6709\u76f8\u540c\u5143\u7d20\u7684\u8981\u6c42\uff0c\u4e00\u5f20\u8868\u4e2d\u4e0d\u80fd\u51fa\u73b0\u6570\u636e\u76f8\u540c\u7684\u4e24\u884c\uff0c\u4e5f\u4e0d\u80fd\u51fa\u73b0\u610f\u4e49\u76f8\u540c\u7684\u4e24\u5217\u3002\u6570\u636e\u5e93\u8bfe\u7a0b\u4e00\u822c\u4e0d\u8003\u8651\u7a7a\u96c6\u3002</p>"},{"location":"Database/#relation","title":"Relation","text":"<p>\u8868\u7684\u4e00\u884c\u662f\u67d0\u4e00\u4e2a\u4e8b\u7269\u5177\u6709\u7684\u591a\u7c7b\u5c5e\u6027\uff0c\u53cd\u8fc7\u6765\u8bf4\u591a\u7c7b\u5c5e\u6027\u7531\u67d0\u4e2a\u4e8b\u7269\u5173\u8054\u8d77\u6765\u3002\u4ece\u8fd9\u4e2a\u610f\u4e49\u4e0a\uff0c\u4e00\u4e2aRelation\u4e00\u822c\u6307\u4ee3\u4e00\u5f20Table\u3002</p> <p>Relation\u53c8\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1a</p> <ul> <li> <p>Relation Schema</p> <p>Relation Schema\u6307\u4e00\u5f20\u8868\u7684\u903b\u8f91\u8bbe\u8ba1\uff0c\u5305\u62ecTable\u7684\u540d\u5b57\uff0c\u5176\u4e2d\u6709\u54ea\u4e9bAttribute\uff0c\u6bcf\u4e2aAttribute\u5404\u81ea\u7684Domain\u7b49\u3002Relation Schema\u4e0d\u5173\u5fc3\u8868\u4e2d\u5177\u4f53\u7684\u6570\u636e\uff0c\u53ea\u5173\u5fc3\u6574\u4f53\u8bbe\u8ba1\u3002</p> <p>R = (A_1, A_2, A_3, ... A_n)</p> <p>\u4f8b\u5982\uff1aStudent(Student_ID, Name, Phone_Number), in which Student_ID supposed to be ......\u8fd9\u662f\u4e00\u4e2aRelation Schema\u3002</p> </li> <li> <p>Relation Instance</p> <p>Relation Instance\u662f\u4e00\u5f20\u8868\u4e2d\u5177\u4f53\u67d0\u51e0\u4e2a\u4e8b\u7269\uff08\u67d0\u51e0\u884c\uff09\u7684\u96c6\u5408\u3002\u51fa\u4e8e\u96c6\u5408\u7684\u5b9a\u4e49\uff0cRelation Instance\u662f\u53ef\u62c6\u5206\u7684\uff0c\u4e00\u4e2aInstance\u4ece\u4e2d\u7684\u67d0\u51e0\u884c\u7ec4\u6210\u96c6\u5408\u662f\u53e6\u4e00\u4e2a\u65b0\u7684Instance\u3002</p> <p>r(R) = {(t_1), (t_2), ... (t_n)}</p> <p>\u4f8b\u5982\uff1a{(3200102708, Liu Siri, 13588089548), (3200102706, Su Houxian, null)}\u8fd9\u662f\u4e00\u4e2aRelation Instance\u3002</p> <p>\u5173\u4e8e\u5143\u7ec4\uff1a</p> <ul> <li> <p>Tuple</p> <p>\u76f4\u8bd1\u4e3a\u5143\u7ec4\uff0c\u6307\u67d0\u4e2a\u8868\u4e2d\u7684\u4e00\u4e2a\u4e8b\u7269\uff0c\u6216\u8005\u8bf4\u4e00\u884c\u3002</p> </li> <li> <p>Attribute</p> <p>\u76f4\u8bd1\u4e3a\u5c5e\u6027\uff0c\u6307\u67d0\u4e2a\u8868\u4e2d\u7684\u67d0\u4e00\u7c7b\u6570\u636e\uff0c\u6216\u8005\u8bf4\u4e00\u5217\u3002</p> </li> <li> <p>Domain</p> <p>\u67d0\u4e2aAttribute\u7684\u53d6\u503c\u8303\u56f4\u3002</p> </li> <li> <p>Unordered Set</p> <p>\u8868\u4e2d\u7684\u884c\u662f\u65e0\u5e8f\u7684\uff0c\u5373\u8868\u4e2d\u7684\u884c\u7684\u987a\u5e8f\u4e0d\u5f71\u54cd\u8868\u7684\u5b9a\u4e49\u3002</p> </li> </ul> </li> <li> <p>Atomic</p> <p>\u6211\u4eec\u8981\u6c42\u6570\u636e\u5e93\u4e2d\u4efb\u610f\u5173\u7cfbr\uff0c\u5176Attribute\u7684Domain\u5fc5\u987b\u662fAtomic\u7684\u3002\u67d0\u4e2aDomain\u662fAtomic\u7684\u6307\u5176\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u5df2\u7ecf\u662f\u6700\u5c0f\u5355\u5143\uff0c\u4e0d\u80fd\u8fdb\u4e00\u6b65\u62c6\u5206\u3002</p> <p>\u4f8b\u5982\uff1a\u5bf9\u4e8eAttribue(Phone_Number)\uff0c\u5982\u679c\u5141\u8bb8\u591a\u4e2a\u7535\u8bdd\u53f7\u7684\u96c6\u5408\u540c\u65f6\u5b58\u50a8\u5728\u8be5\u5217\u67d0\u884c\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2aAttribute\u5c31\u4e0d\u6ee1\u8db3Atomic\uff0c\u4e8e\u662f\u8fd9\u5f20\u8868\u4e5f\u4e0d\u6ee1\u8db3\u6570\u636e\u5e93\u7684\u8bbe\u8ba1\u89c4\u8303\uff0c\u56e0\u4e3a\u4e00\u822c\u8ba4\u4e3a\u8fd9\u4e2a\u96c6\u5408\u53ef\u4ee5\u8fdb\u4e00\u6b65\u62c6\u5206\u6210\u4e00\u4e2a\u4e2a\u7535\u8bdd\u53f7\u3002</p> <p>\u4f46\u662f\u6ce8\u610f\uff0c\u4f60\u65e2\u53ef\u4ee5\u8ba4\u4e3a\u5355\u4e2a\u7535\u8bdd\u53f7\u4e3a\u4e0d\u80fd\u7ee7\u7eed\u62c6\u5206\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u8fd9\u65f6\u5b83Atomic\uff1b\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u7535\u8bdd\u53f7\u53c8\u5305\u62ec\u4e86\u56fd\u5bb6\u7f16\u7801\u3001\u533a\u53f7\u3001\u5206\u673a\u53f7\u7b49\u7b49\uff0c\u4e0d\u6ee1\u8db3Atomic\u3002</p> <p>\u56e0\u6b64Atomic\u662f\u4e00\u4e2a\u76f8\u5bf9\u7684\u6982\u5ff5\uff0c\u201c\u80fd\u4e0d\u80fd\u7ee7\u7eed\u62c6\u5206\u201d\u53d6\u51b3\u4e8e\u8bbe\u8ba1\u6570\u636e\u5e93\u7684\u5177\u4f53\u8981\u6c42\u4e0e\u4f60\u770b\u5f85\u6570\u636e\u7684\u65b9\u5f0f\u3002</p> </li> </ul>"},{"location":"Database/#key","title":"Key","text":"<p>Key\u662f\u67d0\u4e00\u4e2arelation\u4e2d\u67d0\u51e0\u4e2aattribute\u7684\u96c6\u5408\u3002\u5b83\u7684\u6bcf\u4e00\u4e2a\u5b50\u96c6\u4e5f\u90fd\u662f\u4e0d\u540c\u7684Key\u3002</p> <ul> <li> <p>Superkey</p> <p>\u5982\u679c\u5728\u67d0relation instance\u4e2d\u6839\u636e\u4e00\u4e2akey\u80fd\u591f\u5355\u72ec\u786e\u5b9a\u4e00\u4e2atuple\uff0c\u5b83\u662fSuperkey</p> <p>\u56e0\u6b64\uff0csuperkey \u53ef\u4ee5\u5f88\u5927\uff0c\u5982 \u6574\u4e2a\u5143\u7ec4\u7684\u6240\u6709\u5c5e\u6027\u5c31\u662f\u4e00\u4e2asuperkey</p> </li> <li> <p>Candidate Key</p> <p>\u5982\u679c\u4e00\u4e2aSuperkey\uff0c\u53bb\u6389\u4efb\u610f\u4e00\u4e2aattribute\u540e\u4e0d\u518d\u662fSuperkey\uff0c\u4ed6\u5c31\u662fCandidate Key</p> <p>\u5c31\u76f8\u5f53\u4e8e\u662f\u201c\u6700\u5c0f\u201d\u7684Superkey </p> </li> <li> <p>Primary Key\uff08\u9ed8\u8ba4not null\uff09</p> <p>\u4f7f\u7528\u4efb\u610fCandidate Key\u90fd\u53ef\u4ee5\u65b9\u4fbf\u7684\u67e5\u627erelation\u4e2d\u7684\u67d0\u4e2atuple\uff0c\u4f46\u662f\u4e3a\u4e86\u540c\u4e00\u64cd\u4f5c\u3001\u89c4\u8303\u63a5\u53e3\uff0c\u8bbe\u8ba1\u8005\u5e94\u8be5\u4e3a\u6bcf\u4e2arelation\u5728Candidates\u4e2d\u9009\u51fa\u4e00\u4e2a\u4f5c\u4e3aPrimary Key (a.k.a. Primary Key Constraint)\u3002</p> <p>Primary Key\u662frelation\u7684\u56fa\u6709\u5c5e\u6027\u800c\u4e0d\u4ec5\u662fattribute\u7684\u96c6\u5408\uff0c\u5730\u4f4d\u53d1\u751f\u4e86\u53d8\u5316\u3002</p> </li> <li> <p>Foreign Key Constraint</p> <p>A\u662f\u5173\u7cfb\\(r_{1}\\)\u7684\u4e00\u4e2akey\uff0c\uff08B\u662f\u5173\u7cfb\\(r_{2}\\)\u7684Primary Key\uff0c\uff09\u5982\u679cA\u4e2d\u6bcf\u4e2atuple\u90fd\u5728B\u4e2d\u90fd\u5b58\u5728\uff0c\u5c31\u79f0</p> <p>A is a foreign key from \\(r_{1}\\) referencing \\(r_{2}\\)</p> <p>\\(r_{1}\\) is the referencing relation of this foreign-key constraint and \\(r_{2}\\) Is the referenced relation</p> <p><code>foreign key A references r2(B1)</code></p> </li> </ul>"},{"location":"Database/#schema-diagram","title":"Schema Diagram","text":"<p>\u89c4\u5b9a\u67d0\u4e2arelation\u7684Primary Key\u7531\u4e0b\u5212\u7ebf\u6807\u51fa\uff1b\u6709\u5411\u7bad\u5934\u8868\u793aForeign Key Constraint\uff0c\u4ecereferencing relation\u6307\u5411referenced relation\u3002</p>"},{"location":"Database/#_7","title":"\u5173\u7cfb\u4ee3\u6570","text":""},{"location":"Database/#_8","title":"\u57fa\u7840\u64cd\u4f5c","text":"<ul> <li> <p>And Or Not(\u2227 \u2228 \u00ac)</p> </li> <li> <p>Select</p> <p>\\(\\sigma_{selection\\  predicate}(relation)\\)\uff1a\u4ecerelation\u4e2d\u9009\u51fa\u6ee1\u8db3selection predicate\u7684tuple\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684relation\u3002\u5373\u9009\u884c\u3002</p> </li> <li> <p>Project</p> <p>\\(\\Pi_{A1,A2...}(relation)\\)\uff1a\u4ecerelation\u4e2d\u9009\u51fa\u540d\u79f0\u4e3aA1\u3001A2\u2026\u2026\u7684attribute\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684relation,\u5373\u9009\u5217\u3002</p> <p>\u6ce8\u610f\u8fd9\u662f\u96c6\u5408\u64cd\u4f5c\uff0c\u56e0\u6b64\u4f1a\u81ea\u52a8\u53bb\u91cd</p> </li> <li> <p>Union\uff08\\(\\cup\\)\uff09</p> <ul> <li>\u5f85\u5408\u5e76\u7684\u4e24\u5f20\u8868\u5e94\u8be5\u5e94\u8be5\u76f8\u540c\u7684\u5c5e\u6027\u5143\u7ec4\uff08\u5373\u5c5e\u6027\u5b8c\u5168\u76f8\u540c\uff09</li> </ul> </li> <li> <p>Intersection\uff08\\(\\cap\\)\uff09</p> <ul> <li>\u5f85\u5408\u5e76\u7684\u4e24\u5f20\u8868\u5e94\u8be5\u5e94\u8be5\u76f8\u540c\u7684\u5c5e\u6027\u5143\u7ec4\uff08\u5373\u5c5e\u6027\u5b8c\u5168\u76f8\u540c\uff09</li> </ul> </li> <li> <p>Set Difference\uff08-\uff09</p> <ul> <li>\u5f85\u5408\u5e76\u7684\u4e24\u5f20\u8868\u5e94\u8be5\u5e94\u8be5\u76f8\u540c\u7684\u5c5e\u6027\u5143\u7ec4\uff08\u5373\u5c5e\u6027\u5b8c\u5168\u76f8\u540c\uff09</li> </ul> </li> <li> <p>Cartesian-Product\uff08\\(\\times\\)\uff09</p> <ul> <li> <p>\u5f00\u9500\u5f88\u5927\uff0c\u53ef\u4ee5\u60f3\u529e\u6cd5\u5148\u7528\u9009\u62e9\u6761\u4ef6\u964d\u4f4e\u8868\u5927\u5c0f\u518d\u505a\u79ef\uff08\u4e0d\u8fc7\u5e94\u8be5\u4e0d\u7528\u5f3a\u6c42\uff09</p> </li> <li> <p>\u4e24\u4e2a\u8868\u505a\u7b1b\u5361\u5c14\u79ef\uff0c\u4f1a\u83b7\u5f97 N * M \u884c</p> </li> </ul> </li> <li> <p>Join \uff08\u540e\u9762\u7ae0\u8282\u91cd\u70b9\uff09</p> <ul> <li> <p>\\(r\\bowtie_{predicate}s=\\sigma_{predicate}(r\\times s)\\)</p> </li> <li> <p>Inner Join: \\(r \\bowtie s\\)</p> </li> <li> <p>Outer Join</p> <ul> <li> <p>Left Outer Join: \\(r\\ \u27d5\\ s\\)</p> </li> <li> <p>Right Outer Join: \\(r\\ \u27d6\\ s\\)</p> </li> <li> <p>Full Outer Join: \\(r\\ \u27d7\\ s\\)</p> </li> </ul> </li> </ul> </li> <li> <p>Rename</p> <ul> <li> <p>\\(\\rho_{x(A_{1},A_{2}...)}(E)\\)</p> <p>\u5c06\u540d\u4e3aE\u7684\u8868\u91cd\u547d\u540d\u4e3ax\uff0c\u5e76\u5c06\u5176\u6bcf\u4e00\u5217\u91cd\u547d\u540d\u4e3aA1\u3001A2\u2026\u2026</p> </li> <li> <p>\u4e0b\u6807\\((A_{1},A_{2}...)\\)\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4e0d\u5199\u8fd9\u4e00\u90e8\u5206\u8868\u793a\u53ea\u6539\u8868\u540d\u4e0d\u6539\u5217\u540d\u3002</p> </li> </ul> </li> <li> <p>Assignment</p> <ul> <li> <p>\\(d\\leftarrow expression\\)</p> <p>\u5c06\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u5b58\u653e\u5728\u4e34\u65f6\u201c\u53d8\u91cf\u201dd\u4e2d\uff0c\u4ee5\u4fbf\u540e\u7eed\u590d\u7528\u3002\u8fd9\u4e2a\u64cd\u4f5c\u4e00\u822c\u7528\u4e8e\u7b80\u5316\u516c\u5f0f\u548c\u589e\u5f3a\u53ef\u8bfb\u6027\u3002</p> </li> <li> <p>\u6ce8\u610f\u6570\u636e\u5e93\u6240\u6709\u7684\u8fd4\u56de\u503c\u90fd\u662f\u8868\uff0c\u5305\u62ec\u4ee3\u6570\u64cd\u4f5c\u6216\u8005\u5355\u6307\u64cd\u4f5c\u7b49\u3002</p> </li> </ul> </li> <li> <p>Division</p> <ul> <li>let \\(r(ID,course.ID)\\) and \\(s(course.ID)\\),  then \\(r\\div s\\) gives us ID who have taken all courses in the relation \\(s\\).</li> </ul> </li> <li> <p>\u4ee3\u6570\u64cd\u4f5c</p> <ul> <li>\u5e38\u89c1\u7684\u4ee3\u6570\u64cd\u4f5c\u6709avg, min, max, sum, count\u7b49</li> </ul> </li> </ul>"},{"location":"Database/#sql","title":"\u7b2c\u4e09\u7ae0 SQL\u57fa\u7840","text":""},{"location":"Database/#sql_1","title":"SQL\u6570\u636e\u7c7b\u578b","text":"<p>char(n): \u5b9a\u957f\u4e3an\u7684\u5b57\u7b26\u4e32</p> <p>varchar(n): variable-lenth char \u6700\u5927\u957f\u5ea6\u4e3an\u7684\u53ef\u53d8\u957f\u5b57\u7b26\u4e32</p> <p>int/smallint: \u6574\u6570\u578b\uff0c\u5141\u8bb8\u7684\u6570\u636e\u8303\u56f4\u7531\u5e93\u548c\u8ba1\u7b97\u673a\u67b6\u6784\u51b3\u5b9a\u3002smallint\u5360\u636e\u7684\u7a7a\u95f4\u4e0e\u53ef\u8868\u793a\u7684\u8303\u56f4\u90fd\u5c0f\u4e8eint\u3002</p> <p>numeric(p, d): \u5341\u8fdb\u5236\u8868\u793a\uff0c\u603b\u5171\u6709p\u4f4d\uff0c\u5176\u4e2d\u5c0f\u6570\u70b9\u540e\u6709d\u4f4d\u3002\u4f8b\u5982\u5bf9numeric(3, 1)\uff0c10.5\u300101.0\u662f\u5408\u6cd5\u7684\uff0c1.05\u3001105\u30011\u90fd\u662f\u4e0d\u5408\u6cd5\u7684\u3002</p> <p>real/double precision: \u5355\u7cbe\u5ea6\u548c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\uff0c\u5927\u81f4\u5bf9\u5e94C\u8bed\u8a00\u7684float/double\u3002\u5141\u8bb8\u7684\u6570\u636e\u8303\u56f4\u7531\u5e93\u548c\u8ba1\u7b97\u673a\u67b6\u6784\u51b3\u5b9a\u3002</p> <p>float(n): \u81f3\u5c11\u6709n\u4e2a\u6570\u5b57\u7684\u6d6e\u70b9\u6570\u3002\u6ce8\u610f\u533a\u522bSQL\u7684float\u4e0e\u5e38\u89c1\u7f16\u7a0b\u8bed\u8a00\u7684float\u3002</p> <p>NULL</p> <ul> <li> <p>\u4ee3\u8868\u672a\u77e5\uff0c\u548c 0 \u4e0d\u76f8\u540c</p> </li> <li> <p>\u7279\u6b8a\u8fd0\u7b97\u89c4\u5219</p> <ul> <li> <p>and \u67090\u4e3a\u5047</p> </li> <li> <p>or \u67091\u4e3a\u771f</p> </li> <li> <p>\u6bd4\u8f83 / \u7b97\u672f\u7b49\u7ed3\u679c\u4e3aunknown</p> </li> <li> <p>not unknown = unknown</p> </li> <li> <p>where \u4e2d\u8ba4\u4e3a unknown \u4e3a false</p> </li> <li> <p>\u7b5b\u9009distinct\u65f6\uff0cnull = null</p> </li> <li> <p>NULL\u503c\u4e0d\u53c2\u4e0e\u5bf9\u5217\u7684\u4ee3\u6570\u51fd\u6570\uff0c\u4f46\u662f\u5168NULL\u7684tuple\u4f1a\u88abcount(*)\u8ba1\u6570\uff08\u76f4\u63a5\u6570\u884c\u6570\uff09\u3002\u6ca1\u6709\u975eNULL\u5143\u7d20\u65f6\u4ee3\u6570\u64cd\u4f5c\u8fd4\u56deNULL\uff0ccount( )\u8fd4\u56de0\u3002</p> </li> </ul> </li> </ul> <p>\u6ce8\u610f\uff1a\u4ee5\u4e0a\u662f\u6559\u79d1\u4e66\u4e2d\u7684\u5185\u5bb9\uff0c\u5176\u4e2dchar/varchar/int\u57fa\u672c\u5168\u4e16\u754c\u901a\u7528\uff0c\u4f46\u662f\u5176\u4ed6\u7684\u6570\u636e\u7c7b\u578b\u5728\u4e0d\u540cDBMS\u4e2d\u8bed\u6cd5\u53ca\u7528\u6cd5\u53ef\u80fd\u5404\u6709\u4e0d\u540c\u3002</p>"},{"location":"Database/#sql_2","title":"SQL\u8bed\u53e5","text":"<p>\u6240\u6709SQL\u8bed\u53e5\u4ee5\u53ca\u8868\u540d\u3001\u5217\u540d\u7b49\u6807\u8bc6\u7b26\u90fd\u662f\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7684</p> <p>\u4f46\u662f\u8868\u7684\u5185\u5bb9\uff0c\u4f8b\u5982\u5b57\u7b26\u4e32\u7b49\uff0c\u5927\u5c0f\u5199\u654f\u611f\u3002</p> <p>\u4ee5\u4e0b\u53ea\u8bb0\u5f55\u6613\u9519\u70b9\uff0c\u4e0d\u6db5\u76d6\u6240\u6709\u8bed\u6cd5\u3002</p>"},{"location":"Database/#updates-to-tables","title":"Updates to tables","text":"<ul> <li> <p><code>drop table r;</code></p> </li> <li> <p><code>alter table r add column_name data_type;</code></p> </li> <li> <p><code>alter table r drop column_name;</code></p> </li> </ul>"},{"location":"Database/#select","title":"select","text":"<p>select\u53ef\u4ee5\u7ec6\u5206\u4e3aselect all\u4e0eselect distinct\uff0c\u533a\u522b\u662f\u662f\u5426\u4e3a\u7ed3\u679c\u53bb\u91cd\uff0cselect\u4e0d\u4f7f\u7528\u540e\u7f00\u65f6\u9ed8\u8ba4\u4e3aselect all</p> <p>select\u9009\u62e9\u7684\u5185\u5bb9\u53ef\u4ee5\u662f\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982select salary/1000 from teacher; \u8fd4\u56de\u7684\u662fsalary/1000\u7684\u7ed3\u679c\u3002</p> <p>from\u5b50\u53e5\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u8868\uff0c\u7528\u9017\u53f7\u5206\u9694\uff0c\u4f8b\u5982from r1, r2, r3...\uff0c\u8fd9\u6837select\u7684\u7ed3\u679c\u5c31\u662f\u8fd9\u4e9b\u8868\u7684\u7b1b\u5361\u5c14\u79ef\u3002</p> <p>\u540e\u9762\u4e00\u822c\u6709where\u5b50\u53e5\uff0c\u7528\u4e8e\u7b5b\u9009\u8868\u4e2d\u7684\u5185\u5bb9\u3002</p> <p>\u56e0\u6b64select\u53ef\u4ee5\u6ca1\u6709from\u5b50\u53e5\uff0c\u4e00\u822c\u7528\u4e8e\u5c55\u793a\u6570\u636e\u6216\u8005\u8d4b\u503c\u5e76\u5c55\u793a\u7ed3\u679c\uff0c\u4f8b\u5982select 12345/5; \u5355\u7eaf\u6253\u5370\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u6570\u5b57</p> <p>select\u7ed3\u679c\u53ef\u4ee5\u4f7f\u7528order by ATTRIBUTE_NAME (desc/asc)\u5b50\u53e5\u6392\u5e8f\uff0cdesc/asc\u8868\u793a\u6309\u7167\u964d/\u5347\u5e8f\uff0c\u4e0d\u5199\u9ed8\u8ba4\u4e3aasc\u3002</p> <p>order by\u540e\u9762\u53ef\u4ee5\u8ddf\u591a\u4e2aattribute\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u9760\u524d\u7684\u4f18\u5148\u3002</p> <p>select 'k' from ---&gt;N\u884c \u4e00\u5217'k', \u5c5e\u6027'k'</p>"},{"location":"Database/#as","title":"as","text":"<p>as\u53ef\u4ee5\u4e3a\u540c\u4e00\u4e2a\u5bf9\u8c61\u8d4b\u4e24\u4e2a\u522b\u540d\u4ee5\u5b9e\u73b0\u81ea\u6211\u5bf9\u6bd4\uff0c\u4f46\u662f\u522b\u540d\u7684\u4f5c\u7528\u57df\u4ec5\u9650\u4e8e\u5355\u6761\u8bed\u53e5\uff0c\u5b9e\u9645\u540d\u79f0\u5e76\u4e0d\u4f1a\u88ab\u66f4\u6539.</p>"},{"location":"Database/#string","title":"string","text":"<p>SQL \u7528\u4e00\u5bf9\u5355\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\uff0c\u82e5\u8981\u5728\u5b57\u7b26\u4e32\u4e2d\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u53ef\u4ee5\u7528\u4e24\u4e2a\u5355\u5f15\u53f7\u8868\u793a\u4e00\u4e2a\u5355\u5f15\u53f7\u3002</p> <p>like\u662f\u6a21\u7cca\u641c\u7d22\u7684\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u7528 % \u8868\u793a\u4efb\u610f\u591a\u4e2a\u5b57\u7b26\uff0c\u7528 _ \u8868\u793a\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26</p> <p>\u9700\u8981\u5b57\u7b26\u4e32\u67e5\u627e\u5185\u5bb9\u672c\u8eab\u5305\u542b\u7279\u6b8a\u5b57\u7b26\u7684\uff0c\u53ef\u4ee5\u7528\u9003\u9038\u7b26\u53f7+\u8f6c\u4e49\u5b57\u7b26\uff0c\u5982\u83b7\u5f97'%' <code>'\\%' escape '\\'</code></p> <p>\u5b57\u7b26\u4e32\u5185\u5bb9\u5339\u914d\u9ed8\u8ba4\u533a\u5206\u5927\u5c0f\u5199\u3002</p>"},{"location":"Database/#set","title":"set","text":"<ul> <li> <p>set operations</p> <ul> <li> <p><code>union / intersect / except</code> \u53c8\u6709all\u548cdistinct\u4e24\u4e2a\u7248\u672c\uff0c\u533a\u522b\u662f\u7ed3\u679c\u662f\u5426\u53bb\u91cd</p> </li> <li> <p>\u4f46\u662f\u4ed6\u4eec\u9ed8\u8ba4\u4f5c\u4e3a\u96c6\u5408\u64cd\u4f5c\u662f\u53bb\u91cd\u7684\uff0c\u8fd9\u4e0eselect\u4e0d\u540c\u3002</p> </li> </ul> </li> <li> <p>set membership</p> <ul> <li><code>(not) in</code></li> </ul> </li> <li> <p>set comparison</p> <ul> <li> <p><code>some / all</code></p> </li> <li> <p>( = some) == (in) </p> </li> <li> <p>( != some) != (not in)</p> </li> <li> <p>(!= all) == (not in)</p> </li> <li> <p>( = all) != (in)</p> </li> </ul> </li> <li> <p>set empty test</p> <ul> <li><code>(not) exists</code></li> </ul> </li> <li> <p>set unique test</p> <ul> <li><code>unique</code> to check if duplicates exist</li> </ul> </li> </ul>"},{"location":"Database/#aggregate-functions","title":"aggregate functions","text":"<p><code>avg, count, min, max, sum</code></p> <p>\u805a\u96c6\u51fd\u6570\uff0c\u987e\u540d\u601d\u4e49\uff0c\u80fd\u628a\u540c\u4e00\u5217\u4e0d\u540c\u503c\u805a\u96c6\u5230\u4e00\u8d77\u5904\u7406\u4e3a\u4e00\u4e2a\u503c</p> <p>\u6ce8\u610f\uff0cwhere\u8bed\u53e5\u4e2d\u4e0d\u80fd\u4f7f\u7528\u805a\u5408\u51fd\u6570\uff0c\u53ea\u6709select\u540e\u6216having\u8bed\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528</p>"},{"location":"Database/#group-by","title":"group by","text":"<p>\u914d\u5408\u5404\u7c7b\u4ee3\u6570\u64cd\u4f5c</p> <p>group by\u5148\u4e8eselect\u8fdb\u884c\uff0c\u521b\u5efa\u4e00\u4e2a\u4ec5\u5305\u542b\u4ee3\u6570\u64cd\u4f5c\u5217\u4e0egroup by\u5217\u7684\u4e34\u65f6\u8868\uff0cselect\u64cd\u4f5c\u5728\u8fd9\u4e2a\u4e34\u65f6\u8868\u4e2d\u8fdb\u884c\u3002\u8fd9\u5e26\u6765\u4e24\u4e2a\u7279\u6027\uff1a</p> <ul> <li> <p>select...group by...\u53ef\u4ee5\u5728\u591a\u4e2a\u5217\u540d\u548c\u5217\u6570\u4e0d\u5b8c\u5168\u76f8\u540c\u7684\u8868\u4e2d\u8fdb\u884c\uff0c\u53ea\u8981\u5171\u6709\u7528\u4e8e\u4ee3\u6570\u64cd\u4f5c\u548cgroup by\u7684\u5217\u5c31\u53ef\u4ee5\u4e86\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u8868r1\u3001r2\u2026\u2026\u53ea\u8981\u5171\u6709A1\u3001A2\uff08\u7528\u4e8egroup by\uff09\u548cA3\uff08\u7528\u4e8esum\uff09\u5373\u53ef\uff0c\u5176\u4f59\u5217\u65e0\u6240\u8c13\u3002</p> <pre><code>select A1, sum(A3)\nfrom r1, r2, r3...\nwhere P group by A1, A2\n</code></pre> </li> <li> <p>\u540c\u65f6select\u4ee3\u6570\u64cd\u4f5c\u548c\u5176\u4ed6\u7684\u5217\u65f6\uff0c\u5176\u4ed6\u5217\u5fc5\u987b\u540c\u65f6\u653e\u5728group by\u91cc\u9762\uff0c\u56e0\u4e3a\u4e0d\u80fd\u9009\u62e9\u4e34\u65f6\u8868\u4e2d\u6ca1\u6709\u7684\u5217\uff0c\u5426\u5219\u5f97\u4e0d\u5230\u7406\u60f3\u4e2d\u60f3\u8981\u7684\u7ed3\u679c\uff08\u4e0d\u4e00\u5b9a\u62a5\u9519\uff09\u3002\u4e0b\u9762\u662f\u4e24\u4e2a\u9519\u8bef\u7684\u4f8b\u5b50\uff0cID\u4e0d\u80fd\u88ab\u9009\u62e9\uff1a</p> <p>\u5373group by\u4e4b\u540e\uff0c\u6bcf\u4e2agroup\u53ea\u80fd\u8f93\u51fa\u4e00\u884c\u6570\u636e</p> <pre><code>select dept_name, ID, avg (salary)\nfrom instructor\ngroup by dept_name;\n\nselect ID, max(salary) from instructor;\n</code></pre> </li> </ul>"},{"location":"Database/#where-having","title":"where / having","text":"<p>where\u5728group by\u4e4b\u524d\u8fdb\u884c\uff0c\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684tuble\u4e0d\u4f1a\u53c2\u4e0egroup by\u8fdb\u5165\u4e34\u65f6\u8868</p> <p>having\u5728group by\u4e4b\u540e\u8fdb\u884c\uff0c\u5728\u4e34\u65f6\u8868\u4e2d\u7b5b\u9009\uff08\u56e0\u6b64\u540c\u6837\u53ea\u6709group by\u4e4b\u540e\u7684\u6570\u636e\u680f\uff09\uff0c\u53ea\u8fd4\u56de\u6ee1\u8db3\u7684tuble</p> <p>\u56e0\u6b64\u5f15\u7533\u51faexists\u53ea\u80fd\u8ddfwhere\uff1b\u4ee3\u6570\u64cd\u4f5c\u505a\u6761\u4ef6\u53ea\u80fd\u8ddfhaving\uff1b\u540c\u6837\u7684\u8bed\u53e5\u5728where\u548chaving\u4e4b\u540e\u6548\u679c\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002</p>"},{"location":"Database/#with","title":"with","text":"<pre><code>with \ntemp_table_name1(attribute_name1, attibute_name2...) as (),\ntemp_table_name2(attribute_name1, attibute_name2...) as (),\n...\n</code></pre> <p>\u5efa\u7acb\u4e00\u4e2a\u4f5c\u7528\u57df\u4e3a\u4e00\u6761\u8bed\u53e5\u7684\u4e34\u65f6\u7684\u8868\u7528\u4e8e\u7b80\u5316\u903b\u8f91\u8868\u8fbe\u5f0f\u589e\u52a0\u53ef\u8bfb\u6027\u3002 \u76f8\u5f53\u4e8e\u5173\u7cfb\u4ee3\u6570\u4e2d\u7684Assignment\u3002select\u53ef\u4ee5\u4e0d\u51fa\u73b0\u3002</p>"},{"location":"Database/#delete","title":"delete","text":"<p><code>delete from table_name where ()</code></p>"},{"location":"Database/#insert","title":"insert","text":"<p><code>insert into table_name values(...)</code></p> <p><code>insert into table_name(attributes...) values(...)</code></p> <p>values \u4e5f\u53ef\u66ff\u6362\u6210\u5d4c\u5957\u5b50\u67e5\u8be2</p>"},{"location":"Database/#update","title":"update","text":"<ul> <li> <p><code>update table_name set attribute = () where ()</code></p> </li> <li> <p>\u6709\u65f6\u64cd\u4f5c\u4f1a\u5f71\u54cd\u540e\u7eed\u7684\u5224\u65ad\uff0c\u5bfc\u81f4\u975e\u5e38\u9ebb\u70e6\u7684\u62d3\u6251\u5e8f\u5904\u7406\uff0c\u56e0\u6b64\u590d\u6742\u65f6\u53ef\u4ee5\u4f7f\u7528case\u6761\u4ef6\u5224\u65ad</p> <pre><code>set () = case\n    when condition1 then value1\n    when condition2 then value2\n    ...\n    else value2\nend\n</code></pre> </li> </ul>"},{"location":"Database/#sql_3","title":"\u7b2c\u56db\u7ae0 SQL\u8fdb\u9636","text":""},{"location":"Database/#join","title":"Join","text":"<p>Join\u8bed\u53e5\u7684\u57fa\u672c\u529f\u80fd\u662f\u5c06\u4e24\u5f20\u8868\u4e2d\u7684tuple\u6309\u4e00\u5b9a\u89c4\u5219\u8fdb\u884c\u5339\u914d\uff0c\u5c06\u4ed6\u4eec\u76f8\u540c\u7684\u5217\u62fc\u8d77\u6765\uff0c\u4e0d\u540c\u7684\u5217\u5168\u90e8\u4fdd\u7559\uff0c\u5408\u6210\u4e00\u4e2a\u5927tuple\u3002</p> <p>\u5b83\u7684\u63a7\u5236\u7b26\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li> <p>Join Conditions\uff08\u63a7\u5236\u54ea\u4e00\u4e9b\u5217\u6216\u6761\u4ef6\u7528\u4e8e\u5339\u914d\u4e24\u5f20\u8868\u4e2d\u7684tuple\uff09</p> <ul> <li> <p>natural\uff1atuple\u6240\u6709\u540c\u540d\u5217\u7684\u503c\u76f8\u7b49\uff08\u9ed8\u8ba4\uff09\uff0c\u4f46\u662f\u6709\u8868\u7ed3\u6784\u672a\u77e5\u9519\u8bef\u5408\u5e76\u7684\u98ce\u9669</p> <ul> <li> <p>natural \u4f1a\u5408\u5e76\u540c\u540d\u5217\uff0c\u4e14using\u4e5f\u662f\u76f8\u5f53\u4e8e\u9ed8\u8ba4\u4e3anatural\uff08natural left join\uff0cnatural\u5728\u524d)</p> </li> <li> <p>\u5982\u679c\u6ca1\u6709\u540c\u540d\u5217\uff0c\u4f1a\u9ed8\u8ba4\u8f93\u51fa\u7b1b\u5361\u5c14\u79ef</p> </li> </ul> </li> <li> <p>using (A1, A2...)\uff1atuple\u540c\u540d\u5217\u4e2d\u6307\u5b9a\u7684\u90e8\u5206\u5217\u7684\u503c\u76f8\u7b49</p> </li> <li> <p>on <code>&lt;predicate&gt;</code> \uff1a\u6309\u7167\u7279\u5b9a\u7684\u89c4\u5219\u5339\u914d\uff0c\u4e0d\u9650\u4e8e\u540c\u540d\u5217</p> </li> </ul> </li> <li> <p>Join Types\uff08\u63a7\u5236\u5982\u4f55\u5904\u7406\u6ca1\u6709\u5339\u914d\u5bf9\u8c61\u7684tuple\uff09</p> <ul> <li> <p>Inner Join\uff1a\u6ca1\u6709\u5339\u914d\u5bf9\u8c61\u5219\u4e0d\u8fd4\u56de\uff08\u9ed8\u8ba4\uff09</p> </li> <li> <p>Left Outer Join\uff1a\u5de6\u4fa7\u8868\u7684tuple\u6ca1\u6709\u5339\u914d\u5bf9\u8c61\uff0c\u5219\u4e3a\u6269\u5c55\u7684\u5217\u586b\u5165NULL\uff0c\u4e00\u8d77\u8fd4\u56de\uff08\u5de6\u8fb9\u5143\u7d20\u4e00\u5b9a\u5b58\u5728\uff09</p> </li> <li> <p>Right Outer Join\uff1a\u53f3\u4fa7\u8868\u7684tuple\u6ca1\u6709\u5339\u914d\u5bf9\u8c61\uff0c\u5219\u4e3a\u6269\u5c55\u7684\u5217\u586b\u5165NULL\uff0c\u4e00\u8d77\u8fd4\u56de\uff08\u53f3\u8fb9\u5143\u7d20\u4e00\u5b9a\u5b58\u5728\uff09</p> </li> <li> <p>Full Outer Join\uff1a\u4e0a\u9762\u4e8c\u8005\u7684\u5e76\u96c6</p> </li> </ul> </li> </ul>"},{"location":"Database/#view","title":"View","text":"<pre><code>create view view_name(attributes...) as () \n</code></pre> <p>view\u4e00\u822c\u7531\u4e8e\u6743\u9650\u95ee\u9898\uff0c\u906e\u63a9\u90e8\u5206\u6570\u636e\u7528\u4e8e\u67e5\u627e\u4ee5\u53ca\u63a5\u53e3\uff0c\u8bed\u6cd5\u548cwith\u76f8\u540c\uff0c\u4f5c\u7528\u4e5f\u57fa\u672c\u76f8\u540c\u3002\u552f\u4e00\u7684\u533a\u522b\u662fview\u4e00\u7ecf\u5b9a\u4e49\u5219\u4e00\u76f4\u53ef\u7528\uff0c\u800cwith\u7684\u4f5c\u7528\u57df\u4ec5\u6709\u5355\u6761\u8bed\u53e5\u3002</p> <ul> <li> <p>view\u5e76\u4e0d\u662f\u5b9e\u9645\u5b58\u5728\u7684\u8868\uff0c\u6bcf\u6b21\u8c03\u7528view\u65f6\u53ea\u662f\u91cd\u590d\u8c03\u7528\u4e86\u7b5b\u9009\u7684\u6761\u4ef6\u3002\u56e0\u6b64update table\u540e\uff0c\u4e0e\u4e4b\u5173\u8054\u7684view\u4e5f\u4f1a\u6539\u53d8</p> </li> <li> <p>\u6211\u4eec\u4e00\u822c\u4e0d\u5bf9view\u8fdb\u884cupdate\uff0c\u5927\u90e8\u5206SQL\u7cfb\u7edf\u5bf9update view\u6709\u4e25\u683c\u7684\u9650\u5236\u3002</p> </li> <li> <p>\u90e8\u5206SQL\u4e5f\u652f\u6301materialize view\uff0cview\u6b64\u65f6\u662f\u4e00\u5f20\u771f\u5b9e\u5b58\u5728\u7684\u8868\uff0c\u8fd9\u4e00\u822c\u662f\u4e3a\u4e86\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\uff0c\u7269\u5316\u89c6\u56fe\u76f8\u5173\u7684\u8868\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5b83\u81ea\u5df1\u4e5f\u5fc5\u987b\u540c\u65f6\u66f4\u65b0\uff0c\u4ee5\u7ef4\u6301\u4e00\u822cview\u7684\u7279\u6027\u3002</p> </li> <li> <p>view dependecy: \u53ef\u4ee5\u5d4c\u5957\u5b9a\u4e49\uff0c\u751a\u81f3\u81ea\u6211\u9012\u5f52\u5b9a\u4e49\uff1f </p> </li> </ul>"},{"location":"Database/#index","title":"Index","text":"<pre><code>CREATE INDEX index_name ON table_name ( column1, column2.....);//\u521b\u5efa\nALTER TABLE table_name DROP INDEX index_name;//\u5220\u9664\n</code></pre> <p>\u7d22\u5f15\u7684\u539f\u7406\u7c7b\u4f3c\u4e8e\u4e66\u7684\u76ee\u5f55\uff0c\u8981\u67e5\u627e\u67d0\u4e2a\u8bcd\u4e0d\u9700\u8981\u4ece\u5934\u5f00\u59cb\u9605\u8bfb\u4e66\u7c4d\uff0c\u53ef\u4ee5\u4ece\u76ee\u5f55\u67e5\u5230\u9875\u7801\u76f4\u63a5\u8df3\u8f6c\uff0c\u4e8e\u662f\u52a0\u5feb\u4e86\u67e5\u627e\u7684\u901f\u5ea6\u3002\u5176\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u9700\u8981\u6df1\u7a76\u3002\u4e00\u4e2a\u8868\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7d22\u5f15\uff0c\u4e00\u4e2a\u7d22\u5f15\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5217\uff08\u590d\u5408\u7d22\u5f15\uff09\u3002</p> <p>\u4f46\u7d22\u5f15\u5e76\u4e0d\u662f\u5c3d\u5584\u5c3d\u7f8e\uff0c\u4f8b\u5982update\u4e4b\u540e\uff0c\u7d22\u5f15\u9700\u8981\u540c\u6b65\u7ef4\u62a4\uff1b\u540c\u65f6\u7d22\u5f15\u662f\u4e00\u79cd\u7269\u7406\u6570\u636e\u7ed3\u6784\uff0c\u6709\u989d\u5916\u7684\u7a7a\u95f4\u4e0eIO\u5f00\u9500\u3002\u4e0d\u9002\u5f53\u7684\u7d22\u5f15\u8bbe\u7f6e\u53cd\u800c\u4f1a\u964d\u4f4e\u6548\u7387\u3002</p>"},{"location":"Database/#integrity-constraint","title":"Integrity Constraint","text":"<p>\u5b8c\u6574\u6027\u7ea6\u675f\u5373\u5bf9attribute\u5185\u5bb9\u7684\u7ea6\u675f\uff0c\u4e0d\u6ee1\u8db3\u7ea6\u675f\u6761\u4ef6\u7684tuple\u4e0d\u80fd\u88ab\u63d2\u5165\u3002</p> <p>\u5bf9\u6570\u636e\u7c7b\u578b\u7684\u7ea6\u675f\u65e2\u53ef\u4ee5\u5728\u5b9a\u4e49\u8868\u65f6\u89c4\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u540e\u671f\u901a\u8fc7domain\u5173\u952e\u5b57\u589e\u5220\u6539</p> <p>\u4e00\u822c\u67094\u7c7b\u7ea6\u675f\u65b9\u6cd5\uff1a</p> <ul> <li> <p>not NULL\uff1a\u975e\u7a7a\u3002</p> </li> <li> <p>Primary Key\uff1a\u6784\u6210\u4e3b\u952e\u7684tuple\u4e0d\u80fd\u91cd\u590d\u3002</p> </li> <li> <p>Check(Predicate)\uff1a\u81ea\u5b9a\u4e49\u68c0\u67e5\u7684\u6761\u4ef6\uff0c\u5728\u6570\u636e\u8868\u6709\u6539\u53d8\u65f6\u4fbf\u4f1a\u81ea\u52a8\u68c0\u67e5\uff0c\u4f8b\u5982 <code>CHECK (semester in (\"spring\", \"autumn\") )</code>\u3002</p> </li> <li> <p>Foreign Key : \u5916\u952e\u7ea6\u675f\uff0c\uff08\u539f\u5219\u4e0a\uff0c\u53ef\u4ee5\u4e0d\u662f\uff09\u81ea\u5b9a\u7684\u82e5\u5e72\u4e2aattribute\u7ec4\u6210\u7684tuple\u4e00\u5b9a\u662ftable_name\u7684\u4e3b\u952e\u4e4b\u4e00\uff0c\u4f46\u662f\u4f3c\u4e4e\u6307\u5411\u7684\u952e\u4e00\u5b9a\u8981unique\u6216primary</p> <p><code>foreign key (attribute_name) references table_name(attribute)</code></p> </li> </ul> <p>\u7ea6\u675f\u88ab\u7834\u574f\u65f6\u7684\u5904\u7406\u65b9\u6cd5\uff1a</p> <ul> <li> <p>cascade: \u7ea7\u8054\uff0c\u66f4\u65b0\u4e0e\u5220\u9664\u7b49\u64cd\u4f5c\u8fdd\u53cd\u5b8c\u6574\u6027\u7ea6\u675f\uff0c\u4fbf\u4f1a\u5c06\u5f71\u54cd\u7684\u5b50\u6570\u636e\u4e00\u5e76\u5904\u7406\u6389\uff08\u4e00\u822c\u6ca1\u6709 insert cascade\uff09</p> <ul> <li>\u8fd8\u53ef\u4ee5set null, set default\u7b49</li> </ul> </li> <li> <p>assertion: \u65ad\u8a00\uff0calways satisfy</p> </li> <li> <p>trigger\uff1aEvents &amp; Actions</p> <ul> <li>\u6709\u6548\u4f46\u5c11\u7528</li> </ul> </li> </ul>"},{"location":"Database/#_9","title":"\u7279\u6b8a\u6570\u636e\u7c7b\u578b","text":"<ul> <li> <p>\u65f6\u95f4\u76f8\u5173</p> <ul> <li> <p>date\uff1a\u65e5\u671f</p> </li> <li> <p>time\uff1aSQL\u81ea\u5e26\u65f6\u95f4\u76f8\u5173\u7684\u7279\u6b8a\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>timestamp\uff1adate + time</p> </li> <li> <p>interval\uff1a\u65f6\u95f4\u95f4\u9694</p> </li> </ul> </li> <li> <p>\u5927\u5bf9\u8c61</p> <ul> <li> <p>large number\uff1a\u5bf9\u4e8e\u5c24\u5176\u7a7a\u95f4\u5c24\u5176\u5de8\u5927\u7684\u503c\uff0c\u4f20\u6307\u9488\u6bd4\u76f4\u63a5\u4f20\u6570\u636e\u672c\u8eab\u9ad8\u6548\u5f97\u591a\u3002\u5728\u6b64\u7406\u89e3\u5373\u53ef\u3002</p> </li> <li> <p>large-object types</p> <ul> <li> <p>blob: binary </p> </li> <li> <p>clob: character</p> </li> </ul> </li> </ul> </li> <li> <p>user-defined</p> <ul> <li>e.g. <code>create type dollar as numeric(10, 2);</code></li> </ul> </li> <li> <p>domain</p> <ul> <li>\u548c type\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u52a0\u4e0a\u7ea6\u675f\u6761\u4ef6</li> </ul> </li> </ul>"},{"location":"Database/#_10","title":"\u6743\u9650","text":"<ul> <li> <p>\u6388\u4e88/\u6536\u56de\u6743\u9650\u7684\u57fa\u672c\u8bed\u6cd5\uff1a</p> <p>\u6743\u9650\uff1a<code>select, insert, update, delete, references, all privileges</code></p> <pre><code>grant &lt;priviledge list or role name&gt; \non &lt;relation name or view name&gt; to &lt;user list&gt;;//\u6388\u4e88\n\nrevoke &lt;priviledge list or role name&gt; \non &lt;relation name or view name&gt; from &lt;user list&gt;;//\u6536\u56de\n</code></pre> </li> <li> <p>\u6743\u9650\u53ef\u4ee5\u6765\u81ea\u591a\u4e2a\u4e0a\u7ea7\u7528\u6237\uff0c\u76f8\u4e92\u53ef\u4ee5\u91cd\u53e0\uff0c\u4f8b\u5982\u6709\u4e24\u8005\u90fd\u4e3a\u7b2c\u4e09\u65b9\u6388\u4e88\u4e86\u8bfb\u53d6\u6743\u9650\uff0c\u6b64\u65f6\u5373\u4f7f\u6709\u4e00\u65b9\u64a4\u56de\u4e86\u6743\u9650\uff0c\u7b2c\u4e09\u65b9\u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u8bfb\u53d6\u3002</p> </li> <li> <p>\u6743\u9650\u53ef\u4ee5\u7ea7\u8054\u4e0b\u653e\uff0c\u4f8b\u5982A\u4e3aB\u6388\u4e88\u4e86\u67d0\u4e9b\u6743\u9650\uff0cB\u53ef\u4ee5\u7ee7\u7eed\u5411\u5176\u4ed6\u4eba\u6388\u4e88\u4e0d\u9ad8\u4e8e\u4ed6\u81ea\u5df1\u7684\u6743\u9650\u3002\u5f53A\u64a4\u56de\u5bf9B\u7684\u6743\u9650\u65f6\uff0cB\u4e0b\u653e\u7ed9\u4ed6\u4eba\u7684\u6743\u9650\u4e5f\u4f1a\u540c\u65f6\u88ab\u6536\u56de\u3002</p> </li> <li> <p>\u6743\u9650\u7684\u57fa\u672c\u5355\u4f4d\u662frelation\uff0c\u9700\u8981\u6388\u4e88\u67d0\u4e2a\u6570\u636e\u5e93\u5185\u6240\u6709relation\u7684\u6743\u9650\u65f6\u53ef\u4ee5\u4f7f\u7528 DB_name.*</p> </li> <li> <p>\u591a\u6b21\u6388\u6743\uff0c\u4e00\u6b21\u53ea\u80fd\u6536\u4e00\u4e2a</p> </li> <li> <p>public\u6536\u56de\uff0c\u6240\u6709\u975e\u7279\u6b8a\u6307\u660e\u7684\u4eba\u7684\u6743\u9650\u90fd\u88ab\u6536\u56de</p> </li> <li> <p>\u89c6\u56fe\u4e0a\u7684\u6743\u9650\u6548\u679c\u7c7b\u4f3c\uff0c\u4f46\u662f\u89c6\u56fe\u7684\u6743\u9650\u4e0d\u80fd\u83b7\u5f97\u5bf9\u57fa\u8868\u7684\u6743\u9650</p> </li> <li> <p>role</p> <ul> <li> <p>\u6709\u591a\u4e2a\u540c\u7c7b\u7528\u6237\u9700\u8981\u505a\u7edf\u4e00\u7684\u6743\u9650\u8c03\u6574\u65f6\uff0c\u5217\u51fa <code>&lt;user list&gt;</code> \u7684\u4f7f\u7528\u65b9\u5f0f\u663e\u7136\u4e0d\u4fbf\uff0c\u6b64\u65f6\u5c31\u9700\u8981role\u3002</p> </li> <li> <p>role\u662f\u6743\u9650\u7ec4\u6210\u7684\u96c6\u5408\uff0c\u53ef\u4ee5\u50cf\u9762\u5411\u4e00\u4e2a\u7528\u6237\u4e00\u6837\u8d4b\u4e88role\u5404\u79cd\u6743\u9650\uff0c\u7136\u540e\u50cf\u8d4b\u4e88\u5355\u4e2a\u6743\u9650\u4e00\u6837\u5c06role\u8d4b\u4e88\u7528\u6237\u3002\u4fee\u6539\u67d0\u4e2arole\u5bf9\u5e94\u7684\u6743\u9650\u96c6\u5408\u65f6\uff0c\u6240\u6709\u88ab\u8d4b\u4e88\u8fd9\u4e2arole\u8eab\u4efd\u7684\u7528\u6237\u6743\u9650\u90fd\u4f1a\u540c\u65f6\u88ab\u4fee\u6539\u3002</p> <pre><code>create role role_name;\ngrant &lt;priviledge list&gt; on &lt;relation name&gt; to role_name;\ngrant role_name to &lt;user list&gt;;\n</code></pre> </li> </ul> </li> </ul>"},{"location":"Database/#sql_4","title":"\u7b2c\u4e94\u7ae0 \u9ad8\u7ea7SQL","text":""},{"location":"Database/#sql-injection","title":"SQL Injection","text":"<p>SQL\u7528\u6237\u7aef\u5e38\u5e38\u9700\u8981\u5c06\u7528\u6237\u7684\u8f93\u5165\u62fc\u63a5\u4e3a\u5b8c\u6574\u7684sql\u8bed\u53e5\u3002\u501f\u52a9\u7528\u6237\u7aef\u8f93\u5165\u6846\u76f4\u63a5\u8f93\u5165\u672a\u9884\u671f\u7684sql\u6307\u4ee4\uff0c\u53c8\u7531\u4e8e\u5b57\u7b26\u4e32\u62fc\u63a5\u7684\u7f18\u6545\u8fd9\u6761\u8bed\u53e5\u80fd\u591f\u88ab\u540e\u53f0\u6267\u884c\uff0c\u8fd9\u79f0\u4e3asql\u6ce8\u5165\u3002</p> <p>\u907f\u514dsql\u6ce8\u5165\u7684\u529e\u6cd5\u662f\uff0c\u4e0d\u8981\u5c06\u7528\u6237\u7684\u8f93\u5165\u76f4\u63a5\u4f5c\u4e3a\u6570\u636e\u5e93\u8bed\u53e5\uff0c\u800c\u662f\u5957\u7528\u4e00\u5b9a\u7684\u6a21\u677f\u3002</p>"},{"location":"Database/#stored-procedure","title":"Stored Procedure","text":"<p>\u901a\u8fc7\u7528\u6237\u754c\u9762\u7684\u524d\u540e\u7aef\u6784\u5efa\u3001\u4f20\u9012\u3001\u6267\u884c\u3001\u56de\u4f20sql\u4ee3\u7801\u5e26\u6765\u5927\u91cf\u7684\u5f00\u9500\uff0c\u6240\u4ee5\u73b0\u4ee3sql\u90fd\u652f\u6301Stored Procedure\u3002\u4f60\u53ef\u4ee5\u5c06\u5b83\u7406\u89e3\u4e3a\u4e00\u79cd\u5185\u5efa\u7684\u5c0f\u578b\u7f16\u7a0b\u8bed\u8a00\uff0c\u652f\u6301if-else\u3001for\u3001while\u7b49\u7b80\u5355\u7f16\u7a0b\u903b\u8f91\uff0c\u7528\u4e8e\u6784\u9020\u6267\u884c\u4e00\u4e9bsql\u8bed\u53e5\uff0c\u6700\u7ec8\u8fd4\u56de\u7ed3\u679c\u3002sql\u8fd8\u652f\u6301function\uff0c\u4f5c\u7528\u4e0e\u4e4b\u57fa\u672c\u7c7b\u4f3c\u3002</p> <p>\u56e0\u4e3a\u5b83\u4eec\u662f\u5185\u5efa\u7684\uff0c\u4e14\u5927\u591a\u91c7\u7528\u7c7b\u4f3cC\u8bed\u8a00\u7684\u7f16\u8bd1\u6267\u884c\u65b9\u5f0f\uff0c\u6027\u80fd\u5f80\u5f80\u8fdc\u9ad8\u4e8e\u5728\u7528\u6237\u7aef\u62fc\u63a5\u5b57\u7b26\u4e32\u6784\u5efa\u5e76\u6267\u884csql\u8bed\u53e5\u3002</p> <p>Stored Procedure\u4e0efunction\u4e2d\u8fd8\u53ef\u4ee5\u521b\u5efacursor\uff0c\u4ee5\u5b8c\u6210\u4e00\u4e9b\u590d\u6742\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>create procedure\ndept_count_proc (in dept_name varchar(20), out d_count integer)\nbegin\nselect count(*) into d_count\nfrom instructor\nwhere instructor.dept_name = dept_count_proc.dept_name\nend\n\ndeclare d_count integer;\ncall dept_count_proc('physics', d_count)\n</code></pre>"},{"location":"Database/#trigger","title":"Trigger","text":"<p>trigger\u662f\u5728\u6ee1\u8db3\u67d0\u4e9b\u6761\u4ef6\u540e\u81ea\u52a8\u6267\u884c\u7684sql\uff0c\u53ef\u4ee5\u89c6\u4e3a\u5bf9\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u76d1\u89c6\u6216\u8005\u8bf4\u526f\u4f5c\u7528\u3002\u4f46\u662f\u73b0\u4ee3sql\u6570\u636e\u5e93\u6d41\u884c\u7684\u98ce\u683c\u662f\u4e0d\u5199trigger\u3002</p>"},{"location":"Database/#_11","title":"\u7b2c\u516d\u7ae0 \u6570\u636e\u5e93\u8bbe\u8ba1\u8303\u5f0f\u4e00","text":"<p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecdEntity-Relationship Model\u8bbe\u8ba1\u65b9\u5f0f\u3002\u4e0d\u540c\u4e8e\u76f4\u63a5\u5efa\u8868\u7684\u505a\u6cd5\uff0c\u5b9e\u9645\u5f00\u53d1\u4e2d\u6211\u4eec\u66f4\u559c\u6b22\u5148\u7528entity\u548crelationship\u4e24\u7c7b\u6982\u5ff5\u6784\u5efa\u903b\u8f91\u5173\u7cfb\uff0c\u518d\u5efa\u8868\u3002</p> <ul> <li> <p>Entity\u7684\u6bcf\u4e00\u884c\u5e94\u8be5\u662f\u4e00\u4e2a\u5b9e\u4f53\uff0c\u4f8b\u5982\u5b66\u751f\u4fe1\u606f\u8868\uff0c\u6559\u5e08\u4fe1\u606f\u8868\u3002</p> </li> <li> <p>Relation\u7684\u6bcf\u4e00\u884c\u662f\u591a\u4e2a\u5b9e\u4f53\u95f4\u7684\u67d0\u79cd\u5173\u8054\uff0c\u4f8b\u5982\u5bfc\u5e08-\u5b66\u751f\u5173\u7cfb\u8868\u3002</p> </li> </ul>"},{"location":"Database/#design-phases","title":"Design phases","text":"<ul> <li> <p>Initial phase: </p> <ul> <li>\u4e86\u89e3\u7528\u6237\u9700\u6c42\uff0c\u786e\u5b9a\u6570\u636e\u5e93\u7684\u76ee\u6807</li> </ul> </li> <li> <p>Second phase: </p> <ul> <li>\u9009\u62e9\u4e00\u4e2a\u6570\u636e\u6a21\u578b\uff0c\u8bbe\u8ba1\u6570\u636e\u5e93\u7684\u6982\u5ff5\u7ed3\u6784</li> </ul> </li> <li> <p>Final phase: </p> <ul> <li>\u5c06\u6982\u5ff5\u7ed3\u6784\u8f6c\u5316\u4e3a\u7269\u7406\u6570\u636e\u5e93\u6a21\u5f0f\uff0c\u5373\u5efa\u8868</li> </ul> </li> </ul>"},{"location":"Database/#design-alternatives","title":"Design Alternatives","text":"<ul> <li> <p>Redundancy</p> <ul> <li>\u6570\u636e\u5197\u4f59\uff0c\u5373\u540c\u4e00\u6570\u636e\u5728\u591a\u4e2a\u5730\u65b9\u91cd\u590d\u51fa\u73b0\u3002\u5197\u4f59\u6570\u636e\u7684\u5b58\u5728\u8fd8\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u589e\u52a0\u4e86\u6570\u636e\u7684\u4fee\u6539\u96be\u5ea6\u3002</li> </ul> </li> <li> <p>Incompleteness</p> <ul> <li>\u7cfb\u7edf\u4e0d\u5b8c\u6574\uff0c\u5bfc\u81f4\u67d0\u4e9b\u529f\u80fd\u65e0\u6cd5\u5b9e\u73b0\u3002</li> </ul> </li> </ul>"},{"location":"Database/#e-r-diagram","title":"E-R Diagram","text":"<ul> <li> <p>Entity</p> <ul> <li> <p>\u7531\u591a\u4e2a\u5c5e\u6027 Attribute \u6784\u6210\uff0c\u5c5e\u6027\u7684\u53d6\u503c\u8303\u56f4\u662f Domain</p> </li> <li> <p>\u7528\u5b9e\u4f53\u96c6\u7684\u5916\u5ef6 extension \u8868\u793a\u5b9e\u9645\u7684\u5b9e\u4f53\u96c6\u5408</p> </li> </ul> </li> <li> <p>Attribute</p> <ul> <li> <p>\u590d\u5408\uff1a\u7528\u7f29\u8fdb\u8868\u8fbe\u5c42\u7ea7\u5173\u7cfb</p> </li> <li> <p>\u591a\u503c\uff1a\uff08\u540c\u4e00\u4e2a\u5c5e\u6027\u53ef\u80fd\u6709\u591a\u4e2a\u53d6\u503c\uff09\u7528\u5927\u62ec\u53f7\u8868\u793a</p> </li> <li> <p>\u6d3e\u751f\uff1a\uff08\u53ef\u7531\u5176\u4ed6\u5c5e\u6027\u63a8\u5bfc\u51fa\u6765\uff09\u5728\u540e\u65b9\u52a0\u4e0a\u62ec\u53f7\u62bd\u8c61\u4e3a\u51fd\u6570</p> </li> </ul> </li> <li> <p>Entity-Relation</p> <p>\u83f1\u5f62\u8868\u793a\uff0c\u5176\u4e2d\u7684\u6587\u5b57\u662fRelationship\u7684\u540d\u5b57\uff0c\u5b9e\u4f53\u95f4\u7684\u8fd9\u79cd\u5173\u8054\u79f0\u4e3a \u53c2\u4e0e\u8054\u7cfb\u96c6R\uff08participation\uff09</p> <ul> <li> <p>\u5ea6 \uff08Degree\uff09</p> <p>\u53c2\u4e0e\u8054\u7cfb\u96c6\u7684\u5b9e\u4f53\u96c6\u7684\u4e2a\u6570</p> <p>\u4e00\u822c\u4e8c\u5143\u5173\u7cfb\uff08binary\uff09\u4e3a\u4e3b\uff0c\u6709\u65f6\u6709\u4e09\u5143\u5173\u7cfb\uff0c\u518d\u591a\u5143\u4e0d\u5e38\u89c1</p> </li> <li> <p>\u989d\u5916\u5c5e\u6027(Discriptive Attribute)</p> <p>\u7528\u65b9\u6846 + \u865a\u7ebf\u8868\u793a</p> <p></p> </li> <li> <p>Role</p> <p>Role\u662f\u8fde\u7ebf\u6216\u8005\u7bad\u5934\u7684\u6807\u7b7e\u3002</p> <p>\u5173\u7cfb\u5bf9\u5e94\u7684Entities\u5e94\u8be5\u662f\u552f\u4e00\u7684\uff0c\u5f53\u5173\u7cfb\u4e0e\u67d0\u4e2a\u5b9e\u4f53\u6709\u591a\u91cd\u903b\u8f91\u8054\u7cfb (Recursive) \u65f6\u5c31\u9700\u8981\u4e3a\u8868\u8fbe\u903b\u8f91\u8054\u7cfb\u7684\u7ebf\u6216\u7bad\u5934\u52a0\u4e0a\u6807\u7b7e\u4f5c\u4e3a\u533a\u5206\u3002</p> <p></p> </li> <li> <p>Mapping Cardinality Constraints\uff08\u6620\u5c04\u57fa\u6570\u7ea6\u675f\uff09</p> <p>\u7bad\u5934\u8868\u793a\u201c\u4e00\u201d\uff0c\u76f4\u7ebf\u8868\u793a\u201c\u591a\u201d</p> <p>\u591a\u5173\u7cfb\u65f6\u53ea\u5141\u8bb8\u81f3\u591a\u4e00\u4e2a\u7bad\u5934\u907f\u514d\u6b67\u4e49</p> <ul> <li> <p>One-to-One\uff1a\u53cc\u5411\u5355\u76f4\u7ebf\u7bad\u5934</p> </li> <li> <p>One-to-Many\uff1a\u5355\u5411\u5355\u76f4\u7ebf\u7bad\u5934</p> </li> <li> <p>Many-to-One\uff1a\u5355\u5411\u5355\u76f4\u7ebf\u7bad\u5934</p> </li> <li> <p>Many-to-Many\uff1a\u5355\u76f4\u7ebf</p> </li> <li> <p>Participation Constraints</p> <ul> <li> <p>total participation</p> <p>\u6bcf\u4e2a\u5b9e\u4f53\u81f3\u5c11\u53c2\u4e0e\u4e00\u4e2a\u5173\u7cfb</p> <p>\u7528\u53cc\u76f4\u7ebf+\u53cc\u76f4\u7ebf\u6846\u83f1\u5f62\u8868\u793a</p> </li> <li> <p>partial participation</p> <p>\u5355\u76f4\u7ebf</p> </li> <li> <p>More accurate notation</p> <p>\u5728\u5355\u76f4\u7ebf\u4e0a\u4f7f\u7528\u6570\u5b57\u6807\u6ce8 min...max</p> <p></p> </li> </ul> </li> </ul> </li> <li> <p>Primary Key</p> <p></p> </li> <li> <p>Weak Entity Set</p> <p>\u6ca1\u6709\u72ec\u7acb\u4e3b\u952e\u7684Entity Set\u79f0\u4e3aWeak\uff0c\u5b83\u4e00\u822c\u662f\u4e3a\u4e86\u589e\u52a0\u590d\u7528\u6027</p> <ul> <li> <p>\u8981\u6c42\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u975eWeak\u7684Identifying Entity Set\uff0c\u901a\u8fc7\u4e00\u4e2a\u5b8c\u5168\u53c2\u4e0e\u7684\u3001\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u6307\u8ba4Weak Entity Set\u4e2d\u7684\u5143\u7d20\uff0c\u8fd9\u4e2a\u5173\u7cfb\u5c31\u79f0\u4e3aIdentifying Relationship\u3002</p> </li> <li> <p>\u5f31\u5b9e\u4f53\u96c6\u7684\u5c5e\u6027\u4e2d\u4e0eIdentifying Relationship\u76f8\u5173\u7684\u5c5e\u6027\u79f0\u4e3aDiscriminator (partial key, \u9700\u8981\u627e\u4e00\u4e2a\u5f3a\u5b9e\u4f53\u96c6\u7684\u952e\u4e00\u540c\u6784\u6210\u4e3b\u952e)</p> <p>\u4f8b\u5982\u4e0b\u56fe\u4e2dsection\u7684\u4e3b\u952e\u4e3a (course_id, sec_id, semester, year) \u3002</p> </li> </ul> <p></p> <p>\uff08\u753bE-R\u56fe\u65f6\uff0c\u865a\u5b9e\u4f53\u7528\u53cc\u7ebf\u77e9\u5f62\uff0cDiscriminator\u7528\u865a\u4e0b\u5212\u7ebf\uff0c\u56e0\u4e3a\u8fd9\u662f\u5b8c\u5168\u53c2\u4e0e\u5173\u7cfb\uff0c\u7528\u53cc\u7ebf\u83f1\u5f62\u6807\u8bb0\u5173\u7cfb\uff0c\u540c\u65f6\u5f31\u5b9e\u4f53\u96c6\u4e00\u4fa7\u5fc5\u987b\u5b8c\u5168\u53c2\u4e0e\uff0c\u6240\u4ee5\u7528\u53cc\u7ebf\u8fde\u63a5\uff09</p> </li> <li> <p>\u91cd\u590d\u5c5e\u6027\u53ef\u4ee5\u901a\u8fc7relation\u6d88\u9664\u5197\u4f59</p> <p></p> </li> </ul> </li> </ul>"},{"location":"Database/#e-r","title":"\u7279\u6b8a\u7684E-R\u56fe","text":"<ul> <li> <p>\u53ef\u4ee5\u7ee7\u627f\uff08Top-Down \u7279\u5316 / Bottom-Up\u6982\u5316\uff09</p> <p></p> <ul> <li> <p>Overlapping: \u53ef\u91cd\u53e0\uff0c\u5373\u4e00\u4e2a\u5b9e\u4f53\u53ef\u4ee5\u540c\u65f6\u5c5e\u4e8e\u591a\u4e2a\u7c7b\u522b</p> <p>\uff08\u65e2\u662fstudent\uff0c\u4e5f\u662femployee\uff09</p> </li> <li> <p>Disjoint\uff1a\u4e0d\u76f8\u4ea4\uff0c\u5373\u4e00\u4e2a\u5b9e\u4f53\u53ea\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u7c7b\u522b</p> <p>\uff08\u53ea\u80fd\u662finstructor\u6216\u8005secretary\u4e00\u79cd\u8eab\u4efd\uff09</p> </li> </ul> <p>\u51cf\u5c11\u4e86\u5197\u4f59\u4fe1\u606f\uff0c\u4f46\u662f\u589e\u52a0\u4e86\u67e5\u8be2\u7684\u590d\u6742\u5ea6\uff08\u9700\u8981\u591a\u8868\u7684\u7b1b\u5361\u5c14\u79ef\uff09</p> </li> <li> <p>\u53ef\u4ee5\u805a\u5408\uff08Aggregation\uff09</p> <ul> <li>\u5c06\u4e00\u4e2a\u90e8\u5206\u7ec4\u5408\u6210\u4e00\u4e2a\u6574\u4f53\uff0c\u51cf\u5c11\u5173\u7cfb</li> </ul> </li> </ul> <p>\u4e24\u8005\u4e00\u822c\u90fd\u662f\u4e3a\u4e86\u51cf\u5c11\u5197\u4f59\uff0c\u4f46\u8fd9\u90fd\u53ea\u662f\u7279\u6b8a\u903b\u8f91\u5173\u7cfb\u7684\u7b80\u5316\u8868\u8fbe\uff0c\u5e76\u4e0d\u5e38\u89c1\uff0c\u5b8c\u5168\u53ef\u4ee5\u7528\u5e38\u89c4\u7684\u56fe\u4ee3\u66ff</p>"},{"location":"Database/#reduction-to-relational-schemas","title":"Reduction to Relational Schemas","text":"<p>\u6839\u636eE-R\u56fe\u5efa\u7acb\u6570\u636e\u5e93\u8868\u7ed3\u6784\uff0c\u4e0b\u9762\u4e3a\u63a8\u8350\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u4f46\u662f\u9014\u5f84\u5e76\u4e0d\u552f\u4e00\u3002</p> <ul> <li> <p>Entity</p> <ul> <li> <p>\u6bcf\u4e2a\u5b9e\u4f53\u81f3\u5c11\u4e00\u5f20\u8868</p> </li> <li> <p>\u590d\u5408\u5c5e\u6027\u6241\u5e73\u5316(\u9009\u62e9\u7ea7\u522b\u6700\u5e95\u5c42\u7684)</p> </li> <li> <p>\u591a\u503c\u5c5e\u6027\u5355\u72ec\u5efa\u8868\uff0c\u5916\u952e\u8fde\u56de\u53bb</p> </li> </ul> </li> <li> <p>Relationship</p> <ul> <li> <p>\u5e26\u989d\u5916\u5c5e\u6027\u7684Relationship\u5355\u72ec\u5efa\u8868</p> </li> <li> <p>Many to Many\u5fc5\u987b\u5355\u72ec\u5efa\u8868</p> </li> <li> <p>One to Many\u5728Many\u4fa7\u52a0\u4e0aOne\u7684\u4e3b\u952e\uff0c\u5916\u952e\u8fde\u56de\u53bb</p> </li> <li> <p>One to One\u4efb\u9009\u4e00\u4fa7\u4f5c\u4e3a\u4e0a\u9762\u60c5\u51b5\u4e2d\u7684Many\uff0c\u540c\u4e0a</p> </li> </ul> </li> </ul>"},{"location":"Database/#_12","title":"\u7b2c\u4e03\u7ae0 \u6570\u636e\u5e93\u8bbe\u8ba1\u8303\u5f0f\u4e8c","text":"<p>\u5982\u679c\u8bf4\u524d\u4e00\u7ae0\u8282\u63cf\u8ff0\u4e86\u5982\u4f55\u5efa\u7acb\u4e00\u4e2a\u8868\uff0c\u90a3\u4e48\u672c\u7ae0\u5c06\u7740\u91cd\u4e8e\u5982\u4f55\u6839\u636e\u51fd\u6570\u4f9d\u8d56\u5224\u65ad\u4e00\u5f20\u8868\u7684\u597d\u574f\uff0c\u4ee5\u53ca\u5982\u4f55\u62c6\u5206\u4e00\u5f20\u8868</p>"},{"location":"Database/#function-dependency","title":"Function Dependency","text":"<p>\u524d\u9762\u8bf4\u5230\u6d3e\u751f\u5c5e\u6027\u53ef\u4ee5\u7406\u89e3\u4e3a\u51fd\u6570\uff0c\u91cd\u70b9\u5728\u4e8e\u4e00\u5bf9\u4e00\u7684\u6620\u5c04\u5173\u7cfb\u3002\u76f8\u540c\u7684A\u4e00\u5b9a\u6709\u76f8\u540c\u7684B\uff0c\u8bb0\u4e3a\\(A\\rightarrow B\\)\uff0cA\u53ef\u4ee5\u662fB\u7684\u4e00\u4e2a\u4e3b\u7801\uff0cB\u53ef\u4ee5\u89c6\u4e3aA\u7684\u6d3e\u751f\u5c5e\u6027\uff0c\u6216\u8005\u8bf4B\u662fA\u7684\u51fd\u6570\u4f9d\u8d56\u3002</p> \\[tuple \\ t_1, t_2 \\in r, t_1[A] = t_2[A] \\Rightarrow t_1[B] = t_2[B]\\] <p>\u51fd\u6570\u4f9d\u8d56\u53ef\u4ee5\u6839\u636e\u96c6\u5408\u5173\u7cfb\u5206\u4e3a\u4e0b\u97623\u7c7b\uff1a</p> <ul> <li> <p>\u5b8c\u5168\u51fd\u6570\u4f9d\u8d56\uff1a A\u7684\u4efb\u4f55\u4e00\u4e2a\u771f\u5b50\u96c6\uff0c\u6216\u8005\u8bf4\u53bb\u6389\u4efb\u4f55\u4e00\u4e2a\u5217\u4e4b\u540e\uff0c\u5bf9B\u4e0d\u6784\u6210\u51fd\u6570\u4f9d\u8d56\uff0c\u5219\u79f0\u5176\u4e3a\u5b8c\u5168\u51fd\u6570\u4f9d\u8d56\uff0c\u53cd\u4e4b\u4e3a\u90e8\u5206\u51fd\u6570\u4f9d\u8d56\u3002</p> </li> <li> <p>\u4f20\u9012\u51fd\u6570\u4f9d\u8d56\uff1a \u663e\u7136\u51fd\u6570\u4f9d\u8d56\u5177\u6709\u4f20\u9012\u6027\u3002\u901a\u8fc7\u4f20\u9012\u95f4\u63a5\u5f97\u5230\u7684\u4f9d\u8d56\u79f0\u4e3a\u4f20\u9012\u4f9d\u8d56\uff0c\u4f8b\u5982closure\u4e2d\\(A\\rightarrow B\\)\u3002</p> </li> <li> <p>Trival\u5e73\u51e1\u51fd\u6570\u4f9d\u8d56\uff1a     $$     In\\ general,\\ A\\rightarrow B\\ is\\ trival\\ if\\ B\\subseteq A.\\     For\\  example,\\ (ID,\\ name)\\rightarrow name.     $$</p> </li> </ul> <p>\u5bf9\u51fd\u6570\u4f9d\u8d56\u7ec4\u6210\u7684\u96c6\u5408F\uff0c\u82e5\u4e00\u4e2arelation\u6ee1\u8db3F+\u4e2d\u7684\u6240\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u79f0\u4e3a\uff1a</p> <ul> <li> <p>R(relation schema) holds on F</p> </li> <li> <p>r(relation instance) satisfyies F</p> </li> </ul> <p>\u5bf9R holds on F\uff0c\u53d6R1\u4e3aR\u7684\u4e00\u4e2a\u5b50\u96c6\uff0cF\u4e2d\u5de6\u53f3\u4e24\u4fa7\u7684\u5c5e\u6027\u90fd\u5728R1\u4e2d\u7684\u51fd\u6570\u4f9d\u8d56\u7ec4\u6210\u7684\u96c6\u5408\u79f0\u4e3aF\u5728R1\u4e0a\u7684\u6295\u5f71\u3002</p>"},{"location":"Database/#closure-of-function","title":"Closure of Function","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u7531\u51fd\u6570\u4f9d\u8d56\u7ec4\u6210\u7684\u96c6\u5408\\(F\\)\uff0c\u5b83\u4e0e\u5b83\u7684\u6240\u6709\u63a8\u8bba\u7ec4\u6210\u7684\u96c6\u5408\u79f0\u4e3aClosure of F\uff0c\u8bb0\u4e3a\\(F^+\\)\uff0c\u4f8b\u5982\uff1a $$ F(A\\rightarrow B,\\ B\\rightarrow C)\\ F^+(A\\rightarrow B,\\ B\\rightarrow C,\\ A\\rightarrow C, AB \\rightarrow C ...) $$</p> <p>\u627e\u51fd\u6570\u95ed\u5305\u4e00\u822c\u662fArmstrong's Axioms\u4e09\u6761\u8f6e\u7740\u5957\uff1a(Sound(\u6709\u6548) &amp; Complete(\u5b8c\u5907))</p> <p>\u4e66\u4e0a\u7b97\u6cd5\uff1a\u5148\u7528\u81ea\u53cd\u5f8b\u548c\u589e\u8865\u5f8b\u6dfb\u52a0\u65b0\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u518d\u7528\u4f20\u9012\u5f8b\u8fde\u63a5</p> <p></p> <p></p>"},{"location":"Database/#closure-of-attribute","title":"Closure of Attribute","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u7531\u5c5e\u6027\u7ec4\u6210\u7684\u96c6\u5408\\(A\\)\uff0c\u5b83\u7531\u51fd\u6570\u96c6\\(F\\)\u4e2d\u7684\u4f9d\u8d56\u5173\u7cfb\u80fd\u591f\u5173\u8054\u7684\u5c5e\u6027\u7ec4\u6210\u7684\u96c6\u5408\u79f0\u4e3aClosure of A under F\uff0c\u8bb0\u4e3a\\(A^+\\)</p> <p>\u7b97\u6cd5\uff1a\u6bcf\u6b21\u679a\u4e3e\u6240\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u82e5\u6ee1\u8db3\u5de6\u4fa7\u6761\u4ef6\u5219\u5c06\u53f3\u4fa7\u5c5e\u6027\u52a0\u5165\u95ed\u5305\uff0c\u76f4\u5230\u95ed\u5305\u4e0d\u518d\u589e\u5927</p> <p>\u5c5e\u6027\u7684\u95ed\u5305\u7684\u4f5c\u7528\u6709\uff1a</p> <ul> <li> <p>\u9a8c\u8bc1\u4e00\u7ec4\u5c5e\u6027\u662f\u5426\u662fsuperkey\uff08\u5b83\u7684\u95ed\u5305\u662f\u5426\u5305\u542b\u6240\u6709\u5c5e\u6027\uff09</p> </li> <li> <p>\u9a8c\u8bc1\u4e00\u7ec4\u5c5e\u6027\u662f\u5426\u662fcandidate key\uff08\u5b83\u7684\u771f\u5b50\u96c6\u7684\u95ed\u5305\u662f\u5426\u5305\u542b\u6240\u6709\u5c5e\u6027\uff09</p> </li> <li> <p>\u9a8c\u8bc1\u51fd\u6570\u4f9d\u8d56\u662f\u5426\u6210\u7acb\uff08\u4f9d\u8d56\u5c5e\u6027\u662f\u5426\u5728\u88ab\u4f9d\u8d56\u5c5e\u6027\u7684\u95ed\u5305\u4e2d\uff09</p> </li> <li> <p>\u627e\u51fd\u6570\u7684\u95ed\u5305\uff08\u904d\u5386\u5c5e\u6027\u7684\u5b50\u96c6\uff0c\u6328\u4e2a\u627e\u95ed\u5305\uff0c\u95ed\u5305\u4e2d\u591a\u51fa\u6765\u7684\u5c5e\u6027\u5c31\u5bf9\u539f\u5c5e\u6027\u6784\u6210\u4f9d\u8d56\uff09</p> </li> </ul>"},{"location":"Database/#canonical-cover","title":"Canonical Cover","text":"<ul> <li> <p>Redundancy</p> <ul> <li> <p>\u5728\u4e00\u4e2a\u51fd\u6570\u4f9d\u8d56\u96c6\u4e2d\uff0c\u5982\u679c\u67d0\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\u53ef\u4ee5\u7531\u5176\u4ed6\u4f9d\u8d56\u63a8\u5f97\uff0c\u90a3\u4e48\u4ed6\u5c31\u662f\u5197\u4f59\u7684\u3002</p> </li> <li> <p>\u5728\u5355\u4e2a\u4f9d\u8d56\u5173\u7cfb\u4e2d\uff0c\u5982\u679c\u53bb\u6389\u4e00\u4e2a\u5c5e\u6027\uff08\u5de6\u53f3\u4e24\u4fa7\u81f3\u5c11\u8981\u7559\u4e0b\u4e00\u4e2a\uff09\uff0c\u4ecd\u7136\u53ef\u4ee5\u7531\u5176\u5173\u7cfb\u96c6\u4e2d\u7684\u5176\u4ed6\u4f9d\u8d56\u63a8\u5f97\u539f\u5f0f\uff0c\u90a3\u4e48\u5c31\u79f0\u8fd9\u4e00\u4e2a\u5c5e\u6027\u662f\u5197\u4f59\u7684\u3002\u5197\u4f59\u7684\u5c5e\u6027\u4e5f\u53ef\u4ee5\u7528extraneous\u5f62\u5bb9\uff0c\u76f4\u8bd1\u4e3a\u591a\u4f59\u7684\u3002</p> </li> </ul> <p>\u9700\u8981\u6ce8\u610f\u8fd9\u91cc\u903b\u8f91\u8574\u542b \u201c\\(\\implies\\)\u201d \u7684\u65b9\u5411\u59cb\u7ec8\u4e3a\u5f31\\(\\implies\\)\u5f3a\uff0c\u5de6\u4fa7\u51cf\u5c11\u52a0\u5f3a\uff0c\u53f3\u4fa7\u51cf\u5c11\u524a\u5f31</p> <p>\u5bf9\u5e94\u7684\u68c0\u67e5\u5c31\u662f\u5220\u9664\u6389\u5047\u8bbe\u7684\u65e0\u5173\u5c5e\u6027\u540e\uff0c\u80fd\u5426\u63a8\u51fa\u539f\u6765\u7684\u51fd\u6570\u4f9d\u8d56</p> <p></p> <p></p> </li> <li> <p>\u6b63\u5219\u8986\u76d6</p> <p>\u8bb0\u4e3a\\(F_c\\)\uff0c\u6307\u7ed9\u5b9a\u4e00\u7ec4\u51fd\u6570\u4f9d\u8d56F\uff0c\u53bb\u9664\u6240\u6709\u5197\u4f59\u7684\u51fd\u6570\u4f9d\u8d56\u4e0e\u5c5e\u6027\u540e\u5269\u4f59\u7684\u90e8\u5206\uff0c\u76f8\u5f53\u4e8e\u51fd\u6570\u4f9d\u8d56F\u7684\u5316\u7b80\u96c6\u5408</p> <ul> <li> <p>\u4e0d\u542b\u5197\u4f59\u51fd\u6570\u4f9d\u8d56</p> </li> <li> <p>\u4e0e\u539f\u51fd\u6570\u4f9d\u8d56\u96c6F\u7b49\u4ef7\uff0c\u5373\\(F^+ \\Leftrightarrow F_c^+\\)</p> </li> <li> <p>\u51fd\u6570\u4f9d\u8d56\u7684\u5de6\u4fa7\u5c5e\u6027\u4e0d\u91cd\u590d</p> </li> </ul> <p>\u6c42\u6700\u5c0f\u51fd\u6570\u4f9d\u8d56\u96c6\u7684\u6b65\u9aa4\uff08\u6b63\u5219\u8986\u76d6\u53ef\u80fd\u4e0d\u552f\u4e00\uff09\uff1a</p> <p></p> </li> </ul>"},{"location":"Database/#lossless-join-decomposition","title":"Lossless(-join) Decomposition","text":"<p>\u5047\u8bbe\u8868R\u88ab\u62c6\u5206\u4e3a\u82e5\u5e72\u4e2a\u8868R1\u3001R2\u2026\u2026Rn\uff0c\u5f53\u4e14\u4ec5\u5f53R1 nature join R2\u2026\u2026 nature join Rn\u7b49\u4e8eR\u65f6\uff0c\u79f0\u8fd9\u4e2a\u8fd9\u4e2a\u62c6\u5206\u64cd\u4f5c\u662f\u65e0\u635f\u7684\u3002</p> <ul> <li> <p>\u5f53\u5206\u89e3\u4e3a\u4e24\u4e2a\u8868\u65f6\uff0c\u8bc1\u660e\u65e0\u635f\u62c6\u5206\u5e38\u7528\u7684\u4e00\u4e2a\u5145\u5206\u975e\u5fc5\u8981\u6761\u4ef6\u662f\uff1a</p> <p>\u4e24\u5f20\u62c6\u5f00\u7684\u8868\u53d6\u4ea4\u96c6\uff0c\u4ea4\u96c6\u662f\u81f3\u5c11\u4e00\u5f20\u8868\u7684superkey\uff0c\u6216\u8005\u8bf4\u53ef\u4ee5\u901a\u8fc7F+\u4e2d\u7684\u51fd\u6570\u4f9d\u8d56\u63a8\u5f97\u53d6\u4ea4\u96c6\u4e4b\u524d\u7684\u8868</p> \\[R1\\cap R2 \\rightarrow R1\\ or\\ R2\\] </li> <li> <p>\u5f53\u5206\u89e3\u4e3a\u8d85\u8fc7\u4e24\u4e2a\u8868\u65f6\uff0c\u4f7f\u7528\u5224\u5b9a\u8868\u6cd5\uff1ahttps://blog.csdn.net/weixin_42492218/article/details/106218720</p> </li> </ul>"},{"location":"Database/#dependancy-presevation","title":"Dependancy Presevation","text":"<p>\u5728\u6570\u636e\u5e93\u66f4\u65b0\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u4f9d\u8d56\u5173\u7cfb\u4e0d\u4f1a\u88ab\u7834\u574f\uff0c\u5373\u4f9d\u8d56\u4fdd\u6301</p> <p>\u5047\u8bbe\u8868R\u88ab\u62c6\u5206\u4e3a\u82e5\u5e72\u4e2a\u8868R1\u3001R2\u2026\u2026Rn\uff0c\u51fd\u6570\u4f9d\u8d56\u96c6F\u4e2d\u5de6\u53f3\u4e24\u4fa7\u7684\u5c5e\u6027\u90fd\u5728R1\u3001R2\u2026\u2026\u4e2d\u7684\u5b50\u96c6\u4e3aF1\u3001F2\u2026\u2026\uff0c\u79f0\u4e3aF\u5728R1\u3001R2\u2026\u2026\u4e0a\u7684\u6295\u5f71(\u4e66\u4e2d\u79f0\u4e3arestriction)\u3002</p> <p>\u5f53\\(F^+=F_1^+\\cup F_2^+\\cup...\\)\u65f6\u79f0\u8fd9\u4e2a\u62c6\u5206\u6ee1\u8db3\u4f9d\u8d56\u4fdd\u6301(\u6ce8\u610f\u8fd9\u4ec5\u4ec5\u662f\u4e2a\u5145\u5206\u6761\u4ef6)</p> <p>\u540c\u6837\u7684\uff0c\u7531\u4e8e\u51fd\u6570\u95ed\u5305\u7684\u8ba1\u7b97\u4ee3\u4ef7\u8fc7\u9ad8\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u5c5e\u6027\u95ed\u5305\u6765\u4ee3\u66ff\u3002\u76f8\u5f53\u4e8e\u6bcf\u6b21\u8ba1\u7b97\u67d0\u6761\u4f9d\u8d56\u9650\u5b9a\u5728 \\(F_i\\) \u4e0a\u7684\u5c5e\u6027\u95ed\u5305\uff0c\u518d\u5408\u5e76\u8d77\u6765\uff0c\u68c0\u67e5\u662f\u5426\u5c06\u8fd9\u6761\u4f9d\u8d56\u4fdd\u6301 </p> <p></p> <p>\u7b2c\u4e09\u8303\u5f0f\u662f\u6ee1\u8db3\u4f9d\u8d56\u4fdd\u6301\u7684\u6700\u9ad8\u8303\u5f0f, BC\u8303\u5f0f\u4e0d\u80fd\u4fdd\u8bc1\u4f9d\u8d56\u4fdd\u6301</p>"},{"location":"Database/#_13","title":"\u7b2c\u4e09\u8303\u5f0f","text":""},{"location":"Database/#_14","title":"\u4e09\u5927\u8303\u5f0f","text":"<ul> <li>\u7b2c\u4e00\u8303\u5f0f</li> </ul> <p>\u8981\u6c42\u6bcf\u4e00\u4e2aattribue\u7684domain\u90fd\u662fatomic\u7684\uff0c\u4e0d\u80fd\u7ee7\u7eed\u5206\u5272\uff08\u5982CS-101\u5373\u53ef\u7ee7\u7eed\u5206\u5272\u6210\u8bfe\u7a0b\u79cd\u7c7b\u548c\u6807\u53f7\uff0c\u7ed9\u66f4\u65b0\u5e26\u6765\u9ebb\u70e6\uff09\uff0c\u540c\u65f6\u6bcf\u4e00\u4e2arelation\u90fd\u5e94\u8be5\u6709primary key\u3002</p> <p>\u8fd9\u662f\u6240\u6709\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6700\u57fa\u7840\u7684\u8303\u5f0f\u8981\u6c42\u3002</p> <ul> <li>\u7b2c\u4e8c\u8303\u5f0f\uff08\u4e0d\u91cd\u8981\uff09</li> </ul> <p>\u5728\u7b2c\u4e00\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u6c42\u975e\u4e3b\u5c5e\u6027\u5bf9\u6240\u6709candidate key\u4e0d\u80fd\u6709\u90e8\u5206\u4f9d\u8d56\uff0c\u5c31\u50cfcandidate key\u88ab\u6d6a\u8d39\u4e86\u4e00\u6837\u3002\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u5173\u7cfb\uff1a</p> <p>\uff08\u5b66\u53f7\uff0c\u8bfe\u540d\uff09\u662f\u4e00\u4e2acandidate key\uff0c\u4f46\u662f\u59d3\u540d\u3001\u7cfb\u540d\u90fd\u662f\u5bf9\u5b66\u53f7\u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u5373\u5bf9\u5019\u9009\u952e\u7684\u90e8\u5206\u4f9d\u8d56\uff0c\u6240\u4ee5\u4e0a\u9762\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0d\u6ee1\u8db3\u7b2c\u4e8c\u8303\u5f0f\uff0c\u4f46\u662f\u6ee1\u8db3\u7b2c\u4e00\u8303\u5f0f\u3002</p> <ul> <li>\u7b2c\u4e09\u8303\u5f0f</li> </ul> <p>\u5728\u7b2c\u4e8c\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u6c42\u975e\u4e3b\u5c5e\u6027\u5bf9\u6240\u6709\u5019\u9009\u952e\u4e0d\u80fd\u6709\u4f20\u9012\u4f9d\u8d56\u3002\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u5173\u7cfb\uff1a</p> <p></p> <p>\u5b66\u53f7-&gt;\u7cfb\u540d-&gt;\u7cfb\u4e3b\u4efb\u662f\u4e00\u4e2a\u4f20\u9012\u4f9d\u8d56\u5173\u7cfb\uff0c\u6240\u4ee5\u4e0a\u9762\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0d\u6ee1\u8db3\u7b2c\u4e09\u8303\u5f0f\u4f46\u662f\u6ee1\u8db3\u7b2c\u4e8c\u8303\u5f0f\u3002</p>"},{"location":"Database/#_15","title":"\u5b9a\u4e49\uff1a","text":""},{"location":"Database/#3nf","title":"3NF \u68c0\u67e5","text":"<p>\u53ea\u9700\u8981\u6839\u636e\u5b9a\u4e49\uff0c\u5229\u7528\u5c5e\u6027\u95ed\u5305\u68c0\u67e5 F \u4e2d\u7684\u51fd\u6570\u4f9d\u8d56\u5173\u7cfb</p>"},{"location":"Database/#3nf_1","title":"\u5206\u89e3\u4e3a3NF","text":"<p>Lossless decomposition &amp; Dependence preservation</p> <p>3NF synthesis algorithm</p> <p></p>"},{"location":"Database/#bcnfboyce-codd-normal-form","title":"BCNF(Boyce-Codd Normal Form)","text":"<p>\u5728\u7b2c\u4e09\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u6c42\u4e3b\u5c5e\u6027\u5bf9\u6240\u6709\u5019\u9009\u952e\u4e0d\u80fd\u6709\u90e8\u5206\u4f9d\u8d56\uff0c\u6216\u8005\u901a\u4fd7\u5730\u8bf4\uff0c\u5bf9F+\u4e2d\u7684\u4efb\u610f\u4e00\u7ec4\u4f9d\u8d56\u5173\u7cfb\\(X\\rightarrow Y\\)\uff0cX\u4e00\u5b9a\u662fcandidate key\u4e4b\u4e00\u3002</p> <p>\u5bf9\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a</p> <ul> <li> <p>\u5173\u7cfb\u6a21\u5f0f\uff1a\u4ed3\u5e93\uff08\u4ed3\u5e93\u540d\uff0c\u7ba1\u7406\u5458\uff0c\u7269\u54c1\u540d\uff0c\u6570\u91cf\uff09</p> </li> <li> <p>\u5df2\u77e5\u51fd\u6570\u4f9d\u8d56\uff1a</p> <ul> <li> <p>\u4ed3\u5e93\u540d-&gt;\u7ba1\u7406\u5458</p> </li> <li> <p>\u7ba1\u7406\u5458-&gt;\u4ed3\u5e93\u540d \uff08\u4e00\u4e2a\u4ed3\u5e93\u53ea\u6709\u4e00\u540d\u7ba1\u7406\u5458\uff0c\u4e00\u540d\u7ba1\u7406\u5458\u53ea\u80fd\u8d1f\u8d23\u4e00\u4e2a\u4ed3\u5e93\uff09</p> </li> <li> <p>\uff08\u4ed3\u5e93\u540d\uff0c\u7269\u54c1\u540d\uff09-&gt;\u6570\u91cf</p> </li> <li> <p>\uff08\u7ba1\u7406\u5458\uff0c\u7269\u54c1\u540d\uff09-&gt;\u6570\u91cf</p> </li> </ul> </li> <li> <p>candidate key\u6709\uff1a</p> <ul> <li> <p>\uff08\u4ed3\u5e93\u540d\uff0c\u7269\u54c1\u540d\uff09</p> </li> <li> <p>\uff08\u7ba1\u7406\u5458\uff0c\u7269\u54c1\u540d\uff09</p> </li> </ul> </li> <li> <p>\u6240\u4ee5\u4e3b\u5c5e\u6027\u6709\uff1a\u4ed3\u5e93\u540d\uff0c\u7269\u54c1\u540d\uff0c\u7ba1\u7406\u5458</p> </li> </ul> <p>\u8fd9\u4e2a\u5173\u7cfb\u6ee1\u8db33NF\uff0c\u4f46\u662f\u6ce8\u610f\u5230\u5b58\u5728 \u4ed3\u5e93\u540d-&gt;\u7ba1\u7406\u5458 \u4f9d\u8d56\uff0c\u8fd9\u662f\u4e3b\u5c5e\u6027\u5bf9\u5019\u9009\u952e\u7684\u90e8\u5206\u4f9d\u8d56\uff0c\u6216\u8005\u8bf4\u4ed3\u5e93\u540d\uff08X\uff09\u4e0d\u662fcandidate key\uff0c\u6240\u4ee5\u8fd9\u4e2a\u4f8b\u5b50\u4e0d\u6ee1\u8db3BCNF\u3002\u6ee1\u8db3BCNF\u7684\u5206\u89e3\u662f\uff1a</p> <ul> <li> <p>\u7ba1\u7406\uff08\u4ed3\u5e93\u540d\uff0c \u7ba1\u7406\u5458\uff09</p> </li> <li> <p>\u50a8\u5b58\uff08\u4ed3\u5e93\u540d\uff0c\u7269\u54c1\u540d\uff0c\u6570\u91cf\uff09</p> </li> </ul>"},{"location":"Database/#bcnf","title":"\u68c0\u67e5BCNF","text":"<ul> <li> <p>\u5bf9\u4e8e\u4e00\u4e2a\u51fd\u6570\u4f9d\u8d56\u96c6F\u7684\u68c0\u67e5\uff1a</p> <p>\u68c0\u67e5 F\uff08\u4e0d\u9700\u8981F+\uff09\u5185\u6240\u6709\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u8ba1\u7b97\u5de6\u4fa7\u5c5e\u6027\u7684\u95ed\u5305\uff0c\u5982\u679c\u95ed\u5305\u5305\u542b\u6240\u6709\u5c5e\u6027\uff0c\u5c31\u8bf4\u660e\u8fd9\u4e2a\u4f9d\u8d56\u6ee1\u8db3BCNF</p> </li> <li> <p>\u5bf9\u4e8e\u5206\u89e3\u540e\u7684\u5173\u7cfb\u7684\u68c0\u67e5\uff1a</p> <p>\u6b64\u65f6\u4e0a\u4e00\u79cd\u60c5\u51b5\u7684\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5fc5\u987b\u68c0\u67e5 F+ \u4e2d\u6240\u6709\u7684\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56</p> </li> <li> <p>\u53e6\u4e00\u79cd\u901a\u7528\u65b9\u6cd5\uff1a</p> <p>\u5bf9\u4e8e\u67d0\u4e2a\u5206\u89e3\u540e\u7684\u5173\u7cfb \\(R_i\\) \u7684\u6bcf\u4e2a\u5b50\u96c6 \\(\\alpha\\)\uff0c\u786e\u4fdd \\(\\alpha ^+\\) \u8981\u4e48\u5305\u542b \\(R_i\\) \u7684\u6240\u6709\u5c5e\u6027\uff0c\u8981\u4e48\u4e0d\u5305\u542b \\(R_i - \\alpha\\) \u7684\u4efb\u4f55\u5c5e\u6027</p> <p>\u5426\u5219\uff0c\u51fd\u6570\u4f9d\u8d56 \\(\\alpha \\rightarrow (\\alpha^+ - \\alpha) \\cap R_i\\) \u8fdd\u53cd\u4e86BCNF</p> </li> </ul>"},{"location":"Database/#bcnf_1","title":"\u5206\u89e3\u4e3aBCNF","text":"<p>Lossless decomposition but may not dependence preservation</p> <p>\u672c\u8d28\u4e0a\uff0c\u5c31\u662f\u5c06\u4e00\u4e2a\u4e0d\u6ee1\u8db3BCNF\u7684\u5173\u7cfb\u4ece\u8868\u4e2d\u62c6\u51fa\u53bb\uff0c\u5355\u72ec\u5efa\u8868</p> <p>\u5176\u4e2d \\(\\alpha \\cap \\beta = \\emptyset\\) \u7684\u6761\u4ef6\u5f88\u91cd\u8981\uff0c\u5426\u5219 \\(R_i - \\beta\\) \u4f1a\u5c06 \\(\\alpha \\cap \\beta\\) \u90e8\u5206\u7684\u5c5e\u6027\u62c6\u51fa\u53bb\uff0c\u7834\u574f\u4e86 \\(\\alpha \\rightarrow \\beta\\) \u7684\u51fd\u6570\u4f9d\u8d56</p> <p></p>"},{"location":"Database/#4nf","title":"\u591a\u503c\u4f9d\u8d56 &amp; 4NF","text":""},{"location":"Database/#_16","title":"\u591a\u503c\u4f9d\u8d56","text":"<p>\\(\\alpha \\rightarrow \\rightarrow \\beta\\) \u8868\u660e \\(\\alpha\\) \u7684\u6bcf\u4e2a\u503c\u90fd\u5bf9\u5e94\u4e8e \\(\\beta\\) \u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u503c\uff0c\u53e6\u4e00\u79cd\u8bf4\u6cd5\u662f \\(\\alpha\\) \u4e0e \\(\\beta\\) \u4e4b\u95f4\u7684\u8054\u7cfb\u662f\u4e00\u5bf9\u591a\u4e14\u72ec\u7acb\u4e8e\u5176\u4ed6\u5c5e\u6027\u7684\u3002</p> <p>\uff08\u56e0\u6b64\u51fd\u6570\u4f9d\u8d56\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u591a\u503c\u4f9d\u8d56\uff0c\u591a\u503c\u4f9d\u8d56\u7684\u5904\u7406\u65b9\u6cd5\u548c\u51fd\u6570\u4f9d\u8d56\u4e5f\u57fa\u672c\u4e00\u81f4\uff09</p> <p>\u82e5\u5173\u7cfbr\u4e0d\u6ee1\u8db3\u7ed9\u5b9a\u7684\u591a\u503c\u4f9d\u8d56\uff0c\u53ef\u4ee5\u901a\u8fc7\u5411r\u4e2d\u589e\u52a0\u5143\u7ec4\u6765\u5f97\u5230\u4e00\u4e2a\u6ee1\u8db3\u591a\u503c\u4f9d\u8d56\u7684\u5173\u7cfb</p> <p>\u51fd\u6570\u4f9d\u8d56&amp;\u591a\u503c\u4f9d\u8d56\u7684\u95ed\u5305 D+\uff1a</p> <ul> <li> <p>\\(\\alpha \\rightarrow \\beta \\implies \\alpha \\rightarrow \\rightarrow \\beta\\)</p> </li> <li> <p>\\(\\alpha \\rightarrow \\rightarrow \\beta \\implies \\alpha \\rightarrow \\rightarrow R - \\alpha - \\beta\\)</p> </li> </ul>"},{"location":"Database/#4nf_1","title":"4NF","text":"<ul> <li> <p>\u5b9a\u4e49     4NF \u4e00\u5b9a\u662f BCNF\uff0c\u4f46\u662f\u53cd\u4e4b\u4e0d\u4e00\u5b9a\u6210\u7acb</p> <p></p> </li> <li> <p>\u68c0\u67e5</p> <p></p> </li> <li> <p>\u5206\u89e3</p> <p></p> </li> </ul>"},{"location":"Database/#more","title":"More","text":""},{"location":"Database/#more-nfs","title":"More NFs","text":"<ul> <li> <p>5NF(Project-Join Normal Form)</p> </li> <li> <p>DKNF(Domain-Key Normal Form) </p> </li> </ul>"},{"location":"Database/#temporal-data","title":"Temporal data","text":"<ul> <li> <p>Temporal functional dependency: \u5728\u4efb\u610f\u65f6\u95f4\u5feb\u7167\u4e0a\u6ee1\u8db3\u7684\u51fd\u6570\u4f9d\u8d56</p> </li> <li> <p>\u5b9e\u9645\u64cd\u4f5c\uff1a\u7ed9\u6570\u636e\u52a0\u4e0astart time\u548cend time\uff0c\u7136\u540e\u7528\u65f6\u95f4\u6233\u6765\u67e5\u8be2</p> </li> </ul>"},{"location":"Database/#how-to-find-candidate-key","title":"How to Find Candidate Key","text":"<ul> <li> <p>Primary Attribute</p> <p>\u51fa\u73b0\u5728\u81f3\u5c11\u4e00\u4e2acandidate key\u4e2d\u7684\u5c5e\u6027\u79f0\u4e3a\u4e3b\u5c5e\u6027\u3002\u53cd\u4e4b\u4e3a\u975e\u4e3b\u5c5e\u6027\u3002</p> </li> <li> <p>\u7b2c\u4e00\u6b65-\u5148\u627e\u4e3b\u5c5e\u6027</p> <p>\u5148\u627e\u51fa\\(F_c\\)\u6216\\(F_m\\)\uff0c\u7136\u540e\u5c06\u6240\u6709\u5c5e\u6027\u5206\u4e3a\u4ee5\u4e0b\u56db\u7c7b\uff1a</p> <ul> <li> <p>L\u7c7b\uff1a\u4ec5\u5b58\u5728\u4e8e\u4f9d\u8d56\u5de6\u4fa7\uff0c\u4e00\u5b9a\u662f\u4e3b\u5c5e\u6027</p> </li> <li> <p>R\u7c7b\uff1a\u4ec5\u5b58\u5728\u4e8e\u4f9d\u8d56\u53f3\u4fa7\uff0c\u4e00\u5b9a\u4e0d\u662f\u4e3b\u5c5e\u6027</p> </li> <li> <p>N\u7c7b\uff1a\u6ca1\u6709\u5728\u4efb\u4f55\u51fd\u6570\u4f9d\u8d56\u4e2d\u51fa\u73b0\u8fc7\uff0c\u4e00\u5b9a\u662f\u4e3b\u5c5e\u6027\uff0c\u4e14\u5b58\u5728\u4e8e\u4efb\u4f55\u4e00\u4e2a\u5019\u9009\u7801\u4e2d</p> </li> <li> <p>LR\u7c7b\uff1a\u540c\u65f6\u51fa\u73b0\u5728\u4e86\u4f9d\u8d56\u4e24\u4fa7\uff0c\u5f85\u5b9a</p> </li> </ul> </li> <li> <p>\u7b2c\u4e8c\u6b65-\u627eCandidate Key</p> <p>\u8fd9\u91cc\u662f\u6839\u636e\\(F_c\\ or\\ F_m\\)\u5206\u7c7b\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06L\u7c7b\u548cN\u7c7b\u5c5e\u6027\u5408\u5e76\uff0c\u68c0\u67e5\u5176\u662f\u4e0d\u662fcandidate key\u3002\u5982\u679c\u662f\u6839\u636e\u539f\u59cb\u5173\u7cfb\u96c6F\u5206\u7c7b\uff0c\u90a3\u4e48\u8fd8\u9700\u8981\u9010\u4e00\u5bf9N\u7c7b\u5c5e\u6027\u4e0eL\u7c7b\u7684\u6240\u6709\u5b50\u96c6\u7684\u5e76\u96c6\u68c0\u67e5\u662f\u4e0d\u662fcandidate key\uff0c\u5e76\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a\u3002</p> <ul> <li> <p>\u5982\u679c\u4ec5\u9760L\u7c7b\u548cN\u7c7b\u5c31\u53ef\u4ee5\u786e\u5b9acandidate key\uff0c\u5219\u4e0d\u9700\u8981\u8003\u8651LR\u7c7b\u3002</p> </li> <li> <p>\u5982\u679cL\u7c7b\u4e0eN\u7c7b\u7684\u5e76\u96c6\u4e0d\u662fcandidate key\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5e76\u96c6\u4e0eLR\u7c7b\u7684\u6240\u6709\u5b50\u96c6\u9010\u4e00\u53d6\u5e76\u96c6\u68c0\u67e5\u662f\u4e0d\u662fcandidate key\u3002\u786e\u5b9a\u4e00\u4e2acandidate key\u540e\uff0c\u771f\u5305\u542b\u5b83\u7684\u6240\u6709\u96c6\u5408\u90fd\u4e0d\u662fcandidate key\uff0c\u53ef\u4ee5\u51cf\u5c11\u4e00\u4e9b\u8fd0\u7b97\u91cf\u3002</p> </li> </ul> </li> </ul>"},{"location":"Database/#design-guidelines","title":"Design Guidelines","text":"<ul> <li> <p>Nice E-R design -&gt; Good relational schema -&gt; Less normalization</p> </li> <li> <p>Duplicated name &amp; relation if properties have some relation</p> </li> <li> <p>Allowing some redundancy for performance(denormalization &amp; materialized view)</p> </li> </ul>"},{"location":"Database/#_17","title":"\u5341\u4e8c\u7ae0 \u7269\u7406\u50a8\u5b58\u4ecb\u8d28","text":""},{"location":"Database/#_18","title":"\u50a8\u5b58\u7684\u8bc4\u4ef7","text":""},{"location":"Database/#_19","title":"\u50a8\u5b58\u7684\u5206\u7c7b","text":"<ul> <li> <p>\u50a8\u5b58\u53ef\u4ee5\u6839\u636e\u6613\u5931\u6027\u5206\u4e3a\uff1a</p> <ul> <li> <p>volatile \u6389\u7535\u5931\u53bb\u6570\u636e\uff0c\u4e00\u822c\u5bb9\u91cf\u5c0f\u901f\u5ea6\u5feb</p> </li> <li> <p>non-volatile \u6389\u7535\u4e0d\u4f1a\u5931\u53bb\u6570\u636e\uff0c\u76f8\u5bf9\u5bb9\u91cf\u5927\u901f\u5ea6\u6162</p> </li> </ul> </li> <li> <p>\u4e5f\u53ef\u4ee5\u6839\u636e\u5c42\u7ea7\u5206\u7c7b\uff1a</p> <ul> <li> <p>primary storage \u6700\u5feb\u3001\u4e00\u822c\u7528volatile\u4ecb\u8d28\u5b9e\u73b0</p> </li> <li> <p>secondary storage \u8f83\u5feb\u3001\u975e\u6613\u5931</p> <ul> <li>\u4e5f\u53ebon-line storage\uff0c\u5e38\u89c1\u7684flash memory\u3001magnetic disks\u90fd\u5c5e\u4e8e\u6b64\u7c7b</li> </ul> </li> <li> <p>teriay storage \u6162\u3001\u975e\u6613\u5931</p> <ul> <li>\u4e5f\u53eboff-line storage\uff0cmagnetic tape\u3001optical storage\u5c5e\u4e8e\u6b64\u7c7b</li> </ul> </li> </ul> </li> <li> <p>\u4e5f\u53ef\u4ee5\u6839\u636e\u539f\u7406\u5206\u7c7b\uff1a</p> <p></p> </li> <li> <p>Measures</p> <ul> <li> <p>Disk block: logical unit for storage allocation and retrieval</p> <ul> <li> <p>Too small : more transfer</p> </li> <li> <p>Too large : space wasted</p> </li> </ul> </li> <li> <p>Sequential access pattern: seek required only for first block</p> </li> <li> <p>Random access pattern: each access require a seek</p> </li> <li> <p>I/O opeartions per second(IOPS)</p> </li> </ul> </li> </ul>"},{"location":"Database/#_20","title":"\u78c1\u76d8\u6027\u80fd\u8bc4\u4ef7","text":"<p>\u78c1\u76d8\u6027\u80fd\u4ece\u4ee5\u4e0b\u7ef4\u5ea6\u8bc4\u4ef7\uff1a</p> <ul> <li> <p>Access time \u8bbf\u95ee\u65f6\u95f4</p> <ul> <li>\u5bf9HDD\u53c8\u53ef\u4ee5\u7ec6\u5206\u4e3aSeek time\u5bfb\u9053\u65f6\u95f4(4 ~ 10 milliseconds)\u548cRotation latency\u65cb\u8f6c\u5ef6\u8fdf(5 ~ 20 milliseconds)</li> </ul> </li> <li> <p>Data-transfer rate \u6570\u636e\u4f20\u8f93\u901f\u7387(25 ~ 200 MBps)</p> </li> <li> <p>IOPS \u6bcf\u79d2I/O\u64cd\u4f5c\u6570</p> </li> <li> <p>Mean time of failure \u5e73\u5747\u6545\u969c\u65f6\u95f4(MTTF, 3 ~ 5 years)</p> </li> </ul> <p>\u6839\u636e\u6240\u8bbf\u95ee\u6570\u636e\u7684\u50a8\u5b58\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u5c06\u8bbf\u95ee\u5206\u4e3a\u968f\u673a\u8bbf\u95ee\u548c\u987a\u5e8f\u8bbf\u95ee\u3002\u987a\u5e8f\u8bbf\u95ee\u7684\u4e0a\u9650\u4e3b\u8981\u7531\u4f20\u8f93\u901f\u7387\u51b3\u5b9a\uff1b\u968f\u673a\u8bbf\u95ee\u7684\u4e0a\u9650\u4e3b\u8981\u7531IOPS\u51b3\u5b9a\uff0cIOPS\u53c8\u4e3b\u8981\u7531\u8bbf\u95ee\u65f6\u95f4\u51b3\u5b9a\u3002</p> <p>\u4f18\u5316\u78c1\u76d8\u6027\u80fd\u7684\u5e38\u89c1\u65b9\u5f0f\uff1a</p> <ul> <li> <p>Buffering \u7f13\u51b2\u533a\uff0c\u907f\u514d\u91cd\u590d\u8bfb\u5199\u76f8\u540c\u6570\u636e</p> </li> <li> <p>Read-ahead \u9884\u8bfb\u53d6</p> </li> <li> <p>Disk-arm-scheduling \u9488\u5bf9HDD\uff0c\u76f8\u6bd4\u8ba9\u78c1\u5934\u6765\u56de\u6a2a\u8df3\uff0c\u9002\u5f53\u91cd\u6392IO\u8bf7\u6c42,\u50cf\u7535\u68af\u4e00\u6837\uff0c\u4f7f\u78c1\u5934\u6709\u5e8f\u79fb\u52a8\u80fd\u51cf\u5c11\u5e73\u5747\u5bfb\u9053\u65f6\u95f4</p> </li> <li> <p>File Organization \u9488\u5bf9HDD\uff0c\u6587\u4ef6\u6574\u7406\uff0c\u4f7f\u6570\u636e\u5206\u5e03\u5c3d\u53ef\u80fd\u6709\u5e8f</p> </li> <li> <p>Wear Leveling \u9488\u5bf9NVM\u548cSSD\uff0c\u56e0\u4e3a\u64e6\u5199\u5bff\u547d\u76f8\u5bf9\u6709\u9650\uff0c\u9700\u8981\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861</p> </li> <li> <p>Non-volatile write buffers \u5ef6\u8fdf\u540e\u5927\u6279\u91cf\u4e00\u540c\u5199\u5165</p> </li> <li> <p>Effective query processing algorithm (high-level optimization)</p> </li> </ul>"},{"location":"Database/#_21","title":"\u5341\u4e09\u7ae0 \u6570\u636e\u50a8\u5b58\u7ed3\u6784","text":"<p>\u4e00\u65b9\u9762\uff0c\u4f60\u5982\u4f55\u50a8\u5b58\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u662f\u6bcf\u4e00\u5f20\u8868\u5bf9\u5e94\u4e00\u4e2a\u6587\u4ef6\uff0c\u8fd8\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u5bf9\u5e94\u4e00\u4e2a\u5927\u6587\u4ef6\uff0c\u8fd8\u662f\u5176\u4ed6\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1f\u5728\u7279\u5b9a\u5b9e\u73b0\u65b9\u5f0f\u4e0a\u600e\u4e48\u4f18\u5316\u589e\u5220\u67e5\u6539\uff1f</p> <p>\u53e6\u4e00\u65b9\u9762\u4f60\u7684\u6570\u636e\u7ed3\u6784\u600e\u4e48\u4e0e\u50a8\u5b58\u4ecb\u8d28\u76f8\u914d\u5408\u4f18\u5316\uff0c\u6bd4\u5982\u6700\u91cd\u8981\u7684\u600e\u4e48\u4ee5\u6247\u533a\u4e3a\u5355\u4f4d\u5927\u5c0f\u8bfb\u5199\uff1f</p>"},{"location":"Database/#_22","title":"\u5355\u6761\u8bb0\u5f55","text":""},{"location":"Database/#_23","title":"\u5b9a\u957f\u6570\u636e","text":"<p>\u6309\u884c\u5b58\u653e\uff08Row-Oriented Storage\uff09\u7684\u5b9a\u957f\u6570\u636e\u7684\u589e\u67e5\u6539\u90fd\u5bb9\u6613\u5b9e\u73b0\uff08\u4e00\u822c\u4e0d\u5141\u8bb8\u8de8block\u5b58\u50a8\uff09\uff0c\u5220\u9664\u4e00\u822c\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li> <p>\u5220\u9664\u540e\u5c06\u540e\u9762\u7684\u6570\u636e\u524d\u79fb\uff08\u53ef\u4ee5\u4fdd\u6301\u67d0\u4e9b\u952e\u7684\u987a\u5e8f\uff09</p> </li> <li> <p>\u5220\u9664\u540e\u7684\u7a7a\u4f4d\u7528\u94fe\u8868\uff08free list\uff09\u4e32\u8054\u4f9b\u4e0b\u6b21\u63d2\u5165\u7528</p> </li> <li> <p>\u5220\u9664\u540e\u5c06\u6700\u4e0b\u9762\u7684\u4e00\u4e2a\u6570\u636e\u79fb\u5230\u5220\u9664\u540e\u7684\u7a7a\u4f4d</p> </li> </ul> <p>\u4f46\u662f\u6570\u636e\u8fd8\u53ef\u4ee5\u6309\u5217\u5b58\u653e\uff0c\u79f0\u4e3aColumnar Representation\u6216Column-Oriented Storage\uff1a</p> <ul> <li> <p>\u589e\u5220\u67e5\u6539\u7684\u5b9e\u73b0\u4e0e\u4e0a\u9762\u7c7b\u4f3c</p> </li> <li> <p>\u6309\u5217\u5b58\u653e\u66f4\u6709\u5229\u4e8e\u5411\u91cf\u8fd0\u7b97\u4ee5\u53ca\u6570\u636e\u5206\u6790\u3001\u8fd0\u7b97\u3001\u538b\u7f29\u7b49\u64cd\u4f5c</p> </li> <li> <p>\u5982\u679c\u6309\u5c5e\u6027\u8bbf\u95ee\u591a\u4e8e\u6309tuple\u8bbf\u95ee\uff0c\u8fd9\u79cd\u50a8\u5b58\u65b9\u5f0f\u4f1a\u66f4\u5feb</p> </li> </ul> <p>materials</p> <ul> <li>\u53ef\u4ee5\u652f\u6301\u5411\u91cf\u64cd\u4f5c\uff08\u4e0e\u7f16\u8bd1\u7ed3\u5408\uff09</li> </ul> <p></p>"},{"location":"Database/#_24","title":"\u4e0d\u5b9a\u957f\u6570\u636e","text":"<ul> <li> <p>\u7528null-bit map\u89e3\u51b3\u5141\u8bb8\u4e3aNULL\u7684\u6570\u636e\u50a8\u5b58\u3002n\u4e2a\u5141\u8bb8\u4e3a\u7a7a\u7684\u5c5e\u6027\u9700\u8981n\u4e2abit\u7684\u7a7a\u4f4d\u56fe\uff0c\u7a7a\u4f4d\u56fe\u4e2d\u67d0\u4e00bit\u4e3a0/1\u610f\u5473\u7740\u5bf9\u5e94\u7684\u5c5e\u6027\u4e0d\u662f/\u662f\u7a7a\u7684\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662fmemory\u4e00\u822c\u4e0d\u5141\u8bb8\u4ee5bit\u4e3a\u5355\u4f4d\u7684\u8bfb\u5199\uff0c\u9700\u8981\u7528n\u4e0d\u80fd\u88ab8\u6574\u9664\u65f6\u9700\u8981\u8865\u9f50\u52308\u7684\u6574\u500d\u6570\u4ee5\u5b9e\u73b0Byte\u4e3a\u5355\u4f4d\u7684\u8bfb\u5199\u3002</p> </li> <li> <p>\u7528\u5b9a\u957f\u7684\u6570\u636e\uff0c\u5982\u957f\u5ea6\u6216\u8005\u504f\u79fb\u91cf\uff0c\u95f4\u63a5\u8868\u8fbe\u957f\u5ea6\u4e0d\u5b9a\u7684\u6570\u636e\uff0c\u800c\u5c06\u5177\u4f53\u7684\u6570\u636e\u5b58\u5728\u5b9a\u957f\u7684\u5c5e\u6027\u503c\u7684\u540e\u9762\u3002</p> </li> </ul> <p>\u6700\u5e38\u89c1\u7684\u7ed3\u6784\u5982\u56fe\u6240\u793a\uff1a</p> <ul> <li> <p>\u5b9a\u957f\u7684\u6570\u636e\u548c\u4e0d\u5b9a\u957f\u6570\u636e\u7684\u5b9a\u957f\u8868\u793a\u653e\u524d\u9762</p> </li> <li> <p>\u7a7a\u4f4d\u56fe\u653e\u4e2d\u95f4</p> </li> <li> <p>\u4e0d\u5b9a\u957f\u6570\u636e\u7684\u672c\u4f53\u653e\u540e\u9762</p> </li> </ul> <p>\u4f8b\u5982\u56fe\u4e2d(21, 5)\u8868\u8fbe\u4e86\u4e00\u4e2a\u53d8\u957f\u5c5e\u6027\u7684\u4ece21\u53f7bit\u5f00\u59cb\u4e14\u957f\u5ea6\u4e3a5\u3002\uff0865000\u4e3a\u4e00\u4e2a\u5b9a\u957f\u7684\u5c5e\u6027\uff0c\u653e\u5728\u524d\u9762\uff09</p> <p></p>"},{"location":"Database/#_25","title":"\u6570\u636e\u9875","text":"<p>\u5b9a\u957f\u6570\u636e\u975e\u5e38\u5bb9\u6613\u6784\u5efa\u6570\u636e\u9875\u3002</p> <p>\u4e0d\u5b9a\u957f\u6570\u636e\u7684\u6570\u636e\u9875\u4e00\u822c\u91c7\u7528\u4e24\u5934\u5939\u51fb\u7684\u7ed3\u6784\u4fbf\u4e8e\u5bf9\u9f50\u3002\u6700\u5e38\u89c1\u7684\u5b9e\u73b0\u65b9\u5f0f\u5982\u56fe\uff0cSlotted page\uff08\u5206\u69fd\u9875\uff09 Header\u5305\u542b\u672c\u9875\u4e2drecords\u76f8\u5173\u4fe1\u606f\uff1a</p> <ul> <li> <p>record\u6570\u91cf\uff0c\u65b9\u4fbf\u4e0b\u4e00\u6b21\u63d2\u5165record\u6307\u9488\uff0c\u9632\u6b62\u5c06free space\u4e2d\u7684\u6570\u636e\u89c6\u4e3arecord\u6307\u9488</p> </li> <li> <p>free space\u672b\u5c3e\u4f4d\u7f6e\uff0c\u65b9\u4fbf\u4e0b\u4e00\u6b21\u63d2\u5165record</p> </li> <li> <p>\u6307\u5411\u5404record\u7684\u6307\u9488\uff08\u4e00\u822c\u662f\u504f\u79fb\u91cf\u5f62\u5f0f\uff09</p> </li> </ul> <p></p>"},{"location":"Database/#_26","title":"\u6587\u4ef6\u7ec4\u7ec7","text":"<p>\u9700\u8981\u8bbe\u8ba1\u5355\u6761\u6570\u636e\u548c\u6570\u636e\u9875\u5982\u4f55\u5206\u5e03\u5728\u6587\u4ef6\u5185\u90e8\u3002\u4e0b\u56fe\u662f\u51e0\u79cd\u5e38\u89c1\u7684\u7ed3\u6784\uff1a</p> <p></p>"},{"location":"Database/#heap","title":"Heap","text":"<p>Heap\u5e38\u7528\u7684\u4f18\u5316\u65b9\u5f0f\u662fFree-space map\uff0c\u5269\u4f59\u7a7a\u95f4\u56fe\u4e2d\u7684\u5143\u7d20\u8868\u793a\u5bf9\u5e94\u7684block\u4e2d\u5269\u4f59\u7a7a\u95f4\u7684\u6bd4\u4f8b\uff0c\u5373\\(\\frac{x}{2^{bit}}\\)\u7684\u90e8\u5206\u4e3a\u7a7a\u95f2\u7684</p> <p>\u5f53\u6570\u636e\u9875\u6bd4\u8f83\u591a\u65f6\uff0c\u53ef\u4ee5\u5c06\u8fde\u7eedK\u4e2amap\u7684\u6700\u5927\u503c\u4f5c\u4e3a\u952e\u503c\uff0c\u5efa\u7acb\u8d77\u4e8c\u7ea7\u7d22\u5f15\uff0c\u4ee5\u52a0\u5feb\u67e5\u627e\u901f\u5ea6</p> <p></p>"},{"location":"Database/#sequential","title":"Sequential","text":"<p>\u8fd9\u91cc\u7684Sequential\u4e0d\u662f\u6307\u50a8\u5b58\u7a7a\u95f4\u4e0a\u6709\u5e8f\uff0c\u800c\u662f\u6307\u6bcf\u4e00\u6761\u6570\u636e\u903b\u8f91\u5173\u7cfb\uff08\u5373\u641c\u7d22\u7801\uff09\u4e0a\u6709\u5e8f\u3002\u5728\u6570\u636e\u7ecf\u5e38\u6309\u67d0\u79cd\u6392\u5e8f\u5148\u540e\u53d6\u7528\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u987a\u5e8f\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>\u5148\u540e\u903b\u8f91\u4e00\u822c\u7528\u7c7b\u4f3c\u6307\u9488\u7684\u7ed3\u6784\u5b9e\u73b0\uff0c\u4f46\u662f\u4f1a\u5bfc\u81f4\u6570\u636e\u903b\u8f91\u5b58\u50a8\u987a\u5e8f\u548c\u7269\u7406\u5b58\u50a8\u987a\u5e8f\u4e0d\u4e00\u81f4\uff0c\u6548\u7387\u4f4e\u4e0b\uff0c\u56e0\u6b64\u9700\u8981\u9002\u65f6Reorganize\u3002</p> <ul> <li> <p>\u63d2\u5165\uff1a\u5148\u5b9a\u4f4d\u5230\u5bf9\u5e94\u63d2\u5165\u4f4d\u7f6e\uff0c\u82e5\u5f53\u524dblock\u5185\u6709\u5269\u4f59\u7a7a\u95f4\u53ef\u4ee5\u76f4\u63a5\u63d2\u5165\uff0c\u5426\u5219\u5c06\u6570\u636e\u5b58\u5165\u201c\u6ea2\u51fa\u5757\u201d\u4e2d\uff0c\u5229\u7528\u6307\u9488\u7ed3\u6784\u8fde\u63a5\u8d77\u6765\u3002</p> </li> <li> <p>\u5220\u9664\uff1a\u6539\u53d8\u6307\u9488\u6307\u5411\u4ee5\u6539\u53d8\u903b\u8f91\u5148\u540e\u5173\u7cfb\u3002\u7a7a\u4f59\u4f4d\u7f6e\u7684\u5904\u7406\u89c6\u5355\u6761\u6570\u636e\u7684\u7ed3\u6784\u800c\u5b9a\uff0c\u731c\u6d4b\u53ef\u4ee5\u7528\u94fe\u8868\u7ed3\u6784\u8fde\u63a5\u8d77\u6765\u3002</p> </li> </ul>"},{"location":"Database/#multitable-clustering","title":"Multitable Clustering","text":"<p>\u540c\u4e00\u4e2a\u6587\u4ef6\u9875\u4e2d\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u8868\uff0c\u53ef\u4ee5\u5229\u7528\u94fe\u8868\u7ed3\u6784\u8fde\u63a5\u8d77\u6765\uff0c\u4ee5\u52a0\u5feb\u5355\u8868\u67e5\u8be2\u901f\u5ea6\u3002</p> <ul> <li> <p>\u4f18\u70b9\uff1a</p> <p>\u52a0\u5feb\u4e86\u591a\u8868\u67e5\u8be2\uff0c\u7279\u522b\u662fjoin\u64cd\u4f5c</p> </li> <li> <p>\u7f3a\u70b9\uff1a</p> <p>\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f\uff0c\u964d\u4f4e\u4e86\u5b58\u50a8\u6548\u7387\uff0c\u5e76\u4e14\u8bbf\u95ee\u5355\u8868\u65f6\u9700\u8981\u8bfb\u53d6\u66f4\u591a\u7684block</p> <p>\u4e00\u65e6\u6709\u4e00\u5f20\u8868\u9700\u8981\u66f4\u65b0\uff0c\u6574\u4e2a\u6587\u4ef6\u9875\u90fd\u9700\u8981\u66f4\u65b0\uff0c\u5bfc\u81f4\u4e86\u5927\u91cf\u7684I/O\u64cd\u4f5c</p> </li> </ul>"},{"location":"Database/#table-partitioning","title":"Table Partitioning","text":"<p>\u67d0\u4e00\u4e9b\u8868\u53ef\u4ee5\u4ece\u7269\u7406\u4e0a\u5206\u4e3a\u591a\u4e2a\u6587\u4ef6\u4ee5\u914d\u5408\u5b9e\u9645\u4f7f\u7528\u60c5\u51b5\uff0c\u964d\u4f4e\u8868\u7684\u5927\u5c0f\uff0c\u63d0\u9ad8\u6570\u636e\u5e93\u6548\u7387\u3002</p> <p>Example</p> <p>\u4f8b\u5982\u9009\u8bfe\u4fe1\u606f\u8868\uff0c\u867d\u7136\u4ece\u903b\u8f91\u4e0a\u6240\u6709\u5b66\u5e74\u7684\u9009\u8bfe\u4fe1\u606f\u90fd\u5728\u540c\u4e00\u5f20\u8868\u4e0a\uff0c\u4f46\u662f\u56e0\u4e3a\u5f80\u5e74\u7684\u6570\u636e\u51e0\u4e4e\u4e0d\u9700\u8981\u589e\u5220\u67e5\u6539\uff0c\u6570\u636e\u64cd\u4f5c\u96c6\u4e2d\u4e8e\u5f53\u524d\u5b66\u5e74\uff0c\u6240\u4ee5\u53ef\u4ee5\u8fdb\u884c\u62c6\u5206\uff0c\u5c06\u5386\u53f2\u4fe1\u606f\u5b58\u50a8\u5230\u78c1\u76d8\u4e2d\uff0c\u53ea\u4fdd\u7559\u5f53\u524d\u5b66\u5e74\u7684\u6570\u636e\u5728\u5185\u5b58\u4e2d\uff0c\u4ece\u800c\u52a0\u901f\u67e5\u8be2\u3002</p>"},{"location":"Database/#b-tree-file-index","title":"B+ Tree File Index","text":"<p>B+\u6811\u4e0d\u4ec5\u53ef\u4ee5\u4f5c\u4e3a\u7d22\u5f15\u7684\u7ed3\u6784\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4f5c\u4e3a\u6587\u4ef6\u7ec4\u7ec7\u7684\u7ed3\u6784\u3002\u5728\u4e0b\u4e00\u7ae0\u4e2d\u4f1a\u8fdb\u884c\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"Database/#data-dictionarysystem-catalog-storage","title":"Data Dictionary\uff08System Catalog\uff09 Storage","text":"<p>\u4e0a\u9762\u7684\u4e09\u7c7b\u6587\u4ef6\u7ec4\u7ec7\u90fd\u662f\u5bf9\u5e93\u4e2d\u7684\u5b9e\u4f8b\u800c\u8a00\u7684\uff0c\u4f46\u662f\u6570\u636e\u5e93\u8fd8\u6709\u4e00\u4e9b\u6846\u67b6\u6027\u7684\u5168\u5c40\u7684\u4fe1\u606f\u9700\u8981\u50a8\u5b58\uff0c\u6211\u4eec\u79f0\u4e3a\u5143\u6570\u636eMetadata\u3002</p> <p></p> <p>\u4e3a\u4e86\u7b80\u5316\u7cfb\u7edf\u7684\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u524d\u9762\u7684\u6587\u4ef6\u7ec4\u7ec7\u7ed3\u6784\uff0c\u4f7f\u7528\u6570\u636e\u8868\u7684\u65b9\u5f0f\u50a8\u5b58\u5143\u6570\u636e\u3002</p>"},{"location":"Database/#buffer-management","title":"Buffer Management","text":"<p>\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u4e00\u4e2a\u91cd\u8981\u76ee\u6807\u5c31\u662f \u51cf\u5c11\u5185\u5b58\u548c\u78c1\u76d8\u4e4b\u95f4\u7684I/O\u64cd\u4f5c\uff0c\u8fd9\u5c31\u9700\u8981\u4e00\u4e2a\u7f13\u51b2\u533a\u7ba1\u7406\u5668\u3002</p>"},{"location":"Database/#pin","title":"Pin","text":"<p>\u9489\u4f4f\u6b63\u5728\u8bfb\u5199\u7684\u6570\u636e\u5757\u76f4\u5230\u64cd\u4f5c\u5b8c\u6210\uff0c\u9632\u6b62\u88ab\u66ff\u6362\u51fa\u53bb\u5f71\u54cd\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002</p> <p>\u5b9e\u73b0\u65f6\u53ef\u4ee5\u7528\u4e00\u4e2apin count\u6765\u8bb0\u5f55\u5f53\u524d\u88ab\u9489\u4f4f\u7684\u6b21\u6570\u4e5f\u5373\u627f\u8f7d\u7684\u64cd\u4f5c\u6570\uff0c\u5f53pin count\u4e3a0\u65f6\uff0c\u53ef\u4ee5\u88ab\u66ff\u6362\u51fa\u53bb\u3002</p>"},{"location":"Database/#lock","title":"Lock","text":"<ul> <li> <p>Exclusive Lock</p> <p>\u4e00\u822c\u7528\u4e8e\u5199\u64cd\u4f5c\uff0c\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u8bfb\u5199\u8be5\u6570\u636e\u5757\uff0c\u56e0\u6b64\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u6709\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u8be5\u6570\u636e\u5757\u52a0\u4e0aExclusive Lock\u3002</p> </li> <li> <p>Shared Lock</p> <p>\u4e00\u822c\u7528\u4e8e\u8bfb\u64cd\u4f5c\uff0c\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u5199\u8be5\u6570\u636e\u5757\u800c\u5f71\u54cd\u6570\u636e\u8bfb\u53d6\uff0c\u56e0\u6b64\u540c\u4e00\u65f6\u95f4\u53ef\u4ee5\u6709\u591a\u4e2a\u4e8b\u52a1\u5bf9\u8be5\u6570\u636e\u5757\u52a0\u4e0aShared Lock</p> </li> </ul>"},{"location":"Database/#buffer-replacement","title":"Buffer Replacement","text":"<p>\u6bcf\u6b21\u5411\u7f13\u5b58\u8bf7\u6c42\u6570\u636e\u65f6\uff0c\u82e5\u8be5\u6570\u636e\u5df2\u5728\u7f13\u5b58\u4e2d\uff0c\u76f4\u63a5\u8fd4\u56de\uff1b\u82e5\u4e0d\u5728\u7f13\u5b58\u4e2d\uff0c\u9700\u8981\u66ff\u6362\u4e00\u4e2a\u6570\u636e\u5757\u6765\u5b58\u653e\u65b0\u6570\u636e\uff0c\u5373\u5c06\u4e00\u4e2a\u6570\u636e\u5757\u5199\u56de\u78c1\u76d8\uff0c\u518d\u5c06\u65b0\u6570\u636e\u5757\u8bfb\u5165\u7f13\u5b58\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u6700\u5e38\u7528\u7684\u662fLUR\u7b56\u7565\uff0c\uff08L.east R.ecently U.sed Stratergy\uff09\uff0c\u5373\u6839\u636e\u201c\u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u5185\u5bb9\u66f4\u6709\u53ef\u80fd\u518d\u6b21\u88ab\u8bbf\u95ee\u201d\u7684\u539f\u5219\u7ba1\u7406\u7f13\u5b58\u5185\u5bb9\uff0c\u5c06\u6700\u4e45\u672a\u4f7f\u7528\u7684\u6570\u636e\u5757\u66ff\u6362\u51fa\u53bb\u3002</p> <p>\u4f46\u6570\u636e\u5e93\u7cfb\u7edf\u4e00\u822c\u57fa\u4e8e\u5386\u53f2\u4fe1\u606f\u548c\u6570\u636e\u60c5\u51b5\u8fdb\u884c\u9884\u6d4b\uff0c\u4f7f\u7528\u66f4\u590d\u6742\u66f4\u9ad8\u6548\u7684\u6df7\u5408\u7b56\u7565</p> <ul> <li>\u5176\u4ed6\u7b56\u7565\u3001</li> </ul> <p></p>"},{"location":"Database/#force-output","title":"Force Output","text":"<p>\u4e00\u822c\u7528\u4e8e\u5904\u7406\u7cfb\u7edf\u5d29\u6e83\u65f6\u7684\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898</p> <p></p>"},{"location":"Database/#_27","title":"\u5341\u56db\u7ae0 \u7d22\u5f15","text":"<p>\u7d22\u5f15\u662f\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u5b83\u53ef\u4ee5\u52a0\u901f\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u6027\u80fd\u3002</p> <p>\u4f46\u662f\u7d22\u5f15\u4f1a\u589e\u52a0\u6570\u636e\u5e93\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u5e76\u4e14\u9700\u8981\u5b9e\u65f6\u7ef4\u62a4\u3002</p>"},{"location":"Database/#_28","title":"\u987a\u5e8f/\u65e0\u5e8f\u7d22\u5f15","text":"<p>\u6307key\u6709\u4e00\u5b9a\u987a\u5e8f\u7684\u7d22\u5f15\u3002\u4e0e\u4e4b\u5bf9\u5e94\u7684\uff0c\u5178\u578b\u7684\u975e\u987a\u5e8f\u4f5c\u5f15\u4f8b\u5982\u54c8\u5e0c\u7d22\u5f15\u3002\u987a\u5e8f\u7d22\u5f15\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u6392\u5e8f\u89c4\u5219\u8fdb\u4e00\u6b65\u5206\u7c7b\uff1a</p> <ul> <li> <p>Primary Index (clustering index):</p> <p>\u7d22\u5f15\u7684\u987a\u5e8f\u4e0e\u7269\u7406\u50a8\u5b58\u7684\u987a\u5e8f\u5bf9\u5e94\u3002\uff08\u7269\u7406\u50a8\u5b58\u987a\u5e8f\u5f80\u5f80\u662f\u6839\u636ePrimary key\uff0c\u5f53\u7136\u8fd9\u91cc\u7684search key\u4e0d\u4e00\u5b9a\u8981\u6c42\u662fprimary key\uff09</p> </li> <li> <p>Secondary Index (non-clustering index):</p> <p>\u7d22\u5f15\u987a\u5e8f\u4e0e\u7269\u7406\u50a8\u5b58\u987a\u5e8f\u4e0d\u540c\uff0c\u6839\u636e\u4f7f\u7528\u9700\u6c42\u8bbe\u8ba1\u3002</p> <p>\u7531\u5b9a\u4e49\u53ef\u4ee5\u77e5\u9053\uff0c\u8f85\u52a9\u7d22\u5f15\u4e00\u5b9a\u662f\u4e0b\u9762\u63d0\u5230\u7684\u7a20\u5bc6\u7d22\u5f15\uff0c\u56e0\u4e3a\u4ed6\u65e0\u6cd5\u901a\u8fc7\u7269\u7406\u5b58\u50a8\u987a\u5e8f\u8fdb\u884c\u68c0\u7d22\u6570\u636e\u3002</p> </li> </ul> <p>Note</p> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5f53\u9700\u8981\u7ebf\u6027\u626b\u63cf\u65f6\uff0cPrimary Index\u7684\u6548\u7387\u66f4\u9ad8\uff0c\u56e0\u4e3a\u5b83\u7684\u987a\u5e8f\u4e0e\u7269\u7406\u5b58\u50a8\u987a\u5e8f\u4e00\u81f4\uff1b\u800c\u8f85\u52a9\u7d22\u5f15\u53ef\u80fd\u9700\u8981\u5728\u591a\u4e2a\u6570\u636e\u5757\u95f4\u8df3\u8dc3</p>"},{"location":"Database/#_29","title":"\u7a20\u5bc6/\u7a00\u758f\u7d22\u5f15","text":"<ul> <li> <p>Dence Index \u7a20\u5bc6\u7d22\u5f15</p> <p>\u6307\u6bcf\u4e00\u4e2asearch key\u7684\u503c\u90fd\u5728\u7d22\u5f15\u5217\u8868\u4e2d\u51fa\u73b0</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li> <p>\u82e5\u63d2\u5165\u7684key\u503c\u5728\u7d22\u5f15\u4e2d\u4e0d\u5b58\u5728\uff0c\u76f4\u63a5\u63d2\u5165\u5230\u5408\u9002\u7684\u4f4d\u7f6e</p> </li> <li> <p>\u82e5\u63d2\u5165\u7684key\u503c\u5728\u7d22\u5f15\u4e2d\u5b58\u5728\uff0c\u6839\u636e\u7d22\u5f15\u60c5\u51b5\u5224\u65ad\uff1a</p> <ul> <li> <p>\u82e5\u7d22\u5f15\u5b58\u50a8\u6240\u6709\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u76f4\u63a5\u63d2\u5165\u5230\u5408\u9002\u7684\u4f4d\u7f6e</p> </li> <li> <p>\u82e5\u7d22\u5f15\u4ec5\u5b58\u50a8\u76f8\u540c\u641c\u7d22\u7801\u503c\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u5219\u628a\u63d2\u5165\u7684\u8bb0\u5f55\u63d2\u5165\u5230\u8be5\u7ec4\u8bb0\u5f55\u7684\u540e\u9762</p> </li> </ul> </li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u82e5\u5220\u9664\u7684\u7d22\u5f15\u552f\u4e00\uff0c\u76f4\u63a5\u5220\u9664</p> </li> <li> <p>\u540c\u6837\u8003\u8651\u7d22\u5f15\u5b58\u50a8\u60c5\u51b5</p> <ul> <li> <p>\u82e5\u7d22\u5f15\u5b58\u50a8\u6240\u6709\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u76f4\u63a5\u5220\u9664\uff1b</p> </li> <li> <p>\u82e5\u7d22\u5f15\u4ec5\u5b58\u50a8\u76f8\u540c\u641c\u7d22\u7801\u503c\u7684\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u76f4\u63a5\u5220\u9664\u8bb0\u5f55\uff0c\u82e5\u6070\u597d\u4e3a\u7b2c\u4e00\u4e2a\u8bb0\u5f55\uff0c\u5219\u5220\u9664\u540e\u5c06\u6307\u9488\u6307\u5411\u4e0b\u4e00\u4e2a\u8bb0\u5f55</p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>Sparse Index \u7a00\u758f\u7d22\u5f15</p> <p>\u6307\u53ea\u6709\u90e8\u5206search key\u7684\u503c\u5728\u7d22\u5f15\u5217\u8868\u4e2d\u51fa\u73b0</p> <ul> <li> <p>\u63d2\u5165</p> <ul> <li>\u76f4\u63a5\u5c06\u8bb0\u5f55\u63d2\u5165\u5230\u5408\u9002\u7684\u4f4d\u7f6e\uff0c\u82e5\u6070\u597d\u4e3a\u5f53\u524d\u5757\u7684\u7b2c\u4e00\u6761\uff0c\u5219\u66f4\u65b0\u7d22\u5f15</li> </ul> </li> <li> <p>\u5220\u9664</p> <ul> <li> <p>\u76f4\u63a5\u5220\u9664\u8bb0\u5f55</p> </li> <li> <p>\u82e5\u8be5\u8bb0\u5f55\u6709\u7d22\u5f15\u6307\u5411\uff1a</p> <ul> <li> <p>\u82e5\u8be5\u8bb0\u5f55\u7684\u641c\u7d22\u7801\u503c\u552f\u4e00\uff0c\u5219\u7528\u4e0b\u4e00\u4e2a\u641c\u7d22\u7801\u503c\u7684\u6307\u9488\u66ff\u4ee3\uff08\u82e5\u4e0b\u4e00\u4e2a\u641c\u7d22\u7801\u503c\u5df2\u7ecf\u5b58\u5728\u7d22\u5f15\u4e2d\uff0c\u5219\u76f4\u63a5\u5220\u9664\u5f53\u524d\u7d22\u5f15\uff09 </p> </li> <li> <p>\u82e5\u8be5\u8bb0\u5f55\u7684\u641c\u7d22\u7801\u503c\u4e0d\u552f\u4e00\uff0c\u5219\u5c06\u7d22\u5f15\u6307\u5411\u4e0b\u4e00\u4e2a\u8bb0\u5f55</p> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>\u7a00\u758f\u7d22\u5f15\u53ef\u4ee5\u591a\u7ea7\u5d4c\u5957\uff0c\u914d\u5408\u987a\u5e8f\u7d22\u5f15\u5c31\u662fB+\u6811\uff08\u5f53\u7136\u8fd8\u8981\u9644\u52a0\u5176\u4ed6\u4e00\u4e9b\u7ea6\u675f\uff09</p>"},{"location":"Database/#composite-search-key","title":"\u591a\u503c\u7d22\u5f15\uff08Composite Search Key\uff09","text":"<p>\u4e00\u822c\u6309\u7167\u7c7b\u4f3c\u5b57\u5178\u5e8f\u7684\u65b9\u5f0f\u8fdb\u884c\u6392\u5e8f</p>"},{"location":"Database/#b","title":"B+\u6811\u7d22\u5f15","text":"<p>\u548cADS\u8bfe\u4e0a\u7684\u7248\u672c\u7565\u6709\u4e0d\u540c\uff0c\u8981\u975e\u5e38\u5c0f\u5fc3</p> <p></p> <p>Note</p> <p>\u6ce8\u610f\u8fd9\u91cc\u7684 n \u4e00\u81f4\u6307\u4e0a\u9762\u56fe\u4e2d\u7684 n</p> <p>\u6839\u8282\u70b9\uff1a\\([2, n]\\) \u4e2a\u5b69\u5b50\u6307\u9488</p> <p>\u5185\u90e8\u8282\u70b9\uff1a\\([\\lceil \\frac{n}{2} \\rceil, n]\\) \u4e2a\u5b69\u5b50\u6307\u9488</p> <p>\u53f6\u5b50\u8282\u70b9\uff1a\\([\\lceil \\frac{n-1}{2} \\rceil, n-1]\\) \u4e2a\u8bb0\u5f55\u5bf9\uff08\u641c\u7d22\u7801+\u8bb0\u5f55\u6307\u9488\uff09\uff0c\u6700\u540e\u4e00\u4e2a\uff08\u5373\u4e0a\u56fe\u7684Pn\uff09\u6307\u5411\u4e0b\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u4ece\u800c\u5c06\u5e95\u5c42\u8bb0\u5f55\u4e32\u8054\u6210\u7ebf\u6027\u8868</p> <p>\u4e00\u4e2a\u9875\u4e2d\u53ef\u4ee5\u5b58\u653e\u7684B+\u6811\u7d22\u5f15\u4e2a\u6570\u4e3a\uff1a $$ \u5355\u9875\u4e2d\u7d22\u5f15\u4e2a\u6570n=\\frac{\u9875\u5927\u5c0f-\u6307\u9488\u5927\u5c0f}{\u7d22\u5f15\u6570\u636e\u5927\u5c0f+\u6307\u9488\u5927\u5c0f}+1 $$</p> <p>\u6811\u7684\u9ad8\u5ea6</p> \\[h \\leq \\lceil \\log_{\\lceil \\frac{n}{2} \\rceil} K \\rceil\\] \u8ba1\u7b97 <p></p> <ul> <li> <p>Operations</p> <p>\u4e0eADS\u8bfe\u4e0a\u6240\u5b66\u57fa\u672c\u4e00\u81f4\uff0c\u7565</p> <p>\u4e00\u822c\u524d\u9762\u8282\u70b9\u5206\u5230 \\(\\lceil \\frac{n}{2} \\rceil\\) \u4e2akey</p> </li> <li> <p>Extensions</p> <ul> <li> <p>\u5bf9\u4e8eNon-Unique\u7684\u641c\u7d22\u7801\uff0c\u53ef\u4ee5\u9644\u52a0\u8bb0\u5f55\u7684\u4e3b\u952e\u5c06\u5176\u7ec4\u6210\u4e00\u4e2a\u590d\u5408\u641c\u7d22\u7801\uff0c\u4ece\u800c\u5b9e\u73b0Unique\u7d22\u5f15\u3002</p> </li> <li> <p>B+\u6811\u6587\u4ef6\u7ed3\u6784\uff0c\u53f6\u8282\u70b9\u4e0d\u662f\u6307\u9488\u800c\u662f\u8bb0\u5f55\u672c\u8eab\u5373\u53ef</p> B+\u6811\u6587\u4ef6\u7d22\u5f15 <p></p> <p></p> </li> <li> <p>\u8f85\u52a9\u7d22\u5f15\u7684\u8bb0\u5f55\u91cd\u5b9a\u4f4d\u4ee3\u4ef7\u8f83\u9ad8\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba9\u8f85\u52a9\u7d22\u5f15\u7684\u53f6\u7ed3\u70b9\u76f4\u63a5\u5b58\u50a8\u641c\u7d22\u7801\u800c\u4e0d\u662f\u8bb0\u5f55\u6307\u9488\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u91cd\u5b9a\u4f4d\u4ee3\u4ef7\uff08\u5373\u66f4\u65b0\u7d22\u5f15\u7684\u4ee3\u4ef7\uff09\uff0c\u4f46\u662f\u5728\u67e5\u8be2\u65f6\u9700\u8981\u989d\u5916\u4ee3\u4ef7\u4f5c\u76f8\u5e94\u641c\u7d22\u7801\u67e5\u627e</p> </li> <li> <p>\u5b57\u7b26\u4e32\u7d22\u5f15\uff0c\u8fdb\u884c\u524d\u7f00\u538b\u7f29\uff0c\u4ece\u800c\u51cf\u5c11\u7d22\u5f15\u7684\u5927\u5c0f</p> </li> <li> <p>\u591a\u7801\u8bbf\u95ee</p> <ul> <li> <p>\u591a\u4e2a\u5355\u7801\u7d22\u5f15</p> </li> <li> <p>\u4f7f\u7528\u591a\u503c\u7d22\u5f15</p> </li> <li> <p>\u8986\u76d6\u7d22\u5f15\uff0c\u5373\u5728\u7d22\u5f15\u4e2d\u76f4\u63a5\u5b58\u50a8\u4e00\u4e9b\u6570\u636e\uff0c\u8fd9\u6837\u76f4\u63a5\u67e5\u8be2\u7d22\u5f15\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u518d\u53bb\u67e5\u8be2\u6570\u636e\u8868</p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"Database/#_30","title":"\u76f8\u5173\u4f18\u5316","text":"<ul> <li> <p>\u6279\u91cf\u63d2\u5165BULK LOADING\uff1a</p> <ul> <li> <p>\u4e00\u4e2a\u4e00\u4e2a\u63d2\u5165\u663e\u7136\u4ee3\u4ef7\u8fc7\u9ad8</p> </li> <li> <p>\u63d2\u5165\u4e4b\u524d\u5148\u8fdb\u884c\u6392\u5e8f\uff0c\u6bd4\u4e71\u5e8f\u63d2\u5165\u66f4\u65b0\u7d22\u5f15\u7684\u4ee3\u4ef7\u5c0f\uff0c\u56e0\u4e3a\u76f8\u5f53\u4e8e\u4ece\u5de6\u5f80\u53f3\u7f13\u7f13\u5c55\u5f00B+\u6811\uff0c\u6bcf\u4e2a\u8282\u70b9\u53ea\u9700\u8981\u5199\u4e00\u6b21\uff1b\u5426\u5219\uff0c\u5f53\u6811\u6bd4\u8f83\u5927\u5185\u5b58\u5b58\u4e0d\u4e0b\u65f6\uff0c\u540c\u4e00\u4e2a\u8282\u70b9\u5c31\u53ef\u80fd\u591a\u6b21\u5199\uff0c\u8fd9\u663e\u7136\u5bf9\u4e8e\u6548\u7387\u7684\u5f71\u54cd\u662f\u81f4\u547d\u7684\u3002\u4e0d\u8fc7\uff0c\u8fd9\u6837\u7684\u8bdd\u4f1a\u6bcf\u4e2a\u8282\u70b9\u4f1a\u4e0d\u6ee1\u4e00\u70b9\u3002</p> <p></p> </li> <li> <p>\u5bf9B+\u6811\uff0c\u6279\u91cf\u63d2\u5165\u8fd8\u53ef\u4ee5\u6392\u5e8f\u540e\u76f4\u63a5\u5efa\u53f6\u8282\u70b9\uff0c\u7136\u540e\u81ea\u53f6\u5411\u6839\u53d6\u6bcf\u4e00\u5757\u7684\u6700\u5c0f\u503cBottom-up\u5efa\u6811\uff0c\u51cf\u5c11\u4e86\u63d2\u5165\u65f6\u7684IO\u64cd\u4f5c\uff0c\u5e76\u4e14\u8fd9\u6837\u7684\u6811\u7684\u8282\u70b9\u57fa\u672c\u90fd\u662f\u6ee1\u7684\u3002</p> </li> </ul> </li> <li> <p>\u5185\u5b58\u7d22\u5f15\uff1a</p> <ul> <li> <p>\u5bf9disk\u800c\u8a00\uff0c\u4e0e\u78c1\u76d8\u9875\u5927\u5c0f\u76f8\u5339\u914d\u7684size\u7684\u7d22\u5f15\u66f4\u5feb\uff0c\u56e0\u4e3a\u78c1\u76d8IO\u7684\u6700\u5c0f\u5355\u4f4d\u662f\u6247\u533a</p> </li> <li> <p>\u800c\u5bf9mem\u548ccache\u800c\u8a00\uff0c\u5c0f\u8282\u70b9size\u66f4\u5feb\u56e0\u4e3a\u968f\u673a\u8bbf\u95ee\u6027\u80fd\u9ad8\u5f97\u591a\u5e76\u4e14\u6ca1\u6709\u6247\u533a\u5927\u5c0f\u9650\u5236</p> </li> </ul> </li> <li> <p>\u5199\u4f18\u5316 - LSM-Tree(Log Structured Merge Tree)\uff1a</p> <ul> <li> <p>\u591a\u7ea7\u6811\u578b\u7d22\u5f15\u5206\u522b\u653e\u5728\u4e0d\u540c\u5c42\u6b21\u7684\u50a8\u5b58\u4e0a</p> <p></p> <ul> <li> <p>\u4fdd\u8bc1\u4e86\u5199\u5165\u7684\u901f\u5ea6\uff0c\u5e76\u5145\u5206\u5229\u7528\u4e86\u7a7a\u95f4\uff08\u5148\u5f80\u66f4\u5feb\u7684mem\u5199\uff0c\u5199\u6ee1\u540e\u518d\u4e00\u6b21\u6027\u5411\u4e0b\u5408\u5e76\u5b8c\u6210\u5199\u5165\uff09</p> </li> <li> <p>\u51cf\u5c11\u4e86\u78c1\u76d8\u7684\u5199\u5165\u91cf\uff08\u56e0\u4e3a\u78c1\u76d8IO\u7684\u6700\u5c0f\u5355\u4f4d\u662f\u6247\u533a\uff0c\u5355\u6b21\u5927\u91cf\u5199\u5165\u5bf9\u78c1\u76d8\u7684\u6d88\u8017\u8fdc\u5c0f\u4e8e\u591a\u6b21\u5c11\u91cf\u5199\u5165\uff09</p> </li> <li> <p>\u4f46\u662f\u635f\u5931\u4e86\u67e5\u8be2\u7684\u901f\u5ea6\uff08\u8981\u5728\u591a\u68f5\u6811\u91cc\u627e\uff09\uff0c\u5e76\u4e14\u540c\u4e00\u6570\u636e\u53ef\u80fd\u5728\u591a\u68f5\u6811\u4e2d\u88ab\u62f7\u8d1d</p> </li> </ul> </li> <li> <p>\u5982\u679c\u6bcf\u4e00\u5c42\u7ea7\u5141\u8bb8\u540c\u65f6\u5b58\u5728\u591a\u68f5\u6811\uff0c\u79f0\u4e3aSetpped-merge index\u3002\u8fdb\u4e00\u6b65\u7528\u7f16\u7a0b\u96be\u5ea6\u3001\u7a7a\u95f4\u590d\u6742\u5ea6\u548c\u67e5\u8be2\u901f\u5ea6\u6362\u5199\u901f\u5ea6\u3002</p> </li> <li> <p>\u5176\u4ed6\u64cd\u4f5c\uff1a</p> <ul> <li> <p>\u5220\u9664\uff1a \u91c7\u7528\u6253\u6807\u8bb0\u7684\u61d2\u60f0\u5220\u9664\uff0c\u53ea\u6709\u5728\u5408\u5e76\u65f6\u624d\u771f\u6b63\u5220\u9664</p> </li> <li> <p>\u66f4\u65b0\uff1a \u91c7\u7528\u63d2\u5165\u65b0\u503c+\u5220\u9664\u65e7\u503c\u7684\u65b9\u5f0f</p> </li> </ul> </li> </ul> </li> <li> <p>\u5199\u4f18\u5316 - Buffer Tree</p> <ul> <li> <p>\u4e0eLSM-Tree\u6709\u4e9b\u7c7b\u4f3c\uff0c\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u90fd\u6709\u4e00\u4e2abuffer\uff0c\u7528\u4e8e\u7f13\u5b58\u5199\u5165\u7684\u6570\u636e\uff0c\u5f53buffer\u6ee1\u4e86\u4e4b\u540e\u7ee7\u7eed\u5411\u4e0b\u5199\u5165</p> <p></p> </li> <li> <p>\u540c\u6837\u53ef\u4ee5\u5b9e\u73b0\u5927\u89c4\u6a21\u5199\u5165\u4f18\u5316\uff0c\u5e76\u4e14\u67e5\u8be2\u901f\u5ea6\u4e5f\u4e0d\u4f1a\u53d7\u5230\u592a\u5927\u5f71\u54cd</p> </li> <li> <p>\u4f46\u662f\u76f8\u6bd4LSM-Tree\uff0cBuffer Tree\u7684Random I/O\u8fd8\u662f\u4f1a\u76f8\u5bf9\u591a\u4e00\u4e9b\uff0c\u56e0\u4e3a\u6ca1\u6709\u4e25\u683c\u4fdd\u6301\u6709\u5e8f </p> </li> </ul> </li> </ul>"},{"location":"Database/#hash","title":"Hash\u7d22\u5f15","text":"<ul> <li> <p>\u9759\u6001\u6563\u5217</p> <ul> <li> <p>\u4f7f\u7528\u6ea2\u51fa\u6876\u6765\u89e3\u51b3\u6876\u6ea2\u51fa\uff08\u6876\u4e0d\u8db3\u3001\u504f\u659c\uff09</p> </li> <li> <p>\u89e3\u51b3\u51b2\u7a81\u53ef\u4ee5\u7528\u94fe\u8868\u3001\u5f00\u653e\u5bfb\u5740\u6cd5\u7b49</p> </li> <li> <p>\u53ef\u4ee5\u5468\u671f\u6027rehash, \u76f8\u5f53\u4e8e\u91cd\u5efa\u6574\u4e2a\u54c8\u5e0c\u8868\uff0c\u4f46\u662f\u4ee3\u4ef7\u8f83\u9ad8 </p> </li> </ul> </li> <li> <p>\u52a8\u6001\u6563\u5217</p> <ul> <li> <p>Periodic ReHashing\uff0c\u5468\u671f\u6027\u5c06\u6876\u7684\u4e2a\u6570\u7ffb\u500d</p> </li> <li> <p>Linear Hashing\uff0c \u589e\u5927rehash\u7684\u6761\u4ef6</p> </li> <li> <p>Extendable Hashing\uff0c\u751f\u6210\u7684\u54c8\u5e0c\u503c\u4e3a\u591a\u4f4d\uff0c\u4f46\u4f7f\u7528\u7684\u504f\u79fb\u5730\u5740\u7684\u4f4d\u6570\u662f\u9010\u6e10\u589e\u52a0\u7684\uff08\u5373\u76f8\u5f53\u4e8e\u4f9d\u636e\u5f53\u524d\u7684\u6570\u636e\u91cf\u7ffb\u500d\u5bb9\u91cf\uff09</p> </li> </ul> </li> </ul>"},{"location":"Database/#bitmap","title":"Bitmap\u7d22\u5f15","text":"<ul> <li> <p>\u672c\u8d28\u4e0a\u5c31\u662f\u7528\u4e00\u4e2a\u7b80\u5355\u6570\u7ec4bitmap\u6765\u6620\u5c04\u7d22\u5f15\u5173\u7cfb\uff0c\u9002\u7528\u4e8e\u6570\u636e\u91cf\u5927\uff0c\u53d6\u503c\u8303\u56f4\u5c0f\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u53ef\u4ee5\u964d\u4f4e\u7d22\u5f15\u7684\u7a7a\u95f4\u4ee3\u4ef7</p> <p>\u6bd4\u5982\u4e0b\u56fe\uff0c\u76f8\u540c\u4e3a1,\u4e0d\u540c\u4e3a0\uff0c\u957f\u5ea6 = \u8bb0\u5f55\u603b\u6570</p> <p></p> </li> <li> <p>\u6838\u5fc3\u4f18\u52bf\u5728\u4e8e\u4f4d\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5feb\u901f\u8fdb\u884c\u4f4d\u8fd0\u7b97\uff0c\u5982AND\u3001OR\u3001NOT\u7b49\uff0c\u56e0\u6b64\u9002\u7528\u4e8e\u591a\u503c\u67e5\u8be2\uff0c\u5982\u591a\u503c\u67e5\u8be2\u3001\u8303\u56f4\u67e5\u8be2\u7b49</p> </li> </ul>"},{"location":"Database/#_31","title":"\u5341\u4e94\u7ae0 \u67e5\u8be2\u64cd\u4f5c","text":"<p>\u5bf9\u6570\u636e\u5e93\u7684\u4efb\u4f55\u4e00\u4e2a\u67e5\u8be2\u64cd\u4f5c\u90fd\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e00\u4e0b\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u89e3\u6790\u548c\u7ffb\u8bd1\uff1a\u68c0\u67e5\u6240\u8f93\u5165\u8bed\u53e5\u7684\u8bed\u6cd5\u6b63\u786e\u6027\uff0c\u5e76\u5c06\u5176\u7ffb\u8bd1\u6210\u673a\u5668\u80fd\u591f\u8bfb\u61c2\u7684\u5f62\u5f0f\u3002</p> </li> <li> <p>\u4f18\u5316\uff1a\u4ece\u4f17\u591a\u53ef\u9009\u7684\u6267\u884c\u65b9\u6cd5\u4e2d\u9009\u62e9\u6700\u4f18\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p> </li> <li> <p>\u6267\u884c\uff1a\u6309\u7167\u524d\u4e00\u6b65\u51b3\u5b9a\u7684\u65b9\u6cd5\u6267\u884c\u5e76\u8fd4\u56de\u7ed3\u679c\u3002</p> </li> </ol> <p>\u8003\u8651\u7684\u53c2\u6570\uff1a</p> <p></p> <p>\uff08\u4e00\u822c\u6765\u8bf4seek\u65f6\u95f4\u5927\u4e8etransfer\u65f6\u95f4\uff09</p>"},{"location":"Database/#selection","title":"Selection","text":""},{"location":"Database/#equations","title":"Equations","text":"<ul> <li> <p>A1 (Linear Scan)</p> <p>\u7ebf\u6027\u626b\u63cf\uff0c\u901a\u8fc7\u4e00\u6b21\u5bfb\u9053\u627e\u5230\u8d77\u59cb\u4f4d\u7f6e\uff0c\u7136\u540e\u626b\u63cf\u6240\u6709\u6570\u636e\u5757\uff08\u540c\u6837\u5f88\u5bb9\u6613\u5e94\u7528\u5230\u4efb\u4f55\u6761\u4ef6\u7684\u67e5\u8be2\uff09</p> <p>\u6240\u9700\u7684\u65f6\u95f4\u662f\\(b_r\\times t_T+ 1 \\times t_s\\)\uff08\\(b_r\\)\u4e3a\u6570\u636e\u8868\u6240\u542b\u7684\u6570\u636e\u5757\u4e2a\u6570\uff09</p> <p>\u5f53\u5c5e\u4e8e\u952e\u503c\u8bb0\u5f55\u67e5\u627e\uff08\u627e\u5230\u5c31\u505c\uff09\u65f6\uff0c\u5e73\u5747\u65f6\u95f4\u4e3a\\(\\frac{b_r}{2} \\times t_T+ 1 \\times t_s\\)</p> </li> <li> <p>A2/A3 (Primary Index Scan)</p> <p>\u5229\u7528\u7d22\u5f15\u4f18\u5316\u67e5\u8be2\u901f\u5ea6\uff0c\u540c\u6837\u8003\u8651\u5355\u70b9key\u67e5\u8be2\u4e0e\u591a\u6570\u636e\u67e5\u8be2</p> <ul> <li> <p>\u5355\u70b9\u67e5\u8be2\uff08key\uff09\uff0c\u5148\u901a\u8fc7\u7d22\u5f15\u6811\u7ed3\u6784\u5b9a\u4f4d\u5230\u6570\u636e\u5e93\uff0c\u518d\u901a\u8fc7\u4e00\u6b21\u5b9a\u4f4d+\u8bfb\u53d6\u83b7\u5f97\u5bf9\u5e94\u6570\u636e\u5185\u5bb9</p> <p>\u65f6\u95f4\u4ee3\u4ef7\u4e3a\\((h_i+1)\\times (t_T+t_s)\\)\uff0c\u5176\u4e2d\\(h_i\\)\u662f\u7d22\u5f15\u7684\u5c42\u6570</p> </li> <li> <p>\u591a\u70b9\u67e5\u8be2\uff08non-key\uff09\uff0c\u6700\u540e\u53ef\u80fd\u8981\u5230\u591a\u4e2a\u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\uff0c\u56e0\u6b64\u8981\u989d\u5916\u7684\u4e00\u6b21\u5b9a\u4f4d+\u591a\u6b21\u8bfb\u53d6\u6570\u636e\u5757</p> <p>\u65f6\u95f4\u4ee3\u4ef7\u4e3a\\(h_i \\times (t_T + t_s) + t_s + b \\times t_T\\)\uff0c\\(b\\)\u4e3a\u6d89\u53ca\u7684\u6570\u636e\u5757</p> </li> </ul> </li> <li> <p>A4 (Secondary Index scan)</p> <p>\u5229\u7528\u8f85\u52a9\u7d22\u5f15\u8fdb\u884c\u641c\u7d22\u3002</p> <ul> <li> <p>\u5355\u70b9\u67e5\u8be2\uff08key\uff09\u4e0e\u805a\u96c6\u7d22\u5f15\u76f8\u540c\uff0c\u4e3a\\((h_i+1)\\times (t_T+t_s)\\)</p> </li> <li> <p>\u591a\u70b9\u67e5\u8be2\uff08non-key\uff09\uff0c\u65e0\u6cd5\u901a\u8fc7\u4e00\u6b21\u5b9a\u4f4d\u540e\u987a\u5e8f\u626b\u63cf\uff0c\u56e0\u6b64\u9700\u8981\u5728\u7d22\u5f15\u6811\u4e0a\u591a\u6b21\u5b9a\u4f4d+\u8bfb\u53d6\u6570\u636e\u5757</p> <p>\u65f6\u95f4\u4ee3\u4ef7\u4e3a\\((h_i + b)\\times (t_T + t_s)\\)\uff0c\\(b\\)\u4e3a\u6d89\u53ca\u7684\u6570\u636e\u5757 </p> </li> </ul> </li> </ul>"},{"location":"Database/#comparison","title":"Comparison","text":"<p>\u76f4\u63a5\u4f7f\u7528\u7ebf\u6027\u626b\u63cf\u80af\u5b9a\u6ca1\u6709\u95ee\u9898\uff0c\u4e0b\u9762\u662f\u4f7f\u7528\u7d22\u5f15\u8f85\u52a9\u7684\u65b9\u6cd5</p> <ul> <li> <p>A5\uff08Clustered Index Scan\uff09</p> <p></p> </li> <li> <p>A6\uff08Non-Clustered Index Scan\uff09</p> <p>\uff08\u975e\u805a\u96c6\u7d22\u5f15\uff0c\u6bcf\u6b21\u90fd\u5fc5\u987b\u91cd\u65b0seek+transfer\uff09</p> <p></p> </li> </ul>"},{"location":"Database/#conjunction","title":"Conjunction","text":"<ul> <li> <p>A7</p> <p>\u83b7\u53d6\u6ee1\u8db3\u90e8\u5206\u6761\u4ef6\uff08\u4f30\u8ba1\u4ee3\u4ef7\u6700\u5c0f\uff09\u7684\u6570\u636e\u5b58\u5165\u7f13\u51b2\u533a\uff0c\u68c0\u67e5\u5176\u4ed6\u6761\u4ef6\u662f\u5426\u6ee1\u8db3</p> </li> <li> <p>A8</p> <p>\u901a\u8fc7\u590d\u5408\u7d22\u5f15\u8fdb\u884c\u76f4\u63a5\u67e5\u8be2</p> </li> <li> <p>A9</p> <p>\u6bcf\u6b21\u5c06\u7ed3\u679c\u96c6\u5408\u505a\u4ea4\u96c6</p> </li> </ul> <p></p>"},{"location":"Database/#disjunction","title":"Disjunction","text":"<ul> <li> <p>A10</p> <p>\u5bf9\u7ed3\u679c\u96c6\u5408\u6c42\u5e76\u96c6</p> <p>\u5bb9\u65a5\u539f\u7406\u6c42\u8865\u96c6</p> </li> </ul> <p></p>"},{"location":"Database/#bitmap-index-scan","title":"Bitmap Index Scan","text":"<p>\u5e73\u8861\u8f85\u52a9\u7d22\u5f15\u67e5\u8be2\uff08\u6563\u70b9\u67e5\u8be2\u5feb\uff09\u4e0e\u76f4\u63a5\u626b\u63cf\uff08\u591a\u6570\u636e\u65f6\u5feb\uff09\u7684\u6548\u7387\uff0c\u76f8\u5f53\u4e8e\u628a\u7269\u7406\u5b58\u50a8\u7684\u6709\u5e8f\u6027\u91cd\u65b0\u7ec4\u7ec7\u51fa\u6765\uff0c\u4ece\u800c\u964d\u4f4eIO\u64cd\u4f5c\u7684\u4ee3\u4ef7</p> <p></p>"},{"location":"Database/#external-sort","title":"External Sort","text":"<p>\u6570\u636e\u7684\u8f6c\u79fb\u9700\u8981\u5728buffer\u4e2d\u8fdb\u884c\uff0c\u4f46\u53ef\u80fd\u6570\u636e\u8fc7\u5927\uff0c\u65e0\u6cd5\u5b8c\u6574\u5199\u5165buffer,\u56e0\u6b64\u9700\u8981\u5206\u6bb5\u8fdb\u884c\u591a\u8def\u5f52\u5e76\u6392\u5e8f</p> <p>\u5177\u4f53\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u5c06\u6570\u636e\u6309\u7167 \u7f13\u51b2\u533ablock\u6570\u76eeM \u5206\u6210N\u6bb5run\uff0c\u6bcf\u6bb5\u5185\u53ef\u4ee5\u8c03\u7528\u5185\u90e8\u6392\u5e8f\u7b97\u6cd5\u8fdb\u884c\u6392\u5e8f</p> </li> <li> <p>\u5c06\u81f3\u591aM-1\u6bb5\u5b58\u5165\u7f13\u51b2\u533a\uff08\u6b64\u65f6\u53ef\u4ee5\u5c06\u7406\u89e3\u4e3a\u5b58\u4e86M-1\u6bb5\u7684\u6307\u9488\uff09\uff0c\u5269\u4e0b\u4e00\u6bb5\u4f5c\u4e3a\u8f93\u51fa\u6307\u9488\uff0c\u6267\u884c\u591a\u8def\u6392\u5e8f\u7b97\u6cd5</p> <p>\u5bf9\u5f53\u524d\u6240\u6709\u7684run\u8fdb\u884c\u4e00\u8f6emerge, \u6b64\u65f6\u6bcfM-1\u6bb5\u5408\u5e76\u6210\u4e86\u4e00\u6bb5</p> </li> <li> <p>\u91cd\u590d\u8fc7\u7a0b2\u76f4\u81f3\u6240\u6709\u6bb5\u5408\u5e76\u6210\u4e00\u6bb5</p> </li> </ol> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1a</p> <p>\u8003\u8651\u5230\u5408\u5e76\u65f6\u6bcf\u4e00\u6bb5\u4f7f\u7528\u4e00\u4e2ablock\u6240\u8017\u8d39\u7684seek\u7684\u6570\u91cf\u592a\u591a\uff0c\u6548\u7387\u4e0b\u964d\uff0c\u53ef\u4ee5\u8003\u8651\\(b_b\\)\u4e2ablock\u4f5c\u4e3a\u521d\u59cb\u7684\u6bb5\u957f</p> <ul> <li> <p>\u6bcf\u6b21\u5408\u5e76\u7684\u6bb5\u6570\uff1a\\(\\lfloor \\frac{M}{b_b} \\rfloor - 1\\)</p> </li> <li> <p>\u5408\u5e76\u7684\u603b\u8f6e\u6570\uff08pass\uff09\uff1a\\(\\lceil \\log_{\\lfloor \\frac{M}{b_b} \\rfloor - 1} (\\lceil \\frac{b_r}{M} \\rceil) \\rceil\uff08\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662fN = \\frac{b_r}{M}\uff09\\)</p> </li> <li> <p>Transfer</p> <ul> <li> <p>\u6bcf\u8f6e\u7684transfer\uff08\u7ebf\u6027\uff0c\u8bfb+\u5199\uff09\uff1a\\(2b_r\\)</p> </li> <li> <p>\u603btransfer\uff08\u5ffd\u7565\u6700\u540e\u4e00\u6b21\u7684\u5199\uff0c\u56e0\u4e3a\u53ef\u80fd\u4f5c\u4e3a\u67d0\u4e2a\u8f93\u51fa\u800c\u4e0d\u5199\uff09\uff1a\\(b_r \\times (2\\lceil \\log_{\\lfloor \\frac{M}{b_b} \\rfloor - 1} (\\lceil \\frac{b_r}{M} \\rceil) \\rceil + 1)\\)</p> </li> </ul> </li> <li> <p>Seek</p> <ul> <li> <p>\u751f\u6210\u521d\u59cb\u7684run\uff08\u7ebf\u6027\u8bfb+\u5199\uff09\uff1a\\(2 \\lceil \\frac{b_r}{M} \\rceil\\)</p> </li> <li> <p>\u6bcf\u8f6e\u7684seek\uff1a\\(2 \\lceil \\frac{b_r}{b_b} \\rceil\\)</p> </li> <li> <p>\u603bseek\uff08\u540c\u6837\u5ffd\u7565\u6700\u540e\u4e00\u6b21\u5199\uff09\uff1a\\(2 \\lceil \\frac{b_r}{M} \\rceil + \\lceil \\frac{b_r}{b_b} \\rceil \\times 2(\\lceil \\log_{\\lfloor \\frac{M}{b_b} \\rfloor - 1} (\\lceil \\frac{b_r}{M} \\rceil) \\rceil - 1)\\) </p> </li> </ul> </li> </ul>"},{"location":"Database/#join_1","title":"Join","text":""},{"location":"Database/#nested-loop-join","title":"Nested-Loop Join","text":"<p>Worst Case\uff1a buffer\u53ea\u67092\u4e2ablock, \u4e00\u4e2a\u7528\u4e8e\u8bfb\u53d6R\uff0c\u4e00\u4e2a\u7528\u4e8e\u8bfb\u53d6S</p> <ul> <li> <p>transfer: \\(b_r + n_r \\times b_s\\)</p> </li> <li> <p>seek: \\(b_r + n_r\\)</p> </li> </ul> <p>Note</p> <p>\u8fd9\u91cc\u9700\u8981\u8003\u8651\u6240\u8c13\u7684\u8fde\u7eed\u6027 \u672c\u8d28\u4e0a\u662f\u78c1\u76d8\u7684\u7269\u7406\u7ed3\u6784\u51b3\u5b9a\u7684\uff0cseek\u5373\u78c1\u76d8\u7684\u78c1\u5934\u5bfb\u9053</p> <p>\u6bd4\u5982\u8fd9\u91cc\u5185\u5c42\u5faa\u73af\u540e\u78c1\u5934\u7684\u4f4d\u7f6e\u5df2\u7ecf\u6539\u53d8\u4e86\uff0c\u56e0\u6b64\u56de\u5230\u5916\u5faa\u73af\u65f6\u8981\u91cd\u65b0\u5bfb\u9053\u56de\u53bb</p> <p>Best Case\uff1a buffer\u53ef\u4ee5\u5168\u90e8\u5b58\u4e0b</p> <ul> <li> <p>transfer\uff1a\\(b_r + b_s\\)</p> </li> <li> <p>seek: \\(1 + 1 = 2\\)</p> </li> </ul>"},{"location":"Database/#block-nested-loop-join","title":"Block Nested-Loop Join","text":"<p>\u4ecd\u7136\u662f\u5faa\u73af\u7ed3\u6784\uff0c\u4f46\u662f\u4ee5block\u4e3a\u5916\u5173\u7cfb\u7684\u5355\u4f4d\u3002</p> <p></p> <p>Worst Case\uff1abuffer\u5c0f</p> <ul> <li> <p>transfer\uff1a\\(b_r + b_r \\times b_s\\)</p> </li> <li> <p>seek: \\(2 b_r\\)</p> </li> </ul> <p>Best Case: buffer\u8db3\u591f</p> <ul> <li> <p>transfer: \\(b_r + b_r\\)</p> </li> <li> <p>seek: \\(1 + 1\\)</p> </li> </ul> <p>Note</p> <p>\u6298\u4e2d\u7684\u4f18\u5316\u65b9\u6cd5\uff1a\u6ce8\u610f\u5230\u5916\u5faa\u73af\u7684\\(b_r\\)\u4f5c\u4e3a\u4e58\u79ef\u9879\u5f71\u54cd\u5f88\u5927\uff0c\u8003\u8651\u5c06buffer\u4e2dM-2\u4e2ablock\u4f5c\u4e3a\u5916\u5faa\u73af\u7684\u5355\u4f4d\uff0c\u964d\u4f4e\u5916\u5faa\u73af\u7684\u590d\u6742\u5ea6</p> <p>\u8fd9\u6837\u76f8\u5f53\u4e8e\u5c06\u5916\u90e8\u5faa\u73af\u7684\u6b21\u6570\u53d8\u4e3a\u4e86\\(\\lceil \\frac{b_r}{M-2} \\rceil\\)</p> <ul> <li> <p>transfer: \\(b_r + \\lceil \\frac{b_r}{M-2} \\rceil \\times b_s\\)</p> </li> <li> <p>seek: \\(2 \\lceil \\frac{b_r}{M-2} \\rceil\\) </p> </li> </ul>"},{"location":"Database/#indexed-nested-loop-join","title":"Indexed Nested-Loop Join","text":"<p>\u8003\u8651\u4f7f\u7528\u7d22\u5f15\u6765\u52a0\u901f\u5185\u5c42\u5faa\u73af\u7684\u67e5\u8be2</p> <p>Worst Case\uff1abuffer\u5c0f</p> <p>\u7531\u4e8e\u7d22\u5f15\u67e5\u8be2\u6709\u524d\u9762\u63d0\u5230\u7684\u5404\u79cd\u7b56\u7565\uff0c\u8fd9\u91cc\u7528\u4e00\u4e2a\u5e38\u6570\\(c\\)\u6765\u4ee3\u8868\u4e00\u6b21\u67e5\u8be2\u64cd\u4f5c\u7684\u4ee3\u4ef7</p> <p>\u5219\u603b\u4ee3\u4ef7\u4e3a\uff1a\\(b_r \\times (t_T + t_s)+ n_r \\times c\\)</p> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u91cc\u7684\u4ee3\u4ef7\u53d7\u5916\u5faa\u73af\u7684\u5f71\u54cd\u8f83\u5927\uff0c\u56e0\u6b64\u5e94\u8be5\u5c3d\u91cf\u9009\u62e9\u6570\u76ee\u8f83\u5c0f\u7684\u8868\u4f5c\u4e3a\u5916\u5faa\u73af</p>"},{"location":"Database/#sort-merge-join","title":"Sort-Merge Join","text":"<p>\u53ea\u9002\u7528\u4e8e\u53d6\u7b49\u53f7\uff08\u81ea\u7136\u8fde\u63a5\uff09\u8fd9\u79cd\u7684</p> <p>\u7528\u7c7b\u4f3c\u5f52\u5e76\u7b97\u6cd5\u7684\u53cc\u6307\u9488\u65b9\u6cd5\uff0c\u5bf9\u4e24\u4e2a\u6709\u5e8f\u8868\u8fdb\u884cjoin</p> <p>\u82e5\u4e0d\u8003\u8651\u6392\u5e8f\uff0c\u53ef\u4ee5\u505a\u5230\u7ebf\u6027\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u663e\u7136\u6548\u7387\u975e\u5e38\u9ad8</p> <ul> <li> <p>transfer: \\(b_r + b_s\\)</p> </li> <li> <p>seek: \\(\\lceil \\frac{b_r}{b_{br}} \\rceil + \\lceil \\frac{b_s}{b_{bs}} \\rceil\\)</p> </li> </ul> <p>Hybrid-merge</p> <p>\u82e5\u5176\u4e2d\u4e00\u4e2a\u8868\u6709\u5e8f\uff0c\u800c\u53e6\u4e00\u4e2a\u8868\u5177\u6709\u8f85\u52a9\u7d22\u5f15\uff0c\u53ef\u4ee5\u5c06\u6709\u5e8f\u8868\u4e0e\u8f85\u52a9\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u8fdb\u884c\u5408\u5e76\uff0c\u5f97\u5230\u4e00\u4e2a\u6df7\u5408\u7684\u5730\u5740\u6570\u636e\u8868</p> <p>\u7136\u540e\u6309\u5730\u5740\u8fdb\u884c\u6392\u5e8f\uff0c\u52a0\u5feb\u8bfb\u53d6\u7684\u901f\u5ea6\uff0c\u5b8c\u6210join</p>"},{"location":"Database/#hash-join","title":"Hash Join","text":"<p>\u540c\u6837\u53ea\u9002\u7528\u4e8e\u53d6\u7b49\u53f7\u7684\u60c5\u51b5\uff0c\u672c\u8d28\u5229\u7528\u76f8\u540c\u5c5e\u6027\u503c\u7684\u54c8\u5e0c\u503c\u76f8\u540c\u7684\u7279\u70b9\uff08\u76f8\u540c\u54c8\u5e0c\u503c\u4e0d\u4e00\u5b9a\u5c5e\u6027\u76f8\u540c\uff09\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u5757\u5904\u7406</p> <ul> <li> <p>\u5206\u5757\uff1a\u5c06\u4e24\u4e2a\u8868\u5206\u522b\u4f7f\u7528hash\u8fdb\u884c\u5206\u5757\uff0c\u5206\u6210 \\(n_h\\) \u4e2apartition </p> </li> <li> <p>\u5176\u4e2d\u4e00\u4e2a\u8868\u4f5c\u4e3abuild input\uff0c\u7528\u53e6\u4e00\u4e2ahash\u51fd\u6570\u5bf9\u6bcf\u4e00\u4e2a partition \u5728\u5185\u5b58\u4e2d\u5efa\u7acbhash\u7d22\u5f15</p> </li> <li> <p>\u53e6\u4e00\u4e2a\u8868\u4f5c\u4e3aprobe input\uff0c\u76f4\u63a5\u8bfb\u53d6\u76f8\u5e94partition\u7684\u6570\u636e\uff0c\u6839\u636e\u540e\u9762\u5efa\u7acb\u7684hash\u7d22\u5f15\u5728 build input \u7684\u7d22\u5f15\u4e2d\u67e5\u627e\u76f8\u5e94\u7684join\u76ee\u6807</p> </li> </ul> <p></p> <p>\u9996\u5148\uff0c\u5212\u5206\u65f6partition\u7684\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc7\u5185\u5b58\u603bblock\u6570\uff0c\u4e0d\u7136\u65e0\u6cd5\u6b63\u786e\u5212\u5206\uff08\u8981\u4e3a\u6bcf\u4e00\u4e2apartition\u7559\u4e00\u4e2aoutput buffer\uff09</p> <p>\u5212\u5206\u540e\u6bcf\u4e2apartition\u7684\u5927\u5c0f\u5e94\u8be5\u63a7\u5236\u5728buffer\u7684\u5927\u5c0f\u5185\uff0c\u56e0\u4e3a\u8981\u5728\u5185\u5b58\u4e2d\u4e3a\u8fd9\u4e00\u5757\u5efa\u7acb\u4e00\u4e2a\u7d22\u5f15</p> \\[ \\lceil \\frac{b_s}{M} \\rceil \\times f \\leq n_h \\leq M \\] <p>\uff08 \\(f\\)\uff08fudge factor\uff09\u4e3a\u907f\u8ba9\u7cfb\u6570\u7528\u4e8e\u964d\u4f4e\u4e0b\u8ff0\u6563\u5217\u8868\u6ea2\u51fa\u7684\u6982\u7387\uff09</p> <ul> <li>Recursive Partition</li> </ul> <p>\u7531\u4e0a\u53ef\u77e5\uff0c\u5982\u679c\u6570\u636e\u91cf\u592a\u5927\uff0c\\(M \\leq \\sqrt{b_s}\\)\uff0c\u5212\u5206\u65f6\u5c31\u65e0\u6cd5\u4e00\u8d9f\u5b8c\u6210\uff0c\u8fd9\u65f6\u5c31\u9700\u8981\u4f7f\u7528\u591a\u5c42\u7ea7\u7684\u9012\u5f52\u5212\u5206</p> <p>\u6bcf\u6b21\u4e0d\u591f\u5c31\u5212\u5206\u6210M-1\u4e2a\u5b50\u5757\uff0c\u7136\u540e\u5bf9\u6bcf\u4e2a\u5b50\u5757\u518d\u8fdb\u884c\u9012\u5f52\u5212\u5206\uff0c\u76f4\u5230\u6574\u4e2a\u5b50\u5757\u53ef\u4ee5\u5168\u90e8\u653e\u5165buffer</p> <ul> <li> <p>Overflowing</p> <p>\u6563\u5217\u5212\u5206\u51fa\u73b0\u504f\u659c\uff0c\u5bfc\u81f4\u90e8\u5206\u8fc7\u6ee1\uff0c\u90e8\u5206\u8fc7\u7a7a</p> <ul> <li> <p>\u907f\u8ba9\u56e0\u5b50\uff1a\\(f = 1.2\\)</p> </li> <li> <p>\u6ea2\u51fa\u5206\u89e3\uff1a\u5c06\u6ea2\u51fa\u7684\u90e8\u5206\u518d\u6b21\u8fdb\u884c\u6563\u5217\u5212\u5206\uff0c\u76f4\u5230\u5168\u90e8\u653e\u5165buffer</p> </li> <li> <p>\u6ea2\u51fa\u907f\u514d\uff1a\u5212\u5206\u65f6\u5212\u5206\u6210\u5c0f\u5757\uff0c\u5728\u4e0d\u6ea2\u51fa\u7684\u60c5\u51b5\u4e0b\u518d\u5408\u5e76\u6210\u5927\u5757</p> </li> </ul> <p>Danger</p> <p>\u5f53\u5c5e\u6027\u503c\u5927\u91cf\u91cd\u590d\u65f6\uff0c\u4e0a\u8ff0\u7b56\u7565\u53ef\u80fd\u90fd\u4f1a\u5931\u6548\uff0c\u6b64\u65f6\u53ef\u4ee5\u8003\u8651\u524d\u9762\u7684\u5176\u4ed6join\u65b9\u6cd5  </p> </li> <li> <p>\u4ee3\u4ef7\u5206\u6790</p> <ul> <li> <p>\u4e0d\u9700\u8981\u9012\u5f52</p> <ul> <li> <p>transfer: </p> <p>\\(2(b_r + b_s)\uff08\u521d\u59cb\u5212\u5206\u8bfb+\u5199\uff09 + (b_s + b_r)\uff08\u7d22\u5f15\u4e2d\u63a2\u67e5\uff09 + 4 n_h\uff08\u5212\u5206\u540e\u7684\u591a\u4f59\u5757\uff0c\u6bcf\u4e2apartition\u6700\u591a\u591a\u4f591\u5757\uff0c\u4e00\u822c\u53ef\u4ee5\u5ffd\u7565\\)</p> <p>\\(= 3(b_r + b_s) + 4 n_h\\)</p> </li> <li> <p>seek: </p> <p>\\(2(\\lceil \\frac{b_r}{b_{br}} \\rceil + \\lceil \\frac{b_s}{b_{bs}} \\rceil) \uff08\u5212\u5206\\&amp;\u5199\u56de\uff0c\u4e00\u6b21\u591a\u8bfb\u51e0\u5757\uff09+ (n_h + n_h)\uff08\u7d22\u5f15\u4e2d\u63a2\u67e5\uff09\\)</p> <p>\\(= 2(\\lceil \\frac{b_r}{b_{br}} \\rceil + \\lceil \\frac{b_s}{b_{bs}} \\rceil) + 2n_h\\)</p> </li> </ul> </li> <li> <p>\u9700\u8981\u9012\u5f52</p> <p>\u6bcf\u6b21\u9012\u5f52\u5212\u5206\u5c06\u5927\u5c0f\u53d8\u4e3a\u539f\u6765\u7684 \\(\\frac{1}{M-1}\\) \u76f4\u81f3\u5230 \\(M\\)\uff0c\u56e0\u6b64\u9700\u8981\\(\\lceil \\log_{M-1} (b_s) - 1\\rceil\\)\u6b21\u9012\u5f52</p> <ul> <li> <p>transfer: </p> <p>\\(2(b_r + b_s) \\times \\lceil \\log_{M-1} (b_s) - 1\\rceil + b_r + b_s\\)</p> </li> <li> <p>seek: </p> <p>\\(2(\\lceil \\frac{b_r}{b_{br}} \\rceil + \\lceil \\frac{b_s}{b_{bs}} \\rceil) \\times \\lceil \\log_{M-1} (b_s) - 1\\rceil\\)</p> </li> </ul> </li> <li> <p>\u6700\u4f18\u60c5\u51b5\uff0cbuffer\u8db3\u591f\u5927\uff0c\u76f4\u63a5\u9000\u5316\u4e3a\u7b80\u5355\u7684O(1)\u5bf9\u5e94\uff1a</p> <ul> <li> <p>transfer: \\(b_r + b_s\\)</p> </li> <li> <p>seek: \\(1 + 1\\)</p> </li> </ul> </li> </ul> </li> <li> <p>Hybrid Hash Join</p> <ul> <li> <p>\u5f53\u5185\u5b58\u8f83\u5927\u53c8\u4e0d\u662f\u8d85\u7ea7\u5927\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u4e00\u90e8\u5206\u5185\u5b58\u7528\u6765\u5b58\u7b2c\u4e00\u4e2a\u5212\u5206\\(s_0\\)\u4e0d\u7528\u5199\u56de\uff0c\u5e76\u4e14\u5728\u5904\u7406\\(r_0\\)\u5212\u5206\u65f6\u76f4\u63a5\u5f53\u573a\u89e3\u51b3\uff0c\u53c8\u5c11\u4e86\u4e00\u6b21\u5199\u56de\u7684\u4ee3\u4ef7</p> </li> <li> <p>\u4e00\u822c\u5f53\\(M &gt;&gt; \\sqrt{b_s}\\)\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5</p> </li> </ul> </li> </ul>"},{"location":"Database/#complex-join","title":"Complex Join","text":"<p>\u5faa\u73af\u5d4c\u5957\u4e00\u8d77\u505a\uff0c\u6216\u8005\u6bcf\u6b21\u505a\u4e00\u4e2a\u6761\u4ef6\u540e\u8fdb\u884c\u96c6\u5408\u8fd0\u7b97</p> <p></p>"},{"location":"Database/#other-operations","title":"Other Operations","text":"<ul> <li> <p>Duplicate Elimination</p> <ul> <li> <p>\u6392\u5e8f\u53bb\u91cd\uff0c\u76f8\u90bb\u7684\u76f8\u540c\u5143\u7d20\u76f4\u63a5\u8df3\u8fc7</p> </li> <li> <p>Hash\u53bb\u91cd\uff0c\u76f4\u63a5\u907f\u514d\u91cd\u590d\u63d2\u5165</p> </li> </ul> </li> <li> <p>Projection</p> <p>\u6bcf\u4e2a\u5143\u7ec4\u505a\u6295\u5f71\uff0c\u7136\u540e\u53bb\u91cd</p> </li> <li> <p>Aggregation</p> <ul> <li> <p>\u7c7b\u4f3c\u53bb\u91cd\u7684\u65b9\u6cd5\uff0c\u5bf9\u76f8\u5173\u5c5e\u6027\u8fdb\u884c\u805a\u5408\u5904\u7406</p> </li> <li> <p>\u8fd8\u53ef\u4ee5\u8003\u8651\u4ece\u90e8\u5206\u805a\u5408\u5f00\u59cb\uff0c\u9010\u6b65\u5411\u4e0a\u805a\u5408</p> </li> </ul> </li> <li> <p>Set Operations</p> <p>\u540c\u6837\u5229\u7528 \u6392\u5e8f/\u54c8\u5e0c\u7b49\u65b9\u6cd5\u5904\u7406</p> </li> <li> <p>Outer Join</p> <ul> <li> <p>\u5148\u8ba1\u7b97\u51fa\u6240\u6709\u7684\u5185\u8fde\u63a5\uff0c\u7136\u540e\u518d\u5c06\u5916\u8fde\u63a5\u7684\u90e8\u5206\u8865\u5145\u8fdb\u53bb</p> </li> <li> <p>\u4fee\u6539\u8fde\u63a5\u7b97\u6cd5\uff0c\u5982\u5d4c\u5957\u5faa\u73af\u8fde\u63a5\u5904\u7406\u5355\u4fa7\u5916\u8fde\u63a5\u5f88\u65b9\u4fbf\uff0c\u5f52\u5e76\u7b97\u6cd5\u5904\u7406\u5916\u8fde\u63a5\u90fd\u5f88\u65b9\u4fbf</p> </li> </ul> </li> </ul>"},{"location":"Database/#expression","title":"Expression","text":"<p>\u8003\u8651\u8ba1\u7b97\u542b\u6709\u591a\u4e2a\u8fd0\u7b97\u7684\u8868\u8fbe\u5f0f</p>"},{"location":"Database/#materialization","title":"Materialization","text":"<p>\u6bcf\u4e2a\u5b50\u67e5\u8be2\u7ed3\u679c\u90fd\u4f5c\u4e3a\u4e00\u4e2a\u4e34\u65f6\u8868\u5b58\u50a8\uff0c\u7136\u540e\u518d\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c</p> <p></p> <p>\u53ef\u4ee5\u4f7f\u7528double buffering\u6a21\u578b\uff0c\u5373\u4e24\u4e2abuffer\u8f6e\u6d41\u4f7f\u7528\uff0c\u4e00\u4e2a\u627f\u63a5\u6570\u636e\uff0c\u4e00\u4e2a\u5e76\u884c\u5199\u78c1\u76d8\uff0c\u5b9e\u73b0buffer\u5199\u5165\u78c1\u76d8\u65f6\u4e0d\u9700\u8981\u4e2d\u65ad\u5f53\u524d\u8fdb\u7a0b</p> <p>\u65f6\u95f4\u4ee3\u4ef7 = \u4e24\u5b50\u67e5\u8be2\u7684\u65f6\u95f4\u4ee3\u4ef7 + \u4e24\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u5408\u5e76\u5199\u5165\u65f6\u95f4\u4ee3\u4ef7</p>"},{"location":"Database/#pipeline","title":"Pipeline","text":"<p>\u51cf\u5c11\u4e34\u65f6\u6587\u4ef6\u6570\uff0c\u5c06\u591a\u4e2a\u5173\u7cfb\u64cd\u4f5c\u7ec4\u5408\u6210\u4e00\u4e2a\u6d41\u6c34\u7ebf\uff0c\u4e00\u4e2a\u64cd\u4f5c\u7684\u8f93\u51fa\u76f4\u63a5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u64cd\u4f5c\u7684\u8f93\u5165</p> <p>\u540c\u4e00\u9636\u6bb5\u7684\u64cd\u4f5c\u5e76\u884c\u8fd0\u884c\uff0c\u4f46\u662f\u5fc5\u987b\u8981\u524d\u9762\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u5b8c\u6210\u540e\u624d\u80fd\u8fdb\u884c\u4e0b\u4e00\u6b65</p> <ul> <li> <p>Demand-Driven (Lazy) Pipeline - Pull</p> <p></p> </li> <li> <p>Producer-Driven (Eager) Pipeline - Push</p> <p></p> </li> <li> <p>\u6267\u884c\u7b97\u6cd5</p> <ul> <li> <p>\u963b\u585e\u64cd\u4f5c</p> <p>\u5982sort\u7b49\uff0c\u9700\u8981\u7b49\u5f85\u6240\u6709\u6570\u636e\u5230\u8fbe\u540e\u518d\u8fdb\u884c\u64cd\u4f5c</p> </li> <li> <p>\u4e00\u4e9b\u64cd\u4f5c\u53ef\u4ee5\u5e76\u884c\u8fdb\u884c\u5904\u7406\u8f93\u5165\u6d41\uff0c\u5982projection\u548cselection</p> double-pipelined join <p></p> </li> </ul> </li> </ul> Cache Conscious Algorithm <p></p>"},{"location":"Database/#_32","title":"\u5341\u516d\u7ae0 \u67e5\u8be2\u4f18\u5316","text":"<p>\u672c\u7ae0\u7684\u76ee\u7684\u662f\u5177\u4f53\u5b9e\u73b0\u5982\u4f55\u9009\u62e9\u6267\u884c\u8bed\u53e5\u7684\u6700\u4f18\u65b9\u6848\uff0c\u5927\u81f4\u53c8\u53ef\u4ee5\u5206\u4e3a\u4e24\u6b65\uff1a</p> <ol> <li> <p>\u5217\u51fa\u4e0e\u5f53\u524d\u8bed\u53e5\u7b49\u4ef7\u7684\u5185\u90e8\u6267\u884c\u65b9\u6848\uff0c\u8fd9\u91cc\u7684\u6267\u884c\u65b9\u6848\u65e2\u5305\u62ec\u4f8b\u5982\u4ea4\u6362\u7ed3\u5408\u7b49\u903b\u8f91\u5c42\u9762\u7684\u5185\u5bb9\uff0c\u4e5f\u5305\u62ec\u5177\u4f53\u4f7f\u7528\u54ea\u4e00\u79cd\u7d22\u5f15\u65b9\u6cd5\u7b49\u5b9e\u73b0\u5c42\u9762\u7684\u5185\u5bb9\u3002</p> </li> <li> <p>\u5feb\u901f\u4f30\u7b97\u6bcf\u4e00\u79cd\u6267\u884c\u65b9\u6848\u7684\u590d\u6742\u5ea6\u5e76\u9009\u5176\u4e2d\u6700\u4f18\u7684\u4e00\u79cd</p> </li> </ol>"},{"location":"Database/#equivalence-rules","title":"Equivalence Rules","text":"<p>\u67e5\u8be2\u7ed3\u679c\u4e00\u822c\u4e3a Multisets of Tuples\uff0c\u7b49\u4ef7\u8868\u8fbe\u5f0f\u5373 \u5728\u5408\u6cd5\u7684\u6570\u636e\u5e93\u4e0a\u7ed3\u679c\u5b8c\u5168\u76f8\u540c \uff08\u6ce8\u610f\u96c6\u5408\u662f\u65e0\u5e8f\u7684\uff09</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p>\u7b56\u7565\uff1a</p> <p>\u901a\u8fc7\u4e0a\u8ff0\u89c4\u5219\u5c06\u67e5\u8be2\u8bed\u53e5\u8f6c\u5316\u4e3a\u7b49\u4ef7\u7684\u5f62\u5f0f\uff0c\u9009\u62e9\u6700\u4f18\u7684\u6267\u884c\u65b9\u6848</p> <p>\u5b9e\u9645\u4f7f\u7528\u4e2d\u5f80\u5f80\u662f\u5f15\u7528\u7ecf\u9a8c\u5f0f\u7684\u89c4\u5219\uff0c\u60f3\u8981\u5217\u51fa\u6240\u6709\u53ef\u80fd\u7684\u5b9e\u73b0\u903b\u8f91\u4e00\u822c\u662f\u4e0d\u53ef\u80fd\u7684</p> <p>\u5e38\u7528\u7684\u5957\u8def\u6709</p> <ul> <li> <p>Space sharing &amp; Time programming</p> </li> <li> <p>\u9009\u62e9\u63d0\u524d\u505aselection &amp; projection\uff0c\u51cf\u5c11\u4e0d\u9700\u8981\u7684\u884c\u6570\u548c\u5217\u6570</p> </li> <li> <p>\u8fde\u7eed\u7684join\u5148\u505a\u7ed3\u679c\u8f83\u5c11\u7684\uff0c\u51cf\u5c11\u4e2d\u95f4\u7ed3\u679c\u9700\u8981\u7684\u7a7a\u95f4\uff08\u6709\u70b9\u7c7b\u4f3c\u52a8\u6001\u89c4\u5212\u7ecf\u5178\u95ee\u9898 \u77e9\u9635\u4e58\u6cd5\uff09</p> </li> </ul>"},{"location":"Database/#statistical-cost-estimation","title":"Statistical Cost Estimation","text":"\u4e00\u4e9b\u5b9a\u4e49"},{"location":"Database/#histogram","title":"Histogram","text":"<p>\u8bb0\u5f55\u6bcf\u4e2a\u5c5e\u6027\u53d6\u503c\u7684\u9891\u7387\uff0c\u9700\u8981\u968f\u7740\u6570\u636e\u5e93\u7684\u66f4\u65b0\u5b9e\u65f6\u66f4\u65b0</p> <ul> <li> <p>Equi-width\uff1a\u7b49\u5bbd</p> </li> <li> <p>Equi-depth\uff1a\u7b49\u9ad8</p> </li> </ul>"},{"location":"Database/#selection-size-estimation","title":"Selection Size Estimation","text":"<ul> <li> <p>\u5982\u679c\u6709\u76f8\u5173\u7684Histogram\uff0c\u76f4\u63a5\u4f7f\u7528\u5176\u503c\u5373\u53ef</p> </li> <li> <p>\u5426\u5219\uff0c\u7c97\u7565\u8ba4\u4e3a\u6570\u636e\u6ee1\u8db3\u5747\u5300\u5206\u5e03\uff1a</p> <ul> <li> <p>\u5355\u70b9\uff1a \\(\\frac{n_r}{V(A,r)}\\)</p> </li> <li> <p>\u533a\u57df\uff08\u4ee5\u5c0f\u4e8e\u4e3a\u4f8b\uff09\uff1a</p> \\[ \\left \\{     \\begin{aligned}         0 &amp;\\qquad v &lt; min(A,r)\\\\         n_r \\times \\frac{v - \\min(A,r)}{max(A,r) - min(A,r)} &amp; \\qquad min(A,r) \\leq v &lt; max(A,r)\\\\         n_r &amp; \\qquad v \\geq max(A,r)     \\end{aligned} \\right. \\] <p>\u82e5\u6beb\u65e0\u76f8\u5173\u4fe1\u606f\uff0c\u4e00\u822c\u8ba4\u4e3a\u6ee1\u8db3\u9879\u4e3a\\(\\frac{n_r}{2}\\)</p> </li> <li> <p>\u590d\u5408\u6761\u4ef6</p> <p>\u4f7f\u7528\u6982\u7387\u5206\u6790\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u6761\u4ef6\uff0c\u6839\u636e\u524d\u9762\u6240\u8ff0\u8ba1\u7b97\u5176\u6ee1\u8db3\u7684\u6982\u7387\\(\\frac{s_i}{n_r}\\)</p> <ul> <li> <p>Conjunction\uff1a\\(n_r \\times \\prod \\frac{s_i}{n_r}\\)</p> </li> <li> <p>Disjunction\uff08\u5bb9\u65a5\uff09\uff1a\\(n_r \\times (1 - \\prod (1 - \\frac{s_i}{n_r}))\\)</p> </li> <li> <p>Negation\uff1a\\(n_r - n_p\\) </p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"Database/#join-size-estimation","title":"Join Size Estimation","text":"<ul> <li> <p>\u7b1b\u5361\u5c14\u79ef\uff1a</p> <ul> <li> <p>\\(n_{r\\times s} = n_r \\times n_s\\)</p> </li> <li> <p>\\(l_{r\\times s} = l_r + l_s\\)</p> </li> </ul> </li> <li> <p>\u81ea\u7136\u8fde\u63a5\u6839\u636e \\(R \\cap S\\) \u7684\u60c5\u51b5\u4f30\u8ba1</p> <ul> <li> <p>\\(R \\cap S = \\emptyset\\)\uff0c\u5219 \\(R\\Join S = R \\times S\\)</p> </li> <li> <p>\\(R \\cap S \\rightarrow R (S)\\)\uff0c\u5373\u4ea4\u96c6\u4e3a\u67d0\u4e00\u8868\u7684\u4e3b\u952e\uff0c\u5219\u8bf4\u660e\u6bcf\u4e00\u4e2a\u5143\u7ec4\u6700\u591a\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5339\u914d\uff0c\u56e0\u6b64\\(n_{r\\Join s} \\leq n_s(n_r)\\)</p> </li> <li> <p>\\(R \\cap S\\)\u4e3a\u5916\u952e\uff0c\u6b64\u65f6\u6bcf\u4e00\u4e2a\u5143\u7ec4\u6070\u597d\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5339\u914d\uff0c\u56e0\u6b64\\(n_{r\\Join s} = n_r(n_s)\\)</p> </li> <li> <p>\\(R \\cap S = A\\)\u975e\u952e\u503c\uff0c\u5219\u540c\u6837\u8003\u8651\u5747\u5300\u6982\u7387\u5206\u5e03,\u5bf9\u4e8e\u8868\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7ec4\u8003\u8651\u5176\u53ef\u80fd\u5339\u914d\u7684\u4e2a\u6570\uff0c\u5373\u76f8\u5f53\u4e8e\u4e0a\u8ff0\u7684\u7ed9\u5b9a\u5355\u503c\u7684selection\uff0c\u6709\\(n_{r\\Join s} = \\frac{n_r \\times n_s}{max(V(A,r),V(A,s))}\\)</p> </li> </ul> </li> <li> <p>\u5bf9\u4e8e\u4e00\u822c\u8fde\u63a5\\(R \\Join_{\\theta} S\\)\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a\\(\\sigma_{\\theta}(R \\times S)\\)\uff0c\u7136\u540e\u4f7f\u7528\u4e0a\u8ff0\u65b9\u6cd5\u4f30\u8ba1</p> </li> <li> <p>\u5bf9\u4e8e\u5916\u8fde\u63a5\uff0c\u53ef\u4ee5\u770b\u6210\u81ea\u7136\u8fde\u63a5+\u989d\u5916\u5143\u7ec4\uff0c\u6709\\(n_{r\u27d7s} = n_{r\\Join s} + n_r + n_s\\)</p> </li> </ul>"},{"location":"Database/#other-estimations","title":"Other Estimations","text":""},{"location":"Database/#estimation-of-distinct-value","title":"Estimation of Distinct Value","text":"<ul> <li> <p>Selection</p> <ul> <li> <p>\u5355\u70b9\u53d6\u7b49\uff1a \u663e\u7136\u5c31\u4e3a\u6761\u4ef6\u4e2d\u7684\u4e0d\u540c\u503c\u4e2a\u6570</p> </li> <li> <p>\u533a\u95f4\u53d6\u503c\uff08\u6bd4\u5927\u5c0f\uff09\uff1a \\(V(A,r) \\times P_{select}\\)</p> </li> <li> <p>\u590d\u6742\u60c5\u51b5\uff1a \u76f4\u63a5\u7c97\u7565\u4f30\u8ba1\uff0c\\(min(V(A,r), n_{\\sigma_{\\theta(r)}})\\) </p> </li> </ul> </li> <li> <p>Join\uff1a</p> <ul> <li> <p>\u5047\u8bbe\\(A = A_r \\cup A_s\\)\uff0c\u5219\\(V(A,r\\Join s) = min(V(A_r,r) \\times V(A_s - A_r, s), V(A_r - A_s, r) \\times V(A_s, s), n_{r \\Join s})\\)</p> <p>\u8fd9\u91cc\u8bbe\\(V(\\emptyset,r) = 1\\)</p> </li> </ul> </li> <li> <p>Projection</p> <ul> <li>\\(V(\\Pi_{A}(r),r) = V(A,r)\\)</li> </ul> </li> <li> <p>Aggregation</p> <ul> <li>\\(V(G_F(A),r) = min(V(A,r), V(G,r))\\)</li> </ul> </li> </ul>"},{"location":"Database/#cost-base-optimize","title":"Cost Base Optimize","text":"<p>Warning</p> <ol> <li> <p>\u5c40\u90e8\u6700\u4f18\u89e3\u4e0d\u4e00\u5b9a\u662f\u6574\u4f53\u6700\u4f18\u89e3</p> <ul> <li> <p>hash-join\u4e00\u822c\u66f4\u5feb\uff0c\u4f46merge-join\u5f97\u5230\u7684\u7ed3\u679c\u662f\u6709\u5e8f\u7684</p> </li> <li> <p>\u5d4c\u5957\u7684\u8bed\u53e5\u8ba1\u7b97\u91cf\u4e0d\u4e00\u5b9a\u6700\u5c0f\uff0c\u4f46\u662f\u53ef\u4ee5\u914d\u5408\u6d41\u6c34\u7ebf\u63d0\u9ad8\u6267\u884c\u6548\u7387\uff0c\u6700\u7ec8\u65f6\u95f4\u590d\u6742\u5ea6\u53cd\u800c\u5c0f</p> </li> </ul> </li> <li> <p>\u9002\u5f53\u7684\u9009\u62e9\u8ba1\u5212\u9014\u5f84\uff0c\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u9009\u9879\u8fd8\u662f\u4f7f\u7528\u542f\u53d1\u5f0f\u641c\u7d22</p> </li> </ol>"},{"location":"Database/#join-order-selection","title":"Join-Order Selection","text":"<p>\u8003\u8651\\(n\\)\u4e2a\u8fde\u7eedjoin\uff0c\u987a\u5e8f\u6709\\(\\frac{(2(n-1))!}{(n-1)!}\\)\uff08\u5361\u7279\u5170\u6570\uff09\uff0c\u53ef\u4ee5\u7528\u7c7b\u4f3c\u77e9\u9635\u8fde\u4e58\u7684\u52a8\u6001\u89c4\u5212\u6c42\u89e3\uff08\u4f46\u662f\u987a\u5e8f\u4e0d\u5b9a\uff09</p> <ul> <li> <p>\u82e5\u9009\u62e9bushy tree, \u590d\u6742\u5ea6\u4e3a\\(\\sum_{i=1}^{n} \\binom{n}{i} \\times 2^i = (1+2)^n = O(3^n)\\) \uff08\u8003\u8651\u5927\u5c0f\u4e3ai\u7684\u5b50\u96c6\u7684\u66f4\u65b0\u4ee3\u4ef7\u4e3a\\(2^i\\)\uff09</p> <p>\\(F(S) = min(F(S_k) + F(S - S_k) + Join(S_k, S-S_k))\\)</p> </li> <li> <p>\u82e5\u4e3aleft-deep tree\uff0c\u66f4\u65b0\u590d\u6742\u5ea6\u4e3a\\(O(i)\\)\uff0c\u603b\u590d\u6742\u5ea6\u964d\u4e3a\\(O(n 2^n)\\)</p> <p>\\(F(S) = min(F(r) + F(S - r) + Join(r, S-r))\\)</p> </li> </ul> Left Deep Join Tree\u5b9a\u4e49 <p></p> <ul> <li> <p>Interesting Sort Order</p> <p>\u5982\u679c\u4f7f\u7528merge-join\u7b49\u64cd\u4f5c\uff0c\u524d\u9762\u7684\u6392\u5e8f\u53ef\u80fd\u4f1a\u9884\u5148\u4e3a\u540e\u9762\u7684\u64cd\u4f5c\u505a\u4e00\u4e9b\u4f18\u5316</p> <p>\u56e0\u6b64\u8fd9\u4e9b\u4e5f\u8981\u5728 DP \u7684\u8fc7\u7a0b\u4e2d\u8003\u8651\u8fdb\u53bb\uff0c\u79f0\u4e3a\u771f\u6b63\u7684 interesting sort order</p> </li> </ul>"},{"location":"Database/#cost-based-optimization-with-equivalence-rules","title":"Cost Based Optimization with Equivalence Rules","text":"<p>\u901a\u8fc7\u524d\u9762\u63d0\u5230\u7684\u8868\u8fbe\u5f0f\u63a8\u5bfc\u7684\u5f62\u5f0f\u5bfb\u627e\u6700\u4f18\u89e3\uff0c\u9700\u8981\u89e3\u51b3\u4e0b\u8ff0\u95ee\u9898\uff1a</p> <ul> <li> <p>\u8282\u7701\u7a7a\u95f4\u7684\u8868\u8fbe\u5f0f\u8868\u793a\u5f62\u5f0f</p> </li> <li> <p>\u68c0\u6d4b\u76f8\u540c\u8868\u8fbe\u5f0f\u91cd\u590d\u63a8\u5bfc\u7684\u6280\u672f</p> </li> <li> <p>\u57fa\u4e8e\u7f13\u5b58\u7684\u8bb0\u5fc6\u5316\u52a8\u6001\u89c4\u5212</p> </li> </ul>"},{"location":"Database/#heuristic-optimize","title":"Heuristic Optimize","text":"<ul> <li> <p>\u5c3d\u65e9\u6267\u884c Selection</p> </li> <li> <p>\u5c3d\u65e9\u6267\u884c Projection</p> </li> <li> <p>\u5c3d\u65e9\u6267\u884c \u6761\u4ef6\u4e25\u82db\u7684\u6307\u4ee4 \u6765\u7b5b\u9009\u3001\u964d\u4f4e\u8868\u7684\u5927\u5c0f</p> </li> <li> <p>\u542f\u53d1\u5f0f+\u5176\u4ed6\u7b56\u7565\u6df7\u5408\uff08\u5982cost-based\uff09</p> </li> <li> <p>\u5176\u4ed6\u7b56\u7565\uff1a\u53ea\u8003\u8651left deep join order\uff0coptimization cost budget\u53ca\u65f6\u7ec8\u6b62\u4f18\u5316\uff0cplan caching \u590d\u7528\u7b56\u7565</p> </li> </ul>"},{"location":"Database/#nested-subqueries-optimize","title":"Nested Subqueries Optimize","text":"<p>\u76f8\u5173\u53d8\u91cf\uff08correlation variable\uff09\uff1a \u5916\u5c42\u67e5\u8be2\u9700\u8981\u4f20\u5165\u5185\u5c42\u5d4c\u5957\u5b50\u67e5\u8be2\u7684\u53d8\u91cf</p> <p>\u76f8\u5173\u6267\u884c\uff08correlated evaluation\uff09\uff1a \u5916\u5c42\u5bf9from\u7684\u8868\u5217\u8868\u76f4\u63a5\u4f5c\u7b1b\u5361\u5c14\u79ef\u5f97\u5230\u6240\u6709\u5143\u7ec4\uff0c\u7136\u540e\u5c06\u5d4c\u5957\u5b50\u67e5\u8be2\u89c6\u4e3a\u4e00\u4e2a\u5173\u4e8e\u76f8\u5173\u53d8\u91cf\u7684\u51fd\u6570\uff0c\u5bf9\u6bcf\u4e2a\u5143\u7ec4\u8fdb\u884ccheck</p> <p></p> <p>\u663e\u7136\u4e0a\u9762\u7684\u65b9\u6cd5\u6548\u7387\u5f88\u4f4e\uff0c\u4e00\u822c\u5c1d\u8bd5\u5c06 \u5d4c\u5957\u5b50\u67e5\u8be2 \u8f6c\u5316\u4e3a \u591a\u8fde\u63a5\uff08\u6ce8\u610f\u4e0b\u9762\u4f8b\u5b50\u7684\u91cd\u590d\u5143\u7ec4\u4e0d\u540c\uff0cJoin\u4f1a\u591a\u4e00\u70b9\uff09</p> <p></p> <ul> <li> <p>semijoin \u22c9</p> <ul> <li> <p>\u68c0\u67e5\u4e00\u4e2a\u7ed3\u679c\u96c6\uff08\u5916\u8868\uff09\u7684\u8bb0\u5f55\u662f\u5426\u5728\u53e6\u5916\u4e00\u4e2a\u7ed3\u679c\u96c6\uff08\u5b57\u8868\uff09\u4e2d\u5b58\u5728\u5339\u914d\u8bb0\u5f55\uff0c\u672c\u8d28\u4e0a\u534a\u8fde\u63a5\u4ec5\u5173\u6ce8\u201d\u5b50\u8868\u662f\u5426\u5b58\u5728\u5339\u914d\u8bb0\u5f55\u201d\uff0c\u800c\u5e76\u4e0d\u8003\u8651\u201d\u5b50\u8868\u5b58\u5728\u591a\u5c11\u6761\u5339\u914d\u8bb0\u5f55\u201d</p> <p></p> <p>\u534a\u8fde\u63a5\u7684\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u4f7f\u7528\u5916\u8868\u7684\u6570\u636e\u96c6\uff0c\u67e5\u8be2\u8bed\u53e5\u4e2dIN\u6216EXISTS\u8bed\u53e5\u5e38\u4f7f\u7528\u534a\u8fde\u63a5\u6765\u5904\u7406</p> <p></p> </li> <li> <p>\u4e0e\u4e4b\u5bf9\u5e94\u7684\u8fd8\u6709\u53cd\u534a\u8fde\u63a5anti-semijoin\uff0c\u68c0\u67e5\u4e00\u4e2a\u7ed3\u679c\u96c6\uff08\u5916\u8868\uff09\u7684\u8bb0\u5f55\u662f\u5426\u5728\u53e6\u5916\u4e00\u4e2a\u7ed3\u679c\u96c6\uff08\u5b57\u8868\uff09\u4e2d\u5b58\u5728\u5339\u914d\u8bb0\u5f55\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b57\u8868\u4e2d\u6ca1\u6709\u5339\u914d\u8bb0\u5f55\u65f6\u5728\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\u5305\u542b\u4ec5\u4f7f\u7528\u5916\u8868\u7684\u6570\u636e\u96c6</p> </li> </ul> </li> </ul> <p>\u501f\u534a\u8fde\u63a5\u5373\u53ef\u5c06\u5d4c\u5957\u5b50\u67e5\u8be2\u62c6\u6210\u5355\u7ea7\u7684\u7ed3\u6784\uff0c\u56de\u5230\u4e00\u822c\u7684\u4f18\u5316\u95ee\u9898</p>"},{"location":"Database/#materialized-view","title":"Materialized View","text":"<p>\u901a\u8fc7\u4e00\u5b9a\u5197\u4f59\u63d0\u9ad8\u7cfb\u7edf\u6548\u7387</p>"},{"location":"Database/#materialized-view-maintenance","title":"Materialized View Maintenance","text":"<p>\u7ef4\u62a4\u6709 \u7acb\u5373\u7684\u89c6\u56fe\u7ef4\u62a4\uff08immediate\uff09 \u548c \u5ef6\u8fdf\u7684\u89c6\u56fe\u7ef4\u62a4\uff08differed\uff09</p> <ul> <li> <p>\u4eba\u5de5\u7ef4\u62a4</p> </li> <li> <p>\u89e6\u53d1\u5668\u7ef4\u62a4</p> </li> <li> <p>\u5dee\u5206\u7ef4\u62a4\uff1a</p> <p>\u53ea\u9700\u8981\u5904\u7406\u66f4\u65b0\u7684tuple\u4e0e\u5176\u4ed6\u8868\u7684\u6570\u636e\u5173\u7cfb\u5dee\u5f02\uff08differential\uff09\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u5168\u4f53\u91cd\u65b0\u8ba1\u7b97</p> <p>\u4e0b\u9762\\(i_r\\)\u6307\u65b0\u63d2\u5165\u7684\u5143\u7ec4\uff0c\\(d_r\\)\u6307\u5220\u9664\u7684\u5143\u7ec4</p> <ul> <li> <p>Join (\\(v = r \\Join s\\))</p> <p></p> </li> <li> <p>Selection(\\(v = \\sigma_{\\theta}(r)\\))</p> <p></p> </li> <li> <p>Projection(\\(v = \\Pi_{A}(r)\\))</p> <p>\u4f7f\u7528\u4e00\u4e2acount\u8ba1\u6570\uff0c\u8003\u8651\u662f\u5426\u9700\u8981\u66f4\u65b0</p> </li> <li> <p>Aggregation(\\(v = G_F(A,r)\\))</p> <p>count\u3001sum\u3001avg\u7b49\u90fd\u6bd4\u8f83\u597d\u7ef4\u62a4\uff0c\u589e\u52a0\u4e00\u4e9b\u8f85\u52a9\u91cf\u5373\u53ef</p> <p>min\u3001max\u53ef\u80fd\u7ef4\u62a4\u4ee3\u4ef7\u592a\u5927\uff08\u5220\u9664\uff09</p> </li> <li> <p>Set Operation</p> <p>\u6839\u636e\u96c6\u5408\u64cd\u4f5c\u7684\u542b\u4e49\u7ef4\u62a4\u5373\u53ef</p> </li> <li> <p>Expression</p> <p>\u4ece\u5c0f\u7684\u5b50\u8868\u8fbe\u5f0f\u5f00\u59cb\u5411\u4e0a\u63a8\u5bfc</p> </li> </ul> </li> </ul>"},{"location":"Database/#query-optimization","title":"Query Optimization","text":"<ul> <li> <p>\u66ff\u6362\u67e5\u8be2\u76f4\u63a5\u5229\u7528\u7269\u5316\u89c6\u56fe</p> </li> <li> <p>\u4f7f\u7528\u7269\u5316\u89c6\u56fe\u7684\u5730\u65b9\u66ff\u6362\u6210\u5176\u5b9a\u4e49\uff0c\u53ef\u80fd\u83b7\u5f97\u66f4\u9ad8\u7684\u6548\u7387</p> </li> </ul>"},{"location":"Database/#materialized-view-selection","title":"Materialized View Selection","text":"<p>\u7c7b\u4f3c\u7d22\u5f15\u9009\u62e9\uff0c\u76ee\u6807\u90fd\u662f\u52a0\u901f\u7cfb\u7edf\u7684\u6574\u4f53\u6548\u7387</p> <p>\u5177\u4f53\u8fd8\u5f97\u59a5\u5584\u5206\u6790\u7cfb\u7edf\u7684\u5de5\u4f5c\u8d1f\u8f7d\uff08workload\uff09\u6765\u51b3\u5b9a</p>"},{"location":"Database/#transaction","title":"\u5341\u4e03\u7ae0 Transaction","text":"<p>Transaction\u76f4\u8bd1\u4e3a\u4e8b\u52a1\uff0c\u662f\u4e00\u6b21\u6570\u636e\u5e93\u64cd\u4f5c \u82e5\u5e72\u5b9e\u9645\u6267\u884c\u7684\u64cd\u4f5c \u7ec4\u6210\u7684\u62bd\u8c61\u6982\u5ff5</p> <p>Transaction\u7684\u63d0\u51fa\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li> <p>\u6570\u636e\u5e93\u7684\u5e76\u53d1\u64cd\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u6027\u80fd\u548c\u6548\u7387\uff0c\u5177\u4f53\u8868\u73b0\u4e3a \u541e\u5410\u91cf\uff08throughput\uff09\u548c\u54cd\u5e94\u65f6\u95f4\uff08response time\uff09</p> </li> <li> <p>\u6570\u636e\u5e93\u7684\u9519\u8bef\u5904\u7406\uff08crash recovery\uff09</p> </li> </ul>"},{"location":"Database/#acid","title":"ACID \u539f\u5219","text":"<p>Transation\u7684\u5b9e\u73b0\u8981\u6c42\u56db\u4e2a\u7279\u6027ACID\uff1a</p> <ul> <li> <p>Automicity\u539f\u5b50\u6027\uff1a\u8981\u4e48Transaction\u5185\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u6210\u529f\u8981\u4e48\u90fd\u5931\u8d25\u56de\u6eda\uff0c\u4e0d\u5141\u8bb8\u90e8\u5206\u6210\u529f\u90e8\u5206\u5931\u8d25</p> </li> <li> <p>Consistency\u4e00\u81f4\u6027\uff1aTransaction\u7684\u53d1\u751f\u524d\u540e\u5e94\u8be5\u4fdd\u8bc1\u6570\u636e\u4e0e\u64cd\u4f5c\u903b\u8f91\u4e00\u81f4\uff0c\u4f8b\u5982\u5b8c\u6574\u6027\u7ea6\u675f\u3001\u5916\u952e\u7ea6\u675f\u3001\u903b\u8f91\u7ea6\u675f\u7b49\u7b49</p> </li> <li> <p>Isolation\u9694\u79bb\u6027\uff1aTransaction\u5e94\u8be5\u5bf9\u4e0a\u5c42\u9690\u85cf\u5e76\u53d1\u5b9e\u73b0\uff0c\u65e0\u8bba\u5e76\u53d1\u7684Transaction\u5728\u5185\u90e8\u4ee5\u4ec0\u4e48\u987a\u5e8f\u6267\u884c\uff0c\u90fd\u8981\u4fdd\u8bc1\u8fd4\u56de\u7684\u7ed3\u679c\u6b63\u786e\uff1b\u5e76\u4e14\u5177\u4f53\u5b9e\u73b0\u8fc7\u7a0b\u548c\u5e76\u53d1\u4fe1\u606f\u4e0e\u4e0a\u5c42\u9694\u79bb\uff0c\u64cd\u4f5c\u7684\u4e2d\u95f4\u7ed3\u679c\u5bf9\u4e0a\u5c42\u4e5f\u662f\u9690\u85cf\u7684</p> </li> <li> <p>Durability\u6301\u4e45\u6027\uff1a\u6570\u636e\u5fc5\u987b\u88ab\u5b89\u5168\u7684\u4fdd\u5b58\u540eTransaction\u624d\u80fd\u7ed3\u675f\uff0c\u4f8b\u5982\u65ad\u7535\u7b49\u7b49\u610f\u5916\u4e0d\u80fd\u5bf9\u5df2\u7ed3\u675f\u7684Transaction\u7684\u7ed3\u679c\u6570\u636e\u9020\u6210\u4efb\u4f55\u5f71\u54cd</p> </li> </ul> Transaction\u5b9a\u4e49\u72b6\u6001 <ul> <li> <p>Active\uff1a\u6b63\u5728\u6267\u884c</p> </li> <li> <p>Failed\uff1a\u51fa\u73b0\u9519\u8bef\uff0c\u7ec8\u6b62</p> </li> <li> <p>Aborted\uff1a\u53d1\u751f\u9519\u8bef\u4e4b\u540e\uff0c\u6b63\u5728\u5c1d\u8bd5\u5584\u540e</p> <ul> <li> <p>\u53ef\u80fd\u662frestart\uff0c\u4f8b\u5982\u8bfb\u5199\u7684\u6570\u636e\u9875\u548c\u5176\u4ed6Transaction\u51b2\u7a81</p> </li> <li> <p>\u53ef\u80fd\u662fkill\uff0c\u4f8b\u5982\u8fd9\u4e2aTransaction\u672c\u8eab\u4e0d\u6ee1\u8db3\u4e00\u4e9b\u8981\u6c42\uff0c\u4e0d\u53ef\u80fd\u88ab\u987a\u5229\u6267\u884c</p> </li> </ul> </li> <li> <p>Partially Committed\uff1a\u903b\u8f91\u64cd\u4f5c\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\uff0c\u4f46\u662f\u76f8\u5173\u6570\u636e\u53ef\u80fd\u8fd8\u5728buffer\u6216\u8005\u6b63\u5728\u8fdb\u884c\u5199\u56de</p> </li> <li> <p>Committed\uff1a\u6570\u636e\u5b8c\u6574\u5199\u56de\uff0cTransaction\u6b63\u5f0f\u7ed3\u675f</p> </li> </ul>"},{"location":"Database/#_33","title":"\u5e76\u53d1\u63a7\u5236","text":"<p>Schedule\uff1a\u6307\u5e76\u53d1Transaction\u7684\u5404\u4e2a\u5b50\u64cd\u4f5c\u5728DBMS\u5185\u90e8\u7684\u5177\u4f53\u6267\u884c\u6b65\u9aa4\u3002</p> <ul> <li> <p>\u4e32\u884c\u8c03\u5ea6\uff1a\u4e00\u4e2a\u4e00\u4e2a\u4e32\u884c\u6267\u884c\u4e8b\u52a1\uff0c\u53ea\u8981\u5404\u4e8b\u52a1\u6ee1\u8db3ACID\uff0c\u975e\u5e38\u5bb9\u6613\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u4f46\u662f\u6027\u80fd\u4f4e\u4e0b\u3002\u6ce8\u610f\u5728\u4e25\u683c\u7684\u5e76\u53d1\u8bed\u5883\u4e0b\uff0c\u53ea\u8981\u6ca1\u6709\u7834\u574f\u6570\u636e\u4e00\u81f4\u6027\uff0c\u4e24\u4e2a\u64cd\u4f5c\u65e0\u8bba\u5148\u6267\u884c\u54ea\u4e00\u4e2a\u90fd\u53ef\u4ee5\u8ba4\u4e3a\u662f\u6b63\u786e\u7684</p> </li> <li> <p>\u5e76\u884c\u8c03\u5ea6\uff1a\u5b9e\u9645\u5185\u90e8\u5e76\u4e0d\u662f\u5148\u5b8c\u6574\u6267\u884c\u4e00\u4e2a\u518d\u53e6\u4e00\u4e2a\uff0c\u6027\u80fd\u4e0a\u9650\u9ad8\u4f46\u662f\u6570\u636e\u5f88\u5bb9\u6613\u4e0d\u4e00\u81f4</p> </li> </ul> <p>\u672c\u4e66\u5e76\u4e0d\u8003\u8651\u591a\u6761\u6307\u4ee4\u5e76\u53d1\u7684\u201c\u771f\u00b7\u5e76\u884c\u8c03\u5ea6\u201d\uff0c\u53ea\u5173\u6ce8\u6211\u4eec\u4ee5\u4ec0\u4e48\u7b56\u7565\u6765\u751f\u6210\u4e00\u6761\u64cd\u4f5c\u6267\u884c\u5e8f\u5217\uff0c\u6ee1\u8db3\u4e0b\u5217\u8981\u6c42</p> <p></p>"},{"location":"Database/#serializability","title":"Serializability","text":"<p>\u6bcf\u4e2aTransaction\u53ef\u4ee5\u5206\u4e3a\u82e5\u5e72\u6b21\u8bfb\u3001\u8fd0\u7b97\u3001\u5199\uff0c\u5176\u4e2d\u4f1a\u53d1\u751f\u6570\u636e\u4e0d\u4e00\u81f4\uff08Conflict\uff09\u7684\u53ea\u6709\u591a\u4e2aTransaction\u5e76\u53d1\u8bfb\u5199\u540c\u4e00\u4e2a\u6570\u636e\u8fd9\u4e00\u79cd\u60c5\u51b5\uff08\u5168\u90e8\u53ea\u8bfb\u4e0d\u4f1a\u53d1\u751f\u51b2\u7a81\uff0c\u8fd0\u7b97\u7531CPU\u800c\u4e0d\u662fDBMS\u8d1f\u8d23\uff09\uff0c\u6240\u4ee5\u4e0b\u9762\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u6709\u8bfb\u6709\u5199\u8fd9\u4e00\u79cd\u60c5\u51b5</p> <ul> <li> <p>Conflict Serializability</p> <p>\u5982\u679cS\u53ef\u4ee5\u901a\u8fc7\u4ea4\u6362\u76f8\u4e92\u4e0d\u51b2\u7a81\u7684\u8bed\u53e5\u8f6c\u6362\u4e3aS\u2018\uff0c\u6216\u8005\u8bf4S\u4e0eS\u2018\u6240\u6709\u76f8\u4e92\u51b2\u7a81\u7684Instructions\u4ee5\u76f8\u540c\u7684\u987a\u5e8f\u6392\u5217\uff0c\u79f0S\u548cS\u2018\u662f\u51b2\u7a81\u7b49\u4ef7\uff08conflict equivalent\uff09\u7684</p> <p>\u5982\u679cS\u51b2\u7a81\u7b49\u4ef7\u4e8e\u4e00\u4e2a\u4e32\u884c\u8c03\u5ea6\u5e8f\u5217\uff0c\u79f0S\u662f\u51b2\u7a81\u53ef\u4e32\u884c\u7684\uff08conflict serializable\uff09\u3002</p> Example <ul> <li> <p>conflict serializable</p> <p></p> </li> <li> <p>not conflict serializable</p> <p></p> </li> </ul> </li> <li> <p>View Serializability</p> <p>\u540c\u6837\u4e5f\u6709 view equivalent, \u770b\u7740\u6bd4\u8f83\u590d\u6742\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u8003\u8651\u6bcf\u4e00\u6b21\u7684\u8bfb\u8981\u7b26\u5408\u539f\u6765\u64cd\u4f5c\u987a\u5e8f\u7684\u503c\uff0c\u5e76\u4e14\u6700\u540e\u4e00\u6b21\u5199\u7684\u4e8b\u52a1\u5e94\u8be5\u4fdd\u6301\u4e00\u81f4</p> <p></p> <p>\u5bb9\u6613\u53d1\u73b0\uff0c\u5728\u8fd9\u4e2a\u5b9a\u4e49\u4e0b\uff0cview serializability\u5c31\u76f8\u5f53\u4e8econflict serializability\u7684\u4e00\u4e2a\u5f31\u5316\u7248\uff0c\u53ef\u80fd\u5b58\u5728blind write\uff08\u672a\u8bfb\u53d6\u800c\u5199\uff09\u95ee\u9898</p> <p>Warning</p> <p>\u82e5\u8003\u8651\u8fd0\u7b97\u7b49\u4e00\u4e9b\u5176\u4ed6\u64cd\u4f5c\uff0c\u4f1a\u6709\u9664\u8fd9\u4e24\u8005\u4e4b\u5916\u7684serializability</p> <p>\u5982\u4e0b\u9762 schedule <p></p> <li> <p>Precedence Graph</p> <p>\\(T_i \\rightarrow T_j\\): \\(\\quad T_i\\) \u4e0e \\(T_j\\)\u6709\u51b2\u7a81\u5e76\u4e14\\(T_i\\)\u5148\u6267\u884c</p> <p>\u5f53\u4e14\u4ec5\u5f53Precidence\u56fe\u4e2d\u65e0\u73af\uff08\u6ce8\u610f\u8fd9\u662f\u6709\u5411\u56fe\u7684\u73af\uff09\u65f6\uff0c\u67d0\u4e2aschedule\u662f\u51b2\u7a81\u53ef\u4e32\u7684\uff08\u663e\u7136\u53ef\u4ee5\u7528topo sort\u89e3\u51b3\uff09</p> <p>\u4f46\u5bf9\u4e8e \u89c6\u56fe\u53ef\u4e32\u884c \u7684\u68c0\u6d4b\u5c5e\u4e8eNP-C\u95ee\u9898\uff0c\u56e0\u6b64\u6ca1\u6709\u6709\u6548\u7b97\u6cd5\uff0c\u53ea\u80fd\u7528\u4e00\u4e9b\u5fc5\u8981\u6761\u4ef6\u8fdb\u884ccheck</p> </li>"},{"location":"Database/#recoverable-schedule","title":"Recoverable Schedule","text":"<p>\u5982\u679c\u5e76\u53d1\u8c03\u5ea6\u4e0b\u67d0\u4e00\u4e2aTransaction\u5931\u8d25\u9700\u8981\u56de\u6eda\u4f1a\u5e26\u52a8\u5176\u4ed6Transaction\u4e00\u8d77\u56de\u6eda\uff0c\u79f0\u4e3a\u7ea7\u8054\u56de\u6eda\uff08cascading rollback\uff09\uff0c\u5982\u679c\u4e00\u4e2a\u8c03\u5ea6\u5e8f\u5217\u4e0d\u4f1a\u5f15\u8d77\u4efb\u4f55\u7ea7\u8054\u56de\u6eda\uff0c\u79f0\u5b83\u662f\u975e\u7ea7\u8054\u5e8f\u5217\uff08cascadeless schedule\uff09</p> not recoverable <p></p> <p>\u5b9e\u73b0\u975e\u7ea7\u8054\u5e8f\u5217\u7684\u5177\u4f53\u8981\u6c42\u662f\uff0c\u5e76\u53d1Transaction\u4eec\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u6709\u8bfb\u6709\u5199\u65f6\uff0c\u4efb\u610f\u505a\u4e86\u5199\u5165\u7684Transaction\u5fc5\u987b\u5148commit\uff0c\u4e0b\u4e00\u4e2aTransaction\u624d\u80fd\u4ece\u4e2d\u8bfb</p>"},{"location":"Database/#trade-off","title":"Trade Off","text":"<p>\u7b2c\u4e00\u8282\u4e2d\u5c31\u63d0\u5230\u4e86\uff0c\u4e32\u884c\u8c03\u5ea6\u6570\u636e\u5b89\u5168\u6027\u5f3a\u800c\u6027\u80fd\u5f31\uff0c\u5e76\u884c\u8c03\u5ea6\u53cd\u4e4b\u3002</p> <p>\u5b9e\u9645\u4f7f\u7528\u4e2d\u8fd9\u5f80\u5f80\u4e0d\u662f\u4e00\u4e2a\u9009\u62e9\u9898\uff0c\u901a\u8fc7\u4e00\u4e9btradeoff(accuracy, week consistency...)\u53d6\u6298\u4e2d\u3002\u4e0b\u9762\u5217\u51fa\u4e86\u5e38\u89c1\u7684\u56db\u79cd\u5e76\u884c\u5316\u7684\u5c42\u6b21\uff1a</p> <p></p> \u989d\u5916\u63a7\u5236\u624b\u6bb5 <p></p>"},{"location":"Database/#_34","title":"\u5341\u516b\u7ae0 \u5e76\u53d1\u63a7\u5236","text":"<p>\u524d\u4e00\u7ae0\u4ece\u8c03\u5ea6\u539f\u7406\u4e0a\u4ecb\u7ecd\u4e86\u5e76\u53d1\u63a7\u5236\uff0c\u800c\u672c\u7ae0\u662f\u8bb2\u89e3\u5176\u5177\u4f53\u7684\u5b9e\u73b0\u6b65\u9aa4</p> <p>Warning</p> <p>Schedules not possible under two-phase locking are possible under the tree protocol, and vice versa.</p>"},{"location":"Database/#lock-based-protocols","title":"Lock-Based Protocols","text":"<p>\u9501\u662fTransaction\u5bf9\u67d0\u4e2a\u6570\u636e\u7684\u6743\u9650\u7533\u8bf7\uff0c\u7531\u5e76\u53d1\u7ba1\u7406\u5668\u63a7\u5236\u3002</p> <ul> <li> <p>exclusive (X) mode: Data item can be both read as well as written. X-lock is requested using  lock-X instruction.</p> </li> <li> <p>shared (S) mode: Data item can only be read. S-lock is requested using  lock-S instruction.</p> </li> </ul> <p>\u6839\u636e\u4e0a\u8ff0\u903b\u8f91\uff0c\u5bf9\u67d0\u4e00\u5757\u6570\u636e\uff0c\u6ca1\u6709X\u9501\u65f6\u53ef\u4ee5\u5206\u4eab\u591a\u628aS\u9501\u7ed9\u4e0d\u540cTransaction\uff0c\u4f46\u662f\u5b58\u5728\u4e00\u628aX\u9501\u540e\u5c31\u4e0d\u80fd\u518d\u6709\u4efb\u4f55\u5176\u4ed6\u9501\u3002\u8fd9\u79cd\u505a\u6cd5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u907f\u514d\u4e86\u6df7\u4e71\u7684\u8bfb\u5199</p> <p></p>"},{"location":"Database/#_35","title":"\u5185\u90e8\u5b9e\u73b0","text":"Atomatic Acquisition of Locks <p>\u9501\u7b56\u7565\u4e00\u822c\u7531lock manager \u7ba1\u7406\uff0c\u901a\u8fc7\u6570\u636e\u7ed3\u6784Lock Table\u5b9e\u73b0\uff0c\u7528\u54c8\u5e0c\u8868\u5f52\u7c7b\u6570\u636e\uff0c\u6bcf\u4e2a\u6570\u636e\u4e0b\u6302\u94fe\u8868\u50a8\u5b58\u5f53\u524d\u9501\u7684\u8bf7\u6c42\u5e8f\u5217\uff08\u4e00\u822c\u8fd8\u4f1a\u4e3a\u6bcf\u4e2a\u4e8b\u52a1\u5efa\u7acb\u9501\u94fe\u8868\uff09</p> <ul> <li> <p>\u65b0\u8bf7\u6c42\uff1a\u5c06\u65b0\u8282\u70b9\u6302\u5230\u94fe\u8868\u7684\u540e\u7aef</p> </li> <li> <p>\u89e3\u9501\uff1a\u4ece\u94fe\u8868\u4e2d\u5220\u9664\u5bf9\u5e94\u8282\u70b9\uff0c\u5e76\u68c0\u67e5\u8be5\u8282\u70b9\u540e\u7eed\u7684\u8bf7\u6c42\u8fdb\u884c\u5904\u7406</p> </li> </ul> <p></p>"},{"location":"Database/#_36","title":"\u5e38\u89c1\u95ee\u9898","text":"<ul> <li> <p>Dead Lock\uff1a\u9501\u534f\u8bae\u6700\u5927\u7684\u95ee\u9898\u662f\u6b7b\u9501\u4e0d\u80fd\u88ab\u5b8c\u5168\u907f\u514d,\u6bd4\u5982\u4e0b\u56fe\u53ea\u80fd\u901a\u8fc7\u56de\u6eda\u5176\u4e2d\u4e00\u4e2aTransaction\u6765\u89e3\u51b3</p> <p></p> </li> <li> <p>Startvation\uff1a\u53e6\u4e00\u79cd\u5e38\u89c1\u7684\u60c5\u51b5\u662f\uff0c\u6d3e\u51fa\u4e86\u8fc7\u591a\u7684S\u9501\uff0c\u5bfc\u81f4\u51fa\u73b0\u4e00\u4e2aX\u9501\u8bf7\u6c42\u65f6\uff0c\u5176\u4f1a\u88ab\u540e\u9762\u7684\u5171\u4eab\u9501\u6240\u963b\u585e\uff08\u6392\u4ed6\u9501\u53ea\u80fd\u7b49\u5f85\uff0c\u800c\u5171\u4eab\u9501\u53ef\u4ee5\u968f\u4fbf\u52a0\uff09\uff0c\u9020\u6210\u65f6\u95f4\u6d6a\u8d39</p> </li> </ul>"},{"location":"Database/#two-phase-lock-protocols","title":"Two-phase Lock Protocols","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u5404\u4e2aTransaction\u5728\u4efb\u610f\u65f6\u523b\u968f\u610f\u52a0\u9501\u89e3\u9501\u5e26\u6765\u524d\u4e00\u8282\u4e2d\u63d0\u5230\u7684\u95ee\u9898\uff0c\u51fa\u73b0\u4e86\u4e8c\u9636\u6bb5\u7684\u9501\u7b56\u7565\uff1a</p> <ul> <li> <p>\u4e8c\u9636\u6bb5\u9501\u7b56\u75652PL\u662f\u5bf9\u5355\u4e2aTransaction\u800c\u8a00\u7684</p> </li> <li> <p>\u4e24\u9636\u6bb5\u9501\u5f3a\u8c03\u7684\u662f\u52a0\u9501\uff08\u589e\u957f\u9636\u6bb5\uff0cgrowing phase\uff09\u548c\u89e3\u9501\uff08\u7f29\u51cf\u9636\u6bb5\uff0cshrinking phase\uff09\u8fd9\u4e24\u9879\u64cd\u4f5c\uff0c\u4e14\u6bcf\u9879\u64cd\u4f5c\u5404\u81ea\u4e3a\u4e00\u4e2a\u9636\u6bb5</p> <ul> <li> <p>\u4e0d\u7ba1\u540c\u4e00\u4e2a\u4e8b\u52a1\u5185\u9700\u8981\u5728\u591a\u5c11\u4e2a\u6570\u636e\u9879\u4e0a\u52a0\u9501\uff0c\u6240\u6709\u7684\u52a0\u9501\u64cd\u4f5c\u90fd\u53ea\u80fd\u5728\u540c\u4e00\u4e2a\u9636\u6bb5\u5b8c\u6210\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\u5185\uff0c\u4e0d\u5141\u8bb8\u5bf9\u5df2\u7ecf\u52a0\u9501\u7684\u6570\u636e\u9879\u8fdb\u884c\u89e3\u9501\u64cd\u4f5c\u3002</p> </li> <li> <p>\u53cd\u4e4b\uff0c\u4efb\u4f55\u4e00\u6b21\u89e3\u9501\u5373\u89c6\u4e3a\u8fd9\u4e2aTransaction\u8fdb\u5165\u89e3\u9501\u671f\uff0c\u6b64\u540e\u4e0d\u5141\u8bb8\u8be5Transaction\u65b0\u52a0\u4efb\u4f55\u9501\u3002</p> </li> </ul> </li> </ul> proof <p>We prove by contradiction.</p> <p>Suppose that there exists a two-phase lock that is not serializable. Then, there must be a cycle in the precedence graph.</p> <p>Let \\(T_1\\rightarrow T_2 \\rightarrow \\ldots \\rightarrow T_n \\rightarrow T_1\\) be the transactions in the cycle, \\(\\alpha_i\\) denote the lock point of \\(T_i\\). Then, we have \\(\\alpha_1 &lt; \\alpha_2 &lt; \\ldots &lt; \\alpha_n &lt; \\alpha_1\\), which is a contradiction.</p> <p>Therefore, every two-phase lock is serializable.</p> <p>\u4e8c\u9636\u6bb5\u9501\u7b56\u7565\u4fdd\u8bc1\u4e86\u51b2\u7a81\u53ef\u4e32\u884c\u6027\uff0c\u4f46\u662f\u4e0d\u80fd\u4fdd\u8bc1\u5f97\u5230\u7684\u5e8f\u5217\u662f\u975e\u7ea7\u8054\u56de\u6eda\u7684\uff0c\u56e0\u6b64\u6709\u4e86\u4e24\u79cd\u884d\u751f\u7b56\u7565\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a</p> <ul> <li> <p>\u9ed8\u8ba42PL\uff1a\u53ea\u8981Transaction\u4e0d\u9700\u8981\u518d\u7533\u8bf7\u65b0\u9501\uff0c\u5e76\u4e14\u5bf9\u67d0\u4e2a\u6570\u636e\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u5df2\u7ecf\u5b8c\u6210\uff0c\u90a3\u4e48\u5bf9\u8fd9\u4e2a\u6570\u636e\u7684\u9501\u5c31\u53ef\u4ee5\u88ab\u91ca\u653e\uff0c\u5373\u4f7f\u6b64\u65f6Transaction\u5185\u8fd8\u6709\u5176\u4ed6\u64cd\u4f5c\u6ca1\u6709\u8fdb\u884c</p> </li> <li> <p>Strict Two-phase Locking\uff1a\u4e00\u4e2aTransaction\u4f1a\u4fdd\u7559\u5b83\u7684X\u9501\u76f4\u5230commit/abort\u4e4b\u524d</p> </li> <li> <p>Rigorous Two-phase Locking\uff1a\u4e00\u4e2aTransaction\u4f1a\u4fdd\u7559\u5b83\u7684\u6240\u6709\u9501\u76f4\u5230commit/abort\u4e4b\u524d</p> </li> </ul>"},{"location":"Database/#tree-based-protocol-in-graph-based-protocol","title":"Tree-Based Protocol (\\(\\in\\) Graph-Based Protocol)","text":"<p>Graph-Based Protocol</p> <p></p> <p>\u6811\u534f\u8bae\u7684\u8981\u6c42\uff1a</p> <ul> <li> <p>\u56fe\u7ed3\u6784\u8981\u662f\u4e00\u68f5\u6709\u6839\u6811</p> </li> <li> <p>Transaction\u53ea\u80fd\u7533\u8bf7X\u9501\uff0c\u5e76\u4e14\u540c\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u4e00\u4e2a\u6570\u636e\u53ea\u80fd\u7533\u9501\u4e00\u6b21</p> </li> <li> <p>Transaction\u7684\u7b2c\u4e00\u628a\u9501\u53ef\u4ee5\u662f\u4efb\u4f55\u6570\u636e\u9879\u7684\uff1b\u63a5\u4e0b\u6765\uff0c\u53ea\u6709\u8be5\u4e8b\u52a1\u6301\u6709\u4e86\u6570\u636e\u9879\u7684\u7236\u8282\u70b9\u7684\u9501\uff0c\u624d\u53ef\u4ee5\u7ed9\u6570\u636e\u9879\u52a0\u9501</p> </li> <li> <p>\u6570\u636e\u9879\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u89e3\u9501</p> </li> </ul> <p>\u7279\u6027\uff1a</p> <ul> <li> <p>\u4fdd\u8bc1\u51b2\u7a81\u53ef\u4e32\u884c\u5316</p> </li> <li> <p>\u76f8\u6bd4\u4e8c\u9636\u6bb5\u9501\u534f\u8bae\u89e3\u9501\u65f6\u95f4\u81ea\u7531</p> </li> <li> <p>\u4fdd\u8bc1\u65e0\u6b7b\u9501</p> </li> <li> <p>\u4e0d\u4fdd\u8bc1\u53ef\u6062\u590d\u6027\u548c\u65e0\u8054\u7ea7\u56de\u6eda\uff0c\u4f46\u53ef\u901a\u8fc7\u589e\u52a0\u9650\u5236\u964d\u4f4e\u4e00\u5b9a\u5e76\u53d1\u6027\u6765\u5b9e\u73b0</p> </li> </ul> trade off <ul> <li> <p>\u53ef\u6062\u590d\u6027&amp;\u65e0\u8054\u7ea7\u56de\u6eda\uff1a\u4e8b\u52a1\u7ed3\u675f\u524d\u4e0d\u5141\u8bb8\u91ca\u653e\u6392\u4ed6\u9501\uff0c\u4f46\u662f\u4f1a\u964d\u4f4e\u5e76\u53d1\u6027</p> </li> <li> <p>\u53ef\u6062\u590d\u6027\uff1a\u4e3a\u6bcf\u4e2a\u6570\u636e\u8bbe\u7acb \u63d0\u4ea4\u4f9d\u8d56\uff08\u5bf9\u4e3a\u63d0\u4ea4\u6570\u636e\u7684\u8bfb\u64cd\u4f5c\uff09\uff0c\u53ea\u6709\u5f53\u6240\u6709\u4f9d\u8d56\u7684\u6570\u636e\u90fd\u63d0\u4ea4\u540e\uff0c\u5373\u90fd\u5df2\u7ecf\u6b63\u786e\u5199\u5165\u540e\uff0c\u624d\u80fd\u63d0\u4ea4\uff1b\u5f53\u67d0\u4e2a\u6570\u636e\u9879\u88ab\u56de\u6eda\u65f6\uff0c\u6240\u6709\u4f9d\u8d56\u4e8e\u5b83\u7684\u6570\u636e\u4e5f\u8981\u56de\u6eda</p> </li> </ul> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>\u6709\u65f6\u4f1a\u7ed9\u4e0d\u9700\u8981\u8bbf\u95ee\u7684\u6570\u636e\u9879\u52a0\u9501\uff08\u8981\u6c42\u5148\u7ed9\u7236\u8282\u70b9\u52a0\u9501\uff09\uff0c\u4f1a\u589e\u52a0\u9501\u5f00\u9500</li> </ul>"},{"location":"Database/#handling-deadlock","title":"Handling Deadlock","text":"Example"},{"location":"Database/#_37","title":"\u6b7b\u9501\u9884\u9632","text":"<p>\u901a\u8fc7\u4e00\u4e9b\u89c4\u5219\u907f\u514d\u6b7b\u9501\u7684\u53d1\u751f</p> <ul> <li> <p>pre-declaration:</p> <p>\u5728\u4e8b\u52a1\u6267\u884c\u524d\u4e00\u6b21\u6027\u7533\u8bf7Transaction\u9700\u8981\u7684\u6240\u6709\u9501\uff0c\u5c01\u9501\u6240\u6709\u7684\u6570\u636e\u9879</p> <ul> <li> <p>\u4e8b\u52a1\u5f00\u59cb\u524d\u96be\u4ee5\u786e\u5b9a\u9700\u8981\u7684\u9501</p> </li> <li> <p>\u8bb8\u591a\u9501\u53ef\u80fd\u4f1a\u88ab\u6d6a\u8d39</p> </li> </ul> </li> <li> <p>graph-based protocol:</p> <p>\u4f7f\u7528\u56fe\u534f\u8bae\u7ed9\u6240\u6709\u7684\u6570\u636e\u9879\u52a0\u4e00\u4e2a\u6b21\u5e8f\uff0c\u8981\u6c42\u4e8b\u52a1\u5fc5\u987b\u6309\u7167\u8fd9\u4e2a\u6b21\u5e8f\u52a0\u9501\uff0c\u5982\u524d\u8ff0\u7684\u6811\u534f\u8bae</p> </li> <li> <p>Wait-die Scheme</p> <p>\u4e24\u4e2a\u4e8b\u52a1\u76f8\u4e92\u6b7b\u9501\uff0c\u6839\u636e\u8d4b\u4e88\u7684\u65f6\u95f4\u6233\uff0c\u82e5\u5f53\u524d\u4e8b\u52a1\u5148\u4e8e\u8bf7\u6c42\u51b2\u7a81\u7684\u4e8b\u52a1\uff0c\u7b49\u5f85\uff1b\u5426\u5219\uff0c\u76f4\u63a5\u81ea\u5df1\u56de\u6eda\u6eda\u86cb\uff08\u5148\u5165\u4e3a\u4e3b\uff09</p> <ul> <li>\u7f3a\u70b9\u662f\u56de\u6eda\u540e\u91cd\u65b0\u8ba1\u5148\u540e\uff0c\u4e8e\u662f\u540e\u5f00\u59cb\u7684\u56de\u6eda\u540e\u4ecd\u7136\u662f\u540e\u5f00\u59cb\u7684\uff0c\u8fd9\u6709\u53ef\u80fd\u5bfc\u81f4\u67d0\u4e2a\u4e8b\u52a1\u4e00\u76f4\u5f97\u4e0d\u5230\u6267\u884c</li> </ul> </li> <li> <p>Wound-wait Scheme</p> <p>\u4e24\u4e2a\u4e8b\u52a1\u76f8\u4e92\u6b7b\u9501\uff0c\u6839\u636e\u8d4b\u4e88\u7684\u65f6\u95f4\u6233\uff0c\u82e5\u5f53\u524d\u4e8b\u52a1\u665a\u4e8e\u8bf7\u6c42\u51b2\u7a81\u7684\u4e8b\u52a1\uff0c\u7b49\u5f85\uff1b\u5426\u5219\uff0c\u76f4\u63a5\u56de\u6eda\u81ea\u5df1\u8ba9\u4f4d\uff08\u957f\u6c5f\u540e\u6d6a\u63a8\u524d\u6d6a\uff09</p> <ul> <li>\u7f3a\u70b9\u662f\u5148\u5f00\u59cb\u4e00\u822c\u610f\u5473\u7740\u5df2\u7ecf\u6267\u884c\u7684\u64cd\u4f5c\u66f4\u591a\uff0c\u6240\u4ee5\u56de\u6eda\u7684\u6210\u672c\u66f4\u9ad8</li> </ul> </li> <li> <p>Timeout</p> <p>\u4e3a\u6bcf\u4e2a\u4e8b\u52a1\u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\u65f6\u95f4\uff0c\u8d85\u65f6\u540e\u76f4\u63a5\u56de\u6eda</p> <ul> <li>\u7b80\u5355\u7c97\u66b4\uff0c\u4f46\u662f\u65f6\u95f4\u96be\u4ee5\u628a\u63e1\uff0c\u5e94\u7528\u573a\u666f\u6709\u9650</li> </ul> </li> </ul>"},{"location":"Database/#_38","title":"\u68c0\u6d4b\u6b7b\u9501","text":"<p>\u7528\u7c7b\u4f3c\u524d\u5e8f\u56fe\u7684\u7b49\u5f85\u56fe\uff08wait-for graph\uff09\u5173\u8054\u5404\u4e2a\u4e8b\u52a1,\u7bad\u5934\u4eceTi\u6307\u5411Tj\u610f\u5473\u7740Ti\u6b63\u5728\u7b49\u5f85Tj\u89e3\u9501\u67d0\u4e2a\u6570\u636e\uff0c\u81ea\u5df1\u624d\u80fd\u52a0\u9501\u4ee5\u7ee7\u7eed\u6267\u884c\u64cd\u4f5c\u3002</p> <p>\u540c\u6837\u901a\u8fc7\u68c0\u6d4b\u56fe\u4e2d\u662f\u5426\u6709\u73af\u6765\u5224\u65ad\u662f\u5426\u6709\u6b7b\u9501\uff0c\u6709\u73af\u5219\u6709\u6b7b\u9501\uff0c\u5426\u5219\u6ca1\u6709\u3002</p> <p>\u6ce8\u610f\u533a\u5206</p> <p>\u4e0e\u524d\u5e8f\u56fe\u4e0d\u540c\u7684\u662f\uff0c\u524d\u5e8f\u56fe\u968fSchedule\u7684\u786e\u5b9a\u800c\u786e\u5b9a\uff0c\u6267\u884c\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u53d8\u5316\uff1b\u800c\u7b49\u5f85\u56fe\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u65f6\u65f6\u53ef\u80fd\u6539\u52a8</p>"},{"location":"Database/#_39","title":"\u6b7b\u9501\u6062\u590d","text":"<p>\u8981\u7834\u574f\u6b7b\u9501\uff0c\u53ea\u80fd\u901a\u8fc7\u56de\u6eda\u67d0\u4e9b\u4e8b\u52a1\uff08victim\uff09</p> Victim Selection <ul> <li> <p>\u76ee\u524d\u4e0e\u672a\u6765\u7684\u8fd0\u7b97\u65f6\u95f4\u4f30\u8ba1</p> </li> <li> <p>\u4e8b\u52a1\u76ee\u524d\u4e0e\u672a\u6765\u4f7f\u7528\u7684\u8d44\u6e90\u91cf\u4f30\u8ba1</p> </li> <li> <p>\u4e8b\u52a1\u56de\u6eda\u6d89\u53ca\u7684\u4e8b\u52a1\u6570\u76ee</p> </li> </ul> <ul> <li> <p>Total Rollback</p> <p>\u5f7b\u5e95\u56de\u6eda\u9009\u5b9a\u7684\u4e8b\u52a1\uff0c\u7136\u540e\u91cd\u65b0\u5f00\u59cb</p> </li> <li> <p>Partial Rollback</p> <p>total rollback\u53ef\u80fd\u5bfc\u81f4\u8fc7\u591a\u4e0d\u5fc5\u8981\u7684\u56de\u6eda\uff0c\u56e0\u6b64\u6709\u4e86partial rollback\uff0c\u53ea\u56de\u6eda\u5fc5\u8981\u7684\u90e8\u5206\uff0c\u5373\u56de\u6eda\u5230\u6d88\u9664\u6b7b\u9501\u7684\u72b6\u6001\u5c31\u505c\u6b62</p> </li> </ul>"},{"location":"Database/#multiple-granularity","title":"Multiple Granularity","text":"<p>Granularity\u8bd1\u4e3a\u7c92\u5ea6,\u524d\u9762\u9501\u534f\u8bae\u76f8\u5173\u5185\u5bb9\u4e2d\uff0c\u6211\u4eec\u5c06\u52a0\u9501\u7684\u5bf9\u8c61\u6cdb\u6307\u4e3a\u201c\u6570\u636e\u201d\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u201c\u6570\u636e\u201c\u6307\u4ee3\u7684\u5185\u5bb9\u91cf\u53ef\u5927\u53ef\u5c0f\uff0c\u7ec4\u7ec7\u6210\u4e00\u79cd\u6811\u5f62\u5c42\u6b21\u7ed3\u6784</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u4ece\u6574\u4e2a\u6570\u636e\u5e93\u5230\u6bcf\u4e00\u4e2atuple\uff0c\u53ef\u4ee5\u7528\u4e00\u4e2a\u6811\u578b\u7ed3\u6784\u8868\u793a\uff0c\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u53ef\u4ee5\u89c6\u4e3a\u201c\u6570\u636e\u201d</p> <p></p> <p>\u901a\u8fc7\u5bf9\u591a\u7c92\u5ea6\u7684\u652f\u6301\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u9009\u62e9\u52a0\u9501\u7b56\u7565\uff0c\u4ece\u800c\u5e73\u8861\u5e76\u53d1\u6027\u548c\u6027\u80fd</p> <p></p> <p>\u5177\u4f53\u5b9e\u73b0\u65f6\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u52a0\u9501\u8bf7\u6c42\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u5176\u6240\u5728\u7684\u7c92\u5ea6\u8fdb\u884c \u663e\u793a\u52a0\u9501 \u5373\u53ef\uff0c\u800c\u5176\u5b50\u8282\u70b9\u5c06\u4f1a\u9ed8\u8ba4\u88ab \u9690\u5f0f\u52a0\u9501\uff0c \u5219\u67e5\u8be2\u65f6\u53ea\u8981\u8bbf\u95ee\u4ece\u6839\u8282\u70b9\u5230\u53f6\u5b50\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u6240\u6709\u6570\u636e\u9879\u68c0\u67e5\u9501\u5373\u53ef\u68c0\u67e5\u8fd9\u79cd\u201d\u9690\u5f0f\u9501\u201c\uff1b</p> <p>\u7136\u800c\uff0c\u5f53\u8981\u7ed9\u67d0\u4e2a\u6570\u636e\u9879\u52a0\u9501\u65f6\uff0c\u6211\u4eec\u8fd8\u5f97\u786e\u8ba4\u5176\u5b50\u8282\u70b9\u662f\u5426\u5df2\u7ecf\u88ab\u52a0\u9501\u800c\u5bfc\u81f4\u201c\u9690\u5f0f\u9501\u201d\u51b2\u7a81\uff0c\u663e\u7136\u6211\u4eec\u4e0d\u4f1a\u50bb\u50bb\u5730\u68c0\u67e5\u6574\u4e2a\u5b50\u6811~~\uff08\u4e0d\u7136\u591a\u7c92\u5ea6\u7684\u8bbe\u8ba1\u5c31\u6ca1\u6709\u610f\u4e49\u4e86\uff09~~\uff0c\u8fd9\u91cc\u901a\u8fc7\u5f15\u5165\u610f\u5411\u9501\uff08intention lock\uff09\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a\u5f53\u67d0\u4e2a\u8282\u70b9\u88ab\u52a0\u9501\u65f6\uff0c\u4f1a\u5bf9\u4ece\u6839\u8282\u70b9\u5230\u8be5\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u6240\u6709\u8282\u70b9\u52a0\u4e0a\u610f\u5411\u9501\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u8282\u70b9\u7684\u610f\u5411\u9501\u6765\u5224\u65ad\u5b50\u8282\u70b9\u662f\u5426\u88ab\u52a0\u9501</p> <p>\u5f15\u5165\u610f\u5411\u9501\u540e\u7684\u52a0\u9501\u51b2\u7a81\u5173\u7cfb\u56fe\u5982\u4e0b\uff08S/X\u8868\u793a\u6574\u68f5\u5b50\u6811\u7684\u72b6\u6001\uff0cIS/X\u8868\u793a\u5b50\u6811\u5185\u67d0\u4e2a\u8282\u70b9\u7684\u72b6\u6001\uff09</p> <p></p> Note <p>\u591a\u7c92\u5ea6\u589e\u5f3a\u4e86\u5e76\u53d1\u6027\uff0c\u51cf\u5c11\u4e86\u9501\u5f00\u9500</p> <p>Lock granularity escalation\u7b56\u7565: in case there are too many locks at a particular level, switch to higher granularity S or X lock</p>"},{"location":"Database/#other-operations_1","title":"Other Operations","text":""},{"location":"Database/#insertdelete","title":"Insert/Delete","text":"<ul> <li> <p>Insert</p> <p>\u63d2\u5165\u6570\u636e\u540e\uff0c\u9700\u8981\u5bf9\u65b0\u6570\u636e\u9879\u52a0\u6392\u4ed6\u9501\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027</p> <p>\u5fc5\u987b\u4fdd\u8bc1\u65b0\u63d2\u5165\u7684\u6570\u636e\u4e0d\u80fd\u88ab\u5176\u4ed6\u4e8b\u52a1\u8bbf\u95ee\uff0c\u76f4\u5230\u63d2\u5165\u4e8b\u52a1\u63d0\u4ea4</p> </li> <li> <p>Delete</p> <p>\u5220\u9664\u6570\u636e\u524d\uff0c\u9700\u8981\u5bf9\u88ab\u5220\u9664\u7684\u6570\u636e\u9879\u52a0\u6392\u4ed6\u9501\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027</p> <p>\u5fc5\u987b\u5c0f\u5fc3\u5220\u9664\u64cd\u4f5c\u4e0e\u8bfb\u5199\u64cd\u4f5c\u7684\u51b2\u7a81</p> </li> </ul>"},{"location":"Database/#predicate-reads","title":"Predicate Reads","text":"<ul> <li> <p>Phantom Phenomenon</p> <p>\u672c\u8d28\u4e3a\u4e00\u4e2a\u4e8b\u52a1\u91cd\u590d\u8bfb\u53d6\u540c\u4e00\u4e2a\u8303\u56f4\u7684\u6570\u636e\uff0c\u4f46\u662f\u5728\u4e24\u6b21\u8bfb\u53d6\u4e4b\u95f4\u6709\u53e6\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u63d2\u5165\u3001\u4fee\u6539\uff08\u5982\u5c06\u4e3a\u9501\u4e0a\u7684\u6570\u636e\u6539\u4e3a\u67e5\u8be2\u7684\u6570\u636e\uff09\u7b49\u64cd\u4f5c\uff0c\u4e00\u822c\u7684\u9501\u534f\u8bae\u65e0\u6cd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4ece\u800c\u5bfc\u81f4\u4e24\u6b21\u8bfb\u53d6\u7684\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u6210\u4e3a\u5e7b\u8c61\u73b0\u8c61</p> </li> <li> <p>\u66b4\u529b\u89e3\u51b3\u65b9\u6848</p> <p>\u65b0\u5efa\u4e00\u4e2a\u65b0\u6570\u636e\u9879\uff0c\u7528\u4e8e\u8bb0\u5f55\u67e5\u8be2\u7684\u8303\u56f4\uff0c\u5bf9\u6240\u6709\u53ef\u80fd\u5bfc\u81f4\u5e7b\u8c61\u73b0\u8c61\u7684\u6570\u636e\u9879\u52a0\u9501</p> <p>\u663e\u7136\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u9501\u5f00\u9500\uff0c\u5e76\u5927\u5927\u964d\u4f4e\u5e76\u53d1\u6027</p> </li> <li> <p>Index Locking</p> <p>\u53ea\u6709\u5f53\u4e8b\u52a1\u5728\u7d22\u5f15\u7684\u53f6\u7ed3\u70b9\u4e0a\u627e\u5230\u76f8\u5e94\u7684\u6570\u636e\u9879\u65f6\uff0c\u624d\u80fd\u771f\u6b63\u8bbf\u95ee\u8fd9\u4e9b\u6570\u636e</p> <ul> <li> <p>\u6734\u7d20\u505a\u6cd5\uff1a</p> <p>\u5bf9\u6bcf\u4e2a\u4e8b\u52a1\u8bbf\u95ee\u7684\u6240\u6709\u53f6\u7ed3\u70b9\u7d22\u5f15\u9879\u90fd\u52a0\u4e0a\u5171\u4eab\u9501</p> <p>\u5f53\u8981\u63d2\u5165\u3001\u5220\u9664\u3001\u4fee\u6539\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u66f4\u65b0\u6574\u4e2a\u7d22\u5f15\uff0c\u4e5f\u5373\u9700\u8981\u5bf9\u6240\u6709\u6d89\u53ca\u7684\u53f6\u7ed3\u70b9\u52a0\u4e0a\u6392\u4ed6\u9501</p> <p>\u6b64\u5916\uff0c\u9700\u8981\u9075\u5faa\u4e24\u9636\u6bb5\u9501\u534f\u8bae</p> </li> <li> <p>Next-Key Locking</p> <p>\u7531\u4e8e\u6734\u7d20\u505a\u6cd5\u4e2d\uff0c\u9700\u8981\u5bf9\u6574\u4e2a\u53f6\u7ed3\u70b9\u52a0\u9501\uff0c\u5bfc\u81f4\u5e76\u53d1\u6027\u80fd\u5927\u5927\u964d\u4f4e\uff0c\u4e3a\u4e86\u907f\u514d\u4e0a\u8ff0\u95ee\u9898\uff0c\u5f15\u5165\u4e86Next-Key Locking</p> <p>\u8c13\u8bcd\u67e5\u8be2\u65f6\uff0c\u5bf9\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684 \u7d22\u5f15\u6570\u636e\u9879\u4ee5\u53ca\u540e\u4e00\u4e2a \u7d22\u5f15\u6570\u636e\u9879\u52a0\u5171\u4eab\u9501</p> <p>\u63d2\u5165\u3001\u5220\u9664\u3001\u4fee\u6539\u6570\u636e\u65f6\uff0c\u5bf9\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684 \u7d22\u5f15\u6570\u636e\u9879\u4ee5\u53ca\u540e\u4e00\u4e2a \u7d22\u5f15\u6570\u636e\u9879\u52a0\u6392\u4ed6\u9501</p> <p>\u8fd9\u6837\u5f53\u6709\u5e7d\u7075\u6570\u636e\u51fa\u73b0\u65f6\uff0c\u5fc5\u7136\u4f1a\u5f15\u8d77\u9501\u51b2\u7a81\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u4e00\u81f4\u6027</p> Example <p></p> </li> </ul> </li> </ul>"},{"location":"Database/#log-based-recovery","title":"\u5341\u4e5d\u7ae0 \u9519\u8bef\u6062\u590d\uff08Log-Based Recovery\uff09","text":""},{"location":"Database/#_40","title":"\u9519\u8bef\u7c7b\u578b","text":"<ul> <li> <p>Transaction Failures</p> <ul> <li> <p>logical errors: \u4e8b\u52a1\u903b\u8f91\u9519\u8bef\uff0c\u5982\u63d2\u5165\u91cd\u590d\u6570\u636e\u7b49</p> </li> <li> <p>system errors: \u7cfb\u7edf\u8fdb\u5165\u4e0d\u826f\u72b6\u6001\uff0c\u5982\u6b7b\u9501</p> </li> </ul> </li> <li> <p>System Crash</p> <p>fail-stop assumption: \u7cfb\u7edf\u5728\u53d1\u751f\u9519\u8bef\u65f6\u4f1a\u505c\u6b62\u8fd0\u884c\uff0c\u6613\u5931\u6027\u6570\u636e\u4e22\u5931\uff0c\u975e\u6613\u5931\u6027\u6570\u636e\u4e0d\u4f1a\u4e22\u5931</p> <ul> <li> <p>\u786c\u4ef6\u6545\u969c</p> </li> <li> <p>\u8f6f\u4ef6\u6545\u969c </p> </li> </ul> </li> <li> <p>Disk Failure</p> <p>\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7531\u4e8e\u78c1\u5934\u635f\u574f\u7b49\u6545\u969c\u5bfc\u81f4\u78c1\u76d8\u5757\u5185\u5bb9\u4e22\u5931</p> </li> </ul>"},{"location":"Database/#_41","title":"\u65e5\u5fd7","text":"<p>\u5bf9\u6bcf\u4e00\u4e2a\u4e8b\u52a1\u7684\u6bcf\u4e00\u4e2aupdate\u505a\u8bb0\u5f55\uff1a</p> <ul> <li> <p>Transaction\u5f00\u59cb\u65f6\uff0c\u8bb0\u5f55 <code>&lt;Ti start&gt;</code></p> </li> <li> <p>\u5bf9\u6bcf\u4e00\u4e2a\u5199\u64cd\u4f5c\uff0c\u8bb0\u5f55 <code>&lt;Ti, X, V0, V1&gt;</code>\uff08\u4e8b\u52a1\u7f16\u53f7Ti\uff0c\u5199\u6570\u636e\u7684\u5c5e\u6027X\uff0c\u539f\u503cV0\uff0c\u65b0\u503cV1\uff09</p> </li> <li> <p>\u63d0\u4ea4\u65f6\uff0c\u8bb0\u5f55<code>&lt;Ti commit/abort&gt;</code>\u8868\u793a\u4e8b\u52a1\u7ed3\u675f</p> </li> </ul> <p>\u5728\u66f4\u65b0\u65f6\u673a\u4e0a\u53c8\u6709\u4e24\u79cd\u9009\u62e9\uff1a</p> <ul> <li> <p>immediate-modification\uff1a</p> <ul> <li> <p>\u5141\u8bb8\u5728commit\u4e4b\u524d\u5c06\u503c\u5199\u5165buff/disk</p> </li> <li> <p>\u6570\u636e\u5177\u4f53\u4f55\u65f6\u3001\u4ec0\u4e48\u987a\u5e8f\u771f\u6b63\u5199\u5165disk\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u4ea4\u7ed9\u7f13\u51b2\u533a\u7ba1\u7406\u5668\u51b3\u5b9a </p> </li> </ul> <p>WAL (Write-Ahead Logging Rule)</p> <ul> <li> <p>\u4e3a\u4e86\u4fdd\u8bc1\u65e5\u5fd7\u7684\u6709\u6548\u6027\uff0c\u65e5\u5fd7\u5fc5\u987b\u5728\u6570\u636e\u5199\u5165\u4e4b\u524d\u5148\u5199\u5165\u7a33\u5b9a\u7684\u5b58\u50a8\u5668\uff0c\u518d\u6267\u884c\u76f8\u5173\u6570\u636e\u7684\u5199\u64cd\u4f5c</p> </li> <li> <p>Commit\u540e\u6570\u636e\u53ef\u4ee5\u5728buff\u4e2d\u505c\u7559\u4f46\u662fLog\u5fc5\u987b\u7acb\u523b\u8fdb\u5165Disk\u7b49\u7a33\u5b9a\u5b58\u50a8\u5668</p> </li> </ul> </li> <li> <p>deferred-modification\uff1a</p> <ul> <li>\u5ef6\u8fdf\u4fee\u6539\uff0c\u5199\u64cd\u4f5c\u5728commit\u4ee5\u524d\u90fd\u662f\u5728\u4e34\u65f6\u53d8\u91cf\u4e2d\u505a\uff0ccommit\u65f6\u4e00\u6b21\u5199\u5165buff/disk</li> </ul> </li> </ul> <p>\uff08\u672c\u4e66\u4e2d\u6211\u4eec\u53ea\u8ba8\u8bbaimmediate\u7684\u505a\u6cd5\uff09</p>"},{"location":"Database/#_42","title":"\u65e5\u5fd7\u6062\u590d","text":"<p>\u8fd9\u91cc\u53ea\u8ba8\u8bbastrict two-phase protocol\u4e0b\u7684\u6062\u590d</p>"},{"location":"Database/#check-point","title":"Check Point","text":"<p>\u91cd\u590d\u90a3\u4e9b\u5df2\u7ecf\u5199\u5165disk\u7684\u6570\u636e\u64cd\u4f5c\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u5982\u679c\u6bcf\u6b21\u90fd\u4ece\u6700\u5f00\u59cb\u7684\u65e5\u5fd7\u5f00\u59cb\u6062\u590d\uff0c\u4f1a\u6709\u5927\u91cf\u7684\u91cd\u590d\u64cd\u4f5c\u548c\u65e0\u7528\u5f00\u9500\u3002</p> <p>\u6240\u4ee5\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\uff0c\u6211\u4eec\u505c\u6b62schedule\u5e76\u5f3a\u5236\u5c06buff\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u5199\u5165disk\uff08\u5305\u62ecLog\uff09\uff0c\u5e76\u5728Log\u4e2d\u7559\u4e0b\u4e00\u6761\u8bb0\u5f55<code>&lt;checkpoint L&gt;</code>\u4f5c\u4e3a\u6807\u8bb0\u70b9\uff0c\u8bb0\u5f55L\u4e3a\u5f53\u524d\u8fd8\u6ca1\u6709\u88abCommit\u7684\u4e8b\u52a1\u7f16\u53f7\uff08\u5df2\u7ecfCommit\u7684\u4e8b\u52a1\u518d\u6b64\u4e4b\u524d\u90fd\u4fdd\u8bc1\u88ab\u5199\u5165disk\u4e86\uff09\u3002</p>"},{"location":"Database/#undoredo","title":"Undo/Redo","text":"<p>\u4e00\u822c\u7684\u6062\u590d\u8fc7\u7a0b\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <p>\u9996\u5148Redo,\u4fdd\u8bc1\u6240\u6709\u6570\u636e\u90fd\u88ab\u5199\u5165\uff08\u6bd4\u5982commit\u7684\u6570\u636e\u53ef\u80fd\u5728buff\u4e2d\u88ab\u635f\u574f\u4e86\uff09</p> <p>\u7136\u540eUndo,\u5c06\u88ab\u6253\u65ad\u7684\u4e8b\u52a1\u56de\u6eda\uff0c\u6b64\u65f6\u9700\u8981\u7559\u4e0bCompensating Log\uff0c\u8bb0\u5f55\u56de\u6eda\u7684\u64cd\u4f5c</p> Compensating Log <ul> <li> <p>\u4e3a\u4e86\u5904\u7406\u201c\u6062\u590d\u65f6\u51fa\u9519\uff0c\u9700\u8981\u4ece\u6062\u590d\u4e2d\u6062\u590d\u201d\u7684\u5957\u5a03\u60c5\u51b5\uff0c\u4f5c\u4e3a\u989d\u5916\u64cd\u4f5c\u7684Undo\u4e5f\u9700\u8981\u5199Log\uff0c\u8fd9\u79cdLog\u5c31\u79f0\u4e3a\u8865\u507f\u65e5\u5fd7</p> </li> <li> <p>\u4e00\u822c\u53ea\u9700\u8981<code>&lt;Ti, X, V&gt;</code>\uff08\u4e8b\u52a1\u7f16\u53f7Ti\uff0c\u5199\u6570\u636eX\uff0c\u6062\u590d\u503cV\uff09\u4e09\u4e2a\u4fe1\u606f</p> </li> <li> <p>\u540c\u65f6\u6062\u590d\u7684\u6062\u590d\u5e94\u8be5\u5177\u6709\u5e42\u7b49\u6027\uff0c\u4fdd\u8bc1\u5728\u5957\u5a03\u6062\u590d\u65f6\u53ef\u4ee5\u5f97\u5230\u6b63\u786e\u7684\u7ed3\u679c</p> <ul> <li> <p>A\u4ece950\u6062\u590d\u52301000\uff1a\u8fd9\u662f\u5e42\u7b49\u7684\uff0c\u65e0\u8bba\u6062\u590d\u591a\u5c11\u6b21\u7ed3\u679c\u90fd\u662f1000\uff0c\u56e0\u6b64\u662f\u5408\u9002\u7684\u6062\u590d\u7b56\u7565\u3002</p> </li> <li> <p>A\u52a050\uff1a\u8fd9\u4e0d\u662f\u5e42\u7b49\u7684\uff0c\u591a\u6b21\u6062\u590d\u53ef\u80fd\u5bfc\u81f4A\u7684\u503c\u53cd\u590d\u76f8\u52a0\uff0c\u8fd9\u662f\u4e0d\u597d\u7684\u6062\u590d\u7b56\u7565\u3002</p> </li> </ul> </li> </ul> <ul> <li> <p>Redo phase\uff08repeating history\uff09\uff1a</p> <p></p> </li> <li> <p>Undo phase\uff08reversing history\uff09\uff1a</p> <p></p> </li> </ul> Fuzzy Check Point <p>\u5e38\u89c4Check Point\u5199disk\u65f6\u4f1a\u5f3a\u5236\u505c\u6b62Schedule\u9020\u6210\u6027\u80fd\u6d6a\u8d39\uff0c\u56e0\u6b64\u6709\u4e86Fuzzy Checkpoint\u8fd9\u4e00\u6539\u8fdb\u7b56\u7565\uff0c\u76f8\u5f53\u4e8e\u6bcf\u6b21Checkpoint\u65f6\u5c06\u9700\u8981\u5199\u5165\u7684\u6570\u636e\u5757\u8bb0\u5f55\u4e0b\u6765\uff0c\u7136\u540e\u6b63\u5e38\u6267\u884c\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u540c\u65f6\u5e76\u884c\u5199\u5165\u6570\u636e\uff08\u5f53\u6570\u636e\u6709\u51b2\u7a81\u65f6\u90a3\u4e5f\u6ca1\u529e\u6cd5\u53ea\u80fd\u505c\u4e86\uff09\uff1a</p> <p></p> <p>\u8fd9\u6837\u5b50\u8fd8\u9700\u8981\u7528\u4e00\u4e2a\u6307\u9488\u8bb0\u5f55\u5f53\u524d\u5df2\u7ecf\u5199\u5b8c\u7684\u90e8\u5206\uff0c\u4ee5\u4fbf\u5728\u6062\u590d\u65f6\u627e\u5230\u6b63\u786e\u7684\u8d77\u59cb\u70b9</p> <p></p>"},{"location":"Database/#buffers","title":"Buffers","text":"<ul> <li> <p>Log Buffer</p> <p>\u4e0a\u9762\u63d0\u5230\u6211\u4eec\u603b\u662f\u5e0c\u671b\u65e5\u5fd7\u88ab\u5199\u5230Disk\u4e2d\u4ee5\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\uff0c\u4f46\u662f\u8fd9\u6837\u4f1a\u5bf9Disk\u9020\u6210\u5f88\u5927\u7684\u538b\u529b\uff0c\u6240\u4ee5\u4e00\u822cLog\u4e5f\u9700\u8981Buffer</p> <p>\u4e00\u822c\u5728 \u7f13\u51b2\u533a\u5df2\u6ee1\u3001\u4e8b\u52a1commit\u3001Check Point\u65f6\u5c06Buffer\u4e2d\u7684Log\u5199\u5165Disk</p> <p></p> </li> <li> <p>Data Buffer</p> <ul> <li> <p>\u4e0a\u9762\u63d0\u5230\u7684\u6062\u590d\u7b97\u6cd5\u53ef\u4ee5\u652f\u6301\u4e0b\u9762\u4e09\u79cd\u7b56\u7565\uff1a</p> <ul> <li> <p>force policy: \u6bcf\u6b21commit\u90fd\u8981\u6c42\u5f3a\u5236\u5199\u5165Disk\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027</p> </li> <li> <p>no-force policy: commit\u65f6\u53ea\u5199\u5165buff\uff0c\u53ef\u4ee5\u7b49\u5230\u6ee1\u4e86\u6216\u8005Check Point\u65f6\u518d\u5199\u5165Disk</p> </li> <li> <p>steal policy: uncommitted\u6570\u636e\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5199\u5165Disk</p> </li> </ul> </li> <li> <p>\u5199\u5165\u4fdd\u62a4\u7b56\u7565\uff08latch\uff09\uff1a</p> <p>\u5728\u6570\u636e\u5757\u5199\u5165\u65f6\u52a0\u6392\u4ed6\u9501\uff0c\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u8bfb\u5199</p> </li> </ul> </li> </ul>"},{"location":"Database/#_43","title":"\u78c1\u76d8\u6062\u590d","text":"<p>\u524d\u4e00\u8282\u4e3b\u8981\u89e3\u51b3\u56de\u6eda\u7684\u5b9e\u73b0\u548c\u6613\u5931\u6027\u5b58\u50a8\u5165Mem\u7684\u6062\u590d\u3002\u73b0\u5728\u975e\u6613\u5931\u6027\u50a8\u5b58\u5165Disk\u5931\u6548\u65f6\u7684\u6062\u590d\uff1a</p> <ul> <li> <p>\u5b9a\u671f\u62f7\u8d1d\u78c1\u76d8\u4f5c\u4e3a\u5907\u4efd\uff0c\u79f0Dump</p> </li> <li> <p>\u7c7b\u4f3c\u4e8eCheck Point\u4e4b\u4e8e\u5185\u5b58\uff0c\u6062\u590d\u65f6\u627e\u5230\u6700\u8fd1\u7684Dump\u548c\u6062\u590dLog\uff0c\u53ea\u505aRedo</p> </li> </ul>"},{"location":"Database/#undo","title":"\u9501\u7684\u63d0\u524d\u91ca\u653e\u548c\u903b\u8f91Undo","text":"<ul> <li> <p>\u903b\u8f91\u64cd\u4f5c</p> <p>\u524d\u9762\u4ec5\u4ec5\u8ba8\u8bba\u4e86\u7269\u7406Undo\uff08\u4fee\u6539\uff09\uff0c\u4f46\u662f\u6709\u4e9b\u64cd\u4f5c\uff0c\u6bd4\u5982\u63d2\u5165\u3001\u5220\u9664\uff0c\u662f\u65e0\u6cd5\u901a\u8fc7\u7b80\u5355\u7269\u7406Undo\uff08\u5373\u8bb0\u5f55\u65e7\u503c\u548c\u65b0\u503c\uff09\u6765\u6062\u590d\u7684\uff0c\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u903b\u8f91Undo</p> <p>\u5e76\u4e14\u8fd9\u4e9b\u64cd\u4f5c\u5728\u6267\u884c\u65f6\u53ea\u9700\u8981\u83b7\u53d6\u4e00\u4e2a\u4f4e\u7ea7\u522b\u7684\u77ac\u65f6\u9501\uff0c\u64cd\u4f5c\u5b8c\u6210\u5c31\u53ef\u4ee5\u63d0\u524d\u91ca\u653e\uff0c\u800c\u4e0d\u7528\u7b49\u5230\u4e8b\u52a1\u7684\u91ca\u653e\u9636\u6bb5\uff0c\u4ee5\u63d0\u9ad8\u5e76\u53d1\u6027</p> <p>\u8981Undo\u8fd9\u4e9b\u64cd\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u5b9a\u4e49\u4e00\u4e2a\u53cd\u64cd\u4f5c\uff0c\u4f8b\u5982\u63d2\u5165\u7d22\u5f15\u5bf9\u5220\u9664\u7d22\u5f15\uff0c\u65b0\u5efa\u8868\u5bf9Drop\u8868\u7b49\uff0cUndo\u67d0\u4e2a\u64cd\u4f5c\u5373\u6267\u884c\u5b83\u7684\u53cd\u64cd\u4f5c</p> </li> <li> <p>\u903b\u8f91\u65e5\u5fd7</p> <p></p> </li> <li> <p>\u6062\u590d\u7b97\u6cd5</p> <p>\u5bf9\u4e8e\u903b\u8f91Undo\uff0c\u5982\u679c\u8be5\u903b\u8f91\u64cd\u4f5c\u5df2\u7ecf\u5b8c\u6210\uff0c\u90a3\u4e48\u9700\u8981\u901a\u8fc7\u5176\u63d0\u4f9b\u7684Undo\u64cd\u4f5c\u6765\u6062\u590d\uff0c\u5426\u5219\u5bf9\u5176\u4e2d\u4e0d\u5b8c\u6574\u7684\u64cd\u4f5c\u8fdb\u884c\u7269\u7406Undo</p> <p>\u5e76\u4e14Logical Undo\u4e00\u5b9a\u4e0d\u662f\u5e42\u7b49\u7684\uff0c\u6240\u4ee5\u56de\u6eda\u65f6\u5982\u679c\u770b\u5230Operation-abort\uff0c\u610f\u5473\u7740\u5df2\u7ecf\u903b\u8f91\u64a4\u56de\u8fc7\uff0c\u4e0d\u80fd\u518d\u6b21Undo</p> <p></p> <p></p> </li> </ul>"},{"location":"Database/#aries","title":"ARIES","text":""},{"location":"Database/#physiological-redoredo","title":"Physiological Redo\uff08\u7269\u7406\u903b\u8f91Redo\uff09","text":"<ul> <li> <p>\u5176\u4e3a\u7269\u7406\u7684\uff0c\u56e0\u4e3a\u4f1a\u6807\u8bc6\u51fa\u5177\u4f53\u7684\u53d7\u5f71\u54cd\u7684\u6570\u636e\u9875</p> </li> <li> <p>\u540c\u65f6\u5b83\u8bb0\u5f55\u7684\u662f\u903b\u8f91\u64cd\u4f5c\uff0c\u53ef\u80fd\u53ef\u4ee5\u5927\u5927\u964d\u4f4e\u65e5\u5fd7\u91cf</p> </li> </ul> <p>Exmaple</p> <p>\u5220\u9664\u8bb0\u5f55\u64cd\u4f5c\uff0c\u8003\u8651\u540e\u65b9\u6570\u636e\u524d\u79fb</p> <p>\u82e5\u91c7\u7528\u7269\u7406Redo\uff0c\u9700\u8981\u8bb0\u5f55\u6240\u6709\u79fb\u52a8\u7684\u6570\u636e\uff0c\u5f00\u9500\u5f88\u5927</p> <p>\u82e5\u91c7\u7528\u903b\u8f91Redo\uff0c\u53ea\u9700\u8981\u8bb0\u5f55\u88ab\u5220\u9664\u7684\u5143\u7ec4\u7684\u6570\u636e\u9875\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u6062\u590d\u65f6\u518d\u6267\u884c\u5220\u9664\u64cd\u4f5c\u5373\u53ef</p>"},{"location":"Database/#aries-data-structure","title":"ARIES Data Structure","text":"<ul> <li> <p>Log Sequence Number (LSN) </p> <p>\u53ef\u4ee5\u770b\u4f5c\u662fLog\u7684\u8eab\u4efd\u8bc1\u53f7\uff0cARIES\u5c06\u5176\u5b58\u5728\u6570\u636e\u9875\u4e2d\uff0c\u8d8a\u665a\u6807\u53f7\u8d8a\u5927\uff08\u4e00\u822c\u5373\u4e3a\u6570\u636e\u9875\u53f7+\u9875\u5185\u504f\u79fb\uff09\uff0c\u6807\u8bc6\u54ea\u4e9b\u64cd\u4f5c\u5df2\u7ecf\u88ab\u5b9e\u65bd</p> </li> <li> <p>Page LSN</p> <p>Buff\u548cDisk\u7b49\u6570\u636e\u9875\u90fd\u4fdd\u5b58\u5176\u6570\u636e\u5bf9\u5e94\u7684\u6700\u65b0\u7684LSN</p> </li> <li> <p>Log Record</p> <p>\u5e38\u89c4\u7684Log\u8bb0\u5f55\u4e00\u822c\u5305\u62ecLSN\u3001\u4e8b\u52a1ID\u3001\u5f53\u524d\u4e8b\u52a1\u7684\u4e0a\u4e00\u6761Log\u7684LSN\u65b9\u4fbf\u4fbf\u5229\u3001\u64cd\u4f5c\u4fe1\u606f</p> <p></p> <p>\u8fd8\u6709\u4e00\u79cd\u7279\u6b8a\u7684redo-only log\u662f\u6062\u590d\u65f6\u7684\u64cd\u4f5c\uff0c\u6c38\u8fdc\u4e0d\u9700\u8981undo\u3002\u4e3a\u4e86\u52a0\u5feb\u64cd\u4f5c\uff0cCLR\u4f1a\u8bb0\u5f55\u4e00\u4e2aUndoNextLSN\u6307\u5411\u4e0b\u4e00\u4e2a\u9700\u8981Undo\u7684Log\uff0c\u6765\u8df3\u8fc7\u4e0d\u9700\u8981Undo\u7684Log</p> <p></p> </li> <li> <p>Dirty Page Table</p> <p>\u5728\u8868\u4e2d\u4fdd\u5b58\u5f53\u524d\u6240\u6709\u7684\u810f\u9875PageID\uff0c\u5e76\u8bb0\u5f55PageLSN\uff08\u66f4\u6539PageID\u6570\u636e\u7684\u6700\u65b0LSN\uff09\uff0cRecLSN\uff08\u4fee\u6539\u8be5Buff\u7684\u6700\u65e9\u7684\u4e00\u6761Log\u7684LSN</p> </li> <li> <p>CheckPoint Log</p> <p>\u8bb0\u5f55\u5f53\u524d\u7684CheckPoint\uff0c\u5305\u62ecDirty Page Table\u548cActive Transaction Table\uff08\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u4ee5\u53ca\u5176LastLSN\uff09</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cARIES\u5e76\u4e0d\u5728CheckPoint\u65f6\u5c06\u6240\u6709\u6570\u636e\u5199\u5165Disk\uff0c\u800c\u662f\u8ba9\u7f13\u5b58\u5728\u540e\u53f0\u81ea\u5df1\u5237\u65b0</p> </li> </ul>"},{"location":"Database/#aries_1","title":"ARIES\u5177\u4f53\u6b65\u9aa4","text":"<p>\u6838\u5fc3\u662f\u8df3\u8fc7\u4e00\u4e9b\u4e0d\u9700\u8981\u7684\u64cd\u4f5c\uff0c\u5e76\u5229\u7528\u4e00\u4e9b\u6307\u9488\u7b49\u52a0\u901f\u6307\u4ee4\u67e5\u627e</p> <p></p> <ol> <li> <p>Analysis Pass\uff1a</p> <ul> <li> <p>\u4ece\u6700\u8fd1\u7684Check Point\u5f00\u59cb\uff0c<code>RedoLSN=min(RecLSN, CheckPoint)</code>\uff0c<code>UndoList=L</code></p> </li> <li> <p>\u5411\u4e0b\u626b\u63cf\uff0c\u66f4\u65b0Dirty Page Table\u548cUndoList</p> <p></p> </li> </ul> <p>Note</p> <ul> <li> <p>\u7ef4\u62a4RedoLSN\u662f\u4f18\u5316Redo\u6267\u884c\u7684\u8d77\u70b9</p> </li> <li> <p>\u8bb0\u5f55\u6bcf\u4e2a\u4e8b\u52a1\u7684LastLSN\u4f18\u5316Undo\u6267\u884c\u7684\u8d77\u70b9</p> </li> </ul> </li> <li> <p>Redo Pass\uff1a</p> <p>\u53ea\u91cd\u505a\u90a3\u4e9b\u771f\u6b63\u9700\u8981\u91cd\u505a\u7684\u64cd\u4f5c\uff0c\u5373\u8fd8\u6ca1\u5199\u5165\u78c1\u76d8\u5e76\u5904\u4e8e\u64cd\u4f5c\u671f\u7684buffer</p> <p></p> </li> <li> <p>Undo Pass\uff1a</p> <p></p> <p>\u770b\u8d77\u6765\u975e\u5e38\u590d\u6742\u7684\u64cd\u4f5c\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4e3a\u4e86\u7ef4\u62a4\u76f8\u5e94\u7684\u6307\u9488\uff0c\u52a0\u901f\u67e5\u627e\uff08\u7528<code>max(PrevLSN)</code>\u4f5c\u4e3a\u4e0b\u4e00\u4e2aundo\u7684\u8d77\u70b9\uff0c\u540c\u65f6\u8ba9\u5f53\u524dCLR\u7684<code>PrevLSN</code>\u6210\u4e3a\u5f53\u524d\u4e8b\u52a1\u7684\u4e0a\u4e00\u6761\uff0c\u5373<code>PrevLSN</code>\uff09</p> <p></p> <p>Partial Undo</p> <p>ARIES\u652f\u6301\u90e8\u5206Undo\uff0c\u5373\u53eaUndo\u5230\u67d0\u4e2a\u7279\u5b9a\u7684LSN\uff08\u6bd4\u5982\u4ec5\u4ec5\u53ea\u662f\u4e3a\u4e86\u7834\u574f\u6b7b\u9501\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684Undo</p> </li> </ol> \u5176\u4ed6\u7279\u5f81 <ul> <li> <p>\u6062\u590d\u72ec\u7acb\u6027\uff08recovery independence\uff09\uff1a\u6709\u4e9b\u9875\u7684\u6062\u590d\u53ef\u4ee5\u72ec\u7acb\u8fdb\u884c</p> </li> <li> <p>\u4fdd\u5b58\u70b9\uff08savepoint\uff09\uff1a\u5728\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4fdd\u5b58\u70b9\uff0c\u4ee5\u4fbf\u5728\u56de\u6eda\u65f6\u76f4\u63a5\u56de\u6eda\u5230\u67d0\u4e2a\u4fdd\u5b58\u70b9</p> </li> <li> <p>\u7ec6\u7c92\u5ea6\u5c01\u9501\uff08fine-grained locking\uff09\uff1a\u5728\u6062\u590d\u65f6\uff0c\u53ef\u4ee5\u53ea\u5bf9\u9700\u8981\u6062\u590d\u7684\u6570\u636e\u9879\u52a0\u9501\uff0c\u800c\u4e0d\u662f\u6574\u4e2a\u4e8b\u52a1</p> </li> <li> <p>\u6062\u590d\u6700\u4f18\u5316\uff08recovery optimization\uff09\uff1a\u9884\u5148\u63d0\u53d6\u6570\u636e\u9875\u3001\u91cd\u505a\u63a8\u8fdf\u7b49</p> </li> </ul>"},{"location":"Database/#_44","title":"\u57fa\u4e8e\u4e3b\u5b58\u50a8\u7684\u6062\u590d","text":""},{"location":"DigitLogic/","title":"Logic and Computer Design Fundamentals","text":"<p>~~this review mainly focus on some special points and terminology~~</p>"},{"location":"DigitLogic/#some-special-codes","title":"Some Special Codes","text":"<ul> <li>BCD</li> </ul> <p>4 Binary bit as a Decimal bit Simply flatten up in converting</p> <ul> <li> <p>Excess 3 code</p> <ul> <li> <p>BCD + 3</p> </li> <li> <p>easy to do adding(automatically add carry)</p> </li> </ul> </li> <li> <p>Gray</p> </li> </ul> <p>Flip only one bit each turn \\(Gray Code = (K)_2 \\ \\ xor \\ \\ ((K)_2 &gt;&gt; 1)\\) Useful in K-map and optimization!</p> <ul> <li> <p>Parity Bit</p> </li> <li> <p>odd parity &amp; even parity</p> <ul> <li>Final result of 1's</li> </ul> </li> <li> <p>MSB &amp; LSB</p> <ul> <li>Most/Least Significant Bit</li> </ul> </li> <li> <p>Unsigned integer</p> </li> <li> <p>Radix Complement(\u8865\u7801)</p> <ul> <li>r\u2019s complement for radix r</li> <li>2\u2019s complement in binary</li> <li>Defined as \\(r^N - x\\)</li> <li>In Binary, as (~x + 1)</li> </ul> </li> <li> <p>Diminished Radix Complement\uff08\u53cd\u7801\uff09</p> <ul> <li>(r - 1)\u2019s complement for radix r</li> <li>1\u2019s complement for radix 2</li> <li>Defined as \\(r^N - 1 - x\\) , \"flipping\" every bit actually</li> </ul> </li> <li> <p>Signed integer</p> <ul> <li> <p>positive</p> <ul> <li>Both 1's and 2's complement are the same as true code</li> </ul> </li> <li> <p>negative</p> <ul> <li>1's complement is flipping every bit follow the sign bit</li> <li>2's complement is 1's complement + 1</li> </ul> </li> </ul> </li> </ul>"},{"location":"DigitLogic/#arithmetic-system","title":"Arithmetic System","text":"<ul> <li>In computer system, it's actually a \"\\(mod \\ r^N\\)\" system for N bit calculation</li> <li>\\(X - Y \\equiv X + r^N - Y \\equiv X + \\overline{Y}(mod \\ r^N)\\)</li> <li> <p>Unsigned Subtraction</p> <ul> <li>Use 2's Complement, then the answer actually is \\(X - Y + r^N\\)</li> <li>Thus check the final carry bit(actually Nth bit)<ul> <li>1 : \\(X \\geq Y\\), result is answer</li> <li>0 : \\(X &lt; Y\\), answer is negative, thus the answer is \\(-(r^N - result)\\)</li> </ul> </li> </ul> </li> <li> <p>Signed Subtraction</p> <ul> <li>Just use 2's Complement to convert subtraction into addition</li> </ul> </li> <li> <p>Overflow</p> <ul> <li> <p>Unsigned</p> <ul> <li>Extra carry bit in addition</li> </ul> </li> <li> <p>Signed</p> <ul> <li>(+A) + (+B) = (-C)</li> <li>(-A) + (-B) = (+C)</li> </ul> </li> </ul> </li> </ul>"},{"location":"DigitLogic/#boolean-algebra","title":"Boolean Algebra","text":"<ul> <li>Dual<ul> <li>Interchange only And/Or</li> </ul> </li> <li>Complement<ul> <li>DeMorgan's Law</li> </ul> </li> <li>Duality Rules</li> </ul> <p>A boolean equation remains valid if we take the dual of the expressions on both sides of the equals sign</p> <ul> <li> <p>Important Formulars</p> <ul> <li>\\(X + XY = X\\)</li> <li>\\(X(X+Y) = X\\)</li> <li>\\(XY + X \\overline{Y} = X\\)</li> <li>\\((X+Y)(X+\\overline{Y})=X\\)</li> <li>\\(X + \\overline{X}Y = X + Y\\)</li> <li>\\(X(\\overline{X}+Y)=XY\\)</li> <li>Consensus Theorem</li> </ul> </li> </ul> <p>\\(XY+\\overline{X}Z+YZ=XY+\\overline{X}Z\\)            (YZ is redundant) \\((X+Y)(\\overline{X}+Z)(Y+Z)=(X+Y)(\\overline{X}+Z)\\)        (dual)</p> <ul> <li>Canonical Form<ul> <li>SOM (sum of miniterm)<ul> <li>Choose 1's</li> </ul> </li> <li>POM (product of maxterm)<ul> <li>Choose 0's</li> </ul> </li> <li>SOP (sum of product)<ul> <li>Choose 1's</li> <li>Every product term contains all variables</li> </ul> </li> </ul> </li> <li>Cost<ul> <li>Literal cost<ul> <li>Number of literals</li> </ul> </li> <li>Gate-input cost<ul> <li>Input wires (literal cost + combinational structure)</li> </ul> </li> <li>Gate-input cost with NOTs<ul> <li>Gate-input cost + NOTs (count every literal only once)</li> </ul> </li> </ul> </li> <li>K-map<ul> <li>Implicant<ul> <li>A product term in SOP</li> </ul> </li> <li>Prime Implicant<ul> <li>A product term obtained by combining the maximum possible number of adjacent squares in the map with \\(2^N\\) number of squares</li> </ul> </li> <li>Essential Prime Implicant<ul> <li>Prime Implicant that essentially covers some squares(must pick)</li> </ul> </li> <li>Don't cares<ul> <li>Self assume the value, mostly choose 1</li> </ul> </li> <li>POS optimization<ul> <li>Optimize the \\(\\overline{F}\\) which is SOP</li> </ul> </li> </ul> </li> </ul>"},{"location":"DigitLogic/#combinational-logic","title":"Combinational Logic","text":"<ul> <li> <p>Delays</p> </li> <li> <p>Transition Time (Focus on output change)</p> <ul> <li>\\(t_{LH}=t_r\\) : 10% Low to 90% High  (rise)</li> <li>\\(t_{HL}=t_f\\) : 90% High to 10% Low  (fall)</li> </ul> </li> <li>Propagation Delay (Focus on output change by input change)<ul> <li>Time from half of input change to half of output change</li> <li>\\(t_{pd} = max(t_{pHL}, t_{pLH})\\)  (sometimes is average)</li> </ul> </li> <li>Model<ul> <li>Transport Delay<ul> <li>\\(t_{pd}=t_{\u56fa\u6709}+k*SL\\) (sum of fan-out standard loads)</li> </ul> </li> <li>Inertial Delay<ul> <li>Rejection Time : rejects narrow \u201cpulses\u201d on the outputs</li> </ul> </li> </ul> </li> <li> <p>Technology Mapping</p> <ul> <li>Use NAND/NOR to implement any logic</li> <li>Optimize<ul> <li>Push down NOTs</li> <li>Remove redundant gates (linked NOTs)</li> <li>Keep doing</li> </ul> </li> </ul> </li> <li> <p>Decoder</p> <ul> <li>\\(N - 2^N\\) One-Hot Decoder</li> <li>Hierarchical Design<ul> <li>\\(N-2^N = (\\frac{N}{2} - 2^{\\frac{N}{2}} )\\times (\\frac{N}{2} - 2^{\\frac{N}{2}})\\)</li> <li>Sometimes we can use ENABLE as a select signal</li> </ul> </li> </ul> </li> <li> <p>Encoder</p> <ul> <li>\\(2^N-N\\) One-Hot Encoder</li> <li>\\(2^K-N\\) Priority Encoder</li> </ul> </li> <li> <p>Multiplexer</p> <ul> <li>\\(2^N-1\\) MUX</li> <li>Input AND Decoder --OR--&gt; Output</li> <li>Expansion<ul> <li>Focus on how to cope with the multi-outputs of several MUXs</li> </ul> </li> <li>Implement Combinational Logic Function<ul> <li>Simple<ul> <li>Input: Output in truth table</li> <li>Select: Input</li> </ul> </li> <li>Efficient<ul> <li>Divide the input into two parts</li> <li>Select : the first part as the select signal of the second part</li> <li>Input : combination logic of the second part</li> </ul> </li> </ul> </li> <li>Use 3-state gate to optimize the cost</li> </ul> </li> <li> <p>Demultiplexer</p> <ul> <li>\\(1-2^N\\) DeMUX</li> </ul> </li> <li> <p>Half Adder  (No last carry)</p> <ul> <li>\\(S = A \\oplus B\\)</li> <li>\\(C = AB\\)</li> </ul> </li> <li> <p>Full Adder</p> <ul> <li>\\(S = (A \\oplus B)\\oplus Z\\)</li> <li>\\(C = AB + Z(A \\oplus B)\\)</li> </ul> </li> <li> <p>Ripple-Carry Binary Adder (*with \\(\\oplus\\) gate)</p> <ul> <li>Linked Full Adders</li> <li>The first carry 1 means doing subtraction(2's complement)</li> </ul> </li> <li> <p>*Carry Lookahead Adder</p> <ul> <li>\\(G_i = A_iB_i\\)</li> <li>\\(P_i = A_i \\oplus B_i\\)</li> <li>\\(C_{i+1} = G_i + P_iC_i\\)</li> <li>\\(S_i = P_i \\oplus C_i\\)</li> </ul> </li> <li> <p>(P)ROM</p> <ul> <li>Read-Only Memory</li> <li>Programmable only once</li> <li>\\(2^K \\times N\\) ROM (\\(2^K\\) addresses by \\(K - 2^K\\) Decoder, N bits per address)</li> <li>For a given address line, the connected data column is 1, others are 0</li> </ul> </li> <li> <p>PAL</p> <ul> <li>Programmable Array Logic</li> <li>Programmable only once</li> <li>K inputs into 2*K columns(\\(X/\\overline{X}\\))</li> <li>Fixed structure of N AO, but programmable AND terms</li> <li>One output can be used as input of another output as compensation</li> </ul> </li> <li> <p>PLA</p> <ul> <li>Programmable Logic Array</li> <li>Programmable only once</li> <li>K inputs into 2*K columns(\\(X/\\overline{X}\\))</li> <li>N programmable AND terms</li> <li>M programmable OR terms (select miniterms above) with M programmable XOR terms (get inverters)</li> <li>Optimize by optimizing both \\(F/\\overline{F}\\)</li> </ul> </li> <li> <p>FPGA</p> <ul> <li>Field Programmable Gate Array</li> <li>LUT</li> <li>Look-Up Table</li> <li>Like \\(2^K - 1\\) RAM</li> <li>Expansion:<ul> <li>Shannon\u2019s expansion theorem : \\(F = F(X_1, X_2, ..., X_n) = X_nF(X_1, X_2, ..., X_{n-1}, 1) + \\overline{X_n}F(X_1, X_2, ..., X_{n-1},0)\\)</li> </ul> </li> <li>*CLB<ul> <li>Configurable Logic Block</li> <li>LUT + Flip-Flop</li> </ul> </li> <li>*SM<ul> <li>Switch Matrix</li> <li>Interconnects between CLBs</li> </ul> </li> <li>*IOB<ul> <li>Input/Output Block</li> <li>Connects to the outside world</li> </ul> </li> </ul> </li> </ul>"},{"location":"DigitLogic/#sequential-logic","title":"Sequential Logic","text":"<ul> <li> <p>Synchonous &amp; Asynconous</p> <ul> <li>Synchonous : Triggered by discrete clock signal</li> <li>Asynconous : Triggered by input signal</li> </ul> </li> <li> <p>Buffer</p> <ul> <li>Store a bit, unable to change</li> <li>Delay = 2 * Inverter Delay</li> </ul> </li> <li> <p>Analysis</p> <ul> <li>Input Equation<ul> <li>\\(D_A = A(t)X(t)\\)</li> </ul> </li> <li>Output Equation<ul> <li>\\(Y(t)= F(A(t),X(t))\\)</li> </ul> </li> <li>Excitation Equation(D Flip-Flop)<ul> <li>\\(D_A = A(t+1)\\)</li> <li>Function of the current state and next state</li> </ul> </li> <li>Next State Equation(Characteristic equation)<ul> <li>\\(A(t+1) = D_A\\)</li> <li>A function of inputs and the current state</li> </ul> </li> </ul> </li> <li> <p>Latch</p> <ul> <li>Property<ul> <li>Store a bit, able to change and keep</li> <li>Too fast fallback and state change for a sequential circuit (transparent)</li> </ul> </li> <li>\\(S-R\\) Latch<ul> <li>NOR gates</li> <li>\\(R---Q\\) \\(S---\\overline{Q}\\)</li> <li>\\(S = 1, R = 0,Q = 1\\) : Set</li> <li>\\(S = 0, R = 1,Q = 0\\) : Reset</li> </ul> </li> <li>\\(\\overline{S}-\\overline{R}\\) Latch<ul> <li>NAND gates</li> <li>\\(\\overline{S}---Q\\) \\(\\overline{R}---\\overline{Q}\\)</li> <li>\\(S = 1(\\overline{S}=0), R = 0,Q=1\\) : Set</li> <li>\\(S = 0, R = 1,Q=0\\) : Reset</li> </ul> </li> <li>Clocked \\(S-R\\) Latch (\\(S-R\\) Latch with Control Input)<ul> <li>Add a control input to control the \\(\\overline{S}-\\overline{R}\\) latch</li> <li>\\(\\overline{S}\\) = S NAND C</li> </ul> </li> <li>Both Latches S=1,Q=1</li> <li>D Latch<ul> <li>Based on \\(\\overline{S}-\\overline{R}\\) Latch with Control Input</li> <li>Let \\(S = D, R = \\overline{D}\\) to avoid the forbidden state</li> <li>Q = D</li> </ul> </li> </ul> </li> <li> <p>Flip-Flop</p> <ul> <li> <p>Master - Slave FF</p> <ul> <li>Pulse - Triggered</li> <li>S-R MS FF<ul> <li>Master : Clocked S-R Latch</li> <li>Slave : Clocked S-R Latch</li> <li>Control Input : \\(C\\) &amp; \\(\\overline{C}\\)</li> <li>Every clock cycle only change once (half for master, half for slave)</li> <li>1's catching problem : glitch</li> </ul> </li> <li>J-K MS FF<ul> <li>Same as S-R MS FF, but with J-K Latch</li> <li>1 - 1 state permitted, flip to the opposite state</li> </ul> </li> <li>Edge - Triggered</li> <li>D MS FF<ul> <li>Master : D Latch</li> <li>Slave : Clocked S-R Latch</li> <li>Control Input : \\(C\\) &amp; \\(\\overline{C}\\)</li> <li>Since D Latch has no keeping state when clocked, no 1's catching problem</li> <li>Positive/Negative - level triggered flip-flop : associated with the output slave</li> <li>*Direct inputs : often for initial set</li> </ul> </li> <li>T Flip-Flop<ul> <li>J-K MS FF with J = K</li> <li>\\(T = 1\\) : Toggle</li> <li>\\(T = 0\\) : Keep</li> <li>*Edge-Triggered D Flip-Flop</li> </ul> </li> </ul> </li> <li> <p>Timing parameters</p> <ul> <li>Setup Time \\(t_s\\)<ul> <li>Time before clock edge that data must be stable</li> <li>*For Edge-trigger it's short, for Pulse-trigger it keep for whole pulse</li> </ul> </li> <li>Hold Time \\(t_h\\)<ul> <li>Time after clock edge that data must be stable</li> </ul> </li> <li>Propagation Delay \\(t_{pd}\\)<ul> <li>Time from input change to output change</li> </ul> </li> <li>\\(t_h\\) in \\(t_{pd}\\) and often \\(t_h &lt; t_{pd}\\), thus often ignore \\(t_h\\) in analysis</li> <li>Clock cycle time &gt; longest propagation delay from one clock edge to another edge</li> </ul> </li> </ul> </li> </ul>"},{"location":"DigitLogic/#hardware-implementation","title":"Hardware Implementation","text":"<ul> <li> <p>*CMOS</p> <ul> <li>NMOS - GND, PMOS - VCC</li> <li>NMOS &amp; PMOS in series(complesmentary &amp; dual)</li> </ul> </li> <li> <p>Register</p> </li> </ul> <p>A set of flip-flops, possibly with added combinational gates, that perform data-processing tasks. The flip-flops hold data, and the gates determine the new or transformed data to be transferred into the flip-flops</p> <ul> <li> <p>Structure</p> <ul> <li>Clock<ul> <li>Sequential control</li> </ul> </li> <li>Flip-Flops<ul> <li>Storage</li> </ul> </li> <li>Data Path (micro-operation)<ul> <li>Processing data</li> <li>Transfer data</li> </ul> </li> <li>Control Unit<ul> <li>Control the data path</li> </ul> </li> </ul> </li> <li> <p>Load</p> <ul> <li>Parallel Load</li> </ul> <p>Load all bits at the same time (clock cycle) </p> <ul> <li>Clock gating<ul> <li>\\(C = \\overline{Load} + Clock\\)</li> <li>Clock skew problem, hard to implement</li> </ul> </li> <li>Load enable<ul> <li>\\(D = Load \\cdot D + \\overline{Load} \\cdot Q\\)</li> <li>Actually a MUX</li> </ul> </li> <li>Serial Load</li> </ul> <p>Load one bit at a time (clock cycle) </p> <ul> <li>Useful in data transmission</li> </ul> </li> <li> <p>Transfer</p> <p>Condition: DR[...] &lt;- SR[Address] </p> <ul> <li>Multiplexer and Bus -Based Transfers</li> <li>For single register (too expensive)<ul> <li>\\(Load = K_1 + K_2 + ... +K_n\\)</li> <li>\\(D = MUX(Input,K)\\)</li> </ul> </li> <li>For multiple registers<ul> <li>Bus : a set of multiplexer outputs shared as a common path (single source problem)</li> <li>Three-state gates : bidirectional input\u2013output lines</li> </ul> </li> </ul> </li> <li> <p>Processing</p> <ul> <li>ALU<ul> <li>Arithmetic micro-operations</li> <li>Logic micro-operations</li> </ul> </li> <li> <p>Shift micro-operations</p> <ul> <li> <p>Serial shift</p> <ul> <li>Serial link the flip-flops</li> <li>With a proper clock difference, SO can get the serial result</li> <li>For N bits:<ul> <li>Starts with N - K clcok cycles, get SI &lt;&lt; K</li> <li>Start with N + K clock cycles, get SI &gt;&gt; K</li> </ul> </li> </ul> </li> <li> <p>Parallel shift</p> <ul> <li>Parallel output</li> <li>Just add an output for each flip-flop</li> <li>Parallel load</li> <li>Use combinational logic to control the load (MUX)</li> <li>\\(Shift:Q \\leftarrow shift (Q)\\) \\(\\overline{Shift} \\cdot Load: Q \\leftarrow D\\) \\(\\overline{Shift} \\cdot \\overline{Load}: Q \\leftarrow Q\\)</li> </ul> </li> <li> <p>Bidirectional shift</p> <ul> <li>Add a control signal to control the direction of shift</li> <li>\\(\\overline{S_1} S_0: D \\leftarrow SL(Q)\\) \\(S_1 \\overline{S_0}: D \\leftarrow SR(Q)\\) \\(S_1 S_0: D \\leftarrow Input\\) \\(\\overline{S_1} \\overline{S_0}: D \\leftarrow Q\\)</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>Counter</p> <ul> <li> <p>Ripple counter</p> <ul> <li>\\(C_{i+1} = \\overline{Q_i}(add)/Q_i(dec)\\) \\(D_i = \\overline{Q_i}\\)</li> <li>Consider every time Q flips, the next flip-flop will be triggered</li> </ul> </li> <li> <p>Serial counter</p> <ul> <li>Same clock</li> <li>Control the D input of each flip-flop, but D relies on the previous flip-flop</li> </ul> </li> <li> <p>Parallel counter</p> <ul> <li>Update all in a single clock cycle</li> <li>More efficient than serial counter</li> </ul> </li> <li> <p>Other counter</p> <ul> <li>Modulo-N counter</li> <li>BCD counter</li> </ul> </li> </ul> </li> <li> <p>Memory</p> </li> <li> <p>Some terminology</p> <ul> <li>Word<ul> <li>A groups of bits that are accessed together</li> </ul> </li> <li>Width (Memory width)<ul> <li>The number of bits in a word</li> </ul> </li> <li>Depth (Address width)<ul> <li>The number of words in a memory</li> </ul> </li> <li>Memory size = Width * Depth</li> <li>Memory data path width<ul> <li>The number of bits that can be transferred in a bus</li> </ul> </li> <li>Latency time<ul> <li>From application of row address until first word available</li> </ul> </li> <li>Burst size<ul> <li>The number of words/bits transferred in a burst</li> </ul> </li> <li>Memory bandwidth<ul> <li>Speed of data transfer</li> <li>Bandwidth = Burst size / (Latency time + Burst Size * Cycle time)   (Busrt size plus 2 if it's DDR)</li> </ul> </li> </ul> </li> <li> <p>Read / Write</p> <ul> <li>CS (Chip Select)<ul> <li>Enable the memory</li> </ul> </li> <li>Address line<ul> <li>Select the word</li> </ul> </li> <li>Data line<ul> <li>Read / Write the data</li> </ul> </li> <li>Access time<ul> <li>Time from address to output data</li> </ul> </li> <li>Write cycle time<ul> <li>Time between successive writes</li> </ul> </li> </ul> </li> <li> <p>Special Technicals</p> <ul> <li>bidirectional pins for data line<ul> <li>Use three-state gates</li> </ul> </li> <li>Coincidence selection<ul> <li>2D array : Access by row address and column address</li> <li>Often the address line is used for both row select and column select, not row line and column line</li> </ul> </li> </ul> </li> <li> <p>Extension</p> <ul> <li>Word extension<ul> <li>Just parallel the data line</li> </ul> </li> <li>Depth extension<ul> <li>Use a decoder with CS to choose the memory</li> </ul> </li> </ul> </li> <li> <p>SRAM</p> <p>Static Random Access Memory </p> <ul> <li>Structure<ul> <li>Storage on S-R Latch</li> <li>Dual input &amp; output</li> </ul> </li> <li>Volatile</li> <li>Expensive</li> </ul> </li> <li> <p>DRAM</p> <p>Dynamic Random Access Memory </p> <ul> <li>Structure<ul> <li>Storage on capacitor</li> <li>Single input &amp; output</li> </ul> </li> <li>Cheap</li> <li>Dense</li> <li>Read / Write<ul> <li>Row address \\(\\rightarrow\\) Column address \\(\\rightarrow\\) \\(\\rightarrow\\) I/O activated \\(\\rightarrow\\) Data valid \\(\\rightarrow\\) Refresh</li> </ul> </li> <li> <p>Refresh</p> <ul> <li>Recharge the capacitor</li> <li>Control by \\(\\overline{RAS}\\) &amp; \\(\\overline{CAS}\\) of outside devices (0 triggered)</li> <li>Methods<ul> <li>RAS-only refresh<ul> <li>Refresh the whole row</li> <li>The row address is controlled by IC</li> <li>\\(RAS =0,CAS =1\\)</li> </ul> </li> <li>CAS-before-RAS refresh<ul> <li>Controlled by inner counter</li> <li>\\(CAS =0 \\rightarrow RAS = 0\\)</li> </ul> </li> <li>Hidden refresh<ul> <li>CAS-before-RAS refresh following a normal read / write</li> </ul> </li> </ul> </li> <li>Mode<ul> <li>Burst mode<ul> <li>stop the work and refresh all memory for a while</li> </ul> </li> <li>Distributed refresh<ul> <li>Refresh the memory in a distributed way</li> <li>space out refresh one row at a time, thus avoid blocking memory for a long time</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>SDRAM</p> </li> </ul> <p>Synchronous DRAM </p> <ul> <li>Burst length<ul> <li>Number of words accessed in a single access (burst read)</li> </ul> </li> </ul> </li> <li> <p>DDR SDRAM</p> <p>Double Data Rate SDRAM </p> <ul> <li>Transfer data on both rising and falling edges of the clock</li> </ul> </li> <li> <p>*RDRAM</p> <p>Rambus DRAM </p> </li> </ul>"},{"location":"DigitLogic/#labs","title":"Labs","text":"<ul> <li> <p>74LS138</p> <ul> <li>3-8 decoder</li> <li>3 inputs, 8 outputs (negative one-hot logic)</li> <li>3 enable inputs \\(G,\\overline{G2A},\\overline{G2B}\\)</li> </ul> </li> <li> <p>MC14495</p> <ul> <li>4 bit Hex - 7 segment decoder</li> <li>negative logic</li> <li>a - f clockwise, g in the middle, p is point</li> </ul> </li> </ul>"},{"location":"DigitLogic/#verilog","title":"Verilog","text":"<ul> <li> <p>\u95e8\u7ea7</p> <ul> <li>or,and,not,nand,nor,xor,xnor(output,input1,input2) </li> </ul> </li> <li> <p>RTL</p> <ul> <li>assign  </li> </ul> </li> <li> <p>\u884c\u4e3a\u7ea7</p> <ul> <li>always @(*) </li> </ul> </li> </ul>"},{"location":"Git/","title":"Git","text":"<p>\u65ad\u65ad\u7eed\u7eed\u5730\u4f7f\u7528\u4e86git\u7684\u90e8\u5206\u529f\u80fd\uff0c\u7a0d\u7a0d\u505a\u4e00\u4e9b\u7cfb\u7edf\u6027\u7684\u6574\u7406</p>"},{"location":"Git/#_1","title":"\u7406\u89e3","text":"<p>git \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u5373\u6bcf\u4e2a\u4eba\u7684\u672c\u5730\u90fd\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u7248\u672c\u5e93\uff0c\u53ef\u4ee5\u8fdb\u884c\u7248\u672c\u63a7\u5236\u3002</p> <p>\u800c\u4e14git\u7684\u7248\u672c\u5e93\u8bb0\u5f55\u7684\u4e0d\u662f\u6bcf\u4e2a\u6587\u4ef6\u7684\u589e\u91cf\uff0c\u800c\u662f\u6240\u6709\u6587\u4ef6\u7684\u5feb\u7167\uff0c\u8fd9\u6837\u53ef\u4ee5\u65b9\u4fbf\u5730\u8fdb\u884c\u7248\u672c\u56de\u9000\u3002</p> <p>\u5e38\u7528git\u4e00\u822c\u662f\u901a\u8fc7\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u6765\u8fdb\u884c\u534f\u4f5c\uff0c\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u514b\u9686\u4e00\u4efd\u5230\u672c\u5730\uff0c\u7136\u540e\u5728\u81ea\u5df1\u7684\u5206\u652f\u4e0a\u8fdb\u884c\u4fee\u6539\uff0c\u6700\u540e\u518d\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u901a\u8fc7\u51b2\u7a81\u5904\u7406\u5408\u5e76\u5230\u4e3b\u5206\u652f\u3002\uff08~~\u6216\u8005\u5f53\u6210\u8fdc\u7a0b\u5907\u4efd\u5e93~~\uff09</p>"},{"location":"Git/#git_1","title":"git\u67b6\u6784","text":"<ul> <li>workspace\uff1a\u5de5\u4f5c\u533a\uff0c\u5b9e\u9645\u5de5\u4f5c\u76ee\u5f55</li> <li>index\uff1a\u6682\u5b58\u533a\uff0c\u901a\u8fc7add\u6dfb\u52a0</li> <li>repository\uff1a\u7248\u672c\u5e93</li> <li>remote\uff1a\u8fdc\u7a0b\u4ed3\u5e93</li> <li>branch\uff1a\u5206\u652f</li> <li>HEAD\uff1a\u6307\u5411\u5f53\u524d\u5206\u652f\u7684\u6307\u9488</li> <li>origin\uff1a\u9ed8\u8ba4\u8fdc\u7a0b\u4ed3\u5e93</li> <li>master: \u9ed8\u8ba4\u4e3b\u5206\u652f</li> </ul>"},{"location":"Git/#_2","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>git pull &lt;remote&gt; &lt;branch&gt;</p> <p>\u7ea6\u7b49\u4e8e git clone + git merge,\u4e00\u822c\u7528\u4e8e\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u514b\u9686\u5230\u672c\u5730</p> </li> <li> <p>git push (-u) &lt;remote&gt; &lt;branch&gt;</p> <p>\u5c06\u672c\u5730\u7684\u4ed3\u5e93\uff08repository\uff09\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5206\u652f\u4e0a\uff0c-u\u53c2\u6570\u8868\u793a\u5c06\u672c\u5730\u5206\u652f\u4e0e\u8fdc\u7a0b\u5206\u652f\u5173\u8054\u8d77\u6765</p> </li> <li> <p>git add &lt;file&gt;</p> <p>\u5c06\u5de5\u4f5c\u533a\u7684\u6587\u4ef6\u6dfb\u52a0\u5230\u6682\u5b58\u533a\uff08index\uff09</p> </li> <li> <p>git commit -m &lt;message&gt;</p> <p>\u5c06\u6682\u5b58\u533a\u7684\u6587\u4ef6\u63d0\u4ea4\u5230\u672c\u5730\u4ed3\u5e93\uff08repository\uff09 message\u662f\u63d0\u4ea4\u7684\u8bf4\u660e\uff0c\u4e00\u822c\u662f\u5bf9\u672c\u6b21\u63d0\u4ea4\u7684\u7cbe\u7b80\u63cf\u8ff0</p> </li> <li> <p>git init</p> <p>\u521d\u59cb\u5316\u4e00\u4e2a\u672c\u5730\u4ed3\u5e93</p> </li> <li> <p>git clone</p> <p>\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u514b\u9686\u5230\u672c\u5730</p> </li> <li> <p>git branch</p> <p>\u67e5\u770b\u5206\u652f -a \u67e5\u770b\u6240\u6709\u5206\u652f -r \u67e5\u770b\u8fdc\u7a0b\u5206\u652f -d \u5220\u9664\u5206\u652f \u540e\u52a0\u5206\u652f\u540d\u53ef\u65b0\u5efa\u5206\u652f</p> </li> <li> <p>git checkout &lt;branch&gt;</p> <p>\uff08\u65b0\u5efa\u4e14\uff09\u5207\u6362\u5206\u652f</p> </li> <li> <p>git merge &lt;branch&gt;</p> <p>\u5c06&lt;branch&gt;\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f</p> </li> <li> <p>git rebase</p> <p>\u5c06\u5f53\u524d\u5206\u652f\u7684\u63d0\u4ea4\u8bb0\u5f55\u79fb\u52a8\u5230&lt;branch&gt;\u5206\u652f\u7684\u6700\u540e \u4f7f\u5f97\u63d0\u4ea4\u8bb0\u5f55\u66f4\u52a0\u6e05\u6670</p> </li> <li> <p>git log (--oneline)</p> <p>\u67e5\u770b\u63d0\u4ea4\u8bb0\u5f55</p> </li> </ul>"},{"location":"Git/#_3","title":"\u5e38\u7528\u64cd\u4f5c","text":"<ul> <li>\u67e5\u770b\u5dee\u5f02</li> </ul> <pre><code>git diff hash1 hash2    # \u67e5\u770b\u4e24\u6b21\u63d0\u4ea4\u7684\u5dee\u5f02\ngit diff --cached       # \u67e5\u770b\u6682\u5b58\u533a\u548c\u672c\u5730\u4ed3\u5e93\u7684\u5dee\u5f02\ngit diff HEAD~n HEAD    # \u67e5\u770b\u524d\u7b2cn\u6b21\u63d0\u4ea4\u548c\u5f53\u524d\u63d0\u4ea4\u7684\u5dee\u5f02\n</code></pre> <ul> <li>\u5c06\u591a\u4e2a\u63d0\u4ea4\u5408\u5e76\u4e3a\u4e00\u4e2a</li> </ul> <pre><code>git rebase -i HEAD~n    # n\u4e3a\u8981\u5408\u5e76\u7684\u63d0\u4ea4\u6570\uff0c\u76f8\u5f53\u4e8e\u987a\u5e8f\u91cd\u65b0\u6267\u884c\n# \u4e4b\u540e\u5c06\u60f3\u8981\u5408\u5e76\u7684\u63d0\u4ea4\u524d\u7684pick\u6539\u4e3asquash(s)\n# \u4fdd\u5b58\u9000\u51fa\u540e\uff0c\u4f1a\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\uff0c\u53ef\u4ee5\u4fee\u6539\u63d0\u4ea4\u4fe1\u606f\n</code></pre> <ul> <li>\u65b0\u5efa\u4e00\u4e2a\u672c\u5730\u4ed3\u5e93\u5e76\u4e0e\u8fdc\u7a0b\u4ed3\u5e93\u5173\u8054</li> </ul> <pre><code>git init\ngit remote add origin &lt;url&gt;\ngit pull origin master\n...\ngit add *\ngit commit -m \"...\"\ngit push -u origin master\n</code></pre> <ul> <li>\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u514b\u9686\u5230\u672c\u5730</li> </ul> <pre><code>git clone &lt;url&gt;\n</code></pre> <ul> <li>\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u62c9\u53d6\u5206\u652f\u5e76\u5b8c\u6210\u5408\u5e76</li> </ul> <pre><code>git pull origin &lt;branch\\&gt;\ngit merge &lt;branch\\&gt;\ngit add *\ngit commit -m \"...\"\ngit push -u origin master\ngit push --delete origin &lt;branch\\&gt; # \u5220\u9664\u8fdc\u7a0b\u5206\u652f\n</code></pre> <ul> <li> <p>\u5904\u7406\u51b2\u7a81</p> <ul> <li>\u653e\u5f03\u672c\u5730\u4fee\u6539</li> </ul> <pre><code>git fetch --all\ngit reset --hard origin/master\ngit pull\n</code></pre> <ul> <li>\u672a\u63d0\u4ea4\uff0c\u53ef\u4ee5\u6682\u5b58\u5f53\u524d\u5de5\u4f5c\uff0c\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u7136\u540e\u5f00\u59cb\u5408\u5e76</li> </ul> <pre><code>git stash\ngit pull\ngit stash pop\n</code></pre> <ul> <li>\u5df2\u63d0\u4ea4\uff0c\u53ef\u4ee5\u76f4\u63a5merge\u5904\u7406\u51b2\u7a81\uff0c\u518d\u91cd\u65b0\u63d0\u4ea4</li> </ul> <pre><code>git merge\ngit add\n</code></pre> </li> <li> <p>\u8fdc\u7a0b\u4ed3\u5e93\u7ba1\u7406</p> <ul> <li> <p>\u5220\u9664\u5206\u652f</p> <pre><code>git push --delete origin &lt;branch\\&gt;\n</code></pre> </li> <li> <p>\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93</p> <pre><code>git remote -v\n</code></pre> </li> <li> <p>\u4fee\u6539\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740</p> <pre><code>git remote set-url origin &lt;url&gt;\n</code></pre> </li> </ul> </li> </ul>"},{"location":"Info/","title":"\u4fe1\u606f\u7406\u8bba","text":"<p>~~\u9ad8\u7ea7\u7684\u6982\u7387\u8bba\u4e0e\u6570\u7406\u7edf\u8ba1~~</p>"},{"location":"Info/#_2","title":"\u4fe1\u606f\u7684\u5b9a\u4e49","text":"<ul> <li> <p>\u4fe1\u606f\u662f\u4e00\u79cd\u7528\u6765\u6d88\u9664\u4e0d\u786e\u5b9a\u6027\u7684\u4e1c\u897f</p> <ul> <li> <p>\u4fe1\u606f\u6765\u6e90\u4e8e\u7269\u8d28\uff0c\u4f46\u4e0d\u7b49\u4e8e\u7269\u8d28</p> </li> <li> <p>\u4fe1\u606f\u5fc5\u987b\u6709\u4e00\u4e2a\u8f7d\u4f53\uff0c\u4fe1\u606f\u662f\u8f7d\u4f53\u7684\u5185\u5bb9</p> </li> </ul> </li> </ul>"},{"location":"Info/#_3","title":"\u4fe1\u606f\u7684\u5ea6\u91cf (\u79bb\u6563)","text":"<p>\\(I(A) = -\\log_2 P(A)\\)</p> <ul> <li> <p>\u4fe1\u606f\u7684\u5ea6\u91cf\u5355\u4f4d\u662f\u6bd4\u7279\uff08bit\uff09\uff0c\u6b63\u5bf9\u5e94\u4e8e\u5f53\u524d\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf (\u4ee5e\u4e3a\u5e95\u5219\u79f0\u4e3a\u5948\u7279nat)</p> </li> <li> <p>\u9999\u519c\u4fe1\u606f\u91cf\u76f8\u5f53\u4e8e\u5c06\u4fe1\u606f\u8bba\u548c\u6982\u7387\u8bba\u8054\u7cfb\u8d77\u6765\u3001</p> <ul> <li> <p>\u6982\u7387\u8d8a\u5c0f\uff0c\u4fe1\u606f\u91cf\u8d8a\u5927</p> </li> <li> <p>\u975e\u8d1f\u6570</p> </li> <li> <p>\u53ef\u52a0\u6027</p> </li> </ul> </li> </ul>"},{"location":"Info/#_4","title":"\u4e8b\u4ef6\u7684\u81ea\u4fe1\u606f","text":"<ul> <li> <p>\u4e8b\u4ef6\u7684\u81ea\u4fe1\u606f\u7684\u672c\u8d28</p> <ul> <li> <p>\u4e8b\u4ef6\u53d1\u751f\u540e\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u91cf</p> </li> <li> <p>\u4e8b\u4ef6\u53d1\u751f\u524d\u4e3a\u786e\u8bc1\u4e8b\u4ef6\u53d1\u751f\u7684\u4e0d\u786e\u5b9a\u6027\u6240\u9700\u8981\u7684\u4fe1\u606f\u91cf</p> </li> </ul> </li> <li> <p>\u6761\u4ef6\u81ea\u4fe1\u606f\u7684\u672c\u8d28</p> <ul> <li> <p>\u4e8b\u4ef6Y\u53d1\u751f\u540e\uff0cX\u518d\u53d1\u751f\u9700\u8981\u7684\u201c\u65b0\u7684\u4fe1\u606f\u91cf\u201d</p> </li> <li> <p>\u4e8b\u4ef6Y\u53d1\u751f\u540e\uff0cX\u53c8\u53d1\u751f\u4e86\uff0c\u63d0\u4f9b\u7ed9\u89c2\u5bdf\u8005\u7684\u201c\u65b0\u7684\u4fe1\u606f\u91cf\u201d</p> </li> </ul> </li> </ul>"},{"location":"Info/#mutual-infomation","title":"\u4e8b\u4ef6\u7684\u4e92\u4fe1\u606f(Mutual Infomation)","text":"<ul> <li> <p>\\(I(x ; y ) = I(x) - I(x | y)= -log P(x) - ( - log P(x | y) ) = log \\frac{P(x, y)}{P(x)P(y)}\\)</p> </li> <li> <p>\u5355\u4e00\u4e8b\u4ef6y\u53d1\u751f\u540e\u5bf9\u4e8b\u4ef6x\u7684\u4e0d\u786e\u5b9a\u6027\u51cf\u5c11\u7684\u7a0b\u5ea6(\u6709\u70b9\u50cf\u8861\u91cf\u4e24\u4e8b\u4ef6\u7684\u76f8\u5173\u6027\uff0c\u53ef\u80fd\u4e3a\u6b63\u3001\u8d1f\u30010)</p> <p>\u4e5f\u5c31\u662f</p> <p>\u5df2\u77e5 y \u53d1\u751f\u7684\u60c5\u51b5\u4e0b\uff0cx \u53d1\u751f\u5e26\u6765\u7684\u4e0d\u786e\u5b9a\u6027</p> <p>\u4e0d\u77e5\u9053 y \u662f\u5426\u53d1\u751f\u7684\u60c5\u51b5\u4e0b\uff0cx \u53d1\u751f\u5e26\u6765\u7684\u4e0d\u786e\u5b9a\u6027</p> <p>\u4e4b\u5dee</p> </li> <li> <p>\u5bf9\u79f0\u6027\uff1a\\(I(x ; y ) = I(y ; x )\\)</p> </li> <li> <p>\u94fe\u5f0f\u6cd5\u5219\uff1a\\(I(x ; (y, z) ) = I(x) - I(x | (y,z) ) = I(x ; y ) + I((x ; z) | y )\\)</p> <p>(\u4e8b\u4ef6y , z \u7ed9 \u4e8b\u4ef6 x \u5e26\u6765\u7684\u4fe1\u606f\u91cf = \u4e8b\u4ef6 y \u7ed9\u4e8b\u4ef6 x \u5e26\u6765\u7684\u4fe1\u606f\u91cf + y\u5df2\u77e5\u7684\u6761\u4ef6\u4e0b\u4e8b\u4ef6 z \u7ed9\u4e8b\u4ef6 x \u989d\u5916\u5e26\u6765\u7684\u4fe1\u606f\u91cf)</p> </li> </ul>"},{"location":"Info/#_5","title":"\u71b5","text":"<ul> <li> <p>\\(H(X) = \\sum P(x_i) I(x_i) = - \\sum P(x_i) \\log P(x_i)\\)</p> </li> <li> <p>\u71b5\u5b9a\u4e49\u4e3a\u968f\u673a\u53d8\u91cf\u5404\u4e2a\u4e8b\u4ef6\u7684\u5e73\u5747\u81ea\u4fe1\u606f\uff0c\u4e5f\u5c31\u662f\u968f\u673a\u53d8\u91cf\u7684\u4e0d\u786e\u5b9a\u6027</p> </li> <li> <p>\u71b5\u9488\u5bf9\u968f\u673a\u53d8\u91cf\uff0c\u81ea\u4fe1\u606f\u9488\u5bf9\u7684\u662f\u5177\u4f53\u4e8b\u4ef6\uff08\u968f\u673a\u53d8\u91cf\u53d6\u503c\uff09</p> </li> <li> <p>\u6761\u4ef6\u71b5</p> <ul> <li> <p>\u5355\u4e00\u4e8b\u4ef6\u7684\u6761\u4ef6\u71b5 \u5373 \u7b80\u5355\u5730\u66ff\u6362\u5bf9\u5e94\u7684p(x)\u4e3ap(x|y)</p> \\[ H(X|y) = - \\sum_{x_i} P(x_i|y) \\log P(x_i|y) \\] </li> <li> <p>\u968f\u673a\u53d8\u91cf\u7684\u6761\u4ef6\u71b5\uff0c\u5b9a\u4e49\u4e3a\u5bf9\u6761\u4ef6\u968f\u673a\u53d8\u91cf\u7684\u71b5\u7684\u671f\u671b\uff0c\u672c\u8d28\u662f\u968f\u673a\u53d8\u91cfY\u786e\u5b9a\u540e\u968f\u673a\u53d8\u91cfX\u8fd8\u5269\u4e0b\u7684\u4e0d\u786e\u5b9a\u5ea6\uff0c\u7406\u89e3\u4e0a\u53ef\u4ee5\u53c2\u8003\u6761\u4ef6\u6570\u5b66\u671f\u671b\u7684\u5b9a\u4e49</p> \\[ H(X|Y) = \\sum_{y_i} P(y_i) H(X|y_i) = - \\sum_{x_i} \\sum_{yj} P(x_i,y_j) \\log P(x_i|y_j) \\] </li> </ul> </li> <li> <p>\u8054\u5408\u71b5\u7684\u94fe\u5f0f\u6cd5\u5219\uff1a\\(H(X, Y) = H(X) + H(Y | X)\\)</p> <ul> <li> <p>\u7279\u6b8a\u7684\uff0cX,Y\u7edf\u8ba1\u72ec\u7acb\u65f6\uff0c\\(H(X, Y) = H(X) + H(Y)\\)</p> </li> <li> <p>\u591a\u53d8\u91cf\uff0c\\(H(X_1, X_2, \\cdots, X_n) = \\sum H(X_i | X_1, X_2, \\cdots, X_{i-1})\\)</p> </li> </ul> </li> <li> <p>\u71b5\u7684\u6027\u8d28</p> <ul> <li> <p>\u672c\u8d28\u4e0a\u662fK\u7ef4\u6982\u7387\u7a7a\u95f4\u4e0a\u5411\u91cf\u7684\u51fd\u6570</p> </li> <li> <p>\u57fa\u672c\u7b80\u5355\u6027\u8d28</p> <ul> <li> <p>\u975e\u8d1f\u6027\uff1a\\(H(X) \\ge 0\\)</p> </li> <li> <p>\u786e\u5b9a\u6027\uff1a\u5f53\u4e14\u4ec5\u5f53X\u662f\u786e\u5b9a\u6027\u7684\u968f\u673a\u53d8\u91cf\u65f6\uff0c\\(H(X) = 0\\)</p> </li> <li> <p>\u53ef\u6269\u5c55\u6027\uff1a\u7ef4\u5ea6\u6269\u5c55</p> </li> </ul> </li> <li> <p>\u53ef\u52a0\u6027</p> <ul> <li> <p>\u5373\u4e0a\u9762\u7684\u8054\u5408\u71b5\u7684\u94fe\u5f0f\u6cd5\u5219\u63a8\u5e7f</p> </li> <li> <p>\u8bc1\u660e:</p> </li> </ul> <p></p> <p>\\(H(X_1,X_2) = H(X_2) + H(X_1 | X_2) = H(X_2)\\)  (\\(X_2\\)\u786e\u5b9a\u540e\uff0c\\(X_1\\)\u4e5f\u786e\u5b9a\u4e86\uff0c\u6240\u4ee5\\(H(X_1 | X_2) = 0\\))</p> <p>\\(H(X_1,X_2) = H(X_1) + H(X_2 | X_1)\\)</p> <p>\u4e24\u5f0f\u76f8\u7b49\uff0c\u6240\u4ee5 \\(H(X_2) = H(X_1) + H(X_2 | X_1)\\)</p> </li> <li> <p>\u6781\u503c\u6027</p> <ul> <li>\\(H_K(p_1,p_2, \\cdots p_K) \\leq H_K(\\frac{1}{K},\\frac{1}{K}, \\cdots \\frac{1}{K}) = log K\\)</li> </ul> </li> <li> <p>\u6761\u4ef6\u71b5 &lt;= \u71b5</p> <ul> <li> <p>\\(H(X|Y) \\leq H(X)\\)</p> </li> <li> <p>\\(H(X|y) &lt;&gt; H(x)\\)</p> </li> </ul> </li> <li> <p>\u51f8\u51fd\u6570\u6027\u8d28</p> <ul> <li> <p>\u71b5\u662f\u5b9a\u4e49\u5728\u51f8\u96c6\u4e0a\u7684\u4e0a\u51f8\u51fd\u6570</p> <ul> <li> <p>\u51f8\u51fd\u6570\u6027\u8d28\uff1a</p> <ul> <li> <p>Hessian\u77e9\u9635\u6b63\u5b9a/\u8d1f\u5b9a</p> </li> <li> <p>Jensen\u4e0d\u7b49\u5f0f\u6210\u7acb</p> <p>\\(\\Sigma \\theta_i f(x_i) \\leq f(\\Sigma \\theta_i x_i)\\) </p> </li> </ul> </li> </ul> </li> <li> <p>\\(H(\\theta \\alpha + (1-\\theta) \\beta) \\geq \\theta H(\\alpha) + (1-\\theta) H(\\beta), \\theta \\in [0,1]\\)</p> </li> </ul> </li> <li> <p>\u4e92\u4fe1\u606f \u4e0e \u71b5</p> <ul> <li> <p>\\(I(x, y) = I(x) - I(x | y) = -log \\frac{p(x)p(y)}{p(x,y)}\\)</p> </li> <li> <p>\\(I(X;Y) = E(I(x,y)) = H(X) - H(X|Y) = H(Y) - H(Y|X) = H(X) + H(Y) - H(X,Y)\\)</p> </li> <li> <p>\u4e92\u4fe1\u606f\u7b49\u4e8e\u4e8b\u4ef6Y\uff08\u6574\u4e2a\u968f\u673a\u53d8\u91cf\uff0c\u6709\u591a\u79cd\u7ed3\u679c\uff09\u53d1\u751f\u540e\u5bf9\u4e8b\u4ef6X\u7684\u4e0d\u786e\u5b9a\u6027\u51cf\u5c11\u7684\u7a0b\u5ea6</p> <p> </p> </li> <li> <p>\u6570\u5b66\u4e0a\u8bf4\uff0cI(X;Y) \u662f\u8f93\u5165\u7684\u5206\u5e03\u77e2\u91cf \u548c \u8f6c\u79fb\u6982\u7387\u77e9\u9635 \u7684\u4fe1\u606f\u51fd\u6570   </p> </li> <li> <p>\u4e92\u4fe1\u606f\u7684\u51f8\u6027</p> </li> </ul> </li> </ul> </li> <li> <p>\u76f8\u5bf9\u71b5\uff08KL\u6563\u5ea6\uff09</p> <ul> <li> <p>\\(D(p||q) = \\sum p(x) \\log \\frac{p(x)}{q(x)} = E_p(\\log \\frac{p(x)}{q(x)})\\)</p> </li> <li> <p>\u6027\u8d28\uff1a</p> <ul> <li> <p>\u975e\u8d1f\u6027</p> </li> <li> <p>\u4e0d\u5bf9\u79f0\u6027</p> </li> <li> <p>\u4e0e\u4e92\u4fe1\u606f\u7684\u5173\u7cfb</p> <p>\\(I(X;Y) = D(p(x,y)||p(x)p(y))\\)</p> </li> <li> <p>\u4e0e\u71b5\u7684\u5173\u7cfb</p> <p>\\(H(x) = H(U) - D(X||U)\\) \uff08U\u4e3a\u5747\u5300\u5206\u5e03\uff09</p> </li> <li> <p>\u201c\u94fe\u5f0f\u201d\u6cd5\u5219\uff08P=P1P2\u76f8\u4e92\u72ec\u7acb, Q=Q1Q2\u76f8\u4e92\u72ec\u7acb\uff09</p> <p>\\(D(P||Q) = D(P1||Q1) + D(P2||Q2)\\)</p> </li> </ul> </li> </ul> </li> <li> <p>\u7591\u4e49  </p> <ul> <li> <p>\\(X \\in \\{x_0, x_1, ... x_{n-1}\\}\\)\u4e3a\u771f\u5b9e\u53d8\u91cf\uff0c\\(\\hat X\\)\u4e3a\u4f30\u8ba1\u53d8\u91cf\uff0c\u4f7f\u7528\\(\\hat X\\)\u6765\u4f30\u8ba1\\(X\\)</p> </li> <li> <p>\u7591\u4e49\u5ea6\u5b9a\u4e49\uff1a</p> \\[ P_E = \\Sigma_{k=0}^{n-1} \\Sigma_{i=0}^{n-1} P(X = k, \\hat X = i) (i \\neq k) \\] </li> <li> <p>Fano \u4e0d\u7b49\u5f0f</p> \\[ H(P_E) + P_E \\log(n-1) \\geq H(X| \\hat X) \\] <p></p> </li> </ul> </li> </ul>"},{"location":"Info/#_6","title":"\u9a6c\u5c14\u53ef\u592b\u94fe","text":"<ul> <li> <p>\u9a6c\u5c14\u53ef\u592b\u94fe\u7684\u5b9a\u4e49</p> <ul> <li> <p>\u4e00\u4e2a\u968f\u673a\u8fc7\u7a0b\uff0c\u5177\u6709\u9a6c\u5c14\u53ef\u592b\u6027\u8d28</p> </li> <li> <p>\u9a6c\u5c14\u53ef\u592b\u6027\u8d28\uff1a\\(P(X_{n+1} | X_1, X_2, \\cdots, X_n) = P(X_{n+1} | X_n)\\)</p> </li> <li> <p>\u6570\u636e\u5904\u7406\u5b9a\u7406\uff1a\u589e\u52a0\u6570\u636e\u5904\u7406\u6b21\u6570\uff0c\u4e0d\u4f1a\u589e\u52a0\u6570\u636e\u91cf</p> \\[ X -&gt; Y -&gt; Z \\] \\[ I(X;Y) \\geq I(X;Z) \\] \\[ I(X;Y) \\geq I(X;Y|Z) \\] </li> <li> <p>\u4e92\u4fe1\u606f\u7684\u51f8\u6027</p> <p></p> <p></p> </li> </ul> </li> </ul>"},{"location":"Info/#_7","title":"\u4fe1\u606f\u7684\u5ea6\u91cf\uff08\u8fde\u7eed\uff09","text":"<p>\u6c42\u548c --&gt; \u79ef\u5206</p> <ul> <li> <p>\u4e92\u4fe1\u606f</p> \\[ I(X;Y) = \\int \\int p(x,y) \\log \\frac{p(x,y)}{p(x)p(y)} dx dy \\] <ul> <li> <p>\u4e8c\u7ef4\u6b63\u6001\u53d8\u91cf\u7684\u4e92\u4fe1\u606f</p> \\[ I(X;Y) = - \\frac{1}{2} \\log (1-\\rho^2) \\] </li> </ul> </li> <li> <p>\u5fae\u5206\u71b5</p> \\[ H_c(X) = - \\int p(x) \\log p(x) dx \\] <ul> <li> <p>\u4e00\u4e9b\u8bf4\u660e\uff1a</p> <ul> <li> <p>\u5fae\u5206\u71b5\u5b9e\u9645\u4e0a\u4e0d\u662f\u8fde\u7eed\u53d8\u91cf\u7684\u4e0d\u786e\u5b9a\u5ea6\uff0c\u56e0\u4e3a\u90a3\u4e2a\u4e00\u822c\u662f\u65e0\u7a77\u5927</p> </li> <li> <p>\u5fae\u5206\u71b5\u662f\u4e00\u79cd\u4fdd\u8bc1\u524d\u9762\u79bb\u6563\u53d8\u91cf\u6027\u8d28\u7684\u201d\u9f9f\u815a\u201c\uff0c\u5b9e\u9645\u53ef\u6b63\u53ef\u8d1f</p> </li> <li> <p>\u5fae\u5206\u71b5\u4e0d\u5177\u6709\u7ebf\u6027\u4e0d\u53d8\u6027  </p> </li> </ul> </li> <li> <p>\u5cf0\u503c\u6027</p> <ul> <li> <p>\u53d6\u503c\u4e00\u5b9a\u65f6\uff0c\u5747\u5300\u5206\u5e03\u7684\u5fae\u5206\u71b5\u6700\u5927\uff0c\u4e3a \\(H_c(X) = \\ln L\\)</p> </li> <li> <p>\u65b9\u5dee\u4e00\u5b9a\u65f6\uff0c\u9ad8\u65af\u5206\u5e03\u7684\u5fae\u5206\u71b5\u6700\u5927\uff0c\u4e3a \\(H_c(X) = \\ln (\\sqrt{2 \\pi e} \\sigma)\\) </p> </li> </ul> </li> <li> <p>\u71b5\u529f\u7387\u7684\u5b9a\u4e49</p> \\[ \\bar \\sigma_x^2 = \\frac{1}{2 \\pi e} e^{2 H_c(X)} \\] <p>\u6b64\u65f6\u9ad8\u65af\u5206\u5e03\u7684\u71b5\u529f\u7387\u6070\u4e3a\\(\\sigma^2\\)</p> </li> </ul> </li> </ul>"},{"location":"Info/#_8","title":"\u5e73\u7a33\u79bb\u6563\u4fe1\u6e90","text":"<ul> <li>\u5e73\u7a33\u968f\u673a\u8fc7\u7a0b</li> </ul> <p>\u8fde\u7eedT\u65f6\u95f4\u6bb5\u5185\u7684\u6982\u7387\u5206\u5e03\u662f\u76f8\u540c\u7684</p> <p>\\(E(X_t) = E(X_{t+k}) = E(X_0) = Const.\\)</p> <ul> <li> <p>\u79bb\u6563\u4fe1\u6e90</p> <ul> <li> <p>\u5e73\u7a33\u4fe1\u6e90</p> \\[ P(x_1, x_2, \\cdots, x_n) = P(x_{1+k}, x_{2+k}, \\cdots, x_{n+k}) \\] </li> <li> <p>\u7b80\u5355\u65e0\u8bb0\u5fc6\u4fe1\u6e90</p> \\[ P(x_1, x_2, \\cdots, x_n) = P(x_1)P(x_2) \\cdots P(x_n) \\] </li> <li> <p>m\u9636\u9a6c\u5c14\u53ef\u592b\u4fe1\u6e90</p> \\[ P(x_1, x_2, \\cdots, x_n) = P(x_1)P(x_2|x_1) \\cdots P(x_n|x_{n-1}, \\cdots, x_{n-m}) \\] </li> </ul> </li> <li> <p>\u5e73\u7a33\u4fe1\u6e90\u7684\u71b5</p> <ul> <li> <p>\\(H = - \\sum P(\\vec{X}) \\log P(\\vec{X})\\) (\u4f1a\u8d8b\u8fd1\u4e8e\u65e0\u7a77\u5927)</p> </li> <li> <p>\u5e73\u5747\u6bcf\u7b26\u53f7\u71b5 \\(H_n(X) = \\frac{H(X)}{n}\\)</p> </li> <li> <p>\u71b5\u901f\u7387\\(H = \\lim_{n \\to \\infty} H_n\\)</p> </li> <li> <p>\u6027\u8d28</p> <ul> <li> <p>\\(H(X_N | X_{N-1}, \\cdots, X_1)\\) \u5355\u8c03\u4e0d\u589e</p> </li> <li> <p>\\(H_N(X)\\)\u5355\u8c03\u4e0d\u589e</p> </li> <li> <p>\\(H_N(X) \\geq H(X_N | X_{N-1}, \\cdots, X_1) \\to \\lim_{n \\to \\infty} H(X_N|X_{N-1}X_{N-2}\\cdots X_1)\\)</p> </li> </ul> </li> </ul> </li> <li> <p>\u71b5\u7684\u76f8\u5bf9\u7387</p> <ul> <li>\\(\\eta = \\frac{H}{\\log n}\\)</li> </ul> </li> <li> <p>\u4fe1\u6e90\u7684\u5197\u4f59\u5ea6</p> <ul> <li>\\(R = 1 - \\eta\\)</li> </ul> </li> <li> <p>\u9a6c\u5c14\u53ef\u592b\u6e90\u7684\u71b5\u7387</p> <ul> <li> \\[ H_{\\infty} = \\lim_{n \\to \\infty} H_n = H(X | S) = \\sum_{s_i \\in K^m} P(s_i) H(X | S = s_i) \\] </li> </ul> </li> </ul>"},{"location":"Info/#_9","title":"\u4fe1\u606f\u8bba &amp; \u901a\u4fe1","text":""},{"location":"Info/#_10","title":"\u6838\u5fc3","text":""},{"location":"Info/#_11","title":"\u4fe1\u6e90\u7f16\u7801","text":"<p>\u5728\u4ee3\u4ef7\u6700\u5c0f(\u6700\u5c0f\u7684\u6bd4\u7279\u6570)\u7684\u610f\u4e49\u4e0a\u6765\u6700\u6709\u6548\u5730\u8868\u793a\u4e00\u4e2a\u4fe1\u6e90</p> <ul> <li> <p>\u7b49\u957f\u7f16\u7801</p> <ul> <li>\u6bd4\u8f83\u597d\u7406\u89e3\uff0c\u5bf9\u4e8e\u6240\u6709\u53ef\u80fd\u8f93\u5165\u7684\\(K^L\\)\u5b57\u6bb5\u90fd\u5206\u914d\u4e00\u4e2a\u7b49\u957f\u7684\u7f16\u7801\uff0c\u56e0\u6b64\u6709 \\(D^N \\geq K^L\\)\uff0c\u5373 \\(N\\geq \\frac{L log K}{log D}\\)</li> </ul> </li> <li> <p>\u9999\u519c\u7f16\u7801\u5b9a\u7406(\u6e10\u8fdb\u65e0\u635f\u538b\u7f29\u7684\u6781\u9650)</p> <p>\\(N = \\frac{LH(U)}{log D}\\)</p> <ul> <li> <p>\\(L \\to \\infty,\\frac{I(u^L)}{L} \\to H(U)\\)</p> </li> <li> <p>\u5229\u7528\u5178\u578b\u5217\uff08\u5927\u6570\u5b9a\u5f8b\u578b\uff09\u8fdb\u884c\u76f4\u89c2\u8bc1\u660e(\u4e0d\u4e25\u683c)</p> <p></p> </li> <li> <p>\u7531\u5207\u6bd4\u96ea\u592b\u4e0d\u7b49\u5f0f\uff0c\u53ef\u4e25\u683c\u8bc1\u660e</p> <ul> <li>\\(2^{-n(H-\\epsilon)} \\leq P(\\vec{X}) \\leq 2^{-n(H+\\epsilon)}\\)</li> </ul> </li> </ul> </li> <li> <p>\u4e0d\u7b49\u957f\u7f16\u7801</p> <p>\\(\\bar L = \\sum n_k p_k\\)</p> <p>\u4e0d\u7b49\u957f\u7f16\u7801\u5b9a\u7406\uff1a</p> \\[\\exists\\bar{L}_{best}, \\ \\frac{H(U)}{logD} \\leq \\bar{L} \\leq \\frac{H(U)}{logD} + 1\\] <p>\u8bc1\u660e\uff1a</p> <p></p> <p></p> <p>\u5b9a\u7406\u6269\u5c55\uff1a</p> <p></p> <ul> <li> <p>\u552f\u4e00\u53ef\u8bd1\u6027</p> <p></p> <ul> <li> <p>Sardinas &amp; Petterson \u5224\u636e\uff08\u540e\u7f00\u5206\u89e3\uff09</p> <p>\u4e00\u4e2a\u7801\u662f\u552f\u4e00\u53ef\u8bd1\u7801\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\u662f\u9664\\(S_0\\)\u5916\u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u540e\u7f00\u5206\u89e3\u96c6\u4e2d\u5305\u542b\u7801\u5b57</p> <p></p> <p></p> </li> <li> <p>Kraft \u4e0d\u7b49\u5f0f(\u5f02\u5b57\u5934\u7801)</p> <p>\\(\\sum D^{-l_i} \\leq 1\\)</p> <ul> <li> <p>\u7b49\u957f\u7801\u65f6\uff0c\u7b49\u53f7\u6210\u7acb</p> </li> <li> <p>\u4e0d\u7b49\u957f\u7801\u65f6\uff0c\u4e0d\u7b49\u53f7\u6210\u7acb</p> </li> <li> <p>\u76f8\u5f53\u4e8e\u6240\u6709\u7801\u5b57\u90fd\u653e\u5728\u4e00\u68f5D\u53c9\u6811\u7684\u53f6\u5b50\u4e0a\uff0c\u6811\u7684\u6df1\u5ea6\u4e3a\u7801\u5b57\u7684\u6700\u957f\u957f\u5ea6\uff0c\u6bcf\u4e00\u5c42\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u5206\u652f</p> </li> <li> <p>\u552f\u4e00\u53ef\u8bd1\u7801\u4e0d\u4e00\u5b9a\u662f\u5f02\u5b57\u5934\u7801\uff0c\u4f46\u552f\u4e00\u53ef\u8bd1\u7801\u5fc5\u5b9a\u6ee1\u8db3Kraft\u4e0d\u7b49\u5f0f</p> <p></p> </li> <li> <p>\u91cd\u8981\u5173\u7cfb\uff1a\u552f\u4e00\u53ef\u8bd1\u7801 --&gt; Kraft \u4e0d\u7b49\u5f0f\u6210\u7acb --&gt; \u5b58\u5728\u540c\u6837\u957f\u5ea6\u5206\u5e03\u7684\u5f02\u5b57\u5934\u7801</p> </li> </ul> </li> </ul> </li> <li> <p>\u5373\u65f6\u53ef\u8bd1\u6027 </p> </li> <li> <p>Huffman \u7f16\u7801\uff08\u6700\u4f18\uff0c\u7565\uff09</p> <ul> <li> <p>D \u5143</p> <p> </p> </li> </ul> </li> <li> <p>Shannon \u7f16\u7801</p> <p></p> <ul> <li> <p>\u524d\u7f00\u7801</p> <p> </p> </li> <li> <p>\u4e0e Huffman\u7f16\u7801 \u76f8\u6bd4\uff0cShannon \u7f16\u7801\u903c\u8fd1\u9999\u519c\u6781\u9650\uff0c\u4f46\u662f\u6536\u655b\u6027\u80fd\u4e0d\u5982 Huffman \u7f16\u7801</p> </li> </ul> </li> <li> <p>Fano \u7f16\u7801</p> <p></p> </li> <li> <p>\u79bb\u6563\u6709\u8bb0\u5fc6\u4fe1\u6e90</p> <p></p> </li> <li> <p>\u9a6c\u5c14\u53ef\u592b\u4fe1\u6e90\u7684\u7f16\u7801</p> <p></p> </li> </ul> </li> </ul>"},{"location":"Info/#_12","title":"\u4fe1\u9053\u63a5\u6536","text":"<p>\u5728\u4ee3\u4ef7\u5c3d\u91cf\u5c0f\u3001\u5c3d\u91cf\u6b63\u786e\u53ef\u9760\u5730\u63a5\u6536\u4fe1\u53f7\u7684\u610f\u4e49\u4e0a\u6765\u6700\u6709\u6548\u5730\u4f20\u8f93\u4e00\u4e2a\u4fe1\u6e90\uff08\u4fe1\u9053\u4f20\u8f93\u662f\u6982\u7387\u6027\u7684\uff09</p> <p></p>"},{"location":"Info/#_13","title":"\u4fe1\u9053\u5bb9\u91cf","text":"<ul> <li> <p>\u65e0\u8bb0\u5fc6\u4fe1\u6e90DMS</p> \\[I(X_1,X_2,\\cdots X_N;Y_1,Y_2,\\cdots Y_N) \\leq \\sum_{i=1}^{N} I(X_i, Y_i)\\] <p>\\(C = max I(X,Y)\\)</p> </li> <li> <p>\u5e73\u884c\u4fe1\u9053\uff08\u79ef\u4fe1\u9053\uff09</p> <p></p> </li> <li> <p>\u5f00\u5173\u4fe1\u9053\uff08\u548c\u4fe1\u9053\uff09</p> <p></p> </li> <li> <p>\u7ea7\u8054\u4fe1\u9053</p> <p></p> </li> <li> <p>\u5bf9\u79f0\u4fe1\u9053</p> <ul> <li> <p>\u8f93\u5165\u5bf9\u79f0\uff1a\u884c\u7f6e\u6362</p> </li> <li> <p>\u8f93\u51fa\u5bf9\u79f0\uff1a\u5217\u7f6e\u6362</p> </li> <li> <p>\u51c6\u5bf9\u79f0\uff1a\u6309\u5217\u5212\u5206\u5f97\u5230\u7684\u82e5\u5e72\u5b50\u4fe1\u9053\u662f\u5bf9\u79f0\u77e9\u9635 </p> </li> </ul> </li> </ul>"},{"location":"Info/#_14","title":"\u9999\u519c\u4fe1\u9053\u7f16\u7801\u5b9a\u7406","text":"<p>\u5982\u679c\u4fe1\u606f\u4f20\u8f93\u901f\u7387R\u5c0f\u4e8e\u4fe1\u9053\u5bb9\u91cfC\uff0c\u5219\u603b\u5b58\u5728\u4e00\u79cd\u7f16\u7801\u65b9\u6cd5\uff0c\u4f7f\u4fe1 \u606f\u5728\u8be5\u4fe1\u9053\u4e0a\u65e0\u9519\u8bef\u5730\u53ef\u9760\u4f20\u8f93\u3002</p> <p></p>"},{"location":"Info/#_15","title":"\u6709\u635f\u538b\u7f29","text":"<p>Quote</p> <p></p>"},{"location":"Info/#_16","title":"\u7387\u5931\u771f\u7406\u8bba","text":"<p>\u7ed9\u5b9a\u5931\u771f\u7387\u7684\u8981\u6c42\u4e0b\uff0c\u6570\u636e\u538b\u7f29\u6280\u672f\u7684\u7406\u8bba\u6781\u9650</p> <p>\u6ce8\u610f\u4fe1\u606f\u7684\u5ea6\u91cf\u770b\u7684\u662f\u4fe1\u606f\u7684\u71b5\uff0c\u5373\u5178\u578b\u5217\u4e2a\u6570\uff0c\u800c\u4e0d\u662f\u7b26\u53f7\u6570</p> <p></p> <ul> <li> <p>Lloyds\u7b97\u6cd5\uff08\u6548\u7387\u4e0d\u9ad8\uff09</p> <p>\u5047\u8bbe\u7528R\u4e2a\u6bd4\u7279\u6765\u8868\u793a\u4fe1\u606f\uff0c\u5219\u76f8\u5f53\u4e8e\u505a\u4fe1\u606f\u533a\u57df\u4e0a\u7684\\(2^R-means\\)\u7b97\u6cd5</p> <p></p> </li> </ul>"},{"location":"Info/#_17","title":"\u5931\u771f\u5ea6\u91cf\u51fd\u6570\uff1a","text":"<p>\u9999\u519c\u7ed9\u51fa\u7684\u662f\u5176\u62bd\u8c61\u5f62\u5f0f\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u662f\u4efb\u610f\u7684\u5ea6\u91cf\u51fd\u6570</p> <p></p> \u5e38\u89c1\u5931\u771f\u5ea6\u91cf\u51fd\u6570 <ul> <li> <p>Hamming\u5931\u771f</p> \\[ D(x,\\hat x) = \\left\\{ \\begin{array}{ll} 0 &amp; x = \\hat x \\\\ 1 &amp; x \\neq \\hat x \\end{array} \\right. \\] <p>\u6b64\u65f6\u5931\u771f\u7387\u4e3a\u9519\u8bef\u7387</p> \\[ Ed(X,\\hat X) = P(X \\neq \\hat X) \\] </li> <li> <p>\u5e73\u65b9\u8bef\u5dee\u5931\u771f</p> \\[ D(x,\\hat x) = (x-\\hat x)^2 \\] </li> </ul> <ul> <li> <p>\u5931\u771f\u7684\u89c4\u8303\u5316</p> <p>\u5373\u6bcf\u4e2a\u7b26\u53f7\u53d6\u6b63\u786e\u81ea\u8eab\u503c\u65f6\u7684\u5931\u771f\u4e3a0</p> \\[ C_x = \\min_{\\hat x} d(x,\\hat x) = 0\\] <p></p> </li> <li> <p>\u96f6\u6bd4\u7279\u7f16\u7801</p> <p>\u867d\u7136\u6bd4\u7279\u901f\u7387\u4e3a0, \u4f46\u662f\u4e0d\u540c\u7684\\(\\hat x\\)\u5bfc\u81f4\u7684\u5931\u771f\u7387\u4e5f\u662f\u4e0d\u540c\u7684\uff0c\u5e94\u6709\u6700\u5c0f\u503c</p> <p>\u6bd4\u5982\u8bf4\u5bf9\u4e8e\u4e00\u4e2a\u9ad8\u65af\u53d8\u91cf\uff0c\u53d6\\(\\hat x = 0\\)\u65f6\u53d6\u5230\u6700\u5c0f\u503c\\(D = \\sigma ^ 2\\)\uff1b\u5426\u5219\u82e5\u53d6\\(\\hat x \\neq 0\\)\uff0c\u5bb9\u6613\u8bc1\u660e\\(D\\)\u4f1a\u53d8\u5927</p> <p>\u56e0\u6b64\uff0c\u96f6\u6bd4\u7279\u7f16\u7801\u6700\u5c0f\u5e73\u5747\u5931\u771f \u5c31\u662f \u7f16\u7801\u7684\u6700\u5927\u5931\u771f</p> <p></p> </li> <li> <p>\u4fe1\u606f\u7387\u5931\u771f\u51fd\u6570</p> <p></p> <p>\u6838\u5fc3\u5373\u662f\u627e\u5230\u4e0b\u65b9\u7684\u8fd9\u6761 \u7406\u8bba\u6781\u9650\u7684\u66f2\u7ebf\uff0c\u53f3\u4e0a\u65b9\u7684\u70b9\u53ef\u8fbe\uff0c\u5de6\u4e0b\u65b9\u7684\u70b9\u4e0d\u53ef\u8fbe</p> <p>\u5373 \u8bef\u5dee\u7387\u786e\u5b9a\uff0c\u6700\u5c0f\u6781\u9650\u6bd4\u7279\u6570\uff1b\u6bd4\u7279\u6570\u786e\u5b9a\uff0c\u6700\u5c0f\u6781\u9650\u8bef\u5dee\u7387</p> <p>\u5176\u4e2d</p> <ul> <li> <p>\u7387\u5931\u771f\u51fd\u6570\\(R(D)\\)\u662f\u5931\u771f\u7387\\(D\\)\u7684\u51fd\u6570\uff0c\u8868\u793a\u5728\u5931\u771f\u7387\\(D\\)\u4e0b\u7684\u6700\u5c0f\u6bd4\u7279\u6570</p> </li> <li> <p>\u5931\u771f\u7387\u51fd\u6570\\(D(R)\\)\u662f\u6bd4\u7279\u6570\\(R\\)\u7684\u51fd\u6570\uff0c\u8868\u793a\u5728\u6bd4\u7279\u6570\\(R\\)\u4e0b\u7684\u6700\u5c0f\u5931\u771f\u7387</p> </li> </ul> <p></p> <p>Quote</p> <p>\u4e0a\u9762\u7684\u5b9a\u4e49\u672c\u8d28\u4e0a\u662f\u5c06\u5931\u771f\u51fd\u6570\u8f6c\u5316\u4e3a\u4e86\u4e00\u4e2a\u4f18\u5316\u95ee\u9898\uff0c\u4f46\u662f\u6bd4\u8f83\u590d\u6742</p> <p>\u5728\u524d\u9762\u7684\u57fa\u7840\u4e0a\uff0c\u5b9a\u4e49 \u4fe1\u606f\u7387\u5931\u771f\u51fd\u6570</p> <p></p> </li> </ul>"},{"location":"Info/#_18","title":"\u7387\u5931\u771f\u4fe1\u6e90\u7f16\u7801\u5b9a\u7406","text":"\\[ R^{(I)} (D) = R(D) \\] <p>\u4ece\u800c\u8be5\u51fd\u6570\u7684\u6c42\u89e3\u53d8\u6210\u4e86\u4e00\u4e2a\u7c7b\u4f3c\u4fe1\u9053\u5bb9\u91cf\u8ba1\u7b97\u7684\u51f8\u4f18\u5316\u95ee\u9898</p>"},{"location":"Make/","title":"Makefile &amp; CMake","text":"<p>\u4eba\u59cb\u7ec8\u8fd8\u662f\u60f0\u6027\u52a8\u7269\uff0c\u867d\u7136\u5bd2\u5047\u91cc\u5df2\u7ecf\u5f3a\u8feb\u81ea\u5df1\u5b66\u4e86\u4e00\u4e9b\u57fa\u672c\u7684<code>Makefile</code>\uff0c\u4f46\u662f\u5f53\u771f\u7684\u9762\u5bf9\u4e00\u4e2aproject\u8fdb\u884c\u5e94\u7528\u7684\u65f6\u5019\uff0c\u8fd8\u662f\u4e3e\u6b65\u7ef4\u8270\u3002\u56e0\u6b64\u5c31\u501f\u7740OOP Lab1\u7684push, \u91cd\u65b0\u6574\u7406\u4e00\u4e0b\u5bf9\u4e8e<code>Makefile</code>\u7684\u7406\u89e3\u3002</p> <p>\u81f3\u4e8e<code>CMake</code>\uff0c\u7b49\u5c06\u6700\u8fd1\u4e13\u4e1a\u8bfe\u7684\u592a\u591a\u4f5c\u4e1a\u5904\u7406\u4e00\u4e0b\u518d\u6574\u7406\u3002 </p>"},{"location":"Make/#compile-link-c","title":"Compile &amp; Link (C++)","text":"<p>\u9996\u5148\u6574\u7406\u4e00\u4e0b\u4ee3\u7801\u6e90\u6587\u4ef6\u5230\u53ef\u6267\u884c\u6587\u4ef6\u7684\u8fc7\u7a0b\uff1a</p> <ul> <li> <p>Preprocessing\uff1a\u9884\u5904\u7406\uff0c\u5c06<code>#include</code>\u7684\u5934\u6587\u4ef6\u6240\u6307\u5f15\u7684\u6e90\u6587\u4ef6\u63d2\u5165\u5230\u5bf9\u5e94\u6587\u4ef6\u4e2d\uff0c\u8fdb\u884c\u5b8f\u5b9a\u4e49\u7684\u66ff\u6362\uff0c\u5e76\u5220\u9664\u6ce8\u91ca\uff0c\u751f\u6210\u4e34\u65f6\u6587\u4ef6<code>*.i</code>\u3002</p> </li> <li> <p>Compilation\uff1a\u7f16\u8bd1\uff0c\u5c06\u9884\u5904\u7406\u540e\u7684\u6587\u4ef6\u8f6c\u6362\u4e3a\u6c47\u7f16\u4ee3\u7801<code>*.s</code>\u3002</p> <ul> <li><code>g++ -S *.cpp</code> </li> </ul> </li> <li> <p>Assembly\uff1a\u6c47\u7f16\uff0c\u5c06\u6c47\u7f16\u4ee3\u7801\u8f6c\u6362\u4e3a\u76ee\u6807\u6587\u4ef6<code>*.o</code>\u3002</p> <ul> <li> <p><code>g++ -c *.s</code> </p> </li> <li> <p><code>g++ -c *.cpp</code> </p> </li> </ul> </li> <li> <p>Linking\uff1a\u94fe\u63a5\uff0c\u5c06\u76ee\u6807\u6587\u4ef6\u94fe\u63a5\u4e3a\u53ef\u6267\u884c\u6587\u4ef6\u3002</p> <ul> <li><code>g++ -o *(.exe) *.o</code> </li> </ul> </li> <li> <p>AR: \u751f\u6210\u94fe\u63a5\u5e93\u6587\u4ef6</p> <ul> <li><code>ar rcs libxxx.a *.o</code> </li> </ul> </li> <li> <p>PS: -o \u9009\u9879\u53ea\u662f\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u540d\uff0c\u5e76\u6ca1\u6709\u5176\u4ed6\u7279\u6b8a\u7684\u610f\u4e49\uff0c\u56e0\u6b64\u524d\u9762\u51e0\u6761\u547d\u4ee4\u4e5f\u53ef\u4ee5\u4f7f\u7528-o\u9009\u9879\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u540d\u3002 </p> </li> </ul>"},{"location":"Make/#multiple-files-c","title":"Multiple Files (C++)","text":"<ul> <li> <p>*.h</p> <ul> <li> <p>\u53ea\u662f\u4f5c\u4e3a\u8be5\u529f\u80fd\u6a21\u5757\u7684\u63a5\u53e3\uff0c\u4e00\u822c\u4e0d\u5305\u542b\u5177\u4f53\u7684\u5b9e\u73b0\uff0c\u901a\u8fc7<code>#include</code>\u6307\u5f15\u5230\u5bf9\u5e94\u7684\u6e90\u6587\u4ef6\u4e2d\u3002</p> </li> <li> <p>\u5f88\u591a\u65f6\u5019\u611f\u89c9\u7531\u4e8e\u7ffb\u8bd1\u95ee\u9898\uff0c\u201d\u5b9a\u4e49\u201c\u3001\u201d\u58f0\u660e\u201c\u3001\u201d\u5b9e\u73b0\u201c\u4e4b\u7c7b\u7684\u611f\u89c9\u5b8c\u5168\u5206\u4e0d\u6e05\uff0c\u4f46\u662f\u4e00\u822c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u5728\u5934\u6587\u4ef6\u4e2d\u4e0d\u80fd\u5f00\u8f9f\u5185\u5b58\u7a7a\u95f4\u5373\u53ef\u3002</p> </li> <li> <p>\u4e3b\u8981\u5185\u5bb9\uff1a</p> <ul> <li> <p>\u5934\u6587\u4ef6\u4fdd\u62a4 <code>#ifndef</code> <code>#define</code> <code>#endif</code></p> </li> <li> <p>\u7ed3\u6784\u4f53\u3001\u7c7b\u7684\u58f0\u660e\uff08\u91cd\u8f7d\u8fd0\u7b97\u7b26\u4f3c\u4e4e\u9700\u8981\u76f4\u63a5\u5b9e\u73b0\uff0c\u5176\u4ed6\u5185\u90e8\u51fd\u6570\u53ea\u9700\u8981\u58f0\u660e\uff09</p> </li> <li> <p>\u51fd\u6570\u7684\u58f0\u660e</p> </li> <li> <p>\u5b8f\u5b9a\u4e49</p> </li> <li> <p>\u5168\u5c40\u91cf\u7684\u58f0\u660e <code>extern</code> \uff08\u4e0d\u53ef\u8d4b\u503c\uff0c\u5426\u5219\u5c31\u9700\u8981\u5360\u7528\u5185\u5b58\u7a7a\u95f4\u4e86\uff09      </p> </li> <li> <p>\u5176\u4ed6\u9700\u8981\u7684\u5934\u6587\u4ef6\uff0c\u8fd9\u6837\u53ef\u4ee5\u7531\u8be5\u6a21\u5757\u76f4\u63a5\u751f\u6210\u5bf9\u5e94\u7684OBJ\u76ee\u6807\u6587\u4ef6\uff0c\u65b9\u4fbf\u6574\u4e2a\u5de5\u7a0b\u540e\u7eed\u7684\u94fe\u63a5\u3002 </p> </li> </ul> </li> </ul> </li> <li> <p>*.cpp\uff08\u529f\u80fd\u6a21\u5757\u6e90\u6587\u4ef6\uff09</p> <ul> <li> <p>\u5bf9\u5934\u6587\u4ef6\u58f0\u660e\u7684\u90e8\u5206\u8fdb\u884c\u5177\u4f53\u5b9e\u73b0</p> </li> <li> <p>\u4e3b\u8981\u5185\u5bb9\uff1a</p> <ul> <li> <p>\u5934\u6587\u4ef6\u5f15\u7528</p> <ul> <li>\u4e0a\u8ff0\u540c\u540d\u5934\u6587\u4ef6</li> </ul> </li> <li> <p>\u7ed3\u6784\u4f53\u3001\u7c7b\u7684\u5b9e\u73b0\uff0c\u4e0d\u80fd\u91cd\u590d\u51fa\u73b0\u58f0\u660e\u90e8\u5206\uff0c\u9700\u8981\u7528<code>name::</code>\u6307\u5b9a </p> </li> <li> <p>\u51fd\u6570\u7684\u5b9e\u73b0</p> </li> <li> <p>\u5168\u5c40\u91cf\u7684\u5b9a\u4e49\uff08\u8d4b\u503c\uff09</p> </li> </ul> </li> </ul> </li> <li> <p>Main.cpp </p> <ul> <li> <p>\u4e3b\u51fd\u6570\uff0c\u8c03\u7528\u5176\u4ed6\u6a21\u5757\u7684\u51fd\u6570\uff0c\u5b9e\u73b0\u6574\u4e2a\u7a0b\u5e8f\u7684\u529f\u80fd\u3002</p> </li> <li> <p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u53ea\u9700\u8981\u5f15\u7528\u5bf9\u5e94\u7684\u5934\u6587\u4ef6\uff0c\u7136\u540e\u8c03\u7528\u5bf9\u5e94\u7684\u51fd\u6570\u5373\u53ef\u3002  </p> </li> </ul> </li> </ul>"},{"location":"Make/#makefile","title":"Makefile","text":"<p>Make loves c compilation. And every time it expresses its love, things get confusing.</p> <ul> <li> <p>Tutorial \uff08\u901a\u8fc7\u5927\u91cf\u4e3e\u4f8b\uff0c\u975e\u5e38\u901a\u4fd7\u6613\u61c2\u4e14\u5f62\u8c61</p> </li> <li> <p>Docs \uff08\u5b98\u65b9\u6587\u6863\uff0c\u8be6\u7ec6\u5168\u9762\uff0c\u4f46\u662f\u6709\u70b9\u67af\u71e5\uff09</p> </li> <li> <p>Makefile \u6211\u7684\u7406\u89e3\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u7f16\u8bd1\u7684\u811a\u672c\uff0c\u901a\u8fc7\u6307\u5b9a\u4e00\u7cfb\u5217\u7684\u89c4\u5219\u548c\u547d\u4ee4\uff0c\u6765\u5b9e\u73b0\u5bf9\u4e8e\u6e90\u6587\u4ef6\u7684\u7f16\u8bd1\u3001\u94fe\u63a5\u7b49\u64cd\u4f5c\u3002\u4e0b\u9762\u6211\u5c31\u7b80\u5355\u6574\u7406\u4e86\u4e00\u4e0b\u81ea\u5df1\u8ba4\u4e3a\u6bd4\u8f83\u91cd\u8981\u6bd4\u8f83\u5e38\u7528\u7684\u4e00\u4e9b\u70b9\u3002</p> </li> </ul>"},{"location":"Make/#varible","title":"Varible","text":"<ul> <li> <p>\u5e38\u7528\u5168\u90e8\u5927\u5199\uff0c\u7528<code>(:)=</code>\u8d4b\u503c</p> <ul> <li><code>:=</code> \u4f1a\u7acb\u5373\u5c55\u5f00\uff0c\u800c<code>=</code>\u5219\u662f\u5728\u4f7f\u7528\u65f6\u624d\u5c55\u5f00 (\u56e0\u6b64\u53ef\u4ee5\u7528\u4e8e\u9012\u5f52\u5b9a\u4e49)</li> </ul> </li> <li> <p><code>+=</code> \u8ffd\u52a0\u8d4b\u503c</p> </li> <li> <p>\u7528\u7528<code>$()</code>\u5f15\u7528</p> </li> <li> <p>\u5173\u4e8e\u503c\u7684\u4f20\u5165\uff08\u4eceWK\u8001\u5e08\u7684\u8865\u5145\u8d44\u6599\u91cc\u5b66\u5230\u7684\uff09</p> <ul> <li> <p><code>make</code>\u547d\u4ee4\u540e\u9762\u53ef\u4ee5\u76f4\u63a5\u8ddf\u4e0a\u53d8\u91cf\u7684\u8d4b\u503c<code>NAME=VALUE</code>\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728<code>Makefile</code>\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf<code>$(NAME)</code></p> </li> <li> <p><code>make</code>\u547d\u4ee4\u540e\u9762\u76f4\u63a5\u8ddf\u4e0a\u53d8\u91cf\u7684\u8d4b\u503c<code>NAME=VALUE</code>\uff0c\u8fd8\u53ef\u4ee5\u5f53\u4f5cC\u8bed\u8a00\u4ee3\u7801\u7684\u5b8f\u5b9a\u4e49\uff0c\u8fd9\u6837\u7f16\u8bd1\u7ed3\u679c\u4f1a\u4e0d\u540c</p> <p>C \u8bed\u8a00\u53ef\u4ee5\u901a\u8fc7<code>-D</code>\uff0c\u7528\u5b8f\u5b9a\u4e49\u9009\u9879\u4f20\u5165\u5bf9\u5e94\u7684\u53d8\u91cf\u503c </p> <p>\u4f8b\u5982\u4e0b\u9762\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528<code>g++ -D ARGS=\\\"Hello World\\\" main.c -o main</code>\u6765\u7f16\u8bd1\u5f97\u5230<code>main</code>\u53ef\u6267\u884c\u6587\u4ef6(\u53cd\u659c\u6760\u662f\u4e3a\u4e86\u8f6c\u4e49\u53cc\u5f15\u53f7\u4e00\u8d77\u4f20\u5165\u907f\u514d\u5f53\u6210\u5b8f\u5b9a\u4e49\u7684\u8d4b\u503c)\uff0c\u8f93\u51fa<code>Hello World</code></p> main.c<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nint main(){\n    cout &lt;&lt; ARGS &lt;&lt; endl;\n    return 0;\n}\n</code></pre> </li> </ul> </li> </ul>"},{"location":"Make/#sign","title":"Sign","text":"<ul> <li> <p>\u7279\u6b8a\u53d8\u91cf</p> <ul> <li> <p><code>$@</code> \u76ee\u6807\u6587\u4ef6</p> </li> <li> <p><code>$^</code> \u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6</p> </li> <li> <p><code>$&lt;</code> \u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6</p> </li> <li> <p><code>$?</code> \u6240\u6709\u6bd4\u76ee\u6807\u6587\u4ef6\u65b0\u7684\u4f9d\u8d56\u6587\u4ef6</p> </li> <li> <p><code>$*</code> \u65e0\u540e\u7f00\u7684\u76ee\u6807\u6587\u4ef6\u540d</p> </li> </ul> </li> <li> <p>\u901a\u914d\u7b26</p> <ul> <li> <p><code>*</code> \u5339\u914d\u4efb\u610f\u957f\u5ea6\u7684\u5b57\u7b26\u4e32</p> </li> <li> <p><code>?</code> \u5339\u914d\u5355\u4e2a\u5b57\u7b26</p> </li> <li> <p><code>%</code> \u5339\u914d\u4efb\u610f\u6709\u957f\u5ea6\u7684\u5b57\u7b26\u4e32,\u5e76\u4e14\u5f80\u5f80\u5e94\u7528\u5728Pattern Rule</p> </li> </ul> </li> </ul>"},{"location":"Make/#rule","title":"Rule","text":"<ul> <li> <p>Basic Rule</p> Makefile<pre><code>target: prerequisites\n    command\n</code></pre> <ul> <li> <p>Target\uff1a</p> <ul> <li> <p>\u76ee\u6807, \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6807\u53f7\uff0c\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u89c4\u5219\u7684\u540d\u5b57</p> </li> <li> <p>\u7279\u6b8a\u7684\uff0c'all'\u4e3a\u9ed8\u8ba4\u76ee\u6807\uff0c'clean'\u4e3a\u6e05\u7406\u76ee\u6807</p> </li> </ul> </li> <li> <p>Prerequisites\uff1a\u4f9d\u8d56\u6587\u4ef6\uff0c\u4f9d\u8d56\u6587\u4ef6\u53d8\u5316\u624d\u4f1a\u6267\u884c\u76f8\u5e94\u547d\u4ee4</p> </li> <li> <p>Command\uff1a\u547d\u4ee4 </p> </li> </ul> </li> <li> <p>Pattern Rule</p> Makefile<pre><code>%.o: %.c\n    $(CC) $(CFLAG) -c $&lt; -o $@\n</code></pre> <ul> <li> <p>%.o\uff1a\u901a\u914d\u7b26\uff0c\u8868\u793a\u6240\u6709\u7684.o\u6587\u4ef6</p> </li> <li> <p>%.c\uff1a\u901a\u914d\u7b26\uff0c\u8868\u793a\u6240\u6709\u7684.c\u6587\u4ef6</p> </li> <li> <p>\u8fd9\u91cc\u76f8\u5f53\u4e8e\u5c06\u76ee\u5f55\u4e2d\u6240\u6709\u7684.c\u6587\u4ef6\u7f16\u8bd1\u4e3a\u5bf9\u5e94\u7684.o\u6587\u4ef6\uff0c\u800c\u4e0d\u9700\u8981\u4e00\u4e2a\u4e2a\u6307\u5b9a</p> </li> <li> <p>\u867d\u7136\u770b\u8d77\u6765\u76f8\u5f53\u9ad8\u6548\uff0c\u4f46\u662f\u7531\u4e8e\u8fd9\u6837\u6ca1\u6709\u89c4\u5219\u6807\u53f7\uff0c\u96be\u4ee5\u63a7\u5236\uff0c\u56e0\u6b64\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5e76\u4e0d\u5e38\u7528</p> </li> </ul> </li> <li> <p>Static Pattern Rule</p> Makefile<pre><code>targets: target-pattern: prereq-patterns\n    command\n</code></pre> <ul> <li> <p>targets: \u8fd9\u91cc\u5f80\u5f80\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u8868\u793a\u4e00\u7cfb\u5217\u7684\u76ee\u6807\u6587\u4ef6</p> </li> <li> <p>target-pattern: \u4e00\u822c\u4f7f\u7528<code>%</code>\u901a\u914d\u7b26\u6765\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f</p> </li> <li> <p>prereq-patterns: \u540c\u4e0a\uff0c\u4e00\u822c\u4f7f\u7528<code>%</code>\u901a\u914d\u7b26\u6765\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f </p> </li> <li> <p>command: \u611f\u89c9\u975e\u5e38\u50cfVerilog\u4e2d\u7684generate\u8bed\u53e5\uff0c\u901a\u8fc7\u4e00\u7cfb\u5217\u7684\u89c4\u5219\u6765\u751f\u6210\u76f8\u4f3c\u7684\u529f\u80fd\u6a21\u5757\uff08\u8be6\u89c1\u4e0b\u65b9\u4f8b\u5b50\uff09</p> </li> </ul> </li> <li> <p>Pattern Filter</p> <ul> <li> <p><code>$(filter pattern, text)</code>: \u4ecetext\u4e2d\u7b5b\u9009\u51fa\u7b26\u5408pattern\u7684\u90e8\u5206 </p> </li> <li> <p>\u53ef\u4ee5\u914d\u5408\u4e0a\u65b9\u7684Pattern Rule\u4f7f\u7528\uff0c\u66ff\u6362targets\u6765\u5b9e\u73b0\u66f4\u52a0\u7075\u6d3b\u7684\u529f\u80fd</p> </li> </ul> Makefile<pre><code># Ex 1: .o files depend on .c files. Though we don't actually make the .o file.\n$(filter %.o,$(obj_files)): %.o: %.c\necho \"target: $@ prereq: $&lt;\"\n\n# Ex 2: .result files depend on .raw files. Though we don't actually make the .result file.\n$(filter %.result,$(obj_files)): %.result: %.raw\necho \"target: $@ prereq: $&lt;\" \n</code></pre> </li> </ul>"},{"location":"Make/#function","title":"Function","text":"<ul> <li> <p><code>$(wildcard pattern)</code></p> <ul> <li>\u901a\u914d\u7b26\uff0c\u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u7b26\u5408pattern\u7684\u6587\u4ef6\u540d</li> </ul> </li> <li> <p><code>$(patsubst pattern, replacement, text)</code></p> <ul> <li>\u66ff\u6362\uff0c\u5c06text\u4e2d\u7b26\u5408pattern\u7684\u90e8\u5206\u66ff\u6362\u4e3areplacement</li> </ul> </li> <li> <p><code>$(addprefix prefix, names)</code></p> <ul> <li>\u6dfb\u52a0\u524d\u7f00\uff0c\u5c06names\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u6dfb\u52a0\u4e0aprefix</li> </ul> </li> <li> <p><code>$(addsuffix suffix, names)</code></p> <ul> <li>\u6dfb\u52a0\u540e\u7f00\uff0c\u5c06names\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u6dfb\u52a0\u4e0asuffix </li> </ul> </li> <li> <p><code>$(shell command)</code></p> <ul> <li>\u6267\u884c\u547d\u4ee4\uff0c\u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c</li> </ul> </li> </ul>"},{"location":"Make/#_1","title":"\u5176\u4ed6\u9ad8\u9636\u7528\u6cd5","text":"<ul> <li> <p>~~\u8fd8\u6ca1\u5b66~~</p> </li> <li> <p>\u5173\u4e8e.h\u6587\u4ef6\u4f9d\u8d56\u7684\u95ee\u9898</p> <ul> <li> <p>\u4fee\u6539\u4e86<code>.h</code>\u6587\u4ef6\uff0c\u4f46\u662f\u4e0d\u4fee\u6539<code>.cpp</code>\u6587\u4ef6\uff0c\u8fd9\u65f6\u5019makefile\u5e76\u4e0d\u4f1a\u91cd\u65b0\u7f16\u8bd1\u5bf9\u5e94\u7684<code>.o</code>\u6587\u4ef6\uff0c\u56e0\u4e3a\u5b83\u5e76\u4e0d\u77e5\u9053<code>.h</code>\u6587\u4ef6\u7684\u4fee\u6539\u3002</p> </li> <li> <p>\u6362\u53e5\u8bdd\u8bf4\uff0cMakefile \u53ea\u77e5\u9053<code>.o</code>\u4f9d\u8d56\u4e8e\u5bf9\u5e94\u7684<code>.cpp</code>\u6587\u4ef6\uff0c\u4f46\u5e76\u4e0d\u77e5\u9053\u8be5<code>.cpp</code>\u6587\u4ef6\u5177\u4f53\u4f9d\u8d56\u4e8e\u54ea\u4e9b<code>.h</code>\u6587\u4ef6\uff0c\u56e0\u6b64\u9700\u8981\u624b\u52a8\u6307\u5b9a\u4f9d\u8d56\u5173\u7cfb\u3002</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848</p> <ul> <li> <p>\uff5e\uff5e\u624b\u52a8\u8865\u5168\u5173\u7cfb\uff5e\uff5e</p> </li> <li> <p>\u4f7f\u7528 gcc/g++ \u7684<code>-MMD</code>\u9009\u9879\uff0c\u53ef\u4ee5\u81ea\u52a8\u751f\u6210\u4f9d\u8d56\u5173\u7cfb\u6587\u4ef6<code>*.d</code>, \u7136\u540e\u5728Makefile\u4e2d\u4f7f\u7528<code>-include</code>\u5f15\u7528\u8fd9\u4e9b\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u81ea\u52a8\u66f4\u65b0\u4f9d\u8d56\u5173\u7cfb\u4e86\u3002</p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"Make/#exampleoop-lab1","title":"Example(\u4ee5OOP Lab1\u4e3a\u4f8b)","text":"<ul> <li> <p>\u9879\u76ee\u7b80\u4ecb\uff1a</p> <ul> <li> <p>\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u6587\u672c\u7ba1\u7406\u7cfb\u7edf\uff0c\u8981\u6c42\u751f\u6210<code>pdadd</code>\u3001<code>pdlist</code>\u3001<code>pdremove</code>\u3001<code>pdshow</code> 4\u4e2a\u53ef\u6267\u884c\u6587\u4ef6</p> </li> <li> <p>\u7f16\u7a0b\u65f6\u521b\u5efa\u4e86\u4e00\u4e2afile\u7c7b\uff0c\u7528\u4e8e\u4e0e\u6587\u672c\u6587\u4ef6\u8fdb\u884c\u4ea4\u4e92\uff0c\u56e0\u6b64\u56db\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u90fd\u9700\u8981\u5f15\u7528\u8be5\u7c7b\u7684\u5934\u6587\u4ef6 </p> </li> </ul> </li> <li> <p>\u3010\u6700\u7b80\u5355\u7c97\u66b4\u7248\u3011</p> </li> </ul> Makefile<pre><code>  CC = g++\n  CFLAG = -std=c++11\n  SRC = .\n  OD = ..\n  FILE_ASSIST = $(SRC)/file.cpp\n\n  # \u76f4\u63a5\u4e24\u4e24\u6587\u4ef6\u4e00\u7ed1\uff0c\u7136\u540e\u76f4\u63a5\u7f16\u8bd1\n  $(OD)/pdadd: $(SRC)/pdadd.cpp $(FILE_ASSIST)\n      $(CC) $(CFLAG) $^ -o $(OD)/pdadd\n\n  $(OD)/pdlist: $(SRC)/pdlist.cpp $(FILE_ASSIST)\n      $(CC) $(CFLAG) $^ -o $(OD)/pdlist\n\n  $(OD)/pdshow: $(SRC)/pdshow.cpp $(FILE_ASSIST)\n      $(CC) $(CFLAG) $^ -o $(OD)/pdshow\n\n  $(OD)/pdremove: $(SRC)/pdremove.cpp $(FILE_ASSIST)\n      $(CC) $(CFLAG) $^ -o $(OD)/pdremove\n\n  clean:\n      rm -f $(OD)/pdadd $(OD)/pdlist $(OD)/pdremove $(OD)/pdshow\n      rm -f $(SRC)/*.o \n</code></pre> <ul> <li>\u3010\u6b63\u5e38\u7f16\u8bd1\u7a0b\u5e8f\u7248\u3011</li> </ul> Makefile<pre><code>  CC = g++\n  CFLAG = -std=c++11\n  SRC = .\n  OD = ..\n  OBJ = $(SRC)/file.o         #   object files of file assist\n  ADDOBJ = $(SRC)/pdadd.o     #   object file for pdadd\n  LISTOBJ = $(SRC)/pdlist.o       #   object file for pdlist\n  REMOVEOBJ = $(SRC)/pdremove.o   #   object file for pdremove\n  SHOWOBJ = $(SRC)/pdshow.o       #   object file for pdshow\n\n  all: $(OD)/pdadd $(OD)/pdlist $(OD)/pdremove $(OD)/pdshow\n\n  # \u901a\u8fc7.o\u6587\u4ef6\u94fe\u63a5\u5f97\u5230\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u907f\u514d\u4e86\u91cd\u590d\u7f16\u8bd1\n  $(OD)/pdadd: $(ADDOBJ) $(OBJ)\n      $(CC) $(CFLAG) -o $(OD)/pdadd $(ADDOBJ) $(OBJ)\n\n  $(OD)/pdlist: $(LISTOBJ) $(OBJ)\n      $(CC) $(CFLAG) -o $(OD)/pdlist $(LISTOBJ) $(OBJ)\n\n  $(OD)/pdremove: $(REMOVEOBJ) $(OBJ)\n      $(CC) $(CFLAG) -o $(OD)/pdremove $(REMOVEOBJ) $(OBJ)\n\n  $(OD)/pdshow: $(SHOWOBJ) $(OBJ)\n      $(CC) $(CFLAG) -o $(OD)/pdshow $(SHOWOBJ) $(OBJ)    \n\n  # \u901a\u8fc7\u4ece.cpp\u6587\u4ef6\u7f16\u8bd1\u5f97\u5230.o\u6587\u4ef6\n  .cpp.o:\n      $(CC) $(CFLAG) -c $&lt; -o $@\n\n  clean:\n      rm -f $(OBJ) $(ADDOBJ) $(LISTOBJ) $(REMOVEOBJ) $(SHOWOBJ) $(OD)/pdadd $(OD)/pdlist $(OD)/pdremove $(OD)/pdshow\n</code></pre> <ul> <li>\u3010\u9ad8\u6548\u7248\u3011</li> </ul> Makefile<pre><code>  CC = g++\n  CFLAG = -std=c++11\n  SRC = .\n  OD = ..\n  OBJ = $(SRC)/file.o         #   object files of file assist\n  TARGETS = pdadd pdlist pdremove pdshow\n  OBJS = $(addsuffix .o, $(TARGETS)) file.o\n\n  all: $(OBJS) $(TARGETS) \n\n  # \u901a\u8fc7static pattern rule\uff0c\u5927\u5927\u7b80\u5316\u4e86\u751f\u6210*.o \u548c *(.exe)\u7684\u8fc7\u7a0b\n  $(TARGETS): %: $(SRC)/%.o $(OBJ)\n      $(CC) $(CFLAG) -o $(OD)/$@ $^\n\n  $(OBJS): %.o: $(SRC)/%.cpp\n      $(CC) $(CFLAG) -c $&lt; -o $(SRC)/$@\n\n  clean:\n      cd $(SRC) &amp;&amp; rm -f $(OBJS)\n      cd $(OD) &amp;&amp; rm -f $(TARGETS)\n</code></pre>"},{"location":"Make/#cmake","title":"CMake","text":"<p>\u76ee\u524d\u7684\u611f\u89c9\u5c31\u50cf\u662f\u4e00\u4e2a\u5e2e\u52a9\u4f60\u751f\u6210Makefile\u7684\u5de5\u5177\uff0c\u901a\u8fc7CMakeLists.txt\u6587\u4ef6\u6765\u6307\u5b9a\u9879\u76ee\u7684\u7f16\u8bd1\u89c4\u5219\uff0c\u7136\u540e\u901a\u8fc7<code>cmake PROJECT_DIR</code>\u6765\u751f\u6210\u5bf9\u5e94\u7684Makefile\u7b49\u5de5\u7a0b\u6587\u4ef6\u5230\u5f53\u524d\u76ee\u5f55\uff0c\u7136\u540e\u901a\u8fc7<code>make --build .</code>\u6765\u5b8c\u6210\u7f16\u8bd1\u94fe\u63a5\u751f\u6210\u3002</p> <ul> <li>Tutorial \uff08\u5b98\u65b9\u6559\u7a0b\uff0c\u6bd4\u8f83\u5168\u9762\uff0c\u4f46\u662f\u4e0d\u662f\u7279\u522b\u597d\u7406\u89e3\u611f\u89c9\uff0c\u76ee\u524d\u8fdb\u5ea6 STEP3\uff09</li> </ul>"},{"location":"Make/#basic","title":"Basic","text":"<p>\u6700\u57fa\u672c\u7684 CMakeLists.txt \u6587\u4ef6\u67b6\u6784\u5982\u4e0b\uff1a</p> <ul> <li> <p><code>cmake_minimum_required(VERSION 3.10)</code></p> <ul> <li>\u6307\u5b9aCMake\u7684\u6700\u4f4e\u7248\u672c</li> </ul> </li> <li> <p><code>project(PROJECT_NAME VERSION 1.0)</code></p> <ul> <li> <p>\u6307\u5b9a\u9879\u76ee\u7684\u540d\u79f0\u4ee5\u53ca\u7248\u672c</p> </li> <li> <p>\u751f\u6210\u7a0b\u5e8f\u5bf9\u7248\u672c\u7684\u5d4c\u5165\uff0c\u53ef\u4ee5\u901a\u8fc7<code>configure_file</code>\u547d\u4ee4\u6765\u5b9e\u73b0 </p> <ul> <li> <p><code>configure_file(config.h.in config.h)</code></p> config.h.in<pre><code>#define PROJECT_NAME \"@PROJECT_NAME@\"\n#define PROJECT_VERSION \"@PROJECT_VERSION@\"\n#define Tutorial_VERSION_MAJOR @Tutorial_VERSION_MAJOR@\n#define Tutorial_VERSION_MINOR @Tutorial_VERSION_MINOR@\n</code></pre> </li> <li> <p>\u8fd9\u6837\u5728\u7f16\u8bd1\u65f6\u4fbf\u4f1a\u5728\u5f53\u524dbuild\u76ee\u5f55\u4e0b<code>config.h</code>\u4e2d\u751f\u6210\u5bf9\u5e94\u7684\u7248\u672c\u4fe1\u606f\u7684\u5982\u4e0a\u5b8f\u5b9a\u4e49</p> </li> <li> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>target_include_directories(PROJECT PUBLIC \"${PROJECT_BINARY_DIR}\")</code>\u5f15\u5165\u8be5\u6587\u4ef6\uff0c\u5e76\u5728\u6e90\u6587\u4ef6\u4e2d\u901a\u8fc7<code>#include \"config.h\"</code>\u6765\u5f15\u7528\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\uff0c\u5b8c\u6210\u7248\u672c\u7684\u5d4c\u5165  </p> </li> </ul> </li> </ul> </li> <li> <p><code>add_executable(EXECUTABLE_NAME SOURCE_FILES)</code> </p> <ul> <li>\u6307\u5b9a\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u79f0\u4ee5\u53ca\u5bf9\u5e94\u7684\u6e90\u6587\u4ef6</li> </ul> </li> </ul>"},{"location":"Make/#_2","title":"\u7f16\u8bd1\u9009\u9879","text":"<ul> <li> <p><code>set(CMAKE_CXX_STANDARD 11)</code></p> <ul> <li> <p>\u6307\u5b9aC++\u7684\u6807\u51c6\u7248\u672c</p> </li> <li> <p><code>set(CMAKE_CXX_STANDARD_REQUIRED ON)</code></p> <ul> <li>\u6307\u5b9a\u662f\u5426\u5f3a\u5236\u4f7f\u7528\u8be5\u6807\u51c6\u7248\u672c </li> </ul> </li> </ul> </li> <li> <p><code>set(CMAKE_CXX_FLAGS \"-Wall -Wextra\")</code></p> <ul> <li>\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 </li> </ul> </li> <li> <p><code>add_library(tutorial_compiler_flags INTERFACE)</code></p> <p><code>target_compile_features(tutorial_compiler_flags INTERFACE cxx_std_11)</code> \u6765\u6307\u5b9a\u7f16\u8bd1\u7279\u6027</p> </li> </ul>"},{"location":"Make/#_3","title":"\u591a\u6587\u4ef6\u7ec4\u7ec7","text":"<ul> <li> <p>\u6dfb\u52a0\u4e00\u4e2alibrary\uff08\u5b50\u76ee\u5f55\uff09</p> <ul> <li> <p><code>add_library(LIBRARY_NAME STATIC/SHARED SOURCE_FILES)</code></p> <ul> <li>\u6307\u5b9a\u751f\u6210\u9759\u6001/\u52a8\u6001\u5e93\u7684\u540d\u79f0\u4ee5\u53ca\u5bf9\u5e94\u7684\u6e90\u6587\u4ef6 (\u8fd9\u4e00\u6b65\u5728\u5b50\u76ee\u5f55\u7684CMakeLists.txt\u4e2d\u5b8c\u6210)</li> </ul> </li> <li> <p><code>target_link_libraries(EXECUTABLE_NAME/LIBRARY_NAME [PUBLIC] LIBRARY_NAME)</code></p> <ul> <li>\u6307\u5b9a\u53ef\u6267\u884c\u6587\u4ef6\u94fe\u63a5\u7684\u5e93\u6587\u4ef6</li> </ul> </li> <li> <p><code>target_include_subdirectory(EXECUTABLE_NAME DIRS)</code></p> <ul> <li>\u5c06\u5bf9\u5e94\u76ee\u5f55\u52a0\u5165\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5934\u6587\u4ef6\u76ee\u5f55 </li> </ul> </li> </ul> </li> <li> <p>\u4f7f\u7528INTERFACE\u63a7\u5236LIBRARY</p> <ul> <li> <p><code>add_library(LIBRARY_NAME INTERFACE)</code></p> <ul> <li>\u6307\u5b9a\u751f\u6210\u4e00\u4e2aINTERFACE\u5e93\uff0c\u4e0d\u5305\u542b\u6e90\u6587\u4ef6\uff0c\u53ea\u5305\u542b\u5934\u6587\u4ef6\u548c\u7f16\u8bd1\u9009\u9879</li> </ul> </li> <li> <p><code>target_include_directories(LIBRARY_NAME INTERFACE DIRS)</code></p> <ul> <li>\u6307\u5b9a\u5e93\u6587\u4ef6\u7684\u5934\u6587\u4ef6\u76ee\u5f55</li> </ul> </li> <li> <p><code>target_link_libraries(EXECUTABLE_NAME LIBRARY_NAME)</code></p> <ul> <li>\u8fd9\u6837\u76f4\u63a5\u6307\u5b9a\u53ef\u6267\u884c\u6587\u4ef6\u94fe\u63a5\u7684\u5e93\u6587\u4ef6\u5373\u53ef\uff0c\u4e0d\u7528\u624b\u52a8\u5904\u7406\u5934\u6587\u4ef6\u76ee\u5f55</li> </ul> </li> </ul> </li> <li> <p>\u5229\u7528\u53d8\u91cf\u8fdb\u884c\u7075\u6d3b\u63a7\u5236</p> <ul> <li> <p><code>option(VARIABLE [\"COMMENT\"] ON/OFF)</code>\u53ef\u4ee5\u4ea7\u751f\u5bf9\u5e94\u7684\u7f13\u5b58\u53d8\u91cf\uff0c\u53ef\u4ee5\u7ed3\u5408<code>if() endif()</code>\u63a7\u5236\u7f16\u8bd1\u8fc7\u7a0b</p> </li> <li> <p>\u6709\u4e2a\u5c0f\u95ee\u9898\u5c31\u662f\u66f4\u65b0\u4e0d\u53ca\u65f6\uff0c\u6709\u65f6\u8981\u5220\u9664\u539f\u6765\u7684 build \u6587\u4ef6\u624d\u80fd\u8d77\u4f5c\u7528 </p> </li> </ul> </li> <li> <p>\u5176\u4ed6\u7f16\u8bd1\u9009\u9879</p> <ul> <li> <p><code>Target_compile_features(TARGET PUBLIC cxx_std_11)</code></p> <ul> <li>\u6307\u5b9a\u7f16\u8bd1\u7279\u6027</li> </ul> </li> <li> <p><code>target_compile_options(TARGET PUBLIC -Wall -Wextra)</code></p> <ul> <li>\u6307\u5b9a\u7f16\u8bd1\u9009\u9879  </li> </ul> </li> <li> <p><code>target_compile_definitions(TARGET PUBLIC \u201cMACRO_NAME\u201d)</code></p> <ul> <li>\u6307\u5b9a\u5b8f\u5b9a\u4e49 </li> </ul> </li> </ul> </li> </ul>"},{"location":"OOP/","title":"OOP","text":""},{"location":"OOP/#_1","title":"\u6574\u7406","text":""},{"location":"OOP/#_2","title":"\u58f0\u660e &amp; \u5b9a\u4e49","text":"<p>\u58f0\u660e\u4e0d\u5206\u914d\u5185\u5b58\uff0c\u5b9a\u4e49\u5206\u914d\u5185\u5b58</p> <p>\u5982 extern\uff08\u9664\u4e86 <code>extern const</code> \u8fd9\u4e2a\u6bd4\u8f83\u7279\u6b8a\uff09, struct, class \u5185\u90fd\u662f\u58f0\u660e</p>"},{"location":"OOP/#varibles-scope-lifetime","title":"Varibles Scope &amp; Lifetime","text":"scope lifetime storage local {} {} stack global global program global static local {} program (init when called) global member(private) class object object static member class program global malloc(new) passed in-out malloc-free(delete) heap"},{"location":"OOP/#tricks","title":"Tricks","text":"<ul> <li> <p>\u7f16\u7a0b\u590d\u6742\u5ea6 \u4e0e \u73b0\u5b9e\u8981\u6c42 \u51b2\u7a81\u65f6\uff0c\u4e00\u822c\u9009\u62e9\u670d\u4ece\u73b0\u5b9e\u8981\u6c42\u6bd4\u8f83\u201c\u987a\u201d</p> </li> <li> <p><code>assert</code> \u7528\u4e8e\u8c03\u8bd5\uff0c\u4e0d\u4f1a\u5728release\u7248\u672c\u4e2d\u6267\u884c\uff0c\u5176\u672c\u8d28\u662f\u4e00\u4e2a\u5b8f\uff0c\u5982\u679c\u6761\u4ef6\u4e3a\u5047\uff0c\u5219\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u5e76\u7ec8\u6b62\u7a0b\u5e8f\uff08<code>#define NDEBUG</code> \u53ef\u4ee5\u5173\u95ed\uff09</p> </li> <li> <p>\u6ca1\u6709\u6210\u5458\u53d8\u91cf\u7684\u7c7b \u7684 size \u4e3a1\uff0c\u7528\u6765\u533a\u5206\uff0c\u4f46\u662f\u5728\u5176\u5b50\u7c7b\u4e2d\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u533a\u5206\uff0c\u5373\u4e3a0</p> </li> <li> <p>\u8ba1\u7b97\u7c7b\u7684\u5927\u5c0f\u65f6\u8981\u6c42 \u5404\u6210\u5458\u53d8\u91cf\u5bf9\u9f50\uff0c\u5373\u6bcf\u4e2a\u53d8\u91cf\u7684\u5730\u5740\u90fd\u662f\u5176\u5927\u5c0f\u7684\u6574\u6570\u500d\uff0c\u5e76\u4e14\u6309\u7167\u58f0\u660e\u7684\u987a\u5e8f\u6392\u5217\u3002</p> <p>\u5982\u679c\u6709\u865a\u51fd\u6570\uff0c\u4f1a\u591a\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u865a\u51fd\u6570\u8868\uff0c\u5927\u5c0f\u4e3a8\uff0864\u4f4d\u7cfb\u7edf\uff09</p> <p>\u6b64\u5916\uff0c\u8fd8\u8981\u6c42\u7c7b\u7684\u5927\u5c0f\u662f\u6700\u5927\u6210\u5458\u53d8\u91cf\u7684\u6574\u6570\u500d\uff0c\u56e0\u6b64\u6700\u540e\u53ef\u80fd\u8fd8\u4f1a\u6709\u4e00\u4e9b\u586b\u5145\u5b57\u8282\u3002</p> <pre><code>class A {\n    char a; // 1 byte, assume start at 0\n    int b;  // 4 bytes, but need to start at 4, so 3 bytes padding\n    char c; // 1 byte, start at 8, but 3 bytes padding\n};\n\n// sizeof(A) = 12\n</code></pre> <p>Info</p> <p>\u6ce8\u610f\u8fd9\u91cc\u7684\u5404\u6210\u5458\u53d8\u91cf\u6307\u7684\u90fd\u662f\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff0c\u5982\u679c\u7c7b\u5185\u6709\u5176\u4ed6\u5bf9\u8c61\uff0c\u4e5f\u662f\u5c06\u5176\u62c6\u5f00\u8ba1\u7b97</p> <p>\u6bd4\u5982\u7ecf\u8fc7\u5b9e\u9a8c\u53ef\u4ee5\u5f97\u5230 <code>sizeof(string) = 32</code>\uff0c\u5e76\u4e14\u5176\u5185\u90e8\u6709\u4e00\u4e2a\u6307\u9488\uff0c\u5bfc\u81f4\u5bf9\u9f50\u5927\u5c0f\u4e3a8</p> </li> <li> <p>\u51fd\u6570\u4f20\u5165 &amp; \u4f20\u51fa</p> <p></p> </li> </ul>"},{"location":"OOP/#buzzwords","title":"Buzzwords","text":"<ul> <li> <p>Encapsulation: \u5c01\u88c5</p> </li> <li> <p>Inheritance: \u7ee7\u627f</p> </li> <li> <p>Polymorphism: \u591a\u6001\uff0c\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u6709\u591a\u79cd\u5f62\u6001\uff0c\u4e00\u4e2a\u57fa\u7c7b\u6307\u9488\u53ef\u4ee5\u5448\u73b0\u4e0d\u540c\u7684\u6d3e\u751f\u7c7b\u5bf9\u8c61</p> \u591a\u6001 <ul> <li> <p>\u9759\u6001\u591a\u6001\uff1a\u51fd\u6570\uff08\u8fd0\u7b97\u6cd5\uff09\u91cd\u8f7d</p> </li> <li> <p>\u52a8\u6001\u591a\u6001\uff1a\u865a\u51fd\u6570\uff0c\u8986\u5199</p> </li> </ul> </li> <li> <p>Overriding: \u8986\u76d6\uff0c\u5373\u5b50\u7c7b\u5b8c\u5168\u8986\u76d6\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u51fd\u6570\u540d\u3001\u53c2\u6570\u3001\u8fd4\u56de\u503c</p> </li> <li> <p>Overloading: \u91cd\u8f7d\uff0c\u5373\u51fd\u6570\u540d\u76f8\u540c\uff0c\u53c2\u6570\u4e0d\u540c</p> </li> <li> <p>Interface: \u63a5\u53e3</p> </li> <li> <p>Cohesion: \u5167\u805a, \u4e00\u4e2a\u7c7b\u5185\u7684\u529f\u80fd\u9ad8\u5ea6\u76f8\u5173</p> </li> <li> <p>Coupling: \u8026\u5408\uff0c \u4e0d\u540c\u7c7b\u4e4b\u95f4\u7684\u5173\u8054\u7a0b\u5ea6</p> </li> <li> <p>Collection classes: \u5bb9\u5668</p> </li> <li> <p>Template: \u6a21\u677f</p> </li> <li> <p>Responsibility-driven design: \u8d23\u4efb\u9a71\u52a8\u8bbe\u8ba1</p> </li> <li> <p>Generic: \u6cdb\u578b</p> </li> <li> <p>Field: \u5b57\u6bb5</p> </li> <li> <p>Parameter: \u51fd\u6570\u53c2\u6570</p> </li> </ul>"},{"location":"OOP/#stl","title":"STL","text":"<p>Standard Template Library</p> <ul> <li> <p>\u5de5\u7a0b\u4e2d\u614e\u7528 <code>&lt;bits/stdc++.h&gt;</code> \u5934\u6587\u4ef6\uff0c\u964d\u4f4e\u7f16\u8bd1\u538b\u529b</p> </li> <li> <p>Containers</p> <ul> <li> <p>vector</p> <ul> <li> <p>\u5185\u90e8\u5b9e\u73b0\uff1a</p> <ul> <li> <p>\u52a8\u6001\u5185\u5b58\u5206\u914d\uff0c\u5f53\u5bb9\u91cf\u4e0d\u8db3\u65f6\uff0c\u4f1a\u5c06\u5bb9\u91cf\u6269\u5927\u4e3a\u539f\u6765\u7684\u4e24\u500d\uff0c\u7136\u540e\u5c06\u539f\u6765\u7684\u5143\u7d20\u590d\u5236\u5230\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\u4e2d\uff0c\u91ca\u653e\u539f\u6765\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p> </li> <li> <p>\u63d2\u5165\u5747\u644a\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)</p> </li> <li> <p>\u5220\u9664\u5143\u7d20\u65f6\uff0c\u4f1a\u5c06\u540e\u9762\u7684\u5143\u7d20\u5411\u524d\u79fb\u52a8\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n) </p> </li> </ul> </li> <li> <p>\u521d\u59cb\u5316\u6784\u9020</p> <ul> <li> <p><code>vector&lt;int&gt;p(capacity (,k) )</code> (capacity \u4e2a k\uff0c\u9ed8\u8ba4\u4e3a0) </p> </li> <li> <p><code>vector&lt;int&gt;p{1,2,3}</code> (\u521d\u59cb\u5316\u5217\u8868\uff0ccapacity \u4e3a 3)</p> </li> </ul> </li> <li> <p>vector [] \u201c\u53ef\u4ee5\u201d\u8d8a\u754c\u8bbf\u95ee\uff0c\uff08\u56e0\u4e3a\u5b9e\u9645\u4e0a\u7684\u5bb9\u91cf\u53ef\u80fd\u5927\u4e8e\u5b83\u663e\u793a\u7684capacity\uff09\uff0c.at() \u4f1a\u629b\u51fa\u5f02\u5e38</p> <p>\uff08\u4e71\u7a7f\u9a6c\u8def\u8fdd\u6cd5\uff0c\u4f46\u662f\u4e00\u822c\u6ca1\u4eba\u4f1a\u6765\u7ba1\u4f60\u3002\u6ca1\u649e\u6b7b\u7b97\u5e78\u8fd0\uff0c\u649e\u6b7b\u6d3b\u8be5\u3002\uff09 </p> </li> </ul> </li> <li> <p>deque (double ended queue) </p> <ul> <li> <p>\u5185\u90e8\u5b9e\u73b0\uff1a </p> <ul> <li> <p>\u4f7f\u7528\u7f13\u5b58\u533a\u5757\u5b58\u53d6\u5143\u7d20\uff0c\u4f7f\u7528 map \u5efa\u7acb\u7f13\u5b58\u533a\u5757\u7684\u7d22\u5f15\uff0c\u5f53\u7f13\u5b58\u533a\u5757\u4e0d\u8db3\u65f6\uff0c\u4f1a\u91cd\u65b0\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u3002</p> </li> <li> <p>\u4e24\u7aef\u63d2\u5165\u548c\u5220\u9664\u5747\u644a\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\uff0c\u4f46\u5b9e\u73b0\u4e0a\u6bd4 vector \u590d\u6742</p> </li> <li> <p>\u7f13\u5b58\u533a\u5185\u90e8\u5b9e\u73b0\u4e0e vector \u7c7b\u4f3c </p> </li> </ul> </li> </ul> </li> <li> <p>list  (doubly linked list)</p> <ul> <li> <p><code>list.begin() != list.end()</code> (\u4e0d\u63a8\u8350\u4f7f\u7528 &lt; \uff0c\u53ef\u80fd\u4f1a\u51fa\u9519)</p> </li> <li> <p><code>copy(L, R, vector&lt;&gt;it)</code> \u94fe\u8868\u5c55\u5e73\u4e3a vector </p> </li> </ul> </li> <li> <p>forward_list</p> </li> <li> <p>*string  </p> </li> <li> <p>set</p> </li> <li> <p>map    </p> </li> </ul> </li> <li> <p>Algorithms</p> </li> <li> <p>Iterators</p> <p></p> <p></p> </li> </ul>"},{"location":"OOP/#container","title":"Container","text":"<p>\u5bb9\u5668\uff0ccollection of objects that can store an arbitrary number of other objects.</p> <ul> <li> <p>\u901a\u5e38\u7528 size \u6765\u8868\u793a\u5176\u4e2d object \u7684\u6570\u91cf</p> </li> <li> <p>\u901a\u5e38\u7528 capacity \u6765\u8868\u793a\u76ee\u524d\u5185\u5b58\u5206\u914d\u7684\u5bb9\u91cf</p> </li> </ul>"},{"location":"OOP/#class","title":"Class","text":"<p>\u7c7b\uff0c\u4e00\u79cd\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u5c01\u88c5\u6570\u636e\u548c\u65b9\u6cd5</p> <p>\u5173\u4e8e\u5185\u90e8\u6570\u636e\u5b58\u50a8\uff0c\u5177\u6709\u5730\u5740\u5bf9\u9f50\u6027\uff0c\u5373\u4e00\u4e2a\u77ed\u53d8\u91cf\u53ea\u4f1a\u5728\u4e00\u884c\u5185\u8bfb\u51fa\uff0c\u4e0d\u4f1a\u8de8\u884c\u8bfb\u53d6</p>"},{"location":"OOP/#_3","title":"\u6784\u9020","text":"<ul> <li> <p>\u5168\u5c40\u53d8\u91cf\u6784\u9020\u5728main\u51fd\u6570\u4e4b\u5916\uff0cmain\u51fd\u6570\u4e4b\u524d\u6784\u9020\uff0cmain\u51fd\u6570\u4e4b\u540e\u6790\u6784\uff0c\u6309\u4e66\u5199\u987a\u5e8f\u6784\u9020\uff0c\u53cd\u5e8f\u6790\u6784</p> </li> <li> <p>\u7c7b\u5185\u6784\u9020\uff08\u4e8b\u5b9e\u4e0a\u53ef\u4ee5\u5c06\u57fa\u7c7b\u8ba4\u4e3a\u662f\u4e00\u4e2a\u58f0\u660e\u5728\u6700\u524d\u9762\u7684\u9690\u5f0f\u6210\u5458\u53d8\u91cf\uff09</p> <ol> <li> <p>\u8c03\u7528\u7236\u7c7b\u6784\u9020\u51fd\u6570\uff08\u68c0\u67e5\u8c03\u7528\u7684\u6784\u9020\u51fd\u6570\u7684\u521d\u59cb\u5316\u5217\u8868\u5185\u662f\u5426\u6709\u76f8\u5e94\u4ee3\u7406\u6784\u9020\uff0c\u82e5\u6ca1\u6709\u5219\u8c03\u7528\u9ed8\u8ba4\u6784\u9020\uff09</p> </li> <li> <p>\u6309\u987a\u5e8f\u8c03\u7528\u6210\u5458\u6784\u9020\u51fd\u6570\uff08\u68c0\u67e5\u8c03\u7528\u7684\u6784\u9020\u51fd\u6570\u7684\u521d\u59cb\u5316\u5217\u8868\u5185\u662f\u5426\u6709\u76f8\u5e94\u4ee3\u7406\u6784\u9020\uff0c\u82e5\u6ca1\u6709\u5219\u8c03\u7528\u9ed8\u8ba4\u6784\u9020\uff09\uff0c\u5176\u4e2d\u8fd9\u91cc\u7684\u987a\u5e8f\u662f\u6309\u7167\u58f0\u660e\u7684\u987a\u5e8f\uff0c\u800c\u4e0d\u662f\u521d\u59cb\u5316\u5217\u8868\u7684\u987a\u5e8f</p> </li> <li> <p>\u8c03\u7528\u81ea\u8eab\u6784\u9020\u51fd\u6570\u4ee5\u53ca\u4e4b\u540e\u7684\u6784\u9020\u51fd\u6570\u4f53   </p> </li> </ol> </li> <li> <p>\u521d\u59cb\u5316\u53d8\u91cf\u65f6 <code>= x, (x)</code> \u5728\u7f16\u8bd1\u5668\u4f18\u5316\u4e0b\u90fd\u4f1a\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u5e76\u4e14\u6839\u636e\u9898\u76ee\u6765\u770b\u8ba4\u4e3a\u4ed6\u4eec\u5b8c\u5168\u76f8\u540c\uff0c\u4f46\u662f\u672c\u8d28\u4e0a\u5e94\u8be5\u662f\u4e0d\u540c\u7684\uff1f</p> \u521d\u59cb\u5316 <p>\u6709\u7b49\u53f7\u7684\u79f0\u4e3a\u8d4b\u503c\u521d\u59cb\u5316\uff0c\u6ca1\u6709\u7b49\u53f7\u7684\u79f0\u4e3a\u76f4\u63a5\u521d\u59cb\u5316</p> <ul> <li> <p><code>= x</code> \u672c\u5e94\u5148\u8c03\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u4e34\u65f6\u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u56e0\u6b64\u4e0d\u80fd\u7528\u4e8e\u4e0b\u9762\u63d0\u5230\u7684 <code>explicit</code> \uff1b\u4f46\u662f\u6b63\u5e38\u65f6\u7f16\u8bd1\u5668\u4f1a\u4f18\u5316\uff0c\u76f4\u63a5\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570</p> </li> <li> <p><code>(x)</code> \u624d\u662f\u771f\u6b63\u663e\u5f0f\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u5373 <code>T(x)</code></p> </li> </ul> </li> <li> <p>Delegating Constructor\uff08\u4ee3\u7406\u6784\u9020\uff09</p> <ul> <li> <p>\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u8c03\u7528\u53e6\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u51cf\u5c11\u4ee3\u7801\u91cd\u590d</p> </li> <li> <p><code>A(int x, int y): A(x) {}</code></p> </li> </ul> </li> <li> <p>Copy Constructor</p> <p><code>T::T (const T&amp;)</code></p> <p>\u590d\u5236\u4e00\u4efd</p> <ul> <li> <p>\u51fd\u6570\u8c03\u7528\u7684\u8d4b\u503c</p> <ul> <li> <p>\u7528\u51fd\u6570\u672c\u5730\u53d8\u91cf\u8fd4\u56de\u8d4b\u503c\u53ea\u4f1a\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u4e00\u6b21</p> </li> <li> <p>\u76f4\u63a5\u8fd4\u56de\u6784\u9020\u4e0d\u9700\u8981\u8c03\u7528\u62f7\u8d1d\u6784\u9020\uff08\u5c06\u76f8\u5e94\u5185\u5b58\u76f4\u63a5\u653e\u5728\u51fd\u6570\u4f53\u4e0a\u65b9\uff09</p> </li> </ul> <p></p> </li> <li> <p>member-wise copy: \u62f7\u8d1d\u6307\u9488\u5c0f\u5fc3\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5f71\u54cd\u6e90\u5bf9\u8c61</p> </li> </ul> </li> <li> <p>Move Constructor</p> <p><code>T::T (const T&amp;&amp;)</code></p> <p>\u4f20\u9012\u6307\u9488\uff0c\u9500\u6bc1\u539f\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u590d\u5236\u6240\u6709\u7684\u5b9e\u9645\u6570\u636e</p> <ul> <li>\u4f7f\u7528 <code>std::move()</code> \u8f6c\u4e3a\u53f3\u503c</li> </ul> </li> </ul> <p>Note</p> <ul> <li> <p>\u5168\u5c40\u53d8\u91cf\u5904\u5728\u591a\u6587\u4ef6\u65f6\uff0c\u6784\u9020\u987a\u5e8f\u662f\u4e0d\u786e\u5b9a\u7684 </p> </li> <li> <p>\u8fdb\u5165\u51fd\u6570\u65f6\uff0c\u6240\u6709\u672c\u5730\u53d8\u91cf\u6240\u5360\u636e\u7a7a\u95f4\u5df2\u7ecf\u5206\u914d\u5b8c\u6bd5\uff0c\u5e76\u4e14\u5b9e\u53c2\u91cf\u4f1a\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff08const Tp &amp;x\uff09\u6765\u4f20\u503c</p> </li> <li> <p>\u6784\u9020\u5217\u8868\u53ea\u80fd\u521d\u59cb\u5316 non-static \u7684\u6210\u5458\uff0c\u5305\u62ec\u53ef\u4ee5\u521d\u59cb\u5316const\u5e38\u91cf</p> </li> </ul>"},{"location":"OOP/#_4","title":"\u6790\u6784","text":"<ul> <li> <p>\u7f16\u8bd1\u5668\u63a7\u5236\uff0c\u5f53\u53d8\u91cf\u7ed3\u675f\u751f\u547d\u5468\u671f\u65f6\u81ea\u52a8\u8c03\u7528</p> </li> <li> <p>\u540c\u7b49\u6761\u4ef6\u4e0b\uff0c\u6790\u6784\u51fd\u6570\u7684\u8c03\u7528\u987a\u5e8f\u4e0e\u6784\u9020\u51fd\u6570\u7684\u8c03\u7528\u987a\u5e8f\u76f8\u53cd\uff08\u6808\u4e00\u6837\uff0c\u907f\u514d\u4f9d\u8d56\u5173\u7cfb\u5f71\u54cd\uff09 </p> </li> </ul>"},{"location":"OOP/#_5","title":"\u6743\u9650","text":"<ul> <li> <p>private</p> <ul> <li> <p>\u4ec5\u5728\u7c7b\u5185\u90e8\u53ef\u89c1</p> </li> <li> <p>\u8fb9\u754c\u662f\u7c7b, \u4e0d\u662f\u5bf9\u8c61\uff08\u7c7b\u5185\u53ef\u4ee5\u8bbf\u95ee\u5176\u4ed6\u540c\u7c7b\u5bf9\u8c61\u7684\u79c1\u6709\u6210\u5458\uff09\uff0c\u5e76\u4e14\u7531\u7f16\u8bd1\u5668\u63a7\u5236\uff08\u53ef\u4ee5\u7ed5\u8fc7\uff0c\u5982\u5229\u7528\u6307\u9488\u4e3a\u6240\u6b32\u4e3a\uff09 </p> </li> </ul> </li> <li> <p>public</p> <ul> <li>\u90fd\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4e0e structure \u7c7b\u4f3c </li> </ul> </li> <li> <p>protected</p> <ul> <li>\u4e0eprivate\u7684\u533a\u522b\u662f\u5b50\u7c7b\u53ef\u89c1\uff08\u7559\u7ed9\u5b50\u7c7b\u7684\u9057\u4ea7\uff09 </li> </ul> </li> <li> <p>default</p> <ul> <li>class \u9ed8\u8ba4\u662f private \u7684\uff0cstruct \u9ed8\u8ba4\u662f public \u7684 </li> </ul> </li> <li> <p>friend</p> <ul> <li> <p>\u6743\u9650\u6388\u6743\uff0c\u53ef\u4ee5\u8bbf\u95ee\u8be5\u7c7b\u7684\u79c1\u6709\u6210\u5458 \u548c \u4fdd\u62a4\u6210\u5458</p> </li> <li> <p>\u53cb\u5143\u4e0d\u662f\u6210\u5458\u51fd\u6570</p> </li> <li> <p>\u53cb\u5143\u7684\u53cb\u5143\u4e0d\u4e00\u5b9a\u662f\u53cb\u5143\uff0c\u5373\u53cb\u5143\u5173\u7cfb\u4e0d\u53ef\u7ee7\u627f</p> </li> </ul> </li> </ul>"},{"location":"OOP/#overload","title":"Overload \u91cd\u8f7d","text":"<ul> <li> <p>\u51fd\u6570\u540d\u76f8\u540c\uff0c\u53c2\u6570\u4e0d\u540c</p> </li> <li> <p>\u4e0d\u80fd\u4f7f\u7528 auto-cast, \u4f1a\u9020\u6210\u4e8c\u4e49\u6027</p> </li> </ul>"},{"location":"OOP/#embedded-objects","title":"Embedded Objects","text":"<p>A class has other classes</p> <ul> <li> <p>Storage\uff1a\u6309\u7167\u4e66\u5199\u987a\u5e8f\u5728\u5185\u5b58\u4e2d\u5b58\u50a8 </p> </li> <li> <p>Constructor &amp; Deconstructor\uff1a\u540c\u6837\u662f\u987a\u5e8f\u6784\u9020\uff0c\u9006\u5e8f\u6790\u6784</p> </li> <li> <p>Fully v/s By Reference</p> <ul> <li> <p>logical relationship</p> </li> <li> <p>size of is not known</p> </li> <li> <p>resource is to be allocated / connected at run-time</p> </li> <li> <p>Only C++ can use fully </p> </li> </ul> </li> </ul>"},{"location":"OOP/#inheritance","title":"Inheritance","text":"<p>\u7ee7\u627f\u6027\uff0c\u9762\u5411\u5bf9\u8c61\u7684\u91cd\u8981\u601d\u60f3</p> <ul> <li> <p>Advantage</p> <ul> <li> <p>Avoid code duplication</p> </li> <li> <p>Code reuse</p> </li> <li> <p>Easier maintenance: \u4fee\u6539\u6a21\u5757\u5bf9\u5176\u4ed6\u6a21\u5757\u5f71\u54cd\u5c0f</p> </li> <li> <p>Extendibility\uff1a \u6613\u4e8e\u6dfb\u52a0\u65b0\u529f\u80fd</p> </li> </ul> </li> <li> <p>\u53ef\u7ee7\u627f\u7684\u6210\u5458</p> <p>\u672c\u8d28\u4e0a\u5185\u5b58\u91cc\u7236\u7c7b\u5bf9\u8c61\u4f1a\u653e\u5728\u5b50\u7c7b\u5bf9\u8c61\u7684\u524d\u9762\uff08\u53ef\u4ee5\u5c06\u5b50\u7c7b\u6307\u9488\u8d4b\u7ed9\u7236\u7c7b\u6307\u9488\uff09</p> <ul> <li> <p>public / protected member data</p> </li> <li> <p>public / protected member functions</p> </li> <li> <p>static \u4ecd\u7136\u4e3aclass-wide\uff0c\u4f9d\u8d56\u5b83\u7684\u5c5e\u6027 </p> </li> </ul> </li> <li> <p>Constructor &amp; Deconstructor</p> <ul> <li> <p>\u6784\u9020\u5148\u7236\u7c7b\u540e\u5b50\u7c7b</p> </li> <li> <p>\u6790\u6784\u540c\u6837\u53cd\u5411 </p> </li> </ul> </li> <li> <p>Name Hiding</p> <ul> <li> <p>\u4e00\u65e6\u51fa\u73b0overload\uff0c\u5219\u6240\u6709\u540c\u540d\u7684\u51fd\u6570\u90fd\u5f97\u8986\u5199\uff0c\u5426\u5219\u7236\u7c7b\u7684\u4f1a\u88ab\u9690\u85cf</p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528 <code>using base::f;</code> \u628a\u5b83\u627e\u51fa\u6765</p> </li> </ul> </li> <li> <p>Inheritance Access Protection</p> <ul> <li> <p>public / protected / private: \u5b9a\u4e49\u7ee7\u627f\u7684\u7236\u7c7b\u6210\u5458\u7684\u8bbf\u95ee\u6743\u9650</p> </li> <li> <p>private: default(\u5e76\u4e0d\u662fOOP\u8bed\u610f)</p> </li> <li> <p>\u540c\u6837\u53ef\u4ee5\u4f7f\u7528 <code>using</code> \u6539\u53d8\u8bbf\u95ee\u6743\u9650\uff0c\u524d\u63d0\u662f\u8981\u83b7\u5f97\u76f8\u5e94\u6210\u5458\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5373\u53ef\u4ee5\u5c06 <code>private/protected</code> \u7ee7\u627f\u5173\u7cfb\u7684\u90e8\u5206\u6210\u5458\u6539\u4e3a <code>public</code></p> </li> </ul> </li> </ul>"},{"location":"OOP/#polymorphism","title":"Polymorphism","text":"<p>\u591a\u6001\u6027\uff0c\u9759\u6001\u58f0\u660e &amp; \u52a8\u6001\u7c7b\u578b</p> <ul> <li> <p>Subtyping</p> <p>\u5b50\u7c7b\u5bf9\u8c61\u53ef\u4ee5\u8d4b\u7ed9\u7236\u7c7b\u5bf9\u8c61, \u56e0\u4e3a\u6240\u6709\u7236\u7c7b\u5177\u6709\u7684\u6d3e\u751f\u7c7b\u90fd\u6709\uff1b\u540c\u65f6\u53ef\u4ee5\u901a\u8fc7\u591a\u6001\u673a\u5236\uff08\u5982\u865a\u51fd\u6570\u7b49\uff09\uff0c\u4f7f\u5f97\u7236\u7c7b\u6307\u9488\u53ef\u4ee5\u8c03\u7528\u5b50\u7c7b\u7279\u6709\u529f\u80fd</p> <p> </p> </li> <li> <p>Up-casting</p> <p>\u5411\u4e0a\u9020\u578b\uff0c\u5b50\u7c7b\u5bf9\u8c61\u8d4b\u7ed9\u7236\u7c7b\u5bf9\u8c61\uff08\u6307\u9488 / \u5f15\u7528\uff09\uff0c\u4e0d\u4f1a\u4e22\u5931\u5b50\u7c7b\u7684\u4fe1\u606f</p> <p>\u4f46\u662f\u53ea\u80fd\u8c03\u7528\u7236\u7c7b\u7684\u6210\u5458\uff0c\u4e0d\u80fd\u8c03\u7528\u5b50\u7c7b\u7684\u6210\u5458</p> </li> <li> <p>virtual</p> <ul> <li> <p>\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u8ba9\u7f16\u8bd1\u5668\u77e5\u9053\u8be5\u51fd\u6570\u5c06\u4f1a\u88ab\u5b50\u7c7b\u8986\u5199\uff0c\u4ece\u800c\u53ef\u4ee5\u5728Up-casting\u65f6\u7528\u7236\u7c7b\u6307\u9488/\u5f15\u7528\u8c03\u7528\u5b50\u7c7b\u51fd\u6570</p> </li> <li> <p>\u672c\u8d28\u4e0a\u662f\u52a8\u6001\u53d8\u91cf\u7684\u7ed1\u5b9a\uff08dynamic binding\uff09\uff0c\u5373\u5728\u8fd0\u884c\u65f6\u6839\u636edynamic type\u624d\u786e\u5b9a\u8c03\u7528\u7684\u51fd\u6570\uff0c\u800c\u975e\u7f16\u8bd1\u65f6\u7684\u9759\u6001\u7ed1\u5b9a\u3002\u56e0\u6b64\u901f\u5ea6\u4f1a\u76f8\u5bf9\u6162\u4e00\u70b9\uff0c\u9664\u975e\u7f16\u8bd1\u5668\u53d1\u73b0\u662f\u9759\u6001\u7ed1\u5b9a\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u9759\u6001\u7ed1\u5b9a</p> <p>\u6709\u4e2a\u7279\u6b8a\u7684\u60c5\u51b5\u662f\u9ed8\u8ba4\u53c2\u6570\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u53c2\u6570\u662f\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\u7684\uff0c\u56e0\u6b64\u4f1a\u4f7f\u7528\u9759\u6001\u7ed1\u5b9a\uff0c\u4e5f\u5c31\u662f\u8c03\u7528\u5f53\u524d\u6307\u9488\u7c7b\u578b\u7684\u9ed8\u8ba4\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u52a8\u6001\u7ed1\u5b9a\u7684\u5b50\u7c7b\u7684\u9ed8\u8ba4\u53c2\u6570</p> </li> <li> <p>\u7f16\u8bd1\u5668\u6267\u884c\u9759\u6001\u68c0\u67e5\uff0c\u56e0\u6b64\u7236\u7c7b\u5185\u7684\u63a5\u53e3\u4e0d\u53ef\u7701\u7565\uff08\u53ea\u8981\u7236\u7c7b\u5b9a\u4e49\u4e3a\u865a\u51fd\u6570\uff0c\u5b50\u7c7b\u4e2d\u8be5\u51fd\u6570\u5c31\u81ea\u52a8\u6210\u4e3a\u865a\u51fd\u6570\uff09</p> </li> <li> <p>\u6784\u9020\u51fd\u6570\u548c\u9759\u6001\u51fd\u6570\uff08\u6ca1\u6709\u7c7b\u7684vptr\u7b49\uff09\u4e0d\u80fd\u662f\u865a\u51fd\u6570\uff0c\u4f46\u662f\u6790\u6784\u51fd\u6570\u53ef\u4ee5\u662f\u865a\u51fd\u6570</p> <p>\u7c7b\u4f3c\u7684\uff0c\u4e00\u822c\u865a\u51fd\u6570\u65e0\u6cd5\u5185\u8054\uff0c\u56e0\u4e3a\u9700\u8981\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a\u8c03\u7528\u7684\u51fd\u6570\uff1b\u9664\u975e\u7f16\u8bd1\u5668\u53d1\u73b0\u662f\u9759\u6001\u7ed1\u5b9a </p> </li> <li> <p>\u5185\u5b58\u5b58\u50a8\uff1a</p> <p>\u5934\u90e8\u5b58\u4e00\u4e2avptr\u6307\u9488\uff0c\u4e14\u4e3a\u5b9e\u4f8b\u6784\u9020\u65f6\u5b58\u5165\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <ul> <li> <p>vptr\uff1a\u865a\u51fd\u6570\u8868\u6307\u9488\uff0c\u6307\u5411\u865a\u51fd\u6570\u8868\uff0c\u5b58\u50a8\u865a\u51fd\u6570\u7684\u5730\u5740</p> </li> <li> <p>vtable\uff1a\u865a\u51fd\u6570\u8868\uff0c\u5b58\u50a8\u865a\u51fd\u6570\u7684\u5730\u5740</p> </li> <li> <p>vfunc\uff1a\u865a\u51fd\u6570\uff0c\u5b58\u50a8\u51fd\u6570\u7684\u5730\u5740</p> </li> </ul> <pre><code>class A {\n    virtual void f();\n    virtual void g();\n};\nclass B : public A {\n    virtual void f();\n    virtual void h();\n};\n\nint main() {\n    A *p = new B();\n    long long **vptr = (long long **)p;\n    long long *vtable = *vptr;\n    void (*f)() = (void (*)())vtable[0];    //B::f\n    void (*g)() = (void (*)())vtable[1];    //A::g\n    void (*h)() = (void (*)())vtable[2];    //B::h\n\n    // \u5173\u4e8e\u51fd\u6570\u8c03\u7528\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u9488\u8c03\u7528\n    // \u4f46\u662f\u6ce8\u610f\u5230\u8fd9\u6837\u8c03\u7528\u662f\u6ca1\u6709\u4f20\u5165this\u6307\u9488\u7684\uff0c\u56e0\u6b64\u5728\u51fd\u6570\u5185\u65e0\u6cd5\u8bbf\u95ee\u6210\u5458\u53d8\u91cf\uff0c\u4f46\u662f\u51fd\u6570\u8c03\u7528\u672c\u8d28\u4e0a\u662f\u6307\u9488\u8fd8\u662f\u53ef\u4ee5\u7684\n    //(*f)();\n    //f();\n}\n</code></pre> </li> <li> <p>\u7eaf\u865a\u51fd\u6570\uff1a</p> <ul> <li> <p><code>virtual Type F() = 0</code></p> </li> <li> <p>\u53ea\u8981\u5b58\u5728\u4e00\u4e2a\u7eaf\u865a\u51fd\u6570\uff0c\u6574\u4e2a\u7c7b\u6210\u4e3a\u62bd\u8c61\u7c7b\uff0c\u4e0d\u80fd\u5b9a\u4e49\u5bf9\u8c61\uff1b\u5176\u7ee7\u627f\u7c7b\u5fc5\u987b\u5b9e\u73b0\u6240\u6709\u7eaf\u865a\u51fd\u6570\uff0c\u5426\u5219\u4e5f\u6210\u4e3a\u62bd\u8c61\u7c7b</p> </li> </ul> </li> </ul> </li> <li> <p>\u591a\u7ee7\u627f</p> <ul> <li>virtual inheritance \u5904\u7406\u83f1\u5f62\u7ee7\u627f\u5173\u7cfb\uff0c\u4e0d\u5c06\u7236\u7c7b\u653e\u5230\u5b50\u7c7b\u4e2d\uff0c\u800c\u5229\u7528\u6307\u9488\u7d22\u5f15</li> </ul> </li> </ul>"},{"location":"OOP/#overloading-operator","title":"Overloading Operator","text":"<ul> <li> <p>Can</p> <p></p> </li> <li> <p>Can't</p> <p></p> </li> <li> <p>Don't</p> <p><code>&amp;&amp;</code> <code>||</code> <code>,</code></p> </li> </ul>"},{"location":"OOP/#prototypes","title":"ProtoTypes","text":"<ul> <li> <p>Tips</p> <p></p> </li> <li> <p>Member operator</p> <p>\u6ce8\u610f\uff0c\u8c03\u7528\u65f6\u5de6\u8fb9\u5e94\u8be5\u4e3a\u5bf9\u8c61\uff08\u5de6\u7ed3\u5408\uff09</p> <ul> <li> <p>binary</p> <ul> <li><code>T operator+(const T &amp;x)</code></li> </ul> </li> <li> <p>unary</p> <ul> <li><code>T operator-()</code></li> </ul> </li> </ul> </li> <li> <p>Global operator</p> <p>\u4e3a\u4e86\u8bbf\u95ee\u79c1\u6709\u53d8\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528 public / friend</p> <ul> <li> <p>binary</p> <ul> <li><code>T operator+(const T &amp;x, const T &amp;y)</code></li> </ul> </li> <li> <p>unary</p> <ul> <li><code>T operator-(const T &amp;x)</code></li> </ul> </li> </ul> </li> <li> <p>Some</p> <p></p> <p></p> <p>(Relational, just need define <code>==</code> &amp; <code>&lt;</code>)</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p>Warning</p> <p>\u8fd9\u91cc\u68c0\u67e5\u81ea\u6211\u8d4b\u503c\u95ee\u9898\u662f\u8003\u8651\u5230 \u8d4b\u503c\u65f6\u5f80\u5f80\u5148\u5c06\u539f\u672c\u5b58\u50a8\u7684\u6570\u636e\u91ca\u653e\uff0c\u82e5\u4e0d\u68c0\u67e5\u81ea\u6211\u8d4b\u503c\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931</p> <p></p> </li> </ul>"},{"location":"OOP/#argument-passing","title":"Argument passing","text":"<ul> <li> <p>read-only argument: <code>const T &amp;x</code></p> </li> <li> <p>const member function(not change <code>this</code>): <code>const T</code></p> <p>Tip</p> <p>\u6700\u7b80\u5355\u7684\u7406\u89e3\u65b9\u6cd5\uff0c\u8ba4\u4e3a\u6210\u5458\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u8ddfpython\u4e00\u6837\u6709\u4e00\u4e2a <code>this</code> \u6307\u9488</p> <p>\u5982\u679c\u662f <code>const</code> \u6210\u5458\u51fd\u6570\uff0c\u90a3\u4e48 <code>this</code> \u6307\u9488\u662f <code>const</code>\u7684\uff0c\u76f8\u5f53\u4e8e\u4f1a\u5bfc\u81f4\u51fd\u6570\u53c2\u6570\u5217\u8868\u4e0d\u540c </p> </li> <li> <p>const result(can't be L-value): <code>const T</code></p> </li> <li> <p>always use reference</p> </li> </ul>"},{"location":"OOP/#type-conversion","title":"Type conversion","text":"<p><code>explicit</code> to avoid <code>implicit conversion</code></p> explicit <p>\u5f53\u52a0\u4e0a <code>explicit</code> \u65f6\uff0c\u53ea\u80fd\u901a\u8fc7 <code>T(x)</code> \u663e\u793a\u8f6c\u6362\uff0c\u4e0d\u80fd\u901a\u8fc7 <code>x</code> \u9690\u5f0f\u8f6c\u6362</p> <p>\u53ef\u4ee5\u907f\u514d\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u9690\u5f0f\u8f6c\u6362\uff0c\u5982 <code>T a = 1;</code>\uff0c\u5fc5\u987b\u4e25\u683c\u8c03\u7528</p> <pre><code>class A {\n    int x;\npublic:\n    explicit A(int x): x(x) {}\n};\nA a = 1; //Error\nA a(1); //OK\n</code></pre> <p></p> <p></p>"},{"location":"OOP/#static","title":"Static","text":"<ul> <li> <p>deprecated\uff1a\uff08\u8fc7\u65f6\uff09</p> <p>\u9650\u5236\u5916\u90e8\u8bbf\u95ee</p> <ul> <li> <p>static free function</p> </li> <li> <p>static global variables</p> </li> </ul> </li> <li> <p>static local variables</p> <ul> <li> <p>\u6301\u4e45\u5b58\u50a8\uff0c\u591a\u6b21\u8c03\u7528\u4fdd\u5b58\u4e0a\u6b21\u7684\u503c    </p> </li> <li> <p>\u672c\u8d28\u4e0a\u662f \u8bbf\u95ee\u53d7\u9650\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5728\u51fd\u6570\u88ab\u7b2c\u4e00\u6b21\u8c03\u7528\u65f6\u6784\u9020\uff0c\u5728\u7a0b\u5e8f\u7ed3\u675f\u65f6\u6790\u6784(\u5982\u679c\u88ab\u6784\u9020\u4e86) </p> </li> </ul> </li> <li> <p>static member variables</p> <ul> <li> <p>\u6240\u6709\u5bf9\u8c61\u5171\u4eab\uff0c\u4e0d\u5c5e\u4e8e\u5bf9\u8c61\uff0c\u5c5e\u4e8e\u7c7b</p> </li> <li> <p>\u4e0d\u80fd\u5728\u7c7b\u5185\u521d\u59cb\u5316\uff0c\u9700\u8981\u5728\u7c7b\u5916\u521d\u59cb\u5316\uff0c\u5e76\u4e14\u4e00\u5b9a\u8981\u521d\u59cb\u5316\uff08\u76f8\u5f53\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff09</p> <p>static variable \u9700\u8981\u5168\u5c40\u5b9a\u4e49\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\uff08\u5305\u62ecprivate / public\uff09 </p> <p><code>Tp ClassName::StaticVariable = x;</code></p> </li> <li> <p>\u53ef\u4ee5\u901a\u8fc7\u7c7b\u540d\u8bbf\u95ee\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bf9\u8c61\u8bbf\u95ee</p> </li> </ul> </li> <li> <p>static member function </p> <ul> <li> <p>\u53ea\u80fd\u8bbf\u95ee static member variables</p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528 <code>ClassName::Function()</code> \u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bf9\u8c61\u8c03\u7528\uff08<code>.</code> / <code>-&gt;</code>\uff09  </p> </li> </ul> </li> </ul>"},{"location":"OOP/#reference","title":"Reference","text":"<p><code>Tp &amp;x = v</code></p> <p>\u672c\u8d28\u4e0a\u76f8\u5f53\u4e8e\u7ed9\u53d8\u91cf\u8d77\u4e86\u4e00\u4e2a\u522b\u540d\uff0c\u65b9\u4fbf\u53d8\u91cf\u7684\u5f15\u7528\uff0c\u4e0d\u4f1a\u5206\u914d\u5185\u5b58\u7a7a\u95f4\uff08\u5426\u5219\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u8c61\u7684\u62f7\u8d1d\u53ef\u80fd\u5f00\u9500\u8fc7\u5927\uff09</p> <p>\u5b9e\u8d28\u4e0a\u5c31\u662f\u4f7f\u7528\u6307\u9488\u5b9e\u73b0\u7684\uff0c\u4f46\u662f\u6ce8\u610f\u5f15\u7528\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u6240\u4ee5\u5f15\u7528\u8fd9\u4e2a\u201c\u8bed\u6cd5\u7cd6\u201d\u4f1a\u66f4\u52a0\u5b89\u5168</p> <ul> <li> <p>\u5728\u5b9a\u4e49\u65f6\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u5de6\u503c\uff0c\u4e14\u4e0d\u80fd\u6539\u53d8\u6307\u5411 (\u5de6\u503c\u5f15\u7528<code>&amp;</code>)</p> </li> <li> <p>\u5728\u5b9a\u4e49\u65f6\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u53f3\u503c\uff0c\u4e14\u53ef\u4ee5\u6539\u53d8\u6307\u5411\uff0c\u76f8\u5f53\u4e8e\u8bb0\u4e0b\u4e86\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf (\u53f3\u503c\u5f15\u7528<code>&amp;&amp;</code>)</p> </li> </ul> <p>No pointers to references <code>(Tp&amp;) *p</code></p> <p>References to pointers OK <code>(Tp*) &amp;p</code></p> <ul> <li> <p>Left value &amp; Right value</p> <ul> <li> <p>Left value: <code>.</code> <code>[]</code> <code>-&gt;</code> <code>*</code></p> </li> <li> <p>Right value: others  </p> </li> </ul> </li> </ul>"},{"location":"OOP/#const","title":"Const","text":"<p>\u4e0d\u53ef\u8d4b\u503c\uff08\u53ef\u4ee5\u5728\u521b\u5efa\u65f6\u521d\u59cb\u5316\u4e00\u6b21\uff09</p> <ul> <li> <p>const &amp; pointer</p> <p>\u89c2\u5bdf<code>*</code>\u4f4d\u7f6e</p> <ul> <li> <p>const \u5728 <code>*</code> \u524d\uff0c\u8bf4\u660e\u6307\u5411\u7684\u5185\u5bb9\u4e0d\u53ef\u4fee\u6539</p> </li> <li> <p>const \u5728 <code>*</code> \u540e\uff0c\u8bf4\u660e\u8be5\u6307\u9488\u4e0d\u53ef\u4fee\u6539</p> </li> </ul> <p>Note</p> <p>\u53ef\u4ee5\u5c06\u4e00\u4e2a\u53d8\u91cf\u7684\u5730\u5740\u8d4b\u7ed9\u4e00\u4e2a\u6307\u5411\u5e38\u91cf\u7684\u6307\u9488\uff0c\u4f46\u662f\u4e0d\u80fd\u5c06\u4e00\u4e2a\u6307\u5411\u5e38\u91cf\u7684\u6307\u9488\u8d4b\u7ed9\u4e00\u4e2a\u666e\u901a\u6307\u9488</p> <p>\u539f\u56e0\u662f\u663e\u7136\u7684\uff0c\u4e0d\u80fd\u901a\u8fc7\u6307\u9488\u4fee\u6539\u5e38\u91cf\u7684\u503c</p> </li> <li> <p>\u58f0\u660e const function</p> <ul> <li> <p><code>const</code> \u4fee\u9970\u51fd\u6570\uff0c\u8868\u793a\u8be5\u51fd\u6570\u4e0d\u4f1a\u4fee\u6539\u6210\u5458\u53d8\u91cf  (const *this)</p> </li> <li> <p>\u56e0\u6b64\uff0cconst object \u53ea\u80fd\u8c03\u7528 const function, \u4f7f\u7f16\u8bd1\u5668\u80fd\u591f\u68c0\u67e5\u9519\u8bef</p> </li> <li> <p>*\u5efa\u8bae\u80fd\u52a0 const \u7684\u51fd\u6570\u90fd\u52a0\u4e0a\uff0c\u6bd4\u5982const\u5bf9\u8c61\u9ed8\u8ba4\u53ea\u80fd\u8c03\u7528const/static\u51fd\u6570\uff0c\u672c\u8d28\u4e0a\u7c7b\u7684\u6210\u5458\u51fd\u6570\u7684\u9644\u5e26\u6307\u9488 <code>this</code> \u5c31\u662f <code>Class *const</code> \uff0c\u52a0\u4e86const\u540e\u5c31\u662f <code>const Class *const</code> *</p> </li> </ul> </li> <li> <p>\u5173\u4e8e\u5b9a\u4e49\u6570\u7ec4 [const size]\uff1a</p> <ul> <li> <p>\u672c\u5730\u53d8\u91cf\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u56e0\u4e3a\u5728\u51fd\u6570\u5185\u53ef\u4ee5\u81ea\u7531\u5206\u914d\u6808\u7a7a\u95f4</p> <pre><code>void f(int n) {\n    int a[n];//OK\n}\n</code></pre> </li> <li> <p>\u5bf9\u8c61\u6210\u5458\u7684\u6570\u7ec4\u5b9a\u4e49\u4e0d\u80fd\u7528size\uff0c\u54ea\u6015\u5df2\u7ecf\u76f4\u63a5\u521d\u59cb\u5316\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u4e0d\u80fd\u786e\u5b9a\uff08const \u5e38\u91cf\u53ef\u80fd\u5728\u521d\u59cb\u5316\u5217\u8868\u4e2d\u88ab\u91cd\u65b0\u521d\u59cb\u5316\uff09</p> <pre><code>class A {\n    const int n = 10;\n    int a[10];  //Error\n    A():n(6){}  // Legal and powerful\n    // Thus \"change\" the n to 6 when the object is constructed\n};\n</code></pre> </li> <li> <p>enum &amp; static \u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u6570\u7ec4\u5927\u5c0f</p> <pre><code>class A {\n    static const int m = 10;\n    enum {n = 10};\n    int a[n];  //OK\n    int b[m];  //OK\n};\n</code></pre> </li> </ul> <p>Note</p> <p>\u5982\u679c\u8981\u4f7f\u7528\u5176\u4ed6\u6587\u4ef6\u4e2d\u7684 const \u53d8\u91cf\uff0c\u5e76\u4e14\u6ca1\u6709\u5f15\u7528\u76f8\u5e94\u7684\u5934\u6587\u4ef6\uff0c\u9700\u8981\u5728\u5b9a\u4e49\uff08\u8d4b\u521d\u503c\uff09\u65f6\u52a0\u4e0a <code>extern</code> \u5173\u952e\u5b57</p> </li> </ul>"},{"location":"OOP/#new-delete","title":"New &amp; Delete","text":"<p>new \u52a8\u6001\u7533\u8bf7\u7a7a\u95f4\uff0c\u8fd4\u56de\u6307\u9488</p> <p>delete ([ ]) p \u91ca\u653e\u7a7a\u95f4\uff0c[ ] \u53d6\u51b3\u4e8e\u5355\u4e00\u5bf9\u8c61\u8fd8\u662f\u6570\u7ec4</p> <p>\u672c\u8d28\u4e0a\u662f\u8fd0\u7b97\u7b26</p> <ul> <li> <p>new\u7684\u5b9e\u8d28 </p> <ul> <li> <p>\u7533\u8bf7\u7684\u7a7a\u95f4\u6ca1\u6709\u9ed8\u8ba4\u521d\u59cb\u503c\uff08\u76f4\u63a5\u7ed9\u5185\u5b58\u4e2d\u7684\u5783\u573e\u503c\uff09\uff0c\u53ef\u4ee5\u7528 <code>{}</code> \u521d\u59cb\u5316</p> </li> <li> <p>\u5bf9\u4e8e\u5bf9\u8c61\uff0c\u9700\u8981\u6709\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u624d\u80fd\u6ee1\u8db3\u9ed8\u8ba4\u6784\u9020 </p> </li> <li> <p>\u524d\u9762\u6709\u4e00\u4e2a\u6807\u8bb0\u5934\uff0c\u8bb0\u5f55\u4e86\u53e3\u4ee4\u548c\u5927\u5c0f\uff0c\u7528\u4e8e delete \u65f6\u68c0\u67e5; \u4e4b\u540e\u662f\u5b9e\u9645\u7533\u8bf7\u7684\u7a7a\u95f4</p> </li> </ul> </li> <li> <p>delete\u7684\u5b9e\u8d28</p> <ul> <li> <p>\u68c0\u67e5\u5bf9\u8c61\u7684\u6790\u6784\u51fd\u6570\uff0c\u5e76\u8c03\u7528\u6790\u6784\uff08\u5728\u91ca\u653e\u5185\u5b58\u524d\uff09</p> </li> <li> <p>\u5f80\u524d\u8d70\u4e00\u4e2a\u5355\u4f4d\uff0c\u68c0\u67e5\u53e3\u4ee4\u548c\u7a7a\u95f4\u5927\u5c0f\uff0c\u4e0d\u5bf9\u4f1a\u629b\u51fa\u5f02\u5e38</p> </li> <li> <p>\u4e0d\u52a0 [ ] \u53ea\u4f1a\u91ca\u653e\u7b2c\u4e00\u4e2a\u5bf9\u8c61\u7684\u7a7a\u95f4\uff0c\u800c\u4e0d\u4f1a\u91ca\u653e\u8bb0\u5f55\u7684\u7a7a\u95f4\u5927\u5c0f\uff0c\u540c\u65f6\u7cfb\u7edf\u4e5f\u4f1a\u5931\u53bb\u8fd9\u90e8\u5206\u5185\u5b58\u7684\u4fe1\u606f\uff08\u6700\u540e\u4e0d\u518d\u8c03\u7528\u5269\u4f59\u7684\u6790\u6784\uff09</p> </li> </ul> </li> </ul>"},{"location":"OOP/#default-argument","title":"Default argument\uff08\u9ed8\u8ba4\u53c2\u6570\uff09","text":"<ul> <li> <p>\u9ed8\u8ba4\u53c2\u6570\u201c\u4ece\u53f3\u5f80\u5de6\u8fde\u7eed\u5199\u201d</p> </li> <li> <p>\u9ed8\u8ba4\u53c2\u6570\u503c\u662f\u9759\u6001\u7684\uff08\u7f16\u8bd1\u5668\u5904\u7406\uff09\uff0c\u5728\u58f0\u660e\u4e2d\u5199\u9ed8\u8ba4\u503c\uff0c\u4e0d\u80fd\u5728\u5b9a\u4e49\u4e2d\u5199 </p> <ul> <li> <p>\u56e0\u6b64\u672c\u8d28\u4e0a\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e26\u53c2\u51fd\u6570\uff0c\u5c0f\u5fc3\u91cd\u8f7d\u65f6\u7684\u91cd\u590d\u9519\u8bef</p> </li> <li> <p>\u5934\u6587\u4ef6\u5185\u5b9a\u4e49\u7684\u9ed8\u8ba4\u503c\u53ef\u80fd\u4f1a\u88ab\u7be1\u6539</p> </li> </ul> </li> </ul>"},{"location":"OOP/#inline","title":"Inline\uff08\u5185\u8054\uff09","text":"<p>\u672c\u8d28\u4e0a\u76f8\u5f53\u4e8e\u5c06\u51fd\u6570\u4ee3\u7801\u76f4\u63a5\u62f7\u8d1d\u5230\u5f53\u524d\u4ee3\u7801\u5757\u4e2d\uff08\u76f4\u63a5\u6dfb\u52a0\u5230\u5f53\u524d\u6587\u4ef6\u7684.obj\u4e2d\uff0c\u800c\u4e0d\u662f\u540e\u7eed\u901a\u8fc7link\u8fde\u63a5\uff09\uff0c\u907f\u514d\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500</p> <p>inline \u51fd\u6570\uff08\u5305\u62ecbody\uff09\u76f8\u5f53\u4e8e\u58f0\u660e\uff0c\u4e0d\u662f\u5b9a\u4e49\uff08\u4e5f\u53ef\u4ee5\u7406\u89e3\u6210 <code>inline</code> \u4e00\u5b9a\u8981\u5728\u5b9a\u4e49\u4e0a\u4f7f\u7528\uff09\uff0c\u56e0\u6b64\u8981\u6574\u4e2a\u653e\u5728\u5934\u6587\u4ef6\u4e2d\uff0c\u8ba9\u7f16\u8bd1\u5668\u5904\u7406\u3002\u7f16\u8bd1\u5668\u4e0d\u4f1a\u5206\u914d\u51fd\u6570\u7a7a\u95f4\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u5bf9\u5e94\u6307\u4ee4\u201c\u6284\u4e0b\u6765\u201d\uff0c\u5728\u9700\u8981\u7684\u5730\u65b9\u76f4\u63a5\u586b\u4e0a\u53bb\u3002</p> <ul> <li> <p>\u4f1a\u589e\u957f\u4ee3\u7801\uff0c\u672c\u8d28\u4e0a\u662f\u7528\u201c\u7a7a\u95f4\u6362\u65f6\u95f4\u201d</p> </li> <li> <p>inline \u51fd\u6570\u590d\u6742\u65f6\u53ef\u80fd\u4f1a\u88ab\u7f16\u8bd1\u5668\u653e\u5f03 inline</p> <p>\u4e00\u822c\u662f\u6bd4\u8f83\u77ed\u5c0f\u4e14\u9891\u7e41\u8c03\u7528\u7684\u51fd\u6570</p> <p>~~\u9012\u5f52\u4e0d\u9002\u5408~~</p> </li> <li> <p>class \u6210\u5458\u51fd\u6570\u52a0\u4e0a body \u76f4\u63a5\u9ed8\u8ba4 inline\uff0c\u65e0\u9700\u7279\u6b8a\u6807\u8bb0</p> <p>\u5f53\u957f\u5ea6\u8fc7\u957f\u65f6\uff0c\u53ef\u4ee5\u5728\u5934\u6587\u4ef6\u5185\u7528 inline \u58f0\u660e\uff0c \u7136\u540e\u76f4\u63a5\u5c06\u5b9a\u4e49\u5199\u5728\u4e0b\u65b9\uff08\u90fd\u5728\u5934\u6587\u4ef6\u5185\uff0c\u90fd\u52a0inline\uff09</p> </li> </ul> <p>\u865a\u51fd\u6570</p> <p>\u865a\u51fd\u6570\u4e5f\u53ef\u4ee5\u6210\u4e3a\u5185\u8054\u51fd\u6570\uff0c\u4f46\u7531\u4e8e\u5185\u8054\u51fd\u6570\u662f\u5728\u7f16\u8bd1\u65f6\u5c55\u5f00\uff0c\u800c\u865a\u51fd\u6570\u662f\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u7ed1\u5b9a\uff0c\u56e0\u6b64\u865a\u51fd\u6570\u5185\u8054\u53ea\u6709\u5728\u7f16\u8bd1\u5668\u53ef\u4ee5\u786e\u5b9a\u8c03\u7528\u7684\u51fd\u6570\u65f6\u624d\u4f1a\u5c55\u5f00\uff08\u5982\u5bf9\u8c61\u76f4\u63a5\u8c03\u7528\uff0c\u800c\u4e0d\u662f\u6307\u9488\u8c03\u7528\uff09\uff0c\u5426\u5219\u4f1a\u6309\u7167\u865a\u51fd\u6570\u7684\u65b9\u5f0f\u52a8\u6001\u8c03\u7528\u3002</p>"},{"location":"OOP/#namespace","title":"Namespace","text":"<p>Expresses a logical grouping of classes, functions, variables, etc.</p> <p>{}\u672b\u5c3e\u6ca1\u6709 \u5206\u53f7 \u4f5c\u4e3a\u7ed3\u675f</p> <ul> <li> <p><code>::</code></p> <ul> <li> <p><code>::</code> \u5168\u5c40\u4f5c\u7528\u57df</p> </li> <li> <p><code>class::</code> \u7c7b\u4f5c\u7528\u57df</p> </li> <li> <p><code>namespace::</code> \u547d\u540d\u7a7a\u95f4\u4f5c\u7528\u57df  </p> </li> </ul> </li> <li> <p>using \u7b80\u5316</p> <ul> <li> <p><code>using namespace Name;</code></p> <p><code>using Name::Func;</code></p> <p><code>using Name::Class;</code></p> </li> <li> <p>using \u53ef\u80fd\u4f1a\u5bfc\u81f4\u540c\u540d\u6210\u5458\u51b2\u7a81\uff0c\u4f46\u662f\u53ea\u6709\u8c03\u7528\u51b2\u7a81\u6210\u5458\u65f6\u624d\u4f1a\u62a5\u9519\uff0cusing\u5e76\u4e0d\u4f1a\u9a6c\u4e0a\u62a5\u9519\u3002\u4e3a\u4e86\u89e3\u51b3\u51b2\u7a81\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u6307\u660e\u547d\u540d\u7a7a\u95f4\u3002</p> </li> </ul> </li> <li> <p>alias \u91cd\u547d\u540d</p> <ul> <li><code>namespace NewName = OldName;</code></li> </ul> </li> <li> <p>\u4ee3\u66ff<code>typedef</code></p> <ul> <li><code>using TypeName = OldType;</code></li> </ul> </li> <li> <p>openness</p> <ul> <li>\u540c\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u5206\u5e03\u5728\u591a\u4e2a\u6587\u4ef6\u4e2d</li> </ul> </li> </ul>"},{"location":"OOP/#template","title":"Template","text":"<p>generic programming\uff08\u6cdb\u578b\u7f16\u7a0b\uff09</p> <ul> <li> <p>Function Template</p> <p>\u672c\u8d28\u4e0a\u4e5f\u662f\u58f0\u660e\uff0c\u7531\u7f16\u8bd1\u5668\u53d1\u73b0\u76f8\u5173\u8c03\u7528\u540e\u521b\u5efa\uff0c\u56e0\u6b64\u9700\u8981\u5728\u5934\u6587\u4ef6\u4e2d\u5b9a\u4e49</p> <pre><code>template &lt;class / typename T&gt;\nT func(T x, T y) {\n    return x + y;\n}\n//\u5f3a\u5236\u7c7b\u578b\u8c03\u7528\nfunc&lt;T&gt;();\n</code></pre> <p>Danger</p> <p>\u6a21\u677f\u51fd\u6570\u5fc5\u987b\u4fdd\u8bc1\u8c03\u7528\u7684\u53c2\u6570\u7c7b\u578b\u5b8c\u5168\u4e00\u81f4\uff0c\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u65e0\u6548\uff01</p> \u51fd\u6570\u8c03\u7528\u987a\u5e8f <ol> <li> <p>\u7cbe\u786e\u7c7b\u578b</p> </li> <li> <p>\u7cbe\u786e\u6a21\u677f</p> </li> <li> <p>overloading</p> </li> </ol> <pre><code>template&lt;class T&gt;\nvoid f(T x){cout &lt;&lt; \"Template\" &lt;&lt; endl;}\n\ntemplate&lt;&gt;  // \u7279\u5316\nvoid f(int x){cout &lt;&lt; \"Instance\" &lt;&lt; endl;}\n\nvoid f(int x){cout &lt;&lt; \"Function\" &lt;&lt; endl;}\n\nint main(){\n    f(1);// \u76f4\u63a5\u5b9a\u4e49\u7684\u4f18\u5148\uff0c\u7136\u540e\u662f\u7cbe\u786e\u7279\u5316\u7684\u6a21\u677f\u51fd\u6570\uff0c\u6700\u540e\u624d\u662f\u51fd\u6570\u6a21\u677f                     \n    return 0;\n}\n</code></pre> </li> <li> <p>Class Template</p> <pre><code>template &lt;class T&gt;\nclass A {\n    T x;\n    T f(T x);\n};\ntemplate &lt;class T&gt;\nT A&lt;T&gt;::f(T x) {\n    return x;\n}\n\n// \u8c03\u7528\nA&lt;type&gt; a;\n</code></pre> </li> <li> <p>\u62d3\u5c55\u7528\u6cd5</p> <ul> <li> <p>\u591a\u4e2a\u6a21\u677f\u53c2\u6570</p> <pre><code>template &lt;class T, class U ...&gt;\n</code></pre> </li> <li> <p>\u5d4c\u5957\u6a21\u677f</p> <pre><code>template &lt;Class&lt;T&gt; &gt;    //\u73b0\u4ee3\u7f16\u8bd1\u5668\u65e0\u6240\u8c13\u90a3\u4e2a\u7a7a\u683c\u4e86\n\ntemplate &lt;int (*)(Class&lt;T&gt; ) &gt; //\u51fd\u6570\u6307\u9488\n</code></pre> </li> <li> <p>\u9ed8\u8ba4\u53c2\u6570</p> <pre><code>template &lt;class T, int para = default&gt;  // \u5185\u90e8\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b57\u9762\u91cf\n</code></pre> </li> <li> <p>\u7ee7\u627f\u6a21\u677f</p> <pre><code>template &lt;class T&gt;\nclass B : public A&lt;T&gt; {\n    ...\n}\n</code></pre> </li> <li> <p>friend</p> <pre><code>template &lt;class T&gt;\nclass A {\n    friend T;\n}\n</code></pre> </li> <li> <p>static member</p> <p>\u76f8\u5f53\u4e8e\u6bcf\u79cd\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u7684 static member</p> <pre><code>template &lt;class T&gt;\nclass A {\n    static int x;\n}\ntemplate &lt;class T&gt;\nint A&lt;T&gt;::x = 0;\n</code></pre> </li> </ul> </li> </ul> <p>Warning</p> <p>\u4e00\u822c\u6a21\u677f\uff08\u7c7b\uff09\u51fd\u6570\u7684\u5b9a\u4e49\u548c\u58f0\u660e\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u5934\u6587\u4ef6\u4e2d\uff0c\u56e0\u4e3a\u6a21\u677f\u5728\u7f16\u8bd1\u9636\u6bb5\u5b9e\u4f8b\u5316\uff0c\u5426\u5219\u4f1a\u62a5\u9519</p> <p>\u8fd8\u6709\u4e00\u79cd\u5f88\u7b28\u7684\u65b9\u6cd5\u53ef\u4ee5\u5c06\u4ed6\u4eec\u5206\u5f00\uff1a\u76f4\u63a5\u5728\u5934\u6587\u4ef6\u4e2d\u6328\u4e2a\u5b9a\u4e49\u76f8\u5173\u7684\u6a21\u677f\u7c7b</p>"},{"location":"OOP/#exception","title":"Exception","text":"\u5904\u7406\u5f02\u5e38\u529e\u6cd5 <ol> <li> <p>\u76f4\u63a5\u7ec8\u6b62\u7a0b\u5e8f</p> </li> <li> <p>\u8fd4\u56de\u9519\u8bef\u7801(\u7b80\u5355\u53ef\u884c)</p> </li> <li> <p>\u629b\u51fa\u5f02\u5e38  </p> </li> </ol> <ul> <li> <p>throw</p> <p>\u53ef\u4ee5\u7528<code>throw</code>\u5173\u952e\u5b57\u6765\u58f0\u660e\u8fc7\u7a0b\u53ef\u80fd\u53d1\u751f\u7684\u5f02\u5e38(\u5b9e\u9645\u5728C++11\u5f00\u59cb\u5df2\u7ecf\u4e0d\u63a8\u8350\u4f7f\u7528\u4e86\uff0c\u56e0\u4e3a\u4e0d\u662f\u5728\u7f16\u8bd1\u65f6\u68c0\u67e5)</p> <p>\u82e5\u629b\u51fa\u975e\u6cd5\u5f02\u5e38\uff0c\u7a0b\u5e8f\u4f1a\u7ec8\u6b62\uff0c\u89e6\u53d1<code>std::bad_exception</code>\uff0c\u8c03\u7528<code>std::unexpected()</code>\u51fd\u6570(\u9ed8\u8ba4\u7ec8\u6b62\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u4eba\u4e3a\u8986\u5199<code>std::set_unexpected(func)</code>)</p> <pre><code>function() throw(Type1, Type2); //\u53ea\u80fd\u629b\u51faType1, Type2\nfunction() throw(...); //\u53ef\u4ee5\u629b\u51fa\u4efb\u4f55\u5f02\u5e38,\u8c8c\u4f3c\u4f1a\u62a5\u9519\uff0c\u4e0d\u5982\u4e0d\u5199\nfunction() throw(); //\u4e0d\u629b\u51fa\u5f02\u5e38\nfunction() noexcept; //\u4e0d\u629b\u51fa\u5f02\u5e38\n</code></pre> </li> <li> <p>try-catch</p> <p>handler \u9009\u62e9\u539f\u5219\uff1a</p> <ul> <li> <p>\u5bf9\u4e8e\u4e00\u822c\u7c7b\u578b\uff0c\u4f1a\u9009\u62e9\u7cbe\u786e\u7684\u5339\u914d\uff0c\u4e00\u822c\u4e0d\u4f1a\u81ea\u52a8\u8f6c\u6362</p> </li> <li> <p>\u5bf9\u4e8e\u7c7b\uff0c\u4f1a\u4f7f\u7528\u201cis-a\u201d\u5173\u7cfb\u8fdb\u884c\u9010\u6761\u5224\u65ad\uff0c\u56e0\u6b64\u5b50\u7c7b\u7684\u5f02\u5e38\u5904\u7406\u5e94\u8be5\u653e\u5728\u7236\u7c7b\u524d\u9762</p> </li> </ul> <pre><code>try {\n    ...\n} catch (Type &amp;e) { // \u4e00\u822c\u7528\u5f15\u7528\uff0c\u907f\u514d\u62f7\u8d1d\n    ...\n} catch (...) { // ... \u8868\u793a\u6355\u83b7\u6240\u6709\u5f02\u5e38\n    ...\n    throw;  // propagate, \u7ee7\u7eed\u5411\u4e0a\u5c42\u629b\u51fa\u540c\u6837\u7684\u5f02\u5e38\uff0c\u53ea\u80fd\u5728catch\u4e2d\u4f7f\u7528\n}\n</code></pre> </li> <li> <p>std::exception</p> <p></p> </li> <li> <p>special case</p> <ul> <li> <p>constructor</p> <p>\u5206\u4e24\u6b65\uff1a\u5148\u8fdb\u884c\u6210\u5458\u57fa\u672c\u521d\u59cb\u5316\uff08\u6307\u9488\u8d4b0\uff09\uff0c\u518d\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\u7b49\u8d44\u6e90\uff0c\u5982\u679c\u5931\u8d25\u5219\u629b\u51fa\u5f02\u5e38</p> <p>\u5426\u5219\u82e5\u4e2d\u9014\u629b\u51fa\u5f02\u5e38\uff0c\u5982\u5185\u5b58\u5206\u914d\u4e86\u4e00\u534a\uff0c\u6307\u9488\u8fd8\u672a\u8d4b\u503c\uff0c\u6790\u6784\u51fd\u6570\u65e0\u6cd5\u91ca\u653e\u5185\u5b58\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>destructor</p> <p>\u4f1a\u89e6\u53d1<code>std::terminate()</code>\u51fd\u6570\uff0c\u56e0\u6b64\u6790\u6784\u51fd\u6570\u4e0d\u5e94\u8be5\u629b\u51fa\u5f02\u5e38\uff0c\u5e94\u8be5\u5728\u8bbe\u8ba1\u65f6\u907f\u514d</p> </li> </ul> </li> </ul>"},{"location":"OOP/#smart-pointer","title":"Smart Pointer","text":"<p>A reference count is a count of the number of times an object is shared</p> <p>UCObject: Use-Count Object</p> <p>UCPointer: Smart Use-Count Pointer point to UCObject</p> <p></p> <p>\u65b0\u5efa\u5bf9\u8c61\uff1a\u65b0\u5efa\u4e34\u65f6UCP -&gt; UCP\u8d4b\u503c -&gt; UCP \u6790\u6784</p> <ul> <li> <p><code>static_cast</code></p> <p>\u9759\u6001\u8f6c\u6362\uff0c\u5982\u9ed8\u8ba4\u7c7b\u578b\u95f4\uff0c\u5b50\u7c7b\u6307\u9488\u5f53\u7236\u7c7b</p> <p>\u4e0d\u4f1a\u8fdb\u884c\u8fd0\u884c\u65f6\u7c7b\u578b\u68c0\u67e5\uff0c\u4e0d\u5b89\u5168</p> </li> <li> <p><code>dynamic_cast</code></p> <p>\u52a8\u6001\u8f6c\u6362\uff0c\u5982\u591a\u6001\u7c7b\u578b\u95f4\uff0c\u7236\u7c7b\u5f53\u5b50\u7c7b\u7b49down-casting</p> <p>\u4f1a\u5728cast\u65f6\u8fdb\u884c\u52a8\u6001\u7c7b\u578b\u68c0\u67e5\uff0c\u82e5\u68c0\u67e5\u51fa\u9519\uff0c\u5982\u7236\u7c7b\u5f53\u5b50\u7c7b\uff0c\u4f1a\u4f7f\u5f97\u76f8\u5e94\u7684\u7ed3\u679c\u4e3a0</p> </li> <li> <p><code>const_cast</code></p> <p>\u7528\u4e8e\u4fee\u6539\uff08\u53bb\u6389\uff09\u7c7b\u578b\u7684const\u548cvolatile\uff08\u5fc5\u987b\u4e0e\u5185\u5b58\u4ea4\u4e92\uff0c\u4e0d\u53ef\u6682\u5b58\u5bc4\u5b58\u5668\uff09\u5c5e\u6027</p> <pre><code>const int a = 10;\nint *p = const_cast&lt;int*&gt;(&amp;a);\n*p = 20; //ok\n</code></pre> </li> <li> <p><code>reinterpret_cast</code></p> <p>\u91cd\u65b0\u89e3\u91ca\u7c7b\u578b\uff0c\u5982\u6307\u9488\u548c\u6574\u6570\u95f4\u7684\u8f6c\u6362\uff0c\u51e0\u4e4e\u652f\u6301\u6240\u6709\u7c7b\u578b\u7684\u8f6c\u6362</p> <p>\u4e0d\u4f1a\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\uff0c\u53ef\u80fd\u4f1a\u7834\u574f\u7ed3\u6784\uff0c\u4e0d\u5b89\u5168</p> </li> </ul>"},{"location":"OOP/#stream","title":"Stream","text":"background <p>Danger</p> <p>\u4e00\u822cC\u7c7b\uff08scanf/printf\uff09\u4e0eC++\u7c7b\uff08cin/cout\uff09\u4e0d\u8981\u6df7\u7528\uff0c\u56e0\u4e3a\u5404\u81ea\u7684\u7f13\u51b2\u533a\u4e0d\u540c\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898</p> <p></p> <p>\uff08\u90fd\u662f istream/ostream \u7684\u5b50\u7c7b\uff09</p> <ul> <li> <p>\u6d41\u7684\u7279\u6027</p> <ul> <li> <p>\u5355\u5411\u6d41\u52a8</p> </li> <li> <p>\u4e00\u7ef4</p> </li> <li> <p>\u4e0d\u505c\u6d41\u52a8\uff0c\u53ea\u80fd\u8bfb\u53d6\u6682\u65f6\u7684\u7247\u6bb5</p> </li> </ul> </li> <li> <p>Operations</p> <ul> <li> <p>Extractor</p> <p> \uff08cerr\u7531 2&gt; \u91cd\u5b9a\u5411\uff09</p> <ul> <li> <p>Text Stream</p> <ul> <li> <p>\u53ef\u8bfb</p> </li> <li> <p>\u4ee5\u884c\u4e3a\u5355\u4f4d</p> </li> <li> <p>\u53ef\u80fd\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u7b49\u8fdb\u884c\u7ffb\u8bd1\uff08\u5982unix\u7684\\n\uff09</p> </li> </ul> </li> <li> <p>Binary Stream</p> <ul> <li> <p>\u4e8c\u8fdb\u5236\u6d41</p> </li> <li> <p>\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff0c\u4e0d\u4f1a\u88ab\u7ffb\u8bd1\u4fee\u6539</p> </li> </ul> </li> </ul> <p></p> <p>\uff08\u76f8\u5f53\u4e8e\u628acin.get()\u7684\u53c2\u6570\u5199\u5230\u4e86get\u51fd\u6570\u53c2\u6570\u91cc\uff09</p> <p></p> <p>(\u4e00\u822c\u4e0d\u4f7f\u7528cin.getline(char*, int)\uff0c\u56e0\u4e3a\u8981\u9884\u5148\u6784\u9020\u4e00\u4e2achar\u6570\u7ec4\uff0c\u4e0d\u5982\u76f4\u63a5\u7528string)</p> </li> <li> <p>Inserter</p> <p></p> <p>\uff08Flush\u53ea\u80fd\u5237\u65b0\u5f53\u524d\u6587\u4ef6\u7684\u7f13\u51b2\u533a\uff0c\u4e0d\u4e00\u5b9a\u5237\u65b0\u7cfb\u7edf\u7f13\u51b2\u533a\uff09</p> </li> <li> <p>Manipulators</p> <p><code>#include &lt;iomanip&gt;</code></p> <p>Warning</p> <p>\u4e00\u822c manipulator \u90fd\u662f\u4e00\u76f4\u6709\u6548\u7684\uff0c\u76f4\u5230\u4e0b\u4e00\u4e2a manipulator \u51fa\u73b0</p> <ul> <li> <p>manip</p> <p></p> </li> <li> <p>create manip</p> <p></p> </li> <li> <p>flag</p> <p>\u6bcf\u4e00\u4e2a flag \u90fd\u7528\u4e00\u4e2a word \u91cc\u7684\u4e00\u4e2a bit \u8868\u793a\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u7528 <code>setf()</code> \u548c <code>unsetf()</code> \u6765\u8bbe\u7f6e</p> <p></p> <p></p> Example <p></p> <p></p> Example <p></p> </li> </ul> </li> <li> <p>Others</p> <p></p> <p></p> <p></p> </li> </ul> </li> <li> <p>States</p> <p></p> <p></p> Example <p></p> </li> </ul>"},{"location":"OOP/#design","title":"Design","text":"<ul> <li> <p>Class Design:</p> <ul> <li> <p>understandable</p> </li> <li> <p>maintainable</p> </li> <li> <p>reusable</p> </li> </ul> </li> <li> <p>Software Change:</p> <ul> <li>extended, maintained, ported, adapted</li> </ul> </li> <li> <p>Code quality:</p> <ul> <li> <p>Coupling\uff08\u8026\u5408\uff09</p> <p>\u6a21\u5757\u8054\u7cfb\u7684\u7d27\u5bc6\u7a0b\u5ea6\uff0c\u8d8a\u4f4e\u8d8a\u597d\uff08loose coupling\uff09\uff0c\u4ece\u800c\u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027</p> <ul> <li> <p>\u4e0d\u9700\u8981\u77e5\u9053\u5bf9\u65b9\u7684\u5185\u90e8\u5b9e\u73b0</p> </li> <li> <p>\u4fee\u6539\u4e00\u4e2a\u6a21\u5757\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u6a21\u5757(\u4f1a\u5f71\u54cd\u6240\u6709\u4f9d\u8d56\u4e8e\u5f53\u524d\u6a21\u5757\u7684\u6a21\u5757)</p> </li> </ul> </li> </ul> <p>\u89e3\u8026</p> <ul> <li> <p>call-back</p> <p>Actor\u4f9d\u8d56\u4e8eButton, \u4ece\u800cButton\u4e0d\u518d\u4f9d\u8d56\u4e8eActor\uff0c\u53ef\u4ee5\u91cd\u7528</p> <pre><code>class Listener {\n    virtual void onEvent() = 0;\n}\nclass Event : public Listener{\n    Listener *listener;\n    void setListener(Listener *l) {\n        listener = l;\n    }\n    void onEvent() {\n        ...\n    }\n}\nclass Actor{\n    Actor(Button *button) {\n        button-&gt;setListener(this);\n    }\n    void onEvent() {\n        ...\n    }\n}\nclass Button{\n    Event *event;\n    void onClick() {\n        event-&gt;onEvent();\n    }\n}\n</code></pre> </li> <li> <p>message mechanism</p> <p>\u5e38\u7528\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li> <p>\u901a\u8fc7\u4e2d\u592e\u5a92\u4ecb\u8fdb\u884c\u5b57\u7b26\u4e32\u6d88\u606f\u4f20\u9012\uff0c\u4e0d\u77e5\u9053\u5177\u4f53\u6a21\u5757\u4fe1\u606f</p> </li> <li> <p>\u7531\u4e00\u4e2a\u4e2d\u95f4\u6a21\u5757\u7edf\u4e00\u6ce8\u518c\u5404\u4e2a\u89d2\u8272</p> </li> </ol> </li> </ul> <ul> <li> <p>Cohesion\uff08\u5185\u805a\uff09</p> <p>\u4e00\u4e2a\u6a21\u5757\u6240\u627f\u62c5\u7684\u529f\u80fd\u805a\u7126\u5728\u4e00\u8d77\uff0c\u529f\u80fd\u7684\u591a\u6837\u6027\u8d8a\u5c11\u8d8a\u597d</p> <p>\u4e00\u4e2a\u6a21\u5757\u53ea\u8d1f\u8d23\u4e00\u4e2a\u4e1a\u52a1\u903b\u8f91 -&gt; high cohesion</p> </li> </ul> </li> <li> <p>Code Duplication</p> <ul> <li>\u8bbe\u8ba1\u95ee\u9898\uff0c\u4e14\u975e\u5e38\u96be\u4ee5\u7ef4\u62a4</li> </ul> </li> <li> <p>Responsibility-driven design</p> <ul> <li> <p>\u65b0\u589e\u529f\u80fd\u65f6\uff0c\u5e94\u8be5\u8003\u8651\u54ea\u4e2a\u7c7b\u5e94\u8be5\u8d1f\u8d23\u8fd9\u4e2a\u529f\u80fd</p> </li> <li> <p>\u6bcf\u4e2a\u7c7b\u5e94\u8be5\u53ea\u80fd\u8d1f\u8d23\u5904\u7406\u81ea\u5df1\u7684\u6570\u636e\uff08\u5e94\u8be5\u4ece\u6570\u636e\u51fa\u53d1\u8bbe\u8ba1\u7c7b\uff09\uff0c\u4ece\u800c localizing change</p> </li> </ul> </li> <li> <p>Refactoring</p> <ul> <li> <p>\u91cd\u6784\u4ee3\u7801\uff0c\u4f7f\u4ee3\u7801\u66f4\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4\uff0c\u91cd\u6784\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf\uff0c\u4f7f\u4ee3\u7801\u66f4\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4</p> </li> <li> <p>\u91cd\u6784\u7684\u539f\u5219\u662f\uff1a\u4e0d\u6539\u53d8\u4ee3\u7801\u7684\u529f\u80fd\uff0c\u53ea\u6539\u53d8\u4ee3\u7801\u7684\u7ed3\u6784</p> </li> <li> <p>\u56de\u5f52\u6d4b\u8bd5\uff1a\u91cd\u6784\u540e\u7684\u4ee3\u7801\u8981\u8fdb\u884c\u56de\u5f52\u6d4b\u8bd5\uff0c\u786e\u4fdd\u91cd\u6784\u540e\u7684\u4ee3\u7801\u6ca1\u6709\u5f15\u5165\u65b0\u7684bug</p> </li> </ul> </li> </ul>"},{"location":"OOP/#volatile","title":"*Volatile","text":"<p>\u8868\u793a\u53d8\u91cf\u53ef\u80fd\u4f1a\u5728\u5916\u90e8\u88ab\u4fee\u6539\uff08\u5982\u5916\u90e8\u4e2d\u65ad\u7b49\uff09\uff0c\u56e0\u6b64\u7f16\u8bd1\u5668\u4e0d\u4f1a\u5bf9\u5176\u8fdb\u884c\u4f18\u5316\uff0c\u6bcf\u6b21\u90fd\u4f1a\u91cd\u65b0\u8bfb\u53d6\uff0c\u800c\u4e0d\u4f1a\u4f7f\u7528\u5bc4\u5b58\u5668\u7f13\u5b58</p> <p>\u751a\u81f3\u6307\u9488\u3001const\u7b49\u90fd\u65e0\u6cd5\u4fdd\u8bc1\u5176\u4e0d\u88ab\u4fee\u6539</p>"},{"location":"OOP/#extern","title":"*Extern \u7279\u6b8a\u7528\u6cd5","text":"<ul> <li> <p>\u7531\u4e8eC\u4e0eC++ <code>*.o</code> \u6587\u4ef6\u7684\u4e0d\u540c\uff0cC++\u7531\u4e8e\u652f\u6301\u51fd\u6570\u91cd\u8f7d\u4f1a\u5728\u7f16\u8bd1\u65f6\u5c06\u51fd\u6570\u540d\u6539\u53d8\u6765\u9644\u5e26\u53c2\u6570\u4fe1\u606f\uff0c\u800cC\u4e0d\u4f1a\uff0c\u56e0\u6b64\u5728C++\u4e2d\u8c03\u7528C\u51fd\u6570\u65f6\u9700\u8981\u4f7f\u7528 <code>extern \"C\" {}</code> \u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5</p> <pre><code>//xx.h\nextern int add(...)\n\n//xx.c\nint add(){\n\n}\n\n//xx.cpp\nextern \"C\" {\n    #include \"xx.h\"\n}\n</code></pre> </li> <li> <p>\u53cd\u8fc7\u6765\uff0c\u5982\u679cC\u4e2d\u8c03\u7528C++\u51fd\u6570\uff0c\u4e5f\u9700\u8981\u5728CPP\u6587\u4ef6\u4e2d\u4f7f\u7528 <code>extern \"C\" {}</code> \u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5</p> <pre><code>//xx.h\nextern \"C\"{\n    int add();\n}\n//xx.cpp\nint add(){\n\n}\n//xx.c\nextern int add();\n</code></pre> </li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u9762\u8fd9\u4e24\u79cd\u65b9\u6cd5\u7f16\u8bd1\u65f6\u90fd\u9700\u8981\u5148\u7f16\u8bd1\u6210 <code>*.o</code> \u6587\u4ef6\uff0c\u7136\u540e\u518d\u94fe\u63a5\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u627e\u4e0d\u5230\u51fd\u6570\u7684\u60c5\u51b5</p>"},{"location":"OOP/#union","title":"*Union","text":""},{"location":"OOP/#enum","title":"*Enum","text":"<p>\u4e00\u822c\u7684 <code>enum</code> \u5728\u5f53\u524d\u4f5c\u7528\u57df\u5185\u76f8\u5f53\u4e8e\u662f\u5168\u5c40\u7684\uff0c\u76f8\u4e92\u4e4b\u95f4\u6ca1\u6709\u9694\u79bb\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u9020\u6210\u91cd\u540d\u9519\u8bef</p> <ul> <li> <p>Enum class</p> <ul> <li> <p>\u9650\u5236\u679a\u4e3e\u7684\u4f5c\u7528\u57df\uff0c\u907f\u514d\u5168\u5c40\u6c61\u67d3</p> </li> <li> <p>\u9650\u5236\u679a\u4e3e\u7684\u9690\u5f0f\u8f6c\u6362</p> </li> <li> <p>\u9650\u5236\u679a\u4e3e\u7684\u53d6\u503c\u8303\u56f4</p> </li> </ul> <pre><code>enum class Color {red, green, blue};\nColor c = Color::red;\n</code></pre> </li> </ul>"},{"location":"OOP/#define","title":"*Define","text":"<ul> <li> <p><code>#</code> \u7528\u4e8e\u5c06\u53c2\u6570\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u4f1a\u81ea\u52a8\u5ffd\u7565\u53c2\u6570\u4e24\u8fb9\u7684\u7a7a\u683c\uff0c\u82e5\u6709\u591a\u4e2a\u53c2\u6570\u5219\u4f1a\u81ea\u52a8\u8fde\u63a5\u5e76\u7528\u4e00\u4e2a\u5355\u4e00\u7a7a\u683c\u9694\u5f00</p> <pre><code>#define PRINT(x) cout &lt;&lt; #x &lt;&lt; endl;\n\nPRINT(   123   456   ); // cout &lt;&lt; \"123 456\" &lt;&lt; endl;\n</code></pre> </li> <li> <p><code>##</code> \u7528\u4e8e\u5c06\u4e24\u4e2a\u53c2\u6570\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u4e14\u81ea\u52a8\u5ffd\u7565\u7a7a\u683c\uff0c\u6210\u4e3a\u4e00\u4e2a\u65b0\u7684\u5143\u7d20\uff0c\u5e76\u4e14\u82e5\u53c2\u6570\u4e2d\u5b58\u5728\u53e6\u5916\u7684\u5b8f\u5b9a\u4e49\uff0c\u4e5f\u4f1a\u963b\u6b62\u5b8f\u5b9a\u4e49\u7684\u5c55\u5f00</p> <pre><code>#define PRINT(x, y) cout &lt;&lt; x##y &lt;&lt; endl;\n\nPRINT(123, 456); // cout &lt;&lt; 123456 &lt;&lt; endl;\n</code></pre> </li> <li> <p><code>\\</code> \u7528\u4e8e\u5c06\u5199\u4e0d\u4e0b\u7684\u5b8f\u5b9a\u4e49\u5ef6\u7eed\u5230\u4e0b\u4e00\u884c</p> </li> <li> <p><code>do { ... } while(0)</code> \u7528\u4e8e\u5c06\u591a\u6761\u8bed\u53e5\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\uff0c\u907f\u514d\u591a\u6761\u8bed\u53e5\u88ab\u62c6\u5f00\u7684\u95ee\u9898</p> </li> </ul>"},{"location":"RiscV/","title":"\u8ba1\u7b97\u673a\u7ec4\u6210","text":"<p>\u8d85\u8be6\u7ec6\u524d\u8f88\u7b14\u8bb0</p> <p>\u56e0\u6b64\u6211\u53ea\u8bb0\u5f55\u4e86\u4e00\u4e0b\u81ea\u5df1\u9047\u5230\u7684\u91cd\u96be\u70b9\uff0c\u4ee5\u53ca\u81ea\u5df1\u7684\u4e00\u4e9b\u5176\u4ed6\u601d\u8003</p>"},{"location":"RiscV/#chapter-1","title":"Chapter 1","text":""},{"location":"RiscV/#eight-great-ideas-in-computer-architecture","title":"Eight Great Ideas in Computer Architecture","text":"<ul> <li> <p>Design for Moore's Law</p> <p>Moore's Law: The number of transistors on a chip will double about every 18 - 24 months. </p> <ul> <li>\u4e3a\u4e86\u8ffd\u6c42\u66f4\u9ad8\u7684\u6027\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u6676\u4f53\u7ba1\u7684\u6570\u91cf\u6765\u63d0\u9ad8\u8ba1\u7b97\u673a\u7684\u6027\u80fd\u3002\u4f46\u662f\uff0c\u968f\u7740\u6676\u4f53\u7ba1\u6570\u91cf\u7684\u589e\u52a0\uff0c\u8ba1\u7b97\u673a\u7684\u529f\u8017\u548c\u6563\u70ed\u95ee\u9898\u4e5f\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u4e25\u91cd\uff0c\u9047\u5230\u529f\u8017\u5899\u7b49\u95ee\u9898\u3002</li> </ul> </li> <li> <p>Use Abstraction to Simplify Design</p> <ul> <li>\u8ba1\u7b97\u673a\u7684\u591a\u5c42\u6b21\u62bd\u8c61\u7ed3\u6784\uff1a\u6570\u5b57\u903b\u8f91\u3001\u6307\u4ee4\u96c6\u67b6\u6784\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u7f16\u7a0b\u8bed\u8a00\u3001\u5e94\u7528\u7a0b\u5e8f\u7b49\u3002</li> </ul> </li> <li> <p>Make the Common Case Fast</p> <ul> <li>\u901a\u8fc7\u4f18\u5316\u8fd0\u884c\u6700\u591a\u7684\u64cd\u4f5c\u6765\u63d0\u9ad8\u8ba1\u7b97\u673a\u7684\u6027\u80fd\u3002</li> </ul> </li> <li> <p>Performance via Parallelism</p> <ul> <li>\u5e76\u884c\u52a0\u901f</li> </ul> </li> <li> <p>Performance via Pipelining</p> <ul> <li>\u6d41\u6c34\u7ebf\u52a0\u901f</li> </ul> </li> <li> <p>Performance via Prediction</p> <ul> <li>\u901a\u8fc7\u9884\u6d4b\u64cd\u4f5c\u63d0\u9ad8\u6027\u80fd\uff0c\u5982\u5206\u652f\u9884\u6d4b\uff0c\u7f13\u5b58\u9884\u8bfb\u7b49</li> </ul> </li> <li> <p>Hierarchy of Memories</p> <ul> <li> <p>\u8ba1\u7b97\u673a\u7684\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\uff0c\u5982\u4e0b\uff1a</p> <p> </p> </li> </ul> </li> <li> <p>Dependability via Redundancy</p> <ul> <li>\u5229\u7528\u5197\u4f59\u63d0\u9ad8\u7cfb\u7edf\u53ef\u9760\u6027\uff0c\u5373\u591a\u4fdd\u9669\uff0c\u5982\u5907\u4efd\u7b49</li> </ul> </li> </ul>"},{"location":"RiscV/#performance","title":"Performance","text":"<p>\u4e3b\u8981\u8981\u77e5\u9053\u4e13\u6709\u540d\u8bcd\u7684\u5b9a\u4e49\uff0c\u8ba1\u7b97\u65b9\u6cd5\u76f8\u5bf9\u8fd8\u662f\u7b80\u5355\u7684</p> <ul> <li> <p>Performance = 1 / Execution Time</p> </li> <li> <p>Execution Time = Clock Cycles * Clock Cycle Time</p> </li> <li> <p>CPI (Cycles Per Instruction) = Clock Cycles / Instructions</p> </li> <li> <p>MIPS (Million Instructions Per Second) = Frequency / CPI / \\(10^6\\)</p> </li> </ul>"},{"location":"RiscV/#chapter-2","title":"Chapter 2","text":""},{"location":"RiscV/#risc-v","title":"Risc-V \u7684\u6307\u4ee4\u96c6\u67b6\u6784","text":"<ul> <li> <p>\u4ee5\u5b57\u8282\uff081 byte = 8 bit\uff09\u4e3a\u6700\u5c0f\u5bfb\u5740\u5355\u4f4d</p> </li> <li> <p>Little-Endian \u5c0f\u7aef\u5b58\u50a8</p> </li> <li> <p>words align \u5bf9\u9f50\u4e0d\u9700\u8981\uff08\u867d\u7136\u4f1a\u5f71\u54cd\u6548\u7387\uff09</p> </li> <li> <p>\u6307\u4ee4\uff08\u7a0b\u5e8f\uff09\u88ab\u5f53\u4f5c\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d</p> </li> <li> <p>\u5bfb\u5740\u65b9\u5f0f</p> <p></p> </li> </ul>"},{"location":"RiscV/#_2","title":"\u6307\u4ee4\u6c47\u603b","text":"<ul> <li> <p>\u6307\u4ee4\u683c\u5f0f</p> <p></p> </li> <li> <p>\u6307\u4ee4\u96c6</p> <p></p> </li> <li> <p>\u5bc4\u5b58\u5668\u4f7f\u7528</p> <p>Fast locations for Data</p> <p></p> </li> </ul>"},{"location":"RiscV/#_3","title":"\u4e00\u4e9b\u5e94\u7528","text":"<ul> <li> <p>RISC-V \u7684\u8df3\u8f6c\u6307\u4ee4</p> <ul> <li> <p>offset \u662f\u57fa\u4e8e\u5f53\u524d\u6307\u4ee4\u7684\u5730\u5740\u7684\u504f\u79fb\uff0c\u8fd9\u4e0d\u540c\u4e8e\u5176\u4ed6\u4e00\u4e9b\u6c47\u7f16\u662f\u57fa\u4e8e\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u504f\u79fb\u7684\u3002\u5373\u5982\u679c\u662f\u8df3\u8f6c\u8bed\u53e5 PC \u5c31\u4e0d +4 \u4e86\uff0c\u800c\u662f\u76f4\u63a5 +offset</p> </li> <li> <p>branch/jal\u6307\u4ee4\u7684\u8df3\u8f6c\u4e3a\u81ea\u52a8\u52a0\u4e0a imm * 2\uff0c\u56e0\u6b64\u624b\u5199\u53c2\u6570\u65f6\u53ef\u4ee5\u89c6\u4e3a\u4ee54\u4e3a\u57fa\u6570 </p> </li> </ul> </li> <li> <p>switch case</p> <ul> <li>\u901a\u8fc7\u8bb0\u5f55\u4e00\u4e2a\u8df3\u8f6c\u8868\u5b9e\u73b0\u591a\u4e2a\u5206\u652f\u7684\u8df3\u8f6c</li> </ul> </li> <li> <p>basic block</p> <ul> <li>\u6ca1\u6709\u5206\u652f\u7ed3\u6784\u7684\u4ee3\u7801\u5757\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u4f18\u5316\u624b\u6bb5\u63d0\u9ad8\u6027\u80fd</li> </ul> </li> <li> <p>procedure call</p> <ul> <li> <p>caller: jal ra, procedure (PC + 4 -&gt; ra, PC -&gt; procedure)</p> </li> <li> <p>callee: jalr x0, 0(ra) (ra -&gt; PC)</p> </li> <li> <p>\u4f7f\u7528 sp \u6808\u6307\u9488\u5f00\u8f9f\u6808\u7a7a\u95f4\uff0c\u5c06\u53c2\u6570\u4fdd\u5b58\u5728\u6808\u4e2d\u5e76\u5728\u8c03\u7528\u7ed3\u675f\u540e\u91ca\u653e\u6808\u7a7a\u95f4\uff0c\u6062\u590d\u76f8\u5e94\u7684\u5bc4\u5b58\u5668\u3002</p> <ul> <li> <p>ra \u4fdd\u5b58\u8fd4\u56de\u5730\u5740</p> </li> <li> <p>\u901a\u8fc7 sp + offset / fp\uff08\u8fdb\u5165\u7a0b\u5e8f\u65f6\u7684\u6808\u9876\uff09 + offset \u7684\u65b9\u5f0f\u8bbf\u95ee\u6808\u4e2d\u7684\u6570\u636e</p> </li> <li> <p>a0 - a7 \u7528\u4e8e\u4f20\u9012\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u901a\u8fc7 a0 \u4f20\u9012</p> </li> <li> <p>t0 - t6 \u4e3a\u4e34\u65f6\u53d8\u91cf\uff0c\u53ef\u4ee5\u4e0d\u7528\u7ba1</p> </li> <li> <p>s0 - s11 \u5fc5\u987b\u4fdd\u5b58</p> </li> </ul> </li> <li> <p>leaf procedure(\u6ca1\u6709\u9012\u5f52\u8c03\u7528): exhaustively use temporary registers then must-saved registers</p> </li> <li> <p>atomic operation</p> <ul> <li> <p>\u9501\u5b58\u6307\u4ee4\u5bf9\uff0c\u5982</p> <pre><code>lr.d rd1, (rs) (load reserve)\n\nsc.d rd2, (rs1), rs2 (store conditional)\n</code></pre> <p>\u5728\u8bfb\u53d6\u6570\u636e\u7684\u540c\u65f6\uff0c\u5c06\u6570\u636e\u9501\u5b9a</p> <p>\u5728\u5199\u5165\u6570\u636e\u7684\u65f6\u5019\uff0c\u68c0\u67e5\u6570\u636e\u662f\u5426\u88ab\u4fee\u6539(rd1 = 0)\uff0c\u5982\u679c\u6ca1\u6709\u5219\u5199\u5165</p> <p>\u6700\u7ec8\u7ed3\u679c\u4e3a\uff08rd2 = 0\uff09\u5219\u5199\u5165\u6210\u529f(rd1 = rs, rs1 = rs2)\uff0c\u5426\u5219\u5199\u5165\u5931\u8d25</p> atomic swap<pre><code>again:\n    lr.d x10, (x20)     // load-reserve Mem[x20] to x10(x10 = 0 now)\n    sc.d x11, (x20), x23// store-conditional x23 to Mem[x20]\n    bne x11, x0, again  // if x11 != 0, failed\n    add x23, x0, x10    // swap x23 and Mem[x20]\n</code></pre> </li> </ul> </li> </ul> </li> </ul> <p></p> <ul> <li> <p>Compiler -&gt; Assembly Language</p> </li> <li> <p>Assembler -&gt; Object Module</p> <p></p> <p></p> </li> <li> <p>Linker -&gt; Executable Program</p> <ul> <li> <p>Static Linking</p> <ul> <li>\u5c06\u6240\u6709\u7684\u5e93\u6587\u4ef6\u90fd\u94fe\u63a5\u5230\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u4e2d</li> </ul> </li> <li> <p>Dynamic Linking</p> <ul> <li>\u5728\u8fd0\u884c\u65f6\u518d\u94fe\u63a5\u4f7f\u7528\u5230\u7684\u5e93\u6587\u4ef6\u51fd\u6570</li> </ul> </li> </ul> <p></p> </li> <li> <p>Loader</p> <p></p> </li> </ul>"},{"location":"RiscV/#_4","title":"\u7a0b\u5e8f\u7f16\u8bd1","text":""},{"location":"RiscV/#chapter-3","title":"Chapter 3","text":""},{"location":"RiscV/#_5","title":"\u6570\u7684\u8868\u793a","text":"<ul> <li>\u5728\u5404\u79cd\u8bfe\u7a0b\u5185\u5df2\u7ecf\u51fa\u73b0\u8fc7\u597d\u591a\u6b21\u4e86\uff0c\u6ca1\u4ec0\u4e48\u7279\u522b\u597d\u8bf4\u7684</li> </ul>"},{"location":"RiscV/#_6","title":"\u8fd0\u7b97","text":"<ul> <li> <p>\u5173\u4e8e overflow \uff08\u540c\u53f7\u76f8\u52a0\u51fa\u5f02\u53f7\uff09\u7684\u5904\u7406 \uff08\u6700\u540e\u4e00\u4f4d Cin xor Cout = 1\uff09</p> <ul> <li> <p>ALU detection</p> <ul> <li>Exception</li> </ul> </li> <li> <p>Overflow log</p> <ul> <li>Store instruction address in a special register EPC</li> </ul> </li> <li> <p>Jump to exception handler</p> <ul> <li> <p>Correct &amp; Return</p> </li> <li> <p>Return with error code</p> </li> <li> <p>Abort program</p> </li> </ul> </li> </ul> </li> <li> <p>Addition</p> <ul> <li> <p>Carry Ripple Adder (\u6570\u903b\u8bb2\u8fc7\uff0c\u7565)</p> </li> <li> <p>Carry Lookahead Adder (CLA)</p> <ul> <li> <p>Generate: Gi = Ai &amp; Bi</p> </li> <li> <p>Propagate: Pi = Ai | Bi</p> </li> <li> <p>Carry: Ci = Gi | (Pi &amp; Ci-1) </p> <p>\u5c06\u9012\u63a8\u5f0f\u4e0d\u65ad\u5c55\u5f00\uff0c\u53ef\u4ee5\u5f97\u5230\u6bcf\u4e00\u4e2aCi\u7684\u8868\u8fbe\u5f0f\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5e76\u884c\u8fdb\u884c\u6bcf\u4e00\u4f4d\u7684\u8ba1\u7b97\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u901f\u5ea6</p> <p>\u4e0d\u8fc7\u968f\u7740\u4f4d\u6570\u7684\u4e0d\u65ad\u589e\u52a0\uff0c\u786c\u4ef6\u590d\u6742\u5ea6\u4e5f\u4f1a\u4e0d\u65ad\u589e\u52a0\uff0c\u56e0\u6b64\u5b9e\u9645\u4e0a\u5c06\u4f1a\u6bcf4\u4f4d\u6216\u80058\u4f4d\u4f5c\u4e3a\u4e00\u4e2a\u5355\u5143\uff0c\u7136\u540e\u518d\u8fdb\u884c\u5e76\u884c\u8ba1\u7b97</p> <p></p> <p>\u5982\u4e0a\u56fe\uff0c\u6839\u636e\u8f93\u5165\uff0c\u901a\u8fc7\u6bcf\u4e2a\u5c0f\u5355\u5143\u91cc\u7684CLA \u53ef\u4ee5\u7b97\u51fa\u6bcf\u4e2a\u5c0f pi, gi</p> <p>\u540c\u65f6\uff0c\u53ef\u4ee5\u8ba1\u7b97\u5f97\u51fa\u6bcf\u4e2a\u5927\u7684 Pi, Gi, \u7136\u540e\u901a\u8fc7\u5927\u7684 CLA \u53ef\u4ee5\u5f97\u51fa\u6bcf\u4e2a\u5927\u7684 Ci</p> <p>\u8fd9\u4e2aCi\u518d\u4f20\u5165\u6bcf\u4e2a\u5c0f\u7684 CLA\uff0c \u5c31\u53ef\u4ee5\u5e76\u884c\u7b97\u51fa\u6700\u7ec8\u7684\u7ed3\u679c\u4e86</p> </li> </ul> </li> <li> <p>Carry Select Adder (CSA)</p> <ul> <li> <p>\u5229\u7528 \u9884\u6d4b &amp; \u5197\u4f59\u7684\u65b9\u6cd5</p> </li> <li> <p>\u76f8\u5f53\u4e8e\u5bf9\u4e0a\u8ff0CLA\u7684\u4e00\u4e2a\u6539\u8fdb\uff0c\u9884\u5148\u5c06 Cin = 0 / 1 \u7684\u53ef\u80fd\u503c\u90fd\u7b97\u51fa\u6765\uff0c\u7136\u540e\u6839\u636e\u8f93\u5165\u7684 Cin \u9009\u62e9\u5176\u4e2d\u4e00\u4e2a  </p> </li> </ul> </li> <li> <p>slt (set less than)</p> <ul> <li>a &lt; b --&gt; a - b &lt; 0 </li> </ul> </li> </ul> </li> <li> <p>Multiplier &amp;&amp; Division</p> </li> </ul> <p>\u4f6c\u7684\u7b14\u8bb0\u5f88\u8be6\u7ec6\u4e86</p> <p>\u6838\u5fc3\u5c31\u662f\u5145\u5206\u5229\u7528\u7ed3\u679c\u5bc4\u5b58\u5668\uff0c\u5c06 \u4e58\u6570 / \u88ab\u9664\u6570 \u653e\u5230\u5bc4\u5b58\u5668\u7684\u53f3\u534a\u5197\u4f59\u90e8\u5206\u8fdb\u884c\u8fd0\u7b97\uff0c\u5e76\u4e14\u53d8\u4e58\u9664\u6cd5\u4e3a\u52a0\u51cf\u6cd5</p> <p>Booth \u7b97\u6cd5\uff0c\u51cf\u5c11\u201c1\u201d \u7684\u4e2a\u6570\uff0c\u63d0\u9ad8\u6548\u7387\uff0c\u6bcf\u4e00\u4e32\u201d1\u201c\u53ea\u9700\u8981\u8fd0\u7b97\u4e24\u6b21</p> <ul> <li> <p>Float</p> <p>\u5404\u79cd\u8bfe\u8bb2\u8fc7\u5f88\u591a\u6b21\u4e86\uff0c\u7565</p> <p>\u7279\u6b8a\u6807\u8bb0\uff1a</p> <p></p> <ul> <li> <p>Accurate Arithmetic</p> <ul> <li> <p>guard bit</p> <ul> <li>\u7cbe\u786e\u4f4d\u6570\u53f3\u8fb9\u7684\u4e00\u4f4d</li> </ul> </li> <li> <p>round bit</p> <ul> <li>\u7cbe\u786e\u4f4d\u6570\u53f3\u8fb9\u7684\u7b2c\u4e8c\u4f4d </li> </ul> </li> <li> <p>sticky bit </p> <ul> <li>\u7cbe\u786e\u4f4d\u6570\u53f3\u8fb9\u7684\u7b2c\u4e09\u4f4d\u53ca\u4ee5\u540e\u7684\u4f4d\u6570\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u4e3a1\uff0c\u5c31\u7f6e\u4e3a1</li> </ul> </li> <li> <p>method</p> <p></p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"RiscV/#chapter-4","title":"Chapter 4","text":"<p>\u5173\u4e8e \u5355\u5468\u671f\u548c\u6d41\u6c34\u7ebf \u4f6c\u7684\u7b14\u8bb0\u5df2\u7ecf\u5f88\u8be6\u7ec6\u4e86\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u540e\u9762\u7684ILP\u548cInt\u76f8\u5173\u7684\u5185\u5bb9</p>"},{"location":"RiscV/#ilpinstruction-level-parallelism","title":"ILP\uff08Instruction Level Parallelism\uff09","text":"<p>\u4e3a\u4e86\u63d0\u5347\u6307\u4ee4\u7ea7\u5e76\u884c\u7a0b\u5ea6\uff0c\u4e00\u822c\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li> <p>Deeper Pipeline</p> <p>\u589e\u52a0\u6d41\u6c34\u7ebf\u7ea7\u6570\uff0c\u4ece\u800c\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u66f4\u591a\u6307\u4ee4\uff0c\u540c\u65f6\u65f6\u949f\u5468\u671f\u53d8\u77ed</p> </li> <li> <p>Multiple Issue</p> <p>\u4e00\u6b21\u53d1\u5c04\u591a\u6761\u6307\u4ee4\uff0c\u6216\u8005\u8bf4\u540c\u65f6\u8fd0\u884c\u591a\u6761\u6d41\u6c34\u7ebf</p> <p>\u4e3b\u8981\u5904\u7406\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li> <p>\u6307\u4ee4\u6253\u5305\uff08packaging\uff09\u5e76\u653e\u5165\u53d1\u5c04\u69fd\uff08issue slot\uff09</p> </li> <li> <p>\u6570\u636e\u548c\u63a7\u5236\u5192\u9669</p> </li> </ul> </li> </ul> Tip <p></p>"},{"location":"RiscV/#static-multiple-issue","title":"Static Multiple Issue","text":"<p>Packet\uff1aVLIW\uff08Very Long Instruction Word\uff09\uff0c\u4e00\u822c\u8981\u6c42\u5bf9\u9f50\uff08\u53ef\u4ee5\u52a0nop\uff09</p> <p>\u5e38\u7528\u7684\u53cc\u53d1\u5c04</p> <p></p> <ul> <li> <p>Ex harzard:</p> <p>\u53ea\u80fd\u5206\u5f00\u5230\u4e0d\u540c\u7684Packet\u4e2d\uff0c\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528</p> </li> <li> <p>Load-Use Hazard:</p> <p>\u8981\u628a\u5e76\u884c\u7684\u6d41\u6c34\u7ebf\u5168\u90e8\u505c\u6389\uff0c\u7b49\u5f85Load\u5b8c\u6210</p> </li> <li> <p>Unrolling Loop:</p> <p>\u901a\u8fc7\u5c55\u5f00\u5faa\u73af\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd</p> <p>Register Renaming</p> <p>\u5faa\u73af\u5c55\u5f00\u540e\uff0c\u4e3a\u6bcf\u4e00\u5c42\u5faa\u73af\u5f15\u5165\u65b0\u7684\u5bc4\u5b58\u5668\uff0c\u6d88\u9664\u4e00\u4e9b\u6570\u636e\u5192\u9669</p> <p>\u5373\u6d88\u9664\u53cd\u76f8\u5173\uff08anti-dependence\uff09\uff08name dependence\uff09</p> </li> </ul>"},{"location":"RiscV/#dynamic-multiple-issue","title":"Dynamic Multiple Issue","text":"<p>\u7531\u52a8\u6001\u591a\u53d1\u5c04\u5904\u7406\u5668\uff08Superscalar processors\uff09\u52a8\u6001\u8c03\u5ea6\u6765\u63d0\u9ad8\u6027\u80fd\uff0c\u629b\u5f03\u7f16\u8bd1\u5668\u7684\u4e00\u4e9b\u9759\u6001\u8c03\u5ea6\uff0c\u5f62\u6210\u52a8\u6001\u8c03\u5ea6\u6d41\u6c34\u7ebf</p> <p></p> <ul> <li> <p>\u53d1\u5c04\u65f6\u4f1a\u5c06\u6307\u4ee4\u5b58\u5230\u4fdd\u7559\u7ad9\uff08reservation station\uff09\u4e2d\uff0c\u7b49\u5f85\u76f8\u5173\u6570\u636e\u51c6\u5907\u597d\uff0c\u76f8\u5f53\u4e8e\u5b8c\u6210\u5bc4\u5b58\u5668\u91cd\u547d\u540d</p> </li> <li> <p>\u4e2d\u95f4\u6267\u884c\u5355\u5143\uff08execution unit\uff09\u4f1a\u6839\u636e\u6570\u636e\u7684\u51c6\u5907\u60c5\u51b5\uff0c\u968f\u65f6\u51c6\u5907\u6267\u884c</p> </li> <li> <p>\u4e00\u822c\u53d6\u503c\u548c\u8bd1\u7801\u6309\u5e8f\u8fdb\u884c\uff0c\u5185\u90e8\u7684\u6267\u884c\u5355\u5143\u4e71\u5e8f\u6267\u884c\uff0c\u6700\u540e\u63d0\u4ea4\u9636\u6bb5\u4e00\u822c\u4e5f\u5e38\u7528\u6309\u5e8f\u63d0\u4ea4</p> </li> </ul>"},{"location":"RiscV/#speculation","title":"Speculation","text":"<p>\u4e0d\u7ba1\u662f\u9759\u6001\u8fd8\u662f\u52a8\u6001\uff0c\u90fd\u4f1a\u4f7f\u7528\u4e00\u4e9b\u9884\u6d4b\u6280\u672f\u6765\u63d0\u9ad8\u6027\u80fd\uff0c\u5982\u7f16\u8bd1\u9636\u6bb5\u3001\u786c\u4ef6\u6267\u884c\u9636\u6bb5\u9884\u6d4b\u5206\u652f\u3001\u9884\u6d4b\u8f7d\u5165\u7b49</p> <p>\u5f53\u9884\u6d4b\u9519\u8bef\u65f6\uff0c\u9700\u8981\u4e00\u5b9a\u624b\u6bb5\u8fdb\u884c\u56de\u6eda\uff1a</p> <p></p> <p>\u5f53\u9884\u6d4b\u65f6\u51fa\u73b0\u5f02\u5e38\uff0c\u4e00\u822c\u4f1a\u63a8\u8fdf\u5f02\u5e38\uff1a</p> <p></p>"},{"location":"RiscV/#interruption-exception","title":"Interruption &amp; Exception","text":"<p>\u5e7f\u4e49\u4e0a\uff0c\u53ef\u4ee5\u7c97\u7565\u5206\u6210\u4e0b\u9762\u4e24\u79cd\uff1a</p> <ul> <li> <p>Exception: Undefined Instruction &amp; Arithmetic Overflow</p> </li> <li> <p>Interrupt: System Call &amp; I/O Interrupt</p> </li> </ul>"},{"location":"RiscV/#_7","title":"\u67b6\u6784\u652f\u6301","text":"<ul> <li> <p>Risc-V mode</p> <p></p> <p></p> </li> <li> <p>Control and Status Registers (CSR)</p> <p>\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li> <p>\u666e\u901a\u7a0b\u5e8f\u63a7\u5236</p> </li> <li> <p>\u4e3a\u4e00\u4e9b\u9ad8\u7ea7\u6743\u9650\u7684\u6307\u4ee4\u63d0\u4f9b\u652f\u6301</p> </li> </ul> <p>Quote</p> <p> </p> <p></p> </li> </ul>"},{"location":"RiscV/#m-mode","title":"\u4e2d\u65ad\u5b9e\u73b0\uff08M-mode\u4e3a\u4f8b\uff09","text":"\u76f8\u5173\u5bc4\u5b58\u5668 \u6d41\u6c34\u7ebfCPU\u7ed3\u6784 <ul> <li> <p>MEPC</p> <ul> <li> <p>WARL (Write Any Read Legal): \u4efb\u4f55\u6a21\u5f0f\u90fd\u53ef\u4ee5\u5199\u4e0d\u4f1a\u51fa\u5f02\u5e38\uff0c\u4f46\u662f\u53ea\u6709Machine\u6a21\u5f0f\u53ef\u4ee5\u8bfb</p> </li> <li> <p>\u53d1\u751f\u5f02\u5e38\u7b49<code>ecall / ebreak</code>\uff0c<code>MEPC &lt;= PC</code></p> </li> <li> <p>\u53d1\u751f\u4e2d\u65ad\uff0c<code>MEPC &lt;= PC + 4</code></p> </li> <li> <p>\u4ece\u4e2d\u65ad\u8fd4\u56de <code>MRET</code>\uff0c<code>PC &lt;= MEPC</code> </p> </li> </ul> </li> <li> <p>MSTATUS</p> <p>\u786e\u5b9a\u5f53\u524d\u7684\u6743\u9650\u6a21\u5f0f\u548c\u4e2d\u65ad\u4f7f\u80fd</p> </li> <li> <p>MIE(Enable)/MIP(Pending)</p> <ul> <li> <p>\u4e2d\u65ad\u4f7f\u80fd</p> </li> <li> <p>\u5f53\u524d\u88ab\u6302\u8d77\u7684\u4e2d\u65ad</p> </li> </ul> </li> <li> <p>MTVEC(Machine Trap Vector Base Address)</p> <p></p> <ul> <li> <p>\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u7684\u57fa\u5730\u5740</p> </li> <li> <p>\u5f53\u524d\u7684mode</p> </li> <li> <p>\u67e5\u8868\u65b9\u5f0f\uff1a</p> <p> </p> </li> </ul> </li> <li> <p>MCAUSE</p> <p></p> <ul> <li> <p>WLRL\uff08Write Legal Read Legal\uff09\uff1a\u975e\u6cd5\u8bfb\u5199\u90fd\u4f1a\u89e6\u53d1\u5f02\u5e38</p> </li> <li> <p>Exception Code\u4e0emtvec\u7684\u5411\u91cf\u6a21\u5f0f\u76f8\u5bf9\u5e94\uff0c\u5728\u5f02\u6b65\u4e2d\u65ad\u65f6\uff0c\u4e0d\u540c\u7684\u6a21\u5f0f\u4f1a\u8df3\u8f6c\u5230\u4e0d\u540c\u7684\u5165\u53e3</p> </li> </ul> </li> </ul> <p>\u5177\u4f53\u6b65\u9aa4</p> <p></p> <p>*\u591a\u4e2a\u4e2d\u65ad\u53d1\u751f\u65f6\uff1a</p> <ul> <li> <p>\u66b4\u529b\u9009\u62e9\u5904\u7406\u6700\u65e9\u7684</p> </li> <li> <p>\u7cbe\u786e\u5b9a\u4f4d</p> </li> <li> <p>\u590d\u6742\u591a\u53d1\u5c04\u4e71\u5e8f\u6267\u884c\uff1aGG\uff0c\u592a\u590d\u6742  </p> </li> </ul>"},{"location":"RiscV/#_8","title":"\u4e2d\u65ad\u7ea7\u522b","text":""},{"location":"RiscV/#chapter-6","title":"Chapter 6","text":"<p>\u8003\u8bd5\u5e94\u8be5\u6d89\u53ca\u7684\u4e0d\u591a\uff0c\u8fd9\u91cc\u7b80\u5355\u7684\u8bb0\u5f55\u4e00\u4e0b\u4e00\u4e9b\u96f6\u788e\u7684\u516c\u5f0f\u548c\u6982\u5ff5</p> <p>Amdahl's Law</p> <p>\u8bf4\u660e\u4e86\u4e32\u884c\u90e8\u5206\u5bf9\u5e76\u884c\u5316\u6548\u7387\u7684\u5f71\u54cd</p> <ul> <li> <p>\\(Speedup = \\frac{1}{(1 - f) + \\frac{f}{s}}\\)</p> </li> <li> <p>f: \u88ab\u5e76\u884c\u5316\u7684\u90e8\u5206\u7684\u6bd4\u4f8b</p> </li> <li> <p>s: \u5e76\u884c\u5316\u90e8\u5206\u7684\u52a0\u901f\u6bd4</p> </li> </ul>"},{"location":"RiscV/#disk-storage-and-dependability","title":"Disk Storage and Dependability","text":"<ul> <li> <p>Disk</p> <ul> <li> <p>\u7279\u5f81</p> <p></p> </li> <li> <p>\u7ed3\u6784</p> <ul> <li> <p>Platter (\u76d8\u7247)\uff0c\u4e00\u822c\u4e3a\u5806\u53e0\u7684\u591a\u4e2a\u76d8\u7247</p> </li> <li> <p>Track (\u78c1\u9053)\uff0c\u76d8\u7247\u4e0a\u7684\u4e00\u5708</p> </li> <li> <p>Sector (\u6247\u533a)\uff0c\u78c1\u9053\u4e0a\u7684\u4e00\u4e2a\u7247\u6bb5  </p> </li> </ul> <p></p> </li> <li> <p>\u64cd\u4f5c</p> \\[ latency = seek + rotation + transfer + controller \\] <ul> <li> <p>Seek Time (\u5bfb\u9053\u65f6\u95f4)</p> <p>minimum\u3001average\uff08\u4e00\u822c\u7ed9\u51fa\u8fd9\u4e2a\u5e38\u6570\uff09\u3001maximum</p> </li> <li> <p>Rotational Latency (\u65cb\u8f6c\u5ef6\u8fdf)</p> \\[ \u5e73\u5747\u5ef6\u8fdf_{\u65cb\u8f6c} =  \\frac{0.5 \u5708}{\u8f6c\u901f} \\] </li> <li> <p>Transfer Time (\u4f20\u8f93\u65f6\u95f4)</p> \\[ \u4f20\u8f93\u65f6\u95f4 = \\frac{\u6570\u636e\u5927\u5c0f}{\u4f20\u8f93\u901f\u5ea6} \\] </li> <li> <p>Disk Controller\uff08\u63a7\u5236\u5668\u8017\u65f6\uff09</p> <p>\u4e00\u822c\u4e3a\u7ed9\u5b9a\u5e38\u6570</p> </li> </ul> </li> </ul> </li> </ul> Flash <p>Nonvolatile semiconductor storage\uff08\u975e\u6613\u5931\u6027\u534a\u5bfc\u4f53\u5b58\u50a8\u5668\uff09</p> <p>\u76f8\u6bd4\u78c1\u76d8\uff0c\u66f4\u5c0f\u66f4\u5feb\u66f4\u597d\u7528\uff0c\u4e0d\u8fc7\u6709\u64e6\u5199\u4e0a\u9650</p> <p></p> <ul> <li> <p>\u6027\u80fd\u4f18\u5316\uff1a</p> <ul> <li> <p>\u4eba\u4e3a\u8c03\u6574\u8bbf\u5b58\u987a\u5e8f\u4ee5\u51cf\u5c0fseek time</p> </li> <li> <p>\u66f4\u597d\u7684\u63a7\u5236\u5668</p> </li> <li> <p>\u52a0\u7f13\u5b58</p> </li> </ul> </li> <li> <p>\u6709\u6548\u6027\uff1a</p> <p></p> <ul> <li> <p>Fault Avoidance\uff1a\u751f\u4ea7\u7ed3\u6784\u4e0a\u5c3d\u91cf\u907f\u514d</p> </li> <li> <p>Fault Tolerance\uff1a\u901a\u8fc7\u5197\u4f59\u8bbe\u8ba1\uff0c\u5728\u51fa\u73b0\u6545\u969c\u65f6\u53ef\u4ee5\u6062\u590d\u6b63\u5e38\u8fd0\u884c</p> </li> <li> <p>Fault Forecasting\uff1a\u5c1d\u8bd5\u9884\u6d4b\u6545\u969c\u53d1\u751f</p> </li> </ul> </li> <li> <p>\u53ef\u9760\u6027\uff1a</p> <p>\u7c97\u7565\u4f30\u8ba1</p> <p>\u5982\u679c\u4f7f\u7528 n \u4e2a\u72ec\u7acb\u7684\u5c0f\u78c1\u76d8\u6765\u5145\u5f53\u4e00\u4e2a\u5927\u78c1\u76d8\uff0c\u90a3\u4e48\u5927\u78c1\u76d8\u7684\u53ef\u9760\u6027\u8ba4\u4e3a\u662f\u5c0f\u78c1\u76d8\u53ef\u9760\u6027\u7684\\(\\frac{1}{n}\\)</p> <ul> <li> <p>RAID(Redundant Array of Inexpensive Disks)</p> <p></p> <ul> <li> <p>RAID 0\uff1aNo Redundancy</p> <p>\u65e0\u5197\u4f59\uff0c\u63d0\u9ad8\u6027\u80fd</p> </li> <li> <p>RAID 1\uff1aDisk Mirroring/Shadowing</p> <p>\u76f4\u63a5\u955c\u50cf\u590d\u5236\u4e00\u4efd\uff0c\u6700\u9ad8\u4ee3\u4ef7\uff0c\u6700\u9ad8\u53ef\u9760\u6027</p> </li> <li> <p>RAID 2</p> <p>\u901a\u8fc7 Hamming Code \u8fdb\u884c\u7ea0\u9519</p> <p>\u5177\u6709\u68c0\u9519\u548c\u7ea0\u9519\u80fd\u529b\uff0c\u68c0\u6d4b\u80fd\u529b\u8d8a\u5f3a\uff0c\u76f8\u5e94\u7684\u6570\u636e\u5197\u4f59\u4e5f\u8d8a\u5927</p> Hamming Code <p>\u901a\u8fc7\u6dfb\u52a0\u5197\u4f59\u4f4d\uff0c\u5bf9\u5176\u4e2d\u90e8\u5206\u4f4d\uff08\u5b50\u96c6\uff09\u8fdb\u884c\u5947\u5076\u6821\u9a8c\uff0c\u4ece\u800c\u6839\u636e\u591a\u4e2a\u6821\u9a8c\u4f4d\u7684\u7ed3\u679c\u6765\u5224\u65ad\u51fa\u9519\u7684\u4f4d\u7f6e</p> <p>\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u6570\u5b66\u7ec4\u5408\u65b9\u6cd5</p> <p>\u4f46\u662f\u7ea0\u9519\u80fd\u529b\u6709\u9650\uff0c\u53ea\u80fd\u9002\u7528\u4e8e\u9519\u8bef\u7387\u8f83\u4f4e\u7684\u573a\u666f</p> </li> <li> <p>RAID 3\uff1aBit-Interleaved Parity Disk</p> <p>\u4e3a\u6bcf\u4e00\u4f4d\u6570\u636e\u6dfb\u52a0\u4e00\u4e2a\u5947\u5076\u6821\u9a8c\u4f4d\uff0c\u7528\u4e8e\u68c0\u6d4b\u9519\u8bef\u548c\u6062\u590d\u6570\u636e</p> <p>\u8fd9\u6837\u53ef\u4ee5\u6062\u590d\u4e00\u4e2a\u78c1\u76d8\u7684\u6570\u636e\uff0c\u4f46\u662f\u65e0\u6cd5\u6062\u590d\u591a\u4e2a\u78c1\u76d8\u7684\u6570\u636e</p> <p></p> </li> <li> <p>RAID 4\uff1aBlock-Interleaved Parity Disk</p> <p>\u7c7b\u4f3c\u4e8e RAID 3\uff0c\u4f46\u662f\u662f\u4ee5\u5757\uff08stride\uff09\u4e3a\u5355\u4f4d\u8fdb\u884c\u5947\u5076\u6821\u9a8c\uff08\u4e00\u5217\u4e3a\u4e00\u4e2a\u78c1\u76d8\uff09</p> <p>little read\u53ea\u8981\u8bfb\u53d6\u4e00\u4e2a\u78c1\u76d8\u5c31\u53ef\u4ee5\u4e86\uff0c\u800c\u4e0d\u9700\u8981\u8bfb\u53d6\u6240\u6709\u7684\u78c1\u76d8</p> <p>little write\u9700\u8981\u6839\u636e\u6570\u636e\u53d8\u5316\u91cd\u65b0\u8ba1\u7b97\u5947\u5076\u6821\u9a8c\u4f4d\uff08\u4e24\u6b21\u5f02\u6216\uff09\uff0c\u7136\u540e\u5199\u5165</p> <p>large write\u4f1a\u5199\u5165\u4e00\u6574\u884c\uff0c\u53ef\u4ee5\u76f4\u63a5\u91cd\u65b0\u8ba1\u7b97\u6574\u4e2a\u6821\u9a8c\u5757</p> <p></p> </li> <li> <p>RAID 5\uff1aBlock-Interleaved Distributed Parity</p> <p>\u7531\u4e8e\u6bcf\u6b21\u5199\u5165\u64cd\u4f5c\u90fd\u4f1a\u4fee\u6539\u6821\u9a8c\u5757\uff0c\u4f46\u662f RAID 4 \u7684\u6821\u9a8c\u5757\u662f\u5728\u4e00\u4e2a\u78c1\u76d8\u4e0a\uff0c\u56e0\u6b64\u4f1a\u9020\u6210\u963b\u585e\u74f6\u9888</p> <p>\u56e0\u6b64 RAID 5 \u5c06\u6821\u9a8c\u5757\u5206\u5e03\u5230\u6240\u6709\u7684\u78c1\u76d8\u4e0a\uff0c\u8fd9\u6837\u6bcf\u6b21\u5199\u5165\u64cd\u4f5c\u90fd\u4f1a\u4fee\u6539\u4e0d\u540c\u7684\u6821\u9a8c\u5757\uff0c\u63d0\u9ad8\u4e86\u6027\u80fd</p> <p></p> </li> <li> <p>RAID 6\uff1aP+Q Redundancy</p> <p>\u5bb9\u6613\u53d1\u73b0\uff0c\u524d\u9762\u7684\u65b9\u6cd5\u90fd\u53ea\u80fd\u6062\u590d\u4e00\u4e2a\u78c1\u76d8\u7684\u6570\u636e\uff0c\u56e0\u6b64 RAID 6 \u5f15\u5165\u4e86\u4e24\u4e2a\u6821\u9a8c\u5757\uff0c\u53ef\u4ee5\u6062\u590d\u81f3\u591a\u4e24\u4e2a\u78c1\u76d8\u7684\u6570\u636e</p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"RiscV/#buses-and-other-connections","title":"Buses and Other Connections","text":"<ul> <li> <p>\u7c7b\u578b</p> <p></p> </li> <li> <p>\u5185\u5b58</p> <p></p> history <p></p> <p></p> </li> <li> <p>Synchronous vs. Asynchronous</p> <ul> <li> <p>\u540c\u6b65\uff1a\u65f6\u949f\u4fe1\u53f7\u540c\u6b65</p> </li> <li> <p>\u5f02\u6b65\uff1a\u65e0\u9700\u65f6\u949f\u4fe1\u53f7\u540c\u6b65  </p> <p></p> <ol> <li> <p>I/O\u53d1\u51fa\u8bfb\u8bf7\u6c42\uff0c\u5185\u5b58\u8bfb\u5230\u4fe1\u53f7\uff0c\u4ece\u6570\u636e\u603b\u7ebf\u8bfb\u53d6\u5730\u5740\uff0c\u5e76\u53d1\u51faAck\u4fe1\u53f7\u786e\u8ba4</p> </li> <li> <p>I/O \u8bfb\u53d6\u5230Ack\u4fe1\u53f7\uff0c\u505c\u6b62\u53d1\u51fa\u8bf7\u6c42\uff0c\u7b49\u5f85\u6570\u636e</p> </li> <li> <p>\u5185\u5b58\u53d1\u73b0\u8bf7\u6c42\u4fe1\u53f7\u6d88\u5931\uff0c\u5b8c\u6210\u4e00\u6b21\u63e1\u624b\uff0c\u505c\u6b62Ack\u4fe1\u53f7</p> </li> <li> <p>\u5185\u5b58\u8bfb\u53d6\u5bf9\u5e94\u6570\u636e\uff0c\u5199\u5165\u6570\u636e\u603b\u7ebf\uff0c\u5e76\u53d1\u51faData Ready\u4fe1\u53f7</p> </li> <li> <p>I/O \u8bfb\u53d6\u5230Data Ready\u4fe1\u53f7\uff0c\u4ece\u6570\u636e\u603b\u7ebf\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u53d1\u51faAck\u4fe1\u53f7\u786e\u8ba4\u8bfb\u53d6\u5b8c\u6bd5</p> </li> <li> <p>\u5185\u5b58\u8bfb\u5230Ack\u4fe1\u53f7\uff0c\u505c\u6b62\u53d1\u51fa\u6570\u636e\uff0c\u5e76\u4e0d\u518d\u53d1\u51faData Ready\u4fe1\u53f7</p> </li> <li> <p>I/O \u53d1\u73b0Ack\u4fe1\u53f7\u6d88\u5931\uff0c\u5b8c\u6210\u4e00\u6b21\u63e1\u624b\uff0c\u505c\u6b62Ack\u4fe1\u53f7\uff0c\u6574\u4e2a\u6570\u636e\u8bfb\u53d6\u8fc7\u7a0b\u7ed3\u675f</p> </li> </ol> </li> </ul> Example <p>\u5f02\u6b65\u5e26\u5bbd\u6ca1\u6709\u540c\u6b65\u9ad8\uff0c\u4f46\u662f\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u591a\u4e2a\u64cd\u4f5c\uff0c\u56e0\u6b64\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\u5f02\u6b65\u66f4\u52a0\u9002\u7528</p> <p></p> <p> </p> </li> <li> <p>Bus Arbitration</p> <p>\u4e3a\u5904\u7406\u591a\u4efb\u52a1\uff0cBus\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u8bf7\u6c42\uff0c\u56e0\u6b64\u9700\u8981\u4e00\u4e2a\u4ef2\u88c1\u5668\u6765\u51b3\u5b9a\u54ea\u4e2a\u8bf7\u6c42\u4f18\u5148</p> <p></p> </li> <li> <p>Increase Bandwidth</p> <p></p> <p>transfer time\uff08\u540c\u6b65\uff09</p> <ul> <li> <p>\u4f20\u8f93\u5730\u5740\u65f6\u95f4</p> </li> <li> <p>\u8bfb\u6570\u636e\u65f6\u95f4</p> </li> <li> <p>\u4f20\u8f93\u6570\u636e\u65f6\u95f4(\u8fd9\u91cc\u4e00\u822c\u4e0e\u6570\u636e\u603b\u7ebf\u7684\u5bbd\u5ea6\u6709\u5173)</p> </li> <li> <p>\u4f20\u8f93\u95f4\u9694\u65f6\u95f4\u7b49\u7279\u6b8a\u65f6\u95f4</p> </li> </ul> </li> <li> <p>Interfacing</p> I/O \u4ea4\u4e92\u7684\u7279\u5f81 <p></p> <p></p> </li> <li> <p>\u4ea4\u4e92\u65b9\u5f0f</p> <p></p> <ul> <li> <p>Interrupt-Driven I/O mode</p> <ul> <li> <p>\u901a\u8fc7\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\uff0cCPU\u53ef\u4ee5\u6682\u505c\u5f53\u524d\u64cd\u4f5c\uff0c\u5904\u7406\u4e2d\u65ad\u8bf7\u6c42</p> </li> <li> <p>\u53ef\u4ee5\u5904\u7406\u9ad8\u5e76\u53d1\u6027</p> </li> </ul> <p>\u8ba1\u7b97\uff1a\u76f8\u5f53\u4e8e\u5728polling\u7684\u57fa\u7840\u4e0a\u4e58\u4ee5\u64cd\u4f5c\u6bd4\u4f8b</p> </li> <li> <p>Direct Memory Access (DMA)</p> <p></p> <p>\u4e0d\u9700\u8981 CPU \u53c2\u4e0e\uff0c\u76f4\u63a5\u901a\u8fc7 DMA \u63a7\u5236\u5668\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c\u4e0d\u4f1a\u5360\u7528 CPU \u7684\u529f\u6548</p> <p>\u8ba1\u7b97\uff1a\u5173\u6ce8\u6570\u636e\u4f20\u8f93\u65f6\u95f4</p> </li> <li> <p>Polling</p> <ul> <li> <p>CPU \u4e0d\u65ad\u67e5\u8be2 I/O \u72b6\u6001\uff0c\u76f4\u5230 I/O \u5b8c\u6210</p> </li> <li> <p>\u4f1a\u6d6a\u8d39 CPU \u7684\u529f\u6548</p> </li> </ul> <p>\u8ba1\u7b97\uff1a\u9891\u7387 * polling \u65f6\u95f4</p> </li> </ul> </li> <li> <p>bottleneck\u8ba1\u7b97</p> <ul> <li> <p>min(Maximum I/O rate of CPU, Maximum I/O rate of bus)</p> <p></p> </li> <li> <p>Time per I/O</p> <p></p> <p>\u4ece\u800c\u53ef\u4ee5\u83b7\u5f97\u6240\u9700disk\u7684\u541e\u5410\u91cf\uff0c\u4ece\u800c\u8ba1\u7b97\u5f97\u6700\u5c11disk\u4e2a\u6570</p> </li> <li> <p>Bus</p> <p></p> </li> </ul> </li> </ul>"},{"location":"SD/","title":"UCB-Linux System Administration Decal","text":"<p>\u7cfb\u7edf\u5730\u5b66\u4e60\u4e00\u4e0blinux, \u8bb0\u5f55\u4e00\u4e9b\u77e5\u8bc6\u70b9\uff0c\u5305\u62ec\u8bfe\u7a0b\u8bb2\u4e49\u3001\u5b9e\u9a8c\u7b49</p> <p>\u5b98\u7f51</p>"},{"location":"SD/#lectures","title":"Lectures","text":""},{"location":"SD/#license","title":"License","text":"<ul> <li> <p>Copyleft(GPL)</p> <p>All versions of the software remain free</p> <p>\u901a\u8fc7GPL\u534f\u8bae\uff0c\u8981\u6c42\u6e90\u7a0b\u5e8f\u5fc5\u987b\u516c\u5f00\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528\u3001\u4fee\u6539\u3001\u590d\u5236\u3001\u5206\u53d1\u6e90\u4ee3\u7801\uff0c\u4f46\u662f\u5fc5\u987b\u4fdd\u6301\u5f00\u6e90\uff0c\u5e76\u4e14\u4efb\u4f55\u4fee\u6539\u540e\u7684\u4ee3\u7801\u4e5f\u5fc5\u987b\u9075\u5b88GPL\u534f\u8bae\u3002</p> <p>Tip</p> <p>A quote from Richard Stallman, the founder of the Free Software Foundation, emphasizes his goal to maintain the freedom of GNU software: \"I want to make sure that all versions of GNU remain free.\"</p> <p>Steve Ballmer, former CEO of Microsoft, referred to the GPL as \"a cancer that attaches itself in an intellectual property sense to everything it touches.\" </p> <p>\u7531\u6b64\u53ef\u89c1\uff0cGPL\u7684\u5b8c\u5168\u5f00\u6e90\u4f1a\u5bf9\u884d\u751f\u7684\u5546\u4e1a\u8f6f\u4ef6\u4ea7\u751f\u4e0d\u53ef\u5ffd\u89c6\u7684\u201c\u5a01\u80c1\u201d</p> </li> <li> <p>Permissive\uff08MIT,BSD,Apache,WTFPL\uff09</p> <p>You can do whatever you want with the software, as long as you include the original copyright and license notice in any copy of the software/source.</p> <p>\u8fd9\u7c7b\u534f\u8bae\u5141\u8bb8\u7528\u6237\u81ea\u7531\u4f7f\u7528\u3001\u4fee\u6539\u3001\u590d\u5236\u3001\u5206\u53d1\u6e90\u4ee3\u7801\uff0c\u4f46\u662f\u4e0d\u9700\u8981\u4fdd\u6301\u5f00\u6e90\uff0c\u53ef\u4ee5\u95ed\u6e90\uff0c\u53ea\u8981\u5728\u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u539f\u59cb\u7248\u6743\u548c\u8bb8\u53ef\u901a\u77e5\u5373\u53ef\u3002</p> </li> </ul>"},{"location":"SD/#shell-scripting","title":"Shell Scripting","text":"<ul> <li> <p><code>#!</code>\uff1aShebang\uff0c\u6307\u5b9a\u89e3\u91ca\u5668(\u6267\u884c\u5668)\uff0c\u5982 <code>#!/bin/bash</code></p> </li> <li> <p>variable</p> <p>\u5728shell\u4e2d\u6ca1\u6709\u53d8\u91cf\u7c7b\u578b\u7684\u6982\u5ff5\uff0c\u4efb\u4f55\u53d8\u91cf\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u82e5\u8981\u8fdb\u884c\u6570\u5b66\u8fd0\u7b97\uff0c\u9700\u8981\u4f7f\u7528<code>expr</code> <code>$(( ))</code>\uff08\u4e2d\u95f4\u76f4\u63a5\u5199\u53d8\u91cf\u540d\uff0c\u4e0d\u7528\u52a0\u989d\u5916\u7b26\u53f7\uff09\u7b49\u547d\u4ee4</p> <ul> <li> <p><code>var=value</code>\uff1a\u8d4b\u503c\uff0c\u6ce8\u610f\u7b49\u53f7\u4e24\u8fb9\u4e0d\u80fd\u6709\u7a7a\u683c</p> </li> <li> <p><code>echo $var</code>\uff1a\u5f15\u7528</p> </li> <li> <p><code>\"\"</code>\uff1a\u5f15\u7528\u53d8\u91cf\uff0c\u53ef\u4ee5\u7528\u4e8e\u533a\u5206\u53d8\u91cf\u540d </p> </li> <li> <p><code>expr $var1 + $var2 / $(($var1 + $var2))</code>\uff1a\u52a0\u6cd5</p> </li> <li> <p><code>let var1=var2+var3</code>\uff1a\u52a0\u6cd5\uff0c<code>let</code>\u547d\u4ee4\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u6570\u5b66\u8fd0\u7b97\uff0c\u4e0d\u7528\u52a0<code>$</code>,\u4f46\u662f\u540c\u6837\u4e0d\u80fd\u6709\u7a7a\u683c</p> </li> </ul> bc <p>bc\u662f\u4e00\u4e2a\u7528\u4e8e\u6570\u5b66\u8fd0\u7b97\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u8fdb\u884c\u9ad8\u7cbe\u5ea6\u8ba1\u7b97\uff0c\u652f\u6301\u6d6e\u70b9\u6570\u8fd0\u7b97\uff0c\u53ef\u4ee5\u7528\u4e8eshell\u811a\u672c\u4e2d\u7684\u6570\u5b66\u8fd0\u7b97</p> <ul> <li> <p><code>echo \"var1+var2\" | bc</code>\uff1a\u52a0\u6cd5</p> </li> <li> <p><code>echo \"scale=2;var1/var2\" | bc</code>\uff1a\u9664\u6cd5\uff0c\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570   </p> </li> </ul> copilot\u6559\u7684 <ul> <li> <p><code>export var</code>\uff1a\u5bfc\u51fa</p> </li> <li> <p><code>unset var</code>\uff1a\u5220\u9664</p> </li> <li> <p><code>readonly var</code>\uff1a\u53ea\u8bfb</p> </li> <li> <p><code>var1=var2</code>\uff1a\u5f15\u7528</p> </li> <li> <p><code>var1=${var2}</code>\uff1a\u5f15\u7528</p> </li> <li> <p><code>var1=${var2:-value}</code>\uff1a\u5982\u679c<code>var2</code>\u4e3a\u7a7a\uff0c\u5219\u8d4b\u503c\u4e3a<code>value</code></p> </li> <li> <p><code>var1=${var2:=value}</code>\uff1a\u5982\u679c<code>var2</code>\u4e3a\u7a7a\uff0c\u5219\u8d4b\u503c\u4e3a<code>value</code>\uff0c\u5e76\u4e14<code>var2</code>\u4e5f\u88ab\u8d4b\u503c\u4e3a<code>value</code></p> </li> <li> <p><code>var1=${var2:+value}</code>\uff1a\u5982\u679c<code>var2</code>\u4e0d\u4e3a\u7a7a\uff0c\u5219\u8d4b\u503c\u4e3a<code>value</code></p> </li> <li> <p><code>var1=${var2:?message}</code>\uff1a\u5982\u679c<code>var2</code>\u4e3a\u7a7a\uff0c\u5219\u8f93\u51fa<code>message</code>\u5e76\u9000\u51fa</p> </li> </ul> </li> <li> <p><code>$</code></p> <ul> <li> <p><code>${}</code>\uff1a\u5f15\u7528\u53d8\u91cf\uff0c\u53ef\u4ee5\u7528\u4e8e\u533a\u5206\u53d8\u91cf\u540d</p> </li> <li> <p><code>$(command)</code>\uff1asubshell \u547d\u4ee4\u66ff\u6362\uff0c\u5373\u5185\u90e8\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c</p> </li> <li> <p><code>$0</code>\uff1a\u811a\u672c\u540d\u79f0</p> </li> <li> <p><code>$n</code>\uff1a\u7b2cn\u4e2a\u53c2\u6570</p> </li> <li> <p><code>$#</code>\uff1a\u53c2\u6570\u4e2a\u6570</p> </li> <li> <p><code>$*</code>\uff1a\u6240\u6709\u53c2\u6570</p> </li> <li> <p><code>$@</code>\uff1a\u6240\u6709\u53c2\u6570</p> </li> <li> <p><code>$?</code>\uff1a\u4e0a\u4e00\u4e2a\u547d\u4ee4\u7684\u8fd4\u56de\u503c</p> </li> <li> <p><code>$$</code>\uff1a\u5f53\u524d\u8fdb\u7a0b\u53f7</p> </li> <li> <p><code>$!</code>\uff1a\u540e\u53f0\u8fd0\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u53f7</p> </li> </ul> </li> <li> <p>conditions</p> comparison <ul> <li> <p><code>-eq</code>\uff1a\u7b49\u4e8e</p> </li> <li> <p><code>-ne</code>\uff1a\u4e0d\u7b49\u4e8e</p> </li> <li> <p><code>-gt</code>\uff1a\u5927\u4e8e</p> </li> <li> <p><code>-lt</code>\uff1a\u5c0f\u4e8e</p> </li> <li> <p><code>-ge</code>\uff1a\u5927\u4e8e\u7b49\u4e8e</p> </li> <li> <p><code>-le</code>\uff1a\u5c0f\u4e8e\u7b49\u4e8e</p> </li> </ul> operators <ul> <li> <p><code>&amp;&amp;</code> <code>||</code>\uff1ashell\u4e2d\u7684\u903b\u8f91\u8fd0\u7b97\u7b26</p> </li> <li> <p><code>-a</code> <code>-o</code>\uff1a<code>test / []</code> \u547d\u4ee4\u4e2d\u7684\u903b\u8f91\u8fd0\u7b97\u7b26 </p> </li> </ul> <ul> <li> <p><code>test / []</code>\uff1a\u6d4b\u8bd5\u8868\u8fbe\u5f0f</p> <ul> <li><code>test expression / [expression]</code>\uff1a\u8fd4\u56de0\uff08\u771f\uff09\u62161\uff08\u5047\uff09</li> </ul> <p>\u5e38\u7528\u547d\u4ee4</p> <ul> <li> <p><code>-f file</code>\uff1a\u6587\u4ef6\u5b58\u5728\u4e14\u4e3a\u666e\u901a\u6587\u4ef6</p> </li> <li> <p><code>-d file</code>\uff1a\u6587\u4ef6\u5b58\u5728\u4e14\u4e3a\u76ee\u5f55</p> </li> <li> <p><code>-e file</code>\uff1a\u6587\u4ef6\u5b58\u5728</p> </li> <li> <p><code>-r/w/x file</code>\uff1a\u6587\u4ef6\u5b58\u5728\u4e14\u53ef\u8bfb/\u5199/\u6267\u884c</p> </li> <li> <p><code>-s file</code>\uff1a\u6587\u4ef6\u5b58\u5728\u4e14\u5927\u5c0f\u4e0d\u4e3a0</p> </li> </ul> </li> <li> <p><code>if</code>\uff1a\u6761\u4ef6\u8bed\u53e5</p> <pre><code>if [ condition ]; then\n    command\nelif [ condition ]; then\n    command\nelse\n    command\nfi\n</code></pre> </li> <li> <p><code>case</code>\uff1a\u591a\u6761\u4ef6\u8bed\u53e5</p> <pre><code>case $var in\n    pattern1)\n        command\n        ;;\n    pattern2)\n        command\n        ;;\n    *)\n        command\n        ;;\nesac\n</code></pre> </li> </ul> </li> <li> <p>loop</p> <ul> <li> <p><code>for</code></p> <pre><code>for var in list; do\n    command\ndone\n</code></pre> <p>About list</p> <ul> <li> <p><code>(a b c)</code>\uff1a\u6570\u7ec4</p> </li> <li> <p><code>{x..y} {1..3}</code>\uff1a\u8303\u56f4 </p> </li> </ul> </li> <li> <p><code>while</code></p> <pre><code>while [ condition ]; do\n    command\ndone\n</code></pre> </li> </ul> </li> <li> <p>function</p> <pre><code># \u5f15\u7528\u53c2\u6570 $1 $2 ...\n# \u8fd4\u56de\u503c\u6ca1\u6709\u76f8\u5173\u7684\u673a\u5236\uff0c\u4e00\u822c\u53ea\u80fd\u4f7f\u7528echo\u8f6c\u79fb\u5230\u6807\u51c6\u8f93\u51fa\u8c03\u52a8\uff0c\u6216\u8005exit\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\nfunction_name() {\n    command\n}\n</code></pre> Reccursive Fibonacci <pre><code>#!/bin/zsh\n\n# contents of fibonacci\n\nif [ $# -eq 0 ]; then\n    echo \"fibonacci needs an argument\"\n    exit 1\nfi\n\nfib() {\n    N=$1\n    if [ -z \"${N##*[!0-9]*}\" ]; then\n        echo \"fibonacci only makes sense for nonnegative integers\"\n        exit 1\n    fi\n\n    if [ \"$N\" -eq 0 ]; then\n        echo 0\n    elif [ \"$N\" -eq 1 ]; then\n        echo 1\n    else\n        echo $(($(fib $((N-2))) + $(fib $((N-1)))))\n    fi\n}\n\nfib \"$1\"\n</code></pre> </li> </ul>"},{"location":"SD/#package","title":"Package","text":"<p>An archive containing binaries and libraries of an application, along with metadata for installation</p> <p></p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u4e2a\u8f6f\u4ef6\u5305\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li> <p>\u63a7\u5236\u6587\u4ef6\uff1a\u63cf\u8ff0\u8f6f\u4ef6\u5305\u7684\u5143\u4fe1\u606f\uff0c\u5982\u540d\u79f0\u3001\u7248\u672c\u3001\u4f9d\u8d56\u7b49</p> </li> <li> <p>\u6570\u636e\u6587\u4ef6\uff1a\u8f6f\u4ef6\u5305\u7684\u5b9e\u9645\u5185\u5bb9\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u5e93\u6587\u4ef6\u3001\u914d\u7f6e\u6587\u4ef6\u7b49</p> <ul> <li> <p><code>/usr/bin</code>\uff1a\u53ef\u6267\u884c\u6587\u4ef6</p> </li> <li> <p><code>/usr/share</code>\uff1adocumenation, manpage, locale \u7b49</p> </li> <li> <p><code>/etc</code>\uff1a\u5168\u5c40\u914d\u7f6e\u6587\u4ef6</p> </li> <li> <p><code>md5sums</code>\uff1a\u6587\u4ef6\u6821\u9a8c\u548c  </p> </li> </ul> </li> </ul> <p></p> <p>Package Manager</p> <p></p>"},{"location":"SD/#service","title":"Service","text":"<p>\u5173\u4e8e\u7ec8\u7aef\u4e2d\u8fd0\u884c\u7a0b\u5e8f</p> <ul> <li> <p><code>&amp;</code>\uff1a\u540e\u53f0\u8fd0\u884c</p> </li> <li> <p><code>nohup</code>\uff1a\u5ffd\u7565\u6302\u65ad\u4fe1\u53f7\uff0c\u5373\u4f7f\u7ec8\u7aef\u5173\u95ed\u4e5f\u4e0d\u4f1a\u505c\u6b62\u8fd0\u884c</p> </li> <li> <p><code>ctrl + z</code>\uff1a\u6682\u505c</p> </li> <li> <p><code>bg</code>\uff1a\u540e\u53f0\u8fd0\u884c</p> </li> <li> <p><code>fg</code>\uff1a\u524d\u53f0\u8fd0\u884c</p> </li> <li> <p><code>jobs</code>\uff1a\u67e5\u770b\u540e\u53f0\u4efb\u52a1\uff0c\u4ee5\u4efb\u52a1\u53f7\u533a\u5206</p> </li> </ul>"},{"location":"SD/#process","title":"Process","text":"<p>process\u662f\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u7a0b\u5e8f\u7684\u5b9e\u4f8b\uff0c\u6bcf\u4e2aprocess\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u8fdb\u7a0b\u53f7\uff08PID\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7<code>ps</code>\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u7684\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u7236\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u901a\u8fc7<code>pstree</code>\u547d\u4ee4\u67e5\u770b\u8fdb\u7a0b\u6811\uff0c\u5176\u4e2d<code>init</code>\u662f\u6240\u6709\u8fdb\u7a0b\u7684\u7956\u5148\uff0c\u5176PID\u4e3a1</p> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u7a0bthread\uff0c\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff0c\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u5305\u62ec\u5185\u5b58\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u7b49\uff0c\u4f46\u4e00\u822c\u6bcf\u4e2a\u7ebf\u7a0b\u4e5f\u6709\u81ea\u5df1\u7684\u6808\u7a7a\u95f4\u5b58\u50a8\u72b6\u6001\uff0c\u53ef\u4ee5\u901a\u8fc7<code>ps -eLf</code>\u67e5\u770b\u7ebf\u7a0b</p> <p></p> <p>\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5fork\u51fa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u901a\u8fc7<code>wait()</code>\u51fd\u6570\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\u3002\u5b50\u8fdb\u7a0b\u4f1a\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u4f46\u662f\u6709\u81ea\u5df1\u7684PID\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7<code>exec()</code>\u51fd\u6570\u66ff\u6362\u81ea\u5df1\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4ece\u800c\u6267\u884c\u5176\u4ed6\u7a0b\u5e8f</p> <ul> <li> <p>\u7279\u6b8a\u60c5\u51b5\uff1a</p> <ul> <li> <p><code>zombie</code>\uff08\u50f5\u5c38\u8fdb\u7a0b\uff09\uff1a\u5b50\u8fdb\u7a0b\u7ed3\u675f<code>exit</code>\uff0c\u7236\u8fdb\u7a0b\u8fd8\u6ca1\u6709\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u6b64\u65f6\u5b50\u8fdb\u7a0b\u7684\u72b6\u6001\u4e3a<code>Z</code>\uff0c\u5c5e\u4e8e\u8d44\u6e90\u6d6a\u8d39\uff08\u6cc4\u6f0f\uff09\u3002\u53ef\u4ee5\u901a\u8fc7<code>kill</code>\u547d\u4ee4\u6740\u6b7b\u7236\u8fdb\u7a0b\uff0c\u4f7f\u5b50\u8fdb\u7a0b\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0c\u88ab<code>init</code>\u8fdb\u7a0b\u56de\u6536</p> </li> <li> <p><code>orphan</code>\uff08\u5b64\u513f\u8fdb\u7a0b\uff09\uff1a\u7236\u8fdb\u7a0b\u7ed3\u675f\uff0c\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\uff0c\u6b64\u65f6\u5b50\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u53d8\u4e3a<code>init</code>\u8fdb\u7a0b\uff0c<code>init</code>\u8fdb\u7a0b\u4f1a\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90 </p> </li> </ul> </li> <li> <p>\u8fdb\u7a0b\u901a\u4fe1</p> <ul> <li> <p><code>exit code</code>\uff1a\u8fdb\u7a0b\u9000\u51fa\u7801\uff0c\u4e00\u822c0\u8868\u793a\u6b63\u5e38\u9000\u51fa\uff0c\u5176\u4ed6\u503c\u8868\u793a\u5f02\u5e38\u9000\u51fa</p> </li> <li> <p><code>signal</code>\uff1a\u4fe1\u53f7\uff0c\u4e00\u79cd\u5f02\u6b65\u901a\u4fe1\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5411\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7</p> <p>\u53ef\u4ee5\u4f7f\u7528<code>kill</code>\u547d\u4ee4\u5411\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u53ef\u4ee5\u901a\u8fc7<code>kill -l</code>\u67e5\u770b\u4fe1\u53f7\u5217\u8868</p> \u5e38\u7528\u4fe1\u53f7 <ul> <li> <p><code>SIGKILL(9)</code>\uff1a\u5f3a\u5236\u7acb\u5373\u7ec8\u6b62\uff0c\u4e0d\u4f1a\u53d1\u9001\u4fe1\u53f7\u7ed9\u5b50\u8fdb\u7a0b</p> </li> <li> <p><code>SIGTERM(15)</code>\uff1a\u7ec8\u6b62\u4fe1\u53f7\uff0c\u7a0b\u5e8f\u6b63\u5e38\u9000\u51fa\uff0c\u4f46\u4e0d\u4f1a\u53d1\u9001\u4fe1\u53f7\u7ed9\u5b50\u8fdb\u7a0b</p> </li> <li> <p><code>SIGSTOP(19)</code>\uff1a\u6682\u505c</p> </li> <li> <p><code>SIGCONT(18)</code>\uff1a\u7ee7\u7eed</p> </li> <li> <p><code>SIGINT(2)</code>\uff1a\u4e2d\u65ad\uff0c<code>ctrl + c</code></p> </li> <li> <p><code>SIGHUP(1)</code>\uff1a\u6302\u65ad\u4fe1\u53f7\uff0c\u7ec8\u7aef\u5173\u95ed\uff0c\u4f1a\u5c06\u4fe1\u53f7\u53d1\u9001\u7ed9\u6240\u6709\u5b50\u8fdb\u7a0b</p> </li> </ul> </li> <li> <p><code>pipe</code>\uff1a\u7ba1\u9053\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u4e00\u822c\u7528\u4e8e\u7236\u5b50\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u5982STDIN /STDOUT / STDERR\u7b49</p> </li> <li> <p><code>socket</code>\uff1a\u5957\u63a5\u5b57\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e0d\u540c\u4e3b\u673a\u95f4\u7684\u53cc\u5411\u901a\u4fe1\uff0c\u4e00\u822c\u7528\u4e8e\u7f51\u7edc\u901a\u4fe1TCP/IP\u7b49</p> </li> <li> <p><code>message bus</code>\uff1a\u6d88\u606f\u603b\u7ebf\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e0d\u540c\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff0c\u5982<code>dbus</code>\u7b49    </p> </li> </ul> </li> </ul>"},{"location":"SD/#service_1","title":"Service","text":"<p><code>Daemon</code>\u662f\u4e00\u79cd\u7279\u6b8a\u5728\u540e\u53f0\u8fd0\u884c\u7684\u5b88\u62a4\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u901a\u8fc7<code>systemctl</code>\u547d\u4ee4\u7ba1\u7406\uff0c\u5305\u62ec\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u67e5\u770b\u72b6\u6001\u7b49</p> <p><code>systemd</code>\u662f\u4e00\u4e2aLinux\u7cfb\u7edf\u7684\u521d\u59cb\u5316\u7cfb\u7edf\u548c\u670d\u52a1\u7ba1\u7406\u5668\uff0c\u53ef\u4ee5\u901a\u8fc7<code>systemctl</code>\u547d\u4ee4\u7ba1\u7406\u670d\u52a1\uff0c<code>systemd</code>\u4f1a\u5728\u542f\u52a8\u65f6\u81ea\u52a8\u542f\u52a8\u670d\u52a1</p> <p>\u6bcf\u4e2a\u670d\u52a1\u90fd\u6709\u4e00\u4e2a<code>unit</code>\u6587\u4ef6\uff0c\u63cf\u8ff0\u670d\u52a1\u7684\u5143\u4fe1\u606f\uff0c\u5982\u540d\u79f0\u3001\u63cf\u8ff0\u3001\u4f9d\u8d56\u7b49\uff0c<code>unit</code>\u6587\u4ef6\u4e00\u822c\u5b58\u653e\u5728<code>/etc/systemd/system</code>\u76ee\u5f55\u4e0b</p> <p>Unit File</p> <pre><code>[Unit]\nDescription=My Service\n\n[Service]\nExecStart=/path/to/executable\nUser=username\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"SD/#network","title":"Network","text":"<ul> <li> <p>TCP/IP 4-layer model</p> <ul> <li> <p><code>Application</code>\uff1a\u5e94\u7528\u5c42\uff0c\u771f\u6b63\u63a5\u53d7\u5904\u7406\u6570\u636e\uff0c\u5982HTTP\u3001FTP\u3001DNS\u7b49</p> </li> <li> <p><code>Transport</code>\uff1a\u4f20\u8f93\u5c42\uff0c\u7ba1\u7406\u534f\u8bae\uff0c\u5982TCP\uff08\u53ef\u9760\u4f46\u6162\uff09\u3001UDP\uff08\u5feb\u4f46\u4e0d\u53ef\u9760\uff09</p> <ul> <li> <p><code>TCP</code>(transmission control protocol)\uff1a\u4f20\u8f93\u63a7\u5236\u534f\u8bae\uff0c\u4e09\u6b21\u63e1\u624b\u534f\u8bae\uff0c\u53ea\u6709\u5f97\u5230\u5bf9\u65b9\u7684\u786e\u8ba4\u624d\u4f1a\u53d1\u9001\u6570\u636e\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u4f20\u8f93\uff0c\u5e38\u7528\u4e8eHTTP\u3001FTP\u7b49\u5e94\u7528</p> \u5de5\u4f5c\u6d41\u7a0b <ol> <li> <p>\u5ba2\u6237\u7aef\u53d1\u9001SYN\u8bf7\u6c42\uff0c\u8bf7\u6c42\u5efa\u7acb\u8fde\u63a5</p> </li> <li> <p>\u670d\u52a1\u5668\u53d1\u9001SYN+ACK\uff0c\u786e\u8ba4\u8fde\u63a5</p> </li> <li> <p>\u5ba2\u6237\u7aef\u53d1\u9001ACK\uff0c\u786e\u8ba4\u8fde\u63a5\u5efa\u7acb</p> </li> <li> <p>\u6570\u636e\u4f20\u8f93\uff0c\u6bcf\u6b21\u53d1\u9001\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u7b49\u5f85\u5bf9\u65b9\u7684\u786e\u8ba4ACK\u4fe1\u53f7\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u4f20\u8f93</p> </li> <li> <p>\u65ad\u5f00\u8fde\u63a5\uff0c\u56db\u6b21\u6325\u624b\u534f\u8bae\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u4f20\u8f93</p> <ol> <li> <p>\u5ba2\u6237\u7aef\u53d1\u9001FIN\uff0c\u8bf7\u6c42\u65ad\u5f00\u8fde\u63a5</p> </li> <li> <p>\u670d\u52a1\u5668\u53d1\u9001ACK\uff0c\u786e\u8ba4\u65ad\u5f00\u8fde\u63a5</p> </li> <li> <p>\u670d\u52a1\u5668\u53d1\u9001FIN\uff0c\u8bf7\u6c42\u65ad\u5f00\u8fde\u63a5</p> </li> <li> <p>\u5ba2\u6237\u7aef\u53d1\u9001ACK\uff0c\u786e\u8ba4\u65ad\u5f00\u8fde\u63a5</p> </li> </ol> </li> </ol> </li> <li> <p><code>UDP</code>(user datagram protocol): \u7528\u6237\u6570\u636e\u62a5\u534f\u8bae\uff0c\u4e0d\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u4f20\u8f93\uff0c\u4f46\u662f\u901f\u5ea6\u5feb\uff0c\u76f8\u5f53\u4e8e\u76f4\u63a5\u53d1\u9001\u6570\u636e\u5305\uff0c\u4e0d\u7ba1\u5bf9\u65b9\u662f\u5426\u6536\u5230\uff0c\u56e0\u6b64\u6709\u53ef\u80fd\u4e22\u5305\uff0c\u5e38\u7528\u4e8e\u5b9e\u65f6\u901a\u8bdd\u3001\u89c6\u9891\u7b49\u4f4e\u5ef6\u65f6\u5e94\u7528</p> </li> <li> <p><code>ICMP</code>(Internet Control Message Protocol)\uff1a\u7f51\u7edc\u63a7\u5236\u62a5\u6587\u534f\u8bae\uff0c\u7528\u4e8e\u7f51\u7edc\u6545\u969c\u8bca\u65ad </p> </li> </ul> </li> <li> <p><code>Internet</code>\uff1a\u7f51\u7edc\u5c42\uff0c\u7531\u8def\u7531\u5668\u8fdb\u884c\u5168\u5c40IP\u5730\u5740\u4e4b\u95f4\u7684\u8f6c\u53d1</p> <ul> <li> <p><code>IP</code>\uff1a\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u4ee5\u66f4\u6539\uff0c\u7528\u4e8e\u5728\u5168\u7403\u8303\u56f4\u5185\u552f\u4e00\u6807\u8bc6\u4e3b\u673a\uff0cIPv4\uff0832\u4f4d\uff09/IPv6\uff08128\u4f4d\uff09</p> </li> <li> <p><code>Port</code>\uff1a\u7aef\u53e3\uff0c\u7528\u4e8e\u5728\u4e3b\u673a\u5185\u552f\u4e00\u6807\u8bc6\u5e94\u7528\u7a0b\u5e8f\uff0c16 bit(0-65535)\uff0c\u4e00\u4e2a\u7aef\u53e3\u5728\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u88ab\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528</p> <ul> <li> <p>0-1023\u4e3a\u7cfb\u7edf\u4fdd\u7559\u7aef\u53e3\uff0c\u4e00\u822c\u7528\u4e8e\u7279\u6b8a\u670d\u52a1\uff0c\u5982HTTP\uff0880\uff09\u3001FTP\uff0821\uff09\u3001SSH\uff0822\uff09\u3001HTTPS\uff08443\uff09\u3001DNS\uff0853\uff09\u7b49</p> </li> <li> <p>1024-49151\u4e3a\u6ce8\u518c\u7aef\u53e3\uff0c\u4e00\u822c\u7528\u4e8e\u5e38\u89c1\u670d\u52a1\uff0c\u5982NFS\uff082049\uff09\u3001MySQL\uff083306\uff09\u3001Tomcat\uff088080\uff09\u7b49 </p> </li> <li> <p>49152-65535\u4e3a\u52a8\u6001\u7aef\u53e3\uff0c\u53ef\u4ee5\u4e34\u65f6\u5206\u914d\u7ed9\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\uff0c\u4e00\u822c\u7528\u4e8e\u5ba2\u6237\u7aef\uff0c\u5982NAT\u3001\u9632\u706b\u5899\u7b49 </p> </li> </ul> </li> <li> <p><code>Subnet</code>\uff1a\u5b50\u7f51\uff0c\u5c06IP\u5730\u5740\u5212\u5206\u4e3a\u591a\u4e2a\u5b50\u7f51\uff0c\u53ef\u4ee5\u51cf\u5c11\u5e7f\u64ad\u57df\uff0c\u63d0\u9ad8\u7f51\u7edc\u6027\u80fd</p> <p>\u5177\u4f53\u5730\uff0c\u659c\u6760\u540e\u9762\u7684\u6570\u5b57\u8868\u793a\u63a9\u7801\u524d\u97621\u7684\u4e2a\u6570\uff0c\u6216\u8005\u8bf4\u662f\u7f51\u7edc\u4f4d\u6570\uff0c\u5269\u4e0b\u7684\u662f\u7559\u7ed9\u4e3b\u673a\u7684\u4f4d\u6570\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2aIP\u5730\u5740\u662f\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\uff0c\u4e00\u822c\u4e0d\u80fd\u4f7f\u7528</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0cIP\u5730\u5740\u4e0e\u5b50\u7f51\u63a9\u7801\u8fdb\u884c\u4e0e\u8fd0\u7b97\uff0c\u53ef\u4ee5\u5f97\u5230\u7f51\u7edc\u8d77\u59cb\u5730\u5740</p> <p></p> </li> <li> <p><code>NAT</code>\uff1a\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff0c\u5c06\u5185\u90e8IP\u5730\u5740\u8f6c\u6362\u4e3a\u5916\u90e8IP\u5730\u5740\uff0c\u4f7f\u591a\u4e2a\u8bbe\u5907\u5171\u4eab\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\uff0c\u4ece\u800c\u8282\u7701IP\u5730\u5740</p> </li> <li> <p><code>ARP</code>\uff1a\u5730\u5740\u89e3\u6790\u534f\u8bae\uff0c\u7528\u4e8e\u5c06IP\u5730\u5740\u89e3\u6790\u4e3aMAC\u5730\u5740</p> <p>\u5de5\u4f5c\u6d41\u7a0b</p> <ol> <li> <p>\u5982\u679c\u76ee\u6807IP\u5730\u5740\u5728\u672c\u5730\u7f51\u7edc\u8868\u4e2d\uff0c\u76f4\u63a5\u53d1\u9001</p> </li> <li> <p>\u5426\u5219\uff0c\u53d1\u9001ARP\u8bf7\u6c42\uff0c\u83b7\u53d6\u76ee\u6807IP\u7684MAC\u5730\u5740\uff0c\u7136\u540e\u53d1\u9001\u6570\u636e\u5305</p> </li> </ol> </li> <li> <p><code>Routing</code>\uff1a\u8def\u7531\uff0c\u6839\u636e\u6570\u636e\u5305\u7684\u76ee\u6807IP\u5730\u5740\u9009\u62e9\u6700\u4f73\u8def\u5f84</p> </li> <li> <p><code>DNS</code>(Domain Name System)\uff1a\u57df\u540d\u89e3\u6790\u7cfb\u7edf\uff0c\u5c06\u57df\u540d\uff08URL\uff09\u89e3\u6790\u4e3aIP\u5730\u5740</p> DNS Record <p>\u4e00\u822c\u5305\u62ec name, value, type, TTL\u7b49\u5b57\u6bb5</p> <p>TTL(time to live)\u8868\u793a\u8bb0\u5f55\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u4e00\u822c\u4e3a\u79d2\uff0c\u8fc7\u671f\u540e\u9700\u8981\u91cd\u65b0\u89e3\u6790</p> <ul> <li> <p>A records(IPv4)</p> <p><code>name = value = ip address</code></p> </li> <li> <p>AAAA records(IPv6)</p> <p><code>name = value = ip address</code> </p> </li> <li> <p>NS records</p> <p>\u91cd\u5b9a\u5411\u5230\u53e6\u4e00\u4e2aDNS\u670d\u52a1\u5668\uff0c\u4e00\u822c\u7528\u4e8e\u5b50\u57df\u540d</p> <ul> <li> <p><code>name = domain name</code></p> </li> <li> <p><code>value = name server</code> </p> </li> </ul> </li> <li> <p>CNAME records</p> <p>\u522b\u540d\u8bb0\u5f55\uff0c\u5c06\u4e00\u4e2a\u57df\u540d\u89e3\u6790\u4e3a\u53e6\u4e00\u4e2a\u57df\u540d\uff0c\u4e00\u822c\u7528\u4e8e\u8d1f\u8f7d\u5747\u8861</p> <ul> <li> <p><code>name = alias</code></p> </li> <li> <p><code>value = canonical name</code></p> </li> </ul> </li> <li> <p>MX records</p> <p>\u90ae\u4ef6\u4ea4\u6362\u8bb0\u5f55\uff0c\u6307\u5b9a\u90ae\u4ef6\u670d\u52a1\u5668</p> <ul> <li> <p><code>name = domain name</code></p> </li> <li> <p><code>value = mail server</code></p> </li> </ul> </li> <li> <p>*TXT records</p> <p>\u7528\u4e8e\u5b58\u50a8\u4efb\u610f\u6587\u672c\u4fe1\u606f\uff0c\u4e00\u822c\u7528\u4e8e\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743</p> <ul> <li> <p><code>name = domain name</code></p> </li> <li> <p><code>value = text</code></p> </li> </ul> </li> <li> <p>*SRV records</p> <p>\u670d\u52a1\u8bb0\u5f55\uff0c\u6307\u5b9a\u670d\u52a1\u7684\u4f4d\u7f6e</p> <ul> <li> <p><code>name = service</code></p> </li> <li> <p><code>value = protocol, port, target</code></p> </li> </ul> </li> <li> <p>*SOA records</p> <p>\u5f00\u59cb\u6388\u6743\u8bb0\u5f55\uff0c\u6307\u5b9a\u57df\u540d\u7684\u6388\u6743\u670d\u52a1\u5668</p> <ul> <li> <p><code>name = domain name</code></p> </li> <li> <p><code>value = primary name server, email, serial number, refresh, retry, expire, minimum TTL</code> </p> </li> </ul> </li> </ul> <p>DNS poisoning</p> <p>DNS\u6c61\u67d3\uff0c\u653b\u51fb\u8005\u901a\u8fc7\u7be1\u6539DNS\u670d\u52a1\u5668\u7684\u8bb0\u5f55\uff0c\u5c06\u5408\u6cd5\u57df\u540d\u89e3\u6790\u4e3a\u6076\u610fIP\u5730\u5740\uff0c\u4ece\u800c\u5b9e\u73b0\u4e2d\u95f4\u4eba\u653b\u51fb</p> <p>~~\u6bd4\u5982\u6211\u56fd\u7684\u5c01\u95ed\u5916\u7f51\u7684Great Firewall~~</p> <p>DNS hijacking</p> <p>DNS\u52ab\u6301\uff0c\u653b\u51fb\u8005\u901a\u8fc7\u7be1\u6539DNS\u670d\u52a1\u5668\u7684\u8bb0\u5f55\uff0c\u5c06\u5408\u6cd5\u57df\u540d\u89e3\u6790\u4e3a\u6076\u610fIP\u5730\u5740\uff0c\u4ece\u800c\u5b9e\u73b0\u91cd\u5b9a\u5411\u653b\u51fb</p> <p>\u901a\u5e38\u7531\u9493\u9c7c\u7f51\u7ad9\u3001\u5e7f\u544a\u5546\u7b49\u5b9e\u65bd</p> </li> </ul> </li> <li> <p><code>Link</code>\uff1a\u94fe\u8def\u5c42\uff0c\u5f80\u5f80\u4e3a\u76f4\u63a5\u8fde\u63a5\u7684\u786c\u4ef6\u8bbe\u5907\uff0c\u4e0d\u9700\u8981\u8def\u7531\u8f6c\u53d1</p> <ul> <li> <p><code>MAC address</code>\uff08Media Access Control\uff09\uff1a\u7269\u7406\u5730\u5740\uff0c\u7528\u4e8e\u5728\u672c\u5730\u7f51\u7edc\u552f\u4e00\u6807\u8bc6\u8bbe\u5907, 48\u4f4d\u4e8c\u8fdb\u5236\u6570\uff0c\u524d24\u4f4d\u4e3a\u5382\u5546\u8bc6\u522b\u7801\uff0c\u540e24\u4f4d\u4e3a\u8bbe\u5907\u5e8f\u5217\u53f7</p> <p> </p> </li> <li> <p><code>ARP</code>\uff1a\u5730\u5740\u89e3\u6790\u534f\u8bae\uff0c\u7528\u4e8e\u5c06IP\u5730\u5740\u89e3\u6790\u4e3aMAC\u5730\u5740</p> </li> <li> <p><code>NDP</code>\uff1a\u90bb\u5c45\u53d1\u73b0\u534f\u8bae\uff0cIPv6\u4e2d\u7684ARP\u534f\u8bae   </p> </li> </ul> </li> </ul> </li> <li> <p>Tools\uff08\u89c1\u4e0b\u65b9Lab 5\uff09</p> </li> </ul>"},{"location":"SD/#web-server","title":"Web Server","text":"<ul> <li> <p>Scale</p> <ul> <li> <p><code>Vertical</code>\uff1a\u5782\u76f4\u6269\u5c55\uff0c\u589e\u52a0\u5355\u4e2a\u670d\u52a1\u5668\u7684\u6027\u80fd\uff0c\u5982\u589e\u52a0CPU\u3001\u5185\u5b58\u7b49\uff0c\u4f46\u662f\u6210\u672c\u9ad8\uff0c\u6027\u80fd\u6709\u9650</p> </li> <li> <p><code>Horizontal</code>\uff1a\u6c34\u5e73\u6269\u5c55\uff0c\u589e\u52a0\u670d\u52a1\u5668\u7684\u6570\u91cf\uff0c\u5982\u8d1f\u8f7d\u5747\u8861\u3001\u5206\u5e03\u5f0f\u5b58\u50a8\u7b49\uff0c\u6210\u672c\u4f4e\uff0c\u6027\u80fd\u9ad8</p> </li> </ul> </li> <li> <p>Load Balancer</p> <p>\u901a\u8fc7\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u5c06\u8bf7\u6c42\u5206\u53d1\u5230\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\uff0c\u51cf\u5c11\u5355\u70b9\u6545\u969c</p> </li> </ul>"},{"location":"SD/#security","title":"Security","text":"<ul> <li> <p>Confidentiality</p> <p>\u53ea\u6709\u6388\u6743\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u6570\u636e</p> <ul> <li> <p>Cypertext\u66ff\u4ee3\u660e\u6587\uff0c\u5229\u7528\u52a0\u5bc6\u7b97\u6cd5\u4fdd\u62a4\u6570\u636e</p> <ul> <li> <p><code>Encryption</code>\uff1a\u52a0\u5bc6\uff0c\u5c06\u6570\u636e\u8f6c\u6362\u4e3a\u5bc6\u6587\uff0c\u53ea\u6709\u6388\u6743\u7528\u6237\u624d\u80fd\u89e3\u5bc6</p> </li> <li> <p><code>Decryption</code>\uff1a\u89e3\u5bc6\uff0c\u5c06\u5bc6\u6587\u8f6c\u6362\u4e3a\u660e\u6587\uff0c\u53ea\u6709\u6388\u6743\u7528\u6237\u624d\u80fd\u89e3\u5bc6 </p> </li> </ul> </li> <li> <p>\u52a0\u5bc6\u7b97\u6cd5</p> <ul> <li> <p><code>Symmetric</code>\uff1a\u5bf9\u79f0\u52a0\u5bc6\uff0c\u52a0\u5bc6\u548c\u89e3\u5bc6\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\uff0c\u5982DES\u3001AES\u7b49</p> <p></p> </li> <li> <p><code>Asymmetric</code>\uff1a\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u52a0\u5bc6\u548c\u89e3\u5bc6\u4f7f\u7528\u4e0d\u540c\u7684\u5bc6\u94a5\uff0c\u4e00\u822c\u52a0\u5bc6\u4f7f\u7528\u53ef\u4ee5\u516c\u5f00\u7684\u516c\u94a5\uff0c\u89e3\u5bc6\u4f7f\u7528\u79c1\u94a5\uff0c\u5982RSA\u3001DSA\u7b49</p> <p></p> </li> </ul> </li> </ul> </li> <li> <p>Integrity</p> <p>\u6570\u636e\u6ca1\u6709\u88ab\u7be1\u6539</p> <ul> <li> <p><code>Hash</code>\uff1a\u5bc6\u7801\u5b66\u54c8\u5e0c\u51fd\u6570\uff0c\u6839\u636e\u6570\u636e\u8ba1\u7b97\u4e3a\u56fa\u5b9a\u957f\u5ea6\u7684\u54c8\u5e0c\u503c\uff0c\u5e76\u4e14\u65e0\u6cd5\u901a\u8fc7\u54c8\u5e0c\u503c\u56de\u63a8\u539f\u6765\u7684\u6570\u636e\uff0c\u4e00\u822c\u7528\u4e8e\u6821\u9a8c\u6570\u636e\u5b8c\u6574\u6027</p> <ul> <li> <p><code>MD5</code>\uff1a128\u4f4d\u54c8\u5e0c\u503c\uff0c\u4e0d\u5b89\u5168</p> <pre><code>md5sum filename\n</code></pre> </li> <li> <p><code>SHA</code>\uff1a\u5b89\u5168\u54c8\u5e0c\u7b97\u6cd5\uff0c\u5982SHA-1\uff08160\u4f4d\uff09\u3001SHA-256\uff08256\u4f4d\uff09\u7b49</p> <pre><code>sha1sum filename\nsha256sum filename\n</code></pre> </li> </ul> <p>Example</p> <ul> <li> <p>MAC(Message Authentication Code)\uff1a\u6d88\u606f\u8ba4\u8bc1\u7801\uff0c\u4f7f\u7528\u5bc6\u94a5\u5bf9\u54c8\u5e0c\u503c\u8fdb\u884c\u52a0\u5bc6\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u5b8c\u6574\u6027\u548c\u771f\u5b9e\u6027</p> </li> <li> <p>Checksum\uff1a\u6821\u9a8c\u548c\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u6821\u9a8c\uff0c\u4e00\u822c\u7528\u4e8e\u6821\u9a8c\u6570\u636e\u4f20\u8f93\u7684\u5b8c\u6574\u6027</p> </li> <li> <p>\u5b58\u50a8\u5bc6\u7801\uff1a\u4e00\u822c\u4e0d\u5b58\u50a8\u660e\u6587\u5bc6\u7801\uff0c\u800c\u662f\u5b58\u50a8\u5bc6\u7801\u7684\u54c8\u5e0c\u503c</p> </li> </ul> </li> </ul> </li> <li> <p>Authentication</p> <p>\u786e\u8ba4\u6570\u636e\u6765\u6e90/\u4f5c\u8005\u7684\u771f\u5b9e\u6027</p> <ul> <li> <p>Signature\uff1a\u6570\u5b57\u7b7e\u540d\uff0c\u5c06\u79c1\u94a5\u9644\u5728\u6570\u636e\u4e0a\u3002\u7531\u4e8e\u79c1\u94a5\u53ea\u6709\u672c\u4eba\u6301\u6709\uff0c\u56e0\u6b64\u53ef\u4ee5\u7ed3\u5408\u516c\u94a5\u9a8c\u8bc1\u6570\u636e\u7684\u771f\u5b9e\u6027</p> <ul> <li> <p>file + private key \u2192 signature</p> </li> <li> <p>signature + public key \u2192 verification</p> </li> </ul> <p></p> </li> <li> <p>Certificate\uff1a\u6570\u5b57\u8bc1\u4e66\uff0c\u7531CA\uff08Certificate Authority\uff0c\u6743\u5a01\u7b2c\u4e09\u65b9\uff09\u9881\u53d1\uff0c\u7528\u4e8e\u8bc1\u660e\u516c\u94a5\u7684\u771f\u5b9e\u6027</p> <ul> <li>public key + CA \u2192 certificate</li> </ul> <p>CA</p> <ul> <li> <p><code>Root CA</code>\uff1a\u6839\u8bc1\u4e66\uff0c\u6743\u5a01\u7b2c\u4e09\u65b9\uff0c\u7528\u4e8e\u7b7e\u53d1\u5176\u4ed6CA\u7684\u8bc1\u4e66</p> </li> <li> <p><code>Intermediate CA</code>\uff1a\u4e2d\u95f4\u8bc1\u4e66\uff0c\u7528\u4e8e\u7b7e\u53d1\u7ec8\u7aef\u7528\u6237\u7684\u8bc1\u4e66</p> </li> <li> <p><code>End Entity</code>\uff1a\u7ec8\u7aef\u7528\u6237\uff0c\u7528\u4e8e\u7b7e\u53d1\u7ec8\u7aef\u7528\u6237\u7684\u8bc1\u4e66</p> </li> </ul> <p>\u8bc1\u4e66\u94fe\uff1a\u7ec8\u7aef\u7528\u6237\u7684\u8bc1\u4e66\u7531\u4e2d\u95f4\u8bc1\u4e66\u7b7e\u53d1\uff0c\u4e2d\u95f4\u8bc1\u4e66\u7531\u6839\u8bc1\u4e66\u7b7e\u53d1\uff0c\u56e0\u6b64\u7ec8\u7aef\u7528\u6237\u7684\u8bc1\u4e66\u9700\u8981\u5305\u542b\u4e2d\u95f4\u8bc1\u4e66\u548c\u6839\u8bc1\u4e66\uff0c\u4e14\u7ec8\u7aef\u8bc1\u4e66\u9a8c\u8bc1\u4f9d\u8d56\u4e8e\u6839\u8bc1\u4e66</p> </li> </ul> </li> <li> <p>Availability </p> <p>\u6570\u636e\u53ef\u7528\u6027\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027\u548c\u6301\u4e45\u6027</p> <ul> <li> <p>Filtering: \u8fc7\u6ee4\uff0c\u9632\u6b62\u6076\u610f\u653b\u51fb</p> </li> <li> <p>Load Balancer: \u8d1f\u8f7d\u5747\u8861\uff0c\u5206\u53d1\u8bf7\u6c42\uff0c\u63d0\u9ad8\u6027\u80fd</p> </li> <li> <p>Redundancy: \u5197\u4f59\uff0c\u5907\u4efd\u6570\u636e\uff0c\u9632\u6b62\u6570\u636e\u4e22\u5931</p> </li> <li> <p>Backup: \u5907\u4efd\uff0c\u5c06\u6570\u636e\u590d\u5236\u5230\u5176\u4ed6\u8bbe\u5907\uff0c\u4ee5\u9632\u6570\u636e\u4e22\u5931   </p> </li> </ul> </li> </ul>"},{"location":"SD/#version-control","title":"Version Control","text":"<p>\u6211\u7684Git\u7b14\u8bb0</p>"},{"location":"SD/#labs","title":"Labs","text":"<p>My Labs Repository</p>"},{"location":"SD/#lab-1","title":"Lab 1","text":"<ul> <li> <p><code>.tgz</code>(<code>tar.gz</code>)\u6587\u4ef6</p> <ul> <li> <p>\u538b\u7f29\uff1a<code>file --(tar)--&gt; file.tar --(gzip)--&gt; file.tar.gz</code></p> </li> <li> <p>\u89e3\u538b </p> <pre><code>tar -xvzf filename.tgz\n</code></pre> <ul> <li> <p><code>-x</code>\uff1a\u89e3\u538b</p> </li> <li> <p><code>-v</code>\uff1a\u663e\u793a\u8be6\u7ec6\u4fe1\u606f</p> </li> <li> <p><code>-z</code>\uff1a\u4f7f\u7528<code>gzip</code>\u89e3\u538b</p> </li> <li> <p><code>-f</code>\uff1a\u6307\u5b9a\u6587\u4ef6</p> </li> </ul> </li> </ul> </li> <li> <p><code>xargs</code></p> <p>\u5e38\u548c\u7ba1\u9053\u7b26<code>|</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u5c06\u524d\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u4f5c\u4e3a\u540e\u4e00\u4e2a\u547d\u4ee4\u7684\u53c2\u6570\uff0c\u6ce8\u610f<code>xargs</code>\u9ed8\u8ba4\u4ee5\u7a7a\u683c\u5206\u9694\u53c2\u6570\uff0c\u5c06\u6362\u884c\u7b26\u8f6c\u6362\u4e3a\u7a7a\u683c\uff0c\u5e76\u4e14\u8981\u5199\u5728\u540e\u4e00\u4e2a\u547d\u4ee4\u7684\u524d\u9762</p> <pre><code># command1 | xargs command2\ncat * | xargs echo # \u5c06\u6240\u6709\u6587\u4ef6\u5185\u5bb9\u4ee5\u4e00\u884c\u8f93\u51fa\n</code></pre> </li> <li> <p><code>tr</code></p> <p>\u66ff\u6362\u5b57\u7b26</p> <p></p> </li> <li> <p><code>grep</code> \u9ad8\u7ea7\u7528\u6cd5</p> <ul> <li> <p><code>-v</code>\uff1a\u53d6\u53cd\uff0c\u663e\u793a\u4e0d\u5305\u542b\u5173\u952e\u5b57\u7684\u884c</p> </li> <li> <p><code>-i</code>\uff1a\u5ffd\u7565\u5927\u5c0f\u5199</p> </li> <li> <p><code>-c</code>\uff1a\u7edf\u8ba1\u5339\u914d\u884c\u6570</p> </li> <li> <p><code>-n</code>\uff1a\u663e\u793a\u884c\u53f7</p> </li> <li> <p><code>--context|before|after n</code>\uff1a\u663e\u793a\u5339\u914d\u884c\u524d\u540e\u7684\u884c\u6570</p> </li> </ul> </li> <li> <p>\u6587\u4ef6\u6743\u9650</p> Note <ul> <li> <p><code>r</code>\uff1a\u8bfb\u6743\u9650</p> </li> <li> <p><code>w</code>\uff1a\u5199\u6743\u9650</p> </li> <li> <p><code>x</code>\uff1a\u6267\u884c\u6743\u9650</p> </li> <li> <p><code>d</code>\uff1a\u76ee\u5f55</p> </li> <li> <p><code>l</code>\uff1a\u94fe\u63a5\u6587\u4ef6</p> </li> <li> <p><code>s</code>\uff1a\u5957\u63a5\u5b57\u6587\u4ef6</p> </li> <li> <p><code>p</code>\uff1a\u7ba1\u9053\u6587\u4ef6</p> </li> <li> <p><code>c</code>\uff1a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6</p> </li> <li> <p><code>b</code>\uff1a\u5757\u8bbe\u5907\u6587\u4ef6</p> </li> </ul> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u6587\u4ef6\u6743\u9650\u7b2c1\u4e2a\u5b57\u7b26\u8868\u793a\u6587\u4ef6\u7c7b\u578b\uff0c\u540e\u9762\u76849\u4e2a\u5b57\u7b26\u5206\u4e3a\u4e09\u7ec4\uff0c\u5206\u522b\u662f<code>u</code>\uff08\u6240\u6709\u8005\uff09\u3001<code>g</code>\uff08\u6240\u5c5e\u7ec4\uff09\u3001<code>o</code>\uff08\u5176\u4ed6\u7528\u6237\uff09\uff0c\u6bcf\u7ec4\u6743\u9650\u5206\u522b\u662f<code>rwx</code>\uff0c\u7528\u6570\u5b57\u8868\u793a\u5219\u4e3a<code>421</code></p> <p>\u4f7f\u7528<code>chmod</code>\u547d\u4ee4\u4fee\u6539\u6587\u4ef6\u6743\u9650\uff0c\u5982<code>chmod 777 filename</code>\uff0c\u5176\u4e2d<code>777</code>\u8868\u793a\u6240\u6709\u7528\u6237\u90fd\u6709\u8bfb\u5199\u6267\u884c\u6743\u9650</p> <p>\u4f7f\u7528<code>chown</code>\u547d\u4ee4\u4fee\u6539\u6587\u4ef6\u6240\u6709\u8005\uff0c\u5982<code>chown user:group filename</code></p> </li> <li> <p><code>head / tail</code></p> <ul> <li><code>head / tail</code></li> </ul> <p>\u663e\u793a\u6587\u4ef6\u5934/\u5c3e</p> <ul> <li><code>--lines n</code>\uff1a\u663e\u793a\u524d/\u540en\u884c</li> </ul> </li> <li> <p><code>less / more</code></p> <p>\u5206\u9875\u663e\u793a\u6587\u4ef6\u5185\u5bb9\uff0c<code>less</code>\u6bd4<code>more</code>\u66f4\u5f3a\u5927</p> <ul> <li> <p><code>space</code>\uff1a\u4e0b\u4e00\u9875</p> </li> <li> <p><code>b</code>\uff1a\u4e0a\u4e00\u9875</p> </li> <li> <p><code>q</code>\uff1a\u9000\u51fa</p> </li> <li> <p><code>/</code>\uff1a\u641c\u7d22</p> </li> </ul> </li> <li> <p><code>find</code></p> <p>\u67e5\u627e\u6587\u4ef6</p> <ul> <li> <p><code>-name</code>\uff1a\u6309\u6587\u4ef6\u540d\u67e5\u627e</p> </li> <li> <p><code>-type</code>\uff1a\u6309\u6587\u4ef6\u7c7b\u578b\u67e5\u627e</p> </li> <li> <p><code>-size</code>\uff1a\u6309\u6587\u4ef6\u5927\u5c0f\u67e5\u627e</p> </li> <li> <p><code>-exec</code>\uff1a\u6267\u884c\u547d\u4ee4</p> </li> </ul> </li> </ul>"},{"location":"SD/#lab-2","title":"Lab 2","text":"<ul> <li> <p>vim</p> </li> <li> <p><code>wc -l</code> \u4f1a\u9ed8\u8ba4\u8f93\u51fa\u6587\u4ef6\u540d\uff0c\u76ee\u524d\u4f7f\u7528\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 <code>cat filename | wc -l</code></p> </li> </ul>"},{"location":"SD/#lab-3","title":"Lab 3","text":"<ul> <li> <p><code>.deb</code> \u6587\u4ef6\u6253\u5305\uff08ex1\uff09</p> <ul> <li> <p>\u4f7f\u7528 <code>fpm</code> \u5de5\u5177\u6253\u5305</p> </li> <li> <p><code>dpkg -i filename.deb</code>\uff1a\u5b89\u88c5</p> </li> <li> <p><code>dpkg -r package</code>\uff1a\u5378\u8f7d</p> </li> <li> <p><code>dpkg -l</code>\uff1a\u5217\u51fa\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305</p> </li> <li> <p><code>dpkg -L package</code>\uff1a\u5217\u51fa\u8f6f\u4ef6\u5305\u7684\u6587\u4ef6\u5217\u8868</p> </li> <li> <p><code>dpkg -S file</code>\uff1a\u67e5\u627e\u6587\u4ef6\u5c5e\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305</p> </li> </ul> </li> <li> <p><code>.deb</code> \u6587\u4ef6\u89e3\u5305\uff08ex2\uff09</p> <ul> <li> <p><code>dpkg -c filename.deb</code>\uff1a\u5217\u51fa\u6587\u4ef6</p> </li> <li> <p><code>dpkg -x filename.deb</code>\uff1a\u89e3\u5305\uff0c\u53ea\u80fd\u5f97\u5230\u6570\u636e\u6587\u4ef6</p> </li> <li> <p><code>dpkg -e filename.deb</code>\uff1a\u63d0\u53d6\u63a7\u5236\u6587\u4ef6</p> </li> </ul> <p>\u6700\u7ec8\u53ef\u4ee5\u5f97\u5230\u8fd9\u6837\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u5176\u4e2d<code>DEBIAN</code>\u6587\u4ef6\u5939\u4e2d\u5b58\u653e\u63a7\u5236\u6587\u4ef6, <code>ocfspy</code>\u6587\u4ef6\u4e2d\u4e3a\u63d0\u53d6\u51fa\u7684\u6570\u636e\u6587\u4ef6 </p> <p></p> <p>\u5bf9<code>control</code>\u6587\u4ef6\u8fdb\u884c\u68c0\u67e5\uff0c\u4f1a\u53d1\u73b0\u5176\u4e2ddependency\u663e\u7136\u4e0d\u5bf9\uff0c\u4e0d\u80fd\u81ea\u5df1\u4f9d\u8d56\u81ea\u5df1</p> <p></p> <p>\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u5728\u4e0a\u56fe\u6240\u793a\u7684\u6587\u4ef6\u7ed3\u6784\u4e0b\uff0c\u4f7f\u7528<code>dpkg -b ocfspy</code> <code>fakeroot dpkg-deb --build ocfspy</code> \u6253\u5305\uff0c\u5f97\u5230\u65b0\u7684<code>.deb</code>\u6587\u4ef6</p> </li> <li> <p>arch linux package</p> <p>\uff08\u76ee\u524d\u81ea\u5df1\u5728\u4f7f\u7528arch\uff0c\u56e0\u6b64\u4e5f\u501f\u6b64\u673a\u4f1a\u5b66\u4e60\u4e00\u4e0b\uff09</p> <ul> <li> <p><code>PKGBUILD</code>\uff1a\u63cf\u8ff0\u8f6f\u4ef6\u5305\u7684\u5143\u4fe1\u606f\uff0c\u5982\u540d\u79f0\u3001\u7248\u672c\u3001\u4f9d\u8d56\u7b49</p> <p>\u5b98\u65b9\u6587\u6863</p> <p>arch\u7684PKGBUILD\u6587\u4ef6\u5c06\u5bf9\u5e94\u7684\u8f6f\u4ef6\u5305\u4fe1\u606f\u4f7f\u7528URL\u6216FTP\u5730\u5740\u7684\u65b9\u5f0f\u8fdb\u884c\u8bb0\u5f55\uff0c\u5728\u4e0b\u65b9\u7684\u56db\u4e2a\u51fd\u6570<code>prepare</code> <code>build</code> <code>check</code> <code>package</code>\u4e2d\u8fdb\u884c\u4e0b\u8f7d\u3001\u89e3\u538b\u3001\u7f16\u8bd1\u3001\u6253\u5305\u7b49\u64cd\u4f5c</p> </li> <li> <p><code>makepkg</code>\uff1a\u6253\u5305</p> <p>\u5982\u679c\u5c06\u751f\u6210\u7684<code>.pkg.tar.xz</code>\u6587\u4ef6\u8fdb\u884c\u89e3\u538b\uff0c\u53ef\u4ee5\u770b\u5230\u548c<code>.deb</code>\u6587\u4ef6\u7c7b\u4f3c\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u5176\u4e2d\u5305\u76f8\u5173\u7684\u5143\u4fe1\u606f\u4e00\u822c\u4ee5\u9690\u85cf\u6587\u4ef6\u7684\u5f62\u5f0f\u5b58\u653e</p> <p></p> </li> <li> <p><code>pacman -U filename.pkg.tar.xz</code>\uff1a\u5b89\u88c5</p> </li> </ul> </li> </ul>"},{"location":"SD/#lab-4","title":"Lab 4","text":"<ul> <li> <p><code>systemd</code></p> <p>\u5b58\u653e\u4f4d\u7f6e</p> <p><code>/lib/systemd/system</code>\uff1a\u7cfb\u7edf\u670d\u52a1</p> <p><code>/etc/systemd/system</code>\uff1a\u7528\u6237\u670d\u52a1\uff0c\u5177\u6709\u6700\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u4e00\u822c\u81ea\u5b9a\u4e49\u670d\u52a1\u90fd\u653e\u5728\u8fd9\u91cc</p> <p>*<code>/run/systemd/system</code>\uff1a\u8fd0\u884c\u65f6\u670d\u52a1\uff0c\u4e00\u822c\u4e0d\u76f4\u63a5\u64cd\u4f5c\uff0c\u4f18\u5148\u7ea7\u4ecb\u4e8e\u4e0a\u9762\u4e24\u8005\u4e4b\u95f4</p> \u7ba1\u7406\u7684unit\u79cd\u7c7b <p>\u8fd8\u6ca1\u6709\u4ed4\u7ec6\u7814\u7a76</p> <ul> <li> <p><code>service</code>\uff1a\u540e\u53f0\u670d\u52a1\u8fdb\u7a0b</p> </li> <li> <p><code>socket</code>\uff1a\u5957\u63a5\u5b57\uff0c\u5f80\u5f80\u7528\u4e8e\u76d1\u542c\u7aef\u53e3\u7b49</p> </li> <li> <p><code>target</code>\uff1a\u53ef\u4ee5\u89c6\u4e3a\u4e00\u4e2a\u7ec4\uff0c\u7528\u6765\u5b9a\u4e49\u7cfb\u7edf\u7684\u8fd0\u884c\u72b6\u6001</p> </li> <li> <p><code>device</code>\uff1a\u786c\u4ef6\u8bbe\u5907</p> </li> <li> <p><code>mount</code>\uff1a\u7ba1\u7406\u6302\u8f7d\u70b9</p> </li> <li> <p><code>automount</code>\uff1a\u81ea\u52a8\u6302\u8f7d\uff0c\u9996\u6b21\u8bbf\u95ee\u65f6\u6302\u8f7d\uff0c\u8282\u7701\u8d44\u6e90</p> </li> <li> <p><code>path</code>\uff1a\u76d1\u89c6\u6587\u4ef6\u6216\u76ee\u5f55</p> </li> <li> <p><code>timer</code>\uff1a\u5b9a\u65f6\u5668</p> </li> <li> <p><code>snapshot</code>\uff1a\u5feb\u7167\uff0c\u7528\u4e8e\u56de\u6eda</p> </li> <li> <p><code>swap</code>\uff1a\u7ba1\u7406\u4ea4\u6362\u7a7a\u95f4</p> </li> <li> <p><code>scope</code>\uff1a\u4f5c\u7528\u57df\uff0c\u4e34\u65f6\u805a\u5408\u8fdb\u7a0b\u7ec4</p> </li> <li> <p><code>slice</code>\uff1a\u5207\u7247\uff0c\u7528\u4e8e\u8d44\u6e90\u9694\u79bb</p> </li> </ul> <ul> <li> <p>Unit File</p> <p>tutorial</p> <ul> <li> <p><code>[Unit]</code>\uff1a\u63cf\u8ff0\u670d\u52a1\u7684\u5143\u4fe1\u606f\uff0c\u5982\u540d\u79f0\u3001\u63cf\u8ff0\u3001\u4f9d\u8d56\u7b49</p> <ul> <li> <p><code>Description</code>\uff1a\u63cf\u8ff0</p> </li> <li> <p><code>Requires</code>\uff1a\u4f9d\u8d56\uff0c\u5373\u542f\u52a8\u5f53\u524d\u670d\u52a1\u524d\uff0c\u9700\u8981\u542f\u52a8\u7684\u5176\u4ed6\u670d\u52a1 </p> </li> <li> <p><code>After</code>\uff1a\u5047\u4f9d\u8d56\uff0c\u5373\u5148\u542f\u52a8\u5217\u8868\u4e2d\u7684\u670d\u52a1\uff0c\u518d\u542f\u52a8\u5f53\u524d\u670d\u52a1</p> </li> <li> <p><code>Before</code>\uff1a\u5047\u4f9d\u8d56\uff0c\u5373\u5148\u542f\u52a8\u5f53\u524d\u670d\u52a1\uff0c\u518d\u542f\u52a8\u5217\u8868\u4e2d\u7684\u670d\u52a1   </p> </li> </ul> </li> <li> <p><code>[Service]</code>\uff1a\u63cf\u8ff0\u670d\u52a1\u7684\u6267\u884c\u4fe1\u606f\uff0c\u5982\u542f\u52a8\u547d\u4ee4\u3001\u7528\u6237\u3001\u73af\u5883\u53d8\u91cf\u7b49</p> <ul> <li> <p><code>ExecStart</code>\uff1a\u542f\u52a8\u547d\u4ee4</p> </li> <li> <p><code>Restart</code>\uff1a\u91cd\u542f\u7b56\u7565\uff0c\u5982<code>always</code>\u8868\u793a\u603b\u662f\u91cd\u542f\uff0c<code>on-failure</code>\u8868\u793a\u5931\u8d25\u65f6\u91cd\u542f\uff0c<code>never</code>\u8868\u793a\u4e0d\u91cd\u542f  </p> </li> <li> <p><code>RestartSec</code>\uff1a\u91cd\u542f\u95f4\u9694 </p> </li> </ul> </li> <li> <p><code>[Install]</code>\uff1a\u63cf\u8ff0\u670d\u52a1\u7684\u5b89\u88c5\u4fe1\u606f\uff0c\u5982\u542f\u52a8\u7ea7\u522b\u3001\u4f9d\u8d56\u7b49</p> <ul> <li><code>WantedBy</code>\uff1a\u542f\u52a8\u7ea7\u522b\uff0c\u5373\u5728\u54ea\u4e2a\u7ea7\u522b\u542f\u52a8\u670d\u52a1</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>process</p> <ul> <li> <p><code>ps</code>\uff1a\u67e5\u770b\u8fdb\u7a0b</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u4f1a\u663e\u793a\u5f53\u524d\u7ec8\u7aef\u7684\u8fdb\u7a0b</p> <ul> <li> <p><code>-e</code>\uff1a\u663e\u793a\u6240\u6709\u8fdb\u7a0b</p> </li> <li> <p><code>-f</code>\uff1a\u663e\u793a\u8be6\u7ec6\u4fe1\u606f</p> </li> <li> <p><code>-u</code>\uff1a\u663e\u793a\u7528\u6237\u8fdb\u7a0b</p> </li> <li> <p><code>-a</code>\uff1a\u663e\u793a\u6240\u6709\u7ec8\u7aef\u7684\u8fdb\u7a0b     </p> </li> </ul> <p>...  </p> </li> </ul> </li> </ul>"},{"location":"SD/#lab-5","title":"Lab 5","text":"<ul> <li> <p><code>host</code>\uff1a\u67e5\u770b\u57df\u540d\u89e3\u6790\u4fe1\u606f</p> </li> <li> <p><code>hostname</code>\uff1a\u67e5\u770b\u4e3b\u673a\u540d\uff0c\u4e3b\u673aip\u5730\u5740\u7b49</p> </li> <li> <p><code>ping</code>\uff1a\u6d4b\u8bd5\u7f51\u7edc\u8fde\u63a5\uff0c\u53d1\u9001ICMP\u5305</p> </li> <li> <p><code>traceroute</code>\uff1a\u8ddf\u8e2a\u8def\u7531\uff0c\u663e\u793a\u6570\u636e\u5305\u7ecf\u8fc7\u7684\u8def\u7531\u5668</p> </li> <li> <p><code>arp</code>\uff1a\u663e\u793aARP\u7f13\u5b58</p> </li> <li> <p><code>dig</code>\uff1aDNS\u67e5\u8be2\uff0c\u663e\u793a\u57df\u540d\u89e3\u6790\u4fe1\u606f  </p> </li> <li> <p><code>netstat</code>\uff1a\u663e\u793a\u7f51\u7edc\u8fde\u63a5\u3001\u8def\u7531\u3001\u63a5\u53e3\u7b49\u4fe1\u606f</p> </li> <li> <p><code>ip</code>\uff1a\u663e\u793a\u7f51\u7edc\u63a5\u53e3\u4fe1\u606f\uff0c\u5f88\u5f3a\u5927\uff0c\u53ef\u4ee5\u66ff\u4ee3<code>ifconfig</code> <code>route</code>\u7b49\u547d\u4ee4\uff0csheet</p> </li> <li> <p><code>nc</code>\uff1a\u7f51\u7edc\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u7aef\u53e3\u626b\u63cf\u3001\u7aef\u53e3\u76d1\u542c\u7b49</p> </li> </ul>"},{"location":"SD/#lab-6","title":"Lab 6","text":"<ul> <li> <p>DNS \u6682\u65f6\u7565\u8fc7</p> </li> <li> <p>Load Balance</p> <ul> <li> <p>*<code>nginx</code>\uff1a\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u540c\u65f6\u53ef\u4ee5\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3001\u7f13\u5b58\u3001\u53cd\u5411\u4ee3\u7406\u7b49\u529f\u80fd</p> </li> <li> <p><code>haproxy</code>\uff1a\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3001\u5065\u5eb7\u68c0\u67e5\u7b49\u529f\u80fd</p> <ul> <li> <p><code>frontend</code>\uff1a\u524d\u7aef\uff0c\u63a5\u6536\u8bf7\u6c42</p> </li> <li> <p><code>backend</code>\uff1a\u540e\u7aef\uff0c\u5904\u7406\u8bf7\u6c42</p> <ul> <li> <p><code>mode</code>\uff1a\u5de5\u4f5c\u6a21\u5f0f\uff0c\u5982<code>http</code> <code>tcp</code> <code>health</code>\u7b49</p> </li> <li> <p><code>balance</code>\uff1a\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\uff0c\u5982<code>roundrobin</code> <code>leastconn</code> <code>source</code>\u7b49</p> </li> <li> <p><code>server</code>\uff1a\u670d\u52a1\u5668\u5217\u8868\uff0c\u5305\u62ec<code>name</code> <code>address</code> <code>port</code>\u7b49</p> </li> <li> <p><code>option</code>\uff1a\u9009\u9879\uff0c\u5982<code>httpchk</code> <code>check</code>\u7b49</p> <p>\u53ef\u4ee5\u8bbe\u7f6e\u5065\u5eb7\u68c0\u67e5\u7684\u65b9\u5f0f\uff0c\u5982<code>httpchk GET /health</code> <code>check port 80</code>\uff0c\u5728<code>server</code>\u540e\u9762\u52a0\u4e0a<code>check</code>\u5373\u53ef\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6e<code>inter</code> <code>rise</code> <code>fall</code>\u7b49\u53c2\u6570\u6765\u8c03\u6574\u5065\u5eb7\u68c0\u67e5\u7684\u9891\u7387\u548c\u5224\u5b9a\u63a5\u53e3\u7684\u5065\u5eb7\u7a0b\u5ea6\u7684\u6807\u51c6   </p> </li> </ul> <p>algorithm</p> <ul> <li> <p><code>roundrobin</code>\uff1a\u8f6e\u8be2</p> </li> <li> <p><code>leastconn</code>\uff1a\u6700\u5c11\u8fde\u63a5</p> </li> <li> <p><code>source</code>\uff1a\u6e90IP\u7684\u54c8\u5e0c\u503c\u9664\u4ee5\u603b\u6743\u91cd\u8fdb\u884c\u5206\u914d</p> </li> <li> <p><code>uri</code>\uff1aURI\u7684\u54c8\u5e0c\u503c\u9664\u4ee5\u603b\u6743\u91cd\u8fdb\u884c\u5206\u914d</p> </li> <li> <p><code>url_param</code>\uff1aURL\u53c2\u6570\uff0c\u4f7f\u7528\u53c2\u6570\u7684\u54c8\u5e0c\u503c\u9664\u4ee5\u603b\u6743\u91cd\u8fdb\u884c\u5206\u914d</p> </li> </ul> </li> <li> <p><code>listen stats</code>\uff1a\u76d1\u542c\u7aef\u53e3  </p> <p></p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"SD/#lab-7","title":"Lab 7","text":"<ul> <li> <p>GPG</p> <p>GnuPG allows you to encrypt and sign your data and communications; it features a versatile key management system, along with access modules for all kinds of public key directories.</p> <ul> <li> <p>Symmetric</p> <ul> <li> <p><code>gpg --symmetric filename</code>\uff1a\u52a0\u5bc6\uff0c\u9700\u8981\u8f93\u5165\u5bc6\u7801\uff0c\u751f\u6210<code>.gpg</code>\u6587\u4ef6</p> </li> <li> <p><code>gpg -decrypt filename</code>\uff1a\u89e3\u5bc6\uff0c\u9700\u8981\u8f93\u5165\u5bc6\u7801\uff0c\u751f\u6210\u539f\u6587\u4ef6</p> </li> </ul> </li> <li> <p>Asymmetric</p> <p>gpg\u4f7f\u7528keyring\u5bf9\u5bc6\u94a5\u8fdb\u884c\u7ba1\u7406\uff0c\u4e00\u822c\u6709\u4e24\u4e2aring\uff0c\u4e00\u4e2a\u662f\u516c\u94a5ring\uff0c\u4e00\u4e2a\u662f\u79c1\u94a5ring\uff0c\u53ef\u4ee5\u901a\u8fc7<code>gpg --list-keys</code> <code>gpg --list-secret-keys</code>\u67e5\u770b</p> <ul> <li> <p><code>gpg --gen-key</code>\uff1a\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u9700\u8981\u8f93\u5165\u59d3\u540d\u3001\u90ae\u7bb1\u7b49\u4fe1\u606f\uff0c\u4ece\u800c\u83b7\u5f97\u516c\u94a5\u548c\u79c1\u94a5</p> </li> <li> <p><code>gpg --export -a \"User Name\" &gt; public.key</code>\uff1a\u5bfc\u51fa\u516c\u94a5</p> </li> <li> <p><code>gpg --import key</code>\uff1a\u5bfc\u5165\u516c\u94a5/\u79c1\u94a5</p> </li> <li> <p><code>gpg --delete-key \"User Name\"</code>\uff1a\u5220\u9664\u516c\u94a5</p> <p><code>gpg --delete-secret-key \"User Name\"</code>\uff1a\u5220\u9664\u79c1\u94a5 </p> </li> <li> <p><code>gpg --encrypt -r \"User Name\" filename</code>\uff1a\u52a0\u5bc6\uff0c\u9700\u8981\u6b64\u7528\u6237\u7684\u516c\u94a5\uff0c\u751f\u6210<code>.gpg</code>\u6587\u4ef6</p> </li> </ul> </li> <li> <p>Sign</p> <ul> <li> <p><code>gpg --sign filename</code>\uff1a\u7b7e\u540d\uff0c\u751f\u6210<code>.gpg</code>\u6587\u4ef6</p> </li> <li> <p><code>gpg --verify filename.gpg</code>\uff1a\u9a8c\u8bc1\u7b7e\u540d\uff0c\u9700\u8981\u516c\u94a5</p> </li> <li> <p>*\u8981\u89e3\u5bc6\u7b7e\u540d\u6587\u4ef6\uff0c\u9700\u8981\u4e24\u6b21\u89e3\u5bc6\uff0c\u4e00\u6b21\u9a8c\u8bc1\u7b7e\u540d\uff0c\u4e00\u6b21\u89e3\u5bc6\u6587\u4ef6</p> </li> </ul> </li> </ul> </li> <li> <p>Hash\uff08Checksum\uff09</p> <ul> <li> <p><code>md5sum file</code>\uff1a\u751f\u6210MD5\u6821\u9a8c\u548c</p> </li> <li> <p><code>sha1sum file</code>\uff1a\u751f\u6210SHA1\u6821\u9a8c\u548c</p> </li> <li> <p><code>sha256sum file</code>\uff1a\u751f\u6210SHA256\u6821\u9a8c\u548c</p> </li> </ul> </li> </ul>"},{"location":"SD/#lab-8","title":"Lab 8","text":"<ul> <li> <p>Pull Request</p> <ul> <li> <p>\u5148fork\u5230\u81ea\u5df1\u7684\u4ed3\u5e93</p> </li> <li> <p>\u5728\u8fd9\u4e2a\u4ed3\u5e93\u4e2d\u8fdb\u884c\u4fee\u6539</p> </li> <li> <p>\u63d0\u4ea4PR  </p> </li> </ul> </li> <li> <p><code>rysnc</code></p> <p>\u540c\u6b65\u6587\u4ef6\uff08\u5939\uff09\uff0c\u76f8\u6bd4<code>cp</code> <code>scp</code>\u7b49\u547d\u4ee4\uff0c<code>rsync</code>\u53ef\u4ee5\u5b9e\u73b0\u589e\u91cf\u540c\u6b65\uff08\u6bd4\u8f83\u6700\u540e\u4fee\u6539\u7684\u65f6\u95f4\u6233\uff09\uff0c\u53ea\u540c\u6b65\u4fee\u6539\u7684\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u6574\u4e2a\u6587\u4ef6\u5939\uff0c\u5e76\u4e14\u53ef\u4ee5\u4fdd\u8bc1\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u66f4\u9002\u5408\u5927\u6587\u4ef6\u3001\u591a\u670d\u52a1\u5668\u540c\u6b65\u7b49\u573a\u666f</p> <ul> <li> <p><code>rsync -avz source destination</code>\uff1a\u540c\u6b65\u6587\u4ef6\u5939</p> </li> <li> <p><code>rsync -avz --delete source destination</code>\uff1a\u540c\u6b65\u6587\u4ef6\u5939\u5e76\u5220\u9664\u591a\u4f59\u6587\u4ef6</p> </li> <li> <p><code>rsync -avz -e ssh source destination</code>\uff1a\u901a\u8fc7ssh\u540c\u6b65\u6587\u4ef6\u5939</p> </li> <li> <p><code>rsync -avz -e ssh --delete source destination</code>\uff1a\u901a\u8fc7ssh\u540c\u6b65\u6587\u4ef6\u5939\u5e76\u5220\u9664\u591a\u4f59\u6587\u4ef6</p> </li> </ul> </li> </ul>"},{"location":"Vim/","title":"Vim","text":"<p>Vim \u8fd9\u79cd\u4e1c\u897f\uff0c\u53ea\u6709\u7ecf\u5e38\u4f7f\u7528\u624d\u80fd\u719f\u7ec3\u638c\u63e1\uff0c\u73b0\u9636\u6bb5\u8fd8\u662fVSCode\u7528\u7684\u8212\u670d\uff0c\u6240\u4ee5\u6211\u4e5f\u4e0d\u592a\u4f1a</p> <p>\u8fd9\u91cc\u4e3b\u8981\u8bb0\u8f7d\u4e00\u4e9b\u9047\u5230\u5230\u6bd4\u8f83\u6709\u610f\u601d\u7684 Vim \u4f7f\u7528\u6280\u5de7</p>"},{"location":"Vim/#_1","title":"\u79fb\u52a8","text":"<ul> <li> <p><code>hjkl</code>\uff1a\u5de6\u4e0b\u4e0a\u53f3</p> </li> <li> <p><code>w</code>\uff1a\u4e0b\u4e00\u4e2a\u5355\u8bcd</p> </li> <li> <p><code>b</code>\uff1a\u4e0a\u4e00\u4e2a\u5355\u8bcd</p> </li> <li> <p><code>e</code>\uff1a\u5355\u8bcd\u672b\u5c3e</p> </li> <li> <p><code>0</code>\uff1a\u884c\u9996</p> </li> <li> <p><code>$</code>\uff1a\u884c\u5c3e</p> </li> <li> <p><code>^</code>\uff1a\u884c\u9996\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5b57\u7b26</p> </li> <li> <p><code>gg</code>\uff1a\u6587\u4ef6\u9996</p> </li> <li> <p><code>G</code>\uff1a\u6587\u4ef6\u5c3e</p> </li> </ul> <p>Tip</p> <p>\u5f88\u591a\u547d\u4ee4\u90fd\u53ef\u4ee5\u52a0\u6570\u5b57\uff0c\u6bd4\u5982 <code>3w</code> \u8868\u793a\u5411\u540e\u79fb\u52a8\u4e09\u4e2a\u5355\u8bcd</p>"},{"location":"Vim/#_2","title":"\u7f16\u8f91","text":"<ul> <li> <p><code>i</code>\uff1a\u5728\u5f53\u524d\u5b57\u7b26\u524d\u63d2\u5165\uff0c\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</p> </li> <li> <p><code>a</code>\uff1a\u5728\u5f53\u524d\u5b57\u7b26\u540e\u63d2\u5165\uff0c\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</p> </li> <li> <p><code>o</code>\uff1a\u5728\u5f53\u524d\u884c\u4e0b\u63d2\u5165\u65b0\u884c\uff0c\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</p> </li> <li> <p><code>O</code>\uff1a\u5728\u5f53\u524d\u884c\u4e0a\u63d2\u5165\u65b0\u884c\uff0c\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f</p> </li> <li> <p><code>x</code>\uff1a\u5220\u9664\u5f53\u524d\u5b57\u7b26</p> </li> <li> <p><code>dd</code>\uff1a\u5220\u9664\u5f53\u524d\u884c</p> </li> <li> <p><code>yy</code>\uff1a\u590d\u5236\u5f53\u524d\u884c</p> </li> <li> <p><code>p</code>\uff1a\u7c98\u8d34\u5728\u5f53\u524d\u884c\u540e</p> </li> <li> <p><code>P</code>\uff1a\u7c98\u8d34\u5728\u5f53\u524d\u884c\u524d</p> </li> <li> <p><code>u</code>\uff1a\u64a4\u9500</p> </li> </ul>"},{"location":"Vim/#6","title":"6","text":"<ul> <li> <p><code>\uff1ashell</code> \u4e0d\u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff0c\u76f4\u63a5\u8fdb\u5165shell\u6a21\u5f0f\uff08<code>exit</code>\u9000\u56de\u5f53\u524d\u7a97\u53e3\uff09</p> </li> <li> <p><code>:split filename</code>\uff1a\u5728\u5f53\u524d\u7a97\u53e3\u4e0a\u4e0b\u5206\u5272\uff0c\u6253\u5f00\u6587\u4ef6</p> <p><code>:vsplit filename</code>\uff1a\u5728\u5f53\u524d\u7a97\u53e3\u5de6\u53f3\u5206\u5272\uff0c\u6253\u5f00\u6587\u4ef6</p> <p>Tip</p> <p>\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528 <code>Ctrl + w</code> + <code>hjkl</code> \u5728\u7a97\u53e3\u95f4\u5207\u6362</p> </li> <li> <p>indent</p> <p>normal\u6a21\u5f0f\u4e0b\uff0c<code>&gt;&gt;</code> \u53ef\u4ee5\u7f29\u8fdb\u5f53\u524d\u884c\uff0c<code>&lt;&lt;</code> \u53ef\u4ee5\u51cf\u5c11\u7f29\u8fdb</p> <p>visual\u6a21\u5f0f\u4e0b\uff0c<code>&gt;</code> \u53ef\u4ee5\u7f29\u8fdb\u9009\u4e2d\u884c\uff0c<code>&lt;</code> \u53ef\u4ee5\u51cf\u5c11\u7f29\u8fdb</p> </li> </ul>"},{"location":"Network/Network1/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc","text":"<p>Forked Zhang Each\u524d\u8f88</p>"},{"location":"Network/Network1/#chapter1-introduction","title":"Chapter1.  Introduction","text":"<p>Network Scales</p> <ul> <li>Personal Area Network (PAN)</li> <li>Local Area Network (LAN)</li> <li>Metropolitan Area Network (MAN, city\u7ea7\u522b)</li> <li> <p>Wide Area Network (WAN\uff0ccountry\u7ea7\u522b)</p> WAN <p>\u4e3b\u673a\u548c\u901a\u4fe1\u5b50\u7f51\u6784\u6210</p> <ul> <li>Wired telephone network (PSTN)</li> <li>Cellular telephone network(NG)</li> <li>SD-WANs (Software-Defined WANs)</li> </ul> </li> </ul>"},{"location":"Network/Network1/#11","title":"1.1 \u7f51\u7edc\u6a21\u578b","text":"<ul> <li>OSI \u4e03\u5c42\u6a21\u578b\uff1a</li> <li>\u7269\u7406\u5c42\uff1a\u5728\u4e00\u6761\u901a\u4fe1\u4fe1\u9053\u4e0a\u4f20\u8f93\u6bd4\u7279<ul> <li>\u8981\u786e\u5b9a\u7528\u4ec0\u4e48\u7535\u5b50\u4fe1\u53f7\u8868\u793a0\u548c1\uff0c\u4e00\u4e2a\u6bd4\u7279\u6301\u7eed\u591a\u4e45\uff0c\u4f20\u8f93\u662f\u5426\u53ef\u4ee5\u53cc\u5411\uff0c\u8fde\u63a5\u5982\u4f55\u5efa\u7acb\u7b49\u7b49</li> </ul> </li> <li>\u6570\u636e\u94fe\u8def\u5c42\uff1a\u53d1\u9001\u65b9\u5c06\u8f93\u5165\u6570\u636e\u62c6\u5206\u6210\u82e5\u5e72\u6570\u636e\u5e27(frame)\uff0c\u7136\u540e\u6309\u7167\u4e00\u5b9a\u7684\u987a\u5e8f\u6765\u53d1\u9001\u8fd9\u4e9b\u6570\u636e\u5e27<ul> <li>\u63a5\u6536\u65b9\u5fc5\u987b\u786e\u8ba4\u6536\u5230\u7684\u6bcf\u4e00\u5e27\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u987a\u5e8f\u548c\u5b8c\u6574\u6027\uff0c\u7136\u540e\u53d1\u56de\u786e\u8ba4\u5e27</li> <li>\u4e3a\u4e86\u9632\u6b62\u53d1\u9001\u65b9\u6df9\u6ca1\u6162\u901f\u7684\u63a5\u6536\u65b9\uff0c\u9700\u8981\u5bf9\u6d41\u91cf\u8fdb\u884c\u8c03\u8282</li> <li>\u4ecb\u8d28\u8bbf\u95ee\u63a7\u5236\u5b50\u5c42\u5219\u662f\u63a7\u5236\u5bf9\u5171\u4eab\u4fe1\u9053\u7684\u8bbf\u95ee\uff0c\u6ca1\u6709\u62e5\u585e\u63a7\u5236\u7684\u529f\u80fd</li> </ul> </li> <li>\u7f51\u7edc\u5c42\uff1a\u63a7\u5236\u5b50\u7f51\u7684\u8fd0\u884c\uff0c\u5c06\u6570\u636e\u5305\u4ece\u6e90\u7aef\u53d1\u9001\u5230\u63a5\u6536\u65b9\uff0c\u9700\u8981\u5904\u7406\u62e5\u585e<ul> <li>\u5141\u8bb8\u5f02\u6784\u7684\u7f51\u7edc\u76f8\u4e92\u8fde\u63a5\u6210\u4e92\u8054\u7f51\u7edc</li> </ul> </li> <li>\u4f20\u8f93\u5c42\uff1a\u63a5\u53d7\u4f1a\u8bdd\u5c42\u7684\u6570\u636e\uff0c\u5c06\u6570\u636e\u5206\u5272\u6210\u5c0f\u5355\u5143\uff0c\u7136\u540e\u4f20\u5230\u7f51\u7edc\u5c42<ul> <li>\u4f20\u8f93\u5c42\u662f\u771f\u6b63\u7684\u7aef\u5230\u7aef\u7684\u5c42\uff0c\u59cb\u7ec8\u5c06\u6e90\u6570\u636e\u4ece\u6e90\u7aef\u5e26\u5230\u63a5\u6536\u65b9</li> <li>OSI\u6a21\u578b\u4e2d1-3\u5c42\u662f\u94fe\u5f0f\u8fde\u63a5\u7684\uff0c\u800c4-7\u5c42\u662f\u7aef\u5230\u7aef\u7684</li> </ul> </li> <li>\u4f1a\u8bdd\u5c42\uff1a\u8d1f\u8d23\u7ba1\u7406\u4e3b\u673a\u95f4\u7684\u4f1a\u8bdd\u8fdb\u7a0b\uff0c\u5229\u7528\u4f20\u8f93\u5c42\u63d0\u4f9b\u7684\u7aef\u5230\u7aef\u7684\u670d\u52a1\uff0c\u5411\u8868\u793a\u5c42\u63d0\u4f9b\u589e\u503c\u670d\u52a1\uff0c\u4e3b\u8981\u8868\u73b0\u4e3a\u8868\u793a\u5c42\u5b9e\u4f53\u6216\u8005\u7528\u6237\u8fdb\u7a0b\u5efa\u7acb\u8fde\u63a5\u5e76\u5728\u8fde\u63a5\u4e0a\u4f20\u8f93\u6570\u636e<ul> <li>\u8fd9\u4e00\u8fc7\u7a0b\u4e5f\u79f0\u4e3a\u5efa\u7acb\u540c\u6b65</li> </ul> </li> <li>\u8868\u793a\u5c42\uff1a\u5173\u6ce8\u4f20\u9012\u4fe1\u606f\u7684\u8bed\u6cd5\u548c\u8bed\u4e49\uff0c\u4e3b\u8981\u662f\u5b9e\u73b0\u6570\u636e\u7684\u683c\u5f0f\u8f6c\u6362\u548c\u538b\u7f29</li> <li>\u5e94\u7528\u5c42\uff1a\u5305\u542b\u4e86\u5404\u79cd\u5404\u6837\u7684\u534f\u8bae\uff0c\u63d0\u4f9b\u4e86\u7528\u6237\u548c\u7f51\u7edc\u7684\u63a5\u53e3<ul> <li>\u8f6f\u4ef6\u5f00\u53d1\u57fa\u672c\u90fd\u662f\u5e94\u7528\u5c42\u7684\u5de5\u4f5c</li> </ul> </li> </ul> <ul> <li> <p>\u51e0\u79cd\u5e38\u89c1\u8bbe\u5907\u6240\u5904\u7684OSI\u4e03\u5c42\u6a21\u578b\u7684\u5c42\u7ea7\uff1a</p> <ul> <li>\u8def\u7531\u5668\uff1a\u7f51\u7edc\u5c42</li> <li>\u4ea4\u6362\u673a\uff1a\u6570\u636e\u94fe\u8def\u5c42</li> <li>\u96c6\u7ebf\u5668\uff1a\u7269\u7406\u5c42</li> </ul> </li> <li> <p>TCP/IP</p> </li> <li>\u539f\u672c\u662fLinux/Unix\u4e0b\u7684\u4e00\u4e2a\u7f51\u7edc\u901a\u4fe1\u6808\uff0c\u6bd4\u8f83OSI\u4e03\u5c42\u6a21\u578b\u7b80\u5355</li> <li>\u6ca1\u6709\u8868\u793a\u5c42\u548c\u4f1a\u8bdd\u5c42\uff0c\u7269\u7406\u5c42\u548c\u6570\u636e\u94fe\u8def\u5c42Host-to-network</li> <li>\u56e0\u4e3a\u5f00\u653e\uff0c\u6240\u4ee5\u7528\u7684\u4eba\u591a\uff0c\u6210\u4e3a\u4e86\u4e92\u8054\u7f51\u7684\u6807\u51c6</li> <li>\u6df7\u5408\u6a21\u578b hybrid model\u2014\u2014\u672c\u8bfe\u7a0b\u8ba8\u8bba\u7684\u6a21\u578b<ul> <li>\u7269\u7406\u5c42</li> <li>\u6570\u636e\u94fe\u63a5\u5c42</li> <li>\u7f51\u7edc\u5c42\uff1a\u53ef\u80fd\u5206\u4e3a\u5185\u5c42\u548c\u5916\u5c42</li> <li>\u4f20\u8f93\u5c42</li> <li>\u5e94\u7528\u5c42</li> </ul> </li> </ul>"},{"location":"Network/Network1/#12","title":"1.2 \u534f\u8bae\u67b6\u6784","text":"<p>\u8bbe\u8ba1\u76ee\u6807</p> <ul> <li>Reliability \u53ef\u9760\u6027</li> <li>Scalability \u53ef\u6269\u5c55\u6027</li> <li>Evolvability \u53ef\u6f14\u5316\u6027</li> <li>Security \u5b89\u5168\u6027</li> </ul> <ul> <li>\u51e0\u4e2a\u5173\u952e\u8bcd\uff1a<ul> <li>Protocol \u534f\u8bae</li> <li>Layer \u5c42</li> <li>Peers \u5bf9\u7b49\u2014\u2014\u4e0d\u540c\u7684host\u4e4b\u95f4\u5b58\u5728\u5bf9\u7b49\u7684\u534f\u8bae\u5c42</li> <li>Interface \u63a5\u53e3\u2014\u2014\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u4e0a\u5c42\u534f\u8bae\u4f1a\u8c03\u7528\u4e0b\u5c42\u534f\u8bae\u7684\u63a5\u53e3</li> <li>Protocol Stack \u534f\u8bae\u6808</li> </ul> </li> <li>\u6570\u636e\u4f20\u8f93\u7684\u8fc7\u7a0b\uff1a<ul> <li>\u5728source machine\u4e2d\uff0c\u6570\u636e\u81ea\u9876\u5411\u4e0b\u4f20\u8f93\uff0c\u6bcf\u4e00\u5c42\u4f1a\u7ed9\u4e0a\u4e00\u5c42\u4f20\u8f93\u7684\u6570\u636e\u5305\u6dfb\u52a0\u4e00\u4e2aheader\uff0c\u5982\u679c\u4f20\u8f93\u7684\u6570\u636e\u5305\u8fc7\u5927\u5219\u4f1a\u628a\u6570\u636e\u5305\u8fdb\u884c\u62c6\u5206\uff0c\u4f46\u662fheader\u4e0d\u4f1a\u8fdb\u884c\u62c6\u5206 </li> <li>\u5728destination machine\u4e2d\uff0c\u5219\u4e00\u6b65\u6b65\u53bb\u6389\u5e95\u5c42\u7684header\uff0c\u5e76\u5c06\u5c0f\u7684\u6570\u636e\u5305\u5408\u5e76</li> </ul> </li> </ul>"},{"location":"Network/Network1/#13-service","title":"1.3 \u670d\u52a1 Service","text":"<ul> <li> <p>\u670d\u52a1\u7c7b\u578b</p> <ul> <li>\u9762\u5411\u8fde\u63a5\u7684\u670d\u52a1 connection-oriented<ul> <li>Reliable message stream \u53ef\u4fe1\u4fe1\u606f\u6d41\uff0c\u6bd4\u5982page\u7684\u5e8f\u5217</li> <li>Reliable byte stream \u53ef\u4fe1\u5b57\u8282\u6d41\uff0c\u6bd4\u5982\u8fdc\u7a0b\u767b\u5f55\uff0cTCP/IP\u534f\u8bae\u5411\u5e94\u7528\u5c42\u53d1\u9001\u7684\u662f\u5b57\u8282\u6d41</li> <li>Unreliable connection \u4e0d\u53ef\u4fe1\u8fde\u63a5\uff0c\u6bd4\u5982\u6570\u5b57\u5316\u8bed\u97f3</li> </ul> </li> <li>\u4e0d\u9700\u8981\u8fde\u63a5\u7684\u670d\u52a1 connection-less<ul> <li>Unreliable datagram \u4e0d\u53ef\u4fe1\u6570\u636e\u62a5\uff0c\u6bd4\u5982\u5783\u573e\u90ae\u4ef6</li> <li>Acknowledged datagram \u5171\u8bc6\u6570\u636e\u5305\uff0c\u6bd4\u5982\u6ce8\u518c\u90ae\u4ef6</li> <li>Request-reply \u8bf7\u6c42\u56de\u590d\uff0c\u6bd4\u5982\u6570\u636e\u5e93\u67e5\u8be2</li> </ul> </li> <li>QoS \u670d\u52a1\u7684\u8d28\u91cf</li> </ul> </li> <li> <p>\u670d\u52a1\u539f\u8bed Service Primitives</p> <ul> <li>\u9762\u5411\u8fde\u63a5\u670d\u52a1\u76845\u4e2a\u670d\u52a1\u539f\u8bed</li> </ul> Primitive Meaning LISTEN \u7b49\u5f85\u4e00\u4e2a\u8fd8\u6ca1\u6765\u7684\u8fde\u63a5 CONNECT \u548c\u4e00\u4e2a\u7b49\u5f85\u7684\u5bf9\u7b49\u5c42\u8fdb\u884c\u8fde\u63a5 RECEIVE \u7b49\u5f85\u4e00\u4e2a\u8fd8\u6ca1\u6765\u7684message SEND \u5411\u5bf9\u7b49\u5c42\u53d1\u9001\u4e00\u4e2amessage DISCONNECT \u7ed3\u675f\u4e00\u4e2a\u8fde\u63a5 <ul> <li>Request--Indication--Response--Confirm</li> </ul> </li> </ul>"},{"location":"Network/Network1/#14-cs","title":"1.4 C/S\u6a21\u5f0f","text":"<ul> <li>Client-Server Model \u5ba2\u6237\u7aef\u4e3b\u52a8\u8fde\u63a5\uff0c\u670d\u52a1\u7aef\u88ab\u52a8\u8fde\u63a5<ul> <li>\u5ba2\u6237\u7aef\u4e4b\u95f4\u4e0d\u80fd\u76f4\u63a5\u901a\u4fe1\uff0c\u5ba2\u6237\u7aef\u7684\u901a\u4fe1\u4e5f\u9700\u8981\u7ecf\u8fc7\u670d\u52a1\u5668</li> <li>\u65b0\u6280\u672f\uff1a\u670d\u52a1\u5668\u5206\u914d\u7aef\u53e3\uff0c\u8ba9\u4e24\u4e2a\u5ba2\u6237\u7aef\u76f4\u63a5\u901a\u4fe1\uff0c\u4e0d\u9700\u8981\u6240\u6709\u6570\u636e\u7ecf\u8fc7\u670d\u52a1\u5668</li> <li>\u5f53\u5ba2\u6237\u7aef\u5347\u7ea7\u7684\u65f6\u5019\u9700\u8981\u66f4\u65b0\u6574\u4e2a\u5ba2\u6237\u7aef\uff0c\u624b\u673aAPP\u5c31\u662fC/S\u6a21\u5f0f</li> </ul> </li> <li>Browser-Server Model \u4eceC/S\u4f53\u7cfb\u53d1\u5c55\u800c\u6765<ul> <li>\u901a\u8fc7\u6d4f\u89c8\u5668\u6765\u5b9e\u73b0\u7528\u6237\u548c\u670d\u52a1\u7aef\u7684\u4ea4\u4e92\uff0c\u53ea\u9700\u8981\u5347\u7ea7\u6d4f\u89c8\u5668</li> </ul> </li> <li> <p>Peer-to-peer Model(P2P\u6a21\u5f0f)\u2014\u2014\u5bf9\u7b49\u7f51\u7edc</p> <ul> <li>\u6bcf\u4e2a\u5ba2\u6237\u7aef\u540c\u65f6\u53c8\u662f\u670d\u52a1\u7aef\uff0c\u6ca1\u6709\u56fa\u5b9a\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef  </li> </ul> </li> <li> <p>wireless network \u65e0\u7ebf\u7f51\u7edc</p> <ul> <li>\u6ce8\u610f\u548c\u79fb\u52a8\u8ba1\u7b97mobile computing\u7684\u533a\u522b\uff0c\u79fb\u52a8\u8ba1\u7b97\u53ef\u4ee5\u662f\u6709\u7ebf\u7684\uff0c\u53ef\u4ee5\u662f\u65e0\u7ebf\u7684</li> <li>wifi\u5c31\u662f\u4e00\u79cd\u65e0\u7ebf\u7f51\u7edc</li> </ul> </li> </ul>"},{"location":"Network/Network1/#15","title":"1.5 \u7f51\u7edc\u4f20\u8f93","text":"<ul> <li>\u4e09\u79cd\u4f20\u8f93\u65b9\u5f0f\uff1a<ul> <li>Broadcast links \u5e7f\u64ad\u5f0f\u4f20\u8f93<ul> <li>\u4f20\u8f93\u6a21\u578b\u7c7b\u4f3c\u4e8e\u603b\u7ebf\uff0c\u603b\u5206\u5f0f\u7ed3\u6784</li> <li>\u4ee5\u592a\u7f51\u7684\u539f\u7406\u90fd\u662f\u57fa\u4e8e\u5e7f\u64ad\u7684</li> </ul> </li> <li>Point-to-point limks \u70b9\u5bf9\u70b9\u4f20\u8f93<ul> <li>\u4f20\u8f93\u6a21\u578b\u662f\u4e00\u5f20\u590d\u6742\u7684\u7f51\u2014\u2014\u7f51\u7edc\u62d3\u6251\u7ed3\u6784</li> <li>\u4e00\u6b21\u53ea\u53d1\u7ed9\u4e00\u53f0\u8ba1\u7b97\u673a</li> </ul> </li> <li>multicasting \u591a\u70b9\u5e7f\u64ad<ul> <li>\u4f20\u8f93\u6a21\u578b\u662f\u4e00\u4e2a\u73af\uff0c\u4e00\u6b21\u53d1\u7ed9\u4e00\u7ec4\u8ba1\u7b97\u673a</li> <li>\u4e0d\u662f\u5929\u7136\u5b58\u5728\u7684\uff0c\u9700\u8981\u901a\u8fc7\u8f6f\u4ef6\u7cfb\u7edf\u6765\u5b9e\u73b0\u591a\u70b9\u5e7f\u64ad\u673a\u5236</li> </ul> </li> </ul> </li> <li>\u7f51\u7edc\u7684\u7c7b\u578b\uff1a\u6309\u7167\u89c4\u6a21\u6765\u5212\u5206<ul> <li>\u4e2a\u4eba\u533a\u57df\u7f51 Personal area network(PAN)</li> <li>\u5c40\u57df\u7f51 Local area network(LAN)</li> <li>\u5c42\u57df\u7f51Metropolitan area network(MAN)<ul> <li>\u6280\u672f\u7684\u53ef\u66ff\u4ee3\u6027\u6bd4\u8f83\u5f3a\uff0c\u5c40\u57df\u7f51\u5927\u4e00\u70b9\u5c31\u53ef\u4ee5\u4f5c\u4e3a\u5c42\u57df\u7f51\uff0c\u5e7f\u57df\u7f51\u5c0f\u4e00\u70b9\u5c31\u53ef\u4ee5\u4f5c\u4e3a\u5c42\u57df\u7f51</li> </ul> </li> <li>\u5e7f\u57df\u7f51Wide area network(WAN)<ul> <li>\u7279\u70b9\u662f\u4f1a\u6709\u5f88\u591arouter\u548csubnet</li> </ul> </li> <li>\u6700\u5927\u7684\u7f51\u7edc\u5c31\u662f\u56e0\u7279\u7f51 The Internet</li> </ul> </li> </ul>"},{"location":"Network/Network1/#16","title":"1.6 \u6027\u80fd\u6307\u6807","text":"<p>\u8fd9\u4e00\u90e8\u5206\u6765\u81eaXXR\u7248\u8ba1\u7f51\uff0c\u4f5c\u4e3a\u57fa\u7840\u77e5\u8bc6\u4e86\u89e3\u4e00\u4e0b</p> <ul> <li>\u6570\u636e\u7387\u548c\u6bd4\u7279\u7387\uff1a\u8868\u793a\u6570\u636e\u4f20\u9001\u7684\u901f\u7387\uff0c\u5355\u4f4d\u662fbit/s\uff0c\u4e5f\u5199\u4f5cbps</li> <li>\u5e26\u5bbd bandwidth</li> <li>\u5e26\u5bbd\u672c\u6765\u662f\u6307\u67d0\u4e2a\u4fe1\u53f7\u5177\u6709\u7684\u9891\u5e26\u5bbd\u5ea6\uff0c\u4e5f\u5c31\u662f\u67d0\u4e2a\u4fe1\u53f7\u6240\u5904\u9891\u7387\u533a\u95f4\u7684\u957f\u5ea6\uff0c\u8fd9\u79cd\u610f\u4e49\u4e0a\u7684\u5e26\u5bbd\u5355\u4f4d\u662fHZ</li> <li>\u4f46\u662f\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\u4e5f\u53ef\u4ee5\u6307\u67d0\u4e2a\u4fe1\u9053\u7684\u6700\u5927\u4f20\u8f93\u901f\u7387\uff0c\u6b64\u65f6\u7684\u5355\u4f4d\u4e5f\u662fbit/s</li> <li>\u4e8b\u5b9e\u4e0a\u4e24\u79cd\u8bf4\u6cd5\u4e00\u79cd\u662f\u9891\u57df\u79f0\u8c13\uff0c\u53e6\u4e00\u79cd\u662f\u65f6\u57df\u79f0\u8c13</li> <li>\u541e\u5410\u91cf\uff1a\u8868\u793a\u5355\u4f4d\u65f6\u95f4\u5185\u67d0\u4e2a\u7f51\u7edc\u6bcf\u79d2\u7684\u5b9e\u9645\u6570\u636e\u91cf\uff0c\u5e76\u4e0d\u662f\u5b9e\u9645\u6570\u636e\u603b\u91cf</li> </ul>"},{"location":"Network/Network2/","title":"Physical Layer","text":""},{"location":"Network/Network2/#20","title":"2.0 \u7269\u7406\u5c42\u7684\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>\u7269\u7406\u5c42\u5b58\u5728\u7684\u610f\u4e49\u6b63\u662f\u8981\u5c3d\u53ef\u80fd\u5730\u5c4f\u853d\u4e0d\u540c\u7684\u4f20\u8f93\u5a92\u4f53\u548c\u901a\u4fe1\u624b\u6bb5\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u4f7f\u5f97\u7269\u7406\u5c42\u4e0a\u9762\u7684\u6570\u636e\u94fe\u8def\u5c42\u611f\u53d7\u4e0d\u5230\u8fd9\u4e9b\u5dee\u5f02</li> <li>\u7269\u7406\u5c42\u7684\u534f\u8bae\u4e5f\u5e38\u5e38\u79f0\u4e3a\u89c4\u7a0b procedure\uff0c\u8fd9\u4e2a\u8bcd\u6bd4\u534f\u8bae\u8981\u51fa\u73b0\u7684\u65e9</li> <li>\u4e00\u4e2a\u6570\u636e\u901a\u4fe1\u7cfb\u7edf\u5206\u4e3a\u5982\u4e0b\u51e0\u4e2a\u90e8\u5206</li> <li>\u6e90\u7cfb\u7edf\uff0c\u4e5f\u53eb\u53d1\u9001\u7aef\u548c\u53d1\u9001\u65b9\uff1a\u5305\u542b\u6e90\u70b9\u548c\u53d1\u9001\u5668</li> <li>\u4f20\u8f93\u7cfb\u7edf\uff0c\u4e5f\u53eb\u4f20\u8f93\u7f51\u7edc</li> <li>\u76ee\u7684\u7cfb\u7edf\uff0c\u4e5f\u53eb\u63a5\u6536\u7aef\uff0c\u5305\u542b\u63a5\u6536\u5668\u548c\u91cd\u70b9</li> </ul>"},{"location":"Network/Network2/#21","title":"2.1 \u6709\u7ebf\u901a\u4fe1\u548c\u65e0\u7ebf\u901a\u4fe1","text":"<ul> <li>\u7269\u7406\u5c42\u7528\u5230\u7684\u51e0\u79cd\u7ebf</li> <li>\u53cc\u7ede\u7ebf Twisted Pair</li> <li>\u540c\u8f74\u7535\u7f06</li> <li>\u5149\u7f06 Fiber Cables<ul> <li>\u5229\u7528\u4e86\u5149\u7684\u5168\u53cd\u5c04\u539f\u7406\uff0c\u5728\u7279\u5b9a\u5165\u5c04\u89d2\u5ea6\u4e0b\u4e0d\u4f1a\u53d1\u751f\u6298\u5c04</li> </ul> </li> <li>\u63a5\u53e3\u7ebf Interface Line</li> <li>\u65e0\u7ebf\u901a\u4fe1\uff1a</li> <li>\u536b\u661f\u901a\u4fe1</li> <li>\u5fae\u6ce2\u901a\u4fe1\uff1a\u5e38\u89c1\u4e8e\u79fb\u52a8\u901a\u8baf\uff0c\u5fae\u6ce2\u4f1a\u7a7f\u8fc7\u906e\u6321\u7269\u7ee7\u7eed\u4f20\u64ad\uff0c\u4f46\u53ef\u80fd\u4f1a\u88ab\u5438\u6536</li> <li>\u7269\u7406\u5c42\u8981\u505a\u7684\u5c31\u662f\u628a\u8ba1\u7b97\u673a\u4e2d\u7684\u7535\u4fe1\u53f7\u8f6c\u5316\u6210\u4e0a\u9762\u8fd9\u4e9b\u53ef\u4ee5\u4f20\u64ad\u7684\u4fe1\u53f7</li> <li>\u4fe1\u53f7 signal\u662f\u6570\u636e\u7684\u7535\u6c14\u6216\u8005\u7535\u78c1\u8868\u73b0\uff0c\u5206\u4e3a\u6a21\u62df\u4fe1\u53f7\u548c\u6570\u5b57\u4fe1\u53f7<ul> <li>\u6a21\u62df\u4fe1\u53f7\u4e5f\u53eb\u8fde\u7eed\u4fe1\u53f7\uff0c\u4ee3\u8868\u6d88\u606f\u7684\u53c2\u6570\u7684\u53d6\u503c\u662f\u8fde\u7eed\u7684</li> <li>\u6570\u5b57\u4fe1\u53f7\u4e5f\u53eb\u79bb\u6563\u4fe1\u53f7\uff0c\u4ee3\u8868\u6d88\u606f\u7684\u53c2\u6570\u53d6\u503c\u662f\u79bb\u6563\u7684\uff0c\u6bd4\u5982\u8ba1\u7b97\u673a\u548c\u89e3\u8c03\u5668\u7684\u901a\u4fe1\u5c31\u662f\u6570\u5b57\u4fe1\u53f7</li> </ul> </li> <li>\u4fe1\u53f7\u5206\u4e3a\u6570\u5b57\u4fe1\u53f7\u548c\u6a21\u62df\u4fe1\u53f7\uff0c\u6bd4\u5982\uff1a<ul> <li>\u7535\u8bdd\u662f\u5c06\u6a21\u62df\u4fe1\u53f7\u8f6c\u6362\u6210\u6a21\u62df\u4fe1\u53f7</li> <li>Modem\u662f\u6a21\u62df\u4fe1\u53f7\u8f6c\u6362\u6210\u6570\u5b57\u4fe1\u53f7</li> <li>Codec\u662f\u628a\u6570\u5b57\u4fe1\u53f7\u8f6c\u6362\u6210\u6a21\u62df\u4fe1\u53f7</li> </ul> </li> </ul>"},{"location":"Network/Network2/#22-channel-transmission","title":"2.2 \u4fe1\u9053channel\u548c\u4f20\u8f93 Transmission","text":"<ul> <li> <p>\u4fe1\u9053\uff1a\u8868\u793a\u5411\u67d0\u4e00\u65b9\u5411\u4f20\u9001\u4fe1\u606f\u7684\u5a92\u4f53</p> <ul> <li>\u4fe1\u9053\u548c\u7535\u8def\u7684\u6982\u5ff5\u4e0d\u76f8\u540c\uff0c\u7535\u8def\u5f80\u5f80\u5305\u542b\u4e86\u53d1\u9001\u4fe1\u9053\u548c\u63a5\u53d7\u4fe1\u9053\u5404\u4e00\u6761</li> <li>\u4fe1\u9053\u7684\u901a\u4fe1\u65b9\u5f0f\u4e5f\u5206\u4e3a\u5355\u5411\u901a\u4fe1\u3001\u53cc\u5411\u4ea4\u66ff\u901a\u4fe1\u548c\u53cc\u5411\u540c\u65f6\u901a\u4fe1</li> </ul> </li> <li> <p>\u57fa\u5e26\u4f20\u8f93 Baseband Transmission \u4fe1\u53f7\u5206\u4e3a0\u548c1\uff0c\u5206\u4e3a\u82e5\u5e72\u79cd\u4f20\u8f93\u65b9\u5f0f\uff1a</p> </li> <li> <p>Non-return to zero \u7528\u9ad8\u9891\u4ee3\u88681\uff0c\u4f4e\u9891\u4fe1\u53f7\u4ee3\u88680</p> <ul> <li>\u5b58\u5728\u65f6\u949f\u6062\u590d\u95ee\u9898\uff0c\u5e94\u8be5\u4ece\u4e2d\u95f4\u5904\u91c7\u6837</li> </ul> </li> <li>NRZ Invert        &gt; \u5728\u53d1\u751f10\u5207\u6362\u7684\u65f6\u5019\u4fe1\u53f7\u7a81\u53d8\uff0c\u9ad8\u4f4e\u7535\u5e73\u8fdb\u884c\u5207\u6362<ul> <li>\u88abUSB\u4f7f\u7528</li> </ul> </li> <li>Manchester \u66fc\u5207\u65af\u7279\u7f16\u7801\uff1a       &gt; 0\u7684\u65f6\u5019\u4fe1\u53f7\u5728\u65f6\u949f\u8fb9\u6cbf\u7531\u9ad8\u53d8\u4f4e\uff0c1\u7684\u65f6\u5019\u4fe1\u53f7\u5728\u65f6\u949f\u8fb9\u6cbf\u7531\u4f4e\u53d8\u9ad8<ul> <li>\u88abEthernet \u4ee5\u592a\u7f51\u4f7f\u7528</li> </ul> </li> </ul> <p>   - \u4e8c\u7ea7\u7f16\u7801\uff1aAMI   - 4B/5B\u7f16\u7801\uff1a\u6bcf\u56db\u4f4d\u4e00\u7ec4\uff0c\u6309\u7167\u89c4\u5219\u6269\u5c55\u621032\u4f4d\uff0c\u5171\u670932\u79cd\u7ec4\u5408\uff0c\u5176\u4f59\u768416\u79cd\u4f5c\u4e3a\u63a7\u5236\u7801</p> <ul> <li> <p>\u5bbd\u5e26\u4f20\u8f93\u548c\u57fa\u5e26\u4f20\u8f93\u7684\u533a\u522b\uff1a</p> <ul> <li>\u5bbd\u5e26\u4f20\u8f93\u662f\u628a\u57fa\u5e26\u4fe1\u53f7\u8c03\u5236\u4e4b\u540e\u5f62\u6210\u9891\u5206\u590d\u7528\u6a21\u62df\u4fe1\u53f7\uff0c\u5728\u6a21\u62df\u4fe1\u9053\u4e0a\u4f20\u8f93</li> <li>\u8c03\u5236\u662f\u5c06\u6570\u5b5701\u8f6c\u6362\u4e3a\u4fe1\u53f7\u7684\u8fc7\u7a0b</li> </ul> </li> <li> <p>\u901a\u5e26\u4f20\u8f93 Passband Transmission</p> <ul> <li>\u8c03\u5236\u7684\u4e09\u79cd\u4e3b\u8981\u65b9\u6cd5\uff1a<ul> <li>\u8c03\u5e45(ASK) Amplitude shift keying</li> <li>\u8c03\u9891(FSK) Frequency shift keying</li> <li>\u8c03\u76f8(PSK) Phase shift keying</li> </ul> </li> </ul> <p>QPSK</p> <p>\u4f7f\u7528\u76f8\u4f4d\u6b63\u4ea4\u7684\u4e24\u4e2a\u8f7d\u6ce2\u8fdb\u884c\u7ebf\u6027\u7ec4\u5408\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u8c03\u5236\u51faI-Q\u5e73\u9762\u4e0a\u7684\u4efb\u610f\u70b9\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f20\u8f93\u66f4\u591a\u7684\u4fe1\u606f</p> <p>\u672c\u8d28\u4e0a\u5c31\u662f\u540c\u65f6\u8c03\u5e45+\u8c03\u76f8</p> <p></p> </li> <li> <p>\u4fe1\u9053\u7684\u6700\u5927\u6570\u636e\u4f20\u8f93\u901f\u7387\uff1a</p> <ul> <li>Nyquist\u5b9a\u7406\uff1a\u5e26\u5bbd\u4e3aW\uff0c\u5219\u4fe1\u53f7\u4f20\u8f93\u901f\u7387\u4e0d\u8d85\u8fc72W<ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u4fe1\u9053\uff0c\u5e76\u4e14\u6ca1\u6709\u566a\u58f0\u7684\u60c5\u51b5\u4e0b\u624d\u9002\u7528</li> <li>W\u7684\u5355\u4f4d\u662f\u8d6b\u5179\uff0c\u8868\u793a\u6bcf\u79d2\u4fe1\u53f7\u53d8\u5316\u6b21\u6570</li> </ul> </li> <li>Bilevel \u7f16\u7801\uff1a\u6570\u636e\u4f20\u8f93\u901f\u7387 = 2\u500d\u7684\u5e26\u5bbd\uff0c\u5355\u4f4d\u662fbps</li> <li>\u591a\u8fdb\u5236\u7f16\u7801\uff1a\u6570\u636e\u4f20\u8f93\u901f\u5ea6 =  \\(2W\\log_2M\\) \u5176\u4e2dM\u662f\u8fdb\u5236\uff0c\u7ed3\u679c\u7684\u5355\u4f4d\u662fbps<ul> <li>\u6ca1\u6709\u7406\u8bba\u503c\u7684\u4e0a\u9650\uff0c\u4f46\u662f\u4f1a\u4ea7\u751f\u635f\u5931</li> </ul> </li> </ul> </li> <li> <p>\u9999\u519c\u5b9a\u7406 Shannon's Theorem</p> <ul> <li>\u5e26\u5bbd\u662fH(HZ)\uff0c\u4fe1\u566a\u6bd4\u662fS/N\uff0c\u4fe1\u566a\u6bd4\u7684\u8ba1\u91cf\u5355\u4f4d\u662fdB</li> <li>\u6700\u5927\u7684\u6570\u636e\u4f20\u8f93\u901f\u7387\u662f\uff1a\\(H\\log _2(1+\\frac SN)\\) <ul> <li>\u4e5f\u5c31\u662f\u8bf4\u4fe1\u566a\u6bd4\u8d8a\u5927\uff0c\u6700\u5927\u7684\u53ef\u80fd\u4f20\u8f93\u901f\u7387\u5c31\u8d8a\u9ad8</li> </ul> </li> <li>\u4fe1\u566a\u6bd4\u7684\u8ba1\u7b97\u516c\u5f0f\uff1a\\(\u4fe1\u566a\u6bd4=10\\log_{10}(\\frac SN)\\) </li> </ul> </li> </ul>"},{"location":"Network/Network2/#23-pstn","title":"2.3 \u516c\u5171\u7535\u8bdd\u7cfb\u7edf PSTN","text":"<ul> <li>PSTN\u7528\u4e8e\u4f20\u8f93\u4eba\u58f0\uff0c\u4f46\u662f\u66f4\u52a0\u96be\u4ee5\u8fa8\u522b\uff0c\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a</li> </ul> <p>   - \u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff1a     - \u672c\u5730\u56de\u8def\uff1a\u4f20\u8f93\u6a21\u62df\u4fe1\u53f7\u7684\u53cc\u7ede\u7ebf     - \u5e72\u7ebf Trunk\uff1a\u6570\u5b57\u5149\u7f06\uff0c\u8fde\u63a5\u4e86\u5404\u4e2a\u4ea4\u6362\u5c40     - \u4ea4\u6362\u5c40 Switching office\uff1a\u8fdb\u884c\u901a\u8bdd\u7684\u4ea4\u6362\uff0c\u4ece\u624b\u52a8\u5207\u6362\u53d8\u6210\u4e86\u8ba1\u7b97\u673a\u5207\u6362   - \u6a21\u62df\u4fe1\u53f7\u5728end office\u901a\u8fc7\u8bbe\u5907\u4f7f\u7528codec\u8fdb\u884c\u6570\u5b57\u5316     - \u6bcf\u79d2\u91c7\u68378000\u6b21\uff0c\u6bcf\u6b21\u91c7\u6837\u91cf\u5316\u62108bit\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u8fd9\u9879\u6280\u672f\u53eb\u505aPCM\u8109\u51b2\u7f16\u7801\u8c03\u5236     - T1\u4fe1\u9053\u670924\u4e2aPCM\u4fe1\u53f7\uff0c\u6570\u636e\u4f20\u8f93\u901f\u7387\u662f1.544Mbps      - E1\u4fe1\u9053\u670932\u4e2aPCM\u4fe1\u53f7\uff0c\u6570\u636e\u4f20\u8f93\u901f\u7387\u662f2.048Mbps </p> <p>   - \u4fe1\u9053\u7684\u5f00\u9500cost\uff1a     - T1\u4fe1\u9053\u6bcf\u4e00\u5e27\u4f20\u8f93\u7684193bit\u4e2d\uff0c\u67097*24=168bit\u662f\u6709\u6548\u4fe1\u606f\uff0c\u670925bit\u662f\u5f00\u9500\uff0c\u56e0\u6b64\u5f00\u9500\u7387\u662f25/193=13%     - E1\u4fe1\u9053\u768432\u4e2a\u4fe1\u9053\u4e2d30\u4e2a\u4f20\u8f93\u6570\u636e\uff0c2\u4e2a\u4f20\u8f93\u4fe1\u53f7\uff0c\u56e0\u6b64\u5f00\u9500\u662f2/32=6.25%</p>"},{"location":"Network/Network2/#24","title":"2.4 \u4fe1\u9053\u590d\u7528","text":""},{"location":"Network/Network2/#241-fdm-frequency-division-multiplexing","title":"2.4.1 \u9891\u5206\u590d\u7528(FDM, Frequency Division Multiplexing)","text":"<ul> <li>\u5229\u7528\u901a\u5e26\u4f20\u8f93\u7684\u4f18\u52bf\u4f7f\u5f97\u591a\u4e2a\u7528\u6237\u5171\u4eab\u4fe1\u9053\uff0c\u6bcf\u4e2a\u7528\u6237\u62e5\u6709\u4e00\u4e2a\u81ea\u5df1\u7684\u9891\u6bb5\u6765\u53d1\u5c04\u81ea\u5df1\u7684\u4fe1\u53f7</li> </ul> <p>   - OFDM \u6b63\u4ea4\u5206\u9891\u590d\u7528</p>"},{"location":"Network/Network2/#252-tdm","title":"2.5.2 \u65f6\u5206\u590d\u7528 TDM","text":"<ul> <li> <p>\u6bcf\u4e2a\u7528\u6237\u5468\u671f\u6027\u5730\u83b7\u53d6\u6574\u4e2a\u5e26\u5bbd\u975e\u5e38\u77ed\u7684\u4e00\u4e2a\u65f6\u95f4\u6bb5\uff0c\u6bcf\u4e2a\u8f93\u5165\u6d41\u4e2d\u7684bit\u4ece\u4e00\u4e2a\u56fa\u5b9a\u7684\u65f6\u95f4\u69fd\u4e2d\u53d6\u51fa\uff0c\u5e76\u8f93\u51fa\u5230\u6df7\u5408\u6d41\u4e2d</p> </li> <li> <p>TDM\u88ab\u5e7f\u6cdb\u5e94\u7528\u5728\u7535\u8bdd\u7f51\u7edc\u548c\u8702\u7a9d\u7f51\u7edc\u4e2d</p> </li> </ul> <p></p>"},{"location":"Network/Network2/#253-cdm","title":"2.5.3 \u7801\u5206\u590d\u7528 CDM","text":"<ul> <li>\u7801\u5206\u591a\u5740 CDMA\uff1a\u5728CDMA\u4e2d\uff0c\u6bcf\u4e2abit\u65f6\u95f4\u88ab\u5206\u4e3am\u4e2a\u66f4\u77ed\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u79f0\u4e3a\u7801\u7247chip</li> <li>\u5982\u679c\u8981\u4f20\u8f93\u4e00\u4e2a1\u5c31\u53d1\u9001\u5206\u914d\u7684\u7801\u7247\u5e8f\u5217\uff0c\u5982\u679c\u8981\u4f20\u8f930\u5c31\u53d1\u9001\u7801\u7247\u5e8f\u5217\u7684\u53cd\u7801</li> <li>\u53d1\u9001\u7ad9\u7684\u4efb\u610f\u4e24\u4e2achip\u90fd\u6b63\u4ea4\uff0c\u4e5f\u5c31\u662f\u5f52\u4e00\u5316\u7684\u5185\u79ef\u4e3a0</li> </ul>"},{"location":"Network/Network2/#26","title":"2.6 \u4e60\u9898","text":"<ul> <li>If a binary signal is sent over a 15-kHz channel whose signal-to-noise ratio is 15 dB, what is the maximum achievable data rate?</li> <li>\u9996\u5148\u9700\u8981\u6839\u636e\u4fe1\u566a\u6bd4\u7684\u5206\u8d1d\u6570\u7b97\u51faS/N\uff0c\u518d\u7b97\u51fa\u9999\u519c\u5b9a\u7406\u4e0b\u7684\u6700\u5927\u4f20\u8f93\u901f\u7387\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u53e6\u4e00\u79cd\u7b97\u6cd5\u4e0b\u7684\u6700\u5927\u4f20\u8f93\u901f\u7387\u662f30\uff0c\u56e0\u6b64\u53d6\u6bd4\u8f83\u5c0f\u7684\u5e94\u8be5\u662f30</li> <li>14 signals, each requiring 5000 Hz, are multiplexed on to a single channel using FDM. How much minimum bandwidth is required for the multiplexed channel? Assume that the guard bands are 200 Hz wide.</li> <li>n\u4e2a\u4fe1\u53f7\uff0c\u6bcf\u4e2a\u6240\u9700\u8981\u7684\u5bbd\u5ea6\u662fx\uff0cguard band\u662fy\uff0c\u5219\u4e00\u5171\u9700\u8981\u7684\u5e26\u5bbd\u662fnx+(n-1)y HZ</li> <li>A simple telephone system consists of two end offices and a single toll office to which each end office is connected by a 1-MHz full-duplex trunk. The average telephone is used to make four calls per 8-hour workday. The mean call duration is 6 min. Ten percent of the calls are long-distance (i.e., pass through the toll office). What is the maximum number of telephones an end office can support? (Assume 4 kHz per circuit.)</li> <li>\u6bcf\u5929\u5de5\u4f5c8\u5c0f\u65f6\uff0c\u5e73\u5747\u4e00\u53f0\u7535\u8bdd\u673a\u8981\u62534\u4e2a\u7535\u8bdd\uff0c\u6bcf\u4e2a\u7535\u8bdd6min\uff0c\u4e00\u5171\u662f24min\u6240\u4ee5\u6bcf\u5c0f\u65f6\u53ea\u9700\u89813min\uff0c\u56e0\u6b64\u53ef\u4ee5\u4e00\u6b21\u652f\u630120\u53f0\u8fdc\u7a0b\u901a\u8bdd\uff0c\u53c8\u56e0\u4e3a\u53ea\u670910%\u662f\u8fdc\u7a0b\u901a\u8bdd\uff0c\u6240\u4ee5\u4e00\u4e2a\u4fe1\u9053\u53ef\u4ee5\u652f\u6301200\u53f0</li> <li>1MHZ\u7684\u5e72\u7ebf\uff0c\u6bcf\u4e2a\u4fe1\u9053\u7684\u5e26\u5bbd\u662f4KHZ\uff0c\u4e00\u5171\u6709250\u4e2a\uff0c\u56e0\u6b64\u7b54\u6848\u662f50000\u4e2a</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc3 \u6570\u636e\u94fe\u8def\u5c42&MAC","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#chapter3-data-link-layer","title":"Chapter3. Data link layer","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#31","title":"3.1 \u57fa\u672c\u6982\u5ff5","text":"<ul> <li> <p>\u6570\u636e\u94fe\u8def\u5c42\uff1a\u6784\u5efa\u6570\u636e\u94fe\u8def\u548c\u903b\u8f91\u94fe\u8def\uff0c\u533a\u522b\u4e8e\u7269\u7406\u5c42\uff0c\u7269\u7406\u5c42\u6784\u5efa\u7684\u662f\u7269\u7406\u94fe\u8def</p> </li> <li> <p>\u7269\u7406\u5c42\u548c\u6570\u636e\u94fe\u8def\u5c42\u7684\u672c\u8d28\u4f5c\u7528\u90fd\u662f\u7528\u6765\u6784\u5efa\u7f51\u7edc\u901a\u4fe1\u3001\u8bbf\u95ee\u901a\u9053</p> </li> <li>\u7269\u7406\u94fe\u8def\u662f\u771f\u5b9e\u5b58\u5728\u7684\u7269\u7406\u7ebf\u8def\u548c\u8bbe\u5907\uff0c\u6570\u636e\u94fe\u8def\u5c42\u662f\u4e00\u4e9b\u5fc5\u8981\u7684\u786c\u4ef6(\u6bd4\u5982\u7f51\u7edc\u9002\u914d\u5668)\u548c\u8f6f\u4ef6(\u4f20\u8f93\u534f\u8bae)\u7ec4\u6210\u7684</li> <li>\u6570\u636e\u94fe\u8def\u5c42\u5411\u4e0a\u63d0\u4f9b\u7f51\u7edc\u5c42\u7684\u670d\u52a1\uff0c\u5904\u7406\u4f20\u8f93\u7684\u9519\u8bef(\u56e0\u4e3a\u7269\u7406\u5c42\u4e0d\u80fd\u53d1\u73b0\u4f20\u8f93\u9519\u8bef)\uff0c\u8c03\u8282\u6570\u636e\u6d41\uff0c\u786e\u4fdd\u63a5\u6536\u65b9\u4e0d\u4f1a\u88ab\u6df9\u6ca1</li> <li>\u63d0\u4f9b\u7684\u4e00\u4e9b\u670d\u52a1\uff1a<ul> <li>\u65e0\u786e\u8ba4\uff0c\u65e0\u8fde\u63a5\u7684\u670d\u52a1\uff1a\u5bf9\u4e22\u5931\u7684\u5e27\u4e0d\u8d1f\u8d23\u91cd\u53d1\u800c\u662f\u4ea4\u7ed9\u4e0a\u4e00\u5c42\u5904\u7406\uff0c\u9002\u7528\u4e8e\u5b9e\u65f6\u901a\u4fe1\u6216\u8005\u8bef\u7801\u7387\u4f4e\u7684\u4fe1\u9053\uff0c\u6bd4\u5982\u4ee5\u592a\u7f51</li> <li>\u6709\u786e\u8ba4\u7684\uff0c\u65e0\u8fde\u63a5\u7684\u670d\u52a1\uff0c\u6bd4\u5982\u65e0\u7ebf\u901a\u4fe1</li> <li>\u6709\u786e\u8ba4\u7684\uff0c\u9762\u5411\u8fde\u63a5\u7684\u670d\u52a1\uff1a\u5e27\u7684\u4f20\u8f93\u9700\u8981\u5efa\u7acb\u6570\u636e\u94fe\u8def\u3001\u4f20\u8f93\u5e27\u3001\u91ca\u653e\u6570\u636e\u94fe\u8def\uff0c\u9002\u7528\u4e8e\u957f\u8ddd\u79bb\u7684\u4e0d\u53ef\u9760\u94fe\u8def</li> <li>\u63d0\u4f9b\u201c\u865a\u62df\u7684\u4ea4\u6d41\u201d\uff1a\u5b9e\u9645\u4e0a\u5c31\u662f\u901a\u8fc7\u534f\u8bae\u548c\u67e5\u9519\uff0c\u907f\u514d\u9700\u8981\u901a\u8fc7\u7269\u7406\u5c42\u7684\u901a\u4fe1\u4ea7\u751f\u7684\u5dee\u9519\uff0c\u5c31\u597d\u50cf\u7ed5\u8fc7\u4e86\u7269\u7406\u5c42\u4e00\u6837</li> </ul> </li> </ul> <p> - Frame\u548cFraming \u5e27\uff1a\u662f\u6570\u636e\u94fe\u8def\u5c42\u53d1\u9001\u6570\u636e\u7684\u5355\u4f4d </p> <ul> <li>Packet\u548cFrame\u7684\u5173\u7cfb</li> </ul> <p>   - \u5177\u6709\u4e00\u5b9a\u7684\u7279\u6b8a\u683c\u5f0f\uff1a</p> <pre><code>- character count \u4e0d\u5e38\u7528\u7684\u65b9\u6cd5\uff0c\u5f88\u5bb9\u6613\u51fa\u9519\uff0c\u4e00\u4e2a\u9519\u4e86\u540e\u9762\u7684\u5c31\u90fd\u9519\u4e86\n\n- \u5b57\u8282\u586b\u5145\u6cd5\uff1a\u5f00\u59cb\u548c\u7ed3\u675f\u4f7f\u7528\u7279\u5b9a\u7684\u5b57\u7b26\uff0c\u7528STX\u548cETX\u5206\u522b\u8868\u793a\u5e27\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff0cDLE\u53ef\u4ee5\u7528\u6765\u8868\u793a\u8f6c\u4e49\u5b57\u7b26\n\n  - DLE+STX\u8868\u793a\u9700\u8981\u628aSTX\u8fdb\u884c\u8f6c\u4e49\uff0c\u4e0d\u4ee3\u8868\u5e27\u5f00\u59cb\u7684\u7b26\u53f7\uff0cDLE+DLE\u8868\u793a\u628a\u7b2c\u4e8c\u4e2aDLE\u8fdb\u884c\u8f6c\u4e49\n\n- \u6bd4\u7279\u586b\u5145\u6cd5\uff1a\u901a\u8fc7\u5728\u5e27\u5934\u548c\u5e27\u5c3e\u5404\u63d2\u5165\u4e00\u4e2a\u7279\u5b9a\u7684\u6bd4\u7279\u4e32\uff08\u5982 01111110) \u6765\u6807\u8bc6-\u4e00\u4e2a\u6570\u636e\u5e27\u7684\u8d77\u59cb\u4e0e\u7ed3\u675f\n\n  - \u4e3a\u4e86\u4fdd\u8bc1\u4f20\u8f93\u7684\u5185\u5bb9\u4e0d\u88ab\u9519\u8bef\u89e3\u6790\uff0c\u53ef\u4ee5\u5728\u4f20\u8f93\u7684\u6570\u636e\u4e2d\u6bcf\u51fa\u73b0\u8fde\u7eed\u76845\u4e2a1\u5c31\u5728\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a0\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u51fa\u73b0\u8fde\u7eed\u76846\u4e2a1\uff0c\u5c31\u7b97\u540e\u9762\u67090\u4e5f\u8981\u52a0\u4e00\u4e2a0\n</code></pre> <p></p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#32","title":"3.2 \u6570\u636e\u94fe\u8def\u5c42\u7684\u9519\u8bef\u68c0\u6d4b","text":"<ul> <li> <p>\u9519\u8bef\u63a7\u5236\u7684\u65b9\u5f0f</p> </li> <li> <p><code>error correcting</code> \u7ea0\u9519\u529f\u80fd</p> </li> <li> <p><code>error detecting with retransmission</code> \u9519\u8bef\u68c0\u6d4b\u548c\u91cd\u53d1</p> </li> <li> </li> <li> <p>\u5047\u8bbe\u4e00\u5e27\u7531 \\(m\\) \u4e2a\u6570\u636e\u4f4d\u548c \\(r\\) \u4e2a\u5197\u4f59\u4f4d\u7ec4\u6210\uff0c\u8bb0 \\(n=m+r\\)\uff0c \u5e76\u5c06\u8be5\u7f16\u7801\u63cf\u8ff0\u6210\\((m,n)\\)\u7801</p> </li> <li> <p>\u6d77\u660e\u7801\uff1a\u8bbe\u7f6e\u4e00\u7cfb\u5217\u6821\u9a8c\u7801\u548c\u6821\u9a8c\u4f4d</p> <ul> <li>\u6d77\u660e\u8ddd\u79bb\uff1a\u4e24\u4e2a\u7801\u5b57(codeword)\u4e2d\u4e0d\u540c\u7684\u4f4d\u7684\u4e2a\u6570\uff0c\u5982\u679c\u4e24\u4e2a\u7801\u5b57\u7684\u6d77\u660e\u8ddd\u79bb\u4e3a \\(d\\) \uff0c\u5219\u9700\u8981 \\(d\\) \u4e2a1\u4f4d\u9519\u8bef\u624d\u80fd\u628a\u4e00\u4e2a\u7801\u5b57\u8f6c\u6362\u6210\u53e6\u4e00\u4e2a\u7801\u5b57</li> <li>\u4e5f\u5c31\u662f\u4e00\u4e2a\u7801\u5b57\u4e2d\u6700\u591a\u53ef\u80fd\u9519\u8bef\u7684\u4f4d\u6570</li> <li>\u7ea0\u9519\u80fd\u529b\uff1a</li> <li>\u4e3a\u4e86\u68c0\u6d4bd\u4e2a\u9519\u8bef\uff0c\u5c31\u9700\u8981d+1\u7684\u6d77\u660e\u8ddd\u79bb\u7684\u7f16\u7801\u65b9\u6848\uff0c\u5176\u5b9e\u4e5f\u5c31\u662f\u8bf4\u6d77\u660e\u8ddd\u79bb\u4e3an\u7684\u7f16\u7801\u65b9\u6848\u53ea\u80fd\u68c0\u6d4b\u51fan-1\u4e2a\u9519\u8bef</li> <li>\u4e3a\u4e86\u7ea0\u6b63d\u4e2a\u9519\u8bef\uff0c\u9700\u89812d+1\u7684\u6d77\u660e\u7f16\u7801\u65b9\u6848</li> <li>\u5bf9\u4e8e\u6bcf\\(2^m\\)\u4e2a\u5408\u6cd5\u6d88\u606f\uff0c\u4efb\u4f55\u4e00\u4e2a\u6d88\u606f\u90fd\u6709n\u4e2a\u975e\u6cd5\u7801\u5b57\uff0c\u5373\u6d77\u660e\u8ddd\u79bb\u4e3a1\u7684\u975e\u6cd5\u7801\u5b57\u6709n\u4e2a\uff0c\u56e0\u6b64\u6bcf\u4e2a\u5408\u6cd5\u6d88\u606f\u90fd\u9700\u8981\u7528n+1\u4f4d\u6765\u6807\u8bc6\uff0c\u7531\u4e8e\u603b\u5171\u6709\\(2^n\\)\u79cd\u4f4d\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\\((n+1)\\le 2^r\\) </li> <li>\u75282\u7684\u5e42\u6b21\u7684\u4f4d\u7f6e\u4f5c\u4e3a\u6821\u9a8c\u7801\uff0c\u5176\u4ed6\u4f4d\u7f6e\u4f9d\u6b21\u653e\u6570\u636e</li> <li>\u6d77\u660e\u7801\u7684\u6d77\u660e\u8ddd\u79bb\u4e3a3\uff0c\u53ef\u4ee5\u53d1\u73b02bit\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u7ea0\u6b631bit\u7684\u9519\u8bef\uff0c\u5c06\u7801\u5b57\u5185\u7684\u4f4d\u7f16\u53f7\u4e3a1\u5230n\uff0c\u5176\u4e2d\u662f2\u7684\u5e42\u6b21\u7684\u4f4d\u5c31\u662f\u6821\u9a8c\u7801\uff0c\u5176\u4f59\u7684\u90fd\u662f\u6570\u636e\u7801</li> </ul> </li> <li> <p>\u5faa\u73af\u5197\u4f59\u6821\u9a8c Cyclic Redundancy Check </p> </li> <li> <p>\u57fa\u672c\u601d\u8def\uff1a\u5e76\u5728\u6570\u636e\u5e27\u7684\u672b\u5c3e\u6dfb\u52a0\u82e5\u5e72\u4f4d\u4f5c\u4e3a\u6821\u9a8c\u7801\uff0c\u8981\u4f7f\u6240\u751f\u6210\u7684\u65b0\u5e27\u80fd\u4e0e\u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\u5171\u540c\u9009\u5b9a\u7684\u67d0\u4e2a\u7279\u5b9a\u6570\u6574\u9664 </p> <ul> <li> <p>\u7ea6\u5b9a\u4e00\u4e2a\u751f\u6210\u591a\u9879\u5f0f\\(G(x)\\) \u9700\u8981\u9996\u4f4d\u548c\u672b\u5c3e\u7684\u7cfb\u6570\u90fd\u662f1</p> </li> <li> <p>\u6240\u9009\u5b9a\u7684\u9664\u6570\u4e8c\u8fdb\u5236\u4f4d\u6570\uff08\u5047\u8bbe\u4e3a k \u4f4d\uff09\uff0c\u7136\u540e\u5728\u8981\u53d1\u9001\u7684\u6570\u636e\u5e27\uff08\u5047\u8bbe\u4e3a m \u4f4d\uff09\u540e\u9762\u52a0\u4e0a k- 1 \u4f4d0\uff0c\u63a5\u7740\u4ee5\u8fd9\u4e2a\u52a0\u4e86 k-1 \u4e2a0\u7684\u65b0\u5e27\uff08\u4e00\u5171\u662f m+k-1 \u4f4d\uff09\u9664\u4ee5\u4e0a\u9762\u8fd9\u4e2a\u9664\u6570</p> </li> <li> <p>\u6240\u5f97\u5230\u7684\u4f59\u6570\uff08\u4e5f\u662f\u4e8c\u8fdb\u5236\u7684\u6bd4\u7279\u4e32\uff09\u5c31\u662f\u8be5\u5e27\u7684 CRC \u6821\u9a8c\u7801\uff0c\u53c8\u79f0 FCS\uff08\u5e27\u6821\u9a8c\u5e8f\u5217\uff09</p> <ul> <li>\u4f46\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f59\u6570\u7684\u4f4d\u6570\u6bd4\u9664\u6570\u4f4d\u6570\u53ea\u80fd\u5c11\u4e00\u4f4d\uff0c\u4e0d\u80fd\u7701\u75650</li> </ul> </li> <li>\u8fd8\u8981\u6ce8\u610f\u8fd9\u91cc\u7684\u9664\u6cd5\u662f\u7279\u6b8a\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u9664\u6cd5\u4e2d\u7528\u5230\u7684\u51cf\u6cd5\u662f\u5f02\u6216XOR\uff0c\u4e5f\u5c31\u662f\u4e0d\u4f1a\u501f\u4f4d</li> </ul> </li> </ul> <p>        - \u518d\u628a\u8fd9\u4e2a\u4f59\u6570\u9644\u52a0\u5728\u539f\u6570\u636e\u5e27\u7684\u672b\u5c3e(\u8986\u76d6\u4e4b\u524d\u76840)\uff0c\u6784\u5efa\u4e00\u4e2a\u65b0\u7684\u5e27\u53d1\u9001\u5230\u63a5\u6536\u7aef       - \u5728\u63a5\u6536\u7aef\u9664\u4ee5\u7b2c\u4e8c\u6b65\u4e2d\u7684\u9664\u6570\uff0c\u5982\u679c\u6ca1\u6709\u4f59\u6570\u5c31\u8bf4\u660e\u6ca1\u6709\u5dee\u9519</p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#error-correcting-code","title":"\u7ea0\u9519\u7801 Error correcting code","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#33","title":"3.3 \u6570\u636e\u94fe\u8def\u5c42\u7684\u534f\u8bae","text":"<ul> <li> <p>\u505c\u6b62-\u7b49\u5f85\u534f\u8bae <code>Stop-and-Wait Protocol</code></p> </li> <li> <p>\u6700\u7b80\u5355\u7684\u901a\u4fe1\u534f\u8bae</p> </li> </ul> <p>   - \u57fa\u672c\u601d\u8def\uff1a\u6bcf\u6b21\u53d1\u9001\u5b8c\u6bd5\uff0c\u505c\u6b62\uff0c\u7b49\u5230\u63a5\u6536\u65b9\u6536\u5230\u8868\u793a\u53d1\u9001\u6210\u529f\u7684\u6570\u636e\u5305(ACK)\u4e4b\u540e\u518d\u8fdb\u884c\u4e0b\u4e00\u6b21\u7684\u53d1\u9001     - \u5982\u679c\u6536\u5230\u4e86NAK\u5305\uff0c\u8868\u793a\u4e0d\u786e\u8ba4\uff0c\u6b64\u65f6\u9700\u8981\u53d1\u9001\u65b9\u91cd\u65b0\u53d1\u9001\u4e00\u6b21\u6570\u636e\u5305     - \u5982\u679c\u4ea7\u751f\u4e86\u6570\u636e\u4e22\u5931\uff0c\u5c31\u4f1aTime Out\uff0c\u5373\u53d1\u9001\u65b9\u8fdf\u8fdf\u7b49\u4e0d\u5230\u63a5\u6536\u65b9\u7684\u56de\u590d\uff0c\u5c31\u4f1a\u5c1d\u8bd5\u4e3b\u52a8\u91cd\u53d1      - \u5982\u679c\u4ea7\u751f\u4e86ACK\u4e22\u5931\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u53d1\u9001\u65b9\u91cd\u53d1\uff0c\u8fd9\u65f6\u5c31\u4f1a\u4e22\u5f03\u6536\u5230\u7684\u6570\u636e\uff0c\u5e76\u518d\u53d1\u9001\u4e00\u4e2aACK\u63d0\u9192\u53d1\u9001\u65b9\u5df2\u7ecf\u6536\u5230   - \u5bf9\u53d1\u9001\u7684\u6570\u636e\u5305\u7684\u6807\u8bb0\u65b9\u5f0f\u53ef\u4ee5\u53ea\u75281\u4e2abit\u6765\u6807\u8bb0\uff0c01\u4ea4\u66ff\u8868\u793a\u6362\u4e86\u4e2a\u65b0\u7684\u6570\u636e\u5305   - \u6548\u7387\u7684\u8861\u91cf     - \\(T_{frame}\\) \u8868\u793a\u53d1\u9001\u65b9\u53d1\u51fa\u53bb\u5b8c\u6574\u7684\u4e00\u4e2a\u5e27\u9700\u8981\u7684\u65f6\u95f4\uff0c\\(T_{prop}\\) \u8868\u793a\u4f20\u8f93\u5230\u63a5\u6536\u65b9\u9700\u8981\u7684\u65f6\u95f4       - \\(T_{prop}=\\frac{distance}{\\mathcal {speed}}\\) \u800c\u4e14 \\(T_{frame}=\\frac{frame\\_size}{bit\\_rate}\\)        - \u4ee4\\(\\alpha = \\frac{T_{prop}}{T_{frame}}\\) \u5219\u94fe\u8def\u5229\u7528\u7387 \\(U=\\frac 1 {2\\alpha +1}\\)    - \u505c\u6b62\u7b49\u5f85\u534f\u8bae\u7684\u7f16\u7a0b\u5b9e\u73b0\u2014\u2014\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784</p> <pre><code>#define MAX_PKT 1024\ntypedef unsigned int seq_nr;\ntypedef struct packet {\n    unsigned char data[MAX_PKT];\n};\ntypedef enum {data, ack, nak} frame_kind;\ntypedef struct {\n    frame_kind kind;\n    seq_nr seq, ack;\n    packet info;\n} frame;\n</code></pre> <ul> <li> <p>\u6ed1\u52a8\u7a97\u53e3\u534f\u8bae <code>Sliding Window Protocols</code></p> </li> <li> <p>\u7a97\u53e3\u5c31\u662f\u4e00\u7cfb\u5217\u7528\u4e8e\u6536\u53d1\u6570\u636e\u7684\u5e8f\u5217\u53f7\u7684\u96c6\u5408 </p> <ul> <li> <p>\u53d1\u9001\u65b9\u7ef4\u6301\u4e00\u7ec4\u8fde\u7eed\u7684\u5141\u8bb8\u53d1\u9001\u5e27\u7684\u7a97\u53e3\uff0c\u79f0\u4e3a\u53d1\u9001\u7a97\u53e3</p> </li> <li> <p>\u53d1\u9001\u65b9\u6bcf\u6b21\u6536\u5230\u4e00\u4e2aACK\u5c31\u628a\u7a97\u53e3\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e</p> </li> <li>\u67d0\u4e9b\u534f\u8bae\u4e2d\u7684\u53d1\u9001\u7a97\u53e3</li> </ul> </li> <li> <p>\u63a5\u6536\u65b9\u7ef4\u6301\u4e00\u7ec4\u8fde\u7eed\u7684\u5141\u8bb8\u63a5\u6536\u5e27\u7684\u7a97\u53e3\uff0c\u79f0\u4e3a\u63a5\u6536\u7a97\u53e3</p> <ul> <li>\u63a5\u6536\u7aef\u6536\u5230\u4e00\u4e2a\u6570\u636e\u5e27\u4e4b\u540e\u5c31\u628a\u63a5\u6536\u7a97\u53e3\u79fb\u52a8\u4e00\u683c\uff0c\u5e76\u53d1\u56de\u786e\u8ba4\u5e27ACK\uff0c\u843d\u5728\u63a5\u6536\u7a97\u53e3\u4e4b\u5916\u7684\u6570\u636e\u5e27\u4e00\u5f8b\u4e22\u5f03</li> <li>\u5f53\u53d1\u751f\u9519\u8bef\u65f6\uff0c\u4e22\u5f03\u9519\u8bef\u5e27\u540e\u6240\u6709\u7684\u5e27\uff0c\u4e0d\u53d1\u56de\u786e\u8ba4\uff0c\u8981\u6c42\u53d1\u9001\u65b9\u91cd\u4f20\u5f00\u59cb\u9519\u8bef\u4e4b\u540e\u7684\u5e27</li> </ul> </li> <li> <p>\u6ed1\u52a8\u7a97\u53e3\u534f\u8bae\u7684\u5229\u7528\u7387\\(U=\\min (\\frac{N}{2\\alpha +1}, 1)\\) \u4f46\u662f\u4ec5\u5b58\u7406\u8bba\u53ef\u80fd</p> </li> <li> <p>\u51e0\u79cd\u4e0d\u540c\u7684\u91cd\u65b0\u53d1\u9001\u7684\u534f\u8bae</p> <ul> <li> <p>Go-Back-N </p> </li> <li> <p>\u56de\u9000\u5230\u7b2c\u4e00\u4e2a\u51fa\u95ee\u9898\u7684\u7a97\u53e3\uff0c\u5bf9\u540e\u9762\u7684\u6240\u6709\u5185\u5bb9\u90fd\u8fdb\u884c\u91cd\u65b0\u53d1\u9001\uff0c\u56e0\u6b64\u63a5\u6536\u7aef\u4e5f\u5fc5\u987b\u4e22\u5f03\u6240\u6709\u76f8\u5e94\u7684\u6570\u636e\u5305</p> </li> <li>\u53d1\u9001\u65b9\u7a97\u53e3\u5927\u5c0f\u4e0d\u8d85\u8fc7 <code>MAX_SEQ</code>\uff0c\u5373\u6700\u5927\u7684\u5e8f\u5217\u53f7 </li> <li> <p>\u63a5\u6536\u65b9\u7684\u7a97\u53e3\u5927\u5c0f\u4e3a1</p> </li> <li> <p>\u95ee\u9898\u5728\u4e8e\u7f51\u7edc\u60c5\u51b5\u4e0d\u597d\u7684\u65f6\u5019\u4f1a\u8fdb\u4e00\u6b65\u6076\u5316\u7f51\u7edc\u72b6\u51b5</p> </li> <li> <p>Selective Repeat Protocol \u9009\u62e9\u91cd\u590d\u534f\u8bae</p> </li> </ul> </li> </ul> <p>        - \u5728\u6ed1\u52a8\u7a97\u53e3\u7684\u57fa\u7840\u4e0a\uff0c\u4e0d\u9700\u8981\u53d1\u9001\u4e22\u5931\u4e4b\u540e\u7684\u6240\u6709\u6570\u636e\u5e27\uff0c\u53ea\u9700\u8981\u53d1\u9001\u7f3a\u5c11\u7684\u6570\u636e\u5e27\u5c31\u53ef\u4ee5       - \u4e3a\u4e86\u4fdd\u8bc1\u6ca1\u6709\u5e8f\u53f7\u91cd\u53e0\uff0c\u7a97\u53e3\u7684\u6700\u5927\u5c3a\u5bf8\u4e0d\u5e94\u8be5\u8d85\u8fc7\u5e8f\u53f7\u7a7a\u95f4\u7684\u4e00\u534a\uff0c\u5373(MAX_SEQ+1)/2         - \u63a5\u6536\u65b9\u548c\u53d1\u9001\u65b9\u7684\u7a97\u53e3size\u4e00\u6837\uff0c\u63a5\u6536\u65b9\u7684\u7f13\u51b2\u533a=\u7a97\u53e3\u7684size       - \u76f8\u6bd4\u4e8eGO-Back-N\u9700\u8981\u66f4\u5927\u7684\u7f13\u51b2\u533a</p> <ul> <li> <p>PPP\u534f\u8bae(Point to Point Protocol) </p> </li> <li> <p>\u7528\u4e8e\u5728\u94fe\u8def\u4e2d\u53d1\u9001\u6570\u636e\u5305\u7684\u534f\u8bae\uff0c\u5305\u542b\u5149\u7ea4\u94fe\u8def\u548cADSL</p> </li> <li> <p>\u662f\u4e00\u4e2a\u70b9\u5bf9\u70b9\u7684\u534f\u8bae\uff0c\u9700\u8981\u63d0\u4f9b\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f1a\u52a8\u6001\u5206\u914dIP\u5730\u5740\uff0c\u5177\u6709\u7b80\u5355\u7684\u5dee\u9519\u529f\u80fd\uff0c\u5305\u542b\u4e86\u94fe\u8def\u63a7\u5236\u534f\u8baeLCP\u548c\u7f51\u7edc\u63a7\u5236\u534f\u8baeNCP</p> <ul> <li>\u94fe\u8def\u63a7\u5236\u534f\u8bae\u4f1a\u6fc0\u6d3b\u6570\u636e\u94fe\u8def\uff0c\u5e76\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5f53\u4e0d\u9700\u8981\u7684\u65f6\u5019\u518d\u5173\u95ed</li> </ul> </li> <li> <p>\u6709\u82e5\u5e72\u79cd\u72b6\u6001</p> </li> </ul> <p> </p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#34-hdlc","title":"3.4 HDLC\u5e27\u683c\u5f0f","text":"<ul> <li>\u8d77\u59cb\u548c\u7ed3\u675f\u90fd\u662f8bit\u768401111110+8bit address + 8bit control + \u82e5\u5e72\u4f4ddata + 16\u4f4dchecksum </li> <li>\u4e0d\u540c\u7c7b\u578b\u7684\u5e27\u7684\u63a7\u5236\u4f4d\u6570\u4e0d\u4e00\u6837</li> <li>\u5bf9\u4e8e\u4fe1\u606f\u5e27\u800c\u8a00\uff0c8bit = 1bit 0 + 3bit seq\u5e8f\u53f7 + 1bit P/F + 3bit next\u5e8f\u53f7</li> <li>\u76d1\u7763\u5e27\uff1a10+2bit type + P/F + 3bit next</li> <li>\u65e0\u7b26\u53f7\u5e27\uff1a 11+2bit type + P/F + 3bit modifier</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#chapter4medium-access-sublayer","title":"Chapter4\uff1aMedium Access Sublayer","text":"<ul> <li>\u4e2d\u8bd1\u540d\uff1a\u4ecb\u8d28\u8bbf\u95ee\u63a7\u5236\u5b50\u5c42</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#41","title":"4.1 \u56de\u5fc6","text":"<ul> <li>\u6570\u636e\u94fe\u8def\u7684\u4e24\u79cd\u7c7b\u578b\uff1a</li> <li>P2P\u7684\u8fde\u63a5</li> <li>\u4f7f\u7528\u5e7f\u64ad\u4fe1\u9053\u8fdb\u884c\u8fde\u63a5<ul> <li>\u591a\u8def\u8bbf\u95ee\u4fe1\u9053 Multiaccess Channel</li> <li>\u968f\u673a\u8bbf\u95ee\u4fe1\u9053 Random Access Channel</li> </ul> </li> <li>\u4ecb\u8d28\u8bbf\u95ee\u63a7\u5236\u5b50\u5c42 Medium Access Control(MAC)</li> <li>\u7528\u4e8e\u786e\u5b9a\u591a\u8def\u8bbf\u95ee\u4fe1\u9053\u4e2d\u4e0b\u4e00\u4e2a\u4f7f\u7528\u8005\u7684\u534f\u8bae</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#42","title":"4.2 \u4fe1\u9053\u5206\u914d\u534f\u8bae","text":"<ul> <li>\u4fe1\u9053\u5206\u914d\u7684\u65b9\u5f0f\uff1a</li> <li>\u9759\u6001\u5206\u914d\uff1a\u6bd4\u5982\u7269\u7406\u5c42\u4e2d\u4ecb\u7ecd\u7684\u9891\u5206\u590d\u7528\uff0c\u6ce2\u5206\u590d\u7528\uff0c\u7801\u5206\u590d\u7528\u7b49\u7b49<ul> <li>\u5728\u7528\u6237\u5c11\uff0c\u4fe1\u9053\u5145\u8db3\u7684\u60c5\u51b5\u4e0b\u7b80\u5355\u9ad8\u6548</li> <li>\u5355\u4e2a\u4fe1\u9053\u7684\u5e27\u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4\uff1aK\u662f\u5e27\u7684\u5230\u8fbe\u901f\u7387\uff0c\\(\\frac{1}{\\lambda}\\)\u662f\u5e27\u7684\u957f\u5ea6\uff0cC\u8868\u793a\u4fe1\u9053\u7684\u603b\u6570\uff0c\u5219\\(T=\\frac{1}{\\lambda C-K}\\)\uff0c\u5728\u9891\u5206\u590d\u7528\u7684\u65f6\u5019\u65f6\u95f4\u5ef6\u8fdf\u53d8\u6210NT\uff0c\u5176\u4e2dN\u662f\u5b50\u4fe1\u9053\u7684\u4e2a\u6570</li> </ul> </li> <li>\u52a8\u6001\u4fe1\u9053\u5206\u914d\uff1a\u53c8\u53eb\u591a\u70b9\u63a5\u5165\uff0c\u7279\u70b9\u662f\u4fe1\u9053\u5e76\u975e\u5728\u7528\u6237\u901a\u4fe1\u7684\u65f6\u5019\u56fa\u5b9a\u5206\u914d\u7ed9\u7528\u6237<ul> <li>5\u4e2a\u57fa\u672c\u7684\u5047\u8bbe\uff1a</li> <li>\u6d41\u91cf\u72ec\u7acb\uff1a\u5e27\u7684\u4f20\u8f93\u662f\u72ec\u7acb\u7684\uff0c\u4e00\u65e6\u751f\u6210\u4e86\u4e00\u5e27\uff0c\u8fd9\u4e2a\u7ad9\u5c31\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230\u5e27\u88ab\u6210\u529f\u53d1\u9001\u51fa\u53bb</li> <li>\u5355\u4fe1\u9053\u5047\u8bbe\uff1a\u6240\u6709\u7ad9\u70b9\u4f7f\u7528\u4e00\u4e2a\u4fe1\u9053</li> <li>\u5e27\u7684\u53d1\u9001\u51b2\u7a81\u53ef\u4ee5\u88ab\u89c2\u5bdf\u5230</li> <li>\u53d1\u9001\u7684\u65f6\u95f4\u662f\u8fde\u7eed\u7684\u6216\u8005\u6709\u95f4\u9694\u7684\u53d1\u9001</li> <li>\u8f7d\u4f53\u611f\u77e5\u6216\u8005\u65e0\u8f7d\u4f53\u611f\u77e5\uff1a\u7ad9\u70b9\u5728\u53d1\u9001\u4e4b\u524d\u53ef\u4ee5\u77e5\u9053\u4fe1\u9053\u662f\u5426\u5728\u4f7f\u7528</li> <li>\u591a\u8def\u4f20\u8f93\u534f\u8bae\uff1aALOHA\uff0cCSMA\u7b49\u7b49</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#421","title":"4.2.1 \u7ade\u4e89\u6027\u7684\u534f\u8bae","text":"<ul> <li>ALOHA\u534f\u8bae</li> <li>Pure ALOHA\uff1a\u6709\u9700\u8981\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u53d1\u9001\u5e27\uff0c\u4e0d\u9700\u8981\u5168\u5c40\u65f6\u95f4\u7684\u540c\u6b65<ul> <li>\u534f\u8bae\u7684\u6548\u7387 \\(S=Ge^{-2G}\\) \u5176\u4e2dG\u8868\u793a\u6bcf\u4e2a\u5e27\u53d1\u9001\u6240\u9700\u7684\u65f6\u95f4\u5185new\u548cresend\u7684\u5e27\u7684\u6570\u91cf\uff0c\u4e00\u4e2a\u5e27\u65f6\u95f4\u5185\u5e0c\u671b\u6709G\u5e27\uff0c\u4f46\u662f\u751f\u6210K\u5e27\u7684\u6982\u7387\u670d\u4ece\u6cca\u677e\u5206\u5e03</li> <li>\u534f\u8bae\u6700\u9ad8\u7684\u6548\u7387\u5927\u7ea6\u662f\uff1a18.4%\u2014\u2014\u56e0\u4e3a\u6240\u6709\u7684\u7ad9\u70b9\u90fd\u53ef\u4ee5\u968f\u673a\u53d1\u9001\uff0c\u56e0\u6b64\u51b2\u7a81\u975e\u5e38\u591a</li> </ul> </li> <li>Slotted\u5206\u69fdALOHA\uff1a\u5c06\u65f6\u95f4\u5206\u6210\u79bb\u6563\u7684\u95f4\u9694\uff0c\u7528\u6237\u9075\u5b88\u7edf\u4e00\u7684\u65f6\u95f4\u69fd\u8fb9\u754c\uff0c\u6548\u7387\u662f\\(S=Ge^{-G}\\) </li> <li>CSMA\u534f\u8bae(Carrier Sense Multiple Access Protocol)</li> <li>\u7279\u70b9\uff1a\u5728\u53d1\u9001\u6570\u636e\u4e4b\u524d\u4e00\u76f4\u76d1\u542c\u4fe1\u9053\uff0c\u5982\u679c\u51b2\u7a81\u4e86\u5c31\u7b49\u5f85\u4e00\u6bb5\u968f\u673a\u7684\u65f6\u95f4\u4e4b\u540e\u518d\u8bd5\u4e00\u6b21</li> <li>\u5206\u4e3a\u591a\u79cd\u60c5\u51b5\uff1a<ul> <li>1-persistant CSMA\uff1a</li> <li>\u5148\u76d1\u542c\uff0c\u4e00\u6709\u7a7a\u95f2\u65f6\u95f4\u5c31\u53d1\u9001\uff0c\u5982\u679c\u4fe1\u9053\u7e41\u5fd9\u5c31\u6301\u7eed\u76d1\u542c</li> <li>\u5982\u679c\u53d1\u751f\u51b2\u7a81\u5c31\u7b49\u5f85\u4e00\u6bb5\u968f\u673a\u7684\u65f6\u95f4\uff0c\u5982\u679c\u5e26\u5bbd\u5ef6\u8fdf\u4e58\u79ef\u5927\uff0c\u534f\u8bae\u7684\u6027\u80fd\u5c31\u5dee</li> <li>non-persistant CSMA\uff1a</li> <li>\u5982\u679c\u4fe1\u9053\u6b63\u5728\u4f7f\u7528\u5219\u4e0d\u6301\u7eed\u76d1\u542c\uff0c\u6539\u6210\u968f\u5373\u7b49\u5f85\uff0c\u51b2\u7a81\u5c31\u968f\u5373\u7b49\u4e00\u6bb5\u65f6\u95f4</li> <li>\u4fe1\u9053\u7684\u5229\u7528\u7387\u9ad8\u4f46\u662f\u5ef6\u8fdf\u5927</li> <li>p-persistant CSMA\uff1a</li> <li>\u6301\u7eed\u76d1\u542c\u4fe1\u9053\uff0c\u5982\u679c\u7a7a\u95f2\u5c31\u4ee5\u4e00\u5b9a\u7684\u6982\u7387p\u53d1\u9001\u6570\u636e\uff0c\u5426\u5219\u63a8\u8fdf\u5230\u4e0b\u4e00\u4e2a\u65f6\u95f4\u69fd\uff0c\u5982\u679c\u4fe1\u9053\u7e41\u5fd9\u5c31\u6301\u7eed\u76d1\u542c</li> <li>IEEE 802.11\u4f7f\u7528\u4f18\u5316\u540e\u7684p-CSMA</li> <li>\u6709\u51b2\u7a81\u68c0\u6d4b\u7684CSMA(CSMA/CD)</li> <li>\u5047\u8bbe\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u4f20\u64ad\u6240\u9700\u7684\u6700\u957f\u65f6\u95f4\u662ft\u90a3\u4e48\u53ea\u6709\u4e00\u4e2a\u7ad9\u7684\u4f20\u8f93\u65f6\u95f4\u5927\u4e8e2t\u624d\u80fd\u88ab\u68c0\u6d4b\u5230\u51b2\u7a81</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#422","title":"4.2.2 \u975e\u7ade\u4e89\u548c\u6709\u9650\u7ade\u4e89","text":"<ul> <li>\u65e0\u51b2\u7a81\u534f\u8bae CFP</li> <li>\u57fa\u672c\u4f4d\u56fe\u6cd5\uff1a\u7ade\u4e89\u69fd\u4e2d\u8868\u793a\u54ea\u4e2astation\u9700\u8981\u4f20\u8f93\uff0c\u5047\u8bbe\u6570\u636e\u7684\u4f20\u8f93\u6240\u9700\u7684\u65f6\u95f4\u957f\u5ea6\u4e3ad\uff0c\u6bcf\u4e2a\u7ade\u4e89\u671f\u5305\u542b\u7684\u69fd\u7684\u4e2a\u6570\u662fN<ul> <li>\u5728\u4f4e\u8d1f\u8f7d\u7684\u60c5\u51b5\u4e0b\uff0c\u4f4e\u5e8f\u53f7\u7684\u7ad9\u53d1\u9001\u7684\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u662f1.5N\uff0c\u9ad8\u5e8f\u53f7\u7684\u7ad9\u7684\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u662f0.5N\uff0c\u5bf9\u6240\u6709\u7ad9\u800c\u8a00\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u662fN\uff0c\u5373\u6bcf\u4e00\u5e27\u7684\u989d\u5916\u5f00\u9500\u662fN\u4f4d\uff0c\u56e0\u6b64\u4f4e\u8d1f\u8f7d\u7684\u60c5\u51b5\u4e0b\u4fe1\u9053\u7684\u5229\u7528\u7387\u662f\\(\\frac{d}{N+d}\\) </li> <li>\u5728\u9ad8\u8d1f\u8f7d\u7684\u60c5\u51b5\u4e0b\uff0cN\u4e2a\u7ade\u4e89\u4f4d\u88ab\u5206\u5230\u4e86N\u4e2a\u5e27\u4e0a\u9762\uff0c\u6b64\u65f6\u5229\u7528\u7387\u662f\\(\\frac{d}{1+d}\\) </li> </ul> </li> <li>\u4ee4\u724c\u4f20\u9012 token passing<ul> <li>\u4ee4\u724c\u73af\uff1a\u7528\u4e8e\u5411\u4e0b\u4e00\u4e2a\u7ad9\u70b9\u53d1\u9001\u4ee4\u724c</li> <li>\u4ee4\u724c\u603b\u7ebf\uff1a\u5229\u7528\u603b\u7ebf\u53d1\u9001\u5e27</li> </ul> </li> <li>\u4e8c\u8fdb\u5236\u8ba1\u6570 Binary CountDown<ul> <li>\u9ad8\u5e8f\u7ad9\u7684\u4f18\u5148\u7ea7\u6bd4\u8f83\u9ad8\uff0c\u5229\u7528\u7387\u662f\\(\\frac d {d+\\log_2 N}\\) </li> </ul> </li> <li>\u6709\u9650\u7ade\u4e89\u534f\u8bae\uff1a</li> <li>\u4f4e\u8d1f\u8f7d\u7684\u65f6\u5019\u4f7f\u7528\u7ade\u4e89\u534f\u8bae\u964d\u4f4e\u5ef6\u8fdf\uff0c\u9ad8\u8d1f\u8f7d\u7684\u65f6\u5019\u91c7\u7528\u65e0\u51b2\u7a81\u7684\u65b9\u6cd5\u63d0\u9ad8\u4fe1\u9053\u6548\u7387</li> <li>\u81ea\u9002\u5e94\u6811\u904d\u5386\u534f\u8bae\uff1a\u4e8c\u53c9\u6811\u4e2d\u7684\u8282\u70b9\u8868\u793a\u5404\u4e2a\u7ad9\u70b9\uff0c\u5f53\u8282\u70b9\u51b2\u7a81\u7684\u65f6\u5019\uff0c\u5de6\u5b50\u6811\u4e0b\u9762\u7684\u8282\u70b9\u624d\u6709\u7ade\u4e89\u6743</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#423-wlan","title":"4.2.3 WLAN\u534f\u8bae","text":"<ul> <li> <p>WLAN\u7684\u7279\u70b9</p> </li> <li> <p>\u65e0\u7ebf\u901a\u4fe1\u7cfb\u7edf\u901a\u5e38\u4e0d\u80fd\u68c0\u6d4b\u51fa\u6b63\u5728\u53d1\u751f\u7684\u51b2\u7a81\uff0c\u7ad9\u70b9\u63a5\u6536\u5230\u7684\u4fe1\u53f7\u53ef\u80fd\u975e\u5e38\u5fae\u5f31</p> </li> <li> <p>WLAN\u7684\u7ad9\u70b9\u53ef\u80fd\u65e0\u6cd5\u7ed9\u6240\u6709\u5176\u4ed6\u7684\u7ad9\u53d1\u9001\u5e27\uff0c\u4e5f\u53ef\u80fd\u65e0\u6cd5\u63a5\u53d7\u6765\u81ea\u6240\u6709\u6765\u81ea\u5176\u4ed6\u7ad9\u7684\u5e27</p> </li> <li> <p>\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u4f7f\u7528CSMA\uff1a\u6bcf\u4e2a\u7ad9\u70b9\u76d1\u542c\u662f\u5426\u6709\u5176\u4ed6\u7684\u7ad9\u70b9\u5728\u4f20\u8f93\uff0c\u5e76\u4e14\u53ea\u6709\u5f53\u6ca1\u6709\u5176\u4ed6\u7ad9\u5728\u4f20\u9001\u6570\u636e\u7684\u65f6\u5019\u624d\u8fdb\u884c\u4f20\u8f93\uff0c\u95ee\u9898\u5728\u4e8e\u8fd9\u79cd\u65b9\u6cd5\u6ca1\u6709\u8003\u8651WLAN\u7684\u7279\u6027\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> </li> </ul> <p></p> <ul> <li>\u5f53A\u53d1\u9001\u7ed9B\u7684\u65f6\u5019\uff0cC\u5728\u76d1\u542c\uff0c\u4f46\u662f\u76d1\u542c\u4e0d\u5230A\uff0c\u56e0\u4e3a\u5728\u8ddd\u79bb\u4e4b\u5916\uff0c\u56e0\u6b64\u9519\u8bef\u5730\u8ba4\u4e3aC\u53ef\u4ee5\u5411B\u53d1\u9001\u6570\u636e\uff0c\u56e0\u6b64B\u5904\u5c31\u9020\u6210\u4e86\u6df7\u4e71\uff0c\u6270\u4e71\u4e86A\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u5e27</li> <li>\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4e00\u4e2aMAC\u534f\u8bae\u9632\u6b62\u6b64\u7c7b\u51b2\u7a81\u7684\u53d1\u751f</li> <li> <p>\u51b2\u7a81\u5c06\u5bfc\u81f4\u5bbd\u5e26\u7684\u6d6a\u8d39\uff0c\u7531\u4e8e\u7ade\u4e89\u8005\u79bb\u5f97\u592a\u8fdc\u800c\u5bfc\u81f4\u7ad9\u70b9\u65e0\u6cd5\u68c0\u6d4b\u5230\u6f5c\u5728\u7684\u7ade\u4e89\u8005\uff0c\u8fd9\u4e2a\u95ee\u9898\u88ab\u79f0\u4e3a\u9690\u85cf\u7ec8\u7aef\u95ee\u9898(<code>hidden station problem</code>)</p> </li> <li> <p>MACA \u51b2\u7a81\u907f\u514d\u591a\u8def\u8bbf\u95ee\u534f\u8bae</p> </li> <li> <p>\u57fa\u672c\u601d\u8def\u662f\u53d1\u9001\u65b9\u523a\u6fc0\u63a5\u6536\u65b9\u8f93\u51fa\u4e00\u4e2a\u77ed\u7684\u6570\u636e\u5e27\uff0c\u4ee5\u4fbf\u5176\u5728\u9644\u8fd1\u53ef\u4ee5\u63a5\u6536\u5230\uff0c\u540c\u65f6\u907f\u514d\u63a5\u4e0b\u53bb\u8fdb\u884c\u7684\u6570\u636e\u5e27\u4f20\u8f93\u4e5f\u9700\u8981\u53d1\u9001\u6570\u636e</p> </li> <li>RTS(Request to Send)\uff1a30\u5b57\u8282\uff0c\u5305\u542b\u968f\u540e\u8981\u53d1\u9001\u7684\u6570\u636e\u5e27\u957f\u5ea6</li> <li>CTS(Clear to Send)\uff1a\u5e94\u7b54\u5e27</li> </ul> <p></p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#43-ieee8023","title":"4.3 \u4ee5\u592a\u7f51 IEEE802.3\u6807\u51c6","text":"<ul> <li> <p>\u4ee5\u592a\u7f51\u7684\u5206\u7c7b\uff1a</p> </li> <li> <p>\u7ecf\u5178\u4ee5\u592a\u7f51 Classsic</p> </li> <li>\u4ea4\u6362\u5f0f\u4ee5\u592a\u7f51 Switched\uff1a\u7528\u4ea4\u6362\u673a\u6765\u8fde\u63a5\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\uff0c\u76ee\u524d\u4e3b\u8981\u4f7f\u7528\u7684\u4ee5\u592a\u7f51\u7c7b\u578b</li> </ul> <p></p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#431-mac","title":"4.3.1 \u7ecf\u5178\u4ee5\u592a\u7f51\u7684MAC\u5b50\u5c42\u534f\u8bae","text":"<ul> <li> <p>802.3\u7684\u6570\u636e\u5e27\u683c\u5f0f\uff1a</p> </li> <li> <p>\u524d\u5bfc\u7801\u662f8\u4e2a\u5b57\u8282\uff0c7\u4e2a\u5b57\u8282\u662f10101010\uff0c\u6700\u540e\u4e00\u4e2a\u5b57\u8282\u662fSOF10101011</p> </li> <li>\u76ee\u6807\u5730\u5740\u548c\u6e90\u5730\u5740\u90fd\u662f6\u5b57\u8282\u7684\u957f\u5ea6<ul> <li>\u76ee\u6807\u5730\u5740\u7684\u7b2c\u4e00\u4f4d\u662f0/1\u5206\u522b\u8868\u793a\u666e\u901a\u5730\u5740\u548c\u7ec4\u64ad\u5730\u5740</li> <li>\u76ee\u6807\u5730\u5740\u5168\u662f1\u5219\u662f\u5e7f\u64ad</li> </ul> </li> <li>\u7c7b\u578b\u75282\u4e2a\u5b57\u8282\u6765\u6807\u8bc6\uff0c\u53d6\u51b3\u4e8e\u534f\u8bae\u7684\u7c7b\u578b</li> <li>\u6570\u636e\u5b57\u6bb5\u6700\u591a\u53ef\u4ee5\u67091500\u4e2a\u5b57\u8282</li> <li>\u4ee5\u592a\u7f51\u8981\u6c42\u6709\u6548\u5e27\u7684\u957f\u5ea6\u81f3\u5c11\u662f64bit\uff0c\u56e0\u6b64\u9700\u8981\u67090-46\u5b57\u8282\u7684\u586b\u5145\u533a<ul> <li>\u8fd9\u662f\u4e3a\u4e86\u6ee1\u8db32t\u7684\u4f20\u8f93\u65f6\u95f4</li> </ul> </li> <li>\u6821\u9a8c\u548c\u662f4\u5b57\u8282\uff0c\u4e00\u822c\u534132\u4f4d\u7684CRC</li> </ul> <p></p> <ul> <li> <p>\u91c7\u7528\u66fc\u5207\u65af\u7279\u7f16\u7801\u7684\u65b9\u5f0f</p> </li> <li> <p>\u4e8c\u8fdb\u5236\u6307\u6570\u540e\u9000\u7b97\u6cd5 <code>Binary Exponential Backoff</code>\uff1a </p> </li> <li> <p>\u5728\u7b2ci\u6b21\u7684\u51b2\u7a81\u4e4b\u540e\uff0c\u968f\u5373\u7b49\u5f85\\(0\\rightarrow 2^i-1\\) \u4e2a\u65f6\u95f4\u69fd\uff0c\u4f46\u662f\u6700\u5927\u4e0d\u8d85\u8fc71023</p> </li> <li> <p>\u5982\u679c\u53ea\u6709\u5c11\u91cf\u7684\u7ad9\u51b2\u7a81\u53ef\u4ee5\u786e\u4fdd\u6bd4\u8f83\u4f4e\u7684\u5ef6\u8fdf\uff0c\u4f46\u662f\u51b2\u7a81\u7684\u7ad9\u70b9\u6bd4\u8f83\u591a\u7684\u65f6\u5019\u4e5f\u53ef\u4ee5\u4fdd\u8bc1\u4e00\u4e2a\u5408\u7406\u7684\u65f6\u95f4\u6765\u89e3\u51b3\u51b2\u7a81</p> </li> <li> <p>\u4ee5\u592a\u7f51\u7684\u4fe1\u9053\u6548\u7387\uff1a\u5047\u8bbe\u6bcf\u4e2a\u65f6\u95f4\u69fd\u7684\u95f4\u9694\u65f6\u95f4\u662f2t\uff0c\u5e76\u4e14\u4f20\u9001\u4e00\u5e27\u5e73\u5747\u9700\u8981P\u79d2\uff0c\u83b7\u5f97\u67d0\u4e2a\u4fe1\u9053\u7684\u6982\u7387\u4e3a\\(A=kp(1-p)^{k-1}\\) \u5219\u4fe1\u9053\u6548\u7387=\\(\\frac{P}{P+2t/A}\\)</p> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%26MAC/#432","title":"4.3.2 \u4ea4\u6362\u5f0f\u4ee5\u592a\u7f51","text":"<ul> <li> <p>\u4ee5\u592a\u7f51\u7684\u7ed3\u6784</p> </li> <li> <p>\u96c6\u7ebf\u5668\uff1a\u5728\u7535\u6c14\u4e0a\u7b80\u5355\u5730\u8fde\u63a5\u6240\u6709\u7684\u8fde\u63a5\u7ebf\uff0c\u6bd4\u5982\u7528\u53cc\u7ede\u7ebf\uff0c\u4f46\u662f\u96c6\u7ebf\u5668\u4e0d\u80fd\u589e\u52a0\u5bb9\u91cf\uff0c\u903b\u8f91\u4e0a\u7b49\u4e8e\u4e00\u6839\u7535\u7f06\u7ec4\u6210\u7684\u7ecf\u5178\u4ee5\u592a\u7f51</p> </li> <li>\u4ea4\u6362\u673a\uff1a\u5305\u542b\u4e00\u5757\u8fde\u63a5\u6240\u6709\u7aef\u53e3\u7684\u9ad8\u901f\u80cc\u677f\uff0c\u5176\u4ed6\u7684\u7565</li> </ul> <p></p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc4\uff1a\u7f51\u7edc\u5c42","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#chapter-5network-layer","title":"Chapter 5\uff1aNetwork Layer","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#51","title":"5.1 \u7f51\u7edc\u5c42\u7684\u8bbe\u8ba1","text":"<ul> <li> <p>\u7f51\u7edc\u5c42</p> </li> <li> <p>\u5173\u6ce8\u7684\u662f\u5982\u4f55\u5c06\u6e90\u7aef\u7684\u6570\u636e\u5305\u53d1\u9001\u5230\u63a5\u6536\u65b9</p> </li> <li>\u53ef\u4ee5\u901a\u8fc7\u4e2d\u95f4\u8def\u7531\u5668\u8fdb\u884c\u8f6c\u53d1\uff0c\u6570\u636e\u94fe\u8def\u5c42\u53ea\u8d1f\u8d23\u5c06\u7ebf\u8def\u4ece\u4e00\u8fb9\u4f20\u9001\u5230\u53e6\u4e00\u8fb9\uff0c\u800c\u7f51\u7edc\u5c42\u662f\u5904\u7406\u7aef\u5230\u7aef\u6570\u636e\u4f20\u8f93\u7684\u6700\u5e95\u5c42 </li> <li>\u56e0\u6b64\u7f51\u7edc\u5c42\u5fc5\u987b\u77e5\u9053\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784\uff0c\u5e76\u9009\u62e9\u9002\u5f53\u7684\u8def\u5f84\u8fdb\u884c\u4f20\u8f93</li> </ul> <p></p> <ul> <li> <p>\u7f51\u7edc\u5c42\u63d0\u4f9b\u7ed9\u4f20\u8f93\u5c42\u7684\u670d\u52a1</p> <ul> <li>\u5e94\u8be5\u72ec\u7acb\u4e8e\u8def\u7531\u5668\u6280\u672f\uff0c\u5411\u4f20\u8f93\u5c42\u5c4f\u853d\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u7684\u5177\u4f53\u5185\u5bb9</li> <li>\u4f20\u8f93\u5c42\u53ef\u7528\u7684\u7f51\u7edc\u5730\u5740\u5e94\u8be5\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u7f16\u5730\u5740\u65b9\u6848</li> </ul> </li> <li> <p>\u7f51\u7edc\u5c42\u63d0\u4f9b\u7684\u670d\u52a1</p> </li> <li> <p>\u65e0\u8fde\u63a5\u670d\u52a1\uff1a</p> <ul> <li>\u6bcf\u4e2a\u6570\u636e\u5305\u72ec\u7acb\u8def\u7531\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u9884\u5148\u7684\u8bbe\u7f6e</li> <li>\u6b64\u65f6\u7684\u6570\u636e\u5305\u901a\u5e38\u4e5f\u79f0\u4e3a\u6570\u636e\u62a5datagram\uff0c\u5bf9\u5e94\u7684\u7f51\u7edc\u79f0\u4e3a\u6570\u636e\u62a5\u7f51\u7edc</li> <li>\u6bcf\u4e2a\u8def\u7531\u5668\u4e2d\u90fd\u6709\u4e00\u4e2a\u5185\u90e8\u8868\uff0c\u6307\u660e\u4e86\u9488\u5bf9\u6bcf\u4e00\u4e2a\u53ef\u80fd\u7684\u76ee\u6807\u5730\u5740\u5e94\u8be5\u5c06\u6570\u636e\u5305\u9001\u5230\u54ea\u91cc\u53bb\u3002</li> <li>\u8868\u4e2d\u7684\u6bcf\u4e00\u9879\u7531\u4e24\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a\u76ee\u6807\u5730\u5740\u548c\u901a\u5f80\u76ee\u6807\u5730\u5740\u6240\u4f7f\u7528\u7684\u51fa\u5883\u7ebf\u8def</li> <li>\u7ba1\u7406\u8def\u7531\u8868\u66f4\u65b0\u7684\u7b97\u6cd5\u79f0\u4e3a\u8def\u7531\u7b97\u6cd5</li> </ul> <p></p> </li> <li> <p>\u9762\u5411\u8fde\u63a5\u7684\u670d\u52a1\uff1a</p> <ul> <li>\u5728\u53d1\u9001\u6570\u636e\u5305\u4e4b\u524d\u9700\u8981\u5148\u5efa\u7acb\u8d77\u4e00\u6761\u865a\u7535\u8def\uff0c\u5bf9\u5e94\u7684\u7f51\u7edc\u79f0\u4e3a\u865a\u7535\u8def\u7f51\u7edc</li> <li>\u4e00\u4e2a\u4f8b\u5b50\u662f\u591a\u534f\u8bae\u6807\u7b7e\u4ea4\u6362 MPLS</li> </ul> <p></p> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#52","title":"5.2 \u8def\u7531\u7b97\u6cd5","text":"<ul> <li> <p>\u662f\u7f51\u7edc\u5c42\u8f6f\u4ef6\u7684\u4e00\u90e8\u5206\uff0c\u8d1f\u8d23\u786e\u5b9a\u4e00\u4e2a\u5165\u5883\u6570\u636e\u5305\u5e94\u8be5\u88ab\u53d1\u9001\u5230\u54ea\u6761\u7ebf\u8def\u4e0a</p> </li> <li> <p>\u8def\u7531\u7b97\u6cd5\u9700\u8981\u6709\u4e00\u5b9a\u7684\u9c81\u68d2\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u80fd\u591f\u5904\u7406\u62d3\u6251\u7ed3\u6784\u548c\u6d41\u91cf\u7684\u5404\u79cd\u53d8\u5316</p> </li> <li>\u529f\u80fd\uff1a\u8def\u7531routing\u548c\u8f6c\u53d1forwarding</li> <li> <p>\u53ef\u4ee5\u5206\u4e3a\u81ea\u9002\u5e94\u7b97\u6cd5\u548c\u975e\u81ea\u9002\u5e94\u7b97\u6cd5</p> <ul> <li>\u975e\u81ea\u9002\u5e94\u7b97\u6cd5\u4e0d\u4f1a\u6839\u636e\u6d41\u91cf\u548c\u62d3\u6251\u7ed3\u6784\u6765\u8c03\u6574\u8def\u7531\u51b3\u7b56\uff0c\u4e5f\u53eb\u505a\u9759\u6001\u8def\u7531 </li> <li>\u81ea\u9002\u5e94\u7b97\u6cd5\u4f1a\u6839\u636e\u62d3\u6251\u7ed3\u6784\u548c\u6d41\u91cf\u6765\u6539\u53d8\u8def\u7531\u7b56\u7565\uff0c\u4e5f\u53eb\u505a\u52a8\u6001\u8def\u7531 </li> </ul> </li> <li> <p>\u6700\u4f18\u5316\u539f\u5219</p> </li> <li> <p>\u6700\u4f18\u5316\u539f\u5219\u7684\u8868\u8ff0\uff1a\u6700\u4f18\u8def\u5f84\u4e0a\u7684\u5b50\u8def\u5f84\u4e00\u5b9a\u662f\u6700\u4f18\u8def\u5f84</p> </li> <li> <p>\u4ece\u6240\u6709\u6e90\u5230\u5236\u5b9a\u76ee\u6807\u7684\u6700\u4f18\u8def\u5f84\u6784\u6210\u7684\u96c6\u5408\u6784\u6210\u4e86\u4e00\u68f5\u4ee5\u76ee\u6807\u8282\u70b9\u4e3a\u6839\u7684\u6811\uff0c\u79f0\u4e3a\u6c47\u96c6\u6811<code>sink tree</code> </p> </li> <li> <p>\u51e0\u79cd\u5e38\u7528\u7684\u7b97\u6cd5</p> </li> <li> <p>\u6700\u77ed\u8def\u5f84\u7b97\u6cd5\uff1a\u7528\u8df3\u6570hop\u6216\u8005\u7f51\u7ebf\u957f\u5ea6\u7b49\u6307\u6807\u6765\u6807\u8bc6\u62d3\u6251\u56fe\u4e2d\u7684\u8fb9\u957f</p> <ul> <li>\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u7ed3\u6784\u57fa\u7840\u4e2d\u5b66\u8fc7\u7684Dijkstra\u7b97\u6cd5</li> </ul> </li> <li> <p>\u6cdb\u6d2a\u7b97\u6cd5\uff1a</p> <ul> <li>\u6bcf\u4e2a\u8def\u7531\u5668\u5fc5\u987b\u6839\u636e\u672c\u5730\u7684\u77e5\u8bc6\u800c\u4e0d\u662f\u7f51\u7edc\u7684\u5168\u8c8c\u505a\u51b3\u7b56\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u6280\u672f\u662f\u6cdb\u6d2a\uff0c\u8fd9\u79cd\u6280\u672f\u5c06\u6bcf\u4e00\u4e2a\u5165\u5883\u7684\u6570\u636e\u5305\u53d1\u9001\u5230\u4e86\u9664\u4e86\u5230\u8fbe\u7ebf\u8def\u4ee5\u5916\u7684\u6bcf\u6761\u51fa\u5883\u7ebf\u8def</li> <li>\u95ee\u9898\u4f7f\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u91cd\u590d\u6570\u636e\u5305\uff0c\u9700\u8981\u7528\u63aa\u65bd\u6765\u6291\u5236\u6cdb\u6d2a\uff0c\u4e00\u79cd\u65b9\u6cd5\u662f\u5728\u6570\u636e\u5305\u91cc\u653e\u4e00\u4e2a\u8df3\u8ba1\u6570\u5668\uff0c\u6bcf\u8df3\u4e00\u6b21\u51cf\u5c0f1\uff0c\u5982\u679c\u8ba1\u6570\u5668\u4e3a0\u5c31\u4e22\u5f03\u8fd9\u4e2a\u6570\u636e\u5305</li> </ul> </li> <li> <p>\u52a8\u6001\u8def\u7531\u7b97\u6cd5\uff1a\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u7b97\u6cd5</p> <ul> <li>\u6bcf\u4e2a\u8def\u7531\u5668\u7ef4\u62a4\u4e00\u5f20\u8868\uff0c\u8868\u949f\u5217\u51fa\u4e86\u5f53\u524d\u5df2\u77e5\u7684\u5230\u6bcf\u4e2a\u76ee\u6807\u7684\u6700\u4f73\u8ddd\u79bb\u548c\u4f7f\u7528\u7684\u94fe\u8def\uff0c\u901a\u8fc7\u90bb\u5c45\u4e4b\u95f4\u76f8\u4e92\u4ea4\u6362\u4fe1\u606f\u800c\u4e0d\u65ad\u88ab\u66f4\u65b0\uff0c\u6700\u7ec8\u6bcf\u4e2a\u8def\u7531\u5668\u90fd\u4e86\u89e3\u5230\u4e86\u5230\u8fbe\u76ee\u6807\u7684\u6700\u4f73\u94fe\u8def</li> <li>\u6bcf\u4e2a\u8def\u7531\u5668\u7ef4\u62a4\u4e00\u5f20\u8def\u7531\u8868\uff0c\u4ee5\u7f51\u7edc\u4e2d\u7684\u6bcf\u4e2a\u8def\u7531\u5668\u4f5c\u4e3a\u7d22\u5f15\uff0c\u5e76\u4e14\u6bcf\u4e2a\u8def\u7531\u5668\u4f5c\u4e3a\u8868\u4e2d\u7684\u4e00\u9879\uff0c\u8be5\u8868\u5305\u542b\u4e24\u4e2a\u90e8\u5206\u2014\u2014\u5230\u8fbe\u76ee\u6807\u8def\u7531\u5668\u7684\u9996\u9009\u7ebf\u8def\u548c\u8ddd\u79bb\u7684\u4f30\u8ba1\u503c </li> <li>\u6bcf\u4e2a\u8def\u7531\u5668\u6536\u5230\u4e86\u76f8\u90bb\u8def\u7531\u5668\u53d1\u6765\u7684\u77e2\u91cf\u4e4b\u540e\u4f1a\u66f4\u65b0\u81ea\u5df1\u7684\u8def\u7531\u8868</li> </ul> <p></p> </li> <li> <p>\u65e0\u7a77\u8ba1\u7b97\u95ee\u9898\uff1a</p> <ul> <li>\u6574\u4e2a\u7f51\u7edc\u6700\u4f73\u8def\u5f84\u7684\u5bfb\u627e\u8fc7\u7a0b\u79f0\u4e3a\u6536\u655b\uff0c\u8ddd\u79bb\u77e2\u91cf\u7b97\u6cd5\u53ef\u4ee5\u6536\u655b\u5230\u4e00\u6761\u6700\u77ed\u7684\u8def\u5f84\uff0c\u4f46\u662f\u95ee\u9898\u662f\u901f\u5ea6\u592a\u6162\u4e86</li> <li>\u8ddd\u79bb\u77e2\u91cf\u7b97\u6cd5\u5bf9\u597d\u7684\u7ed3\u679c\u53cd\u5e94\u7279\u522b\u8fc5\u901f\uff0c\u5bf9\u574f\u6d88\u606f\u7684\u53cd\u5e94\u975e\u5e38\u8fdf\u949d</li> <li>\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u8ba9\u8def\u7531\u8868\u7684\u8ba1\u7b97\u51fa\u73b0\u65e0\u9650\u8ba1\u7b97\u7684\u60c5\u51b5\uff0c\u8fd9\u5c31\u662f\u65e0\u7a77\u8ba1\u6570\u95ee\u9898</li> <li>Poisoned Reverse\u67d3\u6bd2\u9006\u8f6c\uff1a\u5728\u57fa\u4e8e\u8def\u7531\u4fe1\u606f\u534f\u8bae\u7684\u7f51\u7edc\u4e2d\uff0c\u5f53\u4e00\u6761\u8def\u5f84\u4fe1\u606f\u53d8\u4e3a\u65e0\u6548\u4e4b\u540e\uff0c\u8def\u7531\u5668\u5e76\u4e0d\u7acb\u5373\u5c06\u5b83\u4ece\u8def\u7531\u8868\u4e2d\u5220\u9664\uff0c\u800c\u662f\u7528\u65e0\u7a77\u5927\uff0c\u5373\u4e0d\u53ef\u8fbe\u7684\u5ea6\u91cf\u503c\u5c06\u5b83\u5e7f\u64ad\u51fa\u53bb\u3002\u4f46\u662f\u5b83\u4e0d\u80fd\u5b8c\u5168\u89e3\u51b3\u65e0\u7a77\u8ba1\u6570\u95ee\u9898</li> </ul> </li> <li> <p>\u94fe\u8def\u72b6\u6001\u8def\u7531\u7b97\u6cd5\uff1a\u6bcf\u4e00\u4e2a\u8def\u7531\u5668\u9700\u8981\u5b8c\u62105\u4e2a\u6b65\u9aa4\uff0c\u7b97\u6cd5\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c</p> <ul> <li>\u53d1\u73b0\u90bb\u5c45\u8282\u70b9\uff0c\u5e76\u4e86\u89e3\u7f51\u7edc\u5730\u5740</li> <li>\u8bbe\u7f6e\u6bcf\u4e2a\u90bb\u5c45\u8282\u70b9\u7684\u8ddd\u79bb\u6216\u8005\u6210\u672c\u5ea6\u91cf\u503c</li> <li>\u6784\u9020\u4e00\u4e2a\u5305\u542b\u521a\u624d\u6240\u5f97\u7684\u4fe1\u606f\u7684\u94fe\u8def\u4fe1\u606f\u5305</li> </ul> <p></p> <ul> <li>\u5c06\u5305\u53d1\u9001\u7ed9\u6240\u6709\u7684\u8def\u7531\u5668\uff0c\u5e76\u63a5\u53d7\u6240\u6709\u6765\u81ea\u5176\u4ed6\u8def\u7531\u5668\u7684\u4fe1\u606f\u5305</li> <li>\u8ba1\u7b97\u51fa\u5230\u6bcf\u4e2a\u8def\u7531\u5668\u7684\u6700\u77ed\u8def\u5f84</li> </ul> </li> <li> <p>\u5c42\u6b21\u8def\u7531\uff1a</p> <ul> <li>\u8def\u7531\u5668\u88ab\u5212\u5206\u6210\u4e86\u4e0d\u540c\u7684\u533a\u57df\uff0c\u6bcf\u4e2a\u8def\u7531\u5668\u77e5\u9053\u5982\u4f55\u5c06\u6570\u636e\u5305\u8def\u7531\u5230\u81ea\u5df1\u6240\u5728\u7684\u533a\u57df\u5185\u7684\u5e03\u6807\u5730\u5740\uff0c\u4f46\u662f\u5bf9\u4e8e\u5176\u4ed6\u533a\u57df\u7684\u5185\u90e8\u7ed3\u6784\u4e0d\u77e5\u60c5\uff0c\u5f53\u4e0d\u540c\u7684\u7f51\u7edc\u88ab\u76f8\u4e92\u8fde\u63a5\u5728\u4e00\u8d77\u7684\u65f6\u5019\uff0c\u6bcf\u4e2a\u7f51\u7edc\u5c31\u4f1a\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u533a\u57df\uff0c\u4e00\u4e2a\u7f51\u7edc\u4e2d\u7684\u8def\u7531\u5668\u4e0d\u5fc5\u76f4\u5230\u5176\u4ed6\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784</li> <li>\u4ee3\u4ef7\u662f\u589e\u52a0\u4e86\u8def\u5f84\u7684\u957f\u5ea6</li> </ul> </li> <li> <p>\u5e7f\u64ad\u8def\u7531\uff1a</p> <ul> <li>\u6d6a\u8d39\u5e26\u5bbd\uff0c\u5e76\u4e14\u9700\u8981\u6e90\u5934\u62e5\u6709\u6240\u6709\u76ee\u6807\u673a\u5668\u7684\u5b8c\u6574\u5730\u5740\u5217\u8868\uff0c\u4e0d\u591f\u7406\u60f3\u4f46\u662f\u5e7f\u6cdb\u4f7f\u7528</li> <li>\u591a\u76ee\u6807\u8def\u7531\uff1a\u6bcf\u4e2a\u6570\u636e\u5305\u5305\u542b\u4e00\u7ec4\u76ee\u6807\u5730\u5740\u6216\u8005\u4f4d\u56fe</li> <li>\u9006\u5411\u8def\u5f84\u8f6c\u53d1</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#53-ip","title":"5.3 IP\u534f\u8bae","text":"<ul> <li>\u7f51\u9645\u534f\u8baeIP\u662fTCP/IP\u4f53\u7cfb\u4e2d\u6700\u91cd\u8981\u7684\u534f\u8bae\u4e4b\u4e00\uff0c\u7528\u6765\u8fde\u63a5\u8ba1\u7b97\u673a\u7f51\u7edc\u8fdb\u884c\u901a\u4fe1</li> <li>\u4e92\u8054\u4ee5\u540e\u7684\u8ba1\u7b97\u673a\u7f51\u7edc\u90fd\u662f\u7531\u7f51\u9645\u534f\u8baeIP\u56e0\u6b64\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u865a\u62df\u4e92\u8054\u7f51\u7edc\uff0c\u56e0\u4e3a\u7269\u7406\u4ecb\u8d28\u4e4b\u95f4\u7684\u5f02\u6784\u6027\u662f\u5ba2\u89c2\u5b58\u5728\u7684</li> <li>\u800cIP\u534f\u8bae\u4f7f\u5f97\u6027\u80fd\u5404\u5f02\u7684\u7f51\u7edc\u5728\u7f51\u7edc\u5c42\u4e2d\u770b\u8d77\u6765\u5c31\u50cf\u4e0a\u4e00\u4e2a\u7edf\u4e00\u7684\u7f51\u7edc</li> <li>\u4e3a\u4e86\u8fde\u63a5\u4e0d\u540c\u7684\u7f51\u7edc\uff0c\u9700\u8981\u4e00\u4e9b\u4e2d\u95f4\u8bbe\u5907</li> <li>\u7269\u7406\u5c42\u7684\u4e2d\u95f4\u8bbe\u5907\u53eb\u505a\u8f6c\u53d1\u5668repeater</li> <li>\u6570\u636e\u94fe\u8def\u5c42\u7684\u4e2d\u95f4\u8bbe\u5907\u53eb\u505a\u7f51\u6865\u6216\u8005\u6865\u63a5\u5668bridge</li> <li>\u7f51\u7edc\u5c42\u4f7f\u7528\u7684\u4e2d\u95f4\u8bbe\u5907\u53eb\u505a\u8def\u7531\u5668router</li> <li> <p>\u7f51\u7edc\u5c42\u4ee5\u4e0a\u4f7f\u7528\u7684\u4e2d\u95f4\u8bbe\u5907\u53eb\u505a\u7f51\u5173gateway\uff0c\u53ef\u4ee5\u7528\u6765\u8fde\u63a5\u4e24\u4e2a\u4e0d\u517c\u5bb9\u7684\u7cfb\u7edf\uff0c\u9700\u8981\u5728\u9ad8\u5c42\u8fdb\u884c\u534f\u8bae\u7684\u8f6c\u6362</p> </li> <li> <p>Internet\u7684\u901a\u4fe1\u8fc7\u7a0b\uff1a</p> </li> <li>\u4ece\u4f20\u8f93\u5c42\u83b7\u53d6\u6570\u636e\u6d41\uff0c\u5e76\u5c06\u6570\u636e\u6d41\u62c6\u5206\u6210\u6bb5\uff0c\u4ee5\u4fbf\u4f5c\u4e3aIP\u6570\u636e\u5305\u53d1\u9001</li> <li>\u6bcf\u4e2a\u6570\u636e\u5305\u7406\u8bba\u4e0a\u6700\u5927\u5bb9\u91cf\u662f64KB\uff0c\u4f46\u4e00\u822c\u4e0d\u8d85\u8fc71500bytes</li> <li>IP\u8def\u7531\u5668\u8f6c\u53d1\u6bcf\u4e2a\u6570\u636e\u5305\u7a7f\u8fc7Internet\uff0c\u6cbf\u7740\u4e00\u6761\u8def\u5f84\u628a\u6570\u636e\u5305\u4ece\u4e00\u4e2a\u8def\u7531\u5668\u8f6c\u53d1\u5230\u4e0b\u4e00\u4e2a\u8def\u7531\u5668\uff0c\u76f4\u5230\u6570\u636e\u5305\u5230\u8fbe\u76ee\u7684\u5730\u3002</li> <li>\u5728\u63a5\u53d7\u65b9\uff0c\u7f51\u7edc\u5c42\u5c06\u6570\u636e\u4ea4\u7ed9\u4f20\u8f93\u5c42\uff0c\u518d\u7531\u4f20\u8f93\u5c42\u4ea4\u7ed9\u63a5\u6536\u8fdb\u7a0b</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#531-ipv4","title":"5.3.1 IPv4\u534f\u8bae","text":"<ul> <li> <p>\u534f\u8bae\u5934</p> </li> <li> <p>\u6bcf\u4e2aIP\u6570\u636e\u62a5\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a\u5934\u548c\u6b63\u6587\uff0c\u6b63\u6587\u90e8\u5206\u4e5f\u53eb\u505a\u6709\u6548\u51c0\u8377</p> </li> <li>\u6bcf\u4e2aIPv4\u534f\u8bae\u5934\u670920\u4e2a\u5b57\u8282\u7684\u5b9a\u957f\u90e8\u5206\u548c\u4e00\u4e2a\u53ef\u9009\u7684\u53d8\u957f\u90e8\u5206</li> </ul> <p></p> <ul> <li>\u7ec4\u6210\u90e8\u5206<ul> <li>\u7248\u672c\u5b57\u6bb5\u8bb0\u5f55\u4e86\u534f\u8bae\u5c5e\u4e8e\u54ea\u4e2a\u7248\u672c\uff0c\u76ee\u524d\u7528\u7684\u6bd4\u8f83\u591a\u7684\u4f9d\u7136\u662fIPv4</li> <li>IHL\u6307\u660e\u4e86\u5934\u5230\u5e95\u6709\u591a\u957f(\u4ee532\u4f4d\u5b57\u957f\u5ea6\u4e3a\u5355\u4f4d)\uff0c\u6700\u5c0f\u503c\u662f5\u8868\u660e\u6ca1\u6709\u53ef\u9009\u9879\uff0c\u6700\u5927\u503c\u662f15\uff0c\u56e0\u6b64\u53ef\u9009\u9879\u6700\u591a\u4e3a40\u5b57\u8282</li> <li>\u603b\u957f\u5ea6\u5305\u542b\u4e86\u6570\u636e\u62a5\u4e2d\u6240\u6709\u7684\u5185\u5bb9\u5373\u5934\u548c\u6570\u636e\u7684\u603b\u957f\u5ea6</li> <li>\u6807\u8bc6\u7528\u6765\u8ba9\u76ee\u6807\u4e3b\u673a\u786e\u5b9a\u4e00\u4e2a\u65b0\u5230\u7684\u5206\u6bb5\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u6570\u636e\u62a5\uff0c\u540c\u4e00\u4e2a\u6570\u636e\u62a5\u7684\u6240\u6709\u6bb5\u5305\u542b\u76f8\u540c\u7684\u8868\u793a\u503c</li> <li>\u540e\u9762\u8fd8\u6709\u4e00\u4e2a\u7a7a\u4f4d</li> <li>DF\u8868\u793a\u4e0d\u5206\u6bb5\uff0cMF\u8868\u793a\u66f4\u591a\u7684\u6bb5\uff0c\u9664\u4e86\u6700\u540e\u4e00\u6bb5\u4e4b\u5916\u6240\u6709\u6bb5\u90fd\u5fc5\u987b\u8bbe\u7f6eMF\u8fd9\u4e2a\u4f4d\u7f6e</li> <li>\u5206\u6bb5\u504f\u79fb\u91cf\u8868\u793a\u5f53\u524d\u6bb5\u5728\u6570\u636e\u62a5\u4e2d\u7684\u4f4d\u7f6e\uff0c\u8be5\u5b57\u6bb5\u670913\u4f4d\uff0c\u6240\u6709\u6bb5\u7684\u957f\u5ea6\u5fc5\u987b\u662f8\u7684\u500d\u6570\uff0c\u56e0\u6b64\u6700\u591a\u53ef\u4ee5\u67098192\u4e2a\u6bb5 </li> <li>\u751f\u5b58\u671f\u662f\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u6bcf\u4e00\u8df3\u540e\u8ba1\u6570\u5668\u90fd\u4f1a\u51cf\u5c0f\uff0c\u51cf\u5c0f\u52300\u7684\u65f6\u5019\u6570\u636e\u5305\u5c31\u4f1a\u88ab\u4e22\u5f03</li> <li>\u534f\u8bae\u8868\u660e\u4e86\u6570\u636e\u5305\u9700\u8981\u88ab\u4ea4\u7ed9\u54ea\u4e2a\u4f20\u8f93\u8fdb\u7a0b\uff0c\u53ef\u80fd\u662fTCP,UDP\u7b49\u7b49</li> <li>\u5934\u6821\u9a8c\u548c\u7528\u6765\u6821\u9a8c\u548c\u4fdd\u62a4\u5730\u5740</li> <li>\u6e90\u5730\u5740\u548c\u76ee\u6807\u5730\u5740\u662f\u6e90\u7f51\u7edc\u63a5\u53e3\u548c\u76ee\u6807\u7f51\u7edc\u63a5\u53e3\u7684IP\u5730\u5740</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#532-ip","title":"5.3.2 IP\u5730\u5740","text":"<ul> <li> <p>IPv4\u534f\u8bae\u4e2d\u7684IP\u5730\u5740\u662f\u4e00\u4e2a32\u4f4d\u7684\u5730\u5740\uff0c\u7f51\u7edc\u4e2d\u7684\u6bcf\u4e00\u53f0\u4e3b\u673a\u548c\u8def\u7531\u5668\u90fd\u6709\u4e00\u4e2aIP\u5730\u5740</p> </li> <li> <p>IP\u5730\u5740\u662f\u4e00\u79cd\u903b\u8f91\u5730\u5740\uff0c\u56e0\u4e3a\u662f\u8f6f\u4ef6\u5b9e\u73b0\u7684\uff0c\u800c\u7269\u7406\u5c42\u548c\u6570\u636e\u94fe\u8def\u5c42\u7684\u534f\u8bae\u7528\u7684\u662f\u7269\u7406\u5730\u5740</p> <ul> <li>IP\u6570\u636e\u62a5\u4e00\u65e6\u4ea4\u7ed9\u4e86\u6570\u636e\u94fe\u8def\u5c42\u5c31\u88ab\u5c01\u88c5\u6210MAC\u5e27\uff0cMAC\u5e27\u4f20\u9001\u7684\u65f6\u5019\u4f7f\u7528\u7684\u90fd\u662f\u786c\u4ef6\u5730\u5740</li> </ul> </li> <li> <p>IP\u5730\u5740\u5e76\u4e0d\u771f\u6b63\u6307\u5411\u4e00\u53f0\u4e3b\u673a\uff0c\u800c\u662f\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\uff0c\u6240\u4ee5\u5982\u679c\u4e00\u53f0\u4e3b\u673a\u5728\u4e24\u4e2a\u7f51\u7edc\u4e0a\uff0c\u5b83\u5c31\u5fc5\u987b\u6709\u4e24\u4e2aIP\u5730\u5740\uff0c\u8def\u7531\u5668\u6709\u591a\u4e2a\u7f51\u7edc\u63a5\u53e3\uff0c\u6240\u4ee5\u4e00\u4e2a\u8def\u7531\u5668\u6709\u591a\u4e2aIP\u5730\u5740</p> </li> <li> <p>IP\u4e00\u822c\u7531\u7f51\u7edc\u53f7\u548c\u4e3b\u673a\u53f7\u6784\u6210\uff0c\u5206\u4e3aABCDE\u4e94\u7c7b(\u8fd9\u91cc\u7684\u7f51\u7edc\u53f7\u5c31\u662f\u4e0b\u9762\u8bf4\u7684\u524d\u7f00)</p> <ul> <li>A\u7c7b\u7684\u7f51\u7edc\u53f7\u67098\u4f4d\u4e14\u7b2c\u4e00\u4f4d\u662f0\uff0cB\u7c7b\u670916\u4f4d\u4e14\u524d\u4e24\u4f4d\u662f10\uff0cC\u7c7b\u5730\u5740\u7684\u7f51\u7edc\u53f7\u670924\u4f4d\u4e14\u524d\u4e24\u4f4d\u662f110</li> <li>D\u7c7b\u5730\u5740\u662f1110\u5f00\u5934\u7684\u591a\u64ad\u5730\u5740\uff0cE\u7c7b\u5730\u5740\u524d\u56db\u4f4d1111\u6709\u5f85\u5f00\u53d1</li> </ul> </li> <li> <p>IP\u5730\u5740\u7684\u524d\u7f00\uff1aIP\u5730\u5740\u5177\u6709\u5c42\u6b21\u6027\uff0c\u6bcf\u4e2a32\u4f4d\u5730\u5740\u7531\u9ad8\u4f4d\u7684\u53ef\u53d8\u957f\u7f51\u7edc\u53f7\u548c\u4f4e\u4f4d\u7684\u4e3b\u673a\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u540c\u4e00\u4e2a\u7f51\u7edc\u4e0a\u6240\u6709\u4e3b\u673a\u5176\u5730\u5740\u7684\u7f51\u7edc\u503c\u90fd\u662f\u76f8\u540c\u7684\uff0c\u8fd9\u4e00\u6bb5\u5c31\u662f\u524d\u7f00</p> </li> <li> <p>\u5b50\u7f51\u63a9\u7801\uff1a\u4e5f\u6807\u6ce8\u4e86\u524d\u7f00\u7684\u957f\u5ea6\uff0c\u6bd4\u5982128.208.101.21/24\u8868\u793a32\u4f4d\u7684IP\u5730\u5740\u4e2d\u524d\u7f00\u957f\u5ea6\u662f24\u4f4d\uff0c\u540e\u97628\u4f4d\u662f\u4e3b\u673a\u5730\u5740</p> <ul> <li>\u5c42\u6b21\u5316\u7684\u5730\u5740\u4f7f\u5f97\u8def\u7531\u89c4\u6a21\u5316\u4e86\uff0c\u4f46\u662f\u4e5f\u9020\u6210\u4e86\u5730\u5740\u7684\u6d6a\u8d39</li> </ul> </li> <li> <p>\u5b50\u7f51\uff1a\u5728\u5185\u90e8\u5c06\u4e00\u4e2a\u7f51\u7edc\u5757\u5206\u6210\u51e0\u4e2a\u90e8\u5206\u4f9b\u591a\u4e2a\u5185\u90e8\u7f51\u7edc\u4f7f\u7528\uff0c\u4f46\u662f\u5bf9\u5916\u90e8\u4e16\u754c\u4ecd\u7136\u50cf\u5355\u4e2a\u7f51\u7edc\u4e00\u6837\uff0c\u8fd9\u6837\u7684\u5212\u5206\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f\u5b50\u7f51</p> <p></p> </li> <li> <p>CIDR \u65e0\u7c7b\u57df\u95f4\u8def\u7531(\u6784\u9020\u8d85\u7f51)</p> </li> <li> <p>\u6309\u5757\u5206\u914d\u4f9d\u7136\u89e3\u51b3\u4e0d\u4e86\u8def\u7531\u8868\u7206\u70b8\u7684\u95ee\u9898\uff0c\u5c24\u5176\u662f\u4f4d\u4e8e\u9ed8\u8ba4\u81ea\u7531\u533a\u7684\u9aa8\u5e72\u8def\u7531\u5668\uff0c\u5176\u8def\u7531\u8868\u7684\u89c4\u6a21\u975e\u5e38\u5927</p> </li> <li>\u8def\u7531\u805a\u5408Route Aggregation\uff1a\u53ef\u4ee5\u8fd0\u7528\u548c\u5b50\u7f51\u5212\u5206\u76f8\u540c\u7684\u65b9\u6cd5\uff0c\u4e0d\u540c\u5730\u70b9\u7684\u8def\u7531\u5668\u53ef\u4ee5\u77e5\u9053\u4e00\u4e2a\u7ed9\u5b9aIP\u5730\u5740\u7684\u4e0d\u540c\u5927\u5c0f\u7684\u524d\u7f00\uff0c\u7136\u800c\u4e0d\u662f\u5c06\u4e00\u5757\u5730\u5740\u5206\u5272\u6210\u4e3a\u82e5\u5e72\u5b50\u7f51\uff0c\u800c\u662f\u5c06\u591a\u4e2a\u5c0f\u524d\u7f00\u7684\u5730\u5740\u5408\u5e76\u6210\u4e00\u4e2a\u5927\u524d\u7f00\uff0c\u6b64\u65f6\u4ea7\u751f\u7684\u5927\u5757\u524d\u7f00\u5730\u5740\u79f0\u4e3a\u8d85\u7f51</li> <li>\u6709\u4e86\u5730\u5740\u805a\u5408\uff0cIP\u5730\u5740\u53ef\u4ee5\u5305\u542b\u5927\u5c0f\u4e0d\u7b49\u7684\u524d\u7f00\uff0c\u540c\u4e00\u4e2aIP\u5730\u5740\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e0d\u540c\u957f\u5ea6\u7684\u524d\u7f00\u88ab\u591a\u4e2a\u8def\u7531\u5668\u4f7f\u7528\uff0c\u8fd9\u4e2a\u8bbe\u8ba1\u79f0\u4e3a\u65e0\u7c7b\u57df\u95f4\u8def\u7531 <code>Classless Inter-Domain Routing</code> </li> </ul> <p></p> <ul> <li> <p>NAT \u7f51\u7edc\u5730\u5740\u8f6c\u6362</p> </li> <li> <p>\u56e0\u4e3aIP\u5730\u5740\u975e\u5e38\u6709\u9650\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u53d6\u52a8\u6001\u5206\u914dIP\u7684\u7b56\u7565\uff0c\u5728\u4e3b\u673a\u4e0d\u6d3b\u8dc3\u7684\u65f6\u5019\u56de\u6536IP\u5730\u5740\uff0c\u7136\u540e\u5206\u914d\u7ed9\u522b\u4eba\uff0c\u4f46\u662f\u4e5f\u6709\u5c40\u9650\u6027</p> </li> <li>NAT\u7684\u57fa\u672c\u601d\u60f3\u662f\u7ed9\u6bcf\u4e2a\u5bb6\u5ead\u6216\u8005\u516c\u53f8\u5206\u914d\u4e00\u4e2aIP\u5730\u5740\u7528\u6765\u4f20\u8f93\u6d41\u91cf\uff0c\u4f46\u662f\u5728\u5ba2\u6237\u7f51\u7edc\u7684\u5185\u90e8\uff0c\u6bcf\u53f0\u8ba1\u7b97\u673a\u6709\u552f\u4e00\u7684IP\u5730\u5740\uff0c\u8be5\u5730\u5740\u4e3b\u8981\u7528\u6765\u8def\u7531\u5185\u90e8\u6d41\u91cf\uff0c\u7136\u800c\u5f53\u4e00\u4e2a\u6570\u636e\u5305\u79bb\u5f00\u5ba2\u6237\u7f51\u7edc\u53d1\u9001\u5230\u5176\u4ed6\u7684\u5730\u65b9\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8fdb\u884c\u4e00\u4e2a\u5730\u5740\u8f6c\u6362\uff0c\u628a\u5185\u90e8IP\u8f6c\u6362\u6210\u516c\u5171IP\u5730\u5740</li> <li>\u4e09\u4e2a\u4fdd\u7559\u7684\u5730\u5740\u8303\u56f4\uff1a\u5df2\u7ecf\u88ab\u79c1\u6709\u5316\uff0c\u4efb\u4f55\u7f51\u7edc\u53ef\u4ee5\u5185\u90e8\u968f\u610f\u4f7f\u7528\u8fd9\u4e9b\u5730\u5740\uff0c\u4e0d\u5141\u8bb8\u5305\u542b\u8fd9\u4e9b\u5730\u5740\u7684\u6570\u636e\u5305\u51fa\u73b0\u5728Internet\u4e0a\u9762</li> </ul> <p></p> <ul> <li>NAT\u5e26\u6765\u7684\u95ee\u9898\uff1a<ul> <li>\u8fdd\u53cd\u4e86IP\u7684\u7ed3\u6784\u6a21\u578b\uff0c\u5373\u4e00\u53f0\u673a\u5668\u5bf9\u5e94\u4e00\u4e2aIP</li> <li>NAT\u6253\u7834\u4e86\u7aef\u5230\u7aef\u7684\u8fde\u63a5\u6a21\u578b</li> <li>NAT\u5c06\u56e0\u7279\u7f51\u4ece\u65e0\u8fde\u63a5\u7f51\u7edc\u53d8\u6210\u4e86\u9762\u5411\u8fde\u63a5\u7684\u7f51\u7edc</li> <li>\u8fdd\u53cd\u4e86\u6700\u57fa\u672c\u7684\u534f\u8bae\u5206\u5c42\u89c4\u5219</li> <li>\u8fdb\u7a0b\u5e76\u4e0d\u4e00\u5b9a\u53ea\u6709TCP\u548cUDP</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#533-internet","title":"5.3.3 Internet\u63a7\u5236\u534f\u8bae","text":"<ul> <li> <p>ICMP \u63a7\u5236\u6d88\u606f\u534f\u8bae</p> </li> <li> <p>\u662f\u8def\u7531\u5668\u76d1\u89c6Internet\u7684\u534f\u8bae\uff0c\u5f53\u8def\u7531\u5668\u5904\u7406\u6570\u636e\u5305\u7684\u65f6\u5019\u53d1\u751f\u4e86\u610f\u5916\uff0c\u5c31\u53ef\u4ee5\u7528ICMP\u5411\u6570\u636e\u5305\u7684\u6e90\u7aef\u62a5\u544a\u6709\u5173\u4e8b\u4ef6\uff0c\u6240\u6709\u7684ICMP\u90fd\u88ab\u5c01\u88c5\u5728\u4e00\u4e2aIP\u6570\u636e\u5305\u4e2d </p> </li> </ul> <p></p> <ul> <li> <p>ARP \u5730\u5740\u89e3\u6790\u534f\u8bae</p> </li> <li> <p>\u4ee5\u592a\u7f51\u7f51\u5361\u5e76\u4e0d\u80fd\u7406\u89e3IP\u5730\u5740\uff0c\u6bcf\u4e00\u5757NIC\u6839\u636e48\u4f4d\u7684\u4ee5\u592a\u7f51\u5730\u5740\u6765\u53d1\u9001\u548c\u63a5\u6536\u5e27</p> </li> <li>ARP\u534f\u8bae\u7684\u4f5c\u7528\u5c31\u662f\u5c06IP\u5730\u5740\u6620\u5c04\u5230\u4ee5\u592a\u7f51\u7684\u5730\u5740(\u786c\u4ef6\u5730\u5740)\uff0c\u4f18\u70b9\u662f\u7b80\u5355\uff0c\u6bd4\u914d\u7f6e\u6587\u4ef6\u66f4\u52a0\u7b80\u5355\uff0c\u5c5e\u4e8e\u7f51\u7edc\u5c42\u7684\u534f\u8bae</li> <li>ARP\u534f\u8bae\u89e3\u51b3\u8f6c\u6362\u95ee\u9898\u7684\u65b9\u6cd5\u662f\u5728\u4e3b\u673aARPcache\u4e2d\u5b58\u653e\u4e00\u4e2a\u4eceIP\u5730\u5740\u5230\u786c\u4ef6\u5730\u5740\u7684\u6620\u5c04\u8868\uff0c\u5e76\u8fdb\u884c\u52a8\u6001\u66f4\u65b0\uff0c\u6bcf\u4e00\u53f0\u4e3b\u673a\u4e0a\u90fd\u8bbe\u6709\u4e00\u4e2aARP\u9ad8\u901f\u7f13\u5b58\uff0c\u91cc\u9762\u6709\u672c\u5c40\u57df\u7f51\u4e0a\u7684\u5404\u53f0\u4e3b\u673a\u548c\u8def\u7531\u5668\u7684IP\u5230\u786c\u4ef6\u5730\u5740\u6620\u5c04\u8868</li> <li>\u5f53\u4e00\u53f0\u4e3b\u673aA\u8981\u5411\u672c\u5c40\u57df\u7f51\u4e0a\u7684\u4e3b\u673aB\u53d1\u9001IP\u6570\u636e\u62a5\u7684\u65f6\u5019\u5c31\u5148\u5728\u7f13\u5b58\u4e2d\u67e5\u770b\u6709\u65e0\u4e3b\u673aB\u7684IP\u5730\u5740\uff0c\u5982\u679c\u6709\u5c31\u5728ARP\u9ad8\u901f\u7f13\u5b58\u4e2d\u67e5\u51fa\u5176\u5bf9\u5e94\u7684\u786c\u4ef6\u5730\u5740\u5199\u5165MAC\u5e27\u7136\u540e\u8fdb\u884c\u53d1\u9001\uff0c\u5426\u5219\u5c31\u9700\u8981\u518d\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c</li> <li> <p>ARP\u89e3\u51b3\u7684\u662f\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u4e0a\u7684\u4e3b\u673a\u6216\u8005\u8def\u7531\u5668IP\u5230\u786c\u4ef6\u5730\u5740\u7684\u6620\u5c04\u95ee\u9898</p> </li> <li> <p>DHCP \u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae</p> </li> <li> <p>\u6bcf\u4e2a\u7f51\u7edc\u5fc5\u987b\u6709\u4e00\u4e2aDHCP\u670d\u52a1\u5668\u8d1f\u8d23\u5730\u5740\u7684\u914d\u7f6e\uff0c\u4e3a\u53d1\u9001\u8bf7\u6c42\u7684\u4e3b\u673a\u5206\u914d\u4e00\u4e2a\u7a7a\u95f2\u7684IP\u5730\u5740\uff0c\u5e76\u901a\u8fc7DHCP\u7684OFFER\u5305\u8fd4\u56de\u7ed9\u4e3b\u673a</p> </li> <li> <p>\u52a8\u6001\u5206\u914d\u7684IP\u5730\u5740\u53ea\u80fd\u4f7f\u7528\u4e00\u6bb5\u56fa\u5b9a\u7684\u65f6\u95f4\uff0c\u5230\u671f\u4e4b\u524d\u4e3b\u673a\u5fc5\u987b\u8bf7\u6c42DHCP\u7eed\u8ba2\u5426\u5219IP\u5730\u5740\u5c31\u5931\u6548\u4e86</p> </li> <li> <p>\u6807\u7b7e\u4ea4\u6362\u548cMPLS</p> </li> <li> <p>\u591a\u534f\u8bae\u6807\u7b7e\u4ea4\u6362 MOLS\u5728\u6bcf\u4e2a\u6570\u636e\u5305\u524d\u9762\u589e\u52a0\u4e00\u4e2a\u6807\u7b7e\uff0c\u8def\u7531\u5668\u6839\u636e\u6570\u636e\u5305\u6807\u7b7e\u8fdb\u884c\u8f6c\u53d1\uff0c\u7528\u6807\u7b7e\u4f5c\u4e3a\u5185\u90e8\u8868\u7684\u4e00\u4e2a\u7d22\u5f15\uff0c\u5feb\u901f\u67e5\u627e\u51fa\u6b63\u786e\u7684\u8f93\u51fa\u7ebf\u8def</p> </li> <li>\u901a\u7528\u7684MPLS\u67094\u4e2a\u5b57\u8282\uff0c\u5e76\u4e14\u5305\u542b\u56db\u4e2a\u5b57\u6bb5\uff0c\u6807\u7b7e\u5b58\u653e\u7684\u662f\u7d22\u5f15\uff0cQoS\u8868\u660e\u670d\u52a1\u7c7b\u522b\uff0cS\u8868\u793a\u5728\u5c42\u6b21\u7f51\u7edc\u4e2d\u53e0\u52a0\u591a\u4e2a\u6807\u7b7e\u7684\u505a\u6cd5\uff0cTTL\u5b57\u6bb5\u6307\u51fa\u8be5\u6570\u636e\u5305\u8fd8\u53ef\u4ee5\u88ab\u8f6c\u53d1\u591a\u5c11\u6b21\uff0c\u7f8e\u7ecf\u8fc7\u4e00\u4e2a\u8def\u7531\u5668\u88ab\u51cf\u5c0f1\uff0c\u964d\u4e3a0\u7684\u65f6\u5019\u6570\u636e\u5305\u5c06\u88ab\u4e22\u5f03</li> </ul> <p></p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#54-internet","title":"5.4 Internet \u8def\u7531","text":"<ul> <li> <p>OSPF\uff1a\u5185\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae</p> </li> <li> <p>\u56e0\u7279\u7f51\u7531\u5927\u91cf\u7684\u72ec\u7acb\u7f51\u7edc\u6216\u8005\u81ea\u6cbb\u7cfb\u7edf(AS)\u6784\u6210\uff0c\u5728\u4e00\u4e2a\u7f51\u7edc\u7684\u5185\u90e8\uff0c\u4e00\u4e2a\u7ec4\u7ec7\u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u7684\u5185\u90e8\u8def\u7531\u7b97\u6cd5\uff0c\u4e5f\u53eb\u505a\u57df\u5185\u8def\u7531\u7b97\u6cd5</p> </li> <li> <p>\u5f00\u653e\u6700\u77ed\u8def\u5f84\u4f18\u5148 Open Shortest Path First \u534f\u8bae\u501f\u9274\u4e86ISIS(\u4e2d\u95f4\u7cfb\u7edf\u5230\u4e2d\u95f4\u7cfb\u7edf)\u534f\u8bae\uff0c\u5df2\u7ecf\u6210\u4e3a\u4e86ISO\u7684\u6807\u51c6</p> <ul> <li>\u4f7f\u7528\u4e86\u5206\u5e03\u5f0f\u7684\u94fe\u8def\u72b6\u6001\u534f\u8bae(link state protocol)\u548c\u6700\u77ed\u8def\u5f84\u7b97\u6cd5</li> <li>\u52a8\u6001\u7b97\u6cd5\uff0c\u652f\u6301\u591a\u79cd\u8ddd\u79bb\u5ea6\u91cf</li> <li>\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\uff0c\u4f7f\u7528\u5c42\u6b21\u5316\u7684\u7cfb\u7edf</li> <li>\u540c\u65f6\u652f\u6301\u70b9\u5230\u70b9\u7684\u94fe\u8def\u548c\u5e7f\u64ad\u7f51\u7edc</li> </ul> </li> <li> <p>OSPF\u7684\u5de5\u4f5c\u65b9\u5f0f\u672c\u8d28\u4e0a\u662f\u5bf9\u4e00\u5f20\u56fe\u8fdb\u884c\u64cd\u4f5c\uff0c\u5c06\u4e00\u7ec4\u5b9e\u9645\u7f51\u7edc\u3001\u8def\u7531\u5668\u548c\u7ebf\u8def\u62bd\u8c61\u5230\u4e00\u4e2a\u6709\u5411\u56fe\u4e2d\uff0c\u4e24\u4e2a\u8def\u7531\u5668\u4e4b\u95f4\u7684\u70b9\u5230\u70b9\u8fde\u63a5\u53ef\u4ee5\u7528\u4e24\u6761\u6709\u5411\u7684\u5f27\u6765\u8868\u793a</p> <p></p> </li> <li> <p>OSPF\u534f\u8bae\u505a\u4e86\u4e24\u4ef6\u4e8b\u60c5\uff1a</p> <ul> <li>\u7528\u4e00\u4e2a\u6709\u5411\u56fe\u6765\u8868\u793a\u5b9e\u9645\u7684\u7f51\u7edc\uff0c\u8ba1\u7b97\u51fa\u5404\u6761\u6700\u77ed\u7684\u4efb\u52a1</li> <li>OSPF\u8bb0\u4f4f\u6700\u77ed\u7684\u8def\u5f84\u96c6\u5408\uff0c\u5e76\u5728\u62a5\u6587\u8f6c\u53d1\u9636\u6bb5\u628a\u6d41\u91cf\u5206\u644a\u5230\u591a\u6761\u8def\u5f84\u4e0a\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\uff0c\u8fd9\u79cd\u65b9\u6cd5\u79f0\u4e3a\u7b49\u4ef7\u6210\u672c\u591a\u8def\u5f84(ECMP)</li> </ul> </li> <li> <p>OSPF\u53ef\u4ee5\u5c06AS\u5212\u5206\u6210\u82e5\u5e72\u4e2aarea\uff0c\u6bcf\u4e00\u4e2a\u90fd\u662f\u4e00\u4e2a\u7f51\u7edc\uff0c\u6216\u8005\u4e00\u7ec4\u4e92\u8fde\u7684\u7f51\u7edc\uff0c\u533a\u57df\u4e0d\u80fd\u76f8\u4e92\u91cd\u53e0\uff0c\u6bcf\u4e2aAS\u6709\u4e00\u4e2a\u9aa8\u5e72\u533a\u57df</p> <ul> <li>\u8def\u7531\u5668\u4e5f\u5206\u4e3a\u533a\u57df\u8fb9\u754c\u8def\u7531\u5668\u548c\u5185\u90e8\u8def\u7531\u5668\uff0cAS\u8fb9\u754c\u8def\u7531\u5668\uff0c\u9aa8\u5e72\u8def\u7531\u5668\u7b49\u7b49</li> <li>AS\u8fb9\u754c\u8def\u7531\u5668\u628a\u901a\u5f80\u5176\u4ed6AS\u7684\u5916\u90e8\u8def\u7531\u6ce8\u5165\u5230\u672c\u533a\u57df</li> </ul> <p></p> </li> <li> <p>OSPF\u534f\u8bae\u9700\u8981\u5728\u90bb\u63a5\u7684\u8def\u7531\u5668\u4e4b\u95f4\u76f8\u4e92\u4ea4\u6362\u4fe1\u606f\u624d\u80fd\u5de5\u4f5c\uff0cOSPF\u8981\u6c42\u6bcf\u4e2aLAN\u4e2d\u9009\u51fa\u4e00\u53f0\u6307\u5b9a\u8def\u7531\u5668\uff0c\u8be5\u6307\u5b9a\u8def\u7531\u5668\u548c\u672cLAN\u4e0a\u6240\u6709\u7684\u8def\u7531\u5668\u90fd\u662f\u90bb\u63a5\u7684\uff0c\u5e76\u4e14\u548c\u5b83\u4eec\u8fdb\u884c\u4fe1\u606f\u7684\u4ea4\u4e92</p> </li> <li> <p>OSPF\u6709\u4e94\u7c7b\u6d88\u606f\uff0c\u5728\u90bb\u63a5\u8def\u7531\u5668\u4e4b\u95f4\u8fdb\u884c\u4f20\u9012\uff1a\u770bxxr\u7684\u8ba1\u7f51\u6559\u6750</p> <p></p> </li> <li> <p>BGP \u5916\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae</p> </li> <li> <p>BGP\u7684\u5168\u79f0\u662f\u8fb9\u754c\u7f51\u5173\u534f\u8bae Border Gateway Protocol</p> </li> <li>\u5728\u4e00\u4e2aAS\u7684\u5185\u90e8\u63a8\u8350\u4f7f\u7528\u7684\u662fOSPF\u548cISIS\u534f\u8bae\uff0c\u800c\u5728AS\u4e4b\u95f4\u7528BGP\u6bd4\u8f83\u597d\uff0c\u8fd9\u662f\u56e0\u4e3a\u57df\u5185\u534f\u8bae\u548c\u57df\u95f4\u534f\u8bae\u7684\u76ee\u6807\u4e0d\u540c\uff0c\u57df\u5185\u534f\u8bae\u6240\u9700\u8981\u505a\u7684\u53ea\u662f\u5c3d\u53ef\u80fd\u6709\u6548\u5730\u5c06\u6570\u636e\u5305\u4ece\u6e90\u7aef\u53d1\u9001\u5230\u63a5\u6536\u65b9\uff0c\u800c\u57df\u95f4\u7684\u8def\u7531\u534f\u8bae\u5219\u5fc5\u987b\u8981\u8003\u8651\u5927\u91cf\u7684\u9009\u62e9\u7b56\u7565</li> <li> <p>BGP\u53ea\u80fd\u529b\u6c42\u5bfb\u627e\u4e00\u6761\u80fd\u591f\u8fbe\u5230\u76ee\u7684\u7684\u7f51\u7edc\u4e14\u6bd4\u8f83\u597d\u7684\u8def\u7531\uff0c\u91c7\u7528\u4e86\u8def\u5f84\u5411\u91cf\u8def\u7531\u9009\u62e9\u534f\u8bae </p> </li> <li> <p>Internet \u7ec4\u64ad</p> </li> <li>\u666e\u901a\u7684IP\u901a\u4fe1\u53d1\u751f\u5728\u4e00\u4e2a\u53d1\u9001\u65b9\u548c\u4e00\u4e2a\u63a5\u6536\u65b9\u4e4b\u95f4\uff0c\u800cIP\u7528D\u7c7bIP\u5730\u5740\u6765\u652f\u6301\u4e00\u5bf9\u591a\u7684\u901a\u4fe1\u6216\u8005\u7ec4\u64ad\uff0c\u6bcf\u4e2aD\u7c7b\u5730\u5740\u6807\u8bc6\u4e86\u4e00\u7ec4\u4e3b\u673a  </li> <li>Internet \u7ec4\u7ba1\u7406\u534f\u8bae IGMP\u7528\u6765\u89e3\u51b3\u5e7f\u64ad\u6210\u5458\u5206\u5e03\u5728\u4e0d\u540c\u7f51\u7edc\u4e0a\u7684\u60c5\u51b5</li> <li>\u5728AS\u4e2d\u4e3b\u8981\u662f\u4f7f\u7528\u534f\u8bae\u72ec\u7acb\u7ec4\u64ad\u534f\u8baePIM\uff0c\u5728\u7cfb\u6570\u6a21\u5f0fPIM\u4e2d\uff0c\u4f7f\u7528\u7279\u5b9a\u6e90\u7ec4\u64adPIM\u53ef\u7528\u6765\u4f18\u5316\u53ea\u6709\u4e00\u4e2a\u53d1\u9001\u65b9\u7684\u60c5\u51b5\uff0c\u5f53\u6210\u5458\u5206\u5e03\u4e0d\u77e5\u4e00\u4e2aAS\u7684\u65f6\u5019\uff0c\u9700\u8981BGP\u7684\u7ec4\u64ad\u6269\u5c55\u6765\u521b\u5efa\u7ec4\u64ad\u8def\u7531                        </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#55","title":"5.5 \u62e5\u585e\u63a7\u5236","text":"<ul> <li>\u62e5\u585e\uff1a\u7f51\u7edc\u4e2d\u5b58\u5728\u592a\u591a\u7684\u6570\u636e\u5305\u5bfc\u81f4\u6570\u636e\u5305\u88ab\u5ef6\u8fdf\u4f20\u8f93\u548c\u4e22\u5931\uff0c\u5bfc\u81f4\u7f51\u7edc\u7684\u6027\u80fd\u4e0b\u964d</li> <li>\u63a7\u5236\u62e5\u585e\u662f\u7f51\u7edc\u5c42\u548c\u4f20\u8f93\u5c42\u5171\u540c\u627f\u62c5\u7684\u8d23\u4efb</li> <li>\u56e0\u4e3a\u62e5\u585e\u662f\u51fa\u73b0\u5728\u7f51\u7edc\u4e2d\u7684\uff0c\u4f46\u53c8\u662f\u7531\u4e8e\u4f20\u8f93\u5c42\u53d1\u9001\u51fa\u592a\u591a\u7684\u6570\u636e\u5305\u513f\u5bfc\u5e08\u7f51\u7edc\u7684\u8fc7\u8f7d\uff0c\u56e0\u6b64\u9700\u8981\u7f51\u7edc\u5c42\u548c\u4f20\u8f93\u5c42\u5171\u540c\u627f\u62c5\u8d23\u4efb</li> <li>\u6839\u636e\u62e5\u585e\u53d1\u751f\u7684\u539f\u56e0\uff0c\u53ef\u4ee5\u5c06\u89e3\u51b3\u65b9\u6848\u5206\u4e3a\uff1a\u589e\u52a0\u8d44\u6e90\u6216\u8005\u51cf\u5c11\u8d1f\u8f7d</li> <li>\u51c6\u5165\u63a7\u5236\uff1a\u5728\u865a\u7535\u8def\u7f51\u7edc\u4e2d\uff0c\u5982\u679c\u592a\u62e5\u5835\u4e86\u5c31\u62d2\u7edd\u5efa\u7acb\u65b0\u7684\u8fde\u63a5</li> <li>\u6d41\u91cf\u611f\u77e5\u8def\u7531\uff1a\u4e86\u89e3\u5230\u7f51\u7edc\u6d41\u91cf\u4e4b\u540e\u5b9a\u5236\u8def\u7531</li> <li>\u8d1f\u8f7d\u8131\u843d\uff1a\u4e00\u5207\u52aa\u529b\u90fd\u5931\u8d25\u4e86\uff0c\u4e0d\u5f97\u4e0d\u4e22\u5f03\u4e00\u4e9b\u6570\u636e\u5305</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#56","title":"5.6 \u670d\u52a1\u8d28\u91cf","text":"<ul> <li>\u8bc4\u4ef7\u6807\u51c6\uff1a\u53ef\u9760\u6027\u3001\u5ef6\u8fdf\u3001\u6296\u52a8(jitter)\u3001\u5e26\u5bbd\u3002\u6296\u52a8\u662f\u5ef6\u8fdf\u7684\u65b9\u5dee\uff0c\u4e5f\u4ee3\u8868\u4e86\u5230\u8fbe\u65f6\u95f4\u7684\u53d8\u5316</li> </ul> <p>\u96a7\u9053\u6280\u672f</p>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C4-%E7%BD%91%E7%BB%9C%E5%B1%82/#57-ipv6","title":"5.7 IPv6\u6807\u51c6","text":"<ul> <li>IPv6\u4f9d\u7136\u662f\u65e0\u8fde\u63a5\u7684\uff0c\u5e76\u4e14\u5206\u4e3a\u5934\u90e8\u548c\u6709\u6548\u8f7d\u8377\uff0cIPv6\u7684\u5730\u5740\u53d8\u6210\u4e86128\u4f4d\uff0c\u91c7\u7528\u5192\u53f7\u5341\u516d\u8fdb\u5236\u8bb0\u6cd5\uff0c\u6bcf\u4e2a16\u4f4d\u7684\u503c\u7528\u5341\u516d\u8fdb\u5236\u6765\u8868\u793a\uff0c\u5e76\u7528\u5192\u53f7\u6765\u5206\u9694</li> <li>\u6bd4\u5982FF05:0:0:0:0:0:0:B3\u662f\u4e00\u4e2a\u5192\u53f7\u5341\u516d\u8fdb\u5236\u5199\u6cd5\u7684IPv6\u5730\u5740<ul> <li>\u96f6\u538b\u7f29\uff1a\u8fde\u7eed\u7684\u4e00\u4e320\u53ef\u4ee5\u7528\u4e24\u4e2a\u5192\u53f7\u4ee3\u66ff\uff0c\u4e00\u4e2aIP\u5730\u5740\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc5\uff1a\u8fd0\u8f93\u5c42","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/#chapter-6transmission-layer","title":"Chapter 6\uff1aTransmission Layer","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/#61","title":"6.1 \u8fd0\u8f93\u5c42\u7684\u4f5c\u7528","text":"<ul> <li>\u8fd0\u8f93\u5c42\u5411\u4e0a\u9762\u7684\u5e94\u7528\u5c42\u63d0\u4f9b\u901a\u4fe1\u670d\u52a1\uff0c\u662f\u7528\u6237\u529f\u80fd\u4e2d\u7684\u6700\u5e95\u5c42\uff0c\u4e5f\u5c5e\u4e8e\u9762\u5411\u901a\u4fe1\u90e8\u5206\u7684\u6700\u9ad8\u5c42</li> <li>\u901a\u4fe1\u7684\u771f\u6b63\u7aef\u70b9\u5e76\u4e0d\u662f\u4e3b\u673a\u800c\u662f\u4e3b\u673a\u4e2d\u7684\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4\u7aef\u5230\u7aef\u7684\u901a\u4fe1\u662f\u5e94\u7528\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1</li> <li>\u8fd0\u8f93\u5c42\u7684\u91cd\u8981\u529f\u80fd\u662f\u590d\u7528\u548c\u5206\u7528<ul> <li>\u590d\u7528\u662f\u6307\u53d1\u9001\u65b9\u4e0d\u540c\u7684\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u7528\u540c\u4e00\u4e2a\u4f20\u8f93\u5c42\u534f\u8bae\u4f20\u8f93\u6570\u636e</li> <li>\u5206\u7528\u662f\u63a5\u6536\u65b9\u7684\u8fd0\u8f93\u5c42\u5728\u5904\u7406\u62a5\u6587\u4e4b\u540e\u53ef\u4ee5\u628a\u6570\u636e\u4ea4\u4ed8\u7ed9\u6b63\u786e\u7684\u8fdb\u7a0b</li> <li>\u4e5f\u5c31\u662f\u8bf4\u8fd0\u8f93\u5c42\u63d0\u4f9b\u4e86\u8fd0\u8f93\u5c42\u4e4b\u95f4\u7684\u903b\u8f91\u901a\u4fe1\uff0c\u800c\u7f51\u7edc\u5c42\u662f\u4e3a\u4e3b\u673a\u63d0\u4f9b\u4e86\u903b\u8f91\u901a\u4fe1</li> </ul> </li> <li>\u8fd0\u8f93\u5c42\u7684\u4e24\u4e2a\u91cd\u8981\u7684\u8fd0\u8f93\u534f\u8bae\u662f\u9762\u5411\u8fde\u63a5\u7684TCP\u548c\u65e0\u8fde\u63a5\u7684UDP</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/#62","title":"6.2 \u8fd0\u8f93\u5c42\u7684\u534f\u8bae","text":"<ul> <li>TCP\u548cUDP\u534f\u8bae</li> <li>UDP\u7684\u5168\u79f0\u662f\u7528\u6237\u6570\u636e\u62a5\u534f\u8bae\uff0cTCP\u7684\u5168\u79f0\u662f\u4f20\u8f93\u63a7\u5236\u534f\u8bae</li> <li>\u4e24\u4e2apeer\u5728\u901a\u4fe1\u65f6\u5019\u4f20\u9001\u7684\u6570\u636e\u5355\u4f4d\u53eb\u505a\u8fd0\u8f93\u534f\u8bae\u6570\u636e\u5355\u5143 TPDU\uff0c\u4f46\u662f\u5728TCP/IP\u4f53\u7cfb\u4e2d\uff0cTCP\u4f20\u8f93\u7684\u88ab\u79f0\u4e3aTCP\u62a5\u6587\u6bb5\uff0cUDP\u4f20\u8f93\u7684\u88ab\u79f0\u4e3aUDP\u7528\u6237\u6570\u636e\u62a5</li> <li>TCP\u63d0\u4f9b\u7684\u662f\u9762\u5411\u8fde\u63a5\u7684\u670d\u52a1\uff0c\u5728\u4f20\u8f93\u4e4b\u524d\u5fc5\u987b\u5148\u5efa\u7acb\u8fde\u63a5\uff0c\u4f20\u8f93\u7ed3\u675f\u4e4b\u540e\u9700\u8981\u91ca\u653e\u8fde\u63a5\uff0c\u5e76\u4e14\u4e0d\u63d0\u4f9b\u591a\u64ad\u548c\u5e7f\u64ad\u7684\u670d\u52a1\uff0cSMTP\u3001HTTP\u3001FTP\u7b49\u5e94\u7528\u5c42\u534f\u8bae\u7528\u7684\u662fTCP</li> <li>UDP\u5219\u662f\u65e0\u8fde\u63a5\u7684\u534f\u8bae\uff0c\u8fdc\u7a0b\u7684\u4e3b\u673a\u7684\u8fd0\u8f93\u5c42\u5728\u6536\u5230UDP\u4e4b\u540e\uff0c\u4e0d\u9700\u8981\u7ed9\u51fa\u4efb\u4f55\u7684\u786e\u8ba4</li> <li>\u7aef\u53e3\uff1a</li> <li>\u4f20\u8f93\u5c42\u7684\u7aef\u53e3\u6307\u7684\u662f\u8f6f\u4ef6\u7aef\u53e3\uff0c\u6307\u7684\u662f\u5e94\u7528\u5c42\u7684\u5404\u79cd\u534f\u8bae\u8fdb\u7a0b\u548c\u8fd0\u8f93\u5b9e\u4f53\u5c42\u4e4b\u95f4\u8fdb\u884c\u4ea4\u4e92\u7684\u4e00\u79cd\u5730\u5740</li> <li>TCP/IP\u7684\u8fd0\u8f93\u5c42\u752816\u4f4d\u7684\u7aef\u53e3\u53f7\uff0c\u6700\u591a\u652f\u630165535\u4e2a\u4e0d\u540c\u7684\u7aef\u53e3\uff0c\u8fd9\u91cc\u7684\u7aef\u53e3\u53f7\u662f\u4e00\u79cd\u865a\u62df\u7aef\u53e3</li> <li>\u4e5f\u53eb\u505a\u4f20\u8f93\u670d\u52a1\u8bbf\u95ee\u70b9TSAP</li> <li>\u5df2\u7ecf\u5206\u914d\u7684\u4e00\u4e9b\u7aef\u53e3\u53f7\uff1a<ul> <li>20/21 FTP</li> <li>22 SSH</li> <li>25 STMP</li> </ul> </li> <li>\u534f\u8bae\u7684\u8981\u7d20\uff1a</li> <li>\u5bfb\u5740\uff1a\u5efa\u7acb\u901a\u4fe1\u7684\u65f6\u5019\u6307\u5b9a\u8fde\u63a5\u5230\u54ea\u4e2a\u5e94\u7528\u8fdb\u7a0b\u4e0a\u9762\uff0c\u7528\u4e00\u4e2a\u7aef\u53e3\u6620\u5c04\u5668\u7684\u8fdb\u7a0b\u6765\u5904\u7406\u7aef\u53e3\u548c\u670d\u52a1\u7684\u6620\u5c04\u5173\u7cfb</li> <li>\u8fde\u63a5\u5efa\u7acb\uff1a\u62e5\u6709\u5efa\u7acb\u8fde\u63a5\u7684\u4e00\u5957\u7b97\u6cd5\uff0c\u6700\u5e38\u89c1\u7684\u5c31\u662f\u4e09\u6b21\u63e1\u624b</li> <li>\u8fde\u63a5\u7684\u91ca\u653e\uff1a\u975e\u5bf9\u79f0\u91ca\u653e\u548c\u5bf9\u79f0\u91ca\u653e\uff0c\u975e\u5bf9\u79f0\u91ca\u653e\u7c7b\u4f3c\u4e8e\u6302\u7535\u8bdd\uff0c\u5bf9\u79f0\u91ca\u653e\u662f\u4e24\u6bb5\u5efa\u7acb\u7684\u8fde\u63a5\u90fd\u91ca\u653e</li> <li>\u5dee\u9519\u63a7\u5236\u548c\u6d41\u91cf\u63a7\u5236\uff1a\u4f7f\u7528\u52a8\u6001\u7f13\u51b2\u533a\uff0c\u5bf9\u4e8e\u4f4e\u5e26\u5bbd\u7684\u7a81\u53d1\u6d41\u91cf\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\u7f13\u51b2\u533a\uff0c\u5bf9\u4e8e\u6587\u4ef6\u4f20\u8f93\u548c\u9ad8\u5e26\u5bbd\u6d41\u91cf\u9700\u8981\u4f7f\u7528\u7f13\u51b2\u533a</li> <li>\u591a\u8def\u590d\u7528\uff1a\u5230\u8fbe\u7684\u6570\u636e\u62a5\u6bb5\u5fc5\u987b\u7528\u67d0\u79cd\u65b9\u5f0f\u544a\u77e5\u628a\u5b83\u4ea4\u7ed9\u54ea\u4e2a\u8fdb\u7a0b\u5904\u7406\u3002\u201c\u9006\u5411\u591a\u8def\u590d\u7528\u201d</li> <li>\u5d29\u6e83\u6062\u590d\uff1a\u5728\u8def\u7531\u5668\u6216\u8005\u4e3b\u673a\u5d29\u6e83\u7684\u65f6\u5019\u91cd\u65b0\u53d1\u9001</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/#63-udp","title":"6.3 \u7528\u6237\u6570\u636e\u62a5\u534f\u8bae UDP","text":"<ul> <li>\u7528\u6237\u6570\u636e\u62a5\u534f\u8baeUDP\u53ea\u5728IP\u534f\u8bae\u4e0a\u9762\u589e\u52a0\u4e86\u590d\u7528\u548c\u5206\u7528\u7684\u529f\u80fd\uff0c\u5176\u4e3b\u8981\u7279\u70b9\u662f\uff1a</li> <li>\u65e0\u8fde\u63a5\uff0c\u5373\u53d1\u9001\u6570\u636e\u4e0d\u9700\u8981\u5efa\u7acb\u8fde\u63a5\uff0c\u51cf\u5c0f\u4e86\u5f00\u9500\u548c\u5ef6\u8fdf</li> <li>\u5c3d\u6700\u5927\u52aa\u529b\u4ea4\u4ed8\uff0c\u5373\u4e0d\u4fdd\u8bc1\u53ef\u9760\u4ea4\u4ed8\uff0c\u56e0\u6b64\u4e3b\u673a\u4e0d\u9700\u8981\u7ef4\u6301\u590d\u6742\u7684\u8fde\u63a5\u72b6\u6001</li> <li>\u9762\u5411\u62a5\u6587\uff1a\u4e00\u6b21\u4ea4\u4ed8\u4e00\u4e2a\u62a5\u6587\uff0c\u5bf9\u5e94\u7528\u5c42\u7684\u62a5\u6587\u65e2\u4e0d\u5408\u5e76\u4e5f\u4e0d\u62c6\u5206\uff0c\u800c\u662f\u4fdd\u7559\u8fd9\u4e9b\u62a5\u6587\u7684\u8fb9\u754c</li> <li>\u6ca1\u6709\u62e5\u585e\u63a7\u5236\uff0c\u56e0\u6b64\u7f51\u7edc\u4e2d\u51fa\u73b0\u7684\u62e5\u585e\u4e0d\u4f1a\u5bfc\u81f4\u4e3b\u673a\u7684\u53d1\u9001\u901f\u7387\u964d\u4f4e\uff0c\u5141\u8bb8\u62e5\u585e\u65f6\u5019\u4e22\u6570\u636e\u4f46\u662f\u4e0d\u5141\u8bb8\u6570\u636e\u6709\u592a\u5927\u7684\u5ef6\u8fdf<ul> <li>\u53ef\u80fd\u4f1a\u5f15\u53d1\u7f51\u7edc\u7684\u4e25\u91cd\u62e5\u5835</li> </ul> </li> <li>\u652f\u6301\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u3001\u591a\u5bf9\u591a\u7684\u4ea4\u4e92\u901a\u4fe1</li> <li>header\u5f00\u9500\u5c0f\uff0c\u53ea\u67098\u4e2a\u5b57\u8282</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/#64","title":"6.4 \u5e94\u7528","text":"<ul> <li>\u5b9e\u65f6\u4f20\u8f93</li> <li>\u5b9e\u65f6\u4f20\u8f93\u534f\u8baeRTP</li> <li>\u5b9e\u65f6\u4f20\u8f93\u63a7\u5236\u534f\u8baeRTCP</li> <li>\u9632\u6296\u52a8\u548c\u7f13\u51b2\u7684\u64ad\u653e</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C5-%E8%BF%90%E8%BE%93%E5%B1%82/#64-tcpsocket","title":"6.4 \u4f20\u8f93\u63a7\u5236\u534f\u8baeTCP\u4e0esocket","text":"<ul> <li> <p>TCP\u662f\u4e00\u4e2a\u975e\u5e38\u590d\u6742\u7684\u4f20\u8f93\u5c42\u534f\u8bae\uff0c\u5176\u7279\u70b9\u662f\uff1a</p> </li> <li> <p>\u9762\u5411\u8fde\u63a5\uff1a\u4f7f\u7528\u4e4b\u524d\u5fc5\u987b\u5efa\u7acb\u8fde\u63a5\uff0c\u4f7f\u7528\u5b8c\u4e4b\u540e\u5fc5\u987b\u91ca\u653e</p> </li> <li>\u6bcf\u4e00\u6761TCP\u8fde\u63a5\u53ea\u80fd\u6709\u4e24\u4e2a\u7aef\u70b9\uff0c\u6bcf\u4e00\u6761TCP\u8fde\u63a5\u53ea\u80fd\u662f\u70b9\u5bf9\u70b9\u7684</li> <li>\u53ef\u9760\u4ea4\u4ed8\uff0c\u7528TCP\u534f\u8bae\u4f20\u8f93\u7684\u6570\u636e\u65e0\u5dee\u9519\u3001\u4e0d\u4e22\u5931\u3001\u4e0d\u91cd\u590d\u5e76\u4e14\u6309\u987a\u5e8f\u5230\u8fbe</li> <li>\u63d0\u4f9b\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u7528\u7f13\u5b58\u6765\u5b58\u653e\u53cc\u5411\u901a\u4fe1\u7684\u6570\u636e</li> <li> <p>\u9762\u5411\u5b57\u8282\u6d41\uff1a\u5c06\u5e94\u7528\u5c42\u4f20\u4e0b\u6765\u7684\u6570\u636e\u770b\u6210\u65e0\u7ed3\u6784\u7684\u6570\u636e\u6d41</p> </li> <li> <p>TCP\u7684\u8fde\u63a5\uff1a</p> </li> <li> <p>\u8fde\u63a5\u662fTCP\u6700\u57fa\u672c\u7684\u62bd\u8c61\uff0c\u6bcf\u6761TCP\u7684\u8fde\u63a5\u90fd\u6709\u4e24\u4e2a\u7aef\u70b9\uff0c\u6210\u4e3asocket(\u5957\u63a5\u5b57)</p> </li> <li>IP\u5730\u5740+\u7aef\u53e3\u53f7\u5c31\u53ef\u4ee5\u6784\u6210\u4e00\u4e2asocket\uff0c\u6bcf\u6761TCP\u8fde\u63a5\u7531\u4e24\u4e2asocket\u6765\u786e\u5b9a\uff0c\u4e00\u4e2aIP\u5730\u5740\u53ef\u4ee5\u6709\u591a\u4e2a\u5957\u63a5\u5b57</li> <li>berkerley socket\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4e2d\u5b9e\u73b0\u7684socket\u5c01\u88c5\u5e93\uff0c\u63d0\u4f9b\u5982\u4e0b\u64cd\u4f5c</li> </ul> <p> - TCP\u6bb5\u7684\u5934   - TCP\u6bcf\u4e2a\u6bb5\u7684\u8d77\u59cb\u90e8\u5206\u662f\u56fa\u5b9a\u683c\u5f0f\u768420\u5b57\u8282\u7684\u5934\u90e8\uff0c\u800cIP\u5934\u4e5f\u670920\u4e2a\u5b57\u8282\uff0c\u56e0\u6b64\u6570\u636e\u6bb5\u7684\u6700\u5927\u957f\u5ea6\u662f65535-20-20=65495   - \u6e90\u7aef\u53e3\u548c\u76ee\u6807\u7aef\u53e3\u5b57\u6bb5\u8868\u793a\u4e86\u8fde\u63a5\u7684\u672c\u5730\u7aef\u70b9\uff0c\u5404\u53602\u5b57\u8282\uff0cTCP\u7aef\u53e3+IP\u5934\u4e2d\u7684IP\u5730\u5740\u7ec4\u6210\u4e8648\u4f4d\u7684\u552f\u4e00\u7aef\u70b9   - \u5e8f\u53f7\u548c\u786e\u8ba4\u597d\u90fd\u662f4\u5b57\u8282\uff0c\u786e\u8ba4\u53f7\u5236\u5b9a\u7684\u662f\u4e0b\u4e00\u4e2a\u671f\u5f85\u7684\u5b57\u8282\uff0c\u800c\u4e0d\u662f\u5df2\u7ecf\u6b63\u786e\u63a5\u6536\u5230\u7684\u6700\u540e1\u5b57\u8282   - TCP\u7684\u5934\u957f\u5ea6\u8868\u660e\u4e86TCP\u5934\u5305\u542b\u51e0\u4e2a32\u4f4d\u7684\u5b57\uff0c\u56e0\u4e3a\u540e\u9762\u7684\u9009\u9879option\u662f\u53d8\u957f\u7684\uff0c\u5b9e\u9645\u4e0a\u6307\u660e\u4e86\u6570\u636e\u6bb5\u7684\u8d77\u59cb\u5730\u5740\uff0c\u63a5\u7740\u6709\u56db\u4f4d\u7a7a\u4f4d   - 8\u4e2a1bit\u7684\u6807\u5fd7\u4f4d\uff0c\u6709CWR\u3001ECE\u3001URG\u3001ACK\u3001PSH\u3001RST\u3001SYN\u3001FIN   - \u7a97\u53e3\u5927\u5c0f\u3001\u6821\u9a8c\u548c\u3001\u7d27\u6025\u6307\u9488\u7684\u957f\u5ea6\u90fd\u662f1\u5b57\u8282     - \u7a97\u53e3\u5927\u5c0f\u6307\u5b9a\u4e86\u6ed1\u52a8\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u8868\u660e\u4ece\u88ab\u786e\u8ba4\u7684\u5b57\u8282\u7b97\u8d77\u53ef\u4ee5\u53d1\u9001\u591a\u5c11\u4e2a\u5b57\u8282\uff0c\u53ef\u4ee5\u662f0     - \u9009\u9879\u5b57\u6bb5\u63d0\u4f9b\u4e86\u4e00\u79cd\u6dfb\u52a0\u989d\u5916\u8bbe\u65bd\u7684\u9014\u5f84\uff0c\u4e3b\u8981\u9488\u5bf9\u5e38\u89c4\u5934\u8986\u76d6\u4e0d\u5230\u7684\u65b9\u9762\uff0c\u957f\u5ea6\u5fc5\u987b\u662f32\u7684\u500d\u6570</p> <ul> <li>TCP\u8fde\u63a5\u7684\u5efa\u7acb\uff1a\u4e09\u6b21\u63e1\u624b\uff0c\u5373\u53d1\u9001\u8bf7\u6c42\u3001\u6536\u5230\u786e\u8ba4\u3001\u786e\u8ba4\u6536\u5230\u786e\u8ba4\u4e09\u4e2a\u6b65\u9aa4</li> <li>TCP\u7684\u6ed1\u52a8\u7a97\u53e3</li> <li>TCP\u534f\u8bae\u7684\u7a97\u53e3\u7ba1\u7406\u65b9\u5f0f\u662f\u5c06\u6b63\u786e\u63a5\u6536\u6bb5\u548c\u786e\u8ba4\u548c\u63a5\u53d7\u6bb5\u7684\u63a5\u53d7\u7f13\u51b2\u533a\u5206\u914d\u5206\u5f00\u7684</li> <li> <p>\u5f53\u7a97\u53e3\u53d8\u62100\u7684\u65f6\u5019\uff0c\u53d1\u9001\u7aef\u4e0d\u80fd\u50cf\u5f80\u5e38\u4e00\u6837\u53d1\u9001\u6570\u636e\u6bb5\u4e86\uff0c\u6709\u4e24\u79cd\u5904\u7406\u529e\u6cd5\uff1a\u4e00\u79cd\u662f\u6740\u6b7b\u8fdb\u7a0b\u6765\u5b58\u50a8\u7d27\u6025\u7684\u6570\u636e\uff0c\u6216\u8005\u53d1\u9001\u7a97\u53e3\u63a2\u6d4b\u7684\u957f\u5ea6\u4e3a1\u5b57\u8282\u7684\u6bb5\uff0c\u4ee5\u4fbf\u5f3a\u5236\u63a5\u53d7\u6bb5\u91cd\u65b0\u5ba3\u544a\u4e0b\u4e00\u4e2a\u671f\u671b\u7684\u5b57\u8282\u7684\u7a97\u53e3\u5927\u5c0f\uff0c\u53ef\u4ee5\u653e\u7f6e\u7a97\u53e3\u66f4\u65b0\u4e4b\u540e\u6b7b\u9501</p> </li> <li> <p>TCP\u7684\u62e5\u585e\u63a7\u5236</p> </li> <li>TCP\u7ef4\u6301\u4e86\u4e00\u4e2a\u62e5\u585e\u7a97\u53e3\uff0c\u7a97\u53e3\u7684\u5927\u5c0f\u662f\u4efb\u4f55\u65f6\u5019\u53d1\u9001\u7aef\u53ef\u4ee5\u5f80\u7f51\u7edc\u4e2d\u53d1\u9001\u7684\u5b57\u8282\u6570\uff0c\u76f8\u5e94\u7684\u901f\u7387\u5219\u662f\u7a97\u53e3\u5927\u5c0f/\u8fde\u63a5\u7684\u5f80\u8fd4\u65f6\u95f4\uff0cTCP\u6839\u636eAIMD\u89c4\u5219\u6765\u8c03\u6574\u7a97\u53e3\u7684\u5927\u5c0f</li> <li>\u4e1c\u897f\u592a\u591a\u4e86\uff0c\u8bb2\u4e0d\u5b8c\uff0c\u56de\u53bb\u770bxxr\u6559\u6750</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C6-%E5%BA%94%E7%94%A8%E5%B1%82/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc6 \u5e94\u7528\u5c42","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C6-%E5%BA%94%E7%94%A8%E5%B1%82/#6","title":"\u8ba1\u7b97\u673a\u7f51\u7edc6\uff1a\u5e94\u7528\u5c42","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C6-%E5%BA%94%E7%94%A8%E5%B1%82/#chapter6application-layer","title":"Chapter6\uff1aApplication Layer","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C6-%E5%BA%94%E7%94%A8%E5%B1%82/#61-dns","title":"6.1 \u57df\u540d\u7cfb\u7edfDNS","text":"<ul> <li>\u57df\u540d\u7cfb\u7edf(Domain Name System)\u7528\u4e8e\u5c06\u4e3b\u673a\u540d\u5b57\u8f6c\u6362\u6210IP\u5730\u5740</li> <li>DNS\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u57df\u540d\u7cfb\u7edf\uff0c\u662f\u4e00\u4e2a\u8054\u673a\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7cfb\u7edf\uff0c\u5e76\u91c7\u7528C/S\u6a21\u5f0f\uff0c\u5927\u591a\u6570\u57df\u540d\u5728\u672c\u5730\u89e3\u6790\u800c\u5c11\u91cf\u89e3\u6790\u9700\u8981\u4e92\u8054\u7f51\u4e0a\u7684\u901a\u4fe1</li> <li>\u57df\u540d\u5230IP\u5730\u5740\u7684\u89e3\u6790\u662f\u7531\u5206\u5e03\u5728\u4e92\u8054\u7f51\u4e0a\u7684\u8bb8\u591a\u57df\u540d\u670d\u52a1\u7a0b\u5e8f\u5171\u540c\u5b8c\u6210\u7684\uff0c\u57df\u540d\u670d\u52a1\u5668\u5728\u4e13\u95e8\u8bbe\u7f6e\u7684\u8282\u70b9\u4e0a\u8fd0\u884c</li> <li>\u89e3\u6790\u7684\u65f6\u5019\u9700\u8981\u628a\u9700\u8981\u89e3\u6790\u7684\u57df\u540d\u653e\u5728DNS\u8bf7\u6c42\u62a5\u6587\u4e2d\uff0c\u4ee5UDP\u7528\u6237\u6570\u636e\u62a5\u7684\u65b9\u5f0f\u53d1\u9001\u7ed9\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u628a\u5bf9\u5e94\u7684IP\u5730\u5740\u653e\u5728\u56de\u7b54\u62a5\u6587\u4e2d\u8fd4\u56de\uff0c\u5982\u679c\u6ca1\u627e\u5230\u5c31\u9700\u8981\u5411\u522b\u7684\u57df\u540d\u670d\u52a1\u5668\u53d1\u51fa\u8bf7\u6c42</li> <li>\u57df\u540d\uff1a\u5c42\u6b21\u6811\u72b6\u7ed3\u6784</li> <li>\u4ece\u5de6\u5230\u53f3\u57df\u540d\u7ea7\u522b\u9010\u6e10\u63d0\u9ad8\uff0c\u5e76\u4e14\u7528\u5c0f\u6570\u70b9\u9694\u5f00\uff0c\u57df\u540d\u90fd\u7531\u82f1\u6587\u5b57\u6bcd\u548c\u6570\u5b57\u7ec4\u6210\uff0c\u9664\u4e86-\u4ee5\u5916\u4e0d\u80fd\u4f7f\u7528\u5176\u4ed6\u6807\u70b9\u7b26\u53f7</li> <li>\u9876\u7ea7\u57df\u540d\uff1a\u56fd\u5bb6\u9876\u7ea7\u57df\u540d\u5982cn\uff0c\u901a\u7528\u9876\u7ea7\u57df\u540d\u5982com\uff0c\u57fa\u7840\u7ed3\u6784\u57df\u540d\uff0c\u53ea\u6709\u4e00\u4e2aarpa</li> <li>\u57df\u540d\u670d\u52a1\u5668</li> <li>\u91c7\u7528\u5206\u533a\u7684\u65b9\u6cd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e00\u4e2a\u670d\u52a1\u5668\u6240\u7ba1\u8f96\u7684\u8303\u56f4\u53eb\u505a\u533a\uff0c\u4e00\u4e2a\u533a\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u662f\u53ef\u4ee5\u8054\u901a\u7684\uff0c\u6bcf\u4e00\u4e2a\u533a\u8bbe\u7f6e\u76f8\u5e94\u7684\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\uff0c\u7528\u6765\u4fdd\u5b58\u8be5\u533a\u4e2d\u6240\u6709\u4e3b\u673a\u7684\u57df\u540d\uff0c\u533a\u662f\u57df\u7684\u5b50\u96c6</li> <li>\u6839\u57df\u540d\u670d\u52a1\u5668\uff1a\u6700\u9ad8\u5c42\u6b21\u3001\u6700\u91cd\u8981\u7684\u57df\u540d\u670d\u52a1\u5668\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u65e0\u6cd5\u89e3\u6790\u7684\u65f6\u5019\u4f1a\u9996\u5148\u8bf7\u6c42\u6839\u57df\u540d\u670d\u52a1\u5668\uff0c\u91c7\u7528\u4e86\u4efb\u64ad\u6280\u672f</li> <li>\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff1a\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u8be5\u9876\u7ea7\u57df\u540d\u4e0b\u7684\u4e8c\u7ea7\u57df\u540d</li> <li>\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\uff1a\u8d1f\u8d23\u7ba1\u7406\u4e00\u4e2a\u533a\u7684\u57df\u540d\u670d\u52a1\u5668</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\uff0c\u4e5f\u53eb\u9ed8\u8ba4\u57df\u540d\u670d\u52a1\u5668\u548c</li> <li>\u4e3a\u4e86\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u4e3b\u57df\u540d\u670d\u52a1\u5668\u548c\u82e5\u5e72\u4e2a\u8f85\u52a9\u57df\u540d\u670d\u52a1\u5668</li> <li>\u57df\u540d\u89e3\u6790\u7684\u67e5\u8be2</li> <li>\u4e3b\u673a\u5411\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u7684\u67e5\u8be2\u4e00\u822c\u90fd\u662f\u9012\u5f52\u67e5\u8be2\uff0c\u5373\u5982\u679c\u67e5\u4e0d\u5230\uff0c\u5c31\u7531\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u6839\u57df\u540d\u670d\u52a1\u5668\u53d1\u9001\u67e5\u8be2\u8bf7\u6c42\u800c\u4e0d\u662f\u8ba9\u4e3b\u673a\u81ea\u5df1\u8fdb\u884c\u4e0b\u4e00\u6b65\u7684\u67e5\u8be2</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u5411\u6839\u57df\u540d\u670d\u52a1\u5668\u7684\u67e5\u8be2\u662f\u8fed\u4ee3\u67e5\u8be2\uff0c\u5373\u7531\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u4e00\u4e2a\u4e2a\u67e5\u8fc7\u53bb\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u662f\u9012\u5f52\u67e5\u8be2</li> <li>\u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\uff0c\u57df\u540d\u670d\u52a1\u5668\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u4e86\u9ad8\u901f\u7f13\u5b58</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C6-%E5%BA%94%E7%94%A8%E5%B1%82/#62","title":"6.2 \u7535\u5b50\u90ae\u4ef6\u76f8\u5173\u534f\u8bae","text":"<ul> <li>\u4e24\u4e2a\u6700\u91cd\u8981\u7684\u6807\u51c6\uff1a\u7b80\u5355\u90ae\u4ef6\u4f20\u9001\u534f\u8baeSMTP\u548c\u4e92\u8054\u7f51\u6587\u672c\u62a5\u6587\u683c\u5f0f</li> <li>\u4e00\u4e2a\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u6700\u91cd\u8981\u7684\u4e09\u4e2a\u7ec4\u6210\u6784\u4ef6</li> <li>\u7528\u6237\u4ee3\u7406\uff1a\u4e00\u822c\u5c31\u662f\u4e00\u4e2a\u7535\u5b50\u90ae\u4ef6\u5ba2\u6237\u7aef\u8f6f\u4ef6\uff0c\u81f3\u5c11\u9700\u8981\u6709\u64b0\u5199\u3001\u663e\u793a\u3001\u5904\u7406\u3001\u901a\u4fe1\u7b49\u529f\u80fd</li> <li>\u90ae\u4ef6\u670d\u52a1\u5668\uff1a\u5fc5\u987b\u8981\u540c\u65f6\u53ef\u4ee5\u5145\u5f53\u5ba2\u6237\u673a\u548c\u670d\u52a1\u5668</li> <li>\u90ae\u4ef6\u53d1\u9001\u534f\u8baeSMTP\u548c\u90ae\u4ef6\u8bfb\u53d6\u534f\u8baePOP3\uff0c\u90fd\u662f\u4f7f\u7528TCP\u8fde\u63a5\u6765\u4f20\u9001\u90ae\u4ef6</li> <li>\u90ae\u4ef6\u53d1\u9001\u7684\u8fc7\u7a0b\uff1a</li> <li>\u7528\u6237\u4ee3\u7406\u7528SMTP\u5411\u53d1\u9001\u65b9\u90ae\u4ef6\u670d\u52a1\u5668\u7684SMTP\u670d\u52a1\u5668\u5efa\u7acbTCP\u8fde\u63a5\u53d1\u9001</li> <li>\u53d1\u9001\u65b9\u90ae\u4ef6\u670d\u52a1\u5668\u7684SMTP\u5ba2\u6237\u5411\u63a5\u53d7\u65b9\u7684\u90ae\u4ef6\u670d\u52a1\u5668\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u5e76\u53d1\u9001\u7ed9SMTP\u670d\u52a1\u5668</li> <li>\u63a5\u6536\u65b9\u7684POP3\u670d\u52a1\u5668\u8bfb\u53d6\u90ae\u4ef6\u5411\u6536\u4ef6\u4eba\u7684\u7528\u6237\u4ee3\u7406POP3\u5ba2\u6237\u53d1\u9001\u90ae\u4ef6\u7684\u5185\u5bb9</li> <li>\u90ae\u5c40\u534f\u8baePOP3</li> <li>\u975e\u5e38\u7b80\u5355\u4f46\u662f\u529f\u80fd\u6709\u9650\u7684\u90ae\u4ef6\u8bfb\u53d6\u534f\u8bae\uff0c\u4f7f\u7528\u5ba2\u6237\u670d\u52a1\u5668\u7684\u5de5\u4f5c\u65b9\u5f0f</li> <li>\u9700\u8981\u7528\u6237\u8f93\u5165\u9274\u522b\u4fe1\u606f\u4e4b\u540e\u624d\u5141\u8bb8\u5bf9\u90ae\u7bb1\u8fdb\u884c\u8bfb\u53d6</li> <li>\u53ea\u8981\u7528\u6237\u4ecePOP3\u670d\u52a1\u5668\u4e2d\u8bfb\u53d6\u4e86\u90ae\u4ef6\uff0cPOP3\u670d\u52a1\u5668\u5c31\u628a\u8be5\u90ae\u4ef6\u5220\u9664</li> <li>\u7f51\u9645\u62a5\u6587\u5b58\u53d6\u534f\u8baeIMAP</li> <li>\u6bd4POP3\u590d\u6742\u7684\u591a\uff0c\u4e5f\u4f7f\u7528\u5ba2\u6237\u670d\u52a1\u5668\u7684\u65b9\u5f0f\u5de5\u4f5c</li> <li>\u662f\u4e00\u4e2a\u8054\u673a\u534f\u8bae\uff0c\u7528\u6237\u8ba1\u7b97\u673a\u4e0a\u8fd0\u884cIMAP\u7684\u5ba2\u6237\u7a0b\u5e8f\uff0c\u7136\u540e\u548c\u63a5\u6536\u65b9\u7684\u90ae\u4ef6\u670d\u52a1\u5668\u4e0a\u7684IMAP\u670d\u52a1\u5668\u7a0b\u5e8f\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u7535\u8111\u672c\u5730\u64cd\u7eb5\u90ae\u4ef6\u670d\u52a1\u5668\u7684\u90ae\u4ef6</li> <li> <p>\u6700\u5927\u7684\u597d\u5904\u662f\u7528\u6237\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5730\u65b9\u4f7f\u7528\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u968f\u65f6\u8bfb\u53d6\u90ae\u4ef6</p> </li> <li> <p>\u901a\u7528\u4e92\u8054\u7f51\u90ae\u4ef6\u6269\u5145MIME</p> </li> <li>SMTP\u53ea\u80fd\u4f20\u8f93ASCII\u7f16\u7801\u7684\u6587\u672c\u6587\u4ef6\uff0c\u800c\u4e0d\u80fd\u4f20\u9001\u53ef\u6267\u884c\u6587\u4ef6\u6216\u8005\u4e8c\u8fdb\u5236\u5bf9\u8c61\uff0c\u9650\u4e8e\u4f20\u90017\u4f4d\u7684ASCII\u7801\u548c\u5e76\u4e14\u4f1a\u62d2\u7edd\u8d85\u8fc7\u4e00\u5b9a\u957f\u5ea6\u7684\u90ae\u4ef6</li> <li>MIME\u6ca1\u6709\u53d6\u4ee3\u6216\u8005\u6539\u52a8SMTP\uff0c\u800c\u662f\u7ee7\u7eed\u4f7f\u7528\u539f\u6765\u7684\u90ae\u4ef6\u683c\u5f0f\uff0c\u4f46\u662f\u589e\u52a0\u4e86\u90ae\u4ef6\u4e3b\u4f53\u7684\u7ed3\u6784</li> <li>\u8fd9\u4e2a\u5e94\u8be5\u4e86\u89e3\u4e00\u4e0b\u5c31\u597d\uff0c\u4e0d\u7136\u592a\u79bb\u8c31\u4e86</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C6-%E5%BA%94%E7%94%A8%E5%B1%82/#63-world-wide-web","title":"6.3 \u4e07\u7ef4\u7f51 World Wide Web","text":"<ul> <li>\u4e07\u7ef4\u7f51</li> <li>\u662f\u4e00\u4e2a\u5927\u89c4\u6a21\u7684\u3001\u8054\u673a\u5f0f\u7684\u4fe1\u606f\u50a8\u85cf\u6240\uff0c\u4f7f\u7528\u94fe\u63a5\u7684\u65b9\u6cd5\u80fd\u975e\u5e38\u65b9\u4fbf\u8bbf\u95ee\u4e92\u8054\u7f51\u4e0a\u7684\u7ad9\u70b9</li> <li>\u4e07\u7ef4\u7f51\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u8d85\u5a92\u4f53\u7cfb\u7edf\uff0c\u662f\u8d85\u6587\u672c\u7cfb\u7edf\u7684\u6269\u5145</li> <li>\u4e07\u7ef4\u7f51\u4ee5\u5ba2\u6237\u670d\u52a1\u5668\u7684\u65b9\u5f0f\u8fdb\u884c\u5de5\u4f5c\uff0c\u5ba2\u6237\u7a0b\u5e8f\u5411\u670d\u52a1\u5668\u7a0b\u5e8f\u53d1\u51fa\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u7a0b\u5e8f\u53d1\u9001\u56de\u6240\u8981\u7684\u4e07\u7ef4\u7f51\u6587\u6863</li> <li> <p>\u8fd0\u7528\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26URL\u548c\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8baeHTTP\u6765\u6807\u5fd7\u3001\u53d1\u9001\u5404\u7c7b\u6587\u6863</p> </li> <li> <p>\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26URL</p> </li> <li>\u8868\u793a\u4ece\u4e92\u8054\u7f51\u4e2d\u5f97\u5230\u7684\u8d44\u6e90\u4f4d\u7f6e\u548c\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u7684\u65b9\u6cd5</li> <li>\u57fa\u672c\u7684\u683c\u5f0f\u662f\uff1a<code>\u534f\u8bae://\u4e3b\u673a:\u7aef\u53e3/\u8def\u5f84</code> \u4e0d\u533a\u5206\u5927\u5c0f\u5199</li> <li> <p>\u4f7f\u7528HTTP\u534f\u8bae\u7684URL\u5c31\u662f<code>http://\u4e3b\u673a:\u7aef\u53e3/\u8def\u5f84</code></p> </li> <li> <p>HTTP\u534f\u8bae</p> </li> <li>HTTP\u534f\u8bae\u5b9a\u4e49\u4e86\u6d4f\u89c8\u5668\u600e\u4e48\u60f3\u4e07\u7ef4\u7f51\u670d\u52a1\u5668\u8bf7\u6c42\u4e07\u7ef4\u7f51\u6587\u6863\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u5982\u4f55\u628a\u6587\u6863\u4f20\u9001\u7ed9\u670d\u52a1\u5668</li> <li>HTTP\u662f\u9762\u5411\u4e8b\u52a1\u7684\uff0c\u53ef\u4ee5\u4f20\u8f93\u6587\u672c\u3001\u8d85\u6587\u672c\u3001\u58f0\u97f3\u3001\u56fe\u50cf\u7b49\u683c\u5f0f\u7684\u4fe1\u606f</li> <li>\u4f7f\u7528TCP\u4f5c\u4e3a\u8fd0\u8f93\u5c42\u7684\u534f\u8bae\uff0c\u9700\u8981\u5728\u5efa\u7acbTCP\u8fde\u63a5\u4e4b\u540e\u518d\u8fdb\u884c\u53d1\u9001\uff0c\u4fdd\u8bc1\u4e86\u4f20\u8f93\u7684\u53ef\u9760</li> <li>\u6bcf\u6b21\u4ea4\u4e92\u6709\u4e00\u4e2aASCII\u7f16\u7801\u7684\u4e32\u8fdb\u884c\u4ea4\u4e92\uff0c\u5373\u7c7bMIME\u683c\u5f0f</li> <li>HTTP\u534f\u8bae\u662f\u65e0\u72b6\u6001\u7684\uff0c\u5373\u591a\u6b21\u8bbf\u95ee\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u7684\u540c\u4e00\u4e2a\u9875\u9762\uff0c\u670d\u52a1\u5668\u7684\u54cd\u5e94\u662f\u76f8\u540c\u7684</li> <li>\u6301\u7eed\u8fde\u63a5\u7279\u6027<ul> <li>HTTP/1.1\u7684\u6301\u7eed\u8fde\u63a5\u6709\u4e24\u79cd\u5de5\u4f5c\u65b9\u5f0f\uff0c\u5373\u6d41\u6c34\u7ebf\u5f0f\u7684\u548c\u975e\u6d41\u6c34\u7ebf\u5f0f\u7684</li> <li>\u6d41\u6c34\u7ebf\u5f0f\u7684\uff0c\u5ba2\u6237\u6536\u5230HTTP\u54cd\u5e94\u62a5\u6587\u4e4b\u524d\u5c31\u80fd\u63a5\u7740\u53d1\u9001\u65b0\u7684\u8bf7\u6c42\uff0c\u53ef\u4ee5\u8fde\u7eed\u53d1\u9001HTTP\u54cd\u5e94\uff0c\u5ba2\u6237\u8bbf\u95ee\u6240\u6709\u7684\u5bf9\u8c61\u53ea\u9700\u82b1\u4e00\u4e2aRTT\u65f6\u95f4\uff0c\u6d41\u6c34\u7ebf\u7684\u5de5\u4f5c\u65b9\u5f0f\u4f7f\u5f97TCP\u8fde\u63a5\u4e2d\u7684\u7a7a\u95f2\u65f6\u95f4\u51cf\u5c11</li> </ul> </li> <li>HTTP\u7684\u72b6\u6001\u7801</li> </ul> <p>   - HTTP\u7684cache\uff0c\u4e5f\u53eb\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u662f\u4e00\u79cd\u7f51\u7edc\u5b9e\u4f53\uff0c\u5c06\u6700\u8fd1\u7684\u4e00\u4e9b\u8bf7\u6c42\u548c\u54cd\u5e94\u653e\u5728\u672c\u5730\u78c1\u76d8\u4e2d\uff0c\u5982\u679c\u53d1\u73b0\u8fd9\u4e2a\u8bf7\u6c42\u548c\u6682\u65f6\u5b58\u653e\u7684\u8bf7\u6c42\u76f8\u540c\uff0c\u5c31\u8fd4\u56de\u5df2\u7ecf\u5b58\u50a8\u7684\u54cd\u5e94\u800c\u4e0d\u9700\u8981\u6309\u7167URL\u518d\u6b21\u8bbf\u95ee\u8be5\u8d44\u6e90</p> <p> - HTTP\u62a5\u6587\u8bf7\u6c42</p> <ul> <li>HTTP\u7684\u62a5\u6587\u5206\u4e3a\u4e24\u7c7b\uff0c\u8bf7\u6c42\u62a5\u6587\u548c\u54cd\u5e94\u62a5\u6587</li> <li>HTTP\u662f\u9762\u5411\u6587\u672c\u7684\uff0c\u56e0\u6b64\u5728\u62a5\u6587\u4e2d\u7684\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u662fASCII\u7801\u4e32\uff0c\u56e0\u6b64\u5404\u4e2a\u5b57\u6bb5\u7684\u957f\u5ea6\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u6bcf\u4e2a\u62a5\u6587\u6709\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a<ul> <li>\u5f00\u59cb\u884c\uff1a\u7528\u4e8e\u533a\u5206\u662f\u8bf7\u6c42\u62a5\u6587\u8fd8\u662f\u54cd\u5e94\u62a5\u6587\uff0c\u8bf7\u6c42\u62a5\u6587\u4e2d\u53eb\u505a\u8bf7\u6c42\u884c\uff0c\u54cd\u5e94\u62a5\u6587\u4e2d\u53eb\u505a\u72b6\u6001\u884c\uff0c\u4ee5\u56de\u8f66\u6362\u884c\u7ed3\u5c3e</li> <li>\u8bf7\u6c42\u884c\u6709\u65b9\u6cd5\u3001URL\u548cHTTP\u534f\u8bae\u7684\u7248\u672c\uff0c\u65b9\u6cd5\u5c31\u662fGET\u3001POST\u7b49\u7b49</li> <li>\u54cd\u5e94\u62a5\u6587\u4e2d\u7684\u72b6\u6001\u884c\u6709\u7248\u672c\u3001\u72b6\u6001\u7801\u548c\u77ed\u8bed</li> <li>\u9996\u90e8\u884c\uff1a\u53ef\u4ee5\u6709\u82e5\u5e72\u884c\uff0c\u4f20\u8f93\u4e00\u4e9b\u4fe1\u606f\uff0c\u7528\u5b57\u6bb5\u540d+\u7a7a\u683c+value+\u56de\u8f66\u6362\u884c\u7684\u5f62\u5f0f\u5b58\u50a8</li> <li>\u5b9e\u4f53\u4e3b\u4f53\uff1a\u8bf7\u6c42\u4e00\u822c\u6ca1\u6709\uff0c\u54cd\u5e94\u4e2d\u53ef\u80fd\u4f1a\u6709</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C7-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc7 \u7f51\u7edc\u5b89\u5168","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C7-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#7","title":"\u8ba1\u7b97\u673a\u7f51\u7edc7\uff1a\u7f51\u7edc\u5b89\u5168","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C7-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#chapter-7-network-security","title":"Chapter 7: Network Security","text":""},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C7-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#71","title":"7.1 \u5bc6\u7801\u5b66\u548c\u6563\u5217\u51fd\u6570","text":"<ul> <li>\u52a0\u5bc6\u6a21\u578b\uff1a\u4efb\u4f55\u52a0\u5bc6\u6a21\u578b\u7684\u5b89\u5168\u6027\u53d6\u51b3\u4e8e\u5bc6\u94a5\u7684\u957f\u5ea6\uff0c\u4ee5\u53ca\u653b\u7834\u6240\u9700\u7684\u8ba1\u7b97\u91cf</li> </ul> <p> - \u4e24\u7c7b\u5bc6\u7801\u4f53\u5236   - \u5bf9\u79f0\u5bc6\u94a5\u4f53\u5236\uff1a\u52a0\u5bc6\u5bc6\u94a5\u548c\u89e3\u5bc6\u5bc6\u94a5\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u7801\u4f53\u5236     - DES\u662f\u4e00\u79cd\u5206\u7ec4\u5bc6\u7801\uff0c\u7531IBM\u516c\u53f8\u7814\u5236\uff0c\u5b89\u5168\u6027\u66f4\u5f3a\u7684\u6709\u4e09\u91cdDES     - AES\uff08\u9ad8\u7ea7\u52a0\u5bc6\u6807\u51c6\uff09\u7531Joan Daemen\u548cVincent Rijmen\u7814\u5236\u51fa\uff0c\u539f\u540d\u53eb\u505aRijndael\u7b97\u6cd5   - \u516c\u94a5\u5bc6\u7801\u4f53\u5236\uff1a\u4f7f\u7528\u4e0d\u540c\u7684\u52a0\u5bc6\u5bc6\u94a5\u548c\u89e3\u5bc6\u5bc6\u94a5     - RSA\u662fRivest\u3001Shamir\u548cAdleman\u63d0\u51fa\u7684</p> <ul> <li>\u5bc6\u7801\u6563\u5217\u51fd\u6570\uff1a</li> <li>\u5355\u5411\u52a0\u5bc6\uff0c\u8f93\u5165\u957f\u5ea6\u4e0d\u56fa\u5b9a\u4f46\u662f\u8f93\u51fa\u7684\u957f\u5ea6\u56fa\u5b9a</li> <li>\u8981\u627e\u5230\u4e24\u4e2a\u62a5\u6587\u4f7f\u5f97\u5176\u5177\u6709\u76f8\u540c\u7684\u8f93\u51fa\uff0c\u5728\u8ba1\u7b97\u4e0a\u662f\u4e0d\u53ef\u884c\u7684</li> <li>MD5:\u62a5\u6587\u6458\u8981\u7b97\u6cd5\uff0c\u7b97\u6cd5\u9700\u8981\u5c06\u62a5\u6587\u6309\u89c4\u5219\u586b\u5145\u6210512\u7684\u500d\u6570\uff0c\u7136\u540e\u6bcf\u4e2a512\u4f4d\u7684\u5757\u5206\u6210128\u4f4d\uff0c128\u4f4d\u518d\u5206\u621032\u4f4d\u7684\u5c0f\u5757</li> <li>SHA\u662f\u7f8e\u56fdNIST\u7cfb\u7edf\u7684\u6563\u5217\u7b97\u6cd5\uff0c\u4f46\u662f\u7801\u957f\u662f160\u4f4d\uff0c\u6bd4MD5\u66f4\u5b89\u5168</li> <li>\u5bc6\u7801\u653b\u51fb</li> <li>\u91cd\u653e\u653b\u51fbreplay attact\uff1a\u76f4\u63a5\u622a\u83b7\u5bc6\u7801\u62a5\u6587\uff0c\u4e0d\u9700\u8981\u7834\u8bd1\uff0c\u800c\u662f\u4f2a\u88c5\u6210\u53d1\u9001\u65b9\u53d1\u7ed9\u63a5\u6536\u65b9\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0d\u91cd\u6570nonce</li> <li> <p>\u4e2d\u95f4\u4eba\u653b\u51fbman-in-the-middle\uff1a\u6211\u4e5f\u6ca1\u770b\u61c2\uff0c\u5927\u6982\u5c31\u662f\u4e2d\u95f4\u4eba\u628a\u4e0d\u91cd\u6570\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u52a0\u5bc6\u4e4b\u540e\u53d1\u9001\uff0c\u7136\u540e\u5206\u522b\u5411\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u53d1\u9001\u83b7\u53d6\u516c\u94a5\u7684\u8bf7\u6c42</p> </li> <li> <p>\u5bc6\u94a5\u5206\u914d</p> </li> <li>\u7531\u4e8e\u5bc6\u7801\u7b97\u6cd5\u662f\u516c\u5f00\u7684\uff0c\u7f51\u7edc\u7684\u5b89\u5168\u6027\u5c31\u5b8c\u5168\u57fa\u4e8e\u5bc6\u94a5\u7684\u4fdd\u62a4</li> <li>\u5bf9\u79f0\u5bc6\u94a5\u7684\u5206\u914d<ul> <li>\u8bbe\u7acb\u5bc6\u94a5\u5206\u914d\u4e2d\u5fc3KDC\uff0c\u5e38\u7528\u7684\u5bc6\u94a5\u5206\u914d\u534f\u8bae\u662fKerberos V5\uff0c\u4f7f\u7528\u9274\u522b\u670d\u52a1\u5668AS\u548c\u7968\u636e\u6388\u4e88\u670d\u52a1\u5668TGS</li> <li>\u7968\u636e\u6709\u4e00\u5b9a\u7684\u6709\u6548\u671f\uff0c\u8fc7\u671f\u4e86\u5bc6\u94a5\u5c31\u5931\u6548\u4e86\uff0c\u4e0d\u80fd\u88ab\u7528\u4e8e\u957f\u4e45\u7684\u91cd\u653e\u653b\u51fb</li> </ul> </li> <li>\u516c\u94a5\u7684\u5206\u914d<ul> <li>\u4f7f\u7528\u8ba4\u8bc1\u4e2d\u5fc3\u628a\u516c\u94a5\u548c\u5bf9\u5e94\u7684\u5b9e\u4f53\u8fdb\u884c\u7ed1\u5b9a</li> <li>ITU-T\u5236\u5b9a\u4e86X.509\u534f\u8bae\u6807\u51c6\uff0c\u5e76\u5728RFC5280\u4e2d\u7ed9\u51fa\u4e86\u4e92\u8054\u7f51\u516c\u94a5\u57fa\u7840\u7ed3\u6784PKI</li> </ul> </li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C7-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#72","title":"7.2 \u4e92\u8054\u7f51\u5b89\u5168\u534f\u8bae","text":"<ul> <li>IPsec\u534f\u8bae\u65cf</li> <li>\u53ef\u4ee5\u5728IP\u5c42\u63d0\u4f9b\u4e92\u8054\u7f51\u901a\u4fe1\u5b89\u5168\u7684\u534f\u8bae\u65cf\uff0c\u53ef\u4ee5\u5206\u4e3a<ul> <li>IP\u5b89\u5168\u6570\u636e\u62a5\u683c\u5f0f\u7684\u4e24\u4e2a\u534f\u8bae\uff1a\u9274\u522b\u9996\u90e8AH\u534f\u8bae\u548c\u5c01\u88c5\u5b89\u5168\u6709\u6548\u8f7d\u8377ESP\u534f\u8bae</li> <li>\u6709\u5173\u52a0\u5bc6\u7b97\u6cd5\u7684\u4e09\u4e2a\u534f\u8bae</li> <li>\u4e92\u8054\u7f51\u5bc6\u94a5\u4ea4\u6362IKE\u534f\u8bae</li> </ul> </li> <li>IP\u5b89\u5168\u6570\u636e\u62a5\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\uff1a<ul> <li>\u8fd0\u8f93\u65b9\u5f0f\uff1a\u8fd0\u8f93\u5c42\u62a5\u6587\u6bb5\u7684\u524d\u540e\u5206\u522b\u6dfb\u52a0\u82e5\u5e72\u63a7\u5236\u4fe1\u606f\u518d\u52a0\u4e0aIP\u5934\u90e8</li> <li>\u96a7\u9053\u65b9\u5f0f\uff1a\u5728\u539f\u59cb\u7684IP\u6570\u636e\u62a5\u524d\u540e\u6dfb\u52a0\u63a7\u5236\u4fe1\u606f\uff0c\u518d\u52a0\u4e0a\u5fc3\u5f97IP\u9996\u90e8\u6784\u6210\u4e00\u4e2aIP\u5b89\u5168\u6570\u636e\u62a5</li> </ul> </li> <li>\u5b89\u5168\u5173\u8054SA\u662f\u53d1\u9001IP\u5b89\u5168\u6570\u636e\u62a5\u4e4b\u524d\u5728\u6e90\u5b9e\u4f53\u548c\u76ee\u7684\u5b9e\u4f53\u4e4b\u95f4\u521b\u5efa\u4e00\u6761\u7f51\u7edc\u5c42\u7684\u903b\u8f91\u94fe\u63a5\uff0c\u5c06\u65e0\u8fde\u63a5\u7684\u7f51\u7edc\u5c42\u53d8\u6210\u4e86\u5177\u6709\u903b\u8f91\u94fe\u63a5\u7684\u4e00\u4e2a\u5c42\uff0c\u5e76\u4e14\u662f\u5355\u5411\u8fde\u63a5</li> <li>\u8fd0\u8f93\u5c42\u5b89\u5168\u534f\u8bae</li> <li>\u5b89\u5168\u5957\u63a5\u5b57\u5c42SSL\uff1a\u662fNetscape\u63d0\u51fa\u7684\u5b89\u5168\u534f\u8bae\uff0c\u4f5c\u7528\u5728HTTP\u548c\u8fd0\u8f93\u5c42\u4e4b\u95f4\uff0c\u5728TCP\u4e4b\u4e0a\u5efa\u7acb\u4e00\u4e2a\u5b89\u5168\u901a\u9053<ul> <li>\u63d0\u4f9b\u7684\u670d\u52a1</li> <li>SSL\u670d\u52a1\u5668\u9274\u522b\uff0c\u5141\u8bb8\u7528\u6237\u6b63\u5f0f\u670d\u52a1\u5668\u7684\u8eab\u4efd</li> <li>SSL\u5ba2\u6237\u9274\u522b\uff0c\u5141\u8bb8\u670d\u52a1\u5668\u8bc1\u5b9e\u5ba2\u670d\u8eab\u4efd</li> <li>\u52a0\u5bc6SSL\u7ed8\u753b\uff0c\u5bf9\u5ba2\u6237\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u62a5\u6587\u8fdb\u884c\u52a0\u5bc6\uff0c\u5e76\u68c0\u6d4b\u62a5\u6587\u662f\u5426\u88ab\u7be1\u6539</li> <li>\u5de5\u4f5c\u8fc7\u7a0b\uff1a\u534f\u5546\u52a0\u5bc6\u7b97\u6cd5\u3001\u670d\u52a1\u5668\u9274\u522b\u3001\u4f1a\u8bdd\u5bc6\u94a5\u8ba1\u7b97\u3001\u5b89\u5168\u6570\u636e\u4f20\u8f93</li> <li>HTTPs\u662f\u63d0\u4f9b\u5b89\u5168\u670d\u52a1\u7684HTTP\u534f\u8bae\uff0c\u8c03\u7528SSL\u5bf9\u6574\u4e2a\u7f51\u9875\u8fdb\u884c\u52a0\u5bc6</li> </ul> </li> <li>\u8fd0\u8f93\u5c42\u5b89\u5168TLS\uff1a\u57fa\u4e8eSSL\u7684\u6807\u51c6\u5316\u534f\u8bae</li> <li>\u539f\u672c\u8fd8\u6709\u5b89\u5168\u7535\u5b50\u4ea4\u6613SET\u534f\u8bae\uff0c\u4f46\u662f\u5df2\u7ecfout\u4e86</li> <li>\u5e94\u7528\u5c42\u5b89\u5168\u534f\u8bae</li> <li>PGP\u662fZimmerman\u4e8e1995\u5e74\u5f00\u53d1\u7684\u7535\u5b50\u90ae\u4ef6\u7684\u6807\u51c6</li> </ul>"},{"location":"Network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C7-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#73","title":"7.3 \u9632\u706b\u5899\u548c\u5165\u4fb5\u68c0\u6d4b","text":"<ul> <li>\u9632\u706b\u5899\u662f\u4e00\u79cd\u8bbf\u95ee\u63a7\u5236\u6280\u672f\uff0c\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8def\u7531\u5668</li> <li>\u53ef\u4ee5\u7981\u6b62\u4efb\u4f55\u4e0d\u5fc5\u8981\u7684\u901a\u4fe1\uff0c\u53ef\u4ee5\u5b9e\u65bd\u8bbf\u95ee\u63a7\u5236\u7b56\u7565</li> <li>\u9632\u706b\u5899\u5185\u7684\u662f\u53ef\u4fe1\u7684\u7f51\u7edc\uff0c\u5899\u5916\u9762\u662f\u4e0d\u53ef\u4fe1\u7684\u7f51\u7edc</li> <li>\u9632\u706b\u5899\u7684\u4e3b\u8981\u6280\u672f\u5206\u4e3a<ul> <li>\u5206\u7ec4\u8fc7\u6ee4\u8def\u7531\u5668\uff1a\u6309\u7167\u4e00\u5b9a\u7684\u89c4\u5219\u8fdb\u884c\u5206\u7ec4\u8fc7\u6ee4\uff0c\u5bf9\u8fdb\u51fa\u5185\u90e8\u7f51\u7edc\u7684\u5206\u7ec4\u6267\u884c\u8f6c\u53d1\u6216\u8005\u4e22\u5f03</li> <li>\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u5728\u5e94\u7528\u5c42\u901a\u4fe1\u4e2d\u626e\u6f14\u62a5\u6587\u4e2d\u7ee7\u7684\u89d2\u8272\uff0c\u4e00\u79cd\u7f51\u7edc\u5e94\u7528\u9700\u8981\u4e00\u4e2a\u5e94\u7528\u7f51\u5173\uff0c\u6240\u6709\u7684\u8fdb\u51fa\u7f51\u7edc\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u5fc5\u987b\u901a\u8fc7\u5e94\u7528\u7f51\u5173</li> <li>\u5f80\u5f80\u4e24\u79cd\u6280\u672f\u6df7\u5408\u4f7f\u7528</li> </ul> </li> <li>\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edfIDS</li> <li>\u5bf9\u7f51\u7edc\u7684\u5206\u7ec4\u6267\u884c\u6df1\u5ea6\u5206\u7ec4\u68c0\u67e5\uff0c\u5f53\u89c2\u5bdf\u5230\u53ef\u7591\u5206\u7ec4\u7684\u65f6\u5019\u5411\u7f51\u7edc\u7ba1\u7406\u5458\u53d1\u51fa\u8b66\u62a5</li> <li>\u53ef\u4ee5\u68c0\u6d4b\u591a\u79cd\u7f51\u7edc\u653b\u51fb\uff1a\u7f51\u7edc\u6620\u5c04\u3001\u7aef\u53e3\u626b\u63cf\u3001DoS\u653b\u51fb\uff08\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff0c\u5206\u5e03\u5f0f\u62d2\u7edd\u670d\u52a1\u7b80\u79f0DDoS\uff09\u3001\u8815\u866b\u548c\u75c5\u6bd2\u3001\u7cfb\u7edf\u4fee\u6539\u6f0f\u6d1e\u653b\u51fb\u7b49\u7b49</li> <li>\u4e00\u822c\u53ef\u4ee5\u5206\u4e3a\u57fa\u4e8e\u7279\u5f81\u7684\u5165\u4fb5\u68c0\u6d4b\u548c\u57fa\u4e8e\u5f02\u5e38\u7684\u5165\u4fb5\u68c0\u6d4b</li> </ul>"},{"location":"OS/OS1/","title":"Overview","text":"<p>Forked from IsshikiHugh</p> <p>\u5bfc\u8bfb</p> <p>\u672c\u5355\u5143\u4e3b\u8981\u6709\u4e24\u4e2a\u4efb\u52a1\uff1a</p> <ol> <li>\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u4e00\u4e2a\u8f83\u4e3a\u62bd\u8c61\u7684\u4ecb\u7ecd\uff0c\u540c\u65f6\u5efa\u7acb\u8d77\u6574\u95e8\u8bfe\u7a0b\u7684\u6846\u67b6\uff0c\u65b9\u4fbf\u8bfb\u8005\u5728\u4e4b\u540e\u7684\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u80fd\u6709\u4e00\u4e2a\u6bd4\u8f83\u603b\u4f53\u7684\u8ba4\u8bc6\uff0c\u80fd\u5e26\u7740\u76ee\u7684\u53bb\u5b66\u4e60\u5177\u4f53\u7684\u77e5\u8bc6\uff1b</li> <li>\u4ecb\u7ecd\u4e00\u4e9b\u6bd4\u8f83\u57fa\u7840\u7684\u5185\u5bb9\uff0c\u6216\u662f\u4e00\u4e9b\u6bd4\u8f83\u7410\u788e\u3001\u4ec5\u9700\u4e86\u89e3\u7684\u5185\u5bb9\uff1b</li> </ol> <p>\u5728\u6b63\u5f0f\u5f00\u59cb\u6838\u5fc3\u5185\u5bb9\u7684\u5b66\u4e60\u4e4b\u524d\uff0c\u6211\u60f3\u5148\u505a\u4e00\u70b9\u8bf4\u660e\uff0c\u4e5f\u7b97\u662f\u4e00\u70b9\u5173\u4e8e\u5b66\u4e60\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ecf\u9a8c\u4e4b\u8c08\u3002</p> <p>\u201c\u5b9a\u4e49\u4e0d\u5b58\u5728\u4e86\u201d</p> <p>\u533a\u522b\u4e8e\u81ea\u7136\u79d1\u5b66\u7684\u7814\u7a76\u5bf9\u8c61\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u4e00\u4e2a\u5f7b\u5f7b\u5e95\u5e95\u7684\u4eba\u9020\u7269\uff0c\u5176\u5f88\u591a\u6982\u5ff5\u90fd\u5f88\u96be\u754c\u5b9a\u4e00\u4e2a\u660e\u786e\u7684\u754c\u9650\uff0c\u8fd9\u4e5f\u6b63\u662f\u6211\u5728\u5b66\u4e60\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u6700\u9996\u8981\u7684\u95ee\u9898\u3002\u6211\u4f1a\u5c3d\u529b\u7ed9\u51fa\u6211\u8ba4\u4e3a\u66f4\u7cbe\u786e\u7684\u5b9a\u4e49\uff0c\u4f46\u8fd9\u4e2a\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u6240\u4ee5\u6211\u4eec\u5c3d\u91cf\u53ea\u56f4\u7ed5\u5b9a\u4e49\u7684\u4e2d\u5fc3\u8fdb\u884c\u5b66\u4e60\u3002</p>"},{"location":"OS/OS1/#_1","title":"\u64cd\u4f5c\u7cfb\u7edf\u6982\u8ff0","text":"<p>\u5bfc\u8bfb</p> <p>\u672c\u8282\u4e3b\u8981\u5c06\u64cd\u4f5c\u7cfb\u7edf\u5f53\u4f5c\u4e00\u4e2a\u4e0d\u53ef\u62c6\u5206\u7684\u5355\u4f4d\uff0c\u6765\u8ba8\u8bba\u4ec0\u4e48\u662f\u64cd\u4f5c\u7cfb\u7edf\u3002</p>"},{"location":"OS/OS1/#_2","title":"\u4f55\u4e3a\u64cd\u4f5c\u7cfb\u7edf","text":"<p>\u6574\u95e8\u8bfe\u7a0b\u6211\u4eec\u9700\u8981\u89e3\u51b3\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\uff0c\u663e\u7136\u662f\u4ec0\u4e48\u662f\u64cd\u4f5c\u7cfb\u7edf(Operating System, OS)\u3002\u63a5\u4e0b\u6765\u6211\u5c06\u4ece\u4e24\u4e2a\u65b9\u9762\u7b80\u8ff0\u4f55\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u3002</p> \u2460 \u4ece\u804c\u80fd\u4e0a\u770b <p></p> <p>\u4ece\u5176\u804c\u80fd\u4e0a\u770b\uff0c\u6211\u8ba4\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u662f\u4e00\u4e2a\u8d44\u6e90\u7ba1\u7406\u7cfb\u7edf\u3002</p> <p>\u53f3\u56fe\u63cf\u8ff0\u4e86\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u62bd\u8c61\u5c42\u7ea7\uff1a\u81ea\u4e0a\u800c\u4e0b\uff0c\u7528\u6237\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u89e3\u51b3\u95ee\u9898\uff0c\u5e94\u7528\u7a0b\u5e8f\u5411\u64cd\u4f5c\u7cfb\u7edf\u8bf7\u6c42\u8ba1\u7b97\u673a\u8d44\u6e90\uff1b\u81ea\u4e0b\u800c\u4e0a\uff0c\u8ba1\u7b97\u673a\u786c\u4ef6\u4e3a\u8f6f\u4ef6\uff08\u5305\u62ec OS\uff09\u63d0\u4f9b\u4e86\u7269\u8d28\u57fa\u7840\uff0c\u672c\u8d28\u4e0a\uff0c\u786c\u4ef6\u63d0\u4f9b\u4e86\u8ba1\u7b97\u673a\u8d44\u6e90\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u4e2d\u95f4\u5c42\uff0c\u5411\u4e0a\u4e3a\u7528\u6237\u7a0b\u5e8f\u5206\u914d\u6613\u7528\u7684\u8d44\u6e90\uff0c\u5411\u4e0b\u76f4\u63a5\u64cd\u4f5c\u786c\u4ef6\u8d44\u6e90\u7684\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u9700\u8981\u516c\u5e73\u3001\u9ad8\u6548\u5730\u89e3\u51b3\u8d44\u6e90\u4e4b\u95f4\u7684\u51b2\u7a81\u95ee\u9898\u7b49\u7b49\u3002</p> <p>\u5b83\u5c31\u597d\u50cf\u836f\u623f\u67dc\u53f0\uff0c\u5404\u79cd\u836f\u54c1\u5c31\u597d\u50cf\u8ba1\u7b97\u673a\u8d44\u6e90\uff0c\u75c5\u4eba\u63d0\u4f9b\u5904\u65b9\uff0c\u67dc\u53f0\u6536\u5230\u8bf7\u6c42\uff08\u7cfb\u7edf\u8c03\u7528\uff09\u540e\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u5343\u8f9b\u4e07\u82e6\uff08\u5177\u4f53\u4f1a\u9047\u5230\u4ec0\u4e48\u95ee\u9898\u6211\u4eec\u4f1a\u5728\u4e4b\u540e\u7684\u5185\u5bb9\u4e2d\u5b66\u5230\uff09\u66ff\u4f60\u51c6\u5907\u597d\u4f60\u9700\u8981\u7684\u8d44\u6e90\uff0c\u5b8c\u6210\u4f60\u7684\u8bf7\u6c42\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u7684\u8d44\u6e90\u6709\u8fd9\u4e9b\uff1a</p> <ul> <li> <p>\u2460 CPU\uff0c\u7531\u4e8e CPU \u7684\u4e00\u4e2a\u6838(core)\u5728\u7279\u5b9a\u65f6\u523b\u53ea\u80fd\u5904\u7406\u4e00\u4ef6\u4e8b\uff0c\u6240\u4ee5\u201cCPU \u80fd\u591f\u4e3a\u6211\u6240\u7528\u201d\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u8d44\u6e90\uff1b</p> </li> <li> <p>\u2461 \u5185\u5b58\uff0c\u6267\u884c\u7a0b\u5e8f\u79bb\u4e0d\u5f00\u5185\u5b58\uff0c\u7528\u6237\u7a0b\u5e8f\u81ea\u7136\u4e5f\u9700\u8981\u5360\u7528\u4e00\u5b9a\u7684\u5185\u5b58\u6765\u89e3\u51b3\u95ee\u9898\uff1b</p> </li> <li> <p>\u2462 I/O \u8bbe\u5907\uff0c\u6253\u5370\u673a\u4e0d\u80fd\u540c\u65f6\u6253\u5370\u6bdb\u6982\u5386\u5e74\u5377\u548c\u8f6c\u4e13\u4e1a\u7533\u8bf7\u8868\uff1b</p> </li> <li> <p>\u2463\u2026\u2026</p> </li> </ul> <p>\u7c97\u7565\u7684\u6765\u8bf4\uff0c\u672c\u8bfe\u7a0b\u4e4b\u540e\u7684\u5185\u5bb9\u57fa\u672c\u4e0a\u90fd\u662f\u56f4\u7ed5\u8981\u5982\u4f55\u7ef4\u62a4\u548c\u64cd\u4f5c\u5404\u79cd\u8d44\u6e90\u800c\u5c55\u5f00\u7684\u3002</p> \u2461 \u4ece\u5b58\u5728\u4e0a\u770b <p>\u4ece\u5176\u5b58\u5728\u6765\u770b\uff0c\u64cd\u4f5c\u7cfb\u7edf\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u8f6f\u4ef6\u7a0b\u5e8f\uff0c\u662f\u4e00\u4e2a\u4e0d\u505c\u8fd0\u884c\u7740\u7684\uff0c\u7528\u6765\u6267\u884c\u7528\u6237\u7a0b\u5e8f\u7684\u8f6f\u4ef6\u3002</p> <p>\u8fd9\u4e2a\u89d2\u5ea6\u7684\u672c\u8d28\u540c\u65f6\u53cd\u5e94\u4e86\u64cd\u4f5c\u7cfb\u7edf\u6700\u521d\u5b58\u5728\u7684\u76ee\u7684\uff0c\u4e3a\u4e86\u63d0\u9ad8\u8ba1\u7b97\u673a\u8d44\u6e90\u7684\u5229\u7528\u6548\u7387\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u7a0b\u5e8f\u6765\u81ea\u52a8\u5316\u201c\u8ba9\u8ba1\u7b97\u673a\u5b8c\u6210\u4e00\u7cfb\u5217\u7279\u5b9a\u4efb\u52a1\u201d\u8fd9\u4ef6\u4e8b\uff0c\u800c\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u81ea\u52a8\u5316\uff0c\u8fd9\u4e2a\u7a0b\u5e8f\u4e5f\u9700\u8981\u6210\u4e3a\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u201c\u4ee3\u7406\u4eba\u201d\uff0c\u638c\u63e1\u786c\u4ef6\u7684\u6240\u6709\u8d44\u6e90\uff0c\u5e76\u4e14\u8fd9\u4e2a\u201c\u4ee3\u7406\u4eba\u201d\u8fd8\u5f97\u60f3\u65b9\u6cd5\u8ba9\u81ea\u5df1\u597d\u597d\u201c\u6d3b\u7740\u201d\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6700\u57fa\u7840\u6700\u4e2d\u592e\u7684\u90e8\u5206\u662f\u5185\u6838(kernel)\uff0c\u8981\u7ed9\u51fa kernel \u7684\u7cbe\u786e\u5b9a\u4e49\u5f88\u96be\uff0c\u8fd9\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u8bbe\u8ba1\u7684\u7ed3\u6784\u6709\u5173\uff08\u53c2\u8003\u5b8f\u5185\u6838\u548c\u5fae\u5185\u6838\uff09\uff0c\u5b83\u6700\u660e\u663e\u7684\u4e00\u4e2a\u7279\u70b9\u5c31\u662f\u81ea\u8ba1\u7b97\u673a\u5f00\u673a\u540e\u5c31\u4e0d\u505c\u5728\u8fd0\u884c\u3002OS \u548c kernel \u7684\u5173\u7cfb\u5c31\u597d\u50cf\u7b14\u8bb0\u672c\u7535\u8111\u548c\u5b83\u7684\u4e3b\u677f\uff0c\u5982\u679c\u5c06 OS \u4e2d\u7684\u5176\u4ed6\u90e8\u5206\u9664\u53bb\uff0ckernel \u4ecd\u7136\u81ea\u6d3d\uff0c\u4ecd\u7136\u5177\u5907\u5b83\u5e94\u6709\u7684\u5185\u5728\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u5b83\u4ecd\u7136\u5177\u5907\u5bf9\u8d44\u6e90\u8fdb\u884c\u8c03\u5ea6\u7684\u80fd\u529b\uff0c\u53ea\u4e0d\u8fc7\u5b83\u53ef\u80fd\u62ff\u4e0d\u5230\u80fd\u8ba9\u5b83\u8c03\u5ea6\u7684\u8d44\u6e90\u3002\u6211\u5728\u8fd9\u91cc\u907f\u514d\u8c08\u5230 OS \u548c kernel \u7684\u533a\u522b\uff0c\u56e0\u4e3a\u8fd9\u5b9e\u5728\u96be\u4ee5\u8bf4\u6e05\uff0c\u751a\u81f3\u5728\u4e4b\u540e\u7684\u5185\u5bb9\u4e2d\uff0c\u6211\u90fd\u4f1a\u7528 OS \u6765\u4ee3\u66ff kernel \u7684\u6982\u5ff5\u3002</p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u4ece\u4e24\u4e2a\u65b9\u9762\u4e86\u89e3\u4e86\u4ec0\u4e48\u662f\u64cd\u4f5c\u7cfb\u7edf\uff0c\u73b0\u5728\u7528\u4e00\u53e5\u8bfe\u672c\u4e0a\u7684\u8bdd\u6765\u505a\u603b\u7ed3\u3002</p> <p>The common functions of controlling and allocating resources are then brought together into one piece of software: the operating system. --Operating System Concepts (10^th^ edition)</p>"},{"location":"OS/OS1/#_3","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\u76ee\u6807","text":"<p>\u73b0\u5728\u6211\u4eec\u77e5\u9053\u64cd\u4f5c\u7cfb\u7edf\u662f\u4ec0\u4e48\u4e1c\u897f\u4e86\uff0c\u90a3\u4e48\u5728\u6b64\u57fa\u7840\u4e0a\u6211\u4eec\u6316\u6398\u4e00\u4e0b\uff0c\u600e\u6837\u624d\u7b97\u4e00\u4e2a\u597d\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u53d1\u5c55\u65b9\u5411\uff0c\u800c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4e5f\u4f1a\u7b80\u5355\u63d0\u53ca\u4e00\u4e9b\u6211\u4eec\u4e4b\u540e\u4f1a\u6d89\u53ca\u7684\u5185\u5bb9\uff0c\u4ee5\u4f9b\u53c2\u8003\u3002</p> <p>\u9996\u5148\uff0c\u64cd\u4f5c\u7cfb\u7edf\u672c\u8eab\u9700\u8981\u6709\u8f83\u597d\u7684\u53ef\u9760\u6027\u548c\u5b89\u5168\u6027\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684\uff0c\u8fd9\u4e2a\u201c\u4ee3\u7406\u4eba\u201d\u8981\u5c3d\u53ef\u80fd\u8ba9\u81ea\u5df1\u597d\u597d\u201c\u6d3b\u7740\u201d\u3002</p> <ul> <li> <p>\u4e00\u65b9\u9762\u5b83\u9700\u8981\u6709\u826f\u597d\u7684\u5f02\u5e38\u5904\u7406\u673a\u5236\uff08\u901a\u8fc7\u4e2d\u65ad\u673a\u5236\u5b9e\u73b0\uff09\uff0c\u8fd9\u4e2a\u201c\u4ee3\u7406\u4eba\u201d\u9700\u8981\u6709\u5f3a\u5065\u7684\u4f53\u9b44\uff0c\u4e0d\u80fd\u4e00\u522e\u98ce\u5b83\u5c31\u75c5\u5012\u4e86\uff1b</p> </li> <li> <p>\u53e6\u4e00\u65b9\u9762\u5b83\u9700\u8981\u6709\u6743\u9650\u7ba1\u7406\u7cfb\u7edf\uff08\u7279\u6743\u6a21\u5f0f\uff09\uff0c\u4ee5\u5c4f\u853d\u6765\u81ea\u7528\u6237\u7a0b\u5e8f\u7684\u5371\u9669\u884c\u4e3a\uff0c\u7528\u6237\u53ef\u4ee5\u5411\u201c\u67dc\u53f0\u201d\u7d22\u53d6\u6297\u751f\u7d20\uff0c\u4f46\u662f\u7528\u6237\u7d22\u53d6\u5e93\u623f\u94a5\u5319\u65f6\uff0c\u5408\u683c\u7684\u201c\u67dc\u53f0\u201d\u663e\u7136\u4e0d\u80fd\u7b54\u5e94\u8fd9\u4e2a\u8bf7\u6c42\u3002</p> </li> </ul> <p>\u5176\u6b21\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u6709\u8f83\u597d\u7684\u6613\u7528\u6027\uff0c\u5b83\u9700\u8981\u5411\u7528\u6237\u63d0\u4f9b\u7b80\u4fbf\u7684\u670d\u52a1\u4ee5\u8bf7\u6c42\u7cfb\u7edf\u8d44\u6e90\uff0c\u6bd5\u7adf\u64cd\u4f5c\u7cfb\u7edf\u7684\u76ee\u7684\u4e4b\u4e00\u5c31\u662f\u65b9\u4fbf\u7528\u6237\u4f7f\u7528\u7cfb\u7edf\u8d44\u6e90\u2014\u2014\u8fd9\u610f\u5473\u7740\u6211\u4eec\u7684\u201c\u4ee3\u7406\u4eba\u201d\u5f97\u662f\u4e2a\u597d\u4ea4\u6d41\u7684\u4eba\uff0c\u800c\u7528\u6237\u7a0b\u5e8f\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u7684\u9014\u5f84\u662f\u7cfb\u7edf\u8c03\u7528\u3002</p> <p>\u5bbd\u6cdb\u4e00\u70b9\u6765\u8bb2\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u547d\u4ee4\u63a5\u53e3\u548c\u7a0b\u5e8f\u63a5\u53e3\uff0c\u6709\u4e9b\u5730\u65b9\u4e5f\u4f1a\u63d0\u5230\u56fe\u5f62\u7528\u6237\u63a5\u53e3(Graphical User Interface, GUI)\uff0c\u4ee5\u53ca\u547d\u4ee4\u884c\u63a5\u53e3(Command Line Interface, CLI)\uff0c\u4f46\u662f\u6211\u4e2a\u4eba\u4e0d\u662f\u5f88\u559c\u6b22\u8fd9\u4e2a\u5206\u7c7b\u3002</p> <p>\u5f53\u7136\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u662f\u9ad8\u6548\u7684\uff0c\u4ece\u6700\u65e9\u7684\u6279\u5904\u7406\u7cfb\u7edf\u5230\u73b0\u5728\u7684\u5206\u65f6\u7cfb\u7edf\uff08\u64cd\u4f5c\u7cfb\u7edf\u7684\u4efb\u52a1\u6267\u884c\u8bbe\u8ba1\uff09\uff0cCPU \u7684\u5229\u7528\u7387\u5728\u4e0d\u65ad\u63d0\u5347\uff0c\u5468\u8f6c\u65f6\u95f4\u4e5f\u5728\u4e0d\u65ad\u7f29\u77ed\uff0c\u5982\u4eca\u7684\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u5206\u65f6\u6280\u672f\u4e5f\u5b9e\u73b0\u4e86\u4f53\u611f\u4e0a\u7684\u5e76\u884c\uff0c\u63d0\u9ad8\u6548\u7387\u7684\u540c\u65f6\u4e5f\u63d0\u9ad8\u4e86\u7528\u6237\u4f53\u9a8c\u3002</p> <p>\u8fd8\u6709\u4e00\u70b9\u4e0d\u5bb9\u5ffd\u89c6\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\uff08\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u7684\uff09\u516c\u5e73\u6027\uff0c\u5728\u8fdb\u7a0b\u7ba1\u7406\u8fd9\u4e00\u7ae0\u4e2d\u6211\u4eec\u4f1a\u4e86\u89e3\u5230\uff0c\u591a\u8fdb\u7a0b\u8bed\u5883\u4e0b\u6709\u5927\u91cf\u7684\u51b2\u7a81\u95ee\u9898\u9700\u8981\u89e3\u51b3\uff0c\u800c\u6211\u4eec\u5728\u5904\u7406\u8fd9\u4e9b\u51b2\u7a81\u95ee\u9898\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u9965\u997f(starvation)\uff0c\u800c\u64cd\u4f5c\u7cfb\u7edf\u8981\u505a\u7684\u5c31\u662f\u907f\u514d\u9965\u997f\u7684\u51fa\u73b0\uff0c\u5c31\u597d\u50cf\u7e41\u5fd9\u65f6\u6bb5\u7684\u7535\u68af\uff0c\u6211\u4eec\u4e0d\u80fd\u56e0\u4e3a\u4e8c\u697c\u6d41\u91cf\u5f88\u5927\u5c31\u4e0d\u7ba1\u4e09\u697c\u4ee5\u4e0a\u7684\u4eba\u3002</p> <p>\u4e0a\u8ff0\u76ee\u6807\u5927\u591a\u662f\u9488\u5bf9\u4f7f\u7528\u8005\u800c\u8a00\u7684\uff0c\u90a3\u4e48\u5bf9\u4e8e\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u3001\u6613\u7ef4\u62a4\u6027\u7b49\u4e5f\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002\u4e0d\u540c\u7684\u8bbe\u8ba1\u601d\u8def\u9020\u5c31\u4e86\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u7ed3\u6784\uff0c\u5404\u79cd\u8bbe\u8ba1\u4e5f\u5404\u81ea\u6709\u5404\u81ea\u7684\u4e3b\u6218\u573a\uff0c\u5173\u4e8e\u8fd9\u4e9b\u5185\u5bb9\uff0c\u6211\u4eec\u4f1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ed3\u6784\u8bbe\u8ba1\u8fd9\u4e00\u90e8\u5206\u66f4\u8be6\u7ec6\u5730\u4ecb\u7ecd\u3002</p> <p>\u8fd8\u6709\u8bb8\u591a\uff0c\u4f8b\u5982\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\u8981\u5c3d\u53ef\u80fd\u5229\u7528\u786c\u4ef6\u8d44\u6e90\u7b49\uff0c\u4f46\u5e76\u4e0d\u662f\u6211\u4eec\u5728\u672c\u8282\u60f3\u8981\u8ba8\u8bba\u7684\u91cd\u70b9\uff0c\u6240\u6709\u5c31\u63a0\u8fc7\u4e86\u3002\u4e0a\u8ff0\u89c2\u70b9\u5e76\u4e0d\u5168\u9762\u4e5f\u4e0d\u4e00\u5b9a\u5b8c\u5168\u6b63\u786e\uff0c\u6709\u4e00\u5927\u90e8\u5206\u90fd\u662f\u6211\u7684\u4e2a\u4eba\u7406\u89e3\uff0c\u8bf7\u8bfb\u8005\u8fa8\u8bc1\u5730\u770b\u5f85\uff0c\u5982\u679c\u6709\u9519\u8bef\u8bf7\u52a1\u5fc5\u544a\u8bc9\u6211\uff01</p>"},{"location":"OS/OS1/#_4","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u6574\u4f53\u8bbe\u8ba1","text":"<p>\u5bfc\u8bfb</p> <p>\u672c\u8282\u4e3b\u8981\u5c31\u4e00\u4e9b\u5173\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6574\u4f53\u8bbe\u8ba1\u7684\u95ee\u9898\u505a\u4e00\u4e9b\u8ba8\u8bba\uff0c\u4ece\u4e00\u4e2a\u76f8\u5bf9\u6bd4\u8f83\u9ad8\u7684\u89d2\u5ea6\u8c08\u4e00\u8c08\u4e00\u4e9b\u9876\u5c42\u8bbe\u8ba1\u3002</p> <ul> <li> <p>User:</p> <ul> <li>User interface(CLI, GUI)</li> <li>Program execution</li> <li>I/O operations</li> <li>File-system manipulation</li> <li>Communications</li> <li>Error detection</li> </ul> </li> <li> <p>System</p> <ul> <li>Resource allocation</li> <li>Accounting</li> <li>Protection and security</li> </ul> </li> </ul>"},{"location":"OS/OS1/#_5","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u67b6\u6784","text":"<p>\u867d\u7136\u64cd\u4f5c\u7cfb\u7edf\u672c\u8eab\u662f\u8f6f\u4ef6\uff0c\u4f46\u662f\u5b83\u6bd5\u7adf\u662f\u4e0e\u786c\u4ef6\u7d27\u5bc6\u5173\u8054\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u662f\u4f1a\u6d89\u53ca\u5230\u4e00\u4e9b\u5173\u4e8e\u786c\u4ef6\u7684\u5185\u5bb9\uff0c\u8fd9\u91cc\u7b80\u5355\u6d89\u53ca\u4e00\u4e9b\u5173\u4e8e\u8ba1\u7b97\u673a\u7cfb\u7edf\u67b6\u6784\u7684\u5185\u5bb9\u3002</p> \u6982\u5ff5\u8fa8\u6790 <p> \u540d\u8bcd \u5b9a\u4f4d CPU \u6267\u884c\u6307\u4ee4\u7684\u786c\u4ef6 Core CPU \u7684\u57fa\u7840\u8ba1\u7b97\u5355\u5143 Multi-core \u4e00\u4e2a CPU \u4e0a\u6709\u591a\u4e2a core Processor \u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a CPU \u7684\u82af\u7247 Multi-processor \u591a\u4e2a processor </p> <p>\u6839\u636e\u5904\u7406\u5668\u7684\u6570\u91cf\u548c\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u6211\u4eec\u8fd9\u91cc\u4ecb\u7ecd\u4e09\u79cd\u8ba1\u7b97\u673a\u7cfb\u7edf\u67b6\u6784\uff1a\u5355\u5904\u7406\u5668\u7cfb\u7edf\u3001\u591a\u5904\u7406\u5668\u7cfb\u7edf\u3001\u96c6\u7fa4\u7cfb\u7edf\u3002</p> \u2460 \u5355\u5904\u7406\u5668\u7cfb\u7edf(single-processor system) <p>\u4e66\u4e2d\u7ed9\u51fa\u7684\u5173\u4e8e\u5355\u5904\u7406\u5668\u7cfb\u7edf\u7684\u5b9a\u4e49\u662f\uff0c\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u901a\u7528\u5904\u7406\u5668(general-purpose processor)\uff0c\u5e76\u4e14\u8fd9\u4e2a processor \u53ea\u6709\u4e00\u4e2a\u6838(core)\u3002\u4f46\u5b83\u53ef\u4ee5\u6709\u82e5\u5e72\u4e13\u7528\u5904\u7406\u5668(special-purpose processor)\uff0c\u7528\u6765\u6267\u884c\u4e00\u4e9b\u7279\u5b9a\u7684\u6307\u4ee4\uff0c\u800c\u8fd9\u4e9b\u4e13\u7528\u5904\u7406\u5668\u5e76\u4e0d\u8fd0\u884c\u7ebf\u7a0b\u3002</p> \u2461 \u591a\u5904\u7406\u5668\u7cfb\u7edf(multiprocessor system) <p>\u591a\u5904\u7406\u5668\u7cfb\u7edf\u662f\u6307\u6709\u591a\u4e2a\u5355\u6838\u901a\u7528\u5904\u7406\u5668\u7684\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u5904\u7406\u5668\u5171\u4eab\u4e00\u5757\u4e3b\u5185\u5b58\uff0c\u5b83\u4eec\u901a\u8fc7\u603b\u7ebf\u6216\u4ea4\u6362\u7f51\u7edc\u8fde\u63a5\u5728\u4e00\u8d77\u3002</p> <p>\u663e\u800c\u6613\u89c1\u7684\u662f\uff0c\u589e\u52a0\u4e86\u5904\u7406\u5668\u7684\u6570\u91cf\u80fd\u591f\u589e\u52a0\u541e\u5410\u91cf(throughput)\uff0c\u5373\u5355\u4f4d\u65f6\u95f4\u5185\u5904\u7406\u7684\u4efb\u52a1\u6570\u91cf\uff0c\u4f46\u662f\u8fd9\u4e2a\u589e\u52a0\u5e76\u4e0d\u662f\u7ebf\u6027\u7684\uff0c\u56e0\u4e3a\u5904\u7406\u5668\u4e4b\u95f4\u7684\u901a\u4fe1\u4e5f\u9700\u8981\u65f6\u95f4\uff0c\u800c\u4e14\u8fd8\u4f1a\u6709\u4e00\u4e9b\u989d\u5916\u7684\u5f00\u9500\u3002</p> \u76f8\u5173\u9605\u8bfb <ul> <li> <p>\u5bf9\u79f0\u591a\u5904\u7406(SMP) | Wikipedia\uff1b</p> <p></p> </li> <li> <p>\u975e\u4e00\u81f4\u5185\u5b58\u8bbf\u95ee(NUMA) | Wikipedia\uff1b</p> <p></p> </li> </ul> <p>\u4f46\u662f multi-core \u7684\u8bbe\u8ba1\u5728\u901f\u5ea6\u548c\u6548\u80fd\u4e0a\u90fd\u66f4\u80dc\u4e00\u7b79\uff0c\u56e0\u4e3a on-chip \u7684\u901a\u4fe1\u6bd4 between-chip \u7684\u901a\u4fe1\u66f4\u5feb\uff0c\u800c\u4e14\u66f4\u7701\u7535\u3002</p> \u2462 \u96c6\u7fa4\u7cfb\u7edf(cluster system) <p> </p> <p>\u96c6\u7fa4\u7cfb\u7edf\u901a\u8fc7\u5197\u4f59\u5b9e\u73b0\u9ad8\u53ef\u7528\u670d\u52a1\uff0c\u901a\u8fc7\u5e76\u884c\u5b9e\u73b0\u9ad8\u6027\u80fd\u8ba1\u7b97\uff0c\u5b83\u662f\u7531\u591a\u4e2a\u5404\u81ea\u72ec\u7acb\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u4f5c\u4e3a\u8282\u70b9(node)\uff0c\u901a\u8fc7\u9ad8\u901f\u901a\u4fe1\u7f51\u7edc\u4e92\u76f8\u8fde\u63a5\u5f62\u6210\u7684\u3002</p> <p>\u96c6\u7fa4\u4e5f\u5206\u5bf9\u79f0\u548c\u4e0d\u5bf9\u79f0\u4e24\u79cd\uff0c\u5bf9\u79f0\u96c6\u7fa4\u7684\u5404\u4e2a\u8282\u70b9\u4e92\u76f8\u76d1\u7763\uff0c\u800c\u4e0d\u5bf9\u79f0\u7684\u96c6\u7fa4\u5219\u5b58\u5728\u4e00\u79cd\u7c7b\u4f3c\u201c\u66ff\u8865\u201d\u7684\u4e1c\u897f\uff0c\u7531\u201c\u66ff\u8865\u201d\u53bb\u76d1\u7763\u5de5\u4f5c\u4e2d\u7684\u8282\u70b9\uff0c\u5f53\u5de5\u4f5c\u4e2d\u7684\u8282\u70b9\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u5c31\u7531\u201c\u66ff\u8865\u201d\u6765\u63a5\u66ff\u5b83\u7684\u5de5\u4f5c\u3002</p>"},{"location":"OS/OS1/#_6","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u4efb\u52a1\u6267\u884c\u8bbe\u8ba1","text":"<p>\u524d\u9762\u6211\u4eec\u8bf4\u8fc7\uff0c\u64cd\u4f5c\u7cfb\u7edf\u88ab\u7528\u6765\u300c\u81ea\u52a8\u5316\u201c\u8ba9\u8ba1\u7b97\u673a\u5b8c\u6210\u4e00\u7cfb\u5217\u7279\u5b9a\u4efb\u52a1\u201d\u300d\u7684\u3002\u4e00\u5f00\u59cb\u8fd9\u4ef6\u4e8b\u6bd4\u8f83\u7b80\u5355\uff0c\u53ea\u9700\u8981\u50cf\u961f\u5217\u4e00\u6837\uff0c\u4e00\u4e2a\u4e00\u4e2a\u7684\u6267\u884c\u5c31\u884c\uff0c\u4f46\u662f\u6162\u6162\u7684\u968f\u7740\u8ba1\u7b97\u673a\u5e94\u7528\u8303\u56f4\u7684\u6269\u5927\u4ee5\u53ca\u5404\u79cd\u9700\u6c42\u7684\u51fa\u73b0\uff0c\u8fd9\u79cd\u8bbe\u8ba1\u5c31\u4e0d\u592a\u5408\u7406\u4e86\u3002\u6309\u7167\u53d1\u5c55\u9636\u6bb5\u6f14\u8fdb\uff0c\u6211\u4eec\u5212\u5206\u51fa\u4e24\u4e2a\u9636\u6bb5\u4e09\u4e2a\u8bbe\u8ba1\uff1a\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf(batch processing system)\u3001\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf(multiprogramming batch processing system)\u548c\u5206\u65f6\u7cfb\u7edf(time sharing systems)\u3002</p> <p></p> \u2460 \u6279\u5904\u7406\u7cfb\u7edf\u9636\u6bb5 <p>\u6700\u65e9\u64cd\u4f5c\u7cfb\u7edf\u6267\u884c\u4efb\u52a1\u90fd\u9700\u8981\u4eba\u5de5\u624b\u52a8\u5e72\u9884\uff0c\u4f46\u662f\u8ba1\u7b97\u673a\u6267\u884c\u4efb\u52a1\u7684\u901f\u5ea6\u4e0e\u4eba\u5de5\u5e72\u9884\u7684\u901f\u5ea6\u76f8\u5dee\u592a\u5927\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\u4eba\u5de5\u901f\u5ea6\u4e25\u91cd\u9650\u5236\u4e86\u8ba1\u7b97\u673a\u7684\u5de5\u4f5c\u6548\u7387\uff0c\u4e8e\u662f\u64cd\u4f5c\u7cfb\u7edf\u5f00\u59cb\u51fa\u73b0\uff0c\u5176\u4e2d\u4e00\u4e2a\u6bd4\u8f83\u539f\u59cb\u7684\u5b9e\u73b0\u5c31\u662f\u6279\u5904\u7406\u7cfb\u7edf\u3002\uff08\u4f46\u4e0d\u662f\u6700\u65e9\uff0c\u4e4b\u524d\u8fd8\u6709\u8131\u673a\u5904\u7406\u4e4b\u7c7b\u7684\u4e1c\u897f\u3002\uff09</p> \u2776 \u5355\u9053\u6279\u5904\u7406\u9636\u6bb5 <p>\u6309\u7167\u64cd\u4f5c\u7cfb\u7edf\u53d1\u5c55\u8fdb\u7a0b\uff0c\u6211\u4eec\u9996\u5148\u4ecb\u7ecd\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf(Batch Processing)\u3002</p> <p>\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf\u6709\u4e24\u4e2a\u5173\u952e\u8bcd\uff0c\u201c\u6279\u5904\u7406\u201d\u548c\u201c\u5355\u9053\u201d\u3002</p> <p>\u201c\u6279\u5904\u7406\u201d\u6307\u7684\u662f\uff0c\u7cfb\u7edf\u6267\u884c\u7684\u4efb\u52a1\u662f\u6210\u6279\u7684\uff0c\u82e5\u5e72\u4efb\u52a1\u88ab\u4f5c\u4e3a\u4e00\u6574\u6279\u4ea4\u4ed8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u3002\u5728\u5177\u4f53\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u81ea\u52a8\u6309\u987a\u5e8f\u4e32\u884c(serial)\u6267\u884c\u8fd9\u4e9b\u4efb\u52a1\u3002</p> <p>\u800c\u201c\u5355\u9053\u201d\u6307\u7684\u662f\uff0c\u4e00\u6bb5\u65f6\u95f4\u5185\u5185\u5b58\u4e2d\u53ea\u6709\u4e00\u9053\u7a0b\u5e8f\u5728\u8fd0\u884c\uff0c\u7cfb\u7edf\u53ea\u5904\u7406\u4e00\u9879\u4efb\u52a1\uff0c\u5728\u8fd9\u4e2a\u4efb\u52a1\u7ed3\u675f\u4e4b\u524d\uff0c\u4e0d\u4f1a\u5207\u6362\u5230\u5176\u4ed6\u4efb\u52a1\u3002</p> <p>\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf\u521d\u6b65\u5b9e\u73b0\u4e86\u4e00\u79cd\u201c\u81ea\u52a8\u5316\u201d\uff0c\u6781\u5927\u51cf\u5c11\u4e86\u4eba\u5de5\u64cd\u4f5c\u901f\u5ea6\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u7684\u5f71\u54cd\u3002\u4f46\u5b83\u5b58\u5728\u4e00\u4e2a\u975e\u5e38\u660e\u663e\u7684\u95ee\u9898\uff1a\u7531\u4e8e\u5f53\u524d\u4efb\u52a1\u7ed3\u675f\u4e4b\u524d\u4e0d\u4f1a\u5207\u6362\u5230\u5176\u5b83\u4efb\u52a1\uff0c\u6240\u4ee5\u5f53\u5f53\u524d\u4efb\u52a1\u51fa\u73b0 I/O \u8bf7\u6c42\u65f6\uff0cCPU \u5c31\u9700\u8981\u7b49\u5f85 I/O \u5b8c\u6210\u3002\u6211\u4eec\u77e5\u9053 I/O \u64cd\u4f5c\u662f\u975e\u5e38\u8017\u65f6\u7684\uff0c\u66f4\u4e25\u91cd\u7684\u662f\u4f8b\u5982\u7b49\u5f85\u952e\u76d8\u8f93\u5165\u8fd9\u79cd\u9700\u8981\u4eba\u5de5\u53c2\u4e0e\u7684 I/O\uff0c\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf\u4ecd\u7136\u6ca1\u6cd5\u907f\u514d\u8fd9\u79cd\u4eba\u5de5\u64cd\u4f5c\u5bf9\u8ba1\u7b97\u673a\u6267\u884c\u6548\u7387\u7684\u5f71\u54cd\uff0c\u8fd9\u5c31\u5bfc\u81f4 CPU \u4f1a\u957f\u65f6\u95f4\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u800c\u8ba9 CPU \u957f\u65f6\u95f4\u7a7a\u95f2\u8fd9\u4ef6\u4e8b\uff0c\u662f\u4e0d\u88ab\u63a5\u53d7\u7684\u3002</p> \u2777 \u591a\u9053\u6279\u5904\u7406\u9636\u6bb5 <p>\u56e0\u6b64\uff0c\u4e3a\u4e86\u4e0d\u8ba9 CPU \u95f2\u4e0b\u6765\uff0c\u4e00\u4e2a\u7b26\u5408\u76f4\u89c9\u7684\u60f3\u6cd5\u5c31\u662f\u8ba9\u5b83\u5148\u53bb\u505a\u4e0b\u4e00\u4ef6\u4e8b\uff0c\u5c31\u597d\u50cf\u4ed3\u5e93\u6b63\u5728\u6536\u96c6\u4e0a\u4e00\u4e2a\u75c5\u4eba\u6240\u9700\u8981\u7684\u836f\u54c1\u7684\u65f6\u5019\uff0c\u67dc\u53f0\u53ef\u4ee5\u5148\u53bb\u5904\u7406\u4e0b\u4e00\u4e2a\u75c5\u4eba\u7684\u8bf7\u6c42\u3002\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf(multiprogramming batch processing system)\u5e94\u8fd0\u800c\u751f\u3002</p> <p>\u4ece\u540d\u5b57\u4e0a\u6765\u770b\uff0c\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf\u5389\u5bb3\u5728\u8fd9\u4e2a\u201c\u591a\u9053(multiprogramming)\u201d\uff0c\u5373\u4e00\u6bb5\u65f6\u95f4\u5185\u5185\u5b58\u4e2d\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u8fdb\u7a0b\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u5728\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf\u4e2d\uff0c\u5f53\u524d\u4efb\u52a1\u53d1\u751f IO \u8bf7\u6c42\u65f6\uff0cCPU \u8f6c\u800c\u53bb\u6267\u884c\u5176\u5b83\u4efb\u52a1\uff0c\u4ee5\u6b64\u6765\u5b9e\u73b0\u5c3d\u91cf\u8ba9 CPU \u59cb\u7ec8\u5728\u5de5\u4f5c\u72b6\u6001\u3002\u56e0\u6b64\uff0c\u5b8f\u89c2\u4e0a\u6765\u770b\uff0c\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u540c\u65f6\u6267\u884c\u82e5\u5e72\u4efb\u52a1\uff08\u5728\u4efb\u52a1 A \u5b8c\u6210\u4e4b\u524d\u4efb\u52a1 B \u4e5f\u53ef\u80fd\u5f00\u59cb\u4e86\uff09\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u5e76\u53d1(concurrency)\uff08\u6ce8\u610f\uff0c\u5e76\u53d1\u4e0e\u5e76\u884c\u7684\u6982\u5ff5\u5e76\u4e0d\u4e00\u81f4^1\uff09\uff1b\u4f46\u5728\u5fae\u89c2\u4e0a\uff0c\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf\u4ecd\u7136\u662f\u987a\u5e8f\u4e32\u884c\u7684\uff0c\u53ea\u4e0d\u8fc7\u533a\u522b\u4e8e\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf\u4ee5\u5b8c\u6574\u7684\u4efb\u52a1\u4f5c\u4e3a\u4efb\u52a1\u5355\u5143\uff0c\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf\u662f\u5c06\u5b8c\u6574\u4efb\u52a1\u6309\u7167 I/O \u7684\u53d1\u751f\u505a\u5212\u5206\uff0c\u4ee5\u8fd9\u4e9b\u5212\u5206\u540e\u7684\u90e8\u5206\u4efb\u52a1\u4f5c\u4e3a\u4efb\u52a1\u5355\u5143\u8fdb\u884c\u987a\u5e8f\u4e32\u884c(serial)\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u7528\u7518\u7279\u56fe\u6765\u53ef\u89c6\u5316\u591a\u9053\u6279\u5904\u7406\u7cfb\u7edf\u7684\u7b56\u7565\uff08\u4e00\u79cd\u5e38\u89c1\u7684\u9898\u578b\uff09\u3002\u4ee5\u4e0b\u9762\u7684\u9898\u76ee\u4e3a\u4f8b\uff0c\u6211\u4eec\u6765\u5b9e\u8df5\u4e00\u4e0b\u3002</p> \ud83c\udf30 <p>\u9898\u9762</p> <p>\u73b0\u5728\u6709\u4e24\u4e2a\u7a0b\u5e8f A \u548c B\uff0c\u4ee5\u53ca\u4e24\u4e2a\u5206\u522b\u72ec\u7acb\u7684\u8bbe\u5907 X \u548c Y\uff0c\u4e14\u6211\u4eec\u53ea\u6709\u4e00\u4e2a CPU\uff1a</p> <ul> <li>A \u9700\u8981\u987a\u5e8f\u4f7f\u7528\u5982\u4e0b\u8d44\u6e90\uff1aCPU: 10s, X: 5s, CPU: 5s, Y: 10s, CPU: 10s</li> <li>B \u9700\u8981\u987a\u5e8f\u4f7f\u7528\u5982\u4e0b\u8d44\u6e90\uff1aX: 10s, CPU: 10s, Y: 5s, CPU: 5s, Y: 10s </li> </ul> <p>\u8bf7\u8ba8\u8bba\uff1a</p> <ol> <li>\u5728\u5355\u9053\u7a0b\u5e8f\u73af\u5883\u4e0b\u5148\u6267\u884c A \u518d\u6267\u884c B\uff0cCPU \u7684\u5229\u7528\u7387\u662f\u591a\u5c11\uff1f</li> <li>\u5728\u591a\u9053\u7a0b\u5e8f\u73af\u5883\u4e0b\uff0cCPU \u7684\u5229\u7528\u7387\u662f\u591a\u5c11\uff1f\u8bf7\u7ed9\u51fa\u7518\u7279\u56fe\u3002</li> </ol> \u89e3\u6790 <p>\u5728\u5355\u9053\u7a0b\u5e8f\u4e0b\u6267\u884c\uff0c\u5373\u6309\u987a\u5e8f\u6267\u884c A \u548c B\uff0cCPU \u7684\u5229\u7528\u7387\u5373\u5b9e\u9645 CPU \u4f7f\u7528\u65f6\u95f4\u9664\u4ee5\u5b8c\u6210\u4efb\u52a1\u7684\u603b\u65f6\u95f4\uff0c\u56e0\u6b64\uff1a</p> \\[ U = \\frac{(10+5+10)+(10+5)}{(10+5+5+10+10)+(10+10+5+5+10)} = \\frac{40}{80} = 50\\% \\] <p>\u800c\u5728\u591a\u9053\u7a0b\u5e8f\u73af\u5883\u4e0b\uff0c\u6211\u4eec\u5f97\u5230\u5982\u4e0b\u7518\u7279\u56fe\uff1a</p> <p>  \u84dd/CPU\uff0c\u7eff/X\uff0c\u9ec4/Y\u3002 </p> <p>\u8981\u70b9\u5c31\u662f\u7eb5\u5411\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u540c\u4e00\u4e2a\u8d44\u6e90\uff0c\u4f8b\u5982 18s \u65f6\u4e0d\u80fd A \u548c B \u90fd\u7528 CPU\uff0c\u6240\u4ee5 A \u9700\u8981\u7b49 B \u7528\u5b8c CPU \u518d\u4f7f\u7528\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u518d\u6765\u7edf\u8ba1 CPU \u7684\u5229\u7528\u7387\uff1a</p> \\[ U = \\frac{10+10+5+5+10}{45} = \\frac{40}{45} = 88.89\\% \\] <p>\u901a\u8fc7\u8fd9\u9053\u9898\u6211\u4eec\u4e5f\u53ef\u4ee5\u53d1\u73b0\uff0c\u591a\u9053\u7a0b\u5e8f\u8bbe\u8ba1\u6280\u672f\u5bf9 CPU \u5229\u7528\u7387\u7684\u63d0\u5347\u6709\u591a\u9ad8\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u4ece\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u7684\u5206\u6bcd\u770b\u51fa\u5176\u5bf9\u7a0b\u5e8f\u541e\u5410\u91cf\u7684\u63d0\u5347\u6709\u591a\u9ad8\u3002</p> <p>\u591a\u9053\u6279\u5904\u7406\u89e3\u51b3\u4e86\u5355\u9053\u6279\u5904\u7406\u7cfb\u7edf\u53ef\u80fd\u8ba9 CPU \u95f2\u7f6e\u4e0b\u6765\u7684\u95ee\u9898\uff08\u5f53\u7136\u524d\u63d0\u662f\u6709\u4efb\u52a1\u8ba9\u5b83\u505a\uff09\uff0c\u63d0\u9ad8\u4e86 CPU \u7b49\u8d44\u6e90\u7684\u5229\u7528\u7387\uff0c\u589e\u52a0\u4e86\u541e\u5410\u91cf\uff0c\u4f46\u662f\u7531\u4e8e\u6d89\u53ca\u5230\u4e86\u8fdb\u7a0b\u7684\u8c03\u5ea6\u95ee\u9898\uff0c\u6240\u4ee5\u5b9e\u9645\u5b9e\u73b0\u4f1a\u590d\u6742\u4e00\u4e9b\u3002\u5177\u4f53\u7684\u5185\u5bb9\u6211\u4eec\u4f1a\u5728\u8fdb\u7a0b\u7ba1\u7406\u8fd9\u4e00\u7ae0\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u3002</p> <p>\u4f46\u662f\u65e0\u8bba\u5355\u9053\u8fd8\u662f\u591a\u9053\uff0c\u6279\u5904\u7406\u7cfb\u7edf\u5e76\u4e0d\u9002\u5408\u4f5c\u4e3a\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002\u5b83\u4eec\u6700\u5927\u7684\u95ee\u9898\u5c31\u662f\u5b83\u7684\u4ea4\u4e92\u6027\u975e\u5e38\u5dee\u3002\u7528\u6237\u7ed9\u5b9a\u4e00\u5b9a\u6279\u6b21\u7684\u4efb\u52a1\uff0c\u7136\u540e\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8c03\u6574\u8fd9\u4e00\u6279\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f\uff0c\u6700\u7ec8\u5b8c\u6210\u8fd9\u6279\u4efb\u52a1\uff0c\u7136\u800c\u5728\u8fd9\u6bb5\u65f6\u95f4\u91cc\uff0c\u7528\u6237\u5c31\u6ca1\u6cd5\u518d\u7528\u8ba1\u7b97\u673a\u505a\u5176\u5b83\u4e8b\u60c5\u4e86\uff0c\u540c\u65f6\u4f60\u4e5f\u6ca1\u6cd5\u4e3b\u52a8\u63a7\u5236\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u8fd9\u5bf9\u73b0\u4ee3\u8ba1\u7b97\u673a\u6765\u8bf4\u662f\u4e0d\u53ef\u60f3\u8c61\u7684\u3002</p> <p>\uff08\u5047\u8bbe\u6211\u4eec\u5ffd\u7565\u5173\u4e8e\u5c4f\u5e55\u663e\u793a\u7684 I/O\uff09\u8bd5\u60f3\uff0c\u4f60\u5e0c\u671b\u5728\u8dd1\u7a0b\u5e8f\u7684\u65f6\u5019\u653e\u4e00\u4e2a\u89c6\u9891\uff0c\u4f46\u662f\u7531\u4e8e\u4f60\u7684\u7a0b\u5e8f\u8fd8\u6ca1\u8dd1\u5b8c\uff0c\u4f60\u7684\u89c6\u9891\u5c31\u6ca1\u6cd5\u64ad\u653e\uff0c\u7a81\u7136\u4f60\u7684\u7a0b\u5e8f\u53d1\u751f\u4e86\u4e00\u6b21 I/O\uff0cCPU \u8f6c\u800c\u64ad\u653e\u5df2\u7ecf\u5b8c\u6210 I/O \u540e\u7684\u90a3\u90e8\u5206\u89c6\u9891\uff0c\u4f46\u662f\u8fd9\u4e2a\u65f6\u5019\u4f60\u7684\u7a0b\u5e8f I/O \u5f88\u5feb\u4e5f\u5b8c\u6210\u4e86\uff0c\u5374\u9700\u8981\u7b49\u5f85\u7f13\u5b58\u4e2d\u7684\u89c6\u9891\u653e\u5b8c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\uff0c\u8fd9\u79cd\u7528\u6237\u4f53\u9a8c\u51e0\u4e4e\u65e0\u6cd5\u63a5\u53d7\u3002</p> <p>\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u6700\u597d\u80fd\u540c\u65f6\u5b9e\u73b0\u4f53\u611f\u4e0a\u7684\u5e76\u884c\uff0c\u4e5f\u5c31\u662f\u51e0\u4ef6\u4e8b\u60c5\u81f3\u5c11\u770b\u8d77\u6765\u8981\u50cf\u662f\u540c\u65f6\u53d1\u751f\u7684\uff0c\u4e8e\u662f\u51fa\u73b0\u4e86\u5206\u65f6\u7cfb\u7edf(time sharing systems)\u3002</p> <p></p> \u2461 \u5206\u65f6\u7cfb\u7edf\u9636\u6bb5 <p>\u5206\u65f6\u7cfb\u7edf(time sharing systems)\u662f\u591a\u4efb\u52a1(multitasking)\u7684\u4e00\u4e2a\u5177\u4f53\u5b9e\u73b0\uff0c\u800c multitasking \u662f multiprogramming \u7684\u4e00\u4e2a\u903b\u8f91\u6269\u5c55\uff0c\u5373 multitasking \u4e5f\u662f multiprogramming \u7684\u4e00\u79cd\uff0c\u5b83\u7b26\u5408\u5185\u5b58\u4e2d\u6709\u591a\u4e2a\u8fdb\u7a0b\uff0c\u4e00\u6bb5\u65f6\u95f4\u5185\u6709\u591a\u4e2a\u4efb\u52a1\u4e00\u8d77\u6267\u884c\u7684\u7279\u70b9\u3002</p> <p>\u5206\u65f6\u7cfb\u7edf\u901a\u8fc7\u9891\u7e41\u5730\u5728\u591a\u4e2a\u8fdb\u7a0b\u95f4\u5207\u6362\u6765\u8fd1\u4f3c\u5b9e\u73b0\u5e76\u884c\uff08\u5e76\u4e0d\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u5e76\u884c\uff0c\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u5e76\u884c\u9700\u8981\u901a\u8fc7\u591a\u6838/\u591a\u5904\u7406\u5668\u5b9e\u73b0\uff09\u3002\u5177\u4f53\u6765\u8bf4\u662f\u6309\u7167\u65f6\u95f4\u7247(time slice)\uff0c\u8f6e\u6d41\u5c06 CPU \u5206\u914d\u7ed9\u5404\u4e2a\u8fdb\u7a0b\uff0c\u8fd9\u6837\u53ea\u8981\u65f6\u95f4\u7247\u8db3\u591f\u77ed\uff0c\u7528\u6237\u4f53\u611f\u4e0a\u5c31\u50cf\u662f\u591a\u4e2a\u4efb\u52a1\u5e76\u884c\u6267\u884c\u3002</p> <p>\u611f\u89c9\u6bd4\u8f83\u50cf\u300a\u5341\u4e07\u4e2a\u51b7\u7b11\u8bdd\u300b\u8d85\u4eba\u8fd9\u4e00\u96c6\u7684 4:09 - 4:48\u3002</p> <p>\u5206\u65f6\u7528\u6237\u5141\u8bb8\u591a\u4e2a\u7528\u6237\u540c\u65f6\u4f7f\u7528\u540c\u4e00\u53f0\u8ba1\u7b97\u673a\uff0c\u6240\u6709\u4efb\u52a1\u4e4b\u95f4\u4e92\u76f8\u72ec\u7acb\uff0c\u4e92\u4e0d\u5e72\u6270\u3001\u4e92\u4e0d\u963b\u585e\uff0c\u56e0\u6b64\u4efb\u52a1\u7684\u6700\u957f\u5468\u8f6c\u65f6\u95f4\u51cf\u5c11\uff0c\u7528\u6237\u7684\u64cd\u4f5c\u4e5f\u4f1a\u88ab\u53ca\u65f6\u54cd\u5e94\uff0c\u5b9e\u73b0\u4e86\u66f4\u65b9\u4fbf\u8fdb\u884c\u4eba\u673a\u5bf9\u8bdd\u3002</p> \u76f8\u5173\u9605\u8bfb <p>\u5173\u4e8e\u8fd9\u4e09\u4e2a\u6280\u672f\u7684\u8bf4\u660e\u4e5f\u53ef\u4ee5\u770b\u770b xyx \u662f\u600e\u4e48\u5199\u7684\uff1a\ud83d\udd17</p> <p>\u9664\u4e86\u8fd9\u51e0\u79cd\u7cfb\u7edf\u5916\uff0c\u738b\u9053\u91cc\u4e5f\u63d0\u5230\u4e86\u8fd9\u4e9b\u7cfb\u7edf\uff1a</p> <ul> <li>\u5b9e\u65f6\u7cfb\u7edf(Real-time System)\uff1a\u5728\u7279\u5b9a\u65f6\u95f4\uff08\u53ef\u80fd\u6bd4\u65f6\u95f4\u7247\u8fd8\u5c0f\uff09\u5185\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982\u822a\u7a7a\u822a\u5929\u7cfb\u7edf\u3001\u6838\u53cd\u5e94\u5806\u63a7\u5236\u7cfb\u7edf\u7b49\uff1b</li> <li>\u5206\u5e03\u5f0f\u7cfb\u7edf(Distributed System)\uff1a\u7531\u591a\u53f0\u8ba1\u7b97\u673a\u7ec4\u6210\u7684\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u8ba1\u7b97\u673a\u901a\u8fc7\u901a\u4fe1\u4ea4\u6362\u4fe1\u606f\uff0c\u5171\u540c\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1\uff0c\u4f8b\u5982\u4e91\u8ba1\u7b97\u3001\u5927\u578b\u7f51\u7ad9\u7b49\uff1b</li> </ul> <p>\u591a\u9053\u6280\u672f\u51fa\u73b0\u4e4b\u540e\uff0c\u867d\u7136\u8ba1\u7b97\u673a\u7684\u8868\u73b0\u4e0d\u65ad\u63d0\u5347\uff0c\u4f46\u662f\u7531\u4e8e\u591a\u9053\u6280\u672f\u672c\u8eab\u7684\u6280\u672f\u7279\u70b9\uff0c\u5404\u4e2a\u8fdb\u7a0b\u5728\u672a\u5b8c\u6210\u7684\u60c5\u51b5\u4e0b\u9700\u8981\u4e92\u76f8\u5207\u6362\uff0c\u4e8e\u662f\u4e00\u7cfb\u5217\u95ee\u9898\u63a5\u8e35\u800c\u6765\uff0c\u8fd9\u4e9b\u90fd\u662f\u6211\u4eec\u5728\u4e4b\u540e\u7684\u5355\u5143\u91cc\u8be6\u7ec6\u8ba8\u8bba\u7684\u5185\u5bb9\u3002</p>"},{"location":"OS/OS1/#_7","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ed3\u6784\u8bbe\u8ba1","text":"<p>\u968f\u7740\u64cd\u4f5c\u7cfb\u7edf\u7684\u529f\u80fd\u4e0d\u65ad\u6269\u5c55\u3001\u4f53\u91cf\u9010\u6e10\u53d8\u5927\uff0c\u6574\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u8f6f\u4ef6\u7684\u7ed3\u6784\u8bbe\u8ba1\u5c31\u8d8a\u53d1\u91cd\u8981\u4e86\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u4ecb\u7ecd\u82e5\u5e72\u8bbe\u8ba1\u601d\u8def\u3002</p> <p></p> \u5b8f\u5185\u6838 <p>Unix</p> <p> </p> <p>\u5b8f\u5185\u6838(monolithic-kernels)\u4e5f\u53eb\u5355\u5185\u6838\u6216\u5927\u5185\u6838\uff0c\u5b83\u7684\u6838\u5fc3\u601d\u60f3\u5341\u5206\u7b80\u5355\u7c97\u66b4\uff0c\u5c06\u6240\u6709\u4e3b\u8981\u529f\u80fd\u90fd\u7d27\u5bc6\u8026\u5408\u5728\u4e00\u8d77\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u6574\u4f53\u3002</p> <p>\u5b8f\u5185\u6838\u5e26\u6765\u7684\u597d\u5904\u662f\u64cd\u4f5c\u7cfb\u7edf\u6548\u7387\u6781\u9ad8\uff0c\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u53d1\u5c55\u5386\u7a0b\u6765\u770b\uff0c\u4e3b\u6d41\u64cd\u4f5c\u7cfb\u7edf\u90fd\u662f\u4ece\u5b8f\u5185\u6838\u53d1\u5c55\u8fc7\u6765\u7684\uff08\u4e0d\u8fc7\u5982\u4eca\u7684\u4e3b\u6d41\u64cd\u4f5c\u7cfb\u7edf\u66f4\u504f\u5411\u6df7\u5408\u7cfb\u7edf\uff09\u3002</p> <p>\u4f46\u662f\u5b8f\u5185\u6838\u7684\u7f3a\u70b9\u4e5f\u662f\u5341\u5206\u660e\u663e\u7684\uff0c\u5927\u91cf\u590d\u6742\u7684\u529f\u80fd\u4e92\u76f8\u8026\u5408\uff0c\u5bfc\u81f4\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ef4\u62a4\u5341\u5206\u56f0\u96be\uff1b\u4e0d\u4ec5\u5982\u6b64\uff0c\u4e00\u65e6\u67d0\u4e2a\u90e8\u5206\u51fa\u73b0\u4e86\u4e25\u91cd\u95ee\u9898\uff0c\u6574\u4e2a\u7cfb\u7edf\u90fd\u4f1a\u53d7\u5230\u5f71\u54cd\u3002\u5728\u8fd9\u4e9b\u65b9\u9762\uff0c\u5b8f\u5185\u6838\u7684\u8868\u73b0\u4e0d\u5982\u5fae\u5185\u6838\u3002</p> \u5206\u5c42\u8bbe\u8ba1 <p>MS-DOS</p> <p>\u5206\u5c42\u8bbe\u8ba1(layer approach)\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c06\u7cfb\u7edf\u5206\u4e3a\u82e5\u5e72\u5c42\uff0c\u5e95\u5c42\u4e3a\u786c\u4ef6\uff0c\u9876\u5c42\u4e3a\u7528\u6237\u63a5\u53e3\uff0c\u7b2c \\(i\\) \u5c42\u53ea\u8c03\u7528 \\(i-1\\) \u5c42\u63d0\u4f9b\u7684\u63a5\u53e3\u3002\u6bcf\u4e00\u5c42\u90fd\u5b9e\u73b0\u826f\u597d\u7684\u5c01\u88c5\uff0c\u4e8e\u662f\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u53ea\u9700\u8981\u9010\u6b65\u5b9e\u73b0\u5e76\u8c03\u8bd5\u9a8c\u8bc1\u6bcf\u4e00\u5c42\uff0c\u518d\u9010\u7ea7\u5411\u4e0a\u5f00\u53d1\u5373\u53ef\uff1b\u5728\u7ef4\u62a4\u6216\u6269\u5c55\u8fc7\u7a0b\u4e2d\uff0c\u53ea\u8981\u4fee\u6539\u6bcf\u4e00\u5c42\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u800c\u4e0d\u9700\u8981\u4fee\u6539\u5176\u5b83\u5c42\u7684\u4ee3\u7801\uff0c\u8fd9\u6837\u5c31\u5927\u5927\u964d\u4f4e\u4e86\u5f00\u53d1\u548c\u7ef4\u62a4\u7684\u96be\u5ea6\u3002</p> <p>\u7136\u800c\uff0c\u7531\u4e8e\u6bcf\u6b21\u6267\u884c\u4e00\u4e2a\u529f\u80fd\u90fd\u9700\u8981\u4e0a\u4e0b\u8de8\u8d8a\u591a\u5c42\uff0c\u53d1\u751f\u591a\u6b21\u63a5\u53e3\u8c03\u7528\uff0c\u5206\u5c42\u8bbe\u8ba1\u4e0b\u7684\u7cfb\u7edf\u6548\u7387\u5f80\u5f80\u90fd\u53d7\u5230\u9650\u5236\uff1b\u4e0d\u4ec5\u5982\u6b64\uff0c\u8981\u60f3\u771f\u6b63\u610f\u4e49\u4e0a\u5b9e\u73b0\u826f\u597d\u7684\u5206\u5c42\u8bbe\u8ba1\uff0c\u5c31\u9700\u8981\u5bf9\u5404\u5c42\u6709\u826f\u597d\u7684\u5b9a\u4e49\uff0c\u8fd9\u4e2a\u8bbe\u8ba1\u96be\u5ea6\u662f\u4e0d\u5c0f\u7684\u3002</p> <p></p> \u5fae\u5185\u6838 <p> </p> <p>\u5fae\u5185\u6838(micro-kernels)\u7684\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b8f\u5185\u6838\u76f8\u53cd\uff0c\u4e3b\u5f20\u5c06\u4e0d\u662f\u5fc5\u8981\u7684\u4e1c\u897f\u90fd\u4ece\u5185\u6838\u91cc\u62ff\u51fa\u53bb\uff0c\u653e\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u4ee5\u7528\u6237\u6001\u6267\u884c\u3002\u6574\u4f53\u5f62\u6210\u4e00\u79cd\u5fae\u5185\u6838-\u670d\u52a1\u5668\u7684\u7ed3\u6784\uff0c\u6b64\u65f6\u5185\u6838\u53ea\u63d0\u4f9b\u901a\u8baf\u3001\u5185\u5b58\u7ba1\u7406\u3001\u8fdb\u7a0b\u7ba1\u7406\u7b49\u57fa\u672c\u529f\u80fd\uff0c\u4e5f\u53ea\u6709\u8fd9\u4e9b\u90e8\u5206\u76f4\u63a5\u8fd0\u884c\u5728\u5185\u6838\u6001\uff0c\u4f5c\u4e3a\u670d\u52a1\u5668\u7684\u5176\u5b83\u529f\u80fd\u90e8\u4ef6\u5219\u901a\u8fc7\u6d88\u606f\u4f20\u9012\u673a\u5236\u4e0e\u5185\u6838\u4e92\u52a8\u3002</p> <p>\u7531\u4e8e\u5185\u6838\u53ea\u63d0\u4f9b\u6700\u57fa\u672c\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u5185\u6838\u7684\u4f53\u79ef\u4f1a\u5927\u5927\u51cf\u5c0f\uff0c\u5185\u6838\u7684\u7ef4\u62a4\u548c\u6269\u5c55\u4e5f\u4f1a\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\uff0c\u5fae\u5185\u6838-\u670d\u52a1\u5668\u7684\u7ed3\u6784\u4e5f\u4f7f\u529f\u80fd\u6269\u5c55\u66f4\u52a0\u5bb9\u6613\uff1b\u53e6\u5916\uff0c\u7531\u4e8e\u5185\u6838\u53ea\u63d0\u4f9b\u6700\u57fa\u672c\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u5185\u6838\u81ea\u8eab\u7684\u6548\u7387\u4e5f\u4f1a\u5927\u5927\u63d0\u5347\uff1b\u4e0d\u4ec5\u5982\u6b64\uff0c\u7531\u4e8e\u5404\u4e2a\u529f\u80fd\u4e4b\u95f4\u7684\u8026\u5408\u964d\u4f4e\uff0c\u4e14\u90fd\u8fd0\u884c\u5728\u7528\u6237\u6001\uff0c\u529f\u80fd\u4e4b\u95f4\u4ec5\u4f7f\u7528\u901a\u4fe1\u5efa\u7acb\u94fe\u63a5\uff0c\u5373\u4f7f\u67d0\u4e2a\u529f\u80fd\u90e8\u4ef6\u51fa\u73b0\u95ee\u9898\uff0c\u4e5f\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u5d29\u6e83\uff0c\u76f8\u6bd4\u4e8e\u5b8f\u5185\u6838\uff0c\u7cfb\u7edf\u53ef\u9760\u6027\u5927\u5927\u63d0\u5347\u3002</p> \u6a21\u5757\u5316\u8bbe\u8ba1 <p>\u6a21\u5757\u5316\u8bbe\u8ba1(modules approach)\u6307\u5c06\u64cd\u4f5c\u7cfb\u7edf\u5212\u5206\u4e3a\u82e5\u5e72\u5206\u7acb\u6a21\u5757\uff0c\u5e76\u89c4\u5b9a\u6a21\u5757\u4e4b\u95f4\u7684\u63a5\u53e3\uff0c\u751a\u81f3\u5355\u4e2a\u6a21\u5757\u4e0b\u4e5f\u53ef\u80fd\u662f\u7531\u591a\u4e2a\u6a21\u5757\u901a\u8fc7\u540c\u6837\u7684\u65b9\u5f0f\u7ec4\u7ec7\u800c\u6210\u7684\u3002\u8fd9\u79cd\u8bbe\u8ba1\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4e3a\u6a21\u5757-\u63a5\u53e3\u6cd5\u3002</p> <p>\u6a21\u5757\u5316\u7684\u8bbe\u8ba1\u4e0e\u5fae\u5185\u6838\u662f\u4e0d\u540c\u7684\uff0c\u9700\u8981\u6ce8\u610f\u533a\u5206\u3002\u5fae\u5185\u6838\u8bbe\u8ba1\u4ecd\u7136\u662f\u6709\u4e2d\u5fc3\uff08\u5fae\u5185\u6838\uff09\u7684\uff0c\u4f46\u662f\u6a21\u5757\u5316\u8bbe\u8ba1\u6574\u4f53\u662f\u5206\u5c42\u7f51\u72b6\u7684\u3002</p> <p>\u7406\u60f3\u7684\u6a21\u5757\u5316\u8bbe\u8ba1\u4f1a\u8ba9\u7cfb\u7edf\u8bbe\u8ba1\u53ef\u4ee5\u591a\u7ebf\u5e76\u884c\uff0c\u53ea\u9700\u8981\u4e8b\u5148\u5546\u91cf\u597d\u63a5\u53e3\uff0c\u5404\u4e2a\u5de5\u7a0b\u5e08\u5c31\u53ef\u4ee5\u72ec\u7acb\u5730\u5b9e\u73b0\u3001\u586b\u5145\u6a21\u5757\u5185\u5bb9\uff1b\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7684\u8bbe\u8ba1\u4e5f\u80fd\u8ba9\u7cfb\u7edf\u7684\u7ef4\u62a4\u548c\u6269\u5c55\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002</p> <p>\u7136\u800c\u6a21\u5757\u5316\u7684\u8bbe\u8ba1\u5341\u5206\u56f0\u96be\uff0c\u6a21\u5757\u5316\u7684\u8bbe\u8ba1\u5e76\u6ca1\u6709\u4e00\u4e2a\u6e05\u6670\u7684\u5355\u5411\u4f9d\u8d56\u5173\u7cfb\uff0c\u56e0\u6b64\u65e0\u6cd5\u9012\u8fdb\u5f0f\u7684\u63a8\u8fdb\u4efb\u52a1\uff0c\u6574\u4e2a\u5f00\u53d1\u8fc7\u7a0b\u5c31\u597d\u50cf\u59cb\u7ec8\u60ac\u5728\u534a\u7a7a\uff1b\u9664\u6b64\u4e4b\u5916\uff0c\u5982\u4f55\u8bbe\u8ba1\u63a5\u53e3\u4f7f\u5f97\u6240\u6709\u9700\u6c42\u90fd\u80fd\u88ab\u5f88\u597d\u6ee1\u8db3\u4e5f\u662f\u4e2a\u96be\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> \u6df7\u5408\u7cfb\u7edf <p>MacOS</p> <p>\u6df7\u5408\u7cfb\u7edf(hybrid systems)\u662f\u6307\u5c06\u5b8f\u5185\u6838\u548c\u5fae\u5185\u6838\u7684\u8bbe\u8ba1\u601d\u8def\u7ed3\u5408\u8d77\u6765\uff0c\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u66f4\u73b0\u4ee3\uff0c\u4e5f\u662f\u76ee\u524d\u4e3b\u6d41\u7684\u64cd\u4f5c\u7cfb\u7edf\u7684\u6a21\u5f0f\u3002</p> eBPF <p>\u76f4\u63a5\u5728\u5185\u6838\u4e2d\u8fd0\u884c\u7528\u6237\u7a0b\u5e8f\uff0c\u8bbe\u8ba1\u601d\u8def\u662f\u5c06\u7528\u6237\u7a0b\u5e8f\u7f16\u8bd1\u6210\u4e00\u79cd\u7279\u6b8a\u7684\u5b57\u8282\u7801\uff0c\u7136\u540e\u5c06\u8fd9\u79cd\u5b57\u8282\u7801\u52a0\u8f7d\u5230\u5185\u6838\u4e2d\uff0c\u7531\u5185\u6838\u6267\u884c\uff0c\u540c\u65f6\u4fdd\u6301\u5185\u6838\u7684\u5b89\u5168\u6027\u3002</p> <p>Virtual Machine</p> <p>\u91c7\u7528\u5206\u5c42\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u4f4d\u4e8e\u7269\u7406\u786c\u4ef6\u548c\u7528\u6237\u7a0b\u5e8f\u4e4b\u95f4\u7684\u8f6f\u4ef6\u5c42\uff0c\u5b83\u53ef\u4ee5\u6a21\u62df\u51fa\u4e00\u4e2a\u5b8c\u6574\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\uff0c\u5305\u62ec CPU\u3001\u5185\u5b58\u3001\u786c\u76d8\u7b49</p> <p></p> <p></p> VMware <p></p>"},{"location":"OS/OS1/#_8","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fd0\u884c\u539f\u7406","text":"<p>\u5bfc\u8bfb</p> <p>\u672c\u8282\u6211\u4eec\u6df1\u5165\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e00\u4e9b\u5177\u4f53\u8fd0\u884c\u8fc7\u7a0b\uff0c\u63a2\u7a76\u4e00\u4e9b\u6b65\u9aa4\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p>"},{"location":"OS/OS1/#_9","title":"\u4e2d\u65ad","text":"<p>\u4e2d\u65ad\uff08\u5e7f\u4e49\uff09\u662f\u8d2f\u7a7f\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e00\u4e2a\u91cd\u8981\u6280\u672f\uff0c\u5b83\u4f7f\u5f97\u201c\u8ba1\u5212\u4e4b\u5916\u201d\u7684\u4e8b\u60c5\u53ef\u4ee5\u53ca\u65f6\u7684\u88ab\u544a\u77e5\u5e76\u5904\u7406\u3002\u4f8b\u5982\uff0c\u7a0b\u5e8f\u7a81\u7136\u51fa\u73b0\u4e86\u81f4\u547d\u9519\u8bef\uff0c\u8fd9\u65f6\u64cd\u4f5c\u7cfb\u7edf\u5e94\u8be5\u53ca\u65f6\u5bdf\u89c9\u5e76\u5904\u7406\uff1b\u53c8\u6bd4\u5982\uff0c\u7528\u6237\u5728\u547d\u4ee4\u884c\u8f93\u5165\u4e86\u6307\u4ee4\uff0c\u6309\u4e0b\u4e86\u56de\u8f66\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5e94\u5f53\u5bdf\u89c9\u5230 I/O \u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u3002\u4f46\u662f\u6211\u4eec\u4e0d\u5e94\u5f53\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u538c\u5176\u70e6\u5730\u8be2\u95ee\u4f60\u6709\u6ca1\u6709\u53d1\u751f\u9519\u8bef\uff0c\u53c8\u6216\u8005\u8fd9\u4e2a I/O \u662f\u5426\u5c31\u7eea\uff0c\u8fd9\u5f88\u4e0d\u5408\u7406\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u4e0d\u5e94\u5f53\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u4e8b\u65e0\u5de8\u7ec6\u5730\u53bb\u8d1f\u8d23\u68c0\u67e5\u610f\u5916\u662f\u5426\u53d1\u751f\uff0c\u800c\u662f\u5e94\u5f53\u63d0\u4f9b\u4e00\u4e2a\u4e0a\u62a5\u610f\u5916\u7684\u63a5\u53e3\uff0c\u8ba9\u4ea7\u751f\u610f\u5916\u7684\u4eba\u81ea\u884c\u4e0a\u62a5\u8fd9\u4e9b\u610f\u5916\u3002\u5728\u5177\u4f53\u786c\u4ef6\u7684\u5b9e\u73b0\u4e0a\uff0c\u4f1a\u6709\u4e24\u6761\u4e13\u95e8\u8868\u793a\u4e2d\u65ad\u4fe1\u53f7\u7684\u7ebf\uff08\u7a0d\u5019\u4f1a\u5728\u4e2d\u65ad\u5c4f\u853d\u4e2d\u8bb2\u5230\uff09\uff0cCPU \u4f1a\u5728\u6bcf\u4e00\u6761\u6307\u4ee4\u7ed3\u675f\u540e\u68c0\u6d4b\u662f\u5426\u6709\u4e2d\u65ad\u53d1\u751f\uff0c\u800c\u5728\u8f6f\u4ef6\u4e0a\u5c31\u4f53\u73b0\u4e3a\u6bcf\u5f53\u6709\u4e2d\u65ad\u53d1\u751f\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u9700\u8981\u53bb\u5904\u7406\u3002\u7531\u4e8e\u4e2d\u65ad\u7684\u5f3a\u5927\u7279\u6027\uff0c\u4ece\u6700\u65e9\u4ec5\u7684\u5904\u7406\u786c\u4ef6\u72b6\u6001\uff0c\u5230\u5904\u7406\u8f6f\u4ef6\u9519\u8bef\u548c\u4f5c\u4e3a\u4e00\u79cd\u7c7b\u4f3c\u51fd\u6570\u7684\u624b\u6bb5\uff0c\u4e2d\u65ad\u7684\u5e94\u7528\u8303\u56f4\u8d8a\u6765\u8d8a\u5e7f\uff0c\u5b83\u7684\u6982\u5ff5\u968f\u7740\u5e94\u7528\u8303\u56f4\u4e5f\u4e0d\u65ad\u6269\u5927\u3002</p> <p>\u4e2d\u65ad\u5411\u91cf\u8868</p> <p>\u7531\u4e8e\u4e2d\u65ad\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u9891\u7e41\u7684\u5904\u7406\u5404\u79cd\u4e2d\u65ad\uff0c\u5904\u7406\u6bcf\u4e00\u79cd\u4e2d\u65ad\u90fd\u9700\u8981\u4e00\u4e2a\u7279\u5b9a\u7684\u65b9\u6cd5\uff0c\u56e0\u6b64\uff0c\u4e00\u79cd\u5feb\u901f\u5b9a\u4f4d\u4e2d\u65ad\u5904\u7406\u65b9\u6cd5\u7684\u624b\u6bb5\u5c31\u663e\u5f97\u5c24\u4e3a\u91cd\u8981\u3002</p> <p>\u4e2d\u65ad\u5411\u91cf\u8868(interrupt vector table)\u901a\u8fc7\u4e2d\u65ad\u53f7\u6765\u7d22\u5f15\u4e2d\u65ad\u5904\u7406\u65b9\u6cd5\uff0c\u5b9e\u73b0\u4e86\u4e00\u79cd\u201c\u968f\u673a\u8bbf\u95ee\u201d\uff0c\u5927\u5927\u52a0\u901f\u4e86\u4e2d\u65ad\u5904\u7406\u7684\u901f\u5ea6\u3002</p> <p>\u6839\u636e\u4e2d\u65ad\u662f\u5426\u7531\u7a0b\u5e8f\u4ea7\u751f\uff0c\u4e2d\u65ad\u53ef\u4ee5\u5206\u4e3a\u5916\u4e2d\u65ad\uff08\u72ed\u4e49\u7684\u4e2d\u65ad\uff0c\u7531\u786c\u4ef6\u4ea7\u751f\uff09\u548c\u5185\u4e2d\u65ad\uff08\u5f02\u5e38...\uff0c\u4e3b\u8981\u7531\u7a0b\u5e8f\u4ea7\u751f\uff09</p> <p>\u5728RISC-V\u67b6\u6784\u4e2d\uff0c<code>trap</code>\u7531\u7a0b\u5e8f\u4ea7\u751f\uff0c\u5206\u4e3a<code>exception</code>\u548c<code>interrupt</code>\uff0c\u5176\u4e2d<code>exception</code>\u662f\u7531error\u5f15\u8d77\u7684\uff0c<code>interrupt</code>\u5f80\u5f80\u662f\u7531\u5916\u90e8\u7528\u6237\u5f15\u8d77\u7684\u3002\u5728\u5904\u7406\u4e00\u4e2a\u4e2d\u65ad\u65f6\uff0c\u4e00\u822c\u5176\u4ed6\u4e2d\u65ad\u7a0b\u5e8f\u4f1a\u88ab\u5c4f\u853d\uff0c\u4ee5\u4fdd\u8bc1\u4e0d\u4f1a\u9057\u6f0f\u4efb\u4f55\u4e00\u4e2a\u4e2d\u65ad\u3002</p> <p></p> \u76f8\u5173\u9605\u8bfb <ul> <li>Difference between TRAP and exceptions | StackOverflow</li> <li>Difference between Interrupt and Exception | GeeksForGeeks</li> </ul> <p>\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u4e2d\u65ad\u4e00\u65e6\u53d1\u751f\u5c31\u7acb\u523b\u88ab\u89e3\u51b3\uff0c\u4f46\u662f\u4e2d\u65ad\u5904\u7406\u4e5f\u540c\u6837\u9700\u8981\u8d44\u6e90\uff0c\u8fd9\u610f\u5473\u7740\u4e2d\u65ad\u4e5f\u6709\u53ef\u80fd\u4ea7\u751f\u51b2\u7a81\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u9700\u8981\u4e00\u7cfb\u5217\u673a\u5236\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002</p> <ol> <li>\u663e\u7136\uff0c\u4e2d\u65ad\u4e4b\u95f4\u4ea6\u6709\u533a\u522b\uff0c\u6709\u7684\u7a0b\u5e8f\u53d1\u751f\u4e86\u201c\u81f4\u547d\u9519\u8bef\u201d\u8fd9\u4ef6\u4e8b\uff0c\u663e\u7136\u6bd4\u6253\u5370\u673a\u5c31\u7eea\u66f4\u91cd\u8981\uff0c\u56e0\u6b64\uff0c\u4e2d\u65ad\u9700\u8981\u5206\u7ea7\u673a\u5236\uff0c\u4ee5\u533a\u5206\u4e2d\u65ad\u7684\u4f18\u5148\u7ea7\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u5904\u7406\u4e2d\u65ad\u65f6\uff0c\u4f18\u5148\u5904\u7406\u4f18\u5148\u7ea7\u9ad8\u7684\u4e2d\u65ad\uff1b</li> <li>\u4e2d\u65ad\u5e76\u4e0d\u662f\u968f\u65f6\u968f\u5730\u90fd\u80fd\u53d1\u751f\u7684\uff0c\u201c\u4ee3\u7406\u4eba\u201d\u5728\u8d70\u94a2\u4e1d\u65f6\u4e0d\u5e94\u5f53\u6682\u505c\u53bb\u5904\u7406\u836f\u54c1\u7f3a\u8d27\u8fd9\u79cd\u76f8\u5bf9\u65e0\u5173\u7d27\u8981\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\uff0c\u6709\u8bb8\u591a\u539f\u5b50\u6027\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u88ab\u4e2d\u65ad\u7684\uff0c\u4e5f\u6709\u4e00\u4e9b\u91cd\u8981\u7684\u4efb\u52a1\u662f\u4e0d\u5e94\u5f53\u88ab\u666e\u901a\u7684\u4e2d\u65ad\u6253\u6270\u7684\uff0c\u8fd9\u5c31\u6d89\u53ca\u5230\u4e2d\u65ad\u5c4f\u853d\u95ee\u9898\uff1b</li> </ol> <p>\u5b58\u7591</p> <p>\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u8c08\u5230\u4e2d\u65ad\u7684\u786c\u4ef6\u8bbe\u8ba1\uff0c\u4e00\u79cd\u6bd4\u8f83\u666e\u901a\u7684\u8bbe\u8ba1\u662f\uff0c\u51c6\u5907 maskable interrupt-request line \u548c non-maskable interrupt-request line \u4e24\u6761\u4e2d\u65ad\u8bf7\u6c42\u7ebf\uff0c\u524d\u8005\u7528\u4e8e\u53ef\u5c4f\u853d\u7684\u4e2d\u65ad\uff0c\u540e\u8005\u7528\u4e8e\u4e0d\u53ef\u5c4f\u853d\u7684\u4e2d\u65ad\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5728\u6bcf\u4e2a\u6307\u4ee4\u540e\u68c0\u67e5\u8fd9\u4e2d\u65ad\u7ebf\u4e0a\u662f\u5426\u6709\u4e2d\u65ad\u8bf7\u6c42\uff0c\u800c\u5982\u679c\u6b64\u65f6\u64cd\u4f5c\u7cfb\u7edf\u5c4f\u853d\u4e86\u4e2d\u65ad\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u68c0\u67e5 maskable interrupt-request line \u4e0a\u7684\u4e2d\u65ad\u8bf7\u6c42\u3002</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53d1\u73b0\u4e2d\u65ad\u540e\u5e76\u4e0d\u662f\u4e8c\u8bdd\u4e0d\u8bf4\u9a6c\u4e0a\u53bb\u5904\u7406\u4e2d\u65ad\u7684\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u4e2d\u65ad\u5904\u7406\u5b8c\u6210\u540e\u4ecd\u80fd\u7ee7\u7eed\u5f53\u524d\u4efb\u52a1\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u4fdd\u5b58\u5f53\u524d\u4efb\u52a1\u7684\u72b6\u6001\uff0c\u4ee5\u4fbf\u5b8c\u6210\u4e2d\u65ad\u5904\u7406\u540e\u6062\u590d\u5f53\u524d\u4efb\u52a1\u7684\u72b6\u6001\u3002</p> I/O <ul> <li>Synchronous I/O\uff1a\u7a0b\u5e8f\u5728 I/O \u64cd\u4f5c\u5b8c\u6210\u4e4b\u524d\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230 I/O \u64cd\u4f5c\u5b8c\u6210\u540e\u624d\u4f1a\u7ee7\u7eed\u6267\u884c</li> <li>Asynchronous I/O\uff1a\u7a0b\u5e8f\u5728 I/O \u64cd\u4f5c\u5b8c\u6210\u4e4b\u524d\u4e0d\u4f1a\u88ab\u963b\u585e\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\uff0cI/O \u64cd\u4f5c\u5b8c\u6210\u540e\u4f1a\u901a\u8fc7\u4e2d\u65ad\u901a\u77e5\u7a0b\u5e8f</li> </ul> <p></p>"},{"location":"OS/OS1/#_10","title":"\u8ba1\u65f6\u5668","text":"<p>\u867d\u7136\u770b\u8d77\u6765\u5f88\u4e0d\u8d77\u773c\uff0c\u4f46\u8ba1\u65f6\u5668(timer)\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u4e1c\u897f\u3002\u8ba1\u65f6\u5668\u9700\u8981\u4e00\u4e2a\u56fa\u5b9a\u9891\u7387\u7684\u65f6\u949f\u4ee5\u53ca\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u5728\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u4ee4\u8ba1\u6570\u5668\u51cf 1\uff0c\u5f53\u8ba1\u6570\u5668\u5f52\u96f6\u65f6\u4ea7\u751f\u4e2d\u65ad\uff0c\u544a\u8bc9\u64cd\u4f5c\u7cfb\u7edf\u5b9a\u7684\u65f6\u5df2\u7ecf\u5230\u4e86\u3002</p> <p>\u5b83\u7684\u529f\u80fd\u867d\u7136\u57fa\u7840\u4f46\u662f\u5341\u5206\u91cd\u8981\uff0c\u4f8b\u5982\u5206\u65f6\u7cfb\u7edf\u4e2d\u5c31\u9700\u8981\u8ba1\u6570\u5668\u6765\u63a7\u5236\u65f6\u95f4\u7247\u7684\u957f\u5ea6\uff0c\u53c8\u6bd4\u5982\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u5b9a\u671f\u68c0\u67e5\u5185\u5b58\u4e2d\u7684\u8fdb\u7a0b\uff0c\u4ee5\u9632\u6b62\u8fdb\u7a0b\u4e00\u76f4\u5360\u7528\u7cfb\u7edf\u8d44\u6e90\uff0c\u8fd9\u4e9b\u90fd\u9700\u8981\u8ba1\u65f6\u5668\u7684\u5e2e\u52a9\u3002</p>"},{"location":"OS/OS1/#_11","title":"\u7279\u6743\u6a21\u5f0f","text":"<p>\u6211\u4eec\u524d\u9762\u8bf4\u8fc7\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7684\u67d0\u4e9b\u64cd\u4f5c\u662f\u5371\u9669\u7684\uff0c\u6709\u53ef\u80fd\u5a01\u80c1\u5230\u81ea\u8eab\u6b63\u5e38\u8fd0\u4f5c\u7684\uff08\u5982\u4e0e\u786c\u4ef6\u76f4\u63a5\u76f8\u5173\u7684\u884c\u4e3a\u3001\u63a7\u5236 CPU \u8fd0\u884c\u89c4\u5219\u7684\u884c\u4e3a\u7b49\uff09\uff0c\u800c\u8fd9\u4e9b\u64cd\u4f5c\u4e0d\u5e94\u5f53\u88ab\u7528\u6237\u7a0b\u5e8f\u76f4\u63a5\u6267\u884c\u3002\u4e00\u79cd\u7b80\u5355\u7684\u601d\u8def\u662f\uff0c\u6211\u4eec\u5212\u5206\u5e38\u89c4\u64cd\u4f5c\u548c\u5371\u9669\u64cd\u4f5c\uff0c\u5141\u8bb8\u7528\u6237\u7a0b\u5e8f\u6267\u884c\u5e38\u89c4\u64cd\u4f5c\uff0c\u800c\u5371\u9669\u64cd\u4f5c\u5219\u9700\u8981\u59d4\u6258\u4e13\u4e1a\u4eba\u58eb\u4ee3\u4e3a\u6267\u884c\u3002\u800c\u8fd9\u5c31\u662f\u7279\u6743\u6a21\u5f0f(privileged mode)\u7684\u57fa\u672c\u601d\u8def\u3002</p> <p>\u5de5\u4e1a\u4e0a\u7684\u7279\u6743\u6a21\u5f0f\u53ef\u80fd\u4f1a\u6709\u591a\u79cd\u590d\u6742\u7684\u5b9e\u73b0\u5f62\u5f0f\uff0c\u4f46\u662f\u6211\u4eec\u8fd9\u91cc\u53ea\u8bb2\u6700\u7b80\u5355\u7684\u4e00\u79cd\uff0c\u5373\u53cc\u6a21\u5f0f(dual-mode)\u3002\u53cc\u6a21\u5f0f\u4e0b\uff0cCPU \u6709\u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u7528\u6237\u6001(user mode)\uff08\u76ee\u6001\uff09\uff0c\u4e00\u79cd\u662f\u5185\u6838\u6001(kernel mode)\uff08\u7ba1\u6001\uff0c\u6838\u5fc3\u6001\uff09\u3002Mode bit \u4e3a 0\uff0c\u8868\u793a CPU \u5de5\u4f5c\u5728\u5185\u6838\u6001\uff1bmode bit \u4e3a 1 \u65f6\uff0cCPU \u5de5\u4f5c\u5728\u7528\u6237\u6001\u3002</p> <p>\u540c\u65f6\uff0c\u6211\u4eec\u5c06\u90a3\u4e9b\u201c\u5371\u9669\u201d\u7684\u6307\u4ee4\u79f0\u4e3a\u7279\u6743\u6307\u4ee4(privileged instruction)\uff0c\u4f8b\u5982 I/O \u63a7\u5236\uff0c\u8ba1\u65f6\u5668\u7ba1\u7406\uff0c\u4e2d\u65ad\u7ba1\u7406\u7b49\u3002\u8fd9\u4e9b\u6307\u4ee4\u53ea\u80fd\u5728\u5185\u6838\u6001\u4e0b\u6267\u884c\uff0c\u800c\u7528\u6237\u6001\u4e0b\u6267\u884c\u8fd9\u4e9b\u6307\u4ee4\u65f6\u4f1a\u8ba4\u4e3a\u8fd9\u6761\u6307\u4ee4\u4e0d\u5b58\u5728\u3002</p> <p>\u95ee\u9898\u5c1a\u672a\u89e3\u51b3</p> <p>\u73b0\u5728\u6211\u4eec\u5c06\u5371\u9669\u64cd\u4f5c\u548c\u76f8\u5bf9\u5b89\u5168\u7684\u64cd\u4f5c\u9694\u79bb\u5f00\u6765\u4e86\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u7528\u6237\u7a0b\u5e8f\u5c31\u4e0d\u9700\u8981\u4f7f\u7528\u90a3\u4e9b\u5371\u9669\u64cd\u4f5c\u4e86\uff0c\u5355\u7eaf\u7684\u9694\u79bb\u5e76\u4e0d\u80fd\u89e3\u51b3\u95ee\u9898\uff0c\u7528\u6237\u7a0b\u5e8f\u4ecd\u7136\u5b58\u5728\u9700\u8981\u4f7f\u7528\u7279\u6743\u6307\u4ee4\u7684\u9700\u6c42\u3002</p> <p>\u8fd9\u4e9b\u9700\u6c42\u5f80\u5f80\u662f\u53ef\u4ee5\u88ab\u62bd\u8c61\u7684\u3001\u88ab\u5c01\u88c5\u7684\u3002\u5c31\u597d\u50cf\u300c\u201c\u7528\u6237\u201d\u5411\u201c\u67dc\u53f0\u201d\u7d22\u8981\u5e93\u623f\u94a5\u5319\uff0c\u4ee5\u4fbf ta \u80fd\u53bb\u5e93\u623f\u62ff\u7f3a\u8d27\u7684\u8d27\u7269\u300d\u8fd9\u4ef6\u4e8b\u662f\u4e0d\u5408\u7406\u7684\uff0c\u6211\u4eec\u65e0\u6cd5\u63a7\u5236\u201c\u7528\u6237\u201d\u5b9e\u9645\u62ff\u201c\u94a5\u5319\u201d\u505a\u4e86\u4ec0\u4e48\uff0c\u800c\u201c\u94a5\u5319\u201d\u7684\u6ee5\u7528\u53c8\u4f1a\u5bfc\u81f4\u201c\u67dc\u53f0\u201d\u9677\u5165\u5371\u9669\u4e2d\uff1b\u4f46\u662f\u300c\u201c\u7528\u6237\u201d\u8bf7\u6c42\u201c\u67dc\u53f0\u201d\u53bb\u5e93\u623f\u62ff ta \u9700\u8981\u7684\u8d27\u7269\u300d\u662f\u5408\u7406\u7684\u3002</p> <p>\u53cd\u8fc7\u6765\u8bb2\uff0c\u867d\u7136\u300c\u201c\u7528\u6237\u201d\u8bf7\u6c42\u201c\u67dc\u53f0\u201d\u53bb\u5e93\u623f\u62ff ta \u9700\u8981\u7684\u8d27\u7269\u300d\u8fd9\u4e2a\u4efb\u52a1\u5fc5\u987b\u4f7f\u7528\u5e93\u623f\u201c\u94a5\u5319\u201d\u624d\u80fd\u8fdb\u884c\uff0c\u4f46\u662f\u65e0\u8bba\u5982\u4f55\u8fd9\u4e2a\u201c\u94a5\u5319\u201d\u4e5f\u53ea\u4f1a\u88ab\u201c\u67dc\u53f0\u201d\u7528\u6765\u83b7\u53d6\u5e93\u623f\u91cc\u7684\u7279\u5b9a\u8d27\u7269\uff0c\u800c\u4e0d\u4f1a\u53d1\u751f\u8bf8\u5982\u201c\u7528\u6237\u201d\u5e26\u7740\u5341\u516b\u8f66\u9762\u5305\u4eba\u628a\u5e93\u623f\u6d17\u52ab\u4e00\u7a7a\u7684\u60c5\u51b5\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u53ea\u9700\u8981\u5c01\u88c5\u597d\u4e00\u7cfb\u5217\u7c7b\u4f3c\u8fd9\u79cd\u7684\u9700\u6c42-\u7ed3\u679c\u7684\u5904\u7406\u65b9\u6848\uff0c\u8ba9\u7528\u6237\u5728\u6709\u9700\u8981\u7684\u65f6\u5019\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u6267\u884c\u8fd9\u4e9b\u65b9\u6848\uff0c\u5728\u6267\u884c\u5f53\u524d\u4efb\u52a1\u7684\u65f6\u5019\u5c06\u63a7\u5236\u6743\u8ba9\u6e21\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5b8c\u6210\u540e\u518d\u8fd8\u56de\u63a7\u5236\u6743\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5c06\u7279\u6743\u6307\u4ee4\u9694\u79bb\u5728\u5185\u6838\u6001\uff0c\u540c\u65f6\u7528\u6237\u7a0b\u5e8f\u4e5f\u80fd\u5b8c\u6210\u9700\u6c42\u3002</p> <p>\u800c\u90a3\u4e48\u5728\u5177\u4f53\u5b9e\u73b0\u4e0a\uff0c\u8fd9\u4e00\u6b65\u662f\u901a\u8fc7 trap \u5b9e\u73b0\u7684\u3002</p> <p></p>"},{"location":"OS/OS1/#_12","title":"\u7cfb\u7edf\u8c03\u7528","text":"<p>  Examples of W&amp;U system calls. </p> <p>\u7cfb\u7edf\u8c03\u7528(system call)\u662f\u7cfb\u7edf\u5411\u7528\u6237\u7a0b\u5e8f\u63d0\u4f9b\u670d\u52a1\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u5b83\u4eec\u7ecf\u5e38\u4ee5 C/C++ \u51fd\u6570\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u6bd4\u8f83\u63a5\u8fd1\u5e95\u5c42\u7684\u4efb\u52a1\uff0c\u4e5f\u53ef\u80fd\u662f\u901a\u8fc7\u6c47\u7f16\u7f16\u5199\u7684\u3002</p> <p>\u4f46\u8bf4\u5230\u5e95\uff0c\u7cfb\u7edf\u8c03\u7528\u8fd8\u662f\u76f8\u5bf9\u5e95\u5c42\u7684\u8bbe\u8ba1\uff0c\u901a\u5e38\u7684\u5f00\u53d1\u5e76\u4e0d\u57fa\u4e8e\u5982\u6b64\u5e95\u5c42\u7684\u8bbe\u8ba1\u5c55\u5f00\u3002\u66f4\u5e38\u89c1\u7684\u662f\u5229\u7528\u5404\u79cd\u62bd\u8c61\u5c42\u7ea7\u66f4\u9ad8\u7684 Application Programming Interface, API \u8fdb\u884c\u5f00\u53d1\u3002</p> <p>API \u662f\u4e00\u4e2a\u975e\u5e38\u5e38\u89c1\u7684\u6982\u5ff5\uff0c\u5728\u6211\u770b\u6765\u7cfb\u7edf\u8c03\u7528\u672c\u8eab\u4e5f\u662f\u4e00\u79cd API\u3002API \u7684\u6838\u5fc3\u601d\u60f3\u662f\u8ba9\u8c03\u7528\u8005\u53ea\u9700\u8981\u77e5\u9053\u5982\u4f55\u4e0e\u88ab\u8c03\u7528\u8005\u4ea4\u6d41\u4ee5\u5b9e\u73b0\u76ee\u7684\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u5176\u5177\u4f53\u5b9e\u73b0\u3002\u8fd9\u540c\u65f6\u4e5f\u6697\u793a\u7740\uff0c\u53ea\u8981 API \u4e00\u81f4\uff0c\u540c\u6837\u7684\u7a0b\u5e8f\u5728\u4e0d\u540c\u7684\u5e73\u53f0\u4e0a\u4e5f\u80fd\u76f4\u63a5\u7f16\u8bd1\u540e\u8fd0\u884c\u3002</p> <p>\u663e\u7136\uff0cAPI \u4e0e\u7f16\u7a0b\u8bed\u8a00\u5f80\u5f80\u662f\u5f3a\u76f8\u5173\u7684\uff0c\u7279\u5b9a\u7f16\u7a0b\u8bed\u8a00\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\u4e5f\u662f\u9700\u8981\u4e00\u5b9a\u7684\u201c\u73af\u5883\u201d\u7684\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684\u8fd0\u884c\u65f6\u73af\u5883(run-time environment, RTE)\u3002RTE \u901a\u5e38\u5305\u62ec\u4e86\u7f16\u8bd1\u5668(compilers)\u3001\u89e3\u91ca\u5668(interpreters)\u3001\u5e93(libraries)\u548c\u88c5\u8f7d\u5668(loaders)\u7b49\uff0c\u5b83\u4eec\u5171\u540c\u7ec4\u6210\u4e86\u4e00\u4e2a\u5b8c\u6574\u7684\u8fd0\u884c\u65f6\u73af\u5883\u3002</p> <p>parameters</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u7cfb\u7edf\u8c03\u7528\u7684\u53c2\u6570\u901a\u8fc7\u7279\u5b9a\u5bc4\u5b58\u5668\u6765\u4f20\u9012\uff0c\u82e5\u5bc4\u5b58\u5668\u4e0d\u591f\u7528\u53ef\u80fd\u4f1a\u4f7f\u7528\u5806\u6808\u7b49\u5185\u5b58</p> <p></p> \u5e38\u89c1API <p></p> \u76f8\u5173\u9605\u8bfb <ul> <li>ABI | Wiki</li> <li>Difference between API and ABI | StackOverflow</li> </ul> \u601d\u8003\u9898 <p>\u9898\u9762</p> <p>\u8fa8\u6790\u5e93\u51fd\u6570\u4e0e\u7cfb\u7edf\u8c03\u7528\uff1f</p> \u89e3\u6790 <p>\u5e93\u51fd\u6570\u8fd0\u884c\u5728\u7528\u6237\u7a7a\u95f4\u800c\u7cfb\u7edf\u8c03\u7528\u8fd0\u884c\u5728\u5185\u6838\u7a7a\u95f4\u3002\u5927\u90e8\u5206\u5e93\u51fd\u6570\u53ef\u80fd\u4f7f\u7528\u7cfb\u7edf\u8c03\u7528\u6765\u5b9e\u73b0\u76ee\u7684\u3002</p>"},{"location":"OS/OS1/#_13","title":"\u94fe\u63a5\u5668\u548c\u88c5\u8f7d\u5668","text":"<p>  The role of the linker and loader. </p> <p>\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u90a3\u4e48\u64cd\u4f5c\u7cfb\u7edf\u5230\u5e95\u662f\u5982\u4f55\u6267\u884c\u4e00\u4e2a\u7a0b\u5e8f\u7684\u5462\uff1f\u4ee5 C \u4e3a\u4f8b\uff0c\u4e00\u4e2a\u5199\u5b8c\u7684\u4ee3\u7801\u9700\u8981\u7ecf\u8fc7\u7f16\u8bd1\u3001\u94fe\u63a5\u3001\u88c5\u8f7d\u4e09\u4e2a\u6b65\u9aa4\uff0c\u624d\u80fd\u6210\u4e3a\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u53ef\u4ee5\u88ab\u6267\u884c\u7684\u7a0b\u5e8f\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u7f16\u8bd1\u5668\u9996\u5148\u5c06\u82e5\u5e72 <code>.c</code> \u6e90\u6587\u4ef6\u7f16\u8bd1\u4e3a\u82e5\u5e72 <code>.o</code> \u6587\u4ef6\uff08\u8fd9\u91cc\u5408\u5e76\u4e86\u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u6b65\u9aa4\uff09\uff0c\u8fd9\u4e9b <code>.o</code> \u6587\u4ef6\u88ab\u79f0\u4e3a\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6(relocatable object file)\uff0c\u5176\u5b58\u5728\u5f62\u5f0f\u4e3a\u673a\u5668\u7801\uff1b\u968f\u540e\u94fe\u63a5\u5668\u5c06\u82e5\u5e72 <code>.o</code> \u6587\u4ef6\u8fde\u5e26\u6240\u9700\u8981\u7684\u4e00\u4e9b\u5e93\u6587\u4ef6\uff08\u5982 <code>.a</code> \u6587\u4ef6\uff09\u94fe\u63a5\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u6587\u4ef6(executable object file)\u3002</p> <p>\u7279\u522b\u7684\uff0c\u94fe\u63a5\u5206\u4e3a\u9759\u6001\u94fe\u63a5\u548c\u52a8\u6001\u94fe\u63a5\u4e24\u79cd\u3002\u9759\u6001\u94fe\u63a5\u5c06\u5e93\u6587\u4ef6\u7684\u4ee3\u7801\u76f4\u63a5\u5408\u5e76\u8fdb\u5165\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u800c\u52a8\u6001\u94fe\u63a5\u4ec5\u4ec5\u5c06\u5e93\u6587\u4ef6\u7684\u5f15\u7528\u4fe1\u606f\u5199\u5165\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u800c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u518d\u53bb\u5bfb\u627e\u8fd9\u4e9b\u5e93\u6587\u4ef6\u3002</p> <p></p> <pre><code>gcc -E main.c -o main.i # pre-process\ngcc -S main.i -o main.s # compile to assembly code\ngcc -c main.s -o main.o # assemble to object file\ngcc main.o -o main      # link\n./main                  # (load and) execute\n</code></pre> \u4e00\u4e9b\u64cd\u4f5c <ul> <li>\u4f7f\u7528 <code>gcc -static ...</code> \u6765\u6307\u5b9a\u4f7f\u7528\u9759\u6001\u94fe\u63a5\uff1b</li> <li>\u4f7f\u7528 <code>ldd &lt;file&gt;</code> \u6765\u67e5\u770b\u6587\u4ef6\u94fe\u63a5\u4e86\u54ea\u4e9b\u5e93\uff1b</li> </ul> <p>  \u53ef\u4ee5\u53d1\u73b0\uff0c\u52a8\u6001\u94fe\u63a5\u5f97\u5230\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6bd4\u9759\u6001\u94fe\u63a5\u5f97\u5230\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8981\u5c0f\u4e0d\u5c11\u3002</p>"},{"location":"OS/OS1/#_14","title":"\u5f15\u5bfc","text":"<p>\u5728\u8ba1\u7b97\u673a\u521a\u521a\u542f\u52a8\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u672a\u5f00\u59cb\u8fd0\u884c\u4e4b\u524d\uff0c\u9700\u8981\u5f00\u673a\u540e\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f\u2014\u2014\u5f15\u5bfc\u52a0\u8f7d\u5668(bootstrap loader)\u6765\u4e00\u6b65\u4e00\u6b65\u5730\u521d\u59cb\u5316\u64cd\u4f5c\u7cfb\u7edf\u3002\u5bf9\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\uff0cbootstrap \u90fd\u4f1a\u88ab\u5b58\u50a8\u5728 ROM \u4e2d\uff0c\u5e76\u4e14\u9700\u8981\u5728\u4e00\u4e2a\u5df2\u77e5\u7684\u4f4d\u7f6e\uff08\u5426\u5219\u600e\u4e48\u627e\u5230\u5b83\u5462\uff09\u3002Bootstrap loader \u4f1a\u8f7d\u5165\u66f4\u52a0\u7231\u590d\u6742\u7684\uff0c\u5b8c\u6574\u7684 bootstrap\uff0c\u800c\u5305\u542b bootstrap \u7a0b\u5e8f\u7684\u5206\u533a\u5c31\u88ab\u79f0\u4e3a\u5f15\u5bfc\u5206\u533a(bootstrap partition)\u3002</p>"},{"location":"OS/OS2/","title":"Unit 1: \u8fdb\u7a0b\u7ba1\u7406 | Process Management","text":""},{"location":"OS/OS2/#_1","title":"\u8fdb\u7a0b","text":"<p>\u4e00\u6bb5\u672c\u8d28\u4e0a\u7a0b\u5e8f\u662f\u9759\u6001\u7684\u3001\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\u7684\u6307\u4ee4\u6570\u636e\uff0c\u800c\u5f53\u5b83\u9644\u5e26\u8fd0\u884c\u7a0b\u5e8f\u6240\u9700\u8981\u7684\u5fc5\u8981\u4fe1\u606f\u8fdb\u5165\u5185\u5b58\uff0c\u5f97\u5230\u76f8\u5173\u8d44\u6e90\u540e\uff0c\u5b83\u6210\u4e3a\u4e00\u4e2a\u52a8\u6001\u7684\u3001\u4e0e\u8ba1\u7b97\u673a\u8d44\u6e90\u4e92\u52a8\u7684\u5b9e\u4f53\uff0c\u8fd9\u4e2a\u5b9e\u4f53\u5c31\u662f\u8fdb\u7a0b(process)\u3002</p> <p>\u8fdb\u7a0b\u662f\u662f\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u4e00\u4e2a\u72ec\u7acb\u5355\u4f4d\uff0c\u5b83\u4ee5\u7279\u5b9a\u5f62\u5f0f\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\uff0c\u5177\u6709\u4e00\u5b9a\u7684\u5c01\u95ed\u6027\uff0c\u662f\u591a\u9053\u6280\u672f\u7684\u91cd\u8981\u57fa\u7840\u3002</p>"},{"location":"OS/OS2/#_2","title":"\u8fdb\u7a0b\u7684\u5f62\u5f0f","text":"<p>\u524d\u9762\u6211\u4eec\u63d0\u5230\uff0c\u8fdb\u7a0b\u52a8\u6001\u5730\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u9664\u4e86\u547d\u4ee4\u4ee5\u5916\uff0c\u8fd8\u5305\u62ec\u5176\u8fd0\u884c\u65f6\u7684\u52a8\u6001\u4fe1\u606f\u3002\u62bd\u8c61\u6765\u8bf4\uff0c\u4e3b\u8981\u5305\u542b\u8fd9\u4e09\u4e2a\u7ef4\u5ea6\uff1a\u2460 \u7528\u6765\u8dd1\u7684\u4ee3\u7801\uff1b\u2461 \u8dd1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u65ad\u4f1a\u88ab\u66f4\u65b0\u7684\u6570\u636e\uff1b\u2462 \u7528\u6765\u7ef4\u62a4\u3001\u63a7\u5236\u8fdb\u7a0b\u7684\u63a7\u5236\u4fe1\u606f\u3002</p> <p>\u8fdb\u7a0b\u5728\u5185\u5b58\u4e2d\u5b58\u5728\u9700\u8981\u4e00\u5757\u865a\u62df\u7684\u5730\u5740\u7a7a\u95f4\u4ee5\u5b58\u50a8\u4e0a\u8ff0\u8fd9\u4e9b\u5185\u5bb9\u3002\u5176\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff0c\u5373\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u7528\u6237\u90e8\u5206\u548c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5185\u6838\u90e8\u5206\u3002</p> <p>\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5c06\u4f1a\u5728\u540e\u9762\u7684\u7ae0\u8282\u4e2d\u8be6\u7ec6\u8bb2\u89e3\uff0c\u8bfb\u8005\u53ef\u4ee5\u8003\u8651\u8bbf\u95ee\u94fe\u63a5\u7b80\u5355\u77a5\u4e00\u773c\u7559\u4e2a\u5370\u8c61\u3002</p> <p>\u4e0b\u56fe\u662f\u8fdb\u7a0b\u5728\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7528\u6237\u90e8\u5206\u7684\u7ec4\u6210\uff1a</p> <p>\u7528\u6237\u90e8\u5206</p> <p> </p> <ul> <li>Text section:<ul> <li>\u5b58\u50a8\u4ee3\u7801\uff1b</li> </ul> </li> <li>Data section:<ul> <li>\u5b58\u50a8\u4ee3\u7801\u4e2d\u7684\u5168\u5c40\u53d8\u91cf\u3001\u9759\u6001\u53d8\u91cf\uff1b</li> </ul> </li> <li>Heap section:<ul> <li>\u5e38\u8bf4\u7684\u201c\u5806\u201d\uff0c\u88ab\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\uff1b</li> </ul> </li> <li>Stack section:<ul> <li>\u5e38\u8bf4\u7684\u201c\u6808\u201d\uff0c\u5b58\u50a8\u4e00\u4e9b\u6682\u65f6\u6027\u7684\u6570\u636e\uff0c\u5982\u51fd\u6570\u4f20\u53c2\u3001\u8fd4\u56de\u503c\u3001\u5c40\u90e8\u53d8\u91cf\u7b49\uff1b</li> </ul> </li> </ul> <p>\u53ef\u4ee5\u53d1\u73b0\uff0ctext \u548c data \u90e8\u5206\u6240\u9700\u8981\u7684\u7a7a\u95f4\u5728\u4e00\u5f00\u59cb\u5c31\u88ab\u786e\u5b9a\uff0c\u800c heap \u548c stack \u90fd\u53ef\u80fd\u52a8\u6001\u7684\u6269\u5c55\u548c\u6536\u7f29\u3002\u89c2\u5bdf\u53f3\u56fe\uff0cheap \u548c stack \u662f\u76f8\u5411\u6269\u5c55\u7684\uff0c\u4e8e\u662f\u6574\u4e00\u5757\u7684\u5927\u5c0f\u80fd\u591f\u56fa\u5b9a\u4e0b\u6765\uff0c\u800c\u5728\u5185\u90e8\u8fdb\u884c\u6709\u9650\u5236\u7684\u52a8\u6001\u5206\u914d\u3002\u5f53\u7136\uff0cheap \u548c stack \u7684\u533a\u57df\u5e76\u4e0d\u4f1a\u4ea4\u53c9\u3002</p> memory layout of a C program <p></p> <p>\u4e4b\u6240\u4ee5\u628a\u6709\u521d\u59cb\u503c\u7684\u9759\u6001\u53d8\u91cf\u548c\u6ca1\u521d\u59cb\u503c\u7684\u9759\u6001\u53d8\u91cf\u5206\u5f00\u6765\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u5f00\u59cb\u53ea\u5b58\u50a8\u6ca1\u521d\u59cb\u503c\u7684\u9759\u6001\u53d8\u91cf\u7684\u5927\u5c0f\uff0c\u800c\u5728\u771f\u6b63\u7b2c\u4e00\u6b21\u8bbf\u95ee\u7684\u65f6\u5019\u624d\u5206\u914d\u5185\u5b58\uff0c\u4ee5\u6b64\u6765\u5b9e\u73b0\u51cf\u5c11\u5185\u5b58\u5360\u7528\u3002</p> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u672a\u521d\u59cb\u5316\u7684\u9759\u6001\u53d8\u91cf\u4e00\u822c\u90fd\u88ab\u653e\u5728 <code>.bss</code> \u6bb5\uff0c\u800c\u5728\u88ab\u521d\u59cb\u5316\u7684\u65f6\u5019\u79fb\u52a8\u5230 <code>.data</code> \u6bb5\u3002[^1]</p> <p></p> <p>\u800c\u653e\u5728\u5185\u6838\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u5219\u66f4\u4fa7\u91cd\u4e8e\u8fdb\u7a0b\u7684\u63a7\u5236\u4fe1\u606f\uff0c\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u8fdb\u7a0b\u63a7\u5236\u5757(process control block, PCB)\u3002</p> <p>\u5185\u6838\u90e8\u5206</p> <p>\u8fdb\u7a0b\u63a7\u5236\u5757(process control block, PCB)\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7528\u6765\u63cf\u8ff0\u8fdb\u7a0b\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5305\u542b\u4e86\u8fdb\u7a0b\u7684\u6240\u6709\u4fe1\u606f\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784\u4e4b\u4e00\u3002\u53ef\u4ee5\u8bf4\uff0cPCB \u662f\u8fdb\u7a0b\u5b58\u5728\u7684\u552f\u4e00\u6807\u5fd7\u3002</p> <p>\u901a\u5e38\u6765\u8bf4\uff0cPCB \u53ef\u80fd\u5305\u542b\u8fd9\u4e9b\u5185\u5bb9\uff1a</p> <p> </p> <ul> <li>Process state:<ul> <li>\u8fdb\u7a0b\u7684\u72b6\u6001\uff1b</li> </ul> </li> <li>Program counter:<ul> <li>\u6807\u8bc6\u8be5\u8fdb\u7a0b\u8dd1\u5230\u4e86\u54ea\u91cc\uff0c\u7531\u4e8e\u8fdb\u7a0b\u662f\u52a8\u6001\u7684\uff0c\u6bcf\u4e00\u88ab\u5207\u6362\u90fd\u9700\u8981\u4fdd\u8bc1\u4e0b\u4e00\u6b21\u80fd\u65e0\u7f1d\u8854\u63a5\u4e4b\u524d\u7684\u8fdb\u5ea6\uff0c\u6240\u4ee5\u9700\u8981\u5b58\u50a8\u6bcf\u6b21\u7684\u5de5\u4f5c\u72b6\u6001\uff1b</li> </ul> </li> <li>CPU registers:<ul> <li>\u4fdd\u5b58\u8fdb\u7a0b\u76f8\u5173\u7684\u5bc4\u5b58\u5668\u4fe1\u606f\uff1b</li> </ul> </li> <li>CPU-scheduling information:<ul> <li>CPU \u8c03\u5ea6\u53c2\u8003\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u4f18\u5148\u7ea7\u3001\u8c03\u5ea6\u961f\u5217\u7684\u6307\u9488\u3001\u8c03\u5ea6\u53c2\u6570\u7b49\uff1b</li> </ul> </li> <li>Memory-management information:<ul> <li>\u5305\u62ec\u9875\u8868\u3001\u6bb5\u8868\u7b49\u4fe1\u606f\uff0c\u5177\u4f53\u4e0e\u5b9e\u73b0\u7684\u5185\u5b58\u7cfb\u7edf\u6709\u5173\uff1b</li> </ul> </li> <li>Accounting information\uff1a<ul> <li>\u4e00\u4e9b\u5173\u4e8e\u8fdb\u7a0b\u7684\u52a8\u6001\u6570\u636e\u7684\u7edf\u8ba1\u548c\u8bb0\u5f55\uff0c\u6bd4\u5982\u603b\u5171\u5df2\u7ecf\u8dd1\u4e86\u591a\u4e45\u3001\u65f6\u95f4\u9650\u5236\u3001\u8fdb\u7a0b\u53f7\u7b49\uff1b</li> </ul> </li> <li>I/O status information:<ul> <li>\u88ab\u5206\u914d\u7ed9\u8fdb\u7a0b\u7684 I/O \u8bbe\u5907\u5217\u8868\u3001\u6253\u5f00\u7684\u6587\u4ef6\u5217\u8868\u7b49\uff1b</li> </ul> </li> </ul> <p>\u4e24\u4e2a\u90e8\u5206\u5728\u903b\u8f91\u4e0a\u7684\u5173\u7cfb\u662f\uff0c\u7528\u6237\u90e8\u5206\u5212\u5206\u5e76\u5b9e\u9645\u5b58\u50a8\u8fdb\u7a0b\u6240\u9700\u8981\u7684\u6570\u636e\u8d44\u6e90\uff08\u5305\u62ec\u7a0b\u5e8f\u8fd0\u884c\u7684\u4ee3\u7801\uff09\uff0c\u800c\u5185\u6838\u90e8\u5206\u5b58\u50a8\u8fdb\u7a0b\u7684\u5143\u6570\u636e\uff0c\u5305\u62ec\u63a7\u5236\u4fe1\u606f\u4e0e\u7528\u6237\u90e8\u5206\u4e2d\u5404\u4e2a\u90e8\u5206\u5185\u5b58\u7684\u5206\u914d\u548c\u4f7f\u7528\u60c5\u51b5\u3002</p>"},{"location":"OS/OS2/#_3","title":"\u8fdb\u7a0b\u7684\u72b6\u6001","text":"<p>\u5728\u5355\u673a\u8bed\u5883\u4e0b\uff0c\u8fdb\u7a0b\u8c03\u5ea6\u4e00\u4e2a\u6bd4\u8f83\u6838\u5fc3\u7684\u90e8\u5206\u5c31\u662f\u5c06 CPU \u8d44\u6e90\u7ed9\u54ea\u4e2a\u4efb\u52a1\u7528\u3002\u800c\u5e76\u4e0d\u662f\u4efb\u4f55\u8fdb\u7a0b\u5728\u4efb\u4f55\u65f6\u523b\u90fd\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f97 CPU \u8d44\u6e90\u5e76\u76f4\u63a5\u5f00\u59cb\u4f7f\u7528\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5bf9\u8fdb\u7a0b\u7684\u72b6\u6001\u8fdb\u884c\u5efa\u6a21\u3002</p> <p> </p> <ul> <li><code>new</code>:<ul> <li>\u8fdb\u7a0b\u6b63\u5728\u521b\u5efa\u8fc7\u7a0b\u4e2d\uff0c\u5305\u62ec\u7533\u8bf7 PCB\uff0c\u5206\u914d\u521d\u59cb\u8d44\u6e90\u7b49\uff1b</li> </ul> </li> <li><code>running</code>:<ul> <li>\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c\uff0c\u5373\u6b63\u5728\u4f7f\u7528 CPU \u8d44\u6e90\uff1b</li> <li>\u6709\u51e0\u4e2a\u6838\u5c31\u6700\u591a\u6709\u51e0\u4e2a\u8fdb\u7a0b\u5904\u4e8e <code>running</code> \u72b6\u6001\uff1b</li> </ul> </li> <li><code>ready</code>:<ul> <li>\u8fdb\u7a0b\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\uff0c\u53ea\u5dee CPU \u8d44\u6e90\uff0c\u4e00\u65e6\u6709 CPU \u8d44\u6e90\u5f85\u5206\u914d\uff0c\u5c31\u4f1a\u6709\u5c31\u7eea\u6001\u7684\u8fdb\u7a0b\u53d8\u4e3a\u8fd0\u884c\u6001\uff1b</li> <li>\u5982\u679c\u6709\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u6001\uff0c\u5c31\u4e00\u5b9a\u6709\u8fdb\u7a0b\u5904\u4e8e\u8fd0\u884c\u6001\uff1b</li> <li>CPU \u8c03\u5ea6\u5b9e\u9645\u4e0a\u6307\u7684\u5c31\u662f\u82e5\u5e72\u8fdb\u7a0b\u5728\u5c31\u7eea\u6001\u548c\u8fd0\u884c\u6001\u4e4b\u95f4\u7684\u5207\u6362\uff1b</li> </ul> </li> <li><code>waiting</code>:<ul> <li>\u8fdb\u7a0b\u6b63\u5728\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u6bd4\u5982\u7b49\u5f85 I/O \u5b8c\u6210\u3001\u7b49\u5f85\u67d0\u4e2a\u4fe1\u53f7\u91cf\u7b49\uff1b</li> <li>\u6b64\u65f6\u5373\u4f7f\u6709\u7a7a\u4f59\u7684 CPU \u8d44\u6e90\uff0c\u8be5\u8fdb\u7a0b\u4e5f\u65e0\u6cd5\u7ee7\u7eed\uff1b</li> <li>\u4e00\u822c\u8fdb\u7a0b\u4ece\u8fd0\u884c\u6001\u8fdb\u5165\u963b\u585e\u6001\u662f\u4e3b\u52a8\u7684\uff0c\u79bb\u5f00\u963b\u585e\u6001\u8fdb\u5165\u5c31\u7eea\u6001\u662f\u88ab\u52a8\u7684\uff1b</li> </ul> </li> <li><code>terminated</code>:<ul> <li>\u8fdb\u7a0b\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\u7ec8\u6b62\uff0c\u7ed3\u675f\u8fd0\u884c\uff0c\u9700\u8981\u91ca\u653e\u8d44\u6e90\uff1b</li> </ul> </li> </ul> <p>\u8fdb\u7a0b\u5728\u5c31\u7eea\u6001\u9700\u8981\u7b49\u5f85 CPU \u8d44\u6e90\u7684\u6d3e\u53d1(dispatch)\uff0c\u63a5\u53d7\u8c03\u5ea6\uff1b\u5728\u963b\u585e\u6001\u9700\u8981\u7b49\u5f85\u5bf9\u5e94\u7684 I/O \u5b8c\u6210\u6216\u4e8b\u4ef6\u5b8c\u6210\uff0c\u56e0\u800c\u5b58\u5728\u4e00\u79cd\u7ed3\u6784\u9700\u8981\u53bb\u7ef4\u62a4\u8fd9\u4e9b\u201c\u76f8\u5bf9\u9759\u6b62\u201d\u7684\u8fdb\u7a0b\u3002\u901a\u5e38\u4f7f\u7528\u5c31\u7eea\u961f\u5217(ready queue)\u548c\u7b49\u5f85\u961f\u5217(wait queue)\u6765\u5b9e\u73b0\uff0c\u5176\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u7531\u4e8e\u7b49\u5f85\u7684 I/O \u6216\u4e8b\u4ef6\u4e0d\u540c\uff0c\u53ef\u80fd\u7ef4\u62a4\u591a\u4e2a\u7b49\u5f85\u961f\u5217\uff0c\u4e8e\u662f\u5b9e\u9645\u8fc7\u7a0b\u4e2d\u7684\u60c5\u51b5\u53ef\u80fd\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"OS/OS2/#_4","title":"\u8fdb\u7a0b\u7ba1\u7406","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u8fdb\u7a0b\u7684\u5f62\u5f0f\u548c\u4e00\u4e2a\u4e2a\u79bb\u6563\u7684\u72b6\u6001\uff0c\u73b0\u5728\u6211\u4eec\u6765\u8bb2\u8bb2\u8fdb\u7a0b\u5728\u51e0\u4e2a\u9636\u6bb5\u7684\u52a8\u6001\u8fc7\u7a0b\u3002</p> <p>\u7528\u6237\u8fdb\u7a0b\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u603b\u4f53\u4e0a\u6765\u8bb2\u9075\u5faa\u4e00\u4e2a\u6811\u72b6\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\u7b26\u8fdb\u7a0b\u53f7\uff08\u901a\u5e38\u88ab\u79f0\u4e3a pid\uff0c\u4f46\u5728\u7279\u5b9a\u8bed\u5883\u4e0b\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u542b\u4e49\uff09\u3002\u5982\u4e0b\u56fe\u662f Linux \u7684\u4e00\u4e2a\u8fdb\u7a0b\u6811\u3002</p> <p></p> <p>\u4f60\u4e5f\u53ef\u4ee5\u5728 Linux \u4e2d\u4f7f\u7528 <code>pstree</code> \u6765\u67e5\u770b\u8fdb\u7a0b\u6811\u3002 \u8a00\u4e0b\u4e4b\u610f\u5c31\u662f\u8fdb\u7a0b\u4e4b\u95f4\u5b58\u5728\u4e00\u79cd\u7236\u5b50\u5173\u7cfb\uff0c\u5373 child \u8fdb\u7a0b\u662f\u7531 parent \u8fdb\u7a0b\u521b\u5efa\u7684\uff0c\u56e0\u6b64\u8fdb\u7a0b\u9664\u4e86\u81ea\u5df1\u7684 <code>pid</code> \u8fd8\u6709 <code>ppid</code> \u6765\u6807\u8bc6\u5b83\u7684 parent \u8fdb\u7a0b\u3002</p>"},{"location":"OS/OS2/#_5","title":"\u8fdb\u7a0b\u7684\u521b\u5efa","text":"<p>child \u8fdb\u7a0b\u7684\u8d44\u6e90\u53ef\u80fd\u76f4\u63a5\u6765\u81ea\u64cd\u4f5c\u7cfb\u7edf\u7684\u5206\u914d\uff0c\u4e5f\u53ef\u80fd\u6765\u81ea parent \u8fdb\u7a0b\u7684\u5206\u914d\uff0c\u9650\u5236\u4f7f\u7528\u540e\u8005\u7684\u597d\u5904\u662f\u80fd\u591f\u907f\u514d\u56e0\u4e3a\u521b\u5efa\u592a\u591a\u5b50\u8fdb\u7a0b\u800c\u5bfc\u81f4\u8d44\u6e90\u4e0d\u591f\u7528\u3002\u7279\u522b\u7684\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u8fd9\u68f5\u6811\u7684\u6839\u662f <code>systemd</code>\uff0c\u5386\u53f2\u4e0a\u4e5f\u66fe\u53eb\u8fc7 <code>init</code>\uff0c\u5b83\u662f\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u540e\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7528\u6237\u8fdb\u7a0b\uff0c\u81f3\u5c11\u5728 Linux \u4e2d\uff0c\u5b83\u7684 <code>pid</code> \u88ab\u5206\u914d\u4e3a 1\uff0c\u800c\u5b83\u7684 <code>ppid</code> \u662f 0\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u4e2a\u8fdb\u7a0b\u7684 parent \u662f scheduler \u800c\u975e\u4e00\u4e2a\u8fdb\u7a0b[^2]\u3002</p> <p>\u5728 Linux \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>fork</code> \u6765\u521b\u5efa\u4e00\u4e2a child \u8fdb\u7a0b\uff0c\u5728\u8fd9\u91cc\u5148\u5f15\u5165\u5982\u4f55\u5b9e\u73b0\u662f\u4e3a\u4e86\u5f15\u5165\u4e00\u4e2a\u53ef\u4ee5\u501f\u6765\u63cf\u8ff0\u8fc7\u7a0b\u7684\u8bed\u8a00\uff0c\u6211\u4eec\u4ee5\u4e0b\u9762\u7684 C \u7a0b\u5e8f\u4e3a\u4f8b\u5c55\u5f00\u4e4b\u540e\u7684\u8ba8\u8bba\u3002</p> <p>\u5173\u4e8e\u5e26 <code>fork</code> \u7684\u7a0b\u5e8f\u5206\u6790\u662f\u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u70b9\uff0c\u8bf7\u786e\u4fdd\u81ea\u5df1\u80fd\u6bd4\u8f83\u6d41\u7545\u5730\u5206\u6790\u76f8\u5173\u7a0b\u5e8f\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main() {\n    printf(\"A process starts!\\n\");\n\n    pid_t pid;\n    pid = fork();\n\n    if (pid &lt; 0) {\n        printf(\"Fork failed!\\n\");\n    } else if (pid == 0) {\n        // sleep(1);\n        printf(\"pid is zero, so it's child process!\\n\");\n    } else {\n        // wait(NULL);\n        // sleep(1);\n        printf(\"pid is nonzero thus it's parent process!\\n\");\n    }\n}\n</code></pre> <p>\u7b2c 10 \u884c\u9ad8\u4eae\u7684 <code>fork()</code> \u8bed\u53e5\u521b\u5efa\u4e86\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8be5\u8fdb\u7a0b\u53ea\u6709\u8fdb\u7a0b\u53f7\u4e0e parent \u8fdb\u7a0b\u4e0d\u4e00\u6837\uff0c\u540c\u65f6\u901a\u8fc7\u68c0\u67e5\u8fd4\u56de\u503c <code>pid</code> \u6765\u5224\u65ad\u5c5e\u4e8e parent \u8fd8\u662f child\u3002</p> <p>\u5982\u679c\u7b2c 18 \u884c\u4ecd\u7136\u88ab\u6ce8\u91ca\uff0c\u90a3\u4e48 parent \u8fdb\u7a0b\u548c child \u8fdb\u7a0b\u5c06\u5e76\u53d1\u6267\u884c\uff0c\u5373\u5b8c\u6210 <code>fork()</code> \u540e\u4e24\u4e2a\u8fdb\u7a0b\u90fd\u4ece 11 \u884c\u5f00\u59cb\u7ee7\u7eed\u5411\u4e0b\u5e76\u53d1\u7684\u6267\u884c\uff0c\u4e92\u4e0d\u963b\u585e\uff1b\u5982\u679c 18 \u884c\u7684\u6ce8\u91ca\u88ab\u53d6\u6d88\uff0c\u90a3\u4e48 parent \u8fdb\u7a0b\u5c06\u7b49\u5f85 child \u8fdb\u7a0b\u7ed3\u675f\u540e\u518d\u7ee7\u7eed\u3002\u8bfb\u8005\u53ef\u4ee5\u5c1d\u8bd5\u6392\u5217\u7ec4\u5408\u4e24\u4e2a\u6ce8\u91ca\u6765\u89c2\u5bdf\u7a0b\u5e8f\u8fd0\u884c\u7684\u7ed3\u679c\u4f1a\u5982\u4f55\u53d8\u5316\u3002</p> <p>\u903b\u8f91\u4e0a\u521b\u5efa\u7684\u65b0\u8fdb\u7a0b\u6709\u4e24\u79cd\u60c5\u51b5\uff1a</p> <ol> <li>\u590d\u5236 parent \u8fdb\u7a0b\u7684\u4ee3\u7801\u6570\u636e\uff1b</li> <li>\u8f7d\u5165\u65b0\u7684\u7a0b\u5e8f\u5e76\u7ee7\u7eed\u6267\u884c\uff1b</li> </ol> <p>\u800c\u5b9e\u9645\u5728 Linux \u4e2d\uff0c\u7b2c\u4e00\u79cd\u901a\u8fc7 <code>fork()</code> \u5b9e\u73b0\uff0c\u7b2c\u4e8c\u79cd\u901a\u8fc7 <code>fork()</code> \u540e <code>execXX()</code> \u5b9e\u73b0\uff0c<code>execXX()</code> \u4f1a\u8986\u76d6\u90a3\u4e2a\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4ee5\u5b9e\u73b0\u6267\u884c\u5176\u4ed6\u7a0b\u5e8f\u3002[^3]^,^[^4]</p> <p> <p>copy on write</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0cfork \u7684\u590d\u5236\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5e26\u6765\u8f83\u5927\u7684\u5f00\u9500\u3002\u6240\u4ee5\u6709\u4e00\u79cd\u6280\u672f\u79f0\u4e3a copy on write\uff0c\u4e5f\u5c31\u662f\u53ea\u6709\u5f53\u9700\u8981\u53d1\u751f\u5185\u5bb9\u4fee\u6539\u7684\u65f6\u5019\uff0c\u624d\u771f\u6b63\u53bb\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u5185\u5bb9\uff0c\u4e5f\u5c31\u662f\u4e00\u79cd \u201clazy copy\u201d\u3002</p> <p>\u672c\u5757\u5185\u5bb9\u4e8e\u865a\u62df\u5185\u5b58\u76f8\u5173\u7684\u5185\u5bb9\u6709\u5173\uff0c\u5982\u679c\u8bfb\u8005\u60f3\u4e0d\u660e\u767d\u5177\u4f53\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5148\u4e86\u89e3\u529f\u80fd\uff0c\u5728\u4e4b\u540e\u5b66\u4e60\u76f8\u5173\u5185\u5bb9\u540e\u6211\u4f1a\u518d\u6b21\u63d0\u9192\u8bfb\u8005\u56de\u987e\u8be5\u90e8\u5206\u5185\u5bb9\u3002</p> <p> <p>virtual memory fork</p> <p>\u4e00\u4e9b UNIX \u7cfb\u7edf\u63d0\u4f9b\u4e86 <code>vfork()</code> \u8fd9\u4e2a\u521b\u5efa\u8fdb\u7a0b\u7684\u65b9\u6cd5\u3002\u4e3a\u4e86\u51cf\u5c0f\u590d\u5236\u5e26\u6765\u7684\u5f00\u9500\uff0c<code>vfork()</code> \u5e72\u8106\u5c31\u4e0d\u590d\u5236\u4e86\uff0c\u76f4\u63a5\u628a\u7236\u8fdb\u7a0b\u7ed9\u963b\u585e\u6389\uff0c\u7136\u540e\u81ea\u5df1\u7528\u7236\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4e8e\u662f\u5b50\u8fdb\u7a0b\u5728\u5730\u5740\u7a7a\u95f4\u5185\u505a\u7684\u4fee\u6539\u5bf9\u7236\u8fdb\u7a0b\u662f\u53ef\u89c1\u7684\uff0c\u6240\u4ee5\uff0c\u4f7f\u7528 <code>vfork()</code> \u65f6\u9700\u8981\u5bf9\u6b64\u7279\u522b\u7559\u5fc3\u3002</p> <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u4e0a\u9762\u8fd9\u79cd\u8bed\u5883\u4e0b\uff0c\u53ef\u4ee5\u628a <code>vfork()</code> \u5f53\u4f5c\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u5f53\u524d\u8fdb\u7a0b\u7684 reference\uff0c<code>vfork</code> \u51fa\u6765\u7684\u5b50\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u7236\u8fdb\u7a0b\u5176\u5b9e\u4e5f\u5728\u201c\u540c\u6b65\u201d\u5730\u8fd0\u884c\u3002</p> <p>\u53ef\u662f\u8fd9\u6709\u5565\u7528\u5462\uff1f\u6211\u521b\u5efa\u4e00\u4e2a reference \u505a\u7684\u4e8b\u60c5\u548c\u6211\u76f4\u63a5\u505a\u7684\u4e8b\u60c5\u6ca1\u5565\u533a\u522b\u554a\uff1f</p> <p>\u662f\u7684\uff0c\u6240\u4ee5 <code>vfork()</code> \u538b\u6839\u4e0d\u662f\u8fd9\u4e48\u7528\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u7531 <code>vfork()</code> \u521b\u5efa\u51fa\u6765\u7684\u5b50\u8fdb\u7a0b\u4e00\u822c\u9a6c\u4e0a\u5c31\u4f1a\u8c03\u7528 <code>execXX()</code> \u65cf\u7684\u63a5\u53e3\uff08\u8fd9\u91cc\u5f53\u7136\u4e0d\u4f1a\u628a\u7236\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4 overwrite \u4e86\uff0c\u800c\u662f\u76f4\u63a5\u66ff\u6362\u5f53\u524d\u8fdb\u7a0b\uff09\u3002</p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u8bf7\u8bfb\u8005\u601d\u8003\uff0c\u65e2\u7136\u4e00\u822c <code>vfork()</code> \u5b8c\u4e86\u9a6c\u4e0a\u5c31 <code>execXX()</code> \u7136\u540e\u66ff\u6362\u5f53\u524d\u8fdb\u7a0b\u4e86\uff0c\u90a3\u4e3a\u4ec0\u4e48 <code>vfork()</code> \u7684\u8fdb\u7a0b\u4f1a\u4f7f\u7528\u7236\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u800c\u4e0d\u662f\u6bd4\u5982\u8bf4\u968f\u4fbf\u6307\u5411\u54ea\u91cc\uff0c\u5c31\u50cf\u91ce\u6307\u9488\u4e00\u6837\u5462\uff1f</p> \u63d0\u793a <p>\u8fd9\u4e2a\u88ab\u521b\u5efa\u51fa\u6765\u7684\u8fdb\u7a0b\u8981\u600e\u4e48\u77e5\u9053\u63a5\u4e0b\u6765\u5b83\u8981 <code>execXX()</code> \u5462\uff1f</p> <p>\u672c\u5757\u5185\u5bb9\u4e8e\u865a\u62df\u5185\u5b58\u76f8\u5173\u7684\u5185\u5bb9\u6709\u5173\uff0c\u5982\u679c\u8bfb\u8005\u60f3\u4e0d\u660e\u767d\u5177\u4f53\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5148\u4e86\u89e3\u529f\u80fd\uff0c\u5728\u4e4b\u540e\u5b66\u4e60\u76f8\u5173\u5185\u5bb9\u540e\u6211\u4f1a\u518d\u6b21\u63d0\u9192\u8bfb\u8005\u56de\u987e\u8be5\u90e8\u5206\u5185\u5bb9\u3002</p>"},{"location":"OS/OS2/#_6","title":"\u8fdb\u7a0b\u7684\u7ec8\u6b62","text":"<p>\u5f53\u8fdb\u7a0b\u8c03\u7528 <code>exit()</code> \u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u8fd9\u4e2a\u8fdb\u7a0b\u5c06\u88ab\u7ec8\u6b62\uff0c\u8fd9\u610f\u5473\u7740\u8fd9\u4e2a\u8fdb\u7a0b\u5c06\u4e0d\u518d\u6267\u884c\uff0c\u5176\u8d44\u6e90\u5c06\u88ab\u91ca\u653e\uff0c\u540c\u65f6\u8fd4\u56de\u72b6\u6001\u503c\uff0c\u800c\u8fd9\u4e2a\u72b6\u6001\u503c\u5c06\u88ab parent \u8fdb\u7a0b\u7684 <code>wait()</code> \u63a5\u6536\u3002\u7279\u522b\u7684\uff0c\u5982\u679c parent \u8fdb\u7a0b\u5c1a\u672a\u8c03\u7528 <code>wait()</code>\uff0c\u5219\u8fd9\u4e2a child \u8fdb\u7a0b\u8fd8\u4e0d\u4f1a\u5b8c\u5168\u6d88\u5931\uff0c\u56e0\u4e3a\u8981\u8fd4\u56de\u7684\u4e1c\u897f\u8fd8\u6ca1\u8fd4\u56de\uff08child \u5e76\u4e0d\u77e5\u9053 parent \u4f1a\u4e0d\u4f1a\u3001\u4ec0\u4e48\u65f6\u5019\u6765\u56de\u6536\u5b83\uff09\u3002</p> <p>\u8fd9\u79cd\u903b\u8f91\u4e0a\u5df2\u7ecf\u7ec8\u6b62\uff0c\u4f46\u4ecd\u7136\u5360\u6709\u4e00\u90e8\u5206\u8d44\u6e90\uff0c\u7b49\u5f85 parent \u8fdb\u7a0b\u8c03\u7528 <code>wait()</code> \u7684\u8fdb\u7a0b\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u50f5\u5c38\u8fdb\u7a0b(zombie)\u3002\u4e00\u4e2a\u8fdb\u7a0b\u53d8\u6210\u50f5\u5c38\u8fdb\u7a0b\u662f\u5f88\u5e38\u89c1\u7684\u3002\u5173\u952e\u5728\u4e8e\uff0c\u5982\u679c parent \u8fdb\u7a0b\u4e0d\u8c03\u7528 <code>wait()</code>\uff0c\u90a3\u7b49 parent \u7ec8\u6b62\u540e\uff0c\u8fd9\u4e2a\u50f5\u5c38\u8fdb\u7a0b\u53ef\u80fd\u4ecd\u7136\u4e00\u76f4\u5b58\u5728\u3002\u6b64\u65f6\u8fd9\u4e2a\u50f5\u5c38\u8fdb\u7a0b\u540c\u65f6\u662f\u4e00\u4e2a\u5b64\u513f\u8fdb\u7a0b(orphan)\uff0c\u5373\u6ca1\u6709 parent \u8fdb\u7a0b\u7684\u8fdb\u7a0b\u3002\u8fd9\u662f\u4e0d\u5408\u7406\u7684\u3002UNIX \u7684\u89e3\u51b3\u529e\u6cd5\u662f\uff0c\u8ba9\u6240\u6709\u5b64\u513f\u8fdb\u7a0b\u90fd\u6210\u4e3a <code>init</code>/<code>systemd</code> \u7684 child \u8fdb\u7a0b\uff0c\u7531 <code>init</code>/<code>systemd</code> \u6765 <code>wait()</code> \u5b83\u4eec\u3002</p> <p>\u5728\u67d0\u4e9b\u7cfb\u7edf\u91cc\uff0c\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u7ea7\u8054\u7ec8\u6b62(cascading termination)\u6765\u907f\u514d\u5b64\u513f\u8fdb\u7a0b\u7684\u51fa\u73b0\uff0c\u5373\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u7ec8\u6b62\u65f6\uff0c\u5b83\u7684 child \u4e5f\u5e94\u5f53\u88ab\u9012\u5f52\u5730\u7ec8\u6b62\u3002</p> daemon <p>\u5b88\u62a4\u8fdb\u7a0b^Wiki^\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8fdb\u7a0b\uff0c\u5b83\u4eec\u5728\u201c\u540e\u53f0\u201d\u957f\u671f\u8fd0\u884c\uff0c\u4f8b\u5982\u67d0\u4e9b\u6570\u636e\u5e93\u670d\u52a1\u3001\u53cd\u4ee3\u7406\u670d\u52a1\u7b49\uff0c\u800c\u975e\u50cf\u666e\u901a\u7684\u7528\u6237\u7a0b\u5e8f\u4e00\u6837\u4f9d\u8d56\u4e8e\u7528\u6237\u4ea4\u4e92\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u201c\u957f\u671f\u8fd0\u884c\u201d\uff0c\u6211\u4eec\u9700\u8981\u8ba9\u5b83\u4ee5 <code>init</code>/<code>systemd</code> \u4e3a parent\uff0c\u56e0\u4e3a\u4efb\u4f55\u5176\u5b83\u8fdb\u7a0b\u90fd\u6709\u53ef\u80fd\u5728\u64cd\u4f5c\u7cfb\u7edf\u8fd0\u884c\u7684\u65f6\u5019\u7ec8\u6b62\u3002</p> <p>\u90a3\u4e48\u4e00\u79cd\u529e\u6cd5\u5c31\u662f\u6211\u4eec\u9012\u5f52\u5730 <code>fork()</code> \u4e24\u6b21\uff0c\u7136\u540e\u7ec8\u6b62\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5373\u7ec8\u6b62\u7b2c\u4e8c\u4e2a\u8fdb\u7a0b\u7684 parent\uff0c\u8fd9\u6837\u5b83\u5c31\u80fd\u6210\u4e3a\u4e00\u4e2a\u5b64\u513f\u8fdb\u7a0b\uff0c\u8fdb\u800c\u88ab <code>init</code>/<code>systemd</code> \u63a5\u7ba1\u3002</p>"},{"location":"OS/OS2/#_7","title":"\u8fdb\u7a0b\u95f4\u901a\u4fe1","text":"<p>\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u53d7\u5230\u5176\u5b83\u8fdb\u7a0b\u7684\u5f71\u54cd\uff0c\u6216\u4f1a\u5f71\u54cd\u5176\u5b83\u8fdb\u7a0b\uff0c\u90a3\u4e48\u6211\u4eec\u79f0\u4e4b\u4e3a\u534f\u4f5c\u8fdb\u7a0b(cooperation process)\uff0c\u800c\u8fdb\u7a0b\u95f4\u901a\u4fe1(inter-process communication, IPC)\u652f\u6301\u4e86\u8fdb\u7a0b\u534f\u4f5c\uff0c\u4ee5\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u6570\u636e\u4ea4\u6362\u3002</p> <ul> <li>\u4fe1\u53f7\u91cf(semaphores)\uff1a<ul> <li>\u6211\u4eec\u5c06\u5728\u8fdb\u7a0b\u540c\u6b65\u8fd9\u4e00\u7ae0\u4e2d\u91cd\u70b9\u8bb2\u89e3\u4fe1\u53f7\u91cf\uff1b</li> </ul> </li> <li>\u5171\u4eab\u5185\u5b58(shared memory)\uff1a<ul> <li>\u76f8\u6bd4\u4e0b\u9762\u51e0\u79cd\u66f4\u5feb\uff0c\u9700\u8981\u7528\u5230 system call \u7684\u5730\u65b9\u53ea\u6709\u5efa\u7acb\u5171\u4eab\u5185\u5b58\u7684\u65f6\u5019\uff1b</li> </ul> </li> <li>\u6d88\u606f\u4f20\u9012(message passing)\uff1a<ul> <li>\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u66f4\u5bb9\u6613\u5b9e\u73b0\uff0c\u5bf9\u4e8e\u5c11\u91cf\u6570\u636e\u901a\u4fe1\u5f88\u6709\u7528\uff08\u56e0\u4e3a\u4e0d\u9700\u8981\u5904\u7406\u51b2\u7a81\u95ee\u9898\uff09\uff1b</li> </ul> </li> <li>\u6587\u4ef6 / \u7ba1\u9053(pipe)\uff1a<ul> <li>\u7ba1\u9053\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u79cd\u6587\u4ef6\uff0c\u4f46\u4e00\u4e2a\u7ba1\u9053\u53ea\u652f\u6301\u5355\u5411\u4f20\u8f93\uff0c\u5373\u53ea\u80fd A \u5199 B \u8bfb\uff0c\u5982\u679c\u8981\u5b9e\u73b0\u53cc\u5411\u9700\u8981\u4e24\u4e2a\u7ba1\u9053\uff1b</li> </ul> </li> </ul> <p> Communications models. (a) Shared memory. (b) Message passing.</p>"},{"location":"OS/OS2/#_8","title":"\u8fdb\u7a0b\u8c03\u5ea6","text":"<p>\u591a\u9053\u6280\u672f\u5f15\u5165\u540e\uff0c\u5185\u5b58\u4e2d\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u7684\u6570\u91cf\u6211\u4eec\u79f0\u4e4b\u4e3a\u591a\u9053\u7684\u5ea6(degree of multiprogramming)\u3002\u4e00\u6bb5\u65f6\u95f4\u5185\u82e5\u5e72\u8fdb\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u56e0\u6b64\u8c03\u5ea6\u95ee\u9898(scheduling)\u2014\u2014CPU scheduler \u5c06\u51b3\u5b9a\u5728\u4f55\u65f6\u5c06 CPU \u8d44\u6e90\u5206\u914d\u7ed9\u54ea\u4e00\u4e2a\u5c31\u7eea\u8fdb\u7a0b\uff0c\u4f7f\u4e4b\u8fdb\u5165\u8fd0\u884c\u6001\u2014\u2014\u8fd9\u4e2a\u95ee\u9898\u5c31\u5f88\u91cd\u8981\u4e86\u3002\u603b\u4f53\u6765\u8bb2\uff0c\u6211\u4eec\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u9ad8\u6548\u3001\u516c\u5e73\u7684\u7684\u8c03\u5ea6\uff0c\u4ee5\u6b64\u4fdd\u8bc1 CPU \u5229\u7528\u7387\u8db3\u591f\u9ad8\uff0c\u540c\u65f6\u53c8\u4fdd\u8bc1\u8ba1\u7b97\u673a\u529f\u80fd\u6b63\u5e38\u8fd0\u4f5c\u3002</p> <p> Diagram of process state.</p>"},{"location":"OS/OS2/#_9","title":"\u8c03\u5ea6\u7684\u65f6\u673a","text":"<p>\u6211\u4eec\u518d\u6b21\u5ba1\u89c6\u8fdb\u7a0b\u72b6\u6001\u7684 FSM\uff0c\u53d1\u73b0\u6240\u6709\u72b6\u6001\u90fd\u662f\u56f4\u7ed5\u7740 <code>ready</code>/<code>running</code> \u5c55\u5f00\u7684\uff0c\u800c CPU \u5177\u4f53\u8d44\u6e90\u5206\u914d\u7684\u8fc7\u7a0b\u4e5f\u6b63\u662f\u901a\u8fc7\u8fd9\u4e24\u4e2a\u72b6\u6001\u7684\u8f6c\u5316\u4f53\u73b0\u7684\u3002\u800c \u2776 \u5f53\u8fd0\u884c\u6001\u7684\u8fdb\u7a0b\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u9700\u8981\u4e3b\u52a8\u79bb\u5f00\u8fd0\u884c\u6001\u65f6\uff0c\u6216 \u2777 \u5f53\u5c31\u7eea\u6001\u7684\u67d0\u4e2a\u8fdb\u7a0b\u9700\u8981\u7acb\u523b\u5f97\u5230 CPU \u8d44\u6e90\u65f6\uff0cscheduler \u4f1a\u8fdb\u884c\u8c03\u5ea6\u3002\u4e0a\u9762\u8fd9\u53e5\u8bdd\u53cd\u5e94\u5728\u3000FSM \u4e0a\uff0c\u5c31\u662f \u2776 \u8fdb\u7a0b\u4ece\u8fd0\u884c\u6001\u8f6c\u5316\u4e3a\u5176\u5b83\u72b6\u6001\uff0c\u5373\u7bad\u5934\u4ece <code>running</code> \u51fa\u53d1\u5411\u5916\uff1b\u2777 \u8fdb\u7a0b\u4ece\u5176\u5b83\u72b6\u6001\u8f6c\u5316\u4e3a\u5c31\u7eea\u6001\uff0c\u5373\u7bad\u5934\u4ece\u5916\u6307\u5411 <code>ready</code>\uff0c\u8fd9\u91cc\u5176\u5b9e\u8fd8\u6697\u542b\u4e86\u4e00\u4e2a <code>ready</code> \u6307\u5411 <code>ready</code> \u7684\u7bad\u5934\uff0c\u5728\u4f8b\u5982 priority aging \u7684\u60c5\u51b5\u4e0b\uff0c<code>ready</code> \u4e2d\u53ef\u80fd\u7a81\u7136\u6709\u4e00\u4e2a\u4f18\u5148\u7ea7\u8db3\u591f\u5927\u4e86\u5c31\u4f1a\u53d1\u751f\u62a2\u5360\u5f0f\u8c03\u5ea6\u3002\u4e0a\u9762\u63cf\u8ff0\u7684\u8fd9\u4e24\u79cd\u65f6\u673a\u4e0b\u4ea7\u751f\u7684\u8c03\u5ea6\uff0c\u5c31\u5206\u522b\u5b9a\u4e49\u4e3a\u975e\u62a2\u5360\u5f0f\u8c03\u5ea6(non-preemptive scheduling)\u548c\u62a2\u5360\u5f0f\u8c03\u5ea6(preemptive scheduling)\u3002</p> ![Diagram of process state.](img/20.png) Diagram of process state.  <p>\u4e24\u8005\u672c\u8d28\u4e0a\u7684\u533a\u522b\u5c31\u662f\uff0c\u975e\u62a2\u5360\u5f0f\u8c03\u5ea6\u662f\u7531\u5df2\u7ecf\u62e5\u6709\u8d44\u6e90\u7684\u8fdb\u7a0b\u4e3b\u52a8\u91ca\u653e CPU \u8d44\u6e90\u5f15\u8d77\u7684\uff0c\u800c\u62a2\u5360\u5f0f\u8c03\u5ea6\u5219\u662f\u4e0d\u5360\u6709\u8d44\u6e90\u7684\u8fdb\u7a0b\u7d22\u53d6 CPU \u8d44\u6e90\u6210\u529f\u5f15\u8d77\u7684\u3002</p>"},{"location":"OS/OS2/#_10","title":"\u8c03\u5ea6\u7684\u8fc7\u7a0b","text":"<p>\u7531 CPU scheduler \u9009\u62e9\u54ea\u4e00\u4e2a\u5c31\u7eea\u6001\u7684\u5c06\u8981\u88ab\u6267\u884c\u540e\uff0c\u7531 dispatcher \u6765\u5b8c\u6210\u5177\u4f53\u7684\u5207\u6362\u5de5\u4f5c\u5305\u62ec\uff1a</p> <ol> <li>\u5728\u4e24\u4e2a\u8fdb\u7a0b\u95f4\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff1b</li> <li>\u5207\u6362\u5230\u7528\u6237\u6001\uff1b</li> <li>\u8df3\u8f6c\u5230\u7528\u6237\u7a0b\u5e8f\u4e2d\u5408\u9002\u7684\u4f4d\u7f6e\u4ee5\u7ee7\u7eed\u8fdb\u7a0b\u6267\u884c\uff1b</li> </ol> <p>\u800c\u4ece dispatcher \u505c\u6b62\u4e0a\u4e00\u4e2a\u8fd0\u884c\u65f6\u7684\u8fdb\u7a0b\uff0c\u5b8c\u6210\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u5e76\u542f\u52a8\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5ef6\u65f6\uff0c\u79f0\u4e3a dispatch latency\u3002</p> <p></p> <p>\u4e0a\u4e0b\u6587\u5207\u6362</p> <p>\u5207\u6362\u8fdb\u7a0b\u7684\u65f6\u5019\u9700\u8981\u4fdd\u5b58\u201c\u73b0\u573a\u201d\uff0c\u5e76\u5728\u4e0b\u4e00\u6b21\u62ff\u51fa\u8fd9\u4e2a\u8fdb\u7a0b\u51c6\u5907\u6267\u884c\u4e4b\u524d\u6062\u590d\u201c\u73b0\u573a\u201d\uff0c\u4ee5\u6b64\u6765\u4fdd\u8bc1\u8fdb\u7a0b\u6267\u884c\u7684\u4e00\u81f4\u6027\u3002\u8fd9\u91cc\u63d0\u5230\u7684\u201c\u73b0\u573a\u201d\u88ab\u79f0\u4e3a\u4e0a\u4e0b\u6587(context)\uff0c\u8868\u793a\u4e00\u79cd\u201c\u8bed\u5883\u201d\uff1b\u800c\u4fdd\u62a4-\u6062\u590d\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u4e0a\u9762\u63d0\u5230\u7684\u4e0a\u4e0b\u6587\u5207\u6362(context switch)\u3002</p> <p>\u5176\u4e2d\uff0c\u4e0a\u4e0b\u6587\u53ef\u80fd\u5305\u62ec \u2460 CPU \u5bc4\u5b58\u5668\u4e2d\u7684\u503c\uff0c\u2461 \u8fdb\u7a0b\u72b6\u6001\uff0c\u2462 \u5185\u5b58\u7684\u7ba1\u7406\u4fe1\u606f\u7b49\u3002</p> <p>\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u76f8\u5173\u5185\u5bb9\u5728 lab1 \u91cc\u6709\u6240\u6d89\u53ca\uff0c\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002</p> ![(a) Diagram showing context switch from process to process. (b) Role of dispatcher.](img/16.png) (a) Diagram showing context switch from process to process. (b) Role of dispatcher."},{"location":"OS/OS2/#_11","title":"\u8c03\u5ea6\u7b97\u6cd5","text":"<p>\u5728\u8ba8\u8bba\u6709\u54ea\u4e9b\u8c03\u5ea6\u7b97\u6cd5\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u77e5\u9053\u600e\u6837\u7b97\u4e00\u4e2a\u597d\u7684\u8c03\u5ea6\u7b97\u6cd5\u3002\u7c7b\u4f3c\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bc4\u4ef7\uff0c\u8c03\u5ea6\u7b97\u6cd5\u7684\u8bc4\u4ef7\u6807\u51c6\u4e5f\u4e0d\u662f\u5355\u4e00\u7684\uff1b\u5bf9\u5e94\u7684\uff0c\u4e0d\u540c\u8c03\u5ea6\u7b97\u6cd5\u6709\u5404\u81ea\u7684\u4f18\u7f3a\u70b9\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u548c\u9700\u6c42\u6709\u6240\u9009\u62e9\u3002\u901a\u5e38\u6765\u8bf4\u6709\u8fd9\u4e9b\u8c03\u5ea6\u7b97\u6cd5\u7684\u6307\u6807(scheduling criteria)\uff1a</p> <ul> <li>CPU \u4f7f\u7528\u7387(CPU utilization)\uff1a<ul> <li>CPU \u4f7f\u7528\u65f6\u95f4 / \u603b\u65f6\u95f4\uff0c\u4ece CPU \u662f\u5426\u8db3\u591f\u5fd9\u788c\u6765\u770b\u786c\u4ef6\u6027\u80fd\u662f\u5426\u5145\u5206\u53d1\u6325\uff1b</li> </ul> </li> <li>\u541e\u5410\u91cf(throughput)\uff1a<ul> <li>\u5355\u4f4d\u65f6\u95f4\u5185\u5b8c\u6210\u7684\u8fdb\u7a0b\u6570\uff0c\u4ece\u7ed3\u679c\u6765\u770b\u4efb\u52a1\u5b8c\u6210\u662f\u5426\u8db3\u591f\u9ad8\u6548\uff1b</li> </ul> </li> <li>\u5468\u8f6c\u65f6\u95f4(turnaround time)\uff1a<ul> <li>\u4ece\u8fdb\u7a0b\u5f00\u59cb\u5efa\u7acb\u5230\u8fdb\u7a0b\u5b8c\u6210\u7684\u65f6\u95f4\uff0c\u5373\u5305\u62ec\u7b49\u5f85\u8fdb\u5165\u5185\u5b58\u3001\u5728\u5404\u79cd queue \u4e2d\u7684\u7b49\u5f85\u65f6\u95f4\u3001\u5728 CPU \u4e2d\u7684\u8fd0\u884c\u65f6\u95f4\u3001I/O \u65f6\u95f4\u7b49\uff0c\u901a\u8fc7\u89c2\u5bdf\u6700\u5927\u5468\u8f6c\u65f6\u95f4\uff0c\u80fd\u53cd\u6620\u8c03\u5ea6\u7684\u6548\u7387\u548c\u201c\u516c\u5e73\u6027\u201d\uff1b</li> </ul> </li> <li>\u7b49\u5f85\u65f6\u95f4(waiting time)\uff1a<ul> <li>\u8fdb\u7a0b\u5728 ready queue \u4e2d\u7b49\u5f85\u7684\u65f6\u95f4\u7684\u603b\u548c\uff0c\u7531\u4e8e\u4efb\u52a1\u6240\u9700\u8981\u7684 CPU \u65f6\u95f4\u3001I/O \u65f6\u95f4\u4e0d\u53d7\u8c03\u5ea6\u7b97\u6cd5\u5f71\u54cd\uff0c\u6240\u4ee5\u629b\u5f00\u8fd9\u4e9b\u53ea\u770b\u5728 ready queue \u4e2d\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u80fd\u53cd\u6620\u8c03\u5ea6\u7b97\u6cd5\u7684\u6548\u7387\uff1b</li> <li>\u5bb9\u6613\u53d1\u73b0\uff0c\u7b49\u5f85\u65f6\u95f4 = \u5468\u8f6c\u65f6\u95f4 - \u8fd0\u884c\u65f6\u95f4\uff1b</li> </ul> </li> <li>\u54cd\u5e94\u65f6\u95f4(response time)\uff1a<ul> <li>\u8fdb\u7a0b\u4ece\u53d1\u51fa\u8bf7\u6c42\u5230\u7b2c\u4e00\u6b21\u54cd\u5e94\u7684\u65f6\u95f4\uff0c\u80fd\u53cd\u5e94\u4ea4\u4e92\u5f0f\u7cfb\u7edf\u4e2d\u8c03\u5ea6\u7b97\u6cd5\u7684\u201c\u53ca\u65f6\u6027\u201d\uff1b</li> </ul> </li> </ul> <p>\u4e0a\u9762\u4e94\u4e2a\u91cc\uff0c\u524d\u4e24\u4e2a\u8d8a\u5927\u8d8a\u597d\uff0c\u540e\u4e09\u4e2a\u8d8a\u5c0f\u8d8a\u597d\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u5f00\u59cb\u4ecb\u7ecd\u5404\u79cd\u8c03\u5ea6\u7b97\u6cd5\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u4e0b\u8c03\u5ea6\u7b97\u6cd5\u4e2d\u5b58\u5728\u4e00\u4e9b\u7406\u60f3\u5316\u7684\u5efa\u6a21\uff08\u4f8b\u5982\u5047\u8bbe\u6211\u4eec\u77e5\u9053\u8fdb\u7a0b\u9700\u8981\u4f7f\u7528\u591a\u4e45 CPU\uff09\uff0c\u800c\u6211\u4eec\u91cd\u70b9\u9700\u8981\u638c\u63e1\u5b83\u7684\u601d\u8def\uff0c\u505a\u5230\u80fd\u753b\u7518\u7279\u56fe\u3001\u80fd\u7b97\u65f6\u95f4\u3002\u6b64\u5916\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5\u201c\u591a\u9053\u201d\u4e3a\u8bed\u5883\uff0c\u5373\u5982\u679c\u4e0d\u662f\u7279\u522b\u8bf4\u660e\uff0c\u4e0d\u8003\u8651\u5206\u65f6\u6280\u672f\u3002</p> <p></p>"},{"location":"OS/OS2/#first-come-first-serve-fcfs","title":"\u7b97\u6cd5 | First-Come, First-Serve (FCFS)","text":"<p>FCFS \u662f\u6700\u57fa\u672c\u7684\u975e\u62a2\u5360\u5f0f\u8c03\u5ea6\u65b9\u6cd5\u5c31\u662f\u6309\u7167\u8fdb\u7a0b\u5148\u6765\u540e\u5230\u7684\u987a\u5e8f\u8fdb\u884c\u8c03\u5ea6\uff0c\u53ef\u4ee5\u5f88\u7b80\u5355\u5730\u901a\u8fc7\u4e00\u4e2a FIFO \u7684\u961f\u5217\u5b9e\u73b0\u3002FCFS \u6700\u5927\u7684\u4f18\u70b9\u5c31\u662f\u5b9e\u73b0\u7b80\u5355\u3002</p> <p></p>"},{"location":"OS/OS2/#shortest-job-first-sjf-shortest-remaining-time-first-srtf","title":"\u7b97\u6cd5 | Shortest-Job-First (SJF) / Shortest-Remaining-Time-First (SRTF)","text":"<p>SJF \u7684\u601d\u8def\u662f\uff0c\u5f53\u6709\u591a\u4e2a\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u6001\u65f6\uff0c\u9009\u62e9\u9700\u8981\u8fd0\u884c\u65f6\u95f4\u6700\u77ed\u7684\u8fdb\u7a0b\u5148\u8fd0\u884c\u3002\u8fd9\u79cd\u7b97\u6cd5\u7684\u4f18\u70b9\u662f\uff0c\u80fd\u591f\u4fdd\u8bc1\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u6700\u5c0f\uff1b\u4f46\u662f\u7f3a\u70b9\u662f\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u8fdb\u7a0b\u9700\u8981\u8fd0\u884c\u65f6\u95f4\u5f88\u957f\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u4f1a\u4e00\u76f4\u88ab\u63a8\u8fdf\uff0c\u4ece\u800c\u5bfc\u81f4\u201c\u9965\u997f\u201d\u73b0\u8c61\uff0c\u6b64\u5916\uff0c\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u8fdb\u7a0b\u8fd0\u884c\u65f6\u95f4\u6709\u591a\u4e45\u3002</p> \ud83c\udf30 <p>=== \"\u9898\u9762\"</p> <pre><code>\u73b0\u5728\u6709\u4e09\u4e2a\u8fdb\u7a0b\uff0c\u5b83\u4eec\u5c06\u8981\u6267\u884c\u7684\u65f6\u95f4\u5206\u522b\u5982\u4e0b\uff1a\n\n- P1: 24\n- P2: 3\n- P3: 3\n\n\u73b0\u5728\u5b83\u4eec\u6309\u7167\u987a\u5e8f\u8fdb\u5165 ready queue\uff0c\u8bf7\u5206\u522b\u8ba1\u7b97 FCFS \u4e0b\u548c SJF \u4e0b\u7684\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u3002\n</code></pre> <p>=== \"\u89e3\u6790\"</p> <pre><code>\u753b\u51fa\u4e24\u8005\u7684\u7518\u7279\u56fe\uff1a\n\n&lt;center&gt; ![](img/65.png){ width=80% } &lt;/center&gt;\n\n\u9996\u5148\u770b FCFS\uff0c\u5373\u6309\u7167\u987a\u5e8f\u6267\u884c\uff0c\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u4e3a $(0 + 24 + 27) / 3 = 17$\u3002\n\n\u73b0\u5728\u6309\u7167 SJF \u6765\uff0c\u987a\u5e8f\u53d8\u4e3a P2 \u548c P3 \u5148\u6267\u884c\uff0c\u518d\u6267\u884c P1\uff0c\u4e8e\u662f\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u4e3a $(0 + 3 + 6) / 3 = 3$\u3002\n\n---\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u4f7f\u7528 SJF \u4ee5\u540e\u5bf9\u4e8e\u8fd9\u79cd\u524d\u9762\u653e\u4e86\u4e2a\u5927\u4efb\u52a1\u7684\u60c5\u51b5\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u5927\u5927\u51cf\u5c11\u3002\n</code></pre> <p>\u8fd9\u79cd\u505a\u6cd5\u53c8\u88ab\u79f0\u4e3a Shortest-Next-CPU-Burst\uff0c\u5b83\u662f\u4e00\u79cd\u975e\u62a2\u5360\u5f0f\u8c03\u5ea6\u7b97\u6cd5\uff0c\u4f46\u5047\u8bbe\u6211\u4eec\u5728\u6267\u884c\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6709\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u52a0\u5165\u4e86 ready queue\uff0c\u800c\u4e14\u8fd9\u4e2a\u8fdb\u7a0b\u7684\u6267\u884c\u65f6\u95f4\u6bd4\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u7684\u5269\u4f59\u65f6\u95f4\u8fd8\u8981\u77ed\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u7ee7\u7eed\u6267\u884c\u5b8c\u5f53\u524d\u7684\u8fdb\u7a0b\u624d\u884c\u2014\u2014\u56e0\u4e3a\u5b83\u662f\u975e\u62a2\u5360\u5f0f\u7684\u3002\u800c\u663e\u7136\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u53ef\u4ee5\u901a\u8fc7\u62a2\u5360\u5f0f\u8c03\u5ea6\u6765\u4f18\u5316\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u5f15\u5165\u4e86 Shortest-Remaining-Time-First, SRTF\uff0c\u5176\u8868\u8ff0\u662f\uff1a\u603b\u662f\u6267\u884c\u5269\u4f59\u8fd0\u884c\u65f6\u95f4\u6700\u77ed\u7684\u8fdb\u7a0b\u3002\u5176\u4f18\u7f3a\u70b9\u4e0e SJF \u4e00\u81f4\u3002</p> <p>\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u6240\u6709\u62a2\u5360\u5f0f\u8c03\u5ea6\u548c\u975e\u62a2\u5360\u5f0f\u8c03\u5ea6\u65f6\u673a\uff0c\u5e76\u9009\u62e9\u6b64\u65f6\u7684\u5269\u4f59\u8fd0\u884c\u65f6\u95f4\u6700\u77ed\u7684\u8fdb\u7a0b\u8fdb\u884c\u8c03\u5ea6\u5373\u53ef\u3002</p> <p>\u5982\u4f55\u5f97\u5230\u5269\u4f59\u65f6\u95f4</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u6240\u9700\u8981\u7684\u65f6\u95f4\u662f\u4e00\u4e2a\u65e0\u6cd5\u5728\u8fd0\u884c\u7ed3\u675f\u524d\u5f97\u5230\u7684\u6570\u636e\uff0c\u56e0\u6b64\u4f7f\u7528\u8fd9\u4e2a\u4e1c\u897f\u8fdb\u884c\u8c03\u5ea6\u5c31\u663e\u5f97\u5341\u5206\u4e0d\u5408\u7406\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u9884\u6d4b\u7684\u65b9\u6cd5\u4f30\u8ba1\u8fd0\u884c\u7684\u5269\u4f59\u65f6\u95f4\uff0c\u4f46\u662f\u65e2\u7136\u662f\u9884\u6d4b\u5c31\u4f1a\u6709\u4e0d\u51c6\u786e\uff0c\u6240\u4ee5 SJF/SRTF \u5e76\u4e0d\u80fd\u5b9e\u73b0\u7406\u8bba\u4e0a\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u6700\u4f18\u3002\u81f3\u4e8e\u5982\u4f55\u9884\u6d4b\uff0c\u4e66\u4e0a\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53eb exponential average \u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u4e0d\u5c55\u5f00\u3002</p> \ud83c\udf30 <p>=== \"\u9898\u9762\"</p> <pre><code>\u73b0\u5728\u6709\u4e09\u4e2a\u8fdb\u7a0b\uff0c\u5b83\u4eec\u5c06\u8981\u6267\u884c\u7684\u65f6\u95f4\u5206\u522b\u5982\u4e0b\uff1a\n\n- P1: 8\n- P2: 4\n- P3: 9\n- P4: 5\n\n\u5b83\u4eec\u5230\u8fbe ready queue \u7684\u65f6\u95f4\u5206\u522b\u5982\u4e0b\uff1a\n\n- P1: 0\n- P2: 1\n- P3: 2\n- P4: 3\n\n\u8bf7\u5206\u522b\u8ba1\u7b97 SJF \u4e0b\u548c SRTF \u4e0b\u7684\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u3002\n</code></pre> <p>=== \"\u89e3\u6790\"</p> <pre><code>\u5bf9\u4e8e SJF \u6765\u8bf4\uff0c\u5728\u7b2c 0 \u65f6\u523b\uff0c\u53ea\u6709 P1 \u53ef\u7528\uff0c\u6240\u4ee5\u53ea\u80fd\u6267\u884c P1\uff1bP1 \u6267\u884c\u7ed3\u675f\u540e\u6240\u6709\u5176\u5b83\u8fdb\u7a0b\u90fd\u53ef\u7528\u4e86\uff0c\u6b64\u65f6\u6309\u7167\u6b63\u5e38\u7684 SJF \u5373\u53ef\u5f97\u5230\u7ed3\u679c\u3002\n\n```mermaid\ngantt\n    title SJF\n    dateFormat ss\n    axisFormat %S\n\n    section P1\n    run: a, 00, 08\n\n    section P2\n    ready: b, 01, 08\n    run: e, 08, 12\n\n    section P3\n    ready: c, 02, 17\n    run: 17, 26\n\n    section P4\n    ready: d, 03, 12\n    run: f, 12, 17\n```\n\n\u6b64\u65f6\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u4e3a $(0 + 7 + 15 + 9) / 4 = 7.75$\u3002\n\n---\n\n\u5bf9\u4e8e SRFT \u6765\u8bf4\uff0c\u540c\u6837\u4ece P1 \u5f00\u59cb\u6267\u884c\uff0c\u4f46\u662f\u7b2c\u4e00\u79d2 P2 \u8fdb\u5165\uff0c\u53d1\u73b0\u6b64\u65f6 P1 \u8fd8\u5269\u4e0b 7\uff0c\u800c P2 \u53ea\u9700\u8981 4\uff0c\u4e8e\u662f P2 \u9700\u8981\u62a2\u5360 P1 \u7684\u8d44\u6e90\uff1b\u4e4b\u540e\u7684\u8fc7\u7a0b\u7c7b\u4f3c\n\n```mermaid\ngantt\n    dateFormat ss\n    axisFormat %S\n\n    section P1\n    run: a, 00, 01\n    ready(rest 7): e, 01, 10\n    run: g, 10, 17\n\n    section P2\n    run: b, 01, 05\n\n    section P3\n    ready(rest 9): c, 02, 17\n    run: h, 17, 26\n\n    section P4\n    ready(rest 5): d, 03, 05\n    run: f, 05, 10\n```\n\n\u6b64\u65f6\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\u4e3a $((0+9) + 0 + 15 + 2) / 4 = 6.5$\u3002\n\n---\n\n\u53ef\u4ee5\u53d1\u73b0 SRTF \u80fd\u591f\u63d0\u5347 SJF \u7684\u6548\u7387\u3002\n</code></pre>"},{"location":"OS/OS2/#round-robin-rr","title":"\u7b97\u6cd5 | Round-Robin (RR)","text":"<p>RR \u8c03\u5ea6\u662f\u4f7f\u7528\u5206\u65f6\u6280\u672f\u7684\u8c03\u5ea6\u7b97\u6cd5\u3002\u7531\u4e8e\u65f6\u95f4\u7247\u5230\u671f\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5f3a\u5236\u505c\u6b62\u8fdb\u7a0b\uff0c\u56e0\u6b64\u5b83\u662f\u62a2\u5360\u5f0f\u7684\u3002\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u6700\u591a\u8fde\u7eed\u6267\u884c\u4e00\u4e2a\u65f6\u95f4\u7247\u7684\u957f\u5ea6\uff0c\u5b8c\u6210\u540e\u88ab\u63d2\u5165\u5230 FIFO ready queue \u7684\u672b\u5c3e\uff0c\u5e76\u53d6\u51fa FIFO ready queue \u7684\u961f\u9996\u8fdb\u884c\u6267\u884c\u3002</p> <p>\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u5206\u65f6\u7684\u65f6\u5019\u4e5f\u8bf4\u8fc7\uff0c\u5206\u65f6\u6280\u672f\u901a\u8fc7\u4f18\u5316\u54cd\u5e94\u65f6\u95f4\u89e3\u51b3\u4e86\u7528\u6237\u4ea4\u4e92\u95ee\u9898\uff0cRR \u8c03\u5ea6\u867d\u7136\u76f8\u6bd4 SJF \u6709\u4e86\u66f4\u957f\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u4f46\u662f\u6709\u4e86\u66f4\u77ed\u7684\u54cd\u5e94\u65f6\u95f4\uff0c\u800c\u5b9e\u9645\u76f4\u63a5\u5f71\u54cd\u7528\u6237\u4ea4\u4e92\u95ee\u9898\u7684\u5e94\u8be5\u662f\u54cd\u5e94\u65f6\u95f4\u3002</p> <p>\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cRR \u8c03\u5ea6\u6709\u4e00\u4e2a\u201c\u8d85\u53c2\u6570\u201d\uff0c\u5373\u65f6\u95f4\u7247\u7684\u957f\u5ea6\u3002\u7406\u8bba\u4e0a\uff0c\u65f6\u95f4\u7247\u7ea6\u77ed\uff0c\u54cd\u5e94\u65f6\u95f4\u8d8a\u77ed\uff1b\u4f46\u66f4\u77ed\u7684\u65f6\u95f4\u7247\u5c06\u5e26\u6765\u66f4\u9891\u7e41\u7684\u8fdb\u7a0b\u5207\u6362\uff0c\u4ece\u800c\u5e26\u6765\u66f4\u591a\u7684 dispatch latency\u3002</p>"},{"location":"OS/OS2/#priority-scheduling","title":"\u7b97\u6cd5 | Priority Scheduling","text":"<p>\u4f18\u5148\u7ea7\u8c03\u5ea6\u7684\u601d\u8def\u662f\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u4f18\u5148\u7ea7\uff0c\u5f53\u6709\u591a\u4e2a\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u6001\u65f6\uff0c\u9009\u62e9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u8fdb\u7a0b\u5148\u8fd0\u884c\u3002\u8fd9\u79cd\u7b97\u6cd5\u7684\u4f18\u70b9\u662f\uff0c\u80fd\u591f\u4fdd\u8bc1\u4f18\u5148\u7ea7\u9ad8\u7684\u8fdb\u7a0b\u4f18\u5148\u8fd0\u884c\uff1b\u4f46\u662f\u7f3a\u70b9\u662f\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u5f88\u4f4e\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u4f1a\u4e00\u76f4\u88ab\u63a8\u8fdf\uff0c\u4ece\u800c\u5bfc\u81f4\u201c\u9965\u997f\u201d\u73b0\u8c61\u3002</p> <p>\u4f60\u53ef\u80fd\u53d1\u73b0\u4e86\uff0c\u5982\u679c\u628a\u4e0a\u9762\u8fd9\u53e5\u8bdd\u7684\u201c\u4f18\u5148\u7ea7\u6700\u9ad8\u201d\u6539\u6210\u201c\u8fd0\u884c\u65f6\u95f4\u6700\u77ed\u201d/\u201c\u5269\u4f59\u8fd0\u884c\u65f6\u95f4\u6700\u77ed\u201d\uff0c\u90a3\u5c31\u548c SJF/SRTF \u4e00\u6a21\u4e00\u6837\u4e86\uff0cSJF/SRTF \u5b9e\u9645\u4e0a\u5c31\u662f\u4f18\u5148\u7ea7\u8c03\u5ea6\u7684\u4e00\u4e2a\u7279\u4f8b\uff0c\u56e0\u800c\u4f18\u5148\u7ea7\u8c03\u5ea6\u5f53\u7136\u662f\u53ef\u4ee5\u5b9e\u73b0\u62a2\u5360\u5f0f\u548c\u975e\u62a2\u5360\u5f0f\u4e24\u79cd\u7684\u3002</p> <p>\u6b64\u5916\uff0c\u4f18\u5148\u7ea7\u7684\u5206\u914d\u53ef\u4ee5\u6839\u636e\u4f7f\u7528\u9700\u6c42\u8fdb\u884c\u8bbe\u8ba1\uff0c\u5b83\u53ef\u80fd\u662f\u4e00\u4e9b\u6d4b\u91cf\u6570\u636e\uff0c\u4e5f\u53ef\u80fd\u5177\u6709\u4e00\u4e9b\u88ab\u8d4b\u4e88\u7684\u610f\u4e49\uff0c\u751a\u81f3\u53ef\u4ee5\u662f\u4e00\u4e9b\u590d\u5408\u7684\u503c\uff1b\u4f18\u5148\u7ea7\u4e5f\u5e76\u4e0d\u4e00\u5b9a\u662f\u9759\u6001\u7684\uff0c\u5148\u524d\u6211\u4eec\u63d0\u5230\u8fc7\u7684\u9965\u997f\u95ee\u9898\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u52a8\u6001\u7684\u4f18\u5148\u7ea7\u6765\u89e3\u51b3\uff1a\u4f18\u5148\u7ea7\u968f\u7740\u7b49\u5f85\u65f6\u95f4\u589e\u52a0\u4e0d\u65ad\u589e\u957f\uff0c\u7b49\u5f85\u8fc7\u4e45\u7684\u4efb\u52a1\u5c31\u4f1a\u88ab\u8d4b\u4e88\u8f83\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u4ee5\u6b64\u907f\u514d\u9965\u997f\u7684\u53d1\u751f\uff0c\u8fd9\u79cd\u7b56\u7565\u53eb priority aging\u3002</p>"},{"location":"OS/OS2/#multilevel-queue-scheduling","title":"\u8bbe\u8ba1 | Multilevel Queue Scheduling","text":"<p>\u65e2\u7136\u8c03\u5ea6\u7b97\u6cd5\u591a\u79cd\u591a\u6837\uff0c\u4ed6\u4eec\u9002\u914d\u4e0d\u540c\u7684\u9700\u6c42\uff0c\u90a3\u80fd\u5426\u53ea\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u4f7f\u7528\u7279\u5b9a\u7b97\u6cd5\u5462\uff1f\u7b54\u6848\u662f\u80af\u5b9a\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 ready queue \u5206\u6210\u591a\u4e2a\u961f\u5217\uff0c\u6bcf\u4e2a\u961f\u5217\u4f7f\u7528\u4e0d\u540c\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0c\u7136\u540e\u518d\u8fdb\u884c\u961f\u5217\u95f4\u8c03\u5ea6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u88ab\u79f0\u4e3a\u591a\u7ea7\u961f\u5217\u8c03\u5ea6(multilevel queue scheduling)\u3002</p> <p>\ud83c\udf30</p> <p>\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u6309\u7167\u4f18\u5148\u7ea7\u5148\u540e\uff0c\u53ef\u80fd\u6709\u8fd9\u4e48\u4e9b\u961f\u5217\uff1a</p> <ol> <li>Real-time processes</li> <li>System processes</li> <li>Interactive processes</li> <li>Batch processes</li> </ol> <p>\u5b83\u4eec\u7684\u4f18\u5148\u7ea7\u968f\u7740 1 -&gt; 4 \u9012\u51cf\uff0c\u800c\u5f53\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u961f\u5217\u4e2d\u5b58\u5728\u4efb\u52a1\u65f6\uff0c\u4f18\u5148\u7ea7\u4f4e\u7684\u961f\u5217\u4fbf\u4e0d\u4f1a\u53c2\u4e0e\u8c03\u5ea6\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u9ad8\u4f18\u5148\u7ea7\u7684\u961f\u5217\u4e2d\u51fa\u73b0\u65b0\u7684\u4efb\u52a1\u65f6\uff0c\u4e5f\u4f1a\u62a2\u5360\u6b63\u5728\u8fd0\u884c\u7684\u4f4e\u4f18\u5148\u7ea7\u961f\u5217\u7684\u4efb\u52a1\u3002</p> <p>\ud83c\udf30</p> <p>\u53c8\u6bd4\u5982\uff0c\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u53ef\u80fd\u5206\u524d\u53f0(foreground)\u7a0b\u5e8f\u961f\u5217\u548c\u540e\u53f0(background)\u7a0b\u5e8f\u961f\u5217\uff0c\u800c\u6211\u4eec\u4f7f\u7528\u65f6\u95f4\u7247\u6765\u8fdb\u884c\u961f\u5217\u95f4\u8c03\u5ea6\uff0c\u4f46\u524d\u53f0\u5360\u7528 80% \u7684\u65f6\u95f4\uff0c\u800c\u540e\u53f0\u5360\u7528 20% \u7684\u65f6\u95f4\u3002</p> <p>\u800c\u5728\u961f\u5217\u5185\u90e8\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u4f7f\u7528\u4e0d\u540c\u7684\u961f\u5217\u5185\u8c03\u5ea6\u7b97\u6cd5\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u7531\u4e8e\u524d\u53f0\u7a0b\u5e8f\u5f80\u5f80\u8981\u6c42\u66f4\u597d\u7684\u54cd\u5e94\u65f6\u95f4\u8868\u73b0\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 RR \u8c03\u5ea6\uff1b\u800c\u5728\u540e\u53f0\u4f7f\u7528 FCFS \u8c03\u5ea6\u3002</p> <p>Windows XP Scheduling</p> <ul> <li>windows-xp-scheduling</li> </ul>"},{"location":"OS/OS2/#multilevel-feedback-queue-scheduling","title":"\u8bbe\u8ba1 | Multilevel Feedback Queue Scheduling","text":"<p>\u66f4\u8fdb\u4e00\u6b65\uff0cMultilevel Feedback Queue Scheduling \u5728 Multilevel Queue Scheduling \u7684\u57fa\u7840\u4e0a\uff0c\u5141\u8bb8\u8fdb\u7a0b\u5728\u961f\u5217\u95f4\u8f6c\u79fb\uff0c\u4ee5\u6b64\u5b9e\u73b0\u66f4\u7075\u6d3b\u66f4\u79d1\u5b66\u7684\u8c03\u5ea6\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u5982\u679c\u4f7f\u7528\u4e86\u8fc7\u957f\u7684 CPU \u65f6\u95f4\uff0c\u5b83\u53ef\u80fd\u88ab\u79fb\u52a8\u5230\u4f18\u5148\u7ea7\u66f4\u4f4e\u7684\u961f\u5217\uff1b\u76f8\u53cd\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u7b49\u5f85\u4e86\u592a\u4e45\uff0c\u5b83\u53ef\u80fd\u88ab\u79fb\u52a8\u5230\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u961f\u5217\u3002</p> <p>\u5f53\u7136\uff0c\u76f8\u5bf9\u5e94\u7684\uff0c\u7b97\u6cd5\u590d\u6742\u5ea6\u4e5f\u4f1a\u63d0\u9ad8\u4e0d\u5c11\u3002</p>"},{"location":"OS/OS2/#_12","title":"\u7ebf\u7a0b","text":"<p>\u7ebf\u7a0b\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u8fdb\u7a0b\uff0c\u5b83\u5728\u8fdb\u7a0b\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u5212\u5206\uff0c\u662f\u8fdb\u7a0b\u5185\u7684\u4e00\u4e2a\u53ef\u8c03\u5ea6\u7684\u6267\u884c\u5355\u5143\uff0c\u4ee5\u51cf\u5c0f\u8fdb\u7a0b folk \u548c\u5207\u6362\u7684\u5f00\u9500\u4e3a\u76ee\u7684\u3002</p> <p>\u540c\u4e00\u8fdb\u7a0b\u7684\u82e5\u5e72\u7ebf\u7a0b\u5171\u4eab\u4ee3\u7801\u3001\u6570\u636e\u7b49\u201c\u76f8\u5bf9\u9759\u6001\u201d\u7684\u8d44\u6e90\uff0c\u800c\u5404\u81ea\u7ef4\u62a4\u5bc4\u5b58\u5668\u3001\u6808\u3001PC \u7b49\u201c\u76f8\u5bf9\u52a8\u6001\u201d\u7684\u8d44\u6e90\uff1b\u6216\u8005\u8bf4\u7ebf\u7a0b\u53ea\u62e5\u6709\u4e00\u4e9b\u8fd0\u884c\u4e2d\u5fc5\u4e0d\u53ef\u7701\u7684\u8d44\u6e90\uff0c\u800c\u6240\u6709\u5176\u5b83\u8d44\u6e90\u90fd\u5c5e\u4e8e\u8fdb\u7a0b\uff0c\u7ebf\u7a0b\u4e0e\u8fdb\u7a0b\u4e2d\u7684\u5176\u5b83\u7ebf\u7a0b\u5171\u4eab\u8fd9\u4e9b\u8d44\u6e90\uff0c\u4ee5\u6b64\u6765\u51cf\u5c11\u8fdb\u7a0b\u521b\u5efa\u8fc7\u7a0b\u4e2d\u590d\u5236\u4ee3\u7801\u6bb5\u7b49\u8d44\u6e90\u65f6\u5e26\u6765\u7684\u4e0d\u5c0f\u5f00\u9500\u3002</p> <p></p> <p>\u7ebf\u7a0b\u5929\u751f\u548c\u540c\u4e00\u8fdb\u7a0b\u5185\u7684\u5176\u5b83\u7ebf\u7a0b\u5171\u4eab\u8d44\u6e90\uff0c\u56e0\u6b64\u540c\u8fdb\u7a0b\u5185\u7ebf\u7a0b\u5929\u751f\u5c31\u6709\u7ebf\u7a0b\u95f4\u901a\u4fe1\u7684\u80fd\u529b\u3002\u540c\u65f6\uff0c\u7531\u4e8e\u5c06\u8fdb\u7a0b\u8fdb\u884c\u4e86\u518d\u5212\u5206\uff0c\u4e00\u65b9\u9762\u5728\u786c\u4ef6\u652f\u6301\u7684\u60c5\u51b5\u4e0b\u80fd\u66f4\u597d\u5730\u9002\u914d\u5e76\u884c\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u80fd\uff08\u4ee3\u4ef7\u66f4\u5c0f\u5730\uff09\u8ba9\u4efb\u52a1\u7684\u7c92\u5ea6\u53d8\u5c0f\uff0c\u6b64\u65f6\u53ef\u4ee5\u5c06\u6574\u4e2a\u8fdb\u7a0b\u7684\u963b\u585e\u8f6c\u79fb\u5230\u5355\u4e2a\u7ebf\u7a0b\u7684\u963b\u585e\u4e0a\uff0c\u8fdb\u4e00\u6b65\u51cf\u5c11\u54cd\u5e94\u65f6\u95f4\u3002</p> <p>\u5f53\u7136\uff0c\u7531\u4e8e\u8fd9\u91cc\u5b58\u5728\u4e00\u4e2a\u90e8\u5206\u6574\u4f53\u7684\u5173\u7cfb\uff0c\u5373\u5b58\u5728\u4e00\u4e2a\u201c\u5c06\u82e5\u5e72\u9e21\u86cb\u653e\u5728\u540c\u4e00\u4e2a\u7bee\u5b50\u91cc\u201d\u7684\u95ee\u9898\uff0c\u867d\u7136\u5c06\u82e5\u5e72\u4efb\u52a1\u90fd\u653e\u5230\u4e00\u4e2a\u8fdb\u7a0b\u7684\u591a\u7ebf\u7a0b\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387\uff0c\u4f46\u662f\u4e00\u65e6\u201c\u7bee\u5b50\u201d\u574f\u4e86\uff0c\u90a3\u6240\u6709\u201c\u9e21\u86cb\u201d\u90fd\u65e0\u6cd5\u5e78\u514d\uff1b\u5176\u6b21\uff0c\u867d\u7136\u5929\u7136\u7684\u5171\u4eab\u5c5e\u6027\u8ba9\u7ebf\u7a0b\u80fd\u66f4\u65b9\u4fbf\u5730\u8fdb\u884c\u7ebf\u7a0b\u95f4\u901a\u4fe1\uff0c\u4f46\u4e5f\u5e26\u6765\u4e86\u5185\u5b58\u4fdd\u62a4\u7684\u95ee\u9898\u3002</p>"},{"location":"OS/OS2/#_13","title":"\u591a\u7ebf\u7a0b\u6a21\u578b","text":"<p>\u6309\u7167\u7ebf\u7a0b\u5212\u5206\u7684\u5b9e\u73b0\u4f4d\u7f6e\uff0c\u591a\u7ebf\u7a0b\u6a21\u578b\u5206\u4e3a\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b(user threads)\u548c\u5185\u6838\u7ea7\u591a\u7ebf\u7a0b(kernel threads)\u3002</p> <p>\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b\u5728\u7528\u6237\u7a7a\u95f4\u5b9e\u73b0\u591a\u7ebf\u7a0b\uff0c\u5373\u4f7f\u7528\u7ebf\u7a0b\u5e93(thread library)\u5229\u7528\u5355\u4e2a\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u5728\u7528\u6237\u7a7a\u95f4\u7ef4\u62a4\u591a\u4e2a\u7ebf\u7a0b\uff1b\u800c\u5185\u6838\u7ea7\u591a\u7ebf\u7a0b\u5219\u662f\u7531\u5185\u6838\u652f\u6301\u591a\u7ebf\u7a0b\u64cd\u4f5c\u3002\u4e24\u8005\u5404\u6709\u4f18\u7f3a\u70b9\uff1a</p> <ul> <li>\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b &gt; \u5185\u6838\u7ea7\u591a\u7ebf\u7a0b<ul> <li>\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b\u4e0d\u9700\u8981\u5185\u6838\u652f\u6301\u591a\u7ebf\u7a0b\uff0c\u4e0d\u9700\u8981\u8fdb\u5165\u5185\u6838\u6001\u5b9e\u73b0\u591a\u7ebf\u7a0b\uff0c\u4e5f\u4e0d\u9700\u8981\u5360\u7528\u7ebf\u7a0b ID\uff0c\u56e0\u6b64\u7406\u8bba\u4e0a\u53ef\u4ee5\u6bd4\u5185\u6838\u7ea7\u652f\u6301\u66f4\u591a\u7684\u7ebf\u7a0b\u6570\uff1b</li> <li>\u7531\u4e8e\u5176\u5212\u5206\u662f\u9488\u5bf9\u8fdb\u7a0b\u7684\uff0c\u800c\u4e0d\u540c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u7ebf\u7a0b\u5b9e\u73b0\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\uff0c\u800c\u4e14\u7531\u4e8e\u662f\u5728\u7528\u6237\u7a7a\u95f4\u5b9e\u73b0\u7b97\u6cd5\uff0c\u6240\u4ee5\u80fd\u591f\u66f4\u5bb9\u6613\u7684\u5bf9\u5355\u4e2a\u8fdb\u7a0b\u5185\u7684\u591a\u4e2a\u7ebf\u7a0b\u7684\u8c03\u5ea6\u7b97\u6cd5\u8fdb\u884c\u81ea\u5b9a\u4e49\uff1b</li> </ul> </li> <li>\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b &lt; \u5185\u6838\u7ea7\u591a\u7ebf\u7a0b<ul> <li>\u7531\u4e8e\u5bf9\u5185\u6838\u6765\u8bf4\uff0c\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b\u4ecd\u7136\u662f\u4e00\u4e2a\u666e\u901a\u7684\u8fdb\u7a0b\uff0c\u6240\u4ee5\u5f53\u7528\u6237\u7ea7\u7684\u7ebf\u7a0b\u51fa\u73b0\u963b\u585e\u65f6\uff0c\u5185\u6838\u4f1a\u8ba4\u4e3a\u6574\u4e2a\u8fdb\u7a0b\u90fd\u88ab\u963b\u585e\uff1b\u5185\u6838\u7ea7\u7ebf\u7a0b\u7531\u4e8e\u662f\u5185\u6838\u5b9e\u73b0\uff0c\u6240\u4ee5\u5355\u7ebf\u7a0b\u7684\u963b\u585e\u5e76\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u8fdb\u7a0b\u963b\u585e\uff1b</li> <li>\u5728\u591a\u6838\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b\u6ca1\u6cd5\u5229\u7528\u591a\u6838\u8fdb\u884c\u7ebf\u7a0b\u5e76\u884c\uff1b\u663e\u7136\u5185\u6838\u591a\u7ea7\u7ebf\u7a0b\u662f\u505a\u5f97\u5230\u8fd9\u4e00\u70b9\u7684\uff1b</li> </ul> </li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7528\u6237\u7ea7\u591a\u7ebf\u7a0b\u548c\u5185\u6838\u7ea7\u591a\u7ebf\u7a0b\u5e76\u4e0d\u51b2\u7a81\uff0c\u56e0\u800c\u6392\u5217\u7ec4\u5408\u540e\u5f97\u5230\u591a\u7ebf\u7a0b\u4e3b\u8981\u6709\u5982\u4e0b\u4e09\u79cd\u6a21\u578b\uff1a</p> ![](img/19.png) (a) One-to-one model. (b) Many-to-many model. \\(c) Many-to-one model.  <p>Linux \u7ebf\u7a0b</p> <ul> <li>Linux \u7ebf\u7a0b</li> </ul> <p>[^1]: Where memory will be allocated to \"Uninitialized Static variable\" upon initialization? [^2]: What process is the parent of the init process in Linux? [^3]: Linux CreateProcess? [^4]: Differences between fork and exec?</p>"},{"location":"OS/Unit2-Part1/","title":"U2 Part 1: \u540c\u6b65\u5de5\u5177 | Synchronization Tools","text":"<p>\u5f15\u5165</p> <p>\u9996\u5148\u6211\u4eec\u7b80\u5355\u63cf\u8ff0\u4ec0\u4e48\u662f\u540c\u6b65\u95ee\u9898\uff0c\u8bfb\u8005\u53ef\u4ee5\u62b1\u7740\u5bf9\u4e0b\u9762\u8fd9\u6bb5\u8bdd\u7684\u7591\u95ee\u53bb\u9605\u8bfb\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u3002</p> <p>\u4e0d\u5fc5\u5c1d\u8bd5\u7acb\u523b\u7406\u89e3\u8fd9\u6bb5\u8bdd\uff0c\u6211\u5e0c\u671b\u8bfb\u8005\u80fd\u591f\u5728\u770b\u7684\u8fc7\u7a0b\u4e2d\u4ee5\u4e0b\u9762\u8fd9\u6bb5\u8bdd\u4e3a\u4e3b\u7ebf\uff0c\u731c\u6d4b\u63a5\u4e0b\u6765\u5c06\u8981\u5c55\u5f00\u7684\u5185\u5bb9\uff0c\u53bb\u53d1\u73b0\u95ee\u9898\u3001\u601d\u8003\u89e3\u51b3\u529e\u6cd5\u3002</p> <p>\u5728\u652f\u6301\u5e76\u53d1\u751a\u81f3\u5e76\u884c\u7684\u7cfb\u7edf\u4e2d\uff0c\u867d\u7136\u8fdb\u7a0b\u4e4b\u95f4\u76f8\u5bf9\u9694\u79bb\uff0c\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\u4e92\u4e0d\u76f4\u63a5\u5e72\u6270\uff0c\u90fd\u662f\u81ea\u987e\u81ea\u8dd1\u3002\u5373\uff0c\u662f\u5f02\u6b65\u7684\u3002\u4f46\u7531\u4e8e\u5404\u4e9b\u539f\u56e0\uff08\u4f8b\u5982\u90fd\u9700\u8981\u5bf9\u4e00\u5171\u4eab\u8d44\u6e90\u7684\u4fee\u6539\uff09\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u6267\u884c\u9700\u8981\u4e92\u76f8\u5236\u7ea6\uff0c\u9075\u5faa\u7279\u5b9a\u7684\u5148\u540e\u987a\u5e8f\uff0c\u56e0\u6b64\u8fdb\u7a0b\u9700\u8981\u901a\u8fc7\u67d0\u4e9b\u624b\u6bb5\uff0c\u8ba9\u534f\u4f5c\u8fdb\u7a0b\u80fd\u591f\u76f4\u63a5\u6216\u95f4\u63a5\u4e86\u89e3\u5230\u5176\u5b83\u76f8\u5173\u8fdb\u7a0b\u7684\u72b6\u6001\uff0c\u4ee5\u5b9e\u73b0\u5bf9\u5f53\u524d\u8fdb\u7a0b\u6267\u884c\u7684\u63a7\u5236\uff0c\u6700\u7ec8\u5728\u5b8f\u89c2\u4e0a\u5b9e\u73b0\u4e00\u79cd\u201c\u540c\u6b65\u201d\u3002</p> <p>\u800c\u4e0a\u9762\u63d0\u5230\u7684\u201c\u5404\u79cd\u539f\u56e0\u201d\u548c\u201c\u67d0\u4e9b\u624b\u6bb5\u201d\uff0c\u5c31\u662f\u6211\u4eec\u7a0d\u540e\u5c06\u8ba8\u8bba\u7684\u4e1c\u897f\u3002\u5176\u4e2d\uff0c\u8fd9\u91cc\u7684\u201c\u67d0\u4e9b\u624b\u6bb5\u201d\uff0c\u5c31\u662f\u6307\u6211\u4eec\u7684\u5404\u79cd\u540c\u6b65\u5de5\u5177\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u540c\u6b65\u5e76\u4e0d\u662f\u67d0\u79cd\u4e2d\u5fc3\u5316\u7684\u8c03\u63a7\u673a\u5236\uff0c\u800c\u66f4\u50cf\u662f\u4e00\u79cd\u201c\u534f\u8bae\u201d\uff1a\u5f53\u5404\u4e2a\u8fdb\u7a0b\u53d1\u73b0\u6709\u522b\u7684\u8fdb\u7a0b\u4e0e\u81ea\u5df1\u4ea7\u751f\u7ade\u4e89\u65f6\uff0c\u5e94\u5f53\u6709\u67d0\u79cd\u624b\u6bb5\u5141\u8bb8\u5b83\u4eec\u8fbe\u6210\u534f\u5546\uff0c\u4ee5\u51b3\u5b9a\u8c01\u5148\u8c01\u540e\u3002</p> <p>\u6211\u4eec\u6309\u7167\u95ee\u9898\u7684\u590d\u6742\u7a0b\u5ea6\uff0c\u7531\u6d45\u5165\u6df1\u5730\u8ba8\u8bba\u8fd9\u4e9b\u4e1c\u897f\u3002</p> <p>\u8bed\u5883\u95ee\u9898</p> <p>\u4e00\u4e2a\u6bd4\u8f83\u5c34\u5c2c\u7684\u95ee\u9898\u662f\uff0c\u4e66\u672c\u4e0a\u4ee5\u534f\u4f5c\u8fdb\u7a0b\u7684\u8bed\u5883\u4e3a\u5f00\u7bc7\uff0c\u4f46\u63a5\u4e0b\u6765\u8bb2\u7684\u6709\u4e9b\u5185\u5bb9\u662f\u4ee5\u7ebf\u7a0b\u540c\u6b65\u4e3a\u8bed\u5883\uff08\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\u6211\u5df2\u7ecf\u653e\u5f03\u53bb\u68b3\u7406\u548c\u7ea0\u6b63\u4e66\u4e2d\u7684\u63aa\u8f9e\u4e86\uff0c\u7d2f\u4e86\uff09\uff0c\u5982\u679c\u5728\u7528\u8bcd\u4e0a\u90fd\u533a\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\uff0c\u90a3\u4e48\u4f1a\u53d8\u5f97\u5f88\u7e41\u6742\uff0c\u6240\u4ee5\u6211\u63a5\u4e0b\u6765\u4e00\u5f8b\u7528\u8fdb\u7a0b\u8868\u793a\uff0c\u4f46\u8bfb\u8005\u5fc3\u4e2d\u5e94\u5f53\u5bf9\u8fd9\u4e2a\u8bed\u5883\u66f4\u9002\u4e8e\u7ebf\u7a0b\u8fd8\u662f\u8fdb\u7a0b\u6709\u6240\u611f\u53d7\u3002</p> <p>\u5173\u4e8e\u8fd9\u4e9b\u65b9\u6cd5\u66f4\u9002\u5408\u5728 process \u8fd8\u662f thread \u4e0a\u88ab\u5e94\u7528\uff0c\u53ef\u4ee5\u770b\u8fd9\u4e2a\u3002</p>"},{"location":"OS/Unit2-Part1/#_1","title":"\u7ade\u6001\u6761\u4ef6","text":"<p>Links</p> <ul> <li>Race Condition | Wikipedia</li> </ul> <p>\u6211\u4eec\u9700\u8981\u610f\u8bc6\u5230\uff0c\u6211\u4eec\u65e0\u6cd5\u4e00\u6b65\u5230\u4f4d\u5730\u3001in-place \u5730\u53bb\u4fee\u6539\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u6570\u636e\u3002\u6362\u8a00\u4e4b\uff0c\u8981\u60f3\u4fee\u6539 <code>mem[x]</code>\uff0c\u6211\u4eec\u9700\u8981\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li><code>reg</code> &lt;- <code>mem[x]</code>\uff1b</li> <li><code>reg</code> &lt;- update(<code>reg</code>)\uff1b</li> <li><code>mem[x]</code> &lt;- <code>reg</code>\uff1b</li> </ol> <p>\u800c\u5982\u679c\u73b0\u5728\u4e0d\u6b62\u4e00\u4e2a\u8fdb\u7a0b\u5728\u4fee\u6539 <code>mem[x]</code>\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 process A    \u2502 process B    \u2502 mem[x] = 1 (initial)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 t0 &lt;- mem[x] \u2502 t0 &lt;- mem[x] \u2502 mem[x] = 1\n\u2502 t0 &lt;- t0 + 1 \u2502 t0 &lt;- t0 + 1 \u2502\n\u2502 mem[x] &lt;- t0 \u2502 t0 &lt;- t0 + 1 \u2502 mem[x] = 2, B's t0 is out of date\n\u2502              \u2502 mem[x] &lt;- t0 \u2502 mem[x] = 3, 2 is overwritten\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u5b83\u4eec\u90fd\u60f3\u8981\u66f4\u65b0 <code>mem[x]</code>\uff0c\u53c8\u597d\u5de7\u4e0d\u5de7\u7684\u5b83\u4eec\u51e0\u4e4e\u540c\u65f6\u53d1\u751f\u8bfb\u53d6\u4e86 <code>mem[x]</code>\uff0c\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\uff1a\u4e24\u4e2a\u8fdb\u7a0b\u540c\u65f6\u8bfb\u53d6 <code>mem[x]</code>\uff0c\u7136\u540e\u5404\u81ea\u8ba1\u7b97\u66f4\u65b0\u540e\u7684\u503c\uff0c\u7136\u540e\u5404\u81ea\u5199\u56de <code>mem[x]</code>\uff1b\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6700\u7ec8\u7684 <code>mem[x]</code> \u4f1a\u6bd4\u539f\u6765\u5927 3\uff1b\u4f46\u73b0\u5728\u7684 <code>mem[x]</code> \u53ea\u6bd4\u539f\u6765\u5927 2\uff0c\u5176\u4e2d process A \u5bf9\u5b83\u7684\u4fee\u6539\u5728\u7b2c 7 \u884c\u88ab\u8986\u76d6\u4e86\u3002</p> <p>\u7a76\u5176\u6839\u672c\uff0c\u7531\u4e8e\u6211\u4eec\u5904\u5728\u5e76\u53d1\u8bed\u5883\u4e0b\uff0c\u6240\u4ee5\u4f1a\u51fa\u73b0\u82e5\u5e72\u7528\u6237\u540c\u65f6\u6301\u6709\u4e00\u4efd\u6570\u636e\u8d44\u6e90\u7684\u60c5\u51b5\uff08\u4e3a\u4e86\u53d1\u6325\u5e76\u53d1\u7684\u4f18\u52bf\uff0c\u6211\u4eec\u4e5f\u5e94\u5f53\u5c3d\u53ef\u80fd\u7684\u6ee1\u8db3\u8fd9\u79cd\u9700\u6c42\uff09\uff0c\u903b\u8f91\u4e0a\u6570\u636e\u4fee\u6539\u8fc7\u7a0b\u5e94\u5f53\u662f\u7b26\u53f7\u7684\u3001\u77ac\u95f4\u7684\u3001\u7acb\u5373\u751f\u6548\u7684\uff1b\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\u662f\u6570\u503c\u7684\u3001\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u6765\u5b8c\u6210\u7684\u3002\u5728\u8fd9\u79cd\uff08\u540e\u8005\uff09\u8bed\u5883\u4e0b\uff0c\u5982\u679c\u8bfb\u5165\u6570\u503c\u5b8c\u6210\u5230\u5199\u5165\u6570\u503c\u5b8c\u6210\u7684\u8fc7\u7a0b\u4e2d\uff0c<code>mem[x]</code> \u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u8be5\u64cd\u4f5c\u5b9e\u9645\u4e0a\u662f\u4f7f\u7528\u8fc7\u65f6\u6570\u636e\u8fdb\u884c\u8ba1\u7b97\u3002</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 process A    \u2502 process B    \u2502 mem[x] = 1 (initial)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 t0 &lt;- mem[x] \u2502 t0 &lt;- mem[x] \u2502 mem[x] = 1\n\u2502 t0 &lt;- t0 + 1 \u2502 t0 &lt;- t0 + 1 \u2502\n\u2502 mem[x] &lt;- t0 \u2502 t0 &lt;- t0 + 1 \u2502 mem[x] = 2, B's t0 is out of date\n\u2502              \u2502 mem[x] &lt;- t0 \u2502 mem[x] = 3, 2 is overwritten\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u7b2c\u516d\u884c\u7684 <code>t0</code> \u4ecd\u7136\u5728\u7528\u88ab process A \u66f4\u65b0\u4e4b\u524d\u7684 <code>mem[x]</code> \u505a\u8ba1\u7b97\uff0c\u56e0\u800c\u53ef\u4ee5\u8ba4\u4e3a\u6b64\u65f6 process B \u4e2d <code>t0</code> \u53c2\u4e0e\u8fd0\u7b97\u7684\u3001\u6697\u542b\u7684 <code>mem[x]</code> \u7684\u6570\u636e\u5df2\u7ecf\u8fc7\u65f6\u3002</p> <p>race condition</p> <p>\u7c7b\u4f3c\u8fd9\u79cd\u7684\uff0c\u7531\u4e24\u4e2a\u4fe1\u53f7\u4ea7\u751f\u7ade\u4e89\uff0c\u5176\u7ade\u4e89\u60c5\u51b5\u5f71\u54cd\u6700\u7ec8\u7ed3\u679c\u7684\u60c5\u51b5\uff0c\u88ab\u79f0\u4e3a\u7ade\u6001\u6761\u4ef6(race condition)\u3002\u5728\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u8c01\u540e\u6267\u884c\uff0c\u6700\u7ec8\u7ed3\u679c\u5c31\u662f\u8c01\u7684\u8f93\u51fa\uff0c\u800c\u53e6\u4e00\u4e2a\u7528\u6237\u7684\u8f93\u51fa\u5219\u4f1a\u88ab\u8986\u76d6\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5bf9\u7ade\u6001\u6761\u4ef6\u7684\u770b\u6cd5\u5e76\u4e0d\u5e94\u8be5\u662f\u201c\u5982\u4f55\u63a7\u5236\u7ade\u4e89\u7ed3\u679c\u201d\uff0c\u56e0\u4e3a\u65e0\u8bba\u7ade\u4e89\u7ed3\u679c\u5982\u4f55\uff08\u751a\u81f3\u8c01\u8d62\u4e86\u7ed3\u679c\u53ef\u80fd\u90fd\u4e00\u6837\uff09\uff0c\u53ea\u8981\u8fd9\u79cd\u201c\u7ade\u4e89\u201d\u51fa\u73b0\uff0c\u90a3\u4e48\u6700\u7ec8\u7ed3\u679c\u5c31\u6709\u53ef\u80fd\u4e0d\u7b26\u5408\u9884\u671f\u7684\u3002\u5c31\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u65e0\u8bba\u6700\u7ec8 <code>mem[x]</code> \u662f 3 \u8fd8\u662f 2 \u90fd\u4e0d\u5bf9\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\u5e94\u8be5\u662f 4\u2014\u2014\u65e0\u8bba\u662f\u5148\u8fdb\u884c <code>+1</code> \u8fd8\u662f\u5148\u8fdb\u884c <code>+2</code>\u3002</p> <p>\u6211\u4eec\u771f\u6b63\u9700\u8981\u5173\u6ce8\u7684\u91cd\u70b9\u5e94\u8be5\u662f\u5982\u4f55\u907f\u514d\u8fd9\u79cd\u7ade\u4e89\u7684\u51fa\u73b0\u3002</p> <p>\u6ce8\u610f</p> <p>\u867d\u7136\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u6211\u4eec\u6a21\u62df\u7684\u4e24\u4e2a\u7a0b\u5e8f\u662f\u6309\u7167\u76f8\u540c\u901f\u5ea6\uff0c\u4e00\u884c\u4e00\u4e2a\u6307\u4ee4\u6267\u884c\u7684\uff0c\u4f46\u662f\u6211\u4eec\u5728\u5e76\u884c\u8bed\u5883\u4e0b\u5bf9\u6240\u6709\u8fdb\u7a0b\u6267\u884c\u7684\u901f\u5ea6\u4e0d\u5e94\u5f53\u6709\u6240\u5047\u8bbe\uff0c\u5373\u8fdb\u7a0b A \u4e0d\u77e5\u9053\u8fdb\u7a0b B \u7684\u901f\u5ea6\u3002</p> <p>\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u4e5f\u5e76\u4e0d\u4e00\u5b9a\u8981\u5728\u5e76\u884c\u8bed\u5883\u4e0b\u8ba8\u8bba\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u591a\u9053\u8bed\u5883\u4e0b\u8fd9\u4e2a\u95ee\u9898\u90fd\u4f1a\u51fa\u73b0\uff0c\u4f8b\u5982\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 process A    \u2502     \u2502 process B    \u2502 mem[x] = 1 (initial)\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502              \u2502     \u2502 t0 &lt;- mem[x] \u2502 mem[x] = 1\n\u2502 t0 &lt;- mem[x] \u2502\u25c4\u2500\u2500\u2500\u2500\u2524 &lt;ctx switch&gt; \u2502 mem[x] = 1\n\u2502 t0 &lt;- t0 + 1 \u2502     \u2502              \u2502\n\u2502 mem[x] &lt;- t0 \u2502     \u2502              \u2502 mem[x] = 2, B's t0 is out of date\n\u2502 &lt;ctx switch&gt; \u251c\u2500\u2500\u2500\u2500\u25ba\u2502 t0 &lt;- t0 + 1 \u2502\n\u2502              \u2502     \u2502 t0 &lt;- t0 + 1 \u2502 \n\u2502              \u2502     \u2502 mem[x] &lt;- t0 \u2502 mem[x] = 3, 2 is overwritten\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u95ee\u9898\u4f9d\u65e7\u3002</p> <p>\u6839\u636e\u4e0a\u9762\u8fd9\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u9700\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u6709\u4e24\u79cd\u9009\u62e9\uff1a</p> <ol> <li>\u8fdb\u884c\u7b26\u53f7\u7684\u8fd0\u7b97\u800c\u975e\u6570\u503c\u7684\u8fd0\u7b97\uff0c\u8fd9\u6837\u8f93\u5165\u7684\u53d8\u5316\u80fd\u5728\u4efb\u610f\u65f6\u523b\u53cd\u6620\u5728\u8f93\u51fa\u4e0a\uff0c\u8fd9\u6837\u65f6\u65f6\u523b\u523b\u90fd\u662f\u201c\u6700\u65b0\u201d\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u201c\u8fc7\u65f6\u201d\uff1b</li> <li>\u4fdd\u8bc1\u8bfb\u5165\u6570\u503c\u5b8c\u6210\u5230\u5199\u5165\u6570\u503c\u5b8c\u6210\u7684\u8fc7\u7a0b\u4e2d\uff0c<code>mem[x]</code> \u4fdd\u6301\u4e0d\u53d8\uff0c\u5373\u4e24\u4e2a\u53ef\u80fd\u7ade\u4e89\u7684\u64cd\u4f5c\uff0c\u5728\u65f6\u95f4\u4e0a\u4e0d\u5e94\u8be5\u6709\u4ea4\u96c6\uff1b</li> </ol> <p>\u663e\u7136\uff0c\u6211\u4eec\u5e94\u5f53\u9009\u62e9\u7b2c\u4e8c\u79cd\u3002</p>"},{"location":"OS/Unit2-Part1/#the-critical-section-problem","title":"The Critical-Section Problem","text":"<p>\u4e3a\u4e86\u66f4\u597d\u5730\u5c55\u5f00\uff0c\u6211\u4eec\u5bf9\u4e0a\u9762\u7684\u8fd9\u79cd\u60c5\u51b5\u8fdb\u884c\u5efa\u6a21\uff0c\u5e76\u7ed9\u51fa\u89e3\u51b3 race condition \u95ee\u9898\u7684\u65b9\u6cd5\u9700\u8981\u6ee1\u8db3\u7684\u8303\u5f0f\uff1a</p> <p>\u6211\u4eec\u5e94\u5f53\u4fdd\u8bc1\u5728\u4e00\u4e2a\u8fdb\u7a0b\u5728\u4fee\u6539 <code>mem[x]</code> \u7684\u65f6\u5019\uff0c\u5176\u5b83\u8fdb\u7a0b\u4e0d\u5e94\u8be5\u8bfb\u53d6 <code>mem[x]</code>\uff08\u81f3\u5c11\u4e0d\u5e94\u4ee5\u4fee\u6539 <code>mem[x]</code> \u4e3a\u76ee\u7684\u6765\u8bfb\u53d6\uff09\uff0c\u76f4\u5230\u8fd9\u4e2a\u8fdb\u7a0b\u5b8c\u6210\u5bf9 <code>mem[x]</code> \u7684\u4fee\u6539\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c<code>mem[x]</code> \u8fd9\u4e2a\u5171\u4eab\u8d44\u6e90\u5e94\u5f53\u53ea\u80fd\u88ab\u4e00\u4e2a\u7528\u6237\u6301\u6709\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u53ea\u80fd\u88ab\u81f3\u591a\u4e00\u4e2a\u7528\u6237\u5360\u6709\u7684\u8d44\u6e90\u4e3a\u4e34\u754c\u8d44\u6e90\u3002\u800c\u7a0b\u5e8f\u4e2d\u8bbf\u95ee\u4e34\u754c\u8d44\u6e90\u7684\u4ee3\u7801\u6bb5\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e34\u754c\u533a\u6bb5(critical section, CS)^Wiki^\u3002</p> <p>\u90a3\u4e48\uff0c\u5bf9\u4e8e\u4e4b\u524d\u63d0\u5230\u8fc7\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u62ff\u51fa\u6765\u5bf9\u6bd4\u6a21\u62df\u7684\u90e8\u5206\u5c31\u662f critical section\u3002</p> <p>\u800c CS \u95ee\u9898\uff0c\u6307\u7684\u5c31\u662f\u5982\u4f55\u4fdd\u8bc1\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u7528\u6237\u5728\u6267\u884c\u4e34\u754c\u533a\u6bb5\u7684\u4ee3\u7801[^1]\u3002</p> <p>\u56f4\u7ed5\u4e34\u754c\u533a\u6bb5\uff0c\u6211\u4eec\u5b9a\u4e49\u80fd\u591f\u89e3\u51b3 CS \u95ee\u9898\u7684\u4ee3\u7801\u5e94\u5f53\u80fd\u591f\u505a\u5982\u4e0b\u5212\u5206\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Entry Section      \u2502 &lt;-- ask for &amp; wait for permission to enter CS\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Critical Section   \u2502 &lt;-- codes manipulating critical resources\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Exit Section       \u2502 &lt;-- release the critical resources\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Remainder Section  \u2502 &lt;-- other codes\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u8fdb\u7a0b\u9700\u8981\u5728 entry section \u5224\u65ad\u662f\u5426\u80fd\u591f\u8fdb\u5165 critical section\uff0c\u5373\u7d22\u53d6\u4e34\u754c\u8d44\u6e90\uff0c\u5982\u679c\u4e0d\u884c\u5219\u7b49\u5f85\uff1b\u800c\u5728\u8fdb\u5165 critical section \u540e\uff0c\u8fdb\u7a0b\u9700\u8981\u5728 exit section \u91ca\u653e\u4e34\u754c\u8d44\u6e90\uff1b\u7136\u540e\u8131\u79bb CS \u95ee\u9898\u7684\u8bed\u5883\uff0c\u8fdb\u5165 remainder section \u7ee7\u7eed\u6267\u884c\u3002</p> <p>\u540c\u65f6\uff0c\u6211\u4eec\u8981\u6c42\u89e3\u51b3\u65b9\u6848\u9700\u8981\u6ee1\u8db3\u5982\u4e0b\u6027\u8d28\uff1a</p> <p></p> <p>requirements for solution to CS problem</p> <ol> <li>\u4e34\u754c\u4e92\u65a5(mutual exclusion)\uff1a\u64cd\u4f5c\u540c\u4e00\u4e34\u754c\u8d44\u6e90\u7684\u4e34\u754c\u533a\u6bb5\u5e94\u5f53\u4e92\u76f8\u6392\u65a5\uff1b<ul> <li>\u5982\u679c\u8fdb\u7a0b \\(P_i\\) \u6b63\u5728\u6267\u884c\u5176 critical section\uff0c\u90a3\u4e48\u4e0d\u5e94\u5f53\u6709\u5176\u4ed6\u8fdb\u7a0b\u5904\u4e8e\uff08\u64cd\u4f5c\u540c\u4e00\u4e34\u754c\u8d44\u6e90\u7684\uff09critical section\uff1b</li> </ul> </li> <li>\u9009\u62e9\u65f6\u95f4\u6709\u9650(progress)\uff1a\u9009\u62e9\u4e0b\u4e00\u4e2a\u8fdb\u5165 critical section \u7684\u64cd\u4f5c\u5e94\u5f53\u53ea\u6709\u5904\u4e8e entry/critical/exit section \u7684\u8fdb\u7a0b\u53c2\u4e0e\uff0c\u4e14\u8be5\u9009\u62e9\u5e94\u5f53\u5728\u6709\u9650\u65f6\u95f4\u5185\u88ab\u6267\u884c\uff1b</li> <li>\u7b49\u5f85\u65f6\u95f4\u6709\u9650(bounded waiting)\uff1a\u8fdb\u7a0b\u7b49\u5f85\u88ab\u5141\u8bb8\u8fdb\u5165 critical section \u7684\u65f6\u95f4\u5e94\u5f53\u662f\u6709\u9650\u7684\uff1b</li> </ol> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ee5\u8ba8\u8bba CS \u95ee\u9898\u662f\u5982\u4f55\u89e3\u51b3\u7684\u4e3a\u4e3b\u7ebf\uff0c\u63a2\u7d22\u5982\u4f55\u89e3\u51b3 race condition\u3002</p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u6574\u4e2a\u8fc7\u7a0b\u6709\u70b9\u50cf\u8c03\u5ea6\uff0c\u7b49\u5f85\u4e34\u754c\u8d44\u6e90\u7684\u8fc7\u7a0b\u5c31\u597d\u50cf ready \u6001\u7b49\u5f85\u8c03\u5ea6\u8fc7\u7a0b\u4e2d\u7684 CPU \u8d44\u6e90\uff08CPU \u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u79cd\u4e34\u754c\u8d44\u6e90\uff0c\u53ea\u4e0d\u8fc7\u5b83\u4e0d\u662f\u7531\u8fdb\u7a0b\u4e3b\u52a8\u5904\u7406\u548c\u7d22\u53d6\uff09\u3002</p> <p>\u65e2\u7136\u5982\u6b64\u6211\u4eec\u53ef\u4ee5\u8fc1\u79fb\u201c\u72b6\u6001\u201d\u8fd9\u4e2a\u6982\u5ff5\u3002\u6211\u4eec\u53ea\u5173\u5fc3\u76f4\u63a5\u4e0e CS \u95ee\u9898\u6709\u5173\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u6211\u5728\u8fd9\u91cc\u5b9a\u4e49\uff1a\u5c31\u7eea\u3001\u4e34\u754c\u3001\u65e0\u5173\u4e09\u4e2a\u72b6\u6001\u3002</p> <ol> <li>\u5c31\u7eea\u6001\uff1a\u8fdb\u7a0b\u968f\u65f6\u51c6\u5907\u597d\u8fdb\u5165 critical section\uff0c\u60f3\u8981\u6301\u6709\u4e34\u754c\u8d44\u6e90\uff1b</li> <li>\u4e34\u754c\u6001\uff1a\u8fdb\u7a0b\u6b63\u5728\u6267\u884c critical section\uff0c\u6301\u6709\u4e34\u754c\u8d44\u6e90\uff0c\u6216\u8fdb\u7a0b\u6267\u884c\u5b8c critical section\uff0c\u6267\u884c exit section \u6b63\u5728\u91ca\u653e\u6301\u6709\u7684\u4e34\u754c\u8d44\u6e90\u4e2d\uff1b</li> <li>\u65e0\u5173\u6001\uff1a\u4e0d\u5904\u4e8e\u5c31\u7eea\u6001\u4e5f\u4e0d\u5904\u4e8e\u4e34\u754c\u6001\uff0c\u4e0d\u60f3\u8981\u6301\u6709\u4e34\u754c\u8d44\u6e90\uff0c\u6216\u662f\u4f7f\u7528\u5b8c\u5df2\u7ecf\u91ca\u653e\uff1b</li> </ol> <p>\u6839\u636e\u6211\u4eec\u5148\u524d\u7ed9\u51fa\u7684\uff0c\u89e3\u6cd5\u9700\u8981\u6ee1\u8db3\u7684\u6027\u8d28\u4e2d\u7684 mutual exclusion\uff0c\u4e0d\u80fd\u540c\u65f6\u6709\u591a\u4e2a\u8fdb\u7a0b\u5904\u4e8e\u4e34\u754c\u6001\uff0c\u4f46\u662f\u53ef\u4ee5\u6709\u82e5\u5e72\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u6001\uff0c\u800c\u65e0\u5173\u6001\u5219\u8868\u793a\u4e0d\u4f1a\u4ea7\u751f\u7ade\u4e89\uff0c\u548c\u8c03\u5ea6\u8fc7\u7a0b\u5341\u5206\u76f8\u4f3c\u3002</p> <p>\u8fd9\u4e9b\u5b9a\u4e49\u5c06\u4f1a\u5728\u6211\u4eec\u4e4b\u540e\u7684\u63a2\u7d22\u4e2d\u8d77\u4f5c\u7528\u3002</p>"},{"location":"OS/Unit2-Part1/#for-kernel-code","title":"For Kernel Code","text":"<p>\u7531\u4e8e kernel code \u4e0b\u7684 CS \u95ee\u9898\u89e3\u51b3\u8f83\u4e3a\u6e05\u6670\u76f4\u63a5\uff0c\u6240\u4ee5\u5148\u884c\u4ecb\u7ecd\u3002</p> <p>For Kernel Code</p> <p>\u5728 kernel code \u4e2d\u4e5f\u666e\u904d\u5b58\u5728\u7740 race condition \u7684\u95ee\u9898\uff0c\u4f8b\u5982\uff1a</p> <p>  Race condition when assigning a pid. </p> <p>\u4e0a\u4f8b\u4e2d \\(P_0\\) \u548c \\(P_1\\) \u540c\u65f6\u8bbf\u95ee\u4e86 <code>next_available_pid</code> \u8fd9\u4e2a\u4e34\u754c\u8d44\u6e90\uff0c\u4ea7\u751f\u7ade\u4e89\uff0c\u5bfc\u81f4\u6700\u540e\u6709\u4e24\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u4e86\u540c\u4e00\u4e2a <code>pid</code>\u3002</p> <p>\u6b32\u89e3\u51b3 kernel code \u4e2d\u7684 CS \u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8fd0\u884c\u5728 kernel mode\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u5728 kernel code \u4e2d\u8bbf\u95ee\u4e34\u754c\u8d44\u6e90\u7684\u884c\u4e3a\uff0c\u4ece\u800c\u89e3\u51b3 CS \u95ee\u9898\u3002</p> <p>\u5bf9\u4e8e\u5355\u5904\u7406\u5668\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728 kernel code \u4e2d\u7981\u6b62\u4e2d\u65ad\uff0c\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8fd0\u884c\u5728 kernel mode\uff1b\u800c\u5bf9\u4e8e\u591a\u5904\u7406\u5668\u6765\u8bf4\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5c31\u4e0d\u90a3\u4e48\u5408\u9002\u4e86\u2014\u2014\u6211\u4eec\u9700\u8981\u540c\u65f6\u544a\u8bc9\u591a\u4e2a\u5904\u7406\u5668\u4e2d\u65ad\u88ab\u7981\u6b62\uff0c\u800c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u7684\u65f6\u5ef6\u4ecd\u7136\u4f1a\u4ea7\u751f\u95ee\u9898\uff1b\u4e0d\u4ec5\u5982\u6b64\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u4f1a\u5e26\u6765\u989d\u5916\u7684\u5f00\u9500\u3002\u5728\u591a\u5904\u7406\u5668\u8bed\u5883\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5b9e\u73b0\u62a2\u5360\u5f0f\u5185\u6838(preemptive kernels)\u548c\u975e\u62a2\u5360\u5f0f\u5185\u6838(non-preemptive kernels)\uff0c\u5173\u952e\u662f\u540e\u8005\u5b9e\u73b0\u4e86\u4e00\u6bb5\u65f6\u95f4\u5185\u53ea\u6709\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8fd0\u884c\u5728 kernel mode[^2]\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u63a2\u7d22\u66f4\u4e3a\u901a\u7528\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u8bf4\u660e</p> <p>\u4e3a\u4e86\u7b80\u5316\u8bf4\u660e\u4ee3\u7801\uff0c\u6211\u4eec\u7528\u5168\u5927\u5199\u6765\u8868\u793a\u4e00\u4e2a\u5171\u4eab\u8d44\u6e90\uff0c\u4f8b\u5982 <code>READY</code>\uff0c\u5b83\u80fd\u591f\u88ab\u82e5\u5e72\u8fdb\u7a0b\u8bbf\u95ee\u3002\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u529f\u80fd\u5e94\u5f53\u7531\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\uff0c\u5e76\u4e0d\u662f\u6211\u4eec\u5173\u6ce8\u7684\u91cd\u70b9\u3002</p>"},{"location":"OS/Unit2-Part1/#petersons-algorithm","title":"Peterson\u2019s Algorithm","text":"<p>Links</p> <ul> <li>Peterson's algorithm | Wikipedia</li> </ul> <p>Peterson's algorithm \u662f\u5bf9\u53ea\u6709\u4e24\u4e2a\u8fdb\u7a0b\u53c2\u4e0e\u7684\u540c\u6b65\u95ee\u9898\u7684\u4e00\u4e2a\u89e3\u6cd5\uff0c\u5177\u6709\u4e00\u5b9a\u7684\u5c40\u9650\u6027\uff0c\u4f46\u5176\u8bbe\u8ba1\u76f8\u5bf9\u7b80\u5355\uff0c\u6240\u4ee5\u5148\u884c\u7ed9\u51fa\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe \\(P_0\\) \u548c \\(P_1\\) \u662f\u53c2\u4e0e\u540c\u6b65\u95ee\u9898\u8ba8\u8bba\u7684\u4e24\u4e2a\u8fdb\u7a0b\u3002</p> <p>\u57fa\u4e8e Peterson's algorithm \u5bf9\u591a\u8fdb\u7a0b\u60c5\u51b5\u7684\u6269\u5c55\u88ab\u79f0\u4e3a filter algorithm\uff0c\u4f46 filter algorithm \u4e0d\u6ee1\u8db3 bounded waiting time \u7684\u6761\u4ef6\uff0c\u8bfb\u8005\u6709\u5174\u8da3\u53ef\u4ee5\u81ea\u884c\u4e86\u89e3\u3002</p>"},{"location":"OS/Unit2-Part1/#_2","title":"\u7b97\u6cd5\u63cf\u8ff0","text":"<p>\u4e3a\u4e86\u4fdd\u8bc1\u5904\u4e8e\u4e34\u754c\u6001\u7684\u8fdb\u7a0b\u81f3\u591a\u53ea\u6709\u4e00\u4e2a\uff0c\u6211\u4eec\u5e94\u5f53\u5728\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u6001\u65f6\uff0c\u786e\u8ba4\u6ca1\u6709\u5176\u4ed6\u8fdb\u7a0b\u5904\u4e8e\u4e34\u754c\u6001\u540e\u518d\u8fdb\u5165\u3002\u5176\u4e2d\u6700\u91cd\u8981\u7684\u4e00\u4ef6\u4e8b\u5c31\u662f\uff0c\u5f53\u6211\u4eec\u5904\u5728 \\(P_0\\) \u65f6\uff0c\u6211\u4eec\u5982\u4f55\u77e5\u9053 \\(P_1\\) \u662f\u5426\u6b63\u5904\u4e8e\u4e34\u754c\u6001\u5462\uff1fPeterson\u2019s Algorithm \u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5b9e\u73b0\u4e86\u8fd9\u4ef6\u4e8b\uff1a</p> <pre><code>// `i` is 0 or 1, indicating current pid, while `j` is another pid.\nprocess(i) {\n    j = 1 - i;\n\n    READY[i] = true;                    // \u2510\n    TURN = j;                           // \u2502\n    while (READY[j] &amp;&amp; TURN == j) {}    // \u251c entry section\n        // i.e. wait until:             // \u2502\n        //  (1) j exits,                // \u2502\n        //  (2) j is slower, so it      // \u2502\n        //      should run now.         // \u2518\n\n    /* operate critical resources */    // - critical section\n\n    READY[i] = false;                   // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>\u9996\u5148\u8bf4\u660e\uff0centry section \u6ca1\u6709\u4e34\u754c\u8d44\u6e90\uff0c\u8fd9\u91cc\u7684 <code>TURN</code> \u662f\u6211\u4eec\u6545\u610f\u653e\u5728\u8fd9\u91cc\u7684\u3002</p> <p><code>READY</code> \u662f\u4e00\u4e2a\u5171\u4eab\u7684\u6570\u7ec4\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u53ea\u4fee\u6539\u4e0e\u81ea\u5df1\u4e00\u4e00\u5bf9\u5e94\u7684 element\uff0c\u6240\u4ee5\u672c\u8d28\u4e0a <code>READY</code> \u4e0d\u4f1a\u51fa\u73b0 race condition\uff0c\u56e0\u800c\u4e5f\u4e0d\u662f\u4e34\u754c\u8d44\u6e90\u3002\u800c <code>TURN</code>\uff0c\u6211\u4eec\u5728\u7b2c 6 \u884c\u53ea\u5bf9 <code>TURN</code> \u8fdb\u884c\u76f4\u63a5\u5199\u7684\u64cd\u4f5c\uff0c\u4f46\u662f P1 \u548c P2 \u8c01\u540e\u8dd1\u5b8c\u5230\u8fd9\u4e00\u884c\u4f1a\u51b3\u5b9a <code>TURN</code> \u6700\u540e\u7684\u503c\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u8fd9\u91cc\u6709 race condition\u3002</p> <p>\u4f46\u8fd9\u5c31\u662f Peterson\u2019s Algorithm \u5de7\u5999\u7684\u5730\u65b9\uff0cPeterson's \u5229\u7528 race condition \u8fd9\u4e2a\u201c\u540e\u8986\u76d6\u524d\u201d\u7684\u6027\u8d28\uff0c\u5b9e\u73b0\u4e86\u6807\u8bb0\u4e86\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\u7684\u5148\u6765\u540e\u5230\u7684\u6548\u679c\u3002\u6211\u4eec\u90fd\u5411\u8fd9\u4e2a <code>TURN</code> \u5199\u4e00\u4e2a\u72ec\u7279\u7684\u503c\uff08\u6bd4\u5982\u81ea\u5df1\u7684 id\uff0c\u6216\u8005\u5bf9\u65b9\u7684 id\uff09\uff0c\u7b49\u5927\u5bb6\u90fd\u5199\u597d\u540e\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u503c\u6700\u7ec8\u662f\u8c01\u5199\u7684\uff0c\u4e8e\u662f\u5c31\u77e5\u9053\u8c01\u540e\u5230\u3002</p> <p>\u5229\u7528\u8fd9\u4e2a\u539f\u7406\uff0cPeterson's \u8fd9\u91cc\u505a\u4e86\u4e00\u4e2a\u201c\u975e\u5e38\u6709\u4e2d\u56fd\u4eba\u6c14\u8d28\u201d\u7684\u4e8b\u60c5\uff1a\\(P_0\\) \u548c \\(P_1\\) \u4e0a\u516c\u4ea4\u8f66\u540e\u540c\u65f6\u770b\u4e0a\u4e86\u4e00\u4e2a\u5ea7\u4f4d\uff0c\\(P_0\\) \u8bf4\uff1a\u201c\u4f60\u5750\u5427\u3002\u201d\uff0c \\(P_1\\) \u81ea\u7136\u4e5f\u8981\u5ba2\u6c14\u4e00\u4e0b\uff0c\u8bf4\uff1a\u201c\u8fd8\u662f\u4f60\u5750\u5427\uff01\u201d\u3002\u73b0\u5728\u4e24\u8fb9\u90fd\u5ba2\u6c14\u8fc7\u4e86\uff0c\\(P_0\\) \u5c31\u53ef\u4ee5\u5fc3\u5b89\u7406\u5f97\u5730\u5750\u4e0b\u4e86\u3002\u5bf9\u4e0a\u8ff0\u8fc7\u7a0b\uff0c\u6211\u4eec\u7ed9\u51fa \\(P_0\\) \u83b7\u5f97\u6905\u5b50\u7684\u51c6\u786e\u6761\u4ef6\u6709\uff1a</p> <ol> <li>\\(P_0\\) \u60f3\u5750\u4e0b\uff0c\\(P_1\\) \u4e5f\u60f3\u5750\u4e0b\uff08\u5426\u5219\u5c31\u6ca1\u6709\u51b2\u7a81\uff0c\u53ef\u4ee5\u76f4\u63a5\u5750\u4e0b\u4e86\uff09\uff1b</li> <li>\\(P_0\\) \u53d1\u73b0 \\(P_1\\) \u5728\u5ba2\u6c14\uff0c\u4f46 \\(P_0\\) \u5df2\u7ecf\u5ba2\u6c14\u8fc7\u4e86\uff1b</li> </ol> <p>\u5bf9\u5e94\u5230\u4e0a\u9762\u7ed9\u51fa\u7684\u4ee3\u7801\u91cc\uff0c\u8fd9\u4e2a\u6761\u4ef6\u53ef\u4ee5\u7ffb\u8bd1\u4e3a\uff1a</p> <ol> <li><code>READY[0]</code> = <code>READY[1]</code> = <code>true</code>\uff1b</li> <li><code>TURN</code> \u2260 <code>j</code>\uff0c\u4f46\u6b64\u524d \\(P_i\\) \u5df2\u7ecf\u6267\u884c\u8fc7 <code>TURN &lt;- j</code>\uff1b</li> </ol> <p>\u8bf7\u8bfb\u8005\u4ed4\u7ec6\u601d\u8003\u4e0a\u9762\u7684\u8fc7\u7a0b\uff0c\u5e76\u9002\u5f53\u8fdb\u884c\u5168\u9762\u7684\u6a21\u62df\u4ee5\u7406\u89e3 Peterson's \u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002</p>"},{"location":"OS/Unit2-Part1/#_3","title":"\u6027\u8d28\u8bc1\u660e","text":"<p>\u73b0\u5728\u6211\u4eec\u9700\u8981\u8bc1\u660e\u8fd9\u4e2a\u7b97\u6cd5\u6ee1\u8db3\u6027\u8d28\u3002</p> <p>\u6211\u7684\u8bc1\u660e\u6bd4\u8f83\u8be6\u7ec6\u548c\u5570\u55e6\uff0c\u4f46\u6211\u8ba4\u4e3a\u5b8c\u6574\u5730\u6a21\u62df\u66f4\u52a0\u6709\u5229\u4e8e\u76f4\u89c9\u7406\u89e3\uff0c\u5982\u679c\u4f60\u60f3\u8981\u66f4\u7b80\u6d01\u7684\u8bc1\u660e\uff0c\u53ef\u4ee5\u53c2\u8003 xyx \u7684\u7b14\u8bb0\u3002</p> mutual exclusion <pre><code>// `i` is 0 or 1, indicating current pid, while `j` is another pid.\nprocess(i) {\n    j = 1 - i;\n\n    READY[i] = true;                    // \u2510\n    TURN = j;                           // \u2502\n    while (READY[j] &amp;&amp; TURN == j) {}    // \u251c entry section\n        // i.e. wait until:             // \u2502\n        //  (1) j exits,                // \u2502\n        //  (2) j is slower, so it      // \u2502\n        //      should run now.         // \u2518\n\n    /* operate critical resources */    // - critical section\n\n    READY[i] = false;                   // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>lemma</p> <p>\u5982\u679c\u6b64\u65f6 i \u548c j \u540c\u5904\u4e8e\u7b2c 7 \u884c\uff0c\u90a3\u4e48\u663e\u7136\uff1a</p> <ol> <li>\u4e24\u4e2a\u8fdb\u7a0b\u90fd\u60f3\u8981\u8fdb\u5165 critical section\uff0c\u5373 <code>READY[i]</code> \u548c <code>READY[j]</code> \u90fd\u4e3a <code>true</code>\uff1b</li> <li><code>TURN</code> \u7684\u503c\u4e0d\u518d\u4f1a\u88ab\u66f4\u6539\uff1b</li> <li>\u4e24\u4e2a\u8fdb\u7a0b\u90fd\u5c1a\u672a\u8fdb\u5165 critical section\uff1b</li> </ol> <p>\u7531\u4e8e <code>TURN</code> \u5fc5\u5b9a\u4e5f\u53ea\u80fd\u4e3a i \u6216 j\uff0c\u6240\u4ee5 i \u548c j \u5fc5\u7136\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u8fdb\u7a0b\u63a5\u4e0b\u6765\u4f1a break loop \u5e76\u8fdb\u5165 critical section\uff0c\u5728\u5b83\u7ed3\u675f\u4e4b\u524d\uff0c\u5373\u5728 <code>READY[?]</code> \u88ab\u6539\u53d8\u4e4b\u524d\uff0c\u8be5\u6761\u4ef6\u6301\u7eed\u6210\u7acb\u3002</p> <p>\u56e0\u6b64\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5982\u679c\u6b64\u65f6 i \u548c j \u540c\u5904\u4e8e\u7b2c\u4e03\u884c\uff0ci \u548c j \u53ea\u6709\u4e00\u4e2a\u80fd\u8fdb\u5165 critical section\uff1b\u53e6\u5916\u4e00\u4e2a\u53ea\u6709\u5728\u5148\u8fdb\u53bb\u7684\u90a3\u4e2a\u91ca\u653e\u8d44\u6e90\u4e86\u4ee5\u540e\u624d\u80fd\u8fdb\u53bb\uff0c\u6240\u4ee5\u6ee1\u8db3\u4e92\u65a5\u7684\u6761\u4ef6\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u8003\u8651 i \u5df2\u7ecf\u5148\u884c\u8fd0\u884c\u5230\u7b2c 7 \u884c\uff0c\u800c j \u8fd8\u6ca1\u8fd0\u884c\u5230\u7b2c 7 \u884c\uff1a</p> <p>Situation 1</p> <p>\u5982\u679c j \u8fd8\u6ca1\u8fdb\u5165\u7b2c 5 \u884c\uff0c\u90a3\u4e48 <code>READY[j]</code> \u4e3a <code>false</code>\uff0c\u6b64\u65f6\u6ca1\u6709\u7ade\u4e89\uff0ci \u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u4e34\u754c\u6001\u3002\u5e76\u4e14 j \u4e4b\u540e\u8fd0\u884c\u5230\u7b2c 7 \u884c\u65f6\uff0c<code>TURN == &lt;another&gt;</code> \u59cb\u7ec8\u6210\u7acb\u3002\u6240\u4ee5 j \u4f55\u65f6\u8fdb\u5165 critical section \u5b8c\u5168\u53d6\u51b3\u4e8e <code>READY[j]</code>\uff0c\u5373 j \u4f55\u65f6\u79bb\u5f00 critical section\u3002</p> <p>\u663e\u7136\uff0c\u6b64\u65f6\u6ee1\u8db3\u4e92\u65a5\u6027\u8d28\u3002</p> <p>Situation 2</p> <p>\u5982\u679c j \u5df2\u7ecf\u8fd0\u884c\u5b8c\u7b2c 5 \u884c\uff0c\u8fd8\u6ca1\u6267\u884c\u7b2c 6 \u884c\uff0c\u90a3\u4e48\u5bf9\u4e8e i \u6765\u8bf4\uff0c<code>(READY[j] &amp;&amp; TURN == j)</code> \u4e3a <code>true</code>\uff0c\u6b64\u65f6 i \u5c06\u7b49\u5f85 j\uff0c\u8fdb\u5165 Situation 3\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u8981\u4e48 i \u548c j \u4e0d\u7ade\u4e89\uff0c\u8981\u4e48\u4e24\u8005\u90fd\u8fd0\u884c\u5230\u7b2c 7 \u884c\u540e\u624d\u4f1a\u6709\u8fdb\u7a0b\u8fdb\u5165 critical section</p> <p>\u8fd9\u5c31\u597d\u50cf\u4e24\u8005\u5728\u7b2c 6 \u884c\u6bd4\u8c01\u5148\u4e3e\u624b\uff0c\u7136\u540e\u7b49\u4e24\u8005\u90fd\u4e3e\u8fc7\u624b\uff08\u90fd\u8dd1\u5b8c\u7b2c 6 \u884c\uff0c\u5230\u8fbe\u7b2c 7 \u884c\uff09\u540e\uff0c\u518d\u5224\u65ad\u8c01\u8fdb\u5165 critical section\uff0c\u800c\u8fdb\u5165\u7b2c 7 \u884c\u4ee5\u540e\u6240\u6709\u7684\u5224\u65ad\u6761\u4ef6\u90fd\u662f\u76f8\u5bf9\u9759\u6b62\u7684\u3001\u4e0d\u4f1a\u518d\u88ab\u4fee\u6539\u7684\uff0c\u56e0\u800c\u907f\u514d\u751a\u81f3\u5229\u7528\u4e86 race condition \u5bf9 selection \u7684\u5f71\u54cd\uff0c\u4fdd\u8bc1\u4e86\u4e92\u65a5\u7684\u6027\u8d28\u3002</p> progress <p>\u8fd9\u6761\u6027\u8d28\u7684\u6210\u7acb\u6bd4\u8f83\u7b26\u5408\u76f4\u89c9\uff0c\u552f\u4e00\u9700\u8981\u8bf4\u660e\u7684\u5c31\u662f\u4e0d\u4f1a\u51fa\u73b0\u4e24\u4e2a\u8fdb\u7a0b\u540c\u65f6\u5728 <code>while ()</code> \u88ab\u963b\u585e\u4f4f\u7684\u60c5\u51b5\u3002\u4f46\u662f\u8fd9\u70b9\u975e\u5e38\u663e\u7136\uff0c<code>TURN == i &amp;&amp; TURN == j</code> \u5fc5\u7136\u662f false\uff0c\u6240\u4ee5\u4e24\u4e2a\u5faa\u73af\u603b\u6709\u4e00\u4e2a\u4f1a\u88ab break\u3002</p> bounded waiting time <p>\u5728 Peterson's \u4e2d\uff0c\u7b49\u5f85\u65f6\u95f4\u4e3b\u8981\u6307\u8fd9\u90e8\u5206\u7684\u8fd0\u884c\u65f6\u95f4\uff0c\u5c24\u5176\u6307\u7b2c\u4e03\u884c\u7684 <code>while</code> \u5faa\u73af\u3002</p> <pre><code>// `i` is 0 or 1, indicating current pid, while `j` is another pid.\nprocess(i) {\n    j = 1 - i;\n\n    READY[i] = true;                    // \u2510\n    TURN = j;                           // \u2502\n    while (READY[j] &amp;&amp; TURN == j) {}    // \u251c entry section\n        // i.e. wait until:             // \u2502\n        //  (1) j exits,                // \u2502\n        //  (2) j is slower, so it      // \u2502\n        //      should run now.         // \u2518\n\n    /* operate critical resources */    // - critical section\n\n    READY[i] = false;                   // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0d\u65ad\u5faa\u73af\u7684\u6761\u4ef6\u662f\uff1a<code>READY[j] &amp;&amp; TURN == j</code>\uff0c\u5982\u679c\u8be5\u5faa\u73af\u4e00\u5f00\u59cb\u5c31\u4e0d\u6210\u7acb\uff0c\u90a3\u4e48\u663e\u7136\u662f\u7b26\u5408 bounded waiting time \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u8fd9\u4e2a\u6761\u4ef6\u6700\u591a\u80fd\u6301\u7eed\u591a\u4e45\u3002</p> <p>A. <code>READY[j]</code> \u4e3a <code>true</code></p> <p>\u8fd9\u9700\u8981 process j \u5df2\u7ecf\u8fd0\u884c\u8fc7\u7b2c 5 \u884c\uff0c\u5e76\u4e14\u8fd8\u6ca1\u8fd0\u884c\u7b2c 15 \u884c\uff0c\u5373 process j \u4e5f\u60f3\u8981\u8fdb\u5165\u4e34\u754c\u6001\u3002</p> <p>\u8fd9\u4e00\u6761\u662f\u5728\u5224\u65ad\u662f\u5426\u6709\u51b2\u7a81\u5b58\u5728\uff0c\u5982\u679c\u73b0\u5728\u53ea\u6709 process i \u60f3\u8981\u8fdb\u5165\u4e34\u754c\u6001\uff0c\u90a3\u65e0\u9700\u7b49\u5f85\u76f4\u63a5\u8fdb\u5165\u5373\u53ef\u3002\u901a\u8fc7\u6539\u53d8\u8fd9\u4e2a\u6761\u4ef6\u800c\u8fdb\u5165\u4e34\u754c\u6001\u6709\u4e24\u79cd\u53ef\u80fd\uff1a</p> <ol> <li>\u4e00\u5f00\u59cb\u51b2\u7a81\u5c31\u4e0d\u5b58\u5728\uff1b</li> <li>process j \u521a\u79bb\u5f00\u4e34\u754c\u6001\uff0c\u91ca\u653e\u4e86\u4e34\u754c\u8d44\u6e90\uff1b</li> </ol> <p>B. <code>TURN == j</code> \u4e3a <code>true</code></p> <p>\u6709\u4e24\u79cd\u53ef\u80fd\uff1a</p> <ol> <li>process j \u8fd8\u6ca1\u8fd0\u884c\u7b2c 6 \u884c\uff1b</li> <li>process j \u5728 process i \u4e4b\u524d\u5c31\u8fd0\u884c\u4e86\u7b2c 6 \u884c\uff1b</li> </ol> <p>\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u7531\u4e8e A. \u6210\u7acb\u540e\u624d\u4f1a\u5224\u65ad\u8fd9\u6761\uff0c\u6240\u4ee5 process j \u7684\u72b6\u6001\u5176\u5b9e\u662f\u521a\u8fd0\u884c\u5b8c\u7b2c 5 \u884c\u8fd8\u6ca1\u8fd0\u884c\u5b8c\u7b2c 6 \u884c\uff0c\u663e\u7136\u8fd9\u4e2a\u65f6\u95f4\u662f\u6709\u754c\u7684\u3002</p> <p>\u800c\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u8bf4\u660e i \u662f\u540e\u6765\u8005\uff0cj \u5df2\u7ecf\u5ba2\u6c14\u8fc7\u4e00\u6b21\u4e86\uff0c\u6240\u4ee5\u5e94\u5f53\u8ba9 j \u8fd0\u884c\uff0ci \u7b49\u5f85 j \u79bb\u5f00\u4e34\u754c\u6001\u91ca\u653e\u8d44\u6e90\uff0c\u6b64\u65f6\u901a\u8fc7 A.2. \u6765\u8fdb\u5165\u4e34\u754c\u6001\u3002\u800c process j \u64cd\u4f5c\u4e34\u754c\u8d44\u6e90\u7684\u65f6\u95f4\u4e5f\u5e94\u5f53\u6709\u9650\u7684\u3002</p> <p>\u7efc\u4e0a\u6240\u8ff0\uff0cwaiting time \u7684\u6700\u5927\u503c\u57fa\u672c\u4e0a\u53d6\u81ea\uff1a</p> <ol> <li>process j \u6267\u884c\u7b2c 6 \u884c\u7684\u65f6\u95f4\uff1b</li> <li>process j \u64cd\u4f5c\u4e34\u754c\u8d44\u6e90\u7684\u65f6\u95f4\uff1b</li> </ol> <p>\u901a\u8fc7\u4e4b\u524d\u7684\u8bba\u8ff0\u6211\u4eec\u77e5\u9053\uff0c\u8fd9\u4e24\u4e2a\u90fd\u662f\u6709\u754c\u7684\uff0c\u4e8e\u662f\u8be5\u6027\u8d28\u5f97\u8bc1\u3002</p> <p>Oops!</p> <p>\u4f46\u662f\uff0cPeterson's \u5b9e\u9645\u4e0a\u65e0\u6cd5\u9002\u7528\u4e8e\u73b0\u4ee3\u8ba1\u7b97\u673a\u4e2d\u3002\u4e0a\u8ff0\u505a\u6cd5\u6709\u4e00\u4e2a\u5173\u952e\uff0c\u4e5f\u662f\u6211\u4eec\u5728\u8bc1\u660e\u8fc7\u7a0b\u4e2d\u4e00\u76f4\u9ed8\u8ba4\u6210\u7acb\u7684\u4e8b\u60c5\uff1a\u8fdb\u7a0b\u603b\u662f\u5148\u6267\u884c <code>READY[i] = true;</code>\uff0c\u7136\u540e\u624d\u4f1a\u6267\u884c <code>TURN = j;</code>\uff0c\u5373\u5148\u8fdb\u5165\u5c31\u7eea\u6001\uff0c\u518d\u7d22\u53d6\u4e34\u754c\u8d44\u6e90\uff0c\u8fd9\u770b\u8d77\u6765\u662f\u4e2a\u975e\u5e38\u5408\u7406\u7684\u6761\u4ef6\u3002\u4f46\u5728\u73b0\u4ee3\u8ba1\u7b97\u673a\u4e2d\uff0c\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u901a\u8fc7\u91cd\u6392\u5217\u90e8\u5206\u8bed\u53e5\u6765\u66f4\u597d\u5730\u5229\u7528 CPU \u8d44\u6e90\uff08\u53c2\u8003\u8ba1\u7ec4\u7684\u5404\u79cd\u7ade\u4e89\uff09\u3002\u800c\u5bf9\u7f16\u8bd1\u5668\u6765\u8bf4\uff0c\u8fd9\u4e24\u4e2a\u64cd\u4f5c\uff08\u5c31\u7eea\u548c\u8bf7\u6c42\uff09\u5e76\u6ca1\u6709\u64cd\u4f5c\u76f8\u540c\u5185\u5bb9\uff0c\u56e0\u800c\u4ea4\u6362\u987a\u5e8f\u662f\u4e0d\u4f1a\u5f71\u54cd\u7ed3\u679c\u7684\uff0c\u6240\u4ee5\u53ef\u80fd\u88ab\u7f16\u8bd1\u5668\u4ea4\u6362\u3002\u800c\u8fd9\u5c31\u6709\u53ef\u80fd\u5bfc\u81f4\u51fa\u73b0\u95ee\u9898\uff0c\u4f8b\u5982\uff1a</p> <p>  The effects of instruction reordering in Peterson\u2019s solution. </p> <p>\u5728\u68d5\u8272\u6807\u8bb0\u65f6\u523b\uff0cprocess 1 \u8fdb\u884c <code>while</code> \u5faa\u73af\u5224\u65ad\uff0c\u53d1\u73b0 <code>READY[0]</code> \u4e3a <code>false</code>\uff0c\u4f46\u6b64\u65f6 <code>TURN</code> \u6307\u5411\u5bf9\u65b9\uff0c\u6240\u4ee5\u6309\u7167\u6211\u4eec\u5148\u524d\u7684\u5206\u6790\uff0c\u6b64\u65f6 process 1 \u4f1a\u8ba4\u4e3a process 0 \u662f\u5df2\u7ecf\u8fd0\u884c\u5b8c critical section\uff0c\u5df2\u7ecf\u91ca\u653e\u4e86\u4e34\u754c\u8d44\u6e90\uff0c\u6240\u4ee5\u8fdb\u5165\u4e34\u754c\u6001\uff1b\u7136\u800c\uff0c\u5728\u7eff\u8272\u6807\u8bb0\u65f6\u523b\uff0c\u5bf9\u4e8e process 0\uff0c\u6b64\u65f6 <code>TURN</code> \u6307\u5411\u81ea\u5df1\uff0cprocess 1 \u8fd8\u6ca1\u8fd0\u884c\u5b8c\u6240\u4ee5 <code>READY[1]</code> \u8fd8\u662f <code>true</code>\uff0c\u6839\u636e\u6211\u4eec\u4e4b\u524d\u7684\u5206\u6790\uff0c\u6b64\u65f6 process 0 \u4f1a\u8ba4\u4e3a process 1 \u5728\u7b49\u5f85\u81ea\u5df1\uff0c\u6240\u4ee5\u4e5f\u8fdb\u5165\u4e86\u4e34\u754c\u6001\u3002\u4e8e\u662f\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u540c\u65f6\u8fdb\u5165\u4e86\u4e34\u754c\u6001\uff0c\u8fdd\u53cd\u4e86 mutual exclusion \u7684\u6027\u8d28\u3002</p> <p>\u6240\u4ee5\uff0c\u5b9e\u9645\u4e0a Peterson's Algorithm \u4ecd\u7136\u6ca1\u6709\u89e3\u51b3\u95ee\u9898\u3002</p>"},{"location":"OS/Unit2-Part1/#memory-barriers","title":"Memory Barriers","text":"<p>\u8be5\u65b9\u6cd5\u5b9e\u9645\u4e0a\u662f\u5bf9\u4e0a\u8ff0\u8f6f\u4ef6\u65b9\u6cd5\u7684\u8865\u8db3\u3002\u6211\u4eec\u5148\u524d\u63d0\u5230\uff0cPeterson's Algorithm \u5931\u6548\u7684\u539f\u56e0\u662f\u7f16\u8bd1\u5668\u4f1a\u6839\u636e\u9700\u6c42\u91cd\u6392\u5217\u4e00\u4e9b\u5185\u5b58\u64cd\u4f5c\uff0c\u800c memory barriers \u4fdd\u8bc1 barrier \u4e4b\u524d\u7684 S/L \u6307\u4ee4\u5fc5\u987b\u5728 barrier \u4e4b\u540e\u7684 S/L \u6307\u4ee4\u4e4b\u524d\u5b8c\u6210\uff0c\u4f7f\u6211\u4eec\u80fd\u591f\u4e3b\u52a8\u7981\u6b62\u7f16\u8bd1\u5668\u505a\u8fd9\u79cd\u91cd\u6392\u3002</p> <pre><code>// `i` is 0 or 1, indicating current pid, while `j` is another pid.\nprocess(i) {\n    j = 1 - i;\n\n    READY[i] = true;                    // \u2510\n    memory_barrier();                   // \u2502\n    TURN = j;                           // \u2502\n    while (READY[j] &amp;&amp; TURN == j) {}    // \u251c entry section\n        // i.e. wait until:             // \u2502\n        //  (1) j exits,                // \u2502\n        //  (2) j is slower, so it      // \u2502\n        //      should run now.         // \u2518\n\n    /* operate critical resources */    // - critical section\n\n    READY[i] = false;                   // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>Memory Model</p> <p>\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u67b6\u6784\u53ef\u80fd\u4f1a\u5bf9\u7528\u6237\u7a0b\u5e8f\u64cd\u4f5c\u5185\u5b58\u7684\u4fdd\u8bc1\u6709\u6240\u4e0d\u540c\uff0c\u8fd9\u79cd\u4fdd\u8bc1\u88ab\u79f0\u4e3a memory model\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a</p> <ol> <li>\u5f3a\u6709\u5e8f(strongly ordered)\uff1a\u8fdb\u7a0b\u5bf9\u5185\u5b58\u505a\u7684\u4fee\u6539\u7acb\u523b\u5bf9\u5176\u5b83\u5904\u7406\u5668\u53ef\u89c1\uff1b</li> <li>\u5f31\u6709\u5e8f(weakly ordered)\uff1a\u8fdb\u7a0b\u5bf9\u5185\u5b58\u505a\u7684\u4fee\u6539\u4e0d\u7acb\u523b\u5bf9\u5176\u5b83\u5904\u7406\u5668\u53ef\u89c1\uff1b</li> </ol> <p>\u6211\u4eec\u77e5\u9053\uff0c\u4e3a\u4e86\u63d0\u9ad8\u5185\u5b58\u64cd\u4f5c\u7684\u6548\u7387\uff0c\u6211\u4eec\u5f15\u5165\u4e86 cache\uff0c\u5728\u591a\u5904\u7406\u5668\u60c5\u51b5\u4e0b\uff0ccache \u673a\u5236\u7684\u5b58\u5728\u53ef\u80fd\u5bfc\u81f4\u8fdb\u7a0b A \u5bf9\u5185\u5b58\u7684\u5199\u65e0\u6cd5\u5bf9\u8fdb\u7a0b B \u7acb\u523b\u53ef\u89c1\uff0c\u8fd9\u5c31\u662f\u5f31\u6709\u5e8f\u7684\u4e00\u79cd\u4f53\u73b0\u3002</p> \u8865\u5145\u6750\u6599 <p>\u611f\u8c22 ltgg \u63d0\u4f9b\u7684\u53c2\u8003\u8d44\u6599\uff0c\u8bfb\u8005\u6709\u5174\u8da3\u53ef\u4ee5\u81ea\u884c\u9605\u8bfb\uff1a</p> <ul> <li>This Is Why They Call It a Weakly-Ordered CPU</li> <li>\u2b50\ufe0f Weak vs. Strong Memory Models</li> </ul> <p>\u5173\u4e8e\u5f3a\u5f31\u7684\u5b9a\u4e49\uff0c\u5927\u81f4\u7684\u610f\u601d\u662f\uff1a</p> <p>A strong hardware memory model is one in which every machine instruction comes implicitly with acquire and release semantics. As a result, when one CPU core performs a sequence of writes, every other CPU core sees those values change in the same order that they were written.</p> <p>\u8fd9\u90e8\u5206\u6211\u6ca1\u6709\u5b8c\u5168\u641e\u6e05\u695a\uff0c\u4e66\u672c\u7684\u903b\u8f91\u975e\u5e38\u7684\u8be1\u5f02\uff1a\u4e66\u672c\u8ba4\u4e3a memory barrier \u662f\u5f31\u6709\u5e8f\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4f46\u662f\u6211\u59cb\u7ec8\u6ca1\u660e\u767d\u5b83\u4eec\u4e4b\u95f4\u7684\u903b\u8f91\u5728\u54ea\u91cc\uff0c\u4ee5\u53ca\u201c\u6709\u5e8f\u201d\u548c\u201c\u7acb\u523b\u53ef\u89c1\u201d\u7684\u6839\u672c\u8054\u7cfb\u5728\u54ea\u91cc\u3002\u8fd9\u91cc\u4e00\u5b9a\u662f\u5b58\u5728\u4e0d\u6e05\u695a\u7684\u5730\u65b9\u7684\u3002\u4f46\u662f\u8fd9\u90e8\u5206\u770b\u8d77\u6765\u4e0d\u662f\u5f88\u91cd\u8981\uff0c\u6240\u4ee5\u6211\u5c31\u5148\u653e\u7740\u4e0d\u7ba1\u4e86\u3002</p>"},{"location":"OS/Unit2-Part1/#hardware-instructions","title":"Hardware Instructions","text":"<p>\u8ba8\u8bba Peterson's Algorithm \u540e\u6211\u4eec\u5e94\u5f53\u610f\u8bc6\u5230\uff0c\u540c\u6b65\u95ee\u9898\u7684\u51fa\u73b0\u662f \u24f5 \u786c\u4ef6\u64cd\u4f5c\u6570\u636e\u9700\u8981\u65f6\u95f4\uff0c\u4e0e \u24f6 \u6570\u636e\u5177\u6709\u5171\u4eab\u6027\u7684\u4e0d\u534f\u8c03\uff0c\u6240\u4ee5\u672c\u8d28\u4e0a\u662f\u786c\u4ef6\u4ea7\u751f\u7684\u95ee\u9898\u3002\u56e0\u800c\uff0c\u8981\u60f3\u66f4\u597d\u7684\u89e3\u51b3\u95ee\u9898\uff0c\u6211\u4eec\u8fd8\u662f\u5e94\u5f53\u4ece\u786c\u4ef6\u51fa\u53d1\u3002\u6211\u4eec\u5728\u8fd9\u91cc\u5f15\u5165\u539f\u5b50\u6027(atomic)\u8fd9\u4e2a\u6982\u5ff5\uff0c\u5b83\u7684\u57fa\u672c\u903b\u8f91\u662f\u8ba9\u201c\u9700\u8981\u65f6\u95f4\u7684\uff0c\u5bf9\u6570\u636e\u7684\u64cd\u4f5c\u201d\uff0c\u53d8\u6210\u4e00\u4e2a\u201c\u5728\u65f6\u95f4\u4e0a\u4e0d\u53ef\u5206\u5272\u3001\u4e0d\u53ef\u88ab\u6253\u65ad\u7684\uff0c\u5373\u539f\u5b50\u6027\u7684\u64cd\u4f5c\u201d\u3002\u4e0d\u540c\u786c\u4ef6\u53ef\u80fd\u63d0\u4f9b\u4e0d\u540c\u7684\u539f\u5b50\u6027\u64cd\u4f5c\uff0c\u6211\u4eec\u8fd9\u91cc\u5c06\u5b83\u4eec\u62bd\u8c61\u4e3a <code>test_and_set()</code> \u548c <code>compare_and_swap()</code> \u4e24\u7c7b\u6765\u4ecb\u7ecd\u3002</p>"},{"location":"OS/Unit2-Part1/#test_and_set","title":"<code>test_and_set()</code>","text":"<p>Links</p> <ul> <li>Wikipedia</li> </ul> <pre><code>&lt;atomic&gt; test_and_set(bool * target) {\n    bool ret = *target;\n    *target = true;\n    return ret;\n}\n</code></pre> <p>\u8be5\u6307\u4ee4\u7684\u529f\u80fd\u5c31\u7c7b\u4f3c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\uff1a\u5c06\u76ee\u6807\u8bbe\u4e3a <code>true</code>\uff0c\u540c\u65f6\u8fd4\u56de\u5176\u65e7\u503c\u3002\u4f46\u9664\u6b64\u4e4b\u5916\uff0c\u8fd9\u4e2a\u6307\u4ee4\u9700\u8981\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u5373\u5982\u679c\u6709\u82e5\u5e72 <code>test_and_set()</code> \u540c\u65f6\u53d1\u751f\uff0c\u90a3\u4e48\u65e0\u8bba\u5e76\u53d1\u8fd8\u662f\u5e76\u884c\uff0c\u5b83\u4eec\u90fd\u5e94\u5f53\u4e00\u4e2a\u4e00\u4e2a\u5730\u6267\u884c\uff0c\u800c\u4e0d\u80fd\u4ea7\u751f\u65f6\u95f4\u4e0a\u7684\u4ea4\u96c6\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u79cd atomic \u7684\u64cd\u4f5c\u5929\u7136\u4fdd\u8bc1\u4e86 mutual exclusion\uff0c\u56e0\u800c\u5bf9\u4e8e\u5b9e\u73b0\u4e86 <code>test_and_set()</code> \u7684\u673a\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>test_and_set()</code> \u6765\u89e3\u51b3 CS \u95ee\u9898\u3002</p> <pre><code>process(i) {\n    while ( test_and_set(&amp;LOCK) ) {}    // - entry section\n\n    /* operate critical resources */    // - critical section\n\n    LOCK = false;                       // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>\u5728\u7b2c 3 \u884c\uff0c\u5faa\u73af\u7b49\u5f85\u7684\u6761\u4ef6\u53d8\u4e3a <code>test_and_set(&amp;LOCK)</code>\uff0c\u5982\u679c <code>LOCK</code> \u7684\u65e7\u503c\u662f <code>false</code>\uff0c\u5219\u53ef\u4ee5\u7ee7\u7eed\uff0c\u5e76\u4e14\u6b64\u65f6 <code>LOCK</code> \u7684\u503c\u88ab\u539f\u5b50\u6027\u5730\u4fee\u6539\u4e3a <code>true</code>\uff1b\u800c\u5982\u679c <code>LOCK</code> \u7684\u65e7\u503c\u662f <code>true</code>\uff0c\u90a3\u4e48\u5b83\u7ecf\u8fc7 <code>test_and_set(&amp;LOCK)</code> \u540e\u7684\u503c\u4ecd\u7136\u662f <code>true</code>\uff0c\u4e14\u9700\u8981\u7b49\u5f85\uff0c\u76f4\u5230\uff1a\u5c06 <code>LOCK</code> \u6539\u6210 <code>true</code> \u7684\u90a3\u4e2a\u8fdb\u7a0b\u5728 exit section \u5c06 <code>LOCK</code> \u6539\u56de <code>false</code>\uff0c\u5373\u91ca\u653e\u9501\u3002</p> <p>\u4f46\u662f\u8bf7\u6ce8\u610f\uff0c\u4e0e\u6211\u4eec\u8ba8\u8bba Peterson's Algorithm \u65f6\u7684\u8bed\u5883\u4e0d\u540c\uff0c\u6211\u4eec\u73b0\u5728\u4e0d\u518d\u5047\u8bbe\u53c2\u4e0e\u7ade\u4e89\u7684\u8fdb\u7a0b\u53ea\u6709\u4e24\u4e2a\uff08\u8fd9\u662f Peterson's \u7684\u5c40\u9650\u6027\u4e4b\u4e00\uff09\u3002\u5728\u8fd9\u4e2a\u8bed\u5883\u4e0b\uff0c\u6211\u4eec\u518d\u6765\u8003\u8651\u5b83\u662f\u5426\u6ee1\u8db3\u4e09\u6761\u6027\u8d28\u3002</p> <p>mutual exclusion</p> <p>\u7531\u4e8e <code>test_and_set()</code> \u662f\u539f\u5b50\u6027\u7684\uff0c\u6240\u4ee5\u540c\u65f6\u6267\u884c\u7684\u4e00\u7cfb\u5217 <code>test_and_set()</code> \u4e2d\uff0c\u53ea\u6709\u4e00\u4e2a\u80fd\u8fd4\u56de <code>false</code>\uff0c\u5373\u53ea\u6709\u4e00\u4e2a\u80fd\u901a\u8fc7\u9501\uff0c\u56e0\u800c\u5929\u751f\u6ee1\u8db3\u4e86 mutual exclusion\u3002</p> <p>progress</p> <p>\u4ee3\u7801\u4e2d\u5bf9 <code>LOCK</code> \u7684\u4fee\u6539\u64cd\u4f5c\u662f\u95ed\u5408\u7684\uff0c\u5373\u8fdb\u5165 critical section \u4f1a\u5bfc\u81f4 <code>LOCK</code> \u53d8\u4e3a <code>false</code>\uff0c\u4f46\u79bb\u5f00 critical section \u5fc5\u5b9a\u5bfc\u81f4 <code>LOCK</code> \u53d8\u4e3a <code>true</code>\u3002\u56e0\u6b64\uff0c\u53ea\u8981\u6ca1\u6709\u8fdb\u7a0b\u5904\u4e8e critical section\uff0c\u90a3\u4e48 <code>LOCK</code> \u5fc5\u5b9a\u4e3a <code>false</code>\uff0c\u5219\u4e00\u5b9a\u6709\u5c31\u7eea\u7684\u8fdb\u7a0b\u80fd\u591f\u8fdb\u5165 critical section\uff0c\u800c\u8fd0\u884c critical section \u7684\u65f6\u95f4\u662f\u6709\u9650\u7684\uff0c\u56e0\u6b64 <code>LOCK</code> \u53c8\u4e00\u5b9a\u4f1a\u5728\u6709\u9650\u65f6\u95f4\u5185\u53d8\u4e3a <code>false</code>\uff0c\u4ece\u800c\u6ee1\u8db3 progress\u3002</p> <p>bounded waiting time</p> <p>\u5982\u679c\u53ea\u6709\u4e24\u4e2a\u8fdb\u7a0b\u53c2\u4e0e\u7ade\u4e89\uff0c\u90a3\u4e48\u901a\u8fc7\u7c7b\u4f3c\u8bc1\u660e progress \u7684\u8fc7\u7a0b\u53ef\u4ee5\u5f97\u5230 bounded waiting time \u662f\u53ef\u4ee5\u6210\u7acb\u7684\u3002A \u79bb\u5f00\u4e34\u754c\u6001\u540e\u5904\u4e8e\u5c31\u7eea\u6001\u7b49\u5f85\u7684 B \u7acb\u523b\u5c31\u80fd\u8fdb\u5165 critical section\uff0c\u5373\u53ea\u6709\u4e24\u4e2a\u4eba\u6392\u961f\u662f\u4e0d\u4f1a\u88ab\u63d2\u961f\u7684\u3002</p> <p>\u4f46\u5728\u53c2\u4e0e\u7ade\u4e89\u7684\u8fdb\u7a0b\u53d8\u591a\u4ee5\u540e\uff0c\u5c31\u5f88\u6709\u53ef\u80fd\u51fa\u73b0\u7c7b\u4f3c\u4e8e\u8c03\u5ea6\u4e2d\u201c\u9965\u997f\u201d\u7684\u73b0\u8c61\uff1a</p> <pre><code>    \u250c\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2510      \nP0  \u2502 CS \u2502   \u2500\u2500\u2500\u2524 CS \u2502   \u2500\u2500\u2500\u2524 CS \u2502   \u2500\u2500\u2500\u2524 CS \u2502   \u2500\u2500\u2500 \u00b7\u00b7\u00b7\n    \u2514\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2518      \n          \u250c\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2510\nP1  \u2500\u2500\u2500\u2500\u2500\u2500\u2524 CS \u2502   \u2500\u2500\u2500\u2524 CS \u2502   \u2500\u2500\u2500\u2524 CS \u2502   \u2500\u2500\u2500\u2524 CS \u2502 \u00b7\u00b7\u00b7\n          \u2514\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2518\n\nP2  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u00b7\u00b7\u00b7\n</code></pre> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u7531\u4e8e <code>P0</code> \u548c <code>P1</code> \u603b\u662f\u8f6e\u6d41\u83b7\u5f97\u9501\uff0c\u5bfc\u81f4 <code>P2</code> \u59cb\u7ec8\u5904\u4e8e\u5c31\u7eea\u6001\u7b49\u5f85\u9501\uff0c\u56e0\u800c\u5bf9\u4e8e <code>P2</code> \u6765\u8bf4 waiting time \u5c31\u4e0d\u518d\u6709\u9650\u4e86\u3002</p> <p>\u7cdf\u4e86\uff0c\u770b\u8d77\u6765\u5f88\u9177\u7684\u4e00\u4e2a\u65b9\u6cd5\u8c8c\u4f3c\u4e0d\u80fd\u6ee1\u8db3 CS \u89e3\u6cd5\u7684\u6027\u8d28\uff0c\u4f46\u4ed4\u7ec6\u5206\u6790\uff0c\u8fd9\u662f\u7531\u4e8e\u9501\u7684\u5206\u914d\u673a\u5236\u662f\u4e0d\u53ef\u63a7\u7684\u2014\u2014\u5728\u4e00\u4e2a\u9501\u88ab\u91ca\u653e\u540e\uff0c\u63a5\u4e0b\u6765\u5c06\u62ff\u5230\u9501\u7684\u8fdb\u7a0b\u5e94\u5f53\u662f\u63a5\u4e0b\u6765\u7b2c\u4e00\u4e2a\u5b9e\u9645\u6267\u884c <code>test_and_set()</code> \u7684\u8fdb\u7a0b\uff0c\u7136\u800c\u7531\u4e8e \u24f5 \u6211\u4eec\u5bf9\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u8fd0\u884c\u901f\u5ea6\uff0c\u4e0d\u5e94\u5f53\u6709\u5047\u8bbe\uff0c\u24f6 \u6211\u4eec\u5bf9\u540c\u65f6\u4ea7\u751f\u7684 <code>test_and_set()</code> \u5c06\u6309\u4f55\u987a\u5e8f\u88ab\u5904\u7406\uff0c\u4e0d\u5e94\u5f53\u6709\u5047\u8bbe\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u624b\u52a8\u7528\u67d0\u79cd\u65b9\u6cd5\u6765\u5b9e\u73b0\u8fd9\u79cd\u201c\u9501\u7684\u8c03\u5ea6\u201d\uff1a</p> <pre><code>// `i` is process id in [0, n), where `n` is the count of related process. \nprocess(i) {\n    WAITING[i] = true;                                  // \u2510\n    while ( WAITING[i] &amp;&amp; test_and_set(&amp;LOCK) ) {}      // \u251c entry sec.\n                                                        // \u2502\n    WAITING[i] = false;                                 // \u2518\n\n    /* operate critical resources */                    // - critical sec.\n\n    // i.e. find next waiting process j                 // \u2510\n    j = (i + 1) % n;                                    // \u2502\n    while (i != j &amp;&amp; !WAITING[j]) {                     // \u251c exit sec.\n        j = (j + 1) % n;                                // \u2502\n    }                                                   // \u2502\n    // release j's LOCK or release whole LOCK           // \u2502\n    if (i == j)     LOCK = false;                       // \u2502\n    else            WAITING[j] = false;                 // \u2518\n\n    /* other things */                                  // - remainder sec.\n}\n</code></pre> <p>\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u4e2a <code>WAITING[]</code> \u6570\u7ec4\u6765\u8f85\u52a9 <code>LOCK</code> \u7ec6\u5316\u9501\u7684\u7c92\u5ea6\uff0c\u6b64\u65f6 <code>LOCK</code> \u8868\u793a\u7684\u201c\u662f\u5426\u5b58\u5728\u7ade\u4e89\u201d\uff0c\u800c <code>WAITING[]</code> \u5219\u6807\u8bc6\u4e86\u6240\u6709\u6b63\u5728\u7b49\u5f85\u7684\u8fdb\u7a0b\u3002\u533a\u522b\u4e8e\u4e4b\u524d\u76f4\u63a5\u91ca\u653e\u6574\u4e2a\u9501\uff0c\u8ba9\u5269\u4e0b\u7684\u8fdb\u7a0b\u53bb\u201c\u62fc\u624b\u901f\u201d\uff0c\u6211\u4eec\u8fd9\u6b21\u7531\u91ca\u653e\u9501\u7684\u8fdb\u7a0b\u6765\u9009\u62e9\u4e0b\u4e00\u4e2a\u8fdb\u5165 critical section \u7684\u662f\u8c01\u3002</p> <p>\u5728 11-14 \u884c\uff0c\u901a\u8fc7\u4e00\u4e2a\u5faa\u73af\u627e\u5230\u4e0b\u4e00\u4e2a <code>WAITING[j]</code> \u4e3a <code>true</code> \u7684 j\uff0c\u24f5 \u5982\u679c\u627e\u5230\u4e86\u8fd9\u4e2a j\uff0c\u90a3\u4e48\u5c31\u5c06 <code>WAITING[j]</code> \u8bbe\u4e3a <code>false</code>\uff0819 \u884c\uff09\uff0c\u8fd9\u6837 j \u9a6c\u4e0a\u5c31\u4f1a\u5728\u7b2c 4 \u884c break\uff0c\u8fdb\u5165 critical section\uff1b\u24f6 \u800c\u5982\u679c\u627e\u4e0d\u5230\u8fd9\u4e2a j\uff0c\u5373\u627e\u4e86\u4e00\u5708\u53c8\u627e\u56de\u4e86 i\uff0c\u90a3\u4e48\u8bf4\u660e i \u662f\u6700\u540e\u4e00\u4e2a\u4e86\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u91ca\u653e\u6574\u4e2a\u9501\uff0817 \u884c\uff09\u3002</p> <p>\u901a\u8fc7\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u4fdd\u8bc1\u4e86\u7b49\u5f85\u4e2d\u7684\u8fdb\u7a0b\u6700\u591a\u53ea\u9700\u8981\u7b49\u5f85 n-1 \u4e2a\u8fdb\u7a0b\u8fd0\u884c\u5b8c critical section\uff08\u7c7b\u4f3c\u4e8e\u5b9e\u73b0\u4e86\u201cFCFS\u201d\uff09\u3002</p>"},{"location":"OS/Unit2-Part1/#compare_and_swap","title":"<code>compare_and_swap()</code>","text":"<p>Links</p> <ul> <li>Wikipedia</li> </ul> <p><code>compare_and_swap()</code> \u4e5f\u88ab\u7b80\u5199\u4e3a CAS \u6307\u4ee4\uff0c\u5b83\u7684\u529f\u80fd\u5982\u4e0b\uff1a</p> <pre><code>&lt;atomic&gt; compare_and_swap(int * target, int expected, int new_val) {\n    int ret = *target;\n\n    // *target = (*target == expected) ? new_val : *target;\n    if (*target == expected) {\n        *target = new_val;\n    }\n\n    return ret;\n}\n</code></pre> <p>CAS \u63a5\u53d7\u4e09\u4e2a\u503c\uff1a</p> <ol> <li><code>target</code> \u5f85\u4fee\u6539\u7684\u6570\u636e\u7684\u5730\u5740\uff1b</li> <li><code>expected</code> \u9884\u671f\u4e2d\u5f85\u4fee\u6539\u7684\u6570\u636e\u7684\u65e7\u503c\uff1b</li> <li><code>new_val</code> \u5e0c\u671b\u5c06\u6570\u636e\u4fee\u6539\u4e3a\u7684\u65b0\u503c\uff1b</li> </ol> <p>\u800c\u5f53\u4e14\u4ec5\u5f53 <code>*target</code> \u7b26\u5408\u9884\u671f\uff0c\u4e0e <code>expected</code> \u76f8\u540c\u65f6\u5019\uff0c\u624d\u4f1a\u5c06\u5b83\u6539\u4e3a <code>new_val</code>\u3002\u540c\u6837\uff0cCAS \u4e5f\u5e94\u5f53\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u5373\u82e5\u5e72 CAS \u540c\u65f6\u53d1\u751f\u65f6\uff0c\u4e5f\u5e94\u5f53\u4e00\u4e2a\u4e00\u4e2a\u7684\u6267\u884c\uff0c\u800c\u4e0d\u80fd\u5b58\u5728\u65f6\u95f4\u4e0a\u7684\u4ea4\u96c6\u3002</p> <p>\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u5b9e\u9645\u4e0a <code>test_and_set(target)</code> \u5c31\u662f <code>compare_and_swap(target, false, true)</code>\uff0c\u56e0\u800c\u5b9e\u9645\u4e0a CAS \u89e3\u51b3 CS \u95ee\u9898\u7684\u65b9\u6cd5\u4ee5\u53ca\u95ee\u9898\u548c\u4e0a\u4e00\u8282\u7684\u5185\u5bb9\u6ca1\u4ec0\u4e48\u5dee\u522b\u3002</p> <p>\u4f46\u662f\u6211\u4eec\u53d1\u73b0\uff0c<code>compare_and_swap()</code> \u76f8\u6bd4\u4e8e <code>test_and_set()</code>\uff0c\u663e\u7136\u6709\u66f4\u5927\u7684\u64cd\u4f5c\u7a7a\u95f4\uff0c\u4e5f\u66f4\u6cdb\u7528\uff0c\u8003\u8651\u5230 CAS \u6307\u4ee4\u81ea\u8eab\u5df2\u7ecf\u80fd\u591f\u652f\u6301\u539f\u5b50\u6027\u7684\u4fee\u6539\u503c\uff0c\u6211\u4eec\u8003\u8651\u80fd\u5426\u8df3\u51fa CS \u95ee\u9898\u7684\u8303\u5f0f\u6765\u8003\u8651\u95ee\u9898\u3002</p>"},{"location":"OS/Unit2-Part1/#atomic-variables","title":"Atomic Variables","text":"<p>\u539f\u5b50\u53d8\u91cf(atomic variables)\u662f\u4e00\u79cd\u7528\u539f\u5b50\u6027\u64cd\u4f5c\u7ef4\u62a4\u7684\u53d8\u91cf\u3002\u6211\u4eec\u6240\u6709\u5bf9\u539f\u5b50\u53d8\u91cf\u7684\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7 CAS \u6765\u5b9e\u73b0\uff0c\u4f8b\u5982\u81ea\u589e\u64cd\u4f5c\uff1a</p> <pre><code>increment(atomic_int * v) {\n    int tmp;\n    do {\n        tmp = *v;\n    } while ( tmp != compare_and_swap(v, tmp, tmp+1) );\n}\n</code></pre> <p>\u4f7f\u7528 atomic variables \u540e\u5b9e\u9645\u4e0a\u5c31\u4e0d\u592a\u7b26\u5408 CS \u95ee\u9898\u7684\u6a21\u578b\u4e86\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u91cc\u5e76\u4e0d\u518d\u9700\u8981\u7ef4\u62a4\u7c7b\u4f3c <code>LOCK</code> \u7684\u4e1c\u897f\uff0c\u800c\u662f\u4ee5 <code>*target</code> \u662f\u5426\u7b26\u5408 <code>expected</code> \u7684\u9884\u8bbe\u6765\u5224\u65ad\u662f\u5426\u6709\u7ade\u4e89\u51fa\u73b0\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u540c\u6b65\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u79cd\u5c01\u88c5\u540e\u7684\u539f\u5b50\u6027\u64cd\u4f5c\u6765\u89e3\u51b3 race condition\uff0c\u800c\u4e0d\u9700\u8981\u518d\u533a\u5206 entry section \u6216\u662f critical section \u7b49\u3002</p> <p>\u4e66\u672c\u4e0a\u7279\u5730\u63d0\u5230\uff0c\u5728\u4f8b\u5982 producer&amp;consumer \u7684\u6a21\u578b\u4e2d\uff0c\u4f7f\u7528 atomic variables \u7ef4\u62a4 count \u5e76\u4e0d\u80fd\u89e3\u51b3 race condition\uff0c\u4f46\u6211\u8ba4\u4e3a\u8fd9\u79cd\u8ba8\u8bba\u662f\u6709\u5931\u504f\u9887\u7684\uff0c\u6240\u8c13\u7684\u201c\u539f\u5b50\u6027\u201d\u5e94\u8be5\u5305\u62ec\u6240\u6709\u64cd\u4f5c\u4e34\u754c\u8d44\u6e90\u7684\u90e8\u5206\uff0c\u4e66\u4e2d\u53ea\u7ef4\u62a4 count \u4e0d\u7ef4\u62a4 buffer \u7684\u5047\u8bbe\u6211\u89c9\u5f97\u5bf9\u4e8e atomic \u8fd9\u4e2a\u6982\u5ff5\u6765\u8bf4\u5b9e\u5728\u4e0d\u591f\u516c\u5e73\uff0c\u6240\u4ee5\u6211\u5728\u8fd9\u91cc\u5c31\u4e0d\u7740\u91cd\u8bf4\u660e\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"OS/Unit2-Part1/#mutex-locks","title":"Mutex Locks","text":"<p>\u7531\u6b64\u6211\u4eec\u5df2\u7ecf\u5f97\u5230\u4e86\u80fd\u5728\u786c\u4ef6\u5c42\u9762\u89e3\u51b3 race condition \u95ee\u9898\u7684\u6839\u6e90\u7684\u5de5\u5177\u4e86\uff0c\u4f46\u662f\u4e3a\u4e86\u80fd\u8ba9\u7528\u6237\u7a0b\u5e8f\u4e5f\u80fd\u66f4\u597d\u7684\u4f7f\u7528\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5b83\u505a\u4e00\u6b21\u8f6f\u4ef6\u5c42\u9762\u7684\u5c01\u88c5\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e92\u65a5\u9501(mutex locks)\u8fd9\u4e2a\u4e1c\u897f\u3002</p> <p>\u5229\u7528\u4e92\u65a5\u9501\u907f\u514d race condition \u7684\u57fa\u672c\u601d\u8def\u4ecd\u7136\u662f\u57fa\u4e8e CS \u95ee\u9898\u7684\u5efa\u6a21\uff0c\u4f46\u5b83\u66f4\u5177\u4f53\u5730\u8ba4\u4e3a\u5728 entry section \u5c31\u8be5\u53bb\u7d22\u53d6\u4e92\u65a5\u9501\uff0c\u800c\u5728 exit section \u5c31\u5e94\u8be5\u53bb\u91ca\u653e\u4e92\u65a5\u9501\uff0c\u5373\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Acquire Lock       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Critical Section   \u2502 &lt;-- codes manipulating critical resources\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Release Lock       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Remainder Section  \u2502 &lt;-- other codes\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u56de\u987e\u6211\u4eec\u5728\u4ecb\u7ecd <code>test_and_set()</code> \u90e8\u5206\u7ed9\u51fa\u7684\u8fd9\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>process(i) {\n    while ( test_and_set(&amp;LOCK) ) {}    // - entry section\n\n    /* operate critical resources */    // - critical section\n\n    LOCK = false;                       // - exit section\n\n    /* other things */                  // - remainder section\n}\n</code></pre> <p>\u6211\u4eec\u53ea\u9700\u8981\u5c06\u9ad8\u4eae\u7684\u8fd9\u4e24\u884c\u5c01\u88c5\u8d77\u6765\uff0c\u5c31\u5b9e\u73b0\u4e86 acquire LOCK \u548c release LOCK\u3002</p> <pre><code>// `available` means whether the `LOCK` is free, or whether the related \n// resources is available\nacquire() {\n    while ( !compare_and_swap(&amp;available, true, false) ) {}\n}\n\nrelease() {\n    available = true;\n}\n</code></pre> <p>\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\uff0c\u6211\u4eec\u5728 <code>test_and_set()</code> \u8ba8\u8bba\u4e0a\u9762\u90a3\u6bb5\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u8ba8\u8bba\u8fc7\u5b83\u65e0\u6cd5\u6ee1\u8db3 bounded waiting time \u7684\u95ee\u9898\uff0c\u90a3\u65e2\u7136\u5982\u6b64\u6211\u4eec\u4e3a\u4ec0\u4e48\u4e0d\u628a <code>WAITING[]</code> \u4e5f\u4e00\u8d77\u5c01\u8fdb\u53bb\u5462\uff1f</p> <p>\u8fd9\u662f\u56e0\u4e3a\u4e66\u4e0a\u76f4\u63a5\u5ffd\u7565\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u76f4\u5230\u5728\u4e4b\u540e\u8bb2 semaphores \u7684\u65f6\u5019\u624d\u60f3\u8d77\u6765\uff0c\u4f46 semaphores \u548c mutex lock \u53c8\u662f\u4e24\u4e2a\u8def\u5b50\uff0c\u6211\u4e5f\u4e0d\u77e5\u9053\u5b83\u5230\u5e95\u60f3\u8bf4\u660e\u4ec0\u4e48\u95ee\u9898\u3002\u4f46\u662f\u65e2\u7136\u5b83\u73b0\u5728\u5ffd\u7565\u4e86\uff0c\u6211\u4eec\u5c31\u5148\u4e0d\u7ba1\u5b83\uff0c\u4f46\u662f\u6211\u5e0c\u671b\u8bfb\u8005\u80fd\u610f\u8bc6\u5230\u8fd9\u4e2a\u95ee\u9898\u662f\u5b58\u5728\u7684\u3002</p> <p>\u7ecf\u8fc7\u8fd9\u4e48\u957f\u7684\u94fa\u57ab\uff0c\u6211\u4eec\u73b0\u5728\u80fd\u591f\u4fdd\u8bc1\u7684\u4e00\u4ef6\u4e8b\u662f\uff0c\u6211\u4eec\u7ec8\u4e8e\u5f97\u5230\u4e86\u4e00\u4e2a\u8f6f\u4ef6\u5c42\u9762\u7684\u3001\u80fd\u591f\u907f\u514d race condition \u7684\u540c\u6b65\u5de5\u5177\u3002\u90a3\u4e48\u5b9e\u73b0\u57fa\u672c\u9700\u6c42\u4ee5\u540e\u6211\u4eec\u5c31\u5f00\u59cb\u8003\u8651\u80fd\u4e0d\u80fd\u4f18\u5316\u5b83\u3002</p>"},{"location":"OS/Unit2-Part1/#_4","title":"\u5fd9\u7b49\u5f85","text":"<p>\u5982\u679c\u8bfb\u8005\u5bf9\u4ee3\u7801\u6709\u6bd4\u8f83\u654f\u611f\u7684\u55c5\u89c9\uff0c\u90a3\u53ef\u80fd\u770b\u8fd9\u51e0\u5343\u4e2a\u5b57\u5230\u73b0\u5728\uff0c\u4f60\u5df2\u7ecf\u4e3a\u6570\u4e0d\u6e05\u7684 <code>while()</code> \u63d0\u5fc3\u540a\u80c6\u8fc7\u5341\u591a\u6b21\u4e86\u3002\u6ca1\u9519\uff0c\u867d\u7136\u6211\u4eec\u901a\u8fc7\u903b\u8f91\u4fdd\u8bc1\u8fd9\u91cc\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u5faa\u73af\uff0c\u4f46\u5bf9\u4e8e\u7b49\u5f85\u4e2d\u7684 process\uff0c\u786e\u5b9e\u8981\u5728\u6570\u4e0d\u5c3d\u7684 <code>while</code> loop \u4e2d\u6d6a\u8d39 CPU\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u7b49\u5f85\u9501\u91ca\u653e\u7684\u884c\u4e3a\u4e3a\u5fd9\u7b49\u5f85(busy waiting)\uff0c\u5176\u4e2d\u201c\u5fd9\u201d\u6307\u7684\u5c31\u662f\u5728\u7b49\u5f85\u8fc7\u7a0b\u4e2d\u4ecd\u7136\u5360\u7528 CPU \u8d44\u6e90\u3002\u800c\u8fd9\u79cd\u4f7f\u7528\u5fd9\u7b49\u5f85\u7684\u4e92\u65a5\u9501\uff0c\u4e5f\u88ab\u79f0\u4e3a\u81ea\u65cb\u9501(spinlock)\u3002</p> <p>\u6211\u4eec\u5f15\u5165\u4e24\u4e2a\u8bcd\u6765\u66f4\u51c6\u786e\u7684\u63cf\u8ff0\u8fd9\u4ef6\u4e8b\uff1a</p> <p>Lock Contention</p> <p>\u5982\u679c\u4e00\u4e2a\u7528\u6237\u8bd5\u56fe\u7d22\u53d6\u67d0\u4e2a\u9501\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u9501\u4e0d\u662f available \u7684\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u6709\u7528\u6237\u6b63\u5728\u4f7f\u7528\u8fd9\u4e2a\u9501\uff0c\u800c\u5f53\u524d\u7528\u6237\u9700\u8981\u7b49\u5f85\u8fd9\u4e2a\u9501\u91cd\u65b0\u53ef\u7528\uff0c\u6b64\u65f6\u6211\u4eec\u79f0\u8fd9\u4e2a\u9501\u662f\u88ab\u4e89\u62a2\u7684(contended)\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u4e89\u62a2\uff0c\u6211\u4eec\u5c31\u79f0\u4e4b\u4e3a\u4e0d\u88ab\u4e89\u62a2\u7684(uncontended)\u3002</p> <p>\u5982\u679c\u73b0\u5728\u6709\u597d\u591a\u7528\u6237\u90fd\u5728\u4e89\u62a2\u4e00\u4e2a\u9501\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a high contention\uff1b\u53cd\u4e4b\u5982\u679c\u53ea\u6709\u96f6\u661f\u51e0\u4e2a\u7528\u6237\u5728\u4e89\u62a2\u8fd9\u4e2a\u9501\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a low contention\u3002</p> <p>\u5982\u679c\u5ef6\u7528 spinlock\uff0c\u90a3\u4e48\u4e0d\u96be\u5f97\u5230\u7ed3\u8bba\uff1ahigh contention \u4f1a\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\uff0c\u56e0\u4e3a\u603b\u662f\u4f1a\u6709\u5927\u91cf\u5f97\u4e0d\u5230\u9501\u7684\u7528\u6237\u5904\u4e8e busy waiting \u4e2d\u3002</p> <p>\u65e2\u7136\u5b83\u4eec\u90fd\u662f\u5728\u505a\u65e0\u610f\u4e49\u7684\u7b49\u5f85\uff0c\u90a3\u6211\u4eec\u4e3a\u4ec0\u4e48\u4e0d\u5728\u8fd9\u4e2a\u65f6\u5019\u628a\u8d44\u6e90\u8ba9\u7ed9\u6709\u9700\u8981\u7684\u4eba\u5462\uff1f</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6682\u65f6\u5730\u5207\u6362\u8fdb\u7a0b\uff0c\u8ba9\u8fd9\u4e9b\u5904\u4e8e\u7b49\u5f85\u7684\u7528\u6237\u6682\u65f6\u4f11\u7720\uff0c\u7b49\u65f6\u673a\u5230\u6765\u518d\u5524\u9192\u5b83\u4eec\uff0c\u6b64\u65f6\u5c31\u9700\u8981\u7cfb\u7edf\u8c03\u7528\u7684\u4ecb\u5165[^3]\u3002\u800c\u5177\u4f53\u7684\u65b9\u6cd5\u6211\u4eec\u5728\u4e0b\u4e00\u8282\u7684\u907f\u514d\u5fd9\u7b49\u5f85\u4e2d\u4ecb\u7ecd\u3002</p> <p>\u4f46\u662f\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u9700\u8981\u4fdd\u6301\u5ba2\u89c2\uff1aspinlock \u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u662f\u6709\u597d\u5904\u7684\uff0c\u5728\u7b49\u5f85\u65f6\u95f4\u5e76\u4e0d\u957f\u7684\u60c5\u51b5\u4e0b\uff0c\u76f8\u6bd4\u4e8e\u62e5\u6709\u9501\u7684\u7528\u6237\u91ca\u653e\u9501\uff0c\u8fdb\u884c\u8c03\u5ea6\u9501\u9700\u8981\u7684 context switch \u7684\u5f00\u9500\u53ef\u80fd\u663e\u5f97\u8f83\u5927\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u8fd8\u6ca1\u6765\u5f97\u53ca\u628a\u8d44\u6e90\u8ba9\u7ed9\u522b\u4eba\u9501\u5c31\u597d\u4e86\uff0c\u90a3\u4e48\u8fd9\u79cd\u8d44\u6e90\u8f6c\u8ba9\u8fd8\u4e0d\u5982\u4e0d\u8f6c\u3002\u800c\u4e8b\u5b9e\u4e0a\uff0c\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\uff0c\u81ea\u65cb\u9501\u4e5f\u786e\u5b9e\u662f\u4e00\u4e9b\u591a\u6838\u7cfb\u7edf\u7684\u9996\u9009\u3002</p> <p>\u4e0d\u8fc7\u5728\u8bb8\u591a\u8bed\u5883\u91cc mutex \u548c spinlock \u662f\u88ab\u533a\u5206\u5f00\u6765\u7684\u4e24\u4e2a\u6982\u5ff5\uff0c\u5177\u4f53\u4f7f\u7528\u54ea\u4e2a\u5219\u9700\u8981\u9002\u65f6\u5224\u65ad[^4]\u3002</p>"},{"location":"OS/Unit2-Part1/#semaphores","title":"Semaphores","text":"<p>Links</p> <ul> <li>Wikipedia</li> </ul> <p>Mutex lock \u4e3a\u7528\u6237\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u7c7b\u4f3c\u4e8e\u201c\u623f\u95f4\u7533\u8bf7\u201d\u7684\u529f\u80fd\uff0c\u9501\u7ade\u4e89\u5c31\u597d\u50cf\u5927\u5bb6\u62a2\u623f\u95f4\u7684\u4f7f\u7528\u6743\u3002\u800c\u4fe1\u53f7\u91cf(semaphores)\u5219\u662f\u7c7b\u4f3c\u4e8e\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u8fc7\u7684 atomic variables\uff0c\u901a\u8fc7\u63d0\u4f9b\u6807\u51c6\u5316\u7684\u539f\u5b50\u6027\u64cd\u4f5c\uff0c\u6765\u7ef4\u62a4\u4e00\u4e9b\u53d8\u91cf\uff0c\u53ea\u4e0d\u8fc7\u5b83\u989d\u5916\u5bf9\u53d8\u91cf\u7684\u503c\u6709\u4e00\u5b9a\u7684\u7ea6\u675f\u3002</p> <p>~~\uff08\u8bf4\u5b9e\u8bdd\u6211\u611f\u89c9\u8fd9\u4fe9\u4e1c\u897f\u672c\u8d28\u4e0a\u771f\u6ca1\u5565\u533a\u522b\u2026\u2026\uff09~~</p> <p>Semaphores \u53ea\u63d0\u4f9b\u4e24\u4e2a\u6807\u51c6\u5316\u7684\u63a5\u53e3\uff1a<code>wait()</code>\uff08\u6216<code>P()</code>\uff09 \u548c <code>signal()</code>\uff08\u6216<code>V()</code>\uff09\uff0c\u5b83\u4eec\u7684\u529f\u80fd\u5982\u4e0b\uff1a</p> <pre><code>&lt;atomic&gt; wait(reference S) {\n    while (S &lt;= 0) {} // busy wait here\n    S--;\n}\n\n&lt;atomic&gt; signal(reference S) {\n    S++;\n}\n</code></pre> <p>\u663e\u7136\uff0c\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u7684\u5b9e\u73b0\u4e5f\u5e94\u5f53\u4fdd\u8bc1\u662f atomic \u7684\u3002</p> <p>\u533a\u522b\u4e8e\u666e\u901a\u7684 atomic variables\uff0csemaphores \u591a\u4e86\u5728\u7b2c 2 \u884c\u7684 busy wait\uff0c\u8fd9\u6697\u542b\u4e86\u4e00\u79cd\u201c\u6709\u9650\u201d\u7684\u6982\u5ff5\uff0c\u5373\u4fdd\u8bc1 \\(0 \\leq S\\)\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0csemaphores \u5206\u4e3a counting semaphore \u548c binary semaphore\uff0c\u524d\u8005\u7684\u529f\u80fd\u5982\u4e0a\uff0c\u540e\u8005\u53ea\u4e0d\u8fc7\u662f\u989d\u5916\u8981\u6c42 \\(0 \\leq S \\leq 1\\)\uff0c\u4fee\u6539 loop \u7684\u6761\u4ef6\u5373\u53ef\u3002</p>"},{"location":"OS/Unit2-Part1/#_5","title":"\u4f7f\u7528","text":"<p>\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5982\u4e0b\u65b9\u5f0f\uff0c\u4fdd\u8bc1 <code>P0()</code> \u4e2d\u7684 section A \u5fc5\u987b\u5728 <code>P1()</code> \u7684 section B \u4e4b\u524d\u5b8c\u6210\uff1a</p> <pre><code>semaphore S = 0;\n\nP0() {\n    /* Section A */\n    signal(S);\n}\n\nP1() {\n    wait(S);\n    /* Section B */\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u975e\u5e38\u5f62\u8c61\u5730\u5c55\u793a\u4e86\u4fe1\u53f7\u91cf\u662f\u5982\u4f55\u53d1\u6325\u4f5c\u7528\u7684\uff0c\u5f53\u7136\uff0c\u4e0a\u9762\u53ea\u5c55\u793a\u4e86\u7c7b\u4f3c\u8fdb\u7a0b\u95f4\u901a\u8baf\u7684\u529f\u80fd\uff0c\u4e0b\u9762\u8fd9\u4e2a\u5f62\u5f0f\u5219\u66f4\u63a5\u8fd1\u6211\u4eec\u4e0a\u6587\u4e2d\u8ba8\u8bba\u7684\u60c5\u51b5\uff0c\u5373\u5b9e\u73b0\u4e86\u4e92\u65a5\uff1a</p> <pre><code>// `i` is process id and S is the semaphores\nprocess(i) {\n    wait(S);    // i.e. release the 'LOCK'\n\n    /* critical section */\n\n    signal(S);  // only one process can pass this line at once\n}\n</code></pre>"},{"location":"OS/Unit2-Part1/#_6","title":"\u907f\u514d\u5fd9\u7b49\u5f85","text":"<p>\u6211\u4eec\u5728 mutex \u4e2d\u63d0\u51fa\u5fd9\u7b49\u5f85\u7684\u65f6\u5019\u5c31\u5df2\u7ecf\u63d0\u5230\u8fc7\uff0c\u53ef\u4ee5\u901a\u8fc7\u300c\u5728\u7b49\u5f85\u7684\u65f6\u5019\u8ba9\u8fdb\u7a0b\u4f11\u7720\uff0c\u7b49\u65f6\u673a\u5408\u9002\u7684\u65f6\u5019\u518d\u5524\u9192\u300d\u7684\u65b9\u5f0f\uff0c\u6765\u51cf\u5c0f\u8f83\u957f\u7684\u5fd9\u7b49\u5f85\u5f15\u8d77\u7684\u6027\u80fd\u964d\u4f4e\u3002\u800c\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9700\u8981\u6269\u5c55 semaphores \u7684\u5185\u5bb9\uff0c\u5f15\u5165\u4e00\u4e2a\u94fe\u8868\u6765\u7ef4\u62a4\u7b49\u5f85\u4e2d\u7684\u8fdb\u7a0b\u3002</p> <pre><code>struct semaphore {\n    value;\n    waiting_list;\n};\n\n&lt;atomic&gt; wait(reference S) {\n    S-&gt;value--;\n    if (S-&gt;value &lt; 0) {\n        S-&gt;waiting_list.push(current process);\n        sleep();\n    }\n}\n\n&lt;atomic&gt; signal(reference S) {\n    S-&gt;value++;\n    if (S-&gt;value &lt;= 0) {\n        p = S-&gt;waiting_list.pop();\n        wakeup(p);\n    }\n}\n</code></pre> <p>\u76f8\u6bd4\u4e8e\u4e4b\u524d\u7684\u903b\u8f91\uff0c\u73b0\u5728\u7684\u903b\u8f91\u7a0d\u5fae\u6709\u70b9\u53d8\u5316\uff0c\u8bf7\u8bfb\u8005\u5c1d\u8bd5\u72ec\u7acb\u5206\u6790\u5176\u4e2d\u7684\u5965\u79d8\u3002\u8fd9\u91cc\u662f\u4e00\u4e9b\u63d0\u793a\uff1a</p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u8bf7\u8bfb\u8005\u601d\u8003\uff1a</p> <ol> <li>\u73b0\u5728\u5df2\u7ecf\u6ca1\u6709 <code>while</code> \u4e86\uff0c\u53ea\u4f59\u4e0b <code>if</code>\uff0c\u73b0\u5728\u662f\u5982\u4f55\u4fdd\u8bc1\u7b49\u5f85\u4e2d\u7684\u8fdb\u7a0b\u80fd\u591f\u88ab\u53ca\u65f6\u5524\u9192\uff1f</li> <li><code>wait</code> \u539f\u5148\u662f\u5148\u7b49\u5f85\u518d\u4fee\u6539\uff0c\u73b0\u5728\u662f\u5148\u4fee\u6539\u3001\u518d\u7b49\u5f85\uff0c\u8fd9\u5bf9\u6574\u4f53\u903b\u8f91\u6709\u4f55\u5f71\u54cd\uff1f</li> <li><code>signal</code> \u4e2d\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u4e3a\u4f55\u662f <code>S-&gt;value &lt;= 0</code>\uff1f\u8fd9\u4e2a\u6761\u4ef6\u4e3a false \u65f6\u610f\u5473\u7740\u4ec0\u4e48\uff1f<ul> <li>\u8003\u8651\u5728 high contention \u7684\u60c5\u51b5\u4e0b\uff0c\u8d44\u6e90\u603b\u662f\u4e00\u51fa\u73b0\u5c31\u88ab\u62a2\u7a7a\u3002</li> </ul> </li> </ol> <p>\u800c\u5b9e\u9645\u4e0a\uff0c\u73b0\u5728\u6211\u4eec\u63d0\u5230\u4fe1\u53f7\u91cf\uff0c\u9ed8\u8ba4\u6307\u7684\u5c31\u662f\u907f\u514d\u5fd9\u7b49\u5f85\u8fd9\u4e00\u8282\u4e2d\u63d0\u5230\u7684\u8fd9\u79cd\u3002</p> <p>[^1]: The Critical Section Problem</p> <p>[^2]: \u4e66\u672c\u4e2d\u5bf9 preemptive kernels \u548c non-preemptive kernels \u7684\u5b9a\u4e49\u5e76\u4e0d\u51c6\u786e\uff0c\u4e24\u8005\u6700\u672c\u8d28\u7684\u533a\u522b\u662f\u540e\u8005\u5b9e\u73b0\u4e86 Giant Lock\u3002\u540c\u65f6\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\u94fe\u63a5\uff1aWhat was the reason of the non-preemptivity of older Linux kernels? | Stack Exchange</p> <p>[^3]: Mutex access and system call | Stack Overflow</p> <p>[^4]: \u2b50\ufe0f When should one use a spinlock instead of mutex? | Stack Overflow</p>"},{"location":"OS/Unit2-Part2/","title":"U2 Part 2: \u540c\u6b65\u95ee\u9898\u4f8b\u5b50 | Synchronization Problems Examples","text":""},{"location":"OS/Unit2-Part2/#the-bounded-buffer-problem","title":"The Bounded-Buffer Problem","text":""},{"location":"OS/Unit2-Part2/#_1","title":"\u95ee\u9898\u80cc\u666f","text":"<ul> <li>\ud83d\udd17 Wiki</li> </ul> <p>The Bounded-Buffer Problem \u53c8\u79f0 The Producer\u2013Consumer Problem\uff0c\u5728\u8be5\u95ee\u9898\u4e2d\uff0c\u6709\u4e24\u4e2a\u89d2\u8272\uff0cproducer \u548c consumer\uff1aproducer \u4f1a\u4ea7\u751f item \u5b58\u653e\u5230 buffer \u4e2d\uff0c\u800c consumer \u53ef\u4ee5\u5c06\u6570\u636e\u4ece buffer \u4e2d\u53d6\u51fa item\u3002\u5982\u679c\u6211\u4eec\u7528 \\(n = \\# items\\) \u6765\u63cf\u8ff0 buffer \u7684\u72b6\u6001\uff0c\u90a3\u4e48\u95ee\u9898\u5c06\u62bd\u8c61\u4e3a\uff1a</p> <pre><code>void produce() {\n    /* something */\n    ++n;\n    /* something */\n}\n\nvoid consume() {\n    /* something */\n    --n;\n    /* something */\n}\n</code></pre> <p>\u540c\u65f6\uff0c\u6211\u4eec\u9700\u8981\u4fdd\u8bc1 \\(0 \\leq n \\leq n_{max}\\)\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5728 \\(n = 0\\) \u65f6\uff0c\u8ba9 consumer \u7b49\u5f85 \\(n &gt; 0\\) \u518d <code>consume()</code>\uff1b\u5bf9\u5e94\u7684\uff0c\u5728 \\(n = n_{max}\\) \u65f6\u5019\uff0c\u8ba9 producer \u7b49\u5f85 \\(n &lt; n_{max}\\) \u518d <code>produce()</code>\u3002\u4f46\u8fd9\u5e76\u4e0d\u662f\u6211\u4eec\u5728\u672c\u5355\u5143\u63d0\u53ca\u5b83\u7684\u91cd\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u8fd9\u91cc\u8ba4\u4e3a\u5b83\u4eec\u5728 <code>/* something */</code> \u4e2d\u3002</p> <p>\u5b9e\u9645\u7684 The Bounded-Buffer Problem \u4e2d\u8fd8\u6709\u4e00\u4e9b\u5176\u5b83\u7ec6\u8282\uff0c\u4f46\u662f\u8fd9\u91cc\u6211\u4eec\u5c06\u6574\u4e2a\u95ee\u9898\u62bd\u8c61\u4e3a\u6211\u4eec\u9700\u8981\u7684\u6a21\u6837\uff0c\u8bf7\u4e0d\u8981\u8ba4\u4e3a\u4e0a\u9762\u7684\u4ee3\u7801\u5c31\u662f The Bounded-Buffer Problem \u7684\u5168\u90e8\u3002</p>"},{"location":"OS/Unit2-Part2/#_2","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u8003\u8651\u5728\u5e76\u884c\u8bed\u5883\u4e0b\uff0c<code>produce()</code> \u548c <code>consume()</code> \u540c\u65f6\u53d1\u751f\uff0c\u7531\u4e8e <code>++n</code> \u548c <code>--n</code> \u8fd9\u4e9b\u64cd\u4f5c\u672c\u8d28\u4e0a\u662f\u6570\u503c\u7684\u3001\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u6765\u5b8c\u6210\u7684\uff0c\u6240\u4ee5\u5bb9\u6613\u51fa\u73b0 race condition\u95ee\u9898\u3002</p>"},{"location":"OS/Unit2-Part2/#-semaphores","title":"\u89e3\u51b3 - semaphores","text":"<p>\u6211\u4eec\u4f7f\u7528\u4fe1\u53f7\u91cf\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u5b9a\u4e49\u4e09\u4e2a\u4fe1\u53f7\u91cf\uff1a</p> <pre><code>// suppose the capacity of the buffer is n\nsemaphore mutex = 1;\nsemaphore empty = n;\nsemaphore full  = 0;\n</code></pre> <p>\u903b\u8f91\u4e0a\u6211\u4eec\u8981\u6c42 <code>empty + full == n</code> \u59cb\u7ec8\u6210\u7acb\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e00\u5b9a\u8bef\u5dee\uff08\u8003\u8651\u67d0\u4e2a\u539f\u8bed\u8fd8\u6ca1\u5f7b\u5e95\u6267\u884c\u5b8c\uff09\u3002\u800c\u6211\u4eec\u8fd9\u91cc\u4e4b\u6240\u4ee5\u8981\u4f7f\u7528\u4e24\u4e2a\u4fe1\u53f7\u91cf\u6765\u7ef4\u62a4\u4e00\u4e2a buffer \u7684\u5360\u7528\u72b6\u6001\uff0c\u662f\u56e0\u4e3a\u4fe1\u53f7\u91cf\u7684\u201c\u6709\u754c\u201d\u662f\u901a\u8fc7 0 \u7ef4\u62a4\u7684\uff0c\u4e5f\u5c31\u662f\u53ea\u6709\u5728\u201c\u51cf\u5c11\u201d\u7684\u65f6\u5019\u624d\u80fd\u7ef4\u62a4\uff1b\u800c\u6211\u4eec\u7684\u8981\u6c42\u662f\uff0cbuffer \u7684\u4e0a\u4e0b\u754c\u90fd\u6709\u754c\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u4fe1\u53f7\u91cf\u5206\u522b\u6765\u7ef4\u62a4\u4e24\u4e2a\u8fb9\u754c\u3002</p>"},{"location":"OS/Unit2-Part2/#the-readerswriters-problem","title":"The Readers\u2013Writers Problem","text":""},{"location":"OS/Unit2-Part2/#_3","title":"\u95ee\u9898\u80cc\u666f &amp; \u95ee\u9898\u63cf\u8ff0","text":"<ul> <li>\ud83d\udd17 Wiki</li> </ul> <p>\u8be5\u95ee\u9898\u62bd\u8c61\u81ea\u6570\u636e\u5e93\u7684\u4f7f\u7528\u3002\u7528\u6237\u4f7f\u7528\u6570\u636e\u5e93\u4fee\u6539\u6570\u636e\uff08<code>UPDATE</code>\uff09\uff0c\u672c\u8d28\u4e0a\u4e5f\u662f\u6709\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>[READ] \u4ece\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u3001\u8bfb\u53d6\u6570\u636e\uff1b</li> <li>\u6570\u636e\u7ecf\u8fc7\u4e1a\u52a1\u903b\u8f91\u7684\u5904\u7406\uff0c\u5f97\u5230\u65b0\u503c\uff1b</li> <li>[WRITE] \u5c06\u65b0\u503c\u5199\u56de\u6570\u636e\u5e93\uff1b</li> </ol> <p>\u8fd9\u4e2a\u6b65\u9aa4\u4e0e\u6211\u4eec\u4fee\u6539 <code>mem[x]</code> \u7684\u8fc7\u7a0b\u9ad8\u5ea6\u76f8\u4f3c\uff0c\u56e0\u6b64\u9047\u5230\u7684\u95ee\u9898\u4e5f\u662f\u7c7b\u4f3c\u7684\u3002</p> <p>\u51b2\u7a81\u4e3b\u8981\u4f53\u73b0\u5728\u4e24\u79cd\u60c5\u51b5\uff1a</p> <ul> <li>reader \u548c writer \u7684\u51b2\u7a81\uff1b</li> <li>writer \u548c writer \u7684\u51b2\u7a81\uff1b</li> </ul> <p>\u663e\u7136\uff0creader \u548c reader \u4e0d\u4f1a\u6709\u51b2\u7a81\u3002</p>"},{"location":"OS/Unit2-Part2/#-semaphores_1","title":"\u89e3\u51b3 - semaphores","text":"<p>\u6709\u4e24\u79cd\u79cd\u6734\u7d20\u7684\u89e3\u51b3\u529e\u6cd5\uff1a\u24f5 writer \u603b\u662f\u7b49\u5f85 reader\uff0c\u24f6 reader \u603b\u662f\u7b49\u5f85 writer\u3002\u4f46\u662f\u8fd9\u4e24\u79cd\u89e3\u51b3\u529e\u6cd5\u90fd\u4e0d\u662f\u5f88\u597d\uff0c\u56e0\u4e3a \u24f5 \u4f1a\u5bfc\u81f4 writer \u9965\u997f\uff0c\u24f6 \u4f1a\u5bfc\u81f4 reader \u9965\u997f\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ed9\u51fa\u6b63\u5f0f\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u5f15\u5165\u4e24\u4e2a\u4fe1\u53f7\u91cf\u548c\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\uff1a</p> <pre><code>semaphores rw_mutex   = 1;\nsemaphores mutex      = 1;\nint        read_count = 0;\n</code></pre> <p>\u8003\u8651\u5230 reader \u548c reader \u4e0d\u4f1a\u51b2\u7a81\uff0c\u6240\u4ee5 readers \u4e4b\u95f4\u4e0d\u5e94\u8be5\u4e92\u65a5\u3002\u800c\u6211\u4eec\u9700\u8981\u4fdd\u8bc1\u7684\u662f\uff1a\u5355\u4e2a writer \u548c\u82e5\u5e72 readers \u4e4b\u95f4\u4e92\u65a5\uff0c\u5355\u4e2a writer \u548c\u5355\u4e2a writer \u4e4b\u95f4\u4e92\u65a5\u3002\u800c <code>rw_mutex</code> \u5c31\u662f\u7528\u4e8e\u63a7\u5236\u8fd9\u79cd\u4e92\u65a5\u3002</p> writer's code<pre><code>writer() {\n    wait(rw_mutex);\n\n    /* critical section */\n\n    signal(rw_mutex);\n}\n</code></pre> <p>\u4f46\u6b64\u65f6\u5982\u4f55\u4fdd\u8bc1 readers \u4e4b\u95f4\u4e0d\u4f1a\u4e92\u65a5\u5462\uff1f\u9996\u5148\uff0c\u5f53\u7b2c\u4e00\u4e2a reader \u8bd5\u56fe\u8fdb\u5165\u4e34\u754c\u6bb5\u65f6\uff0c\u5b83\u5e94\u5f53\u83b7\u53d6\u4e00\u4e2a <code>rw_mutex</code>\uff0c\u4ee5\u963b\u6b62\u5176\u5b83 writer \u8fdb\u5165\u4e34\u754c\u6bb5\u3002\u800c\u5bf9\u4e8e\u4e4b\u540e\u7684 reader \u6765\u8bf4\uff0c\u5982\u679c\u76ee\u524d\u83b7\u53d6\u9501\u7684\u662f\u4e00\u4e2a reader\uff0c\u90a3\u4e48\u5b83\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u4e34\u754c\u6bb5\uff1b\u5982\u679c\u76ee\u524d\u83b7\u53d6\u9501\u7684\u4e0d\u662f\u67d0\u4e2a reader\uff0c\u90a3\u4e48\u5b9e\u9645\u4e0a\u5b83\u624d\u662f\u7b2c\u4e00\u4e2a reader\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5bf9\u4e8e\u83b7\u53d6 <code>rw_mutex</code> \u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad\u5f53\u524d\u6709\u6ca1\u6709 reader \u6b63\u5728\u4eab\u7528\u4e34\u754c\u8d44\u6e90\u5373\u53ef\uff1b\u800c\u5bf9\u4e8e\u91ca\u653e <code>rw_mutex</code> \u6765\u8bf4\uff0c\u6211\u4eec\u9700\u8981\u5224\u65ad\u5f53\u524d\u662f\u4e0d\u662f\u6700\u540e\u4e00\u4e2a reader\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u8ba1\u6570\u5668 <code>read_count</code>\uff0c\u800c\u7531\u4e8e\u8fd9\u4e2a\u8ba1\u6570\u5668\u662f\u4e2a\u666e\u901a\u7684\u5171\u4eab\u53d8\u91cf\uff0c\u800c\u4e14\u8fd9\u4e2a\u8ba1\u6570\u5668\u672c\u8eab\u4e5f\u662f\u4e2a\u4e34\u754c\u8d44\u6e90\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a <code>mutex</code> \u6765\u7ef4\u62a4\u5b83\u3002</p> <p>\u6240\u4ee5\uff0c\u5b9e\u9645\u4e0a reader \u7684\u4ee3\u7801\u4e2d\u542b\u6709 3 \u4e2a\u4e34\u754c\u6bb5\uff0c\u5206\u522b\u662f\uff1a\u8ba1\u6570\u5668\u589e\u3001\u8bfb\u53d6\u4e34\u754c\u8d44\u6e90\u3001\u8ba1\u6570\u5668\u51cf\u3002</p> reader's code<pre><code>reader() {\n    wait(mutex);            //   \u2510\n    read_count++;           //   \u251c obtain `mutex` to increase\n    if (read_count == 1) {  //   \u2502 `read_count`\n        wait(rw_mutex);     // \u2510 \u2502\n    }                       // \u2502 \u2502\n    signal(mutex);          // \u2502 \u2518\n                            // \u251c\u2500\u2500 readers share `rw_mutex` to\n    /* critical section */  // \u2502   read critical resource\n                            // \u2502\n    wait(mutex);            // \u2502 \u2510\n    read_count--;           // \u2502 \u251c obtain `mutex` to decrease\n    if (read_count == 0) {  // \u2502 \u2502 `read_count`\n        signal(rw_mutex);   // \u2518 \u2502\n    }                       //   \u2502\n    signal(mutex);          //   \u2518\n}\n</code></pre> <p>\u903b\u8f91\u4e0a\uff0c\u91ca\u653e <code>rw_mutex</code> \u7684 reader \u4e0d\u9700\u8981\u662f\u7533\u8bf7 <code>rw_mutex</code> \u7684 reader\uff0c\u8fd9\u4e5f\u5370\u8bc1\u4e86\u8fd9\u4e2a\u9501\u7ef4\u62a4\u7684\u662f\u6574\u4e2a readers \u7fa4\u4f53\u7684\u5b58\u5728\u4e0e\u5426\uff0c\u800c\u4e0d\u662f\u201c\u67d0\u4e2a reader\u201d\u7684\u5b58\u5728\u4e0e\u5426\u3002</p> <p>\u4e3a\u4ec0\u4e48 <code>read_count</code> \u4e0d\u4f7f\u7528\u4fe1\u53f7\u91cf\uff1f</p> <p>\u6211\u4eec\u89c2\u5bdf\u5bf9 <code>read_count</code> \u7684\u64cd\u4f5c\uff0c\u4e00\u5171\u6709\u4e09\u7c7b\uff1a</p> <ol> <li><code>read_count++</code>\uff1b</li> <li><code>read_count--</code>\uff1b</li> <li><code>read_count == k</code>\uff1b</li> </ol> <p>\u5e76\u4e14 <code>read_count &gt;= 0</code> \u5e94\u5f53\u59cb\u7ec8\u6210\u7acb\uff0c\u6240\u4ee5\u5149\u770b\u524d\u4e24\u7c7b\uff0c\u5176\u5b9e\u5f88\u9002\u5408\u76f4\u63a5\u4f5c\u4e3a\u4fe1\u53f7\u91cf\u6765\u7ef4\u62a4\u3002\u4f46\u662f\u6211\u4eec\u65e0\u6cd5\u5bf9\u4fe1\u53f7\u91cf\u8fdb\u884c\u6bd4\u8f83\u64cd\u4f5c\uff0c\u6240\u4ee5\u6211\u4eec\u662f\u7528 <code>mutex</code> \u7ef4\u62a4\u4e86 <code>read_count</code>\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u6240\u6709\u5bf9 <code>read_count</code> \u7684\u64cd\u4f5c\u90fd\u662f\u5728 <code>mutex</code> \u7684\u4fdd\u62a4\u4e0b\u8fdb\u884c\u7684\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5176\u5b9e <code>read_count</code> \u548c <code>mutex</code> \u4e00\u8d77\u6784\u6210\u4e86\u4e00\u4e2a\u539f\u5b50\u53d8\u91cf\u3002</p>"},{"location":"OS/Unit2-Part2/#the-dining-philosophers-problem","title":"The Dining Philosophers Problem","text":""},{"location":"OS/Unit2-Part2/#_4","title":"\u95ee\u9898\u80cc\u666f &amp; \u95ee\u9898\u63cf\u8ff0","text":"<ul> <li>\ud83d\udd17 Wiki</li> </ul> <p>\u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\uff0c\u6709\u4e94\u4e2a\u54f2\u5b66\u5bb6\uff0cta \u4eec\u56f4\u5750\u5728\u4e00\u5f20\u5706\u684c\u65c1\uff0c\u6bcf\u4e2a\u54f2\u5b66\u5bb6\u9762\u524d\u90fd\u6709\u4e00\u7897\u7c73\u996d\uff0c\u800c ta \u4eec\u4e24\u4e24\u4e4b\u95f4\u5206\u522b\u6709\u4e00\u6839\u7b77\u5b50\u3002</p> <p> </p> <p>\u6bcf\u5e27\u54f2\u5b66\u5bb6\u90fd\u80fd\u9009\u62e9\u6267\u884c\u4ee5\u4e0b\u4e24\u4e2a\u884c\u4e3a\u4e4b\u4e00\uff1a</p> <ol> <li>\u601d\u8003\uff1b</li> <li>\u62ff\u7b77\u5b50\uff1b</li> </ol> <p>\u54f2\u5b66\u5bb6\u5982\u679c\u60f3\u8981\u5e72\u996d\u5c31\u5fc5\u987b\u6709\u4e24\u6839\u7b77\u5b50\uff0cta \u540c\u65f6 \u62ff\u8d77 ta \u5de6\u53f3\u4fa7\u7b77\u5b50\u65f6\uff0c\u624d\u80fd\u5e72\u996d\u3002\u663e\u7136\uff0c\u4e24\u4e2a\u54f2\u5b66\u5bb6\u4e0d\u80fd\u540c\u65f6\u62ff\u8d77\u540c\u4e00\u6839\u7b77\u5b50\uff1b\u5e72\u5b8c\u996d\u54f2\u5b66\u5bb6\u4f1a\u653e\u4e0b\u7b77\u5b50\u3002~~\u5047\u8bbe\u54f2\u5b66\u5bb6\u4eec\u90fd\u4e0d\u5acc\u810f\u3002~~</p>"},{"location":"OS/Unit2-Part2/#-semaphores_2","title":"\u89e3\u51b3 - semaphores","text":"<p>\u663e\u7136\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4fe1\u53f7\u91cf\u6765\u7ef4\u62a4\u4e00\u4e2a\u7b77\u5b50\u662f\u5426\u53ef\u7528\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u4e0b\u9762\uff08\u6709\u95ee\u9898\u7684\uff09\u89e3\u6cd5\uff1a</p> <pre><code>process() {\n    wait(chopstick[i]);\n    wait(chopstick[ (i+1) % 5 ]); // i.e. the next chopstick\n\n    /* eat rice */\n\n    signal(chopstick[i]);\n    signal(chopstick[ (i+1) % 5 ]);\n}\n</code></pre> <p>\u4e0a\u8ff0\u65b9\u6848\u5b58\u5728\u95ee\u9898\uff01</p> <p>\u8003\u8651\u8fd9\u79cd\u60c5\u51b5\uff1a\u6240\u6709\u54f2\u5b66\u5bb6\u5728\u7b2c\u4e00\u5e27\u90fd\u60f3\u8981\u5e72\u996d\uff0c\u6b64\u65f6\u5b83\u4eec\u540c\u65f6\u8fd0\u884c\u5b8c\u4e86\u7b2c 2 \u884c\uff08\u4f8b\u5982\uff0c\u540c\u65f6\u62ff\u8d77\u4e86\u53f3\u624b\u8fb9\u7684\u7b77\u5b50\uff09\uff0c\u8fd9\u65f6\u6211\u4eec\u53d1\u73b0\uff0c\u6240\u6709\u7b77\u5b50\u90fd\u88ab\u5360\u6709\uff0c\u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u4eba\u80fd\u7b49\u5230\u4e0b\u4e00\u4e2a\u7b77\u5b50\uff0c\u6b64\u65f6\uff0c\u54f2\u5b66\u5bb6\u4eec\u53d1\u751f\u4e86\u6b7b\u9501\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e2a\u6b7b\u9501\uff0c\u4e66\u4e2d\u7ed9\u51fa\u4e86\u4e09\u79cd\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li>\u5141\u8bb8\u6700\u591a 4 \u4f4d\u54f2\u5b66\u5bb6\u540c\u65f6\u83b7\u53d6\u7b77\u5b50\uff1b</li> <li>\u54f2\u5b66\u5bb6\u5fc5\u987b\u540c\u65f6\u83b7\u53d6\u4e24\u4e2a\u7b77\u5b50\uff0c\u800c\u4e0d\u80fd\u6293\u4e00\u652f\u7b49\u4e00\u652f\uff1b<ul> <li>\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u201c\u6293\u7b77\u5b50\u201d\u8fd9\u4ef6\u4e8b\u5e94\u5f53\u5728\u4e00\u4e2a\u4e34\u754c\u6bb5\u4e2d\u5b8c\u6210\uff1b</li> </ul> </li> <li>\u5947\u6570\u54f2\u5b66\u5bb6\u5148\u62ff\u5de6\u624b\u7684\u7b77\u5b50\uff0c\u5076\u6570\u54f2\u5b66\u5bb6\u5148\u62ff\u53f3\u624b\u7684\u7b77\u5b50\uff0c\u8fd9\u6837\u4e0d\u4f1a\u4ea7\u751f\u5faa\u73af\u7b49\u5f85\uff1b</li> </ol>"},{"location":"OS/Unit2-Part2/#-monitors","title":"\u89e3\u51b3 - monitors","text":"<ul> <li>[ ] TODO: \u4e0d\u662f\u5f88\u91cd\u8981</li> </ul>"},{"location":"OS/Unit2-Part3/","title":"U2 Part 3: \u6b7b\u9501 | Deadlocks","text":"<p>\u5f15\u5165</p> <p>\u6b7b\u9501\u95ee\u9898\u5e7f\u6cdb\u5b58\u5728\u4e8e\u8ba1\u7b97\u673a\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u800c\u6211\u4eec\u672c\u8282\u53ea\u8ba8\u8bba\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6b7b\u9501\u95ee\u9898\u3002</p>"},{"location":"OS/Unit2-Part3/#_1","title":"\u6b7b\u9501\u5efa\u6a21","text":"<p>\u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u5df2\u7ecf\u63d0\u5230\u4e86\u4e00\u4e2a\u6b7b\u9501\u60c5\u51b5\u3002\u672c\u8282\u6211\u4eec\u4e13\u6ce8\u4e8e\u5982\u4f55\u89e3\u51b3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6b7b\u9501(deadlock)\u95ee\u9898\u3002</p> <p>deadlock</p> <p>A deadlock is a situation in which every process in a set of processes is waiting for an event that can be caused only by another process in the set.</p> <p>\u5373\u5b58\u5728\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u96c6\u5408\uff0c\u5b83\u4eec\u4e92\u76f8\u7b49\u5f85\u5bf9\u65b9\u6301\u6709\u7684\u8d44\u6e90\u3002</p> <p>\u4e0e\u4e4b\u5bf9\u5e94\u7684\uff0c\u5176\u5b9e\u8fd8\u6709\u4e00\u4e2a\u53eb\u6d3b\u9501(livelock)[^1]\u7684\u4e1c\u897f\u3002</p> <p>\u6b7b\u9501\u4ea7\u751f\u4e8e\u8d44\u6e90\u7684\u4f7f\u7528\u8fc7\u7a0b\uff0c\u800c\u4e14\u901a\u5e38\u53ea\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u624d\u4f1a\u53d1\u751f\uff0c\u800c\u6b63\u662f\u56e0\u4e3a\u8fd9\u79cd\u4e0d\u786e\u5b9a\u6027\uff0c\u6b7b\u9501\u95ee\u9898\u624d\u5f02\u5e38\u68d8\u624b\u3002\u4e3a\u4e86\u89e3\u51b3\u6b7b\u9501\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u7406\u89e3\u6b7b\u9501\u4ea7\u751f\u7684\u539f\u56e0\uff0c\u4ee5\u65b9\u4fbf\u5bf9\u5b83\u8fdb\u884c\u5efa\u6a21\uff0c\u8fdb\u800c\u66f4\u597d\u5730\u63cf\u8ff0\u6b7b\u9501\u3002</p> <p>\u4ece\u8d44\u6e90\u4f7f\u7528\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u7cfb\u7edf\u7684\u884c\u4e3a\u5206\u6210\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ol> <li>\u7533\u8bf7\u8d44\u6e90\uff1b</li> <li>\u4f7f\u7528\u8d44\u6e90\uff1b</li> <li>\u91ca\u653e\u8d44\u6e90\uff1b</li> </ol> <p>\u5176\u4e2d\uff0c\u7533\u8bf7\u8d44\u6e90\u548c\u91ca\u653e\u8d44\u6e90\u901a\u5e38\u901a\u8fc7\u4e0d\u540c\u7684\u7cfb\u7edf\u8c03\u7528\u5b9e\u73b0\u3002\u800c\u90e8\u5206\u8d44\u6e90\u662f\u6709\u9650\u4e14\u4e92\u65a5\u7684\uff0c\u56e0\u800c\u5982\u679c\u5728\u7f3a\u4e4f\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\uff0c\u8fdb\u7a0b/\u7ebf\u7a0b\u4ecd\u7136\u60f3\u8981\u7533\u8bf7\u8d44\u6e90\uff0c\u5c31\u53ea\u80fd\u9677\u5165\u7b49\u5f85\u3002\u800c\u6b63\u5728\u7b49\u5f85\u7684\u8d44\u6e90\u4e5f\u53ef\u80fd\u6301\u6709\u4e00\u4e9b\u8d44\u6e90\uff0c\u4e00\u65e6\u6070\u597d\u51fa\u73b0\u4e86\u4e92\u76f8\u7b49\u5f85\u7684\u60c5\u51b5\uff0c\u5c31\u4f1a\u51fa\u73b0\u6b7b\u9501\u3002\u4f8b\u5982\uff0c\u4e92\u65a5\u9501\u548c\u4fe1\u53f7\u91cf\u8fd9\u4e9b\u4e1c\u897f\u5c31\u662f\u6b7b\u9501\u4ea7\u751f\u7684\u4e00\u5927\u91cd\u8981\u6765\u6e90\u3002</p> <p>\u8ba1\u7b97\u673a\u8d44\u6e90\u5206\u4e3a\u5f88\u591a\u7c7b\uff0c\u6bcf\u4e00\u7c7b\u4e2d\u53ef\u80fd\u6709\u82e5\u5e72\u5e73\u7b49\u7684\u201c\u5b9e\u4f8b(instance)\u201d\u3002\u5bf9\u4e8e\u4e00\u4e2a\u5408\u7406\u7684\u201c\u8d44\u6e90\u5206\u7c7b\u201d\u6765\u8bf4\uff0c\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u9700\u8981\u67d0\u79cd\u8d44\u6e90\u65f6\u5019\uff0c\u8fd9\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e2d\u7684\u4efb\u610f\u7a7a\u95f2\u5b9e\u4f8b\u90fd\u5e94\u5f53\u53ef\u4ee5\u88ab\u7528\u4e8e\u6ee1\u8db3\u8fd9\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u9700\u6c42\u3002</p> <p>\u5bfc\u8bfb</p> <p>\u4e0b\u9762\u4e24\u4e2a\u90e8\u5206\u5e76\u4e0d\u4f1a\u5f88\u5feb\u5c31\u88ab\u7528\u5230\uff0c\u5c24\u5176\u662f\u5b89\u5168\u72b6\u6001\u4e0e\u4e0d\u5b89\u5168\u72b6\u6001\u662f\u88ab\u6211\u63d0\u524d\u653e\u5230\u8fd9\u91cc\u6765\u7684\uff0c\u8bfb\u8005\u53ef\u4ee5\u81ea\u884c\u8003\u8651\u662f\u76f4\u63a5\u987a\u5e8f\u9605\u8bfb\uff0c\u8fd8\u662f\u6682\u65f6\u8df3\u8fc7\uff08\u4e4b\u540e\u7528\u5230\u7684\u65f6\u5019\u6211\u4f1a\u7ed9\u51fa\u8df3\u56de\u94fe\u63a5\uff09\u3002</p> <p>\u6211\u4e2a\u4eba\u8ba4\u4e3a\u7ed3\u6784\u4e0a\u8fd9\u6837\u5b89\u6392\u66f4\u6e05\u6670\uff0c\u4f46\u8003\u8651\u5230\u4e24\u4e2a\u5185\u5bb9\u5b58\u5728\u4e00\u5b9a\u95f4\u9694\uff0c\u6240\u4ee5\u5f80\u540e\u653e\u7f6e\u4e5f\u6709\u5f80\u540e\u653e\u7f6e\u7684\u9053\u7406\u3002</p>"},{"location":"OS/Unit2-Part3/#_2","title":"\u8d44\u6e90\u5206\u914d\u56fe","text":"<p>\u6839\u636e\u4e0a\u9762\u7684\u63cf\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u5efa\u6a21\u6b7b\u9501\u53ef\u4ee5\u4ece\u8ba8\u8bba\u8fdb\u7a0b/\u7ebf\u7a0b\u4e0e\u8d44\u6e90\u7684\u6c42\u53d6\u5173\u7cfb\u5165\u624b\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u8d44\u6e90\u5206\u914d\u56fe(resource-allocation graph)\u6765\u63cf\u8ff0\u8fd9\u4ef6\u4e8b\u3002</p> <p>\u9759\u6001</p> <p> </p> <p>\u8d44\u6e90\u5206\u914d\u56fe\u662f\u4e00\u79cd\u6709\u4e24\u7c7b\u8282\u70b9\u7684\u6709\u5411\u56fe\uff0c\u6211\u4eec\u7528\u5706\u8282\u70b9 \\(T_i\\) \u8868\u793a\u8fdb\u7a0b/\u7ebf\u7a0b\uff0c\u7528\u65b9\u8282\u70b9 \\(R_j\\) \u8868\u793a\u8d44\u6e90\uff0c\u65b9\u8282\u70b9\u4e2d\u7684\u5b9e\u5fc3\u70b9\u8868\u793a\u4e00\u4e2a\u8d44\u6e90\u7c7b\u522b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002\u540c\u65f6\uff0c\u6211\u4eec\u79f0\u4ece\u8fdb\u7a0b/\u7ebf\u7a0b\u6307\u5411\u8d44\u6e90\u7c7b\u522b\u7684\u6709\u5411\u8fb9\u4e3a\u8bf7\u6c42\u8fb9(request edge)\uff0c\u8868\u793a\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u6b63\u5728\u7b49\u5f85\u8fd9\u79cd\u8d44\u6e90\uff1b\u79f0\u4ece\u8d44\u6e90\u5b9e\u4f8b\u6307\u5411\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6709\u5411\u8fb9\u4e3a\u5206\u914d\u8fb9(assignment edge)\uff0c\u8868\u793a\u8d44\u6e90 \\(R_j\\) \u88ab\u5206\u914d\u7ed9\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\)\uff0c\u5373\u76ee\u524d\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u6301\u6709\u4e00\u4e2a\uff08\u4e00\u6761\u8fb9\u8868\u793a\u4e00\u4e2a\uff09\u8d44\u6e90 \\(R_j\\) \u7684\u5b9e\u4f8b\uff0c\u4f8b\u5982\u4e0b\u56fe\uff1a</p> <ul> <li>\u5f53\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u4e0d\u5b58\u5728\u73af\u65f6\uff0c\u8bf4\u660e\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\u72b6\u6001\uff1b</li> <li>\u5f53\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u5b58\u5728\u73af\u65f6\uff0c\u7cfb\u7edf\u53ef\u80fd\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\uff0c\u4e5f\u53ef\u80fd\u4e0d\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\uff1b<ul> <li>\u7279\u4f8b\uff1a\u5982\u679c\u4e0e\u73af\u76f8\u5173\u7684\u8282\u70b9\u90fd\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u65f6\u5019\uff0c\u7cfb\u7edf\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\uff1b</li> </ul> </li> </ul> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u5b58\u5728\u73af\uff0c\u662f\u7cfb\u7edf\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\u7684\u5fc5\u8981\u6761\u4ef6\u3002</p> <p>\u52a8\u6001</p> <ul> <li>\u8fdb\u7a0b/\u7ebf\u7a0b\u7533\u8bf7\u67d0\u4e2a\u8d44\u6e90\u65f6\uff0c\u5728\u56fe\u4e2d\u6dfb\u52a0\u4e00\u6761\u5bf9\u5e94\u7684 request edge\uff1b</li> <li>\u5f53\u8d44\u6e90\u7d22\u53d6\u6210\u529f\u65f6\uff0c\u8fd9\u6761 request edge \u88ab\u66ff\u6362\u4e3a assignment edge\uff1b</li> <li>\u5f53\u8fdb\u7a0b\u91ca\u653e\u8fd9\u4e2a\u8d44\u6e90\u65f6\uff0c\u5219\u9700\u8981\u5c06\u8be5 assignment edge \u6d88\u9664\uff1b</li> </ul> <p>\u5728\u4e4b\u540e\u7684\u5185\u5bb9\u4e2d\uff0c\u6211\u4eec\u8fd8\u5c06\u770b\u5230\u4e00\u4e9b\u8d44\u6e90\u5206\u914d\u56fe\u7684\u53d8\u4f53\uff1a\u5f15\u5165 claim edge \u7684\u8d44\u6e90\u5206\u914d\u56fe\u7b97\u6cd5\u4ee5\u53ca\u53ea\u4fdd\u7559\u8fdb\u7a0b/\u7ebf\u7a0b\u7b49\u5f85\u5173\u7cfb\u7684 wait for graph\u3002</p> <p>\u7531\u4e8e\u552f\u4e00\u5b9e\u4f8b\u8fd9\u4e2a\u6027\u8d28\u88ab\u7834\u574f\u540e\uff0c\u6b7b\u9501\u5728\u8d44\u6e90\u5206\u914d\u56fe\u4e0a\u4e0d\u518d\u90a3\u4e48\u76f4\u89c2\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5f15\u5165\u65b0\u7684\u5de5\u5177\u6765\u63cf\u8ff0\u6b7b\u9501\u3002</p>"},{"location":"OS/Unit2-Part3/#_3","title":"\u5b89\u5168\u72b6\u6001\u4e0e\u4e0d\u5b89\u5168\u72b6\u6001","text":"<p>\u8be5\u90e8\u5206\u5185\u5bb9\u88ab\u4e66\u672c\u5b89\u6392\u5728\u6b7b\u9501\u907f\u514d\u4e2d\uff0c\u88ab\u6211\u63d0\u524d\uff0c\u53ef\u4ee5\u8003\u8651\u4e0d\u76f4\u63a5\u6df1\u5165\u800c\u662f\u7b49\u4e4b\u540e\u9047\u5230\u4e86\u518d\u770b\u3002</p> <p>\u5b89\u5168\u72b6\u6001(safe state)\u6307\u5b58\u5728\u5b89\u5168\u5e8f\u5217(safe sequence)\u7684\u72b6\u6001\uff0c\u7cfb\u7edf\u6309\u7167 safe sequence \u7684\u987a\u5e8f\u6267\u884c\u8fdb\u7a0b/\u7ebf\u7a0b\u548c\u5206\u914d\u8d44\u6e90\uff0c\u5c31\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u76f8\u5bf9\u5e94\u7684\uff0c\u4e0d\u662f\u5b89\u5168\u72b6\u6001\u7684\u72b6\u6001\u79f0\u4e3a\u4e0d\u5b89\u5168\u72b6\u6001(unsafe state)\u3002\u5177\u4f53\u6765\u8bf4\uff0csafe sequence \u7684\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <p>safe sequence</p> <p>\u9996\u5148 high level \u5730\u8bb2\u4e00\u4e0b safe sequence \u7684\u601d\u8def\uff0csafe sequence \u4e2d\u7684\u6bcf\u4e00\u9879 \\(T_i\\) \u6240\u9700\u8981\u7684\u8d44\u6e90\uff0c\u90fd\u80fd\u901a\u8fc7\u73b0\u6709\u8d44\u6e90\u6216\u5176\u4e4b\u524d\u7684\u8fdb\u7a0b/\u7ebf\u7a0b \\(\\forall j &lt; i T_{j}\\) \u6267\u884c\u5b8c\u6bd5\u91ca\u653e\u7684\u8d44\u6e90\u6765\u6ee1\u8db3\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e safe sequence \\(&lt;T_1, T_2, \\dots, T_n&gt;\\)\uff0c\u6211\u4eec\u5b9a\u4e49\u6bcf\u4e00\u9879\u8fd8\u9700\u8981\u7684 \\(R_j\\) \u8d44\u6e90\u4e3a \\(need_{i,j}\\)\u3001\u5df2\u7ecf\u88ab\u5206\u914d\u7684 \\(R_j\\) \u8d44\u6e90\u4e3a \\(allocated_{i,j}\\)\uff0c\u4ee5\u53ca\u8d44\u6e90 \\(R_j\\) \u4e2d\u8fd8\u7a7a\u95f2\u7684\u8d44\u6e90\u7684\u91cf \\(available_{j}\\)\uff0c\u5219\u5e94\u5f53\u6709\uff1a</p> \\[ \\begin{aligned}     \\forall i \\in \\{1, 2, \\dots, n\\},\\quad     \\forall j \\in \\{1, 2, \\dots, m\\}, \\\\     available_{j} + \\sum_{k=1}^{i-1} allocated_{k,j} \\geq need_{i,j} \\end{aligned} \\] <p>\u5bf9\u4e8e\u7b2c \\(i\\) \u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u6765\u8bf4\uff0c\u5b9e\u9645\u8fd0\u884c\u65f6\u7684\u7a7a\u95f2\u8d44\u6e90\u53ef\u80fd\u6765\u81ea\u4e8e \\(allocated_{k,j}\\)\uff0c\u4f46\u8fd9\u91cc\u662f\u7528\u6765\u505a\u5224\u65ad\u7684\uff0c\u5e76\u4e0d\u662f\u4e00\u4e2a\u5728\u7ebf\u7684\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u6240\u4ee5\u7528 \\(available_{j} + \\sum_{k=1}^{i-1} allocated_{k,j}\\) \u8fd9\u4e2a\u5f0f\u5b50\u6765\u7ef4\u62a4\u6b64\u65f6 \\(T_i\\) \u7684\u6700\u5927\u53ef\u7528\u8d44\u6e90\u3002</p> <p>\u601d\u8003\u5982\u4f55\u5bfb\u627e\u4e00\u4e2a safe sequence</p> <p>\u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u5728\u4e4b\u540e\u6b7b\u9501\u68c0\u6d4b\u7684\u90e8\u5206\u4f1a\u7ed9\u51fa\u7b54\u6848\uff0c\u4f46\u4e0d\u59a8\u7b80\u5355\u601d\u8003\u4e00\u4e0b\u600e\u6837\u5bfb\u627e\u4e00\u4e2a safe sequence \u5462\uff1f\u80fd\u5426\u8d2a\u5fc3\u5730\u6765\u6c42\u7b97\u8fd9\u6837\u4e00\u4e2a\u5e8f\u5217\u5462\uff1f</p> <p>\u4f46\u662f\uff0csafe state \u662f\u4e00\u4e2a\u76f8\u5bf9\u8f83\u5f3a\u7684\u7ea6\u675f\uff0c\u4e0d\u5b89\u5168\u72b6\u6001\u4e0d\u4ee3\u8868\u6b7b\u9501\u4e00\u5b9a\u4f1a\u53d1\u751f\uff0c\u7528\u97e6\u6069\u56fe\u6765\u8868\u793a\u5b83\u4eec\u7684\u5173\u7cfb\u5c31\u662f\uff1a</p> <p> </p> <p>\u5982\u679c\u6211\u4eec\u80fd\u4fdd\u8bc1\u7cfb\u7edf\u53ea\u8fd0\u884c\u5728 safe state\uff0c\u4e5f\u5c31\u80fd\u5145\u5206\u5730\u907f\u514d\u6b7b\u9501\u7684\u53d1\u751f\u3002</p>"},{"location":"OS/Unit2-Part3/#_4","title":"\u6b7b\u9501\u7684\u6761\u4ef6","text":"<p>\u8981\u60f3\u6b7b\u9501\u51fa\u73b0\uff0c\u4e0b\u9762\u56db\u4e2a\u6761\u4ef6\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\uff1a</p> <ol> <li>\u4e92\u65a5(mutual exclusion)\uff1a\u6b7b\u9501\u4e2d\u7684\u8d44\u6e90\u5fc5\u987b\u662f\u975e\u5171\u4eab\u7684\uff0c\u5373\u4e00\u6b21\u53ea\u80fd\u88ab\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u4f7f\u7528\uff1b<ul> <li>\u6b63\u56e0\u4e3a\u4e92\u65a5\u8d44\u6e90\u65e0\u6cd5\u88ab\u540c\u65f6\u4f7f\u7528\uff0c\u6240\u4ee5\u9700\u8981\u8d44\u6e90\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u9700\u8981\u7b49\u5f85\u6301\u6709\u76ee\u6807\u8d44\u6e90\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u91ca\u653e\u8be5\u8d44\u6e90\u4ee5\u540e\u624d\u80fd\u4f7f\u7528\u76ee\u6807\u8d44\u6e90\uff1b</li> </ul> </li> <li>\u6301\u6709\u5e76\u7b49\u5f85(hold &amp; wait)\uff1a\u6b7b\u9501\u4e2d\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u5728\u7b49\u5f85\u8d44\u6e90\u7684\u540c\u65f6\uff0c\u4e5f\u5fc5\u987b\u6301\u6709\u81f3\u5c11\u4e00\u4e2a\u8d44\u6e90\uff1b<ul> <li>\u4e3a\u4e86\u4fc3\u6210\u5faa\u73af\u7b49\u5f85\uff0c\u4e00\u4e2a\u7b49\u5f85\u5176\u5b83\u8d44\u6e90\uff08\u6709\u51fa\u8fb9\uff09\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u5fc5\u987b\u6301\u6709\u81f3\u5c11\u4e00\u4e2a\u8d44\u6e90\uff0c\u8fd9\u6837\u624d\u80fd\u8ba9\u5176\u5b83\u8d44\u6e90\u4e5f\u7b49\u5f85\u5b83\uff08\u6709\u5165\u8fb9\uff09\uff1b</li> <li>\u8bf4\u767d\u4e86\u5c31\u662f\uff1a\u6301\u6709\u5bfc\u81f4\u53ef\u80fd\u88ab\u7b49\u5f85\uff0c\u7b49\u5f85\u5c31\u662f\u7b49\u5f85\uff0c\u800c\u4e00\u65e6\u4e00\u4e2a\u8282\u70b9\u65e2\u7b49\u5f85\u53c8\u88ab\u7b49\u5f85\uff0c\u5c31\u6709\u53ef\u80fd\u4fc3\u6210\u5faa\u73af\u7b49\u5f85</li> </ul> </li> <li>\u975e\u62a2\u5360(no preemption)\uff1a\u6b7b\u9501\u4e2d\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\u53ea\u80fd\u5728\u4f7f\u7528\u5b8c\u8d44\u6e90\u540e\u4e3b\u52a8\u91ca\u653e\u8d44\u6e90\uff0c\u5176\u6301\u6709\u7684\u8d44\u6e90\u65e0\u6cd5\u88ab\u5176\u5b83\u8fdb\u7a0b/\u7ebf\u7a0b\u62a2\u5360\uff1b<ul> <li>\u4e3a\u4e86\u4fdd\u8bc1\u7b49\u5f85\u5173\u7cfb\u4e0d\u4f1a\u88ab\u5f3a\u884c\u7834\u574f\uff1b</li> </ul> </li> <li>\u5faa\u73af\u7b49\u5f85(circular wait)\uff1a\u6b7b\u9501\u4e2d\u7684\u8fdb\u7a0b\u5b58\u5728\u73af\u72b6\u7684\u7b49\u5f85\u8d44\u6e90\u5173\u7cfb\uff0c\u5373 wait for graph \u4e2d\u5b58\u5728\u73af\uff1b<ul> <li>\u903b\u8f91\u4e0a\u5bfc\u81f4\u6b7b\u9501\u51fa\u73b0\u7684\u76f4\u63a5\u539f\u56e0\uff0c\u4e92\u76f8\u7b49\u5f85\u5bfc\u81f4\u6ca1\u6709\u8d44\u6e90\u4f1a\u88ab\u91ca\u653e\uff0c\u5bfc\u81f4\u6b7b\u9501\u72b6\u6001\u65e0\u6cd5\u88ab\u6253\u7834\uff1b</li> </ul> </li> </ol> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u56db\u4e2a\u5173\u7cfb\u5e76\u4e0d\u5b8c\u5168\u72ec\u7acb\u3002</p>"},{"location":"OS/Unit2-Part3/#_5","title":"\u6b7b\u9501\u7684\u5904\u7406","text":"<p>\u5f88\u5bb9\u6613\u8ba4\u8bc6\u5230\uff0c\u6b7b\u9501\u7684\u5371\u5bb3\u662f\u5de8\u5927\u7684\uff0c\u90a3\u4e48\u5982\u4f55\u5904\u7406\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6b7b\u9501\u95ee\u9898\u5462\uff1f\u4e3b\u8981\u6709\u8fd9\u4e48\u51e0\u4e2a\u601d\u8def\uff1a</p> <ol> <li>\u4e0d\u505a\u989d\u5916\u5904\u7406\uff0c\u8981\u6c42\u7a0b\u5e8f\u5458\u4fdd\u8bc1\u903b\u8f91\u4e0a\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b</li> <li>\u6b7b\u9501\u9884\u9632(deadlock prevention)\uff1a\u4f7f\u7528\u67d0\u79cd\u89c4\u8303\u6216\u534f\u8bae\u6765\u4fdd\u8bc1\u6b7b\u9501\u4e0d\u4f1a\u51fa\u73b0\uff1b</li> <li>\u6b7b\u9501\u907f\u514d(deadlock avoidance)\uff1a\u7981\u6b62\u53ef\u80fd\u4ea7\u751f\u6b7b\u9501\u7684\u884c\u4e3a\u7684\u53d1\u751f\uff1b<ul> <li>\u4e0e 2. \u7684\u6700\u4e3b\u8981\u7684\u533a\u522b\u662f\uff0c2. \u5728\u89c4\u8303\u4e0b\u7684\u6240\u6709\u884c\u4e3a\u90fd\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\u95ee\u9898\uff1b\u800c 3. \u5219\u662f\u4e0d\u7ea6\u675f\u884c\u4e3a\uff0c\u4f46\u662f\u7981\u6b62\u53ef\u80fd\u4ea7\u751f\u6b7b\u9501\u7684\u884c\u4e3a\u6267\u884c\uff0c\u5728\u7a0d\u5019\u4ecb\u7ecd\u5177\u4f53\u5185\u5bb9\u540e\u4f1a\u66f4\u5bb9\u6613\u7406\u89e3\uff1b</li> </ul> </li> <li>\u6b7b\u9501\u68c0\u6d4b(deadlock detection)\u548c\u6b7b\u9501\u89e3\u9664(deadlock recovery)\u5141\u8bb8\u6b7b\u9501\u7684\u51fa\u73b0\uff0c\u4f46\u662f\u5f53\u68c0\u6d4b\u5230\u6b7b\u9501\u65f6\uff0c\u9700\u8981\u53bb\u6d88\u9664\u6b7b\u9501\u95ee\u9898\uff1b</li> </ol> <p>\u4e8b\u5b9e\u4e0a\uff0c\u5728\u4e3b\u6d41\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4e00\u822c\u9009\u62e9\u4f7f\u7528\u7b2c\u4e00\u79cd\uff0c\u5373\u5c06\u95ee\u9898\u4ea4\u7ed9\u5f00\u53d1\u8005\u53bb\u89e3\u51b3\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u4ecb\u7ecd\u4e0a\u9762\u63d0\u5230\u7684\u540e\u4e09\u4e2a\u65b9\u6cd5\u4e2d\u7684\u56db\u5757\u5185\u5bb9\u3002\u5176\u4e2d\u6709\u90e8\u5206\u5185\u5bb9\u6709\u8f83\u5927\u4ea4\u96c6\uff0c\u5b83\u4eec\u53ef\u80fd\u5c5e\u4e8e\u540c\u4e00\u7eb2\u9886\u4e0b\u5728\u4e0d\u540c\u65f6\u523b\u505a\u7684\u5904\u7406\u3002</p>"},{"location":"OS/Unit2-Part3/#_6","title":"\u6b7b\u9501\u9884\u9632","text":"<p>\u6b7b\u9501\u9884\u9632(deadlock prevention)\u7684\u6838\u5fc3\u601d\u8def\u662f\u7834\u574f\u6b7b\u9501\u4ea7\u751f\u7684\u5fc5\u8981\u6761\u4ef6\u3002\u7531\u4e8e\u300c\u8981\u60f3\u6b7b\u9501\u51fa\u73b0\uff0c\u56db\u4e2a\u6761\u4ef6\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u300d\uff0c\u6240\u4ee5\u6211\u4eec\u5982\u679c\u80fd\u4fdd\u8bc1\u56db\u4e2a\u6761\u4ef6\u4e2d\u67d0\u4e00\u4e2a\u4e00\u76f4\u4e0d\u6210\u7acb\uff0c\u90a3\u4e48\u6b7b\u9501\u5c06\u6c38\u8fdc\u4e0d\u4f1a\u4ea7\u751f\uff0c\u800c\u65e2\u7136\u6b7b\u9501\u4e0d\u4f1a\u4ea7\u751f\uff0c\u90a3\u4e5f\u5c31\u4e0d\u9700\u8981\u53bb\u5904\u7406\u6b7b\u9501\u95ee\u9898\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5bf9\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\u9010\u4e00\u5206\u6790\uff1a</p> <ol> <li>\u7834\u574f\u4e92\u65a5(mutual exclusion)\uff1a<ul> <li>\u8fd9\u4e2a\u6761\u4ef6\u51e0\u4e4e\u662f\u65e0\u6cd5\u7834\u574f\u7684\uff0c\u5f88\u591a\u8d44\u6e90\u5929\u7136\u662f\u4e92\u65a5\u7684\uff1b</li> <li>\u6709\u4e9b\u8d44\u6599\u91cc\u4e5f\u6709\u5199\u4e00\u4e9b\u65b9\u6cd5\u6765\u7834\u574f\u8fd9\u4e2a\u6761\u4ef6[^2]\uff0c\u4f46\u662f\u6211\u611f\u89c9\u8fd8\u662f\u6709\u5c40\u9650\u6027\u7684\uff0c\u53cd\u6b63\u4e66\u672c\u91cc\u8bf4\u7684\u662f\u6ca1\u6cd5\u7834\u574f\uff1b</li> </ul> </li> <li>\u7834\u574f\u6301\u6709\u5e76\u7b49\u5f85(hold &amp; wait)\uff1a<ul> <li>\u5728\u6211\u4eec\u524d\u9762\u7684\u5206\u6790\u4e2d\u77e5\u9053\uff1a\u300c\u6301\u6709\u5bfc\u81f4\u53ef\u80fd\u88ab\u7b49\u5f85\uff0c\u7b49\u5f85\u5c31\u662f\u7b49\u5f85\uff0c\u800c\u4e00\u65e6\u4e00\u4e2a\u8282\u70b9\u65e2\u7b49\u5f85\u53c8\u88ab\u7b49\u5f85\uff0c\u5c31\u6709\u53ef\u80fd\u4fc3\u6210\u5faa\u73af\u7b49\u5f85\u300d\uff1b</li> <li>\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u53ea\u5141\u8bb8\u4e00\u4e2a\u8282\u70b9\u53ea\u80fd\u5728\u201c\u88ab\u7b49\u5f85\u201d\u548c\u201c\u7b49\u5f85\u201d\u4e2d\u4e8c\u9009\u4e00\uff0c\u4e5f\u5c31\u662f\u8bf4\u8ba9\u4e00\u4e2a\u7ebf\u7a0b/\u8fdb\u7a0b\u4e00\u65e6\u7533\u8bf7\u8d44\u6e90\u5c31\u4e00\u6b21\u6027\u83b7\u53d6\u6240\u6709\u8d44\u6e90\uff0c\u5982\u679c\u6ca1\u6cd5\u4e00\u6b21\u6027\u83b7\u53d6\u6240\u6709\u8d44\u6e90\u5c31\u91ca\u653e\u5df2\u7ecf\u7533\u8bf7\u5230\u7684\u8d44\u6e90\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u907f\u514d\u4e86\u5faa\u73af\u7b49\u5f85\u7684\u4ea7\u751f\uff1b</li> </ul> </li> <li>\u7834\u574f\u975e\u62a2\u5360(no preemption)\uff1a<ul> <li>\u901a\u8fc7\u5141\u8bb8\u8fdb\u7a0b/\u7ebf\u7a0b\u5f3a\u884c\u62a2\u5360\u53e6\u5916\u4e00\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u6301\u6709\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u7834\u574f\u88ab\u52a8\u7684\u7b49\u5f85\u5173\u7cfb\uff0c\u4ece\u800c\u907f\u514d\u6b7b\u9501\uff1b</li> <li>\u4f46\u662f\u548c\u4e92\u65a5\u5176\u5b9e\u662f\u7c7b\u4f3c\u7684\uff0c\u975e\u62a2\u5360\u4e5f\u5177\u6709\u4e00\u5b9a\u7684\u5929\u7136\u6027\uff0c\u5f3a\u884c\u62a2\u5360\u4e00\u90e8\u5206\u8d44\u6e90\u53ef\u80fd\u5bfc\u81f4\u8fdb\u884c\u5230\u4e00\u534a\u7684\u4efb\u52a1\u5931\u8d25\uff0c\u751a\u81f3\u4e00\u4e9b\u66f4\u4e25\u91cd\u7684\u540e\u679c\uff0c\u6240\u4ee5\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u529e\u6cd5\uff1b</li> <li>\u800c\u4e14\uff0c\u5141\u8bb8\u201c\u62a2\u5360\u201d\u4e5f\u4f1a\u5e26\u6765\u9965\u997f\u95ee\u9898\uff0c\u603b\u4f53\u6765\u8bf4\u96be\u4ee5\u5b9e\u73b0\u800c\u4e14\u6548\u7387\u4e0d\u9ad8\uff1b</li> </ul> </li> <li>\u7834\u574f\u5faa\u73af\u7b49\u5f85(circular wait)\uff1a<ul> <li>\u901a\u8fc7\u7ed9\u8d44\u6e90\u7f16\u53f7\uff0c\u89c4\u5b9a\u8fdb\u7a0b/\u7ebf\u7a0b\u53ea\u80fd\u6309\u7279\u5b9a\u7684\u987a\u5e8f\u7533\u8bf7\u8d44\u6e90\uff0c\u5c31\u4e0d\u4f1a\u51fa\u73b0\u5faa\u73af\u7b49\u5f85\u7684\u60c5\u51b5\uff1b</li> <li>\u7531\u4e8e\u8fdb\u7a0b/\u7ebf\u7a0b\u53ea\u80fd\u6309\u7167\u7279\u5b9a\u987a\u5e8f\u7533\u8bf7\u8d44\u6e90\uff0c\u800c\u8d44\u6e90\u7684\u7533\u8bf7\u5e94\u5f53\u662f\u4e2a\u52a8\u6001\u7684\u8fc7\u7a0b\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u51fa\u73b0\u300c\u8fdb\u7a0b\u5927\u534a\u90e8\u5206\u53ea\u9700\u8981\u7528\u5230 \\(R_3\\)\uff0c\u4f46\u662f\u7531\u4e8e\u6700\u540e\u9700\u8981\u7528\u4e00\u4e0b \\(R_1\\)\uff0c\u6240\u4ee5\u5fc5\u987b\u5148\u7533\u8bf7 \\(R_1\\) \u518d\u7533\u8bf7 \\(R_3\\)\uff0c\u5bfc\u81f4\u8fc7\u7a0b\u4e2d \\(R_1\\) \u4e00\u76f4\u88ab\u6301\u6709\u4f46\u4e00\u76f4\u672a\u88ab\u4f7f\u7528\u300d\u7684\u60c5\u51b5\uff0c\u6548\u7387\u582a\u5fe7\uff1b</li> <li>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u9762\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5728\u8bbe\u8ba1\u7f16\u53f7\u65f6\u5c06\u8d44\u6e90\u4f7f\u7528\u7684\u5e38\u89c4\u987a\u5e8f\u7b49\u56e0\u7d20\u7eb3\u5165\u8003\u8651\uff0c\u4f46\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u8d44\u6e90\u5e8f\u53f7\u9047\u5230\u65e0\u7a77\u65e0\u5c3d\u7684\u8d44\u6e90\u7c7b\u578b\u65f6\uff0c\u53c8\u5f53\u5982\u4f55\u5462\uff1f\u7531\u4e8e\u9700\u8981\u5927\u91cf\u8bbe\u8ba1\uff0c\u6240\u4ee5\u5e26\u6765\u4e86\u8d44\u6e90\u7684\u6269\u5c55\u6027\u8f83\u5dee\u7684\u95ee\u9898\uff1b</li> </ul> </li> </ol>"},{"location":"OS/Unit2-Part3/#_7","title":"\u6b7b\u9501\u907f\u514d","text":"<p>\u6b7b\u9501\u907f\u514d(deadlock avoidance)\u901a\u8fc7\u963b\u6b62\u53ef\u80fd\u8ba9\u7cfb\u7edf\u8fdb\u5165\u6b7b\u9501\u72b6\u6001\u7684\u884c\u4e3a\uff0c\u6765\u89e3\u51b3\u6b7b\u9501\u95ee\u9898\u3002\u5373\uff1a\u5982\u679c\u8fd9\u4e48\u505a\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501\uff0c\u90a3\u6211\u5c31\u4e0d\u8fd9\u4e48\u505a\uff0c\u4ee5\u6b64\u6765\u907f\u514d\u6b7b\u9501\u3002</p>"},{"location":"OS/Unit2-Part3/#_8","title":"\u8d44\u6e90\u5206\u914d\u56fe\u7b97\u6cd5","text":"<p>\u524d\u7f6e\uff1a\u8d44\u6e90\u5206\u914d\u56fe\uff01</p> <p>\u8d44\u6e90\u5206\u914d\u56fe\u7b97\u6cd5\u8f83\u4e3a\u76f4\u63a5\uff0c\u5b83\u4e0e\u5b89\u5168\u72b6\u6001\u7684\u6982\u5ff5\u65e0\u5173\uff0c\u76f4\u63a5\u68c0\u6d4b\u67d0\u79cd\u5206\u914d\u662f\u5426\u4f1a\u5bfc\u81f4\u6b7b\u9501\u53d1\u751f\uff0c\u5982\u679c\u8be5\u5206\u914d\u4f1a\u5bfc\u81f4\u6b7b\u9501\u53d1\u751f\uff0c\u5219\u4e0d\u8fdb\u884c\u8be5\u5206\u914d\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff0c\u8be5\u7b97\u6cd5\u53ea\u9002\u7528\u4e8e\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e2d\u90fd\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u60c5\u51b5\u3002\uff08\u56e0\u4e3a\u5b83\u4ee5\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u7684\u90a3\u4e2a\u7279\u4f8b\u4e3a\u539f\u7406\uff01\uff09</p> <p>\u6211\u4eec\u4e4b\u524d\u5df2\u7ecf\u5f15\u5165\u4e86\u8d44\u6e90\u5206\u914d\u56fe\u8fd9\u4e2a\u5de5\u5177\uff0c\u73b0\u5728\u6211\u4eec\u8981\u5728\u8d44\u6e90\u5206\u914d\u56fe\u7684\u57fa\u7840\u4e0a\uff0c\u5f15\u5165\u4e00\u6761\u8bc9\u6c42\u8fb9(claim edge)\uff0c\u7528\u865a\u7ebf\u8868\u793a\uff0c\u5b83\u4ece\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u6307\u5411\u8d44\u6e90 \\(R_j\\)\uff0c\u8868\u793a\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u4f1a\u5728\u672a\u6765\u7533\u8bf7\u8d44\u6e90 \\(R_j\\)\u3002</p> <p>\u4e8e\u662f\uff0c\u5728\u52a8\u6001\u8fc7\u7a0b\u4e2d\uff0c\u8d44\u6e90\u5206\u914d\u56fe\u6309\u7167\u5982\u4e0b\u89c4\u5219\u53cd\u5e94\u5206\u914d\u8fc7\u7a0b\uff1a</p> <ol> <li>\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u88ab\u6dfb\u52a0\u5230\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u65f6\u5019\uff0c\u9700\u8981\u8fde\u597d\u6240\u6709\u76f8\u5173\u7684 claim edge\uff1b<ul> <li> <p>\u8981\u6c42\u6700\u521d\u5c31\u77e5\u9053\u9700\u8981\u7684\u6240\u6709\u8d44\u6e90\uff0c\u8fd9\u4e5f\u6784\u6210\u8fd9\u7c7b\u65b9\u6cd5\u7684\u4e00\u4e2a\u5c40\u9650\u6027\uff1b</p> </li> </ul> </li> <li>\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u7533\u8bf7\u8d44\u6e90 \\(R_j\\) \u65f6\u5019\uff0c\u5982\u679c\u8fd9\u6761\u8fb9\u53d8\u4e3a assignment edge \u4e0d\u4f1a\u5bfc\u81f4\u6210\u73af\uff0c\u5219\u5c06 claim edge \u8f6c\u5316\u4e3a\u4e00\u6761 request edge \\(T_i \\rightarrow R_j\\)\uff1b<ul> <li> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u91cc\u9700\u8981\u5224\u65ad\u7684\u662f assignment edge\uff0c\u800c\u8f6c\u5316\u7684\u662f request edge\uff1b</p> </li> </ul> </li> <li>\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u83b7\u5f97\u8d44\u6e90 \\(R_j\\) \u65f6\u5019\uff0c\u5c06 request edge \u8f6c\u5316\u4e3a\u4e00\u6761 assignment edge \\(R_j \\rightarrow T_i\\)\uff1b</li> <li>\u8fdb\u7a0b/\u7ebf\u7a0b \\(T_i\\) \u91ca\u653e\u8d44\u6e90 \\(R_j\\) \u65f6\u5019\uff0c\u5c06 assignment edge \u5220\u53bb\uff1b</li> </ol> <p>\u6211\u4eec\u5728\u4e0a\u9762\u4e5f\u8bf4\u4e86\uff1a\u300c\u8be5\u7b97\u6cd5\u53ea\u9002\u7528\u4e8e\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e2d\u90fd\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u60c5\u51b5\u300d\uff0c\u90a3\u4e48\u5982\u4f55\u89e3\u9664\u8fd9\u4e2a\u9650\u5236\u5462\uff1f\u8be5\u95ee\u9898\u6211\u4eec\u65e9\u5728\u8d44\u6e90\u5206\u914d\u56fe\u5c0f\u8282\u5c31\u5df2\u7ecf\u8ba8\u8bba\uff0c\u6211\u4eec\u4f7f\u7528\u5b89\u5168\u72b6\u6001\u4e0e\u4e0d\u5b89\u5168\u72b6\u6001\u6765\u63cf\u8ff0\u4e00\u4e2a\u7ea6\u675f\u8f83\u5f3a\u7684\u3001\u4e0d\u4f1a\u4ea7\u751f\u6b7b\u9501\u7684\u72b6\u6001\u3002</p>"},{"location":"OS/Unit2-Part3/#_9","title":"\u94f6\u884c\u5bb6\u7b97\u6cd5","text":"<p>\u524d\u7f6e\uff1a\u5b89\u5168\u72b6\u6001\u4e0e\u4e0d\u5b89\u5168\u72b6\u6001\uff01</p> <p>\u94f6\u884c\u5bb6\u7b97\u6cd5(Banker's algorithm)\u5f25\u8865\u4e86\u8d44\u6e90\u5206\u914d\u56fe\u7b97\u6cd5\u53ea\u9002\u7528\u4e8e\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e2d\u90fd\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u60c5\u51b5\u7684\u7f3a\u9677\uff0c\u5b83\u652f\u6301\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e0d\u6b62\u4e00\u4e2a\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u6548\u7387\u4e0d\u5982\u5206\u914d\u56fe\u7b97\u6cd5\u3002\u7c7b\u4f3c\u4e8e\u8d44\u6e90\u5206\u914d\u56fe\u7b97\u6cd5\u9700\u8981\u5728\u6700\u5f00\u59cb\u7ed9\u51fa\u6240\u6709 claim edge\uff0c\u94f6\u884c\u5bb6\u7b97\u6cd5\u8981\u6c42\u6bcf\u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u7ed9\u51fa\u6267\u884c\u8fc7\u7a0b\u4e2d\u6240\u9700\u8981\u7684\u5404\u7c7b\u8d44\u6e90\u7684\u6700\u5927\u91cf\uff0c\u540c\u65f6\u7ef4\u62a4\u4e00\u4e9b\u6570\u636e\u4ee5\u52a8\u6001\u5730\u8ba1\u7b97\u5b89\u5168\u72b6\u6001\u3002High level \u5730\u6765\u8bb2\uff0c\u5c31\u662f\u9700\u8981\u52a8\u6001\u5730\u68c0\u6d4b\u67d0\u4e2a\u8d44\u6e90\u7533\u8bf7\u662f\u5426\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u8fdb\u5165\u4e0d\u5b89\u5168\u72b6\u6001\uff0c\u5982\u679c\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u8fdb\u5165\u4e0d\u5b89\u5168\u72b6\u6001\uff0c\u5219\u7b49\u5f85\u8d44\u6e90\u8db3\u591f\u518d\u5206\u914d\u3002</p> <p>\u66f4\u5177\u4f53\u7684\u6765\u8bf4\uff0c\u9700\u8981\u7ef4\u62a4\u8fd9\u4e9b\u4e1c\u897f\uff08\u5047\u8bbe\u95ee\u9898\u4e2d\u6709 n \u4e2a\u8fdb\u7a0b/\u7ebf\u7a0b\u548c m \u79cd\u8d44\u6e90\uff09\uff1a</p> <p>data structure</p> <ul> <li><code>Available[m]</code>: number of available resources of each type.</li> <li><code>Max[n][m]</code>: maximum demand of each thread.</li> <li><code>Allocation[n][m]</code>: number of resources of each type currently allocated to each thread.</li> <li><code>Need[n][m]</code>: remaining resource need of each thread.<ul> <li><code>Need[i][j] = Max[i][j] - Allocation[i][j]</code> always holds true.</li> <li> <p>\u6240\u4ee5\u903b\u8f91\u4e0a\u8fd9\u4e2a\u5f0f\u5b50\u5e94\u5f53\u662f\u5197\u4f59\u7684\uff0c\u4f46\u662f\u53d6\u540d\u6709\u5229\u4e8e\u4e4b\u540e\u7684\u6d41\u7a0b\u9610\u8ff0\uff0c\u6240\u4ee5\u6211\u5728\u8fd9\u91cc\u4fdd\u7559\uff1b</p> </li> </ul> </li> </ul> <p>\u94f6\u884c\u5bb6\u7b97\u6cd5\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f\u5b89\u5168\u7b97\u6cd5(safety algorithm)\u548c\u8d44\u6e90\u8bf7\u6c42\u7b97\u6cd5(resource request algorithm)\u3002\u524d\u8005\u68c0\u6d4b\u5f53\u524d\u72b6\u6001\u662f\u5426\u5904\u4e8e\u4e0d\u5b89\u5168\u72b6\u6001\uff0c\u540e\u8005\u4ee5\u524d\u8005\u4e3a\u57fa\u7840\uff0c\u5224\u65ad\u662f\u5426\u5141\u8bb8\u5f53\u524d\u8d44\u6e90\u8bf7\u6c42\u53d1\u751f\u3002</p>"},{"location":"OS/Unit2-Part3/#_10","title":"\u5b89\u5168\u7b97\u6cd5","text":"<p>\u5b89\u5168\u7b97\u6cd5\u901a\u8fc7\u5bfb\u627e\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u5b89\u5168\u5e8f\u5217\u6765\u5224\u65ad\u5f53\u524d\u72b6\u6001\u662f\u5426\u5904\u4e8e\u5b89\u5168\u72b6\u6001\u3002\u5148\u524d\u5728\u5b89\u5168\u72b6\u6001\u4e0e\u4e0d\u5b89\u5168\u72b6\u6001\u4e00\u8282\u4e2d\u6211\u7559\u4e0b\u8fc7\u4e00\u4e2a\u95ee\u9898\uff1a\u300c\u80fd\u5426\u8d2a\u5fc3\u5730\u6765\u6c42\u7b97\u8fd9\u6837\u4e00\u4e2a\u5e8f\u5217\u5462\u300d\uff0c\u7b54\u6848\u662f\u53ef\u4ee5\uff0c\u6211\u4eec\u4ee5\u4e00\u79cd\u8fd1\u4f3c\u8d2a\u5fc3\u5730\u7b56\u7565\u53bb\u6a21\u62df\u5b89\u5168\u5e8f\u5217\u7684\u8d44\u6e90\u5206\u914d\u8fc7\u7a0b\uff0c\u5c31\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u5b58\u5728\u5b89\u5168\u7b56\u7565\u3002</p> <p>\u56e0\u4e3a\u5bf9\u4e8e\u6240\u6709\u53ef\u4ee5\u4f5c\u4e3a\u5b89\u5168\u72b6\u6001\u4e0b\u4e00\u9879\u7684 \\(T_{i_k}\\)\uff0c\u7531\u4e8e\u6267\u884c\u5b83\u4eec\u540e\uff0c\u7b49\u5230\u8fdb\u7a0b/\u7ebf\u7a0b\u8fd0\u884c\u7ed3\u675f\uff0c\u4f59\u4e0b\u7684\u8d44\u6e90\u53ea\u4f1a\u66f4\u591a\u4e0d\u4f1a\u66f4\u5c11\uff08\u5bf9\u6bd4\u8fd0\u884c\u524d\u540e\uff0c\u4f1a\u591a\u51fa\u6765\u539f\u672c\u5206\u914d\u7ed9\u8fd9\u4e9b\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u90a3\u4e9b\u8d44\u6e90\uff09\uff0c\u56e0\u800c\u53ea\u8981\u7b26\u5408\u6761\u4ef6\uff0c\u5c31\u53ef\u4ee5\u4f5c\u4e3a\u4e0b\u4e00\u9879\uff0c\u6b65\u6b65\u53ef\u884c\u6700\u7ec8\u4e5f\u53ef\u884c\u3002</p> <p>\u8bf7\u4ed4\u7ec6\u601d\u8003\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u5408\u7406\u6027\uff0c\u5c24\u5176\u662f\u6211\u4e3a\u4ec0\u4e48\u5728\u8fd9\u91cc\u63d0\u5230\u4e86\u201c\u8d2a\u5fc3\u201d\uff0c\u6211\u611f\u89c9\u6211\u67e5\u5230\u7684\u8d44\u6599\u51e0\u4e4e\u90fd\u5ffd\u7565\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u5b89\u5168\u7b97\u6cd5\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>algorithm</p> <ol> <li>\u521d\u59cb\u5316\uff1a<ul> <li><code>Work[m]</code> &lt;- <code>Available[m]</code>\uff0c<code>Work[m]</code> \u8868\u793a\u5f53\u524d\u72b6\u6001\u7684\u5269\u4f59\u8d44\u6e90\u91cf\uff1b</li> <li><code>Finish[n]</code> &lt;- <code>false</code>\uff0c\u8868\u793a\u6240\u6709\u8fdb\u7a0b/\u7ebf\u7a0b\u90fd\u8fd8\u6ca1\u8fd0\u884c\uff1b</li> </ul> </li> <li>\u627e\u5230\u4e00\u4e2a <code>i</code> \u4f7f\u5f97\uff1a<ul> <li><code>(Finish[i] == false) &amp;&amp; (Need[i] &lt;= Work)</code>\uff08\u6ce8\u610f\uff0c\u7b2c\u4e8c\u4e2a term \u662f vector \u6bd4\u8f83\uff0c\u8981\u6c42\u6bcf\u4e00\u9879\u90fd\u6ee1\u8db3\uff09\uff0c\u6ee1\u8db3\u8be5\u6761\u4ef6\u8868\u793a\u8be5\u8fdb\u7a0b/\u7ebf\u7a0b\u6240\u9700\u8981\u7684\u8d44\u6e90\u53ef\u4ee5\u88ab\u6ee1\u8db3\uff1b</li> <li>\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a <code>i</code>\uff0c\u5219 goto 3.\uff1b</li> <li>\u5982\u679c\u6709\u8fd9\u4e2a <code>i</code>\uff0c\u5219\u66f4\u65b0\u72b6\u6001\uff1a<ul> <li><code>Finish[i]</code> &lt;- <code>true</code>\uff0c\u8868\u793a\u8be5\u8fdb\u7a0b/\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\uff1b</li> <li><code>Work</code> &lt;- <code>Work + Allocation[i]</code>\uff0c\u8868\u793a\u8fdb\u7a0b/\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\u91ca\u653e\u8d44\u6e90\uff1b</li> <li>repeat 2.\uff1b</li> </ul> </li> </ul> </li> <li>\u5982\u679c\u6240\u6709\u8fdb\u7a0b/\u7ebf\u7a0b\u90fd\u6ee1\u8db3 <code>Finish[i] == true</code>\uff0c\u5219\u7cfb\u7edf\u5904\u4e8e\u5b89\u5168\u72b6\u6001\uff0c\u5426\u5219\u7cfb\u7edf\u5904\u4e8e\u4e0d\u5b89\u5168\u72b6\u6001\uff1b</li> </ol>"},{"location":"OS/Unit2-Part3/#_11","title":"\u8d44\u6e90\u8bf7\u6c42\u7b97\u6cd5","text":"<p>\u6709\u4e86\u5b89\u5168\u7b97\u6cd5\u4f5c\u4e3a\u57fa\u7840\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u5b83\u7684\u57fa\u7840\u4e0a\uff0c\u5224\u65ad\u67d0\u4e2a\u8d44\u6e90\u8bf7\u6c42\u662f\u5426\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u8fdb\u5165\u4e0d\u5b89\u5168\u72b6\u6001\uff0c\u8fdb\u800c\u5f97\u5230\u5b8c\u6574\u7684\u94f6\u884c\u5bb6\u7b97\u6cd5\u4e86\u3002</p> <p>\u5b89\u5168\u7b97\u6cd5\u901a\u8fc7\u6a21\u62df\u7684\u65b9\u5f0f\u5224\u65ad\u4e00\u4e2a\u72b6\u6001\u662f\u4e0d\u662f\u5b89\u5168\u72b6\u6001\uff0c\u800c\u8d44\u6e90\u8bf7\u6c42\u7b97\u6cd5\u5219\u662f\u8d1f\u8d23\u7ef4\u62a4\u8fd9\u4e2a\u201c\u72b6\u6001\u201d\uff0c\u5e76\u6839\u636e\u5b89\u5168\u7b97\u6cd5\u8fd4\u56de\u7684\u7ed3\u679c\u6765\u5224\u65ad\u67d0\u4e2a\u8bf7\u6c42\u662f\u5426\u5e94\u5f53\u88ab\u63a5\u53d7\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u8d44\u6e90\u8bf7\u6c42\u7b97\u6cd5\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>algorithm</p> <ol> <li>\u7528 <code>Request[n][m]</code> \u6765\u7ef4\u62a4\u8fdb\u7a0b/\u7ebf\u7a0b\u60f3\u8981\u8bf7\u6c42\u7684\u8d44\u6e90\u7684\u6570\u91cf\uff1b</li> <li>\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e2d\uff0c\u5982\u679c <code>Request[i] &lt;= Need[i]</code>\uff08\u6ce8\u610f\u5411\u91cf\u6bd4\u8f83\uff09\uff0c\u5219\u7ee7\u7eed\uff1b\u5426\u5219\u629b\u51fa\u5f02\u5e38\uff0c\u56e0\u4e3a\u6b64\u65f6\u5b83\u8bf7\u6c42\u7684\u91cf\u8d85\u8fc7\u4e86\u5b83\u9884\u671f\u9700\u8981\u7684\u8d44\u6e90\u7684\u6700\u5927\u91cf\uff1b</li> <li>\u5982\u679c <code>Request[i] &lt;= Available</code>\uff0c\u8bf4\u660e\u8d44\u6e90\u8db3\u591f\uff0c\u7ee7\u7eed\uff1b\u5426\u5219\uff0c\u8fdb\u7a0b/\u7ebf\u7a0b\u5fc5\u987b\u7b49\u5f85\u8db3\u591f\u7684\u8d44\u6e90\uff1b</li> <li>\u5047\u8bbe\u7cfb\u7edf\u5206\u914d\u4e86\u8d44\u6e90\uff0c\u5219\u9700\u8981\u66f4\u65b0\u6a21\u62df\u72b6\u6001\uff08\u6b64\u65f6\u8d44\u6e90\u8fd8\u672a\u5b9e\u9645\u5206\u914d\uff01\u53ea\u662f\u4e3a\u4e86\u4ece\u6570\u503c\u4e0a\u6d4b\u8bd5\u662f\u5426\u5b89\u5168\u800c\u4e34\u65f6\u6784\u9020\u7684\u865a\u62df\u5c40\u9762\uff01\uff09\uff1a<ul> <li><code>Available</code> &lt;- <code>Available - Request[i]</code>\uff0c\u5373\u6a21\u62df\u5269\u4f59\u8d44\u6e90\u91cf\uff1b</li> <li><code>Allocation[i]</code> &lt;- <code>Allocation[i] + Request[i]</code>\uff0c\u5373\u6a21\u62df\u5206\u914d\u5f97\u5230\u7684\u8d44\u6e90\uff1b</li> <li><code>Need[i]</code> &lt;- <code>Need[i]</code> - <code>Request[i]</code>\uff0c\u5373\u6a21\u62df\u9884\u671f\u9700\u6c42\u91cf\uff1b</li> </ul> </li> <li>\u4f7f\u7528\u5b89\u5168\u7b97\u6cd5\u5224\u65ad\uff1a<ul> <li>\u5982\u679c\u5f53\u524d\u72b6\u6001\u662f\u5b89\u5168\u7684\uff0c\u5219\u8bf7\u6c42\u88ab\u63a5\u53d7\uff1b</li> <li>\u5982\u679c\u5f53\u524d\u72b6\u6001\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u8bf7\u6c42\u4e0d\u88ab\u5141\u8bb8\uff0c\u540c\u65f6\u9700\u8981\u5c06\u8fd9\u4e9b\u77e9\u9635\u56de\u6eda\u5230\u6a21\u62df\u4e4b\u524d\u7684\u72b6\u6001[^3]\uff1b</li> </ul> </li> </ol> <p>Limitations</p> <p>Like the other algorithms, the Banker's algorithm has some limitations when implemented. </p> <p>Specifically, it needs to know how much of each resource a process could possibly request. In most systems, this information is unavailable, making it impossible to implement the Banker's algorithm. </p> <p>Also, it is unrealistic to assume that the number of processes is static since in most systems the number of processes varies dynamically. </p> <p>Moreover, the requirement that a process will eventually release all its resources (when the process terminates) is sufficient for the correctness of the algorithm, however it is not sufficient for a practical system. Waiting for hours (or even days) for resources to be released is usually not acceptable.</p> <p>From Banker's algorithm | Wikipedia.</p>"},{"location":"OS/Unit2-Part3/#_12","title":"\u6b7b\u9501\u68c0\u6d4b","text":"<p>\u6b7b\u9501\u68c0\u6d4b(deadlock detection)\u548c\u6b7b\u9501\u89e3\u9664(deadlock recovery)\u642d\u914d\u4f7f\u7528\uff0c\u5176\u6838\u5fc3\u601d\u8def\u662f\u4e0d\u5bf9\u8d44\u6e90\u8bf7\u6c42\u505a\u8fc7\u591a\u7ea6\u675f\uff0c\u800c\u662f\u5728\u68c0\u6d4b\u5230\u7cfb\u7edf\u4e2d\u5b58\u5728\u6b7b\u9501\u65f6\uff0c\u53bb\u5904\u7406\u6b7b\u9501\u3002\u5176\u4e2d\u7684\u7b2c\u4e00\u6b65\u5c31\u662f\u68c0\u6d4b\u5230\u6b7b\u9501\u3002</p>"},{"location":"OS/Unit2-Part3/#_13","title":"\u9762\u5411\u5355\u5b9e\u4f8b\u8d44\u6e90","text":"<p>\u7b49\u5f85\u56fe(wait-for graph)\u662f\u8d44\u6e90\u5206\u914d\u56fe\u7684\u5316\u7b80\uff0c\u8be5\u7b97\u6cd5\u53ea\u80fd\u89e3\u51b3\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u60c5\u51b5\u3002</p> <p>\u5728\u8d44\u6e90\u5206\u914d\u56fe\u4e00\u8282\u4e2d\u6211\u4eec\u77e5\u9053\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u60c5\u51b5\uff0c\u53ea\u8981\u6709\u73af\u5c31\u4f1a\u6709\u6b7b\u9501\uff0c\u800c\u53ea\u8981\u80fd\u68c0\u6d4b\u8fd9\u4e2a\u73af\uff0c\u5c31\u80fd\u68c0\u6d4b\u6b7b\u9501\u3002\u800c\u5b9e\u9645\u7684\u8d44\u6e90\u5206\u914d\u56fe\u4e2d\u8d44\u6e90\u548c\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u8282\u70b9\u4ece\u662f\u6210\u5bf9\u51fa\u73b0\u5728\u73af\u4e2d\uff0c\u800c wait-for graph \u5219\u662f\u6293\u4f4f\u4e3b\u8981\u77db\u76fe\uff0c\u53ea\u4fdd\u7559\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u8282\u70b9\uff08\u8bf7\u8bfb\u8005\u601d\u8003\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u8fd9\u6837\uff09\u4ee5\u51cf\u5c0f\u70b9\u7684\u6570\u91cf\uff0c\u63d0\u9ad8\u6548\u7387\u3002</p> <p>\u6211\u4eec\u5c06\u8d44\u6e90\u5206\u914d\u56fe\u4e00\u8282\u4e2d\u7684\u8d44\u6e90\u5206\u914d\u56fe\u6539\u4e3a\u7b49\u5f85\u56fe\uff0c\u5373\u4e3a\uff1a</p> <p> </p> <p>\u901a\u8fc7\u52a8\u6001\u5730\u7ef4\u62a4\u8fd9\u4e2a wait-for graph \u548c\u5b9a\u671f\u8c03\u7528\u4e00\u4e2a\u73af\u68c0\u6d4b\u7b97\u6cd5\uff0c\u6765\u5b9e\u73b0\u6b7b\u9501\u68c0\u6d4b\u3002</p> <p>\u663e\u800c\u6613\u89c1\u7684\uff0c\u5c31\u7b97\u629b\u5f00\u5b83\u53ea\u652f\u6301\u6bcf\u4e2a\u8d44\u6e90\u7c7b\u522b\u4ec5\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7684\u7f3a\u70b9\uff0c\u9891\u7e41\u5730\u7ef4\u62a4\u56fe\u548c\u5b9a\u671f\u8c03\u7528\u73af\u68c0\u6d4b\u7b97\u6cd5\uff0c\u90fd\u4f1a\u5e26\u6765\u8f83\u5927\u7684\u5f00\u9500\u3002\u6240\u4ee5\uff0c\u8be5\u65b9\u6cd5\u5176\u5b9e\u8868\u73b0\u5e76\u4e0d\u7406\u60f3\u3002</p>"},{"location":"OS/Unit2-Part3/#_14","title":"\u9762\u5411\u591a\u5b9e\u4f8b\u8d44\u6e90","text":"<p>\u4ece\u5355\u5b9e\u4f8b\u5411\u591a\u5b9e\u4f8b\u7684\u8fc1\u79fb\u601d\u8def\u548c\u6b7b\u9501\u907f\u514d\u4e2d\u4f7f\u7528\u7684\u8fc1\u79fb\u601d\u8def\u662f\u7c7b\u4f3c\u7684\uff0c\u4f7f\u7528\u5b89\u5168\u72b6\u6001\u6765\u5224\u65ad\u800c\u975e\u627e\u73af\u3002\u56e0\u800c\u8fd9\u4e2a\u7b97\u6cd5\u7684\u5b9e\u73b0\u548c\u94f6\u884c\u5bb6\u7b97\u6cd5\u7684\u5b9e\u73b0\u4e5f\u662f\u7c7b\u4f3c\u7684\uff08\u4f46\u662f\u6709\u4e00\u5b9a\u533a\u522b\uff0c\u53c2\u8003\u4e66\u672c P339\uff09\uff0cjjm \u8868\u793a\u4e00\u822c\u53ea\u8003\u94f6\u884c\u5bb6\u7b97\u6cd5\uff0c\u6240\u4ee5\u6211\u5728\u8fd9\u91cc\u4e5f\u4e0d\u8bb2\u8fd9\u4e2a\u7b97\u6cd5\u4e86\u3002</p>"},{"location":"OS/Unit2-Part3/#_15","title":"\u6b7b\u9501\u89e3\u9664","text":"<p>\u6b7b\u9501\u89e3\u9664(deadlock recovery)\u867d\u7136\u662f \"recovery\"\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u662f\u7834\u574f\u6b7b\u9501\u800c\u5e76\u6ca1\u6709\u6062\u590d\u5230\u4e00\u4e2a\u6b7b\u9501\u4e0d\u5b58\u5728\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u7ffb\u8bd1\u4e3a\u89e3\u9664\u3002\u5bf9\u4e8e\u5df2\u7ecf\u4ea7\u751f\u7684\u6b7b\u9501\uff0c\u81f3\u5c11\u5f97\u6b7b\u4e00\u4e2a\uff0c\u6211\u4eec\u9700\u8981\u4f5c\u51fa\u51b3\u65ad\u3002\u4e66\u672c\u4e2d\u63d0\u5230\u4e86\u7ec8\u6b62\u548c\u8d44\u6e90\u62a2\u5360\u4e24\u79cd\u65b9\u6cd5\uff0c\u4f46\u6211\u8ba4\u4e3a\u672c\u8d28\u4e0a\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u5e76\u5217\u5730\u7ed9\u51fa\uff1a</p> <ol> <li>\u90fd\u522b\u6d3b\uff0c\u6740\u6b7b\u6240\u6709\u6b7b\u9501\u4e2d\u7684\u8fdb\u7a0b/\u7ebf\u7a0b\uff1b<ul> <li>\u5f00\u9500\u5f88\u5927\uff0c\u56e0\u4e3a\u6240\u6709\u8fd9\u4e9b\u5de5\u4f5c\u90fd\u76f8\u5f53\u4e8e\u767d\u8d39\u4e86\uff0c\u800c\u4e14\u5e76\u4e0d\u662f\u968f\u968f\u4fbf\u4fbf\u5c31\u80fd\u6740\u7684\uff1b</li> </ul> </li> <li>\u4e00\u4e2a\u4e00\u4e2a\u6740\uff0c\u6740\u5230\u6ca1\u6709\u6b7b\u9501\uff1b<ul> <li>\u4ee5\u7279\u5b9a\u987a\u5e8f\u6740\u8fd9\u4e9b\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u4f18\u5316\u8868\u73b0\uff0c\u4f8b\u5982\u6309\u7167\u4f18\u5148\u7ea7\u4ece\u4f4e\u5230\u9ad8\u6740\uff1b </li> </ul> </li> <li>\u7559\u6d3b\u547d\uff0c\u4f46\u662f\u9700\u8981\u56de\u6eda\u90e8\u5206\u8fdb\u7a0b\uff0c\u5f3a\u884c\u62a2\u5360\u5360\u6709\u7684\u8d44\u6e90\uff1b<ul> <li>\u5f88\u96be\u754c\u5b9a\u5e94\u8be5\u56de\u6eda\u5230\u54ea\u91cc\uff0c\u56de\u6eda\u4e5f\u96be\u5b9e\u73b0\uff0c\u4e3a\u4e86\u56de\u6eda\u4e5f\u9700\u8981\u5b58\u50a8\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u5f00\u9500\u5f88\u5927\uff1b</li> <li>\u53c8\u770b\u5230\u62a2\u5360\u8fd9\u4e24\u4e2a\u5b57\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e5f\u4f1a\u6709\u9965\u997f\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6cd5\u4e5f\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u901a\u8fc7\u8003\u8651\u4f18\u5148\u7ea7\uff0c\u5e76\u5c06\u88ab\u62a2\u5360\uff08\u88ab\u8feb\u56de\u6eda\uff09\u7684\u6b21\u6570\u7eb3\u5165\u4f18\u5148\u7ea7\u7684\u8003\u8651\u8303\u7574\u3002</li> </ul> </li> </ol> <p>[^1]: What's the difference between deadlock and livelock? [^2]: Deadlock Prevention \u4e00\u6587\u4e2d\u63d0\u5230\u4e86\u4f7f\u7528\u5047\u8131\u673a(spooling)\u7684\u65b9\u6cd5\u6765\u89e3\u9664\u6253\u5370\u673a\u8d44\u6e90\u7684\u4e92\u65a5\u6027\u3002 [^3]: Banker's Algorithm in Operating System (OS) \u4e00\u6587\u4e2d\u63d0\u5230\u4e86\u8981\u6062\u590d\u77e9\u9635\u72b6\u6001\uff0c\u4e66\u4e0a\u8c8c\u4f3c\u6ca1\u5199\u8fd9\u4e2a\u3002</p>"},{"location":"OS/Unit3-Part1/","title":"U3 Part 1: \u5185\u5b58\u8bbe\u8ba1 | Memory Design","text":"<p>\u5bfc\u8bfb</p> <p>\u5185\u5b58\u662f\u8ba1\u7b97\u673a\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u4ef6\u4e4b\u4e00\uff0c\u5728 Von Neumann \u67b6\u6784\u4e2d\uff0c\u5185\u5b58\u662f\u7a0b\u5e8f\u548c\u6570\u636e\u7684\u8f7d\u4f53\uff0c\u4e5f\u662f CPU \u8bbf\u95ee\u6570\u636e\u7684\u91cd\u8981\u9014\u5f84\uff08CPU \u80fd\u591f\u76f4\u63a5\u8bbf\u95ee\u7684\u5b58\u50a8\u7ed3\u6784\u4e00\u822c\u53ea\u6709\u5bc4\u5b58\u5668\u548c\u5185\u5b58\uff0c\u4ee5\u53ca\u4f5c\u4e3a\u4e2d\u4ecb\u7684\u7f13\u5b58\uff09\u3002\u6b64\u5916\uff0cCPU \u6267\u884c\u7684\u6307\u4ee4(instructions)\uff0c\u53ea\u6709\u5728\u7269\u7406\u5185\u5b58\u4e2d\u65f6\u624d\u80fd\u88ab\u6267\u884c\u3002</p> <p>\u800c\u6211\u4eec\u77e5\u9053\uff0c\u5185\u5b58 I/O \u901a\u5e38\u662f\u6bd4\u8f83\u6162\u7684\uff0c\u5982\u679c\u518d\u8fdb\u4e00\u6b65\u5bf9\u5185\u5b58\u4e4b\u5916\u7684\u5b58\u50a8\u8bbe\u5907\u505a I/O\uff08\u5185\u5b58\u6bd5\u7adf\u4e5f\u662f\u6709\u9650\u7684\uff09\uff0c\u5219\u4f1a\u66f4\u6162\u3002\u56e0\u6b64\uff0c\u5c31\u50cf\u69a8\u5e72 CPU \u7684\u6027\u80fd\u4e00\u6837\uff0c\u6211\u4eec\u4e5f\u8981\u5c3d\u53ef\u80fd\u5730\u5229\u7528\u597d\u5185\u5b58\u3002</p> <p>\u9664\u4e86\u6027\u80fd\uff0c\u5185\u5b58\u8fd8\u9700\u8981\u5b9e\u73b0\u4e00\u4e9b\u4fdd\u62a4\u63aa\u65bd\uff0c\u9632\u6b62\u7a0b\u5e8f\u8d8a\u754c\u8bbf\u95ee\u5185\u5b58\uff0c\u6216\u8005\u7a0b\u5e8f\u4e4b\u95f4\u4e92\u76f8\u5e72\u6270\u3002</p> <p>\u540c\u65f6\uff0c\u7531\u4e8e\u8ba1\u7b97\u673a\u8fd0\u884c\u7a0b\u5e8f\u662f\u4e00\u4e2a\u52a8\u6001\u7684\u8fc7\u7a0b\uff0c\u800c\u6211\u4eec\u4f7f\u7528\u5185\u5b58\u5f80\u5f80\u9700\u8981\u7684\u662f\u8fde\u7eed\u7684\u3001\u5927\u5757\u7684\u5185\u5b58\uff0c\u6240\u4ee5\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5982\u4f55\u4fdd\u8bc1\u5185\u5b58\u7684\u5206\u5e03\u662f\u76f8\u5bf9\u5b8c\u6574\u7684\uff0c\u4e5f\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u95ee\u9898\u3002</p> <p>\u5728\u5f15\u5165\u5e27 &amp; \u9875\u8bbe\u8ba1\u540e\uff0c\u6211\u4eec\u4e0d\u518d\u9700\u8981\u4ee5\u8fdb\u7a0b\u4e3a\u5355\u4f4d\u53bb\u89c2\u5bdf\u5185\u5b58\uff0c\u800c\u662f\u4ee5\u9875\u4e3a\u5355\u4f4d\uff0c\u8fd9\u610f\u5473\u7740\u7c92\u5ea6\u66f4\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u52a0\u7075\u6d3b\u5730\u53bb\u7ba1\u7406\u5185\u5b58\u3002</p> <p>\u5728\u4ea4\u6362\u6280\u672f\u7684\u652f\u6301\u4e0b\uff0c\u4e0d\u662f\u6b63\u5728\u88ab\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u53ef\u4ee5\u5b9e\u9645\u88ab\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u6216\u540e\u5907\u5b58\u50a8\u4e2d\u3002\u66f4\u5177\u4f53\u7684\u6765\u8bf4\uff0c\u6211\u4eec\u4f1a\u5c06\u201c\u6682\u65f6\u7528\u4e0d\u5230\u201d\u7684\u4e1c\u897f\u6682\u653e\u5728\u540e\u5907\u5b58\u50a8\u4e2d\uff0c\u800c\u5728\u9700\u8981\u7684\u65f6\u5019\u5c06\u5b83\u4eec\u6362\u5230\u7269\u7406\u5185\u5b58\u4e2d\u3002\u800c\u5728\u4e0b\u4e00\u8282\uff0c\u6211\u4eec\u8981\u5173\u6ce8\u7684\u91cd\u8981\u95ee\u9898\u5c31\u662f\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5177\u4f53\u5982\u4f55\u6267\u884c\u3001\u5982\u4f55\u4f18\u5316\uff0c\u4e5f\u5c31\u662f\u4ecb\u7ecd demand paging \u7cfb\u7edf\u3002</p>"},{"location":"OS/Unit3-Part1/#_1","title":"\u5185\u5b58\u57fa\u7840\u8bbe\u8ba1","text":""},{"location":"OS/Unit3-Part1/#_2","title":"\u5185\u5b58\u4fdd\u62a4","text":"<p>\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u5728\u5185\u5b58\u4e2d\u90fd\u5e94\u5f53\u6709\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u800c\u5355\u4e2a\u8fdb\u7a0b\u5e94\u5f53\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u800c\u4e0d\u80fd\u8bbf\u95ee\u5176\u4ed6\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u3002\u8fd9\u5c31\u662f\u5185\u5b58\u4fdd\u62a4\u7684\u57fa\u672c\u8981\u6c42\u3002</p> <p>\u6211\u4eec\u901a\u8fc7\u5f15\u5165 base \u548c limit \u4e24\u4e2a\u5bc4\u5b58\u5668\u6765\u5b9e\u73b0\u6846\u5b9a\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5f53\u524d\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u59cb\u4e8e base \u5bc4\u5b58\u5668\u4e2d\u5b58\u50a8\u7684\u5730\u5740\uff0c\u7ec8\u4e8e base + limit \u5bf9\u5e94\u7684\u5730\u5740\uff0c\u5373\uff1a</p>  ![](img/27.png)  A base and a limit register define a logical address space. (left) Hardware address protection with base and limit registers. (right)  <p>\u4e24\u4e2a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\u53ea\u80fd\u7531\u5185\u6838\u901a\u8fc7\u7279\u5b9a\u7684\u7279\u6743\u6307\u4ee4\u6765\u4fee\u6539\u3002\u800c\u5185\u5b58\u7684\u4fdd\u62a4\uff0c\u901a\u8fc7\u5185\u5b58\u7ba1\u7406\u5355\u5143(memory management unit, MMU)\u6765\u5b9e\u73b0\uff0cMMU \u4f1a\u5728\u6bcf\u6b21\u8bbf\u95ee\u5185\u5b58\u65f6\uff0c\u68c0\u67e5\u8bbf\u95ee\u7684\u5730\u5740\u662f\u5426\u5728 base \u548c limit \u5bc4\u5b58\u5668\u6240\u5b9a\u4e49\u7684\u8303\u56f4\u5185\uff0c\u5982\u679c\u4e0d\u5728\uff0c\u5219\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5f02\u5e38\uff0c\u4e2d\u65ad\u7a0b\u5e8f\u7684\u6267\u884c\u3002</p>"},{"location":"OS/Unit3-Part1/#_3","title":"\u5730\u5740\u7ed1\u5b9a","text":"<p>\u6211\u4eec\u5728\u603b\u89c8#\u94fe\u63a5\u5668\u548c\u88c5\u8f7d\u5668\u4e2d\u63d0\u5230\u8fc7\uff0c\u9759\u6001\u7684\u4ee3\u7801\u7a0b\u5e8f\u6210\u4e3a\u52a8\u6001\u7684\u8fdb\u7a0b\uff0c\u53ef\u80fd\u4f1a\u9700\u8981\u56fe\u4e2d\u8fd9\u4e48\u51e0\u6b65\u3002</p> <p> </p> <p>\u5177\u4f53\u6765\u8bf4\u6709\u4e09\u4e2a\u9636\u6bb5\uff1a\u7f16\u8bd1\u65f6\u95f4(compile time)\uff0c\u88c5\u8f7d\u65f6\u95f4(load time)\u548c\u6267\u884c\u65f6\u95f4(execution time)\u3002\u800c\u5185\u5b58\u4e5f\u5206\u4e09\u79cd\uff1a\u7b26\u53f7\u5730\u5740(symbolic addresses)\uff0c\u53ef\u91cd\u5b9a\u4f4d\u5730\u5740(relocatable addresses)\uff08\u7c7b\u4f3c\u4e8e\u4e00\u79cd\u76f8\u5bf9\u91cf\uff09\u548c\u7edd\u5bf9\u5730\u5740(absolute addresses)\u3002</p> <ul> <li>\u901a\u5e38\u6765\u8bf4\uff0c\u5728 compile time\uff0ccompiler \u4f1a\u5c06\u4ee3\u7801\u4e2d\u7684 symbol \u8f6c\u4e3a relocatable addresses\uff1b\u800c\u5982\u679c\u5728 compile time \u5c31\u77e5\u9053\u4e86\u8fdb\u7a0b\u6700\u7ec8\u4f1a\u88ab\u5b89\u7f6e\u5728\u4f55\u5904\uff0c\u90a3\u4e48\u5728 compile time \u5c31\u5c06 symbol \u8f6c\u4e3a absolute addresses \u4e5f\u662f\u53ef\u80fd\u7684\uff0c\u53ea\u4e0d\u8fc7\u5982\u679c\u6b64\u65f6\u8d77\u59cb\u5730\u5740\u53d1\u751f\u6539\u53d8\uff0c\u5c31\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u3002</li> <li>\u800c\u4e00\u822c\u5728 load time\uff0crelocatable addresses \u4f1a\u8f6c\u4e3a absolute addresses\uff0c\u5f53\u8fdb\u7a0b\u8d77\u59cb\u5730\u5740\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u91cd\u65b0\u88c5\u8f7d\u5373\u53ef\u3002</li> <li>\u5982\u679c\u8fdb\u7a0b\u5728 execution time \u65f6\uff0c\u5141\u8bb8\u88ab\u79fb\u52a8\uff0c\u90a3\u4e48\u53ef\u80fd\u4ece relocatable addresses \u8f6c\u4e3a absolute addresses \u8fd9\u4e00\u6b65\u5c31\u9700\u8981\u5ef6\u8fdf\u5230 execution time \u6765\u6267\u884c\u3002\u7edd\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f7f\u7528\u8fd9\u79cd\u65b9\u6848\u3002</li> </ul>"},{"location":"OS/Unit3-Part1/#_4","title":"\u52a8\u6001\u88c5\u8f7d","text":"<p>\u7531\u4e8e\u5f15\u5165\u4e86\u591a\u9053\u6280\u672f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u5b58\u4e2d\u53ef\u80fd\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u8fdb\u7a0b\u3002\u4e3a\u4e86\u66f4\u52a0\u7075\u6d3b\u5730\u4f7f\u7528\u5185\u5b58\u8d44\u6e90\uff0c\u6211\u4eec\u5f15\u5165\u52a8\u6001\u88c5\u8f7d(dynamic loading)\u673a\u5236\u3002</p> <p>\u52a8\u6001\u88c5\u8f7d\u6307\u7684\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u4f8b\u7a0b\u8fd8\u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u90a3\u4e48\u5b83\u4f1a\u4ee5\u53ef\u91cd\u5b9a\u4f4d\u88c5\u8f7d\u683c\u5f0f(relocatable load format)[^5]\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\uff1b\u5f53\u5b83\u88ab\u8c03\u7528\u65f6\uff0c\u5c31\u52a8\u6001\u5730\u88ab\u88c5\u8f7d\u5230\u5185\u5b58\u4e2d\u3002\u5373\uff0c\u4f8b\u7a0b\u53ea\u6709\u5728\u9700\u8981\u7684\u65f6\u5019\u624d\u88ab\u8f7d\u5165\u5185\u5b58\u3002\u5bf9\u4e8e\u5927\u91cf\u4f46\u4e0d\u7ecf\u5e38\u9700\u8981\u8bbf\u95ee\u7684\u4ee3\u7801\u7247\u6bb5\uff08\u4f8b\u5982\u9519\u8bef\u5904\u7406\u4ee3\u7801\uff09\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8282\u7701\u5927\u91cf\u7684\u5185\u5b58\u7a7a\u95f4\u2014\u2014\u8fd9\u79cd\u53ea\u6709\u5076\u5c14\u4f1a\u88ab\u8bbf\u95ee\u7684\u4ee3\u7801\u4e5f\u4e0d\u5e94\u5f53\u957f\u4e45\u5730\u5360\u6709\u5185\u5b58\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u52a8\u6001\u88c5\u8f7d\u5e76\u4e0d\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u7684\u652f\u6301\uff0c\u800c\u662f\u7531\u5f00\u53d1\u8005\u6765\u8d1f\u8d23\u5b9e\u73b0\u3002</p>"},{"location":"OS/Unit3-Part1/#_5","title":"\u52a8\u6001\u94fe\u63a5\u548c\u5171\u4eab\u5e93","text":"<p>\u6211\u4eec\u5728\u603b\u89c8#\u94fe\u63a5\u5668\u548c\u88c5\u8f7d\u5668\u4e2d\u5df2\u7ecf\u8c08\u8bba\u8fc7\u52a8\u6001\u94fe\u63a5\u4e86\u3002\u800c\u80fd\u88ab\u52a8\u6001\u94fe\u63a5\u7684\u5e93\u5c31\u88ab\u79f0\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93(dynamically linked libraries, DDLs)\uff0c\u7531\u4e8e\u5b83\u4eec\u53ef\u4ee5\u88ab\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\uff0c\u6240\u4ee5\u4e5f\u88ab\u79f0\u4e3a\u5171\u4eab\u5e93(shared libraries)\u3002</p> <p>\u533a\u522b\u4e8e\u52a8\u6001\u88c5\u8f7d\uff0c\u52a8\u6001\u94fe\u63a5\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u7684\u652f\u6301\u3002</p>"},{"location":"OS/Unit3-Part1/#_6","title":"\u8fde\u7eed\u5206\u914d\u53ca\u5176\u95ee\u9898","text":"<p>\u5305\u62ec\u64cd\u4f5c\u7cfb\u7edf\u672c\u8eab\uff0c\u5185\u5b58\u4e2d\u80fd\u5b58\u4e0b\u591a\u5c11\u4e1c\u897f\uff0c\u51b3\u5b9a\u4e86\u64cd\u4f5c\u7cfb\u7edf\u80fd\u540c\u65f6\u8fd0\u884c\u591a\u5c11\u8fdb\u7a0b\u3002\u800c\u8fdb\u7a0b\u9700\u8981\u7684\u5185\u5b58\u9700\u8981\u662f\u8fde\u7eed\u7684\uff0c\u800c\u5185\u5b58\u7684\u5206\u914d\u4e0e\u91ca\u653e\u53c8\u662f\u4e2a\u52a8\u6001\u7684\u8fc7\u7a0b\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u60f3\u4e00\u4e2a\u529e\u6cd5\u9ad8\u6548\u5730\u5229\u7528\u5185\u5b58\u7a7a\u95f4\u3002</p> <p></p> <p>\u4e3a\u4ec0\u4e48\u8fdb\u7a0b\u6240\u9700\u8981\u7684\u5185\u5b58\u662f\u8fde\u7eed\u7684\uff1f</p> <p>\u8bf7\u8bfb\u8005\u601d\u8003\uff0c\u4e3a\u4ec0\u4e48\u88c5\u8f7d\u8fdb\u7a0b\u6240\u9700\u8981\u7684\u5185\u5b58\u9700\u8981\u662f\u5b8c\u6574\u3001\u8fde\u7eed\u7684\uff0c\u800c\u4e0d\u80fd\u662f\u4e1c\u4e00\u5757\u800c\u897f\u4e00\u5757\u7684\u5462\uff1f</p> <p>\u6216\u8005\u8bf4\uff0c\u5982\u679c\u4f60\u8ba4\u4e3a\u5b83\u53ef\u4ee5\u4e0d\u8fde\u7eed\uff0c\u4e3a\u4e86\u5b9e\u73b0\u8ba9\u5b83\u80fd\u6b63\u5e38\u8fd0\u4f5c\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u54ea\u4e9b\u63aa\u65bd\u5462\uff1f\u4f60\u7684\u8bbe\u8ba1\u76f8\u6bd4\u4f7f\u7528\u6734\u7d20\u7684\u8fde\u7eed\u5185\u5b58\u5206\u914d\uff0c\u6709\u4ec0\u4e48\u4f18\u52bf\u548c\u52a3\u52bf\u5462\uff1f</p> \u63d0\u793a <p>Von Neumann \u67b6\u6784\u4e2d\uff0cCPU \u548c\u5185\u5b58\u662f\u5982\u4f55\u4e92\u52a8\uff0c\u4ece\u800c\u5b9e\u73b0\u5176\u529f\u80fd\u7684\uff1f\u5173\u6ce8\u53d6\u6307\u8fc7\u7a0b\u548c\u6c47\u7f16\u4e2d\u7684\u5730\u5740\u64cd\u4f5c\uff01</p> <ul> <li>\u53c2\u8003\u9605\u8bfb\uff1aWhy does memory necessarily have to be contiguous? If it weren't, wouldn't this solve the issue of memory fragmentation?</li> </ul> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u4e3b\u5b58\u4f1a\u88ab\u5212\u5206\u4e3a\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u4e24\u4e2a\u90e8\u5206\uff0c\u540e\u8005\u7528\u4e8e\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u8f6f\u4ef6\u3002\u4e3b\u6d41\u64cd\u4f5c\u7cfb\u7edf\u503e\u5411\u4e8e\u5c06\u9ad8\u4f4d\u5730\u5740\u5212\u4e3a\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6240\u4ee5\u6211\u4eec\u6b64\u5904\u7684\u8bed\u5883\u4e5f\u4f9d\u7167\u4e3b\u6d41\u8bbe\u8ba1\u3002</p> <p>\u5728\u8fde\u7eed\u5185\u5b58\u5206\u914d(contiguous memory allocation)\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u8ba4\u4e3a\u6240\u6709\u8fdb\u7a0b\u90fd\u88ab\u56ca\u62ec\u5728\u4e00\u6bb5\u5b8c\u6574\u7684\u5185\u5b58\u4e2d\u3002\u800c\u5728\u5185\u5b58\u5206\u914d\u7684\u52a8\u6001\u8fc7\u7a0b\u4e2d\uff0c\u6574\u4e2a\u5185\u5b58\u4e2d\u7a7a\u95f2\u7684\u90e8\u5206\u5c06\u6709\u53ef\u80fd\u88ab\u5206\u914d\u7ed9\u7d22\u53d6\u5185\u5b58\u7684\u8fdb\u7a0b\uff0c\u800c\u88ab\u5206\u914d\u7684\u5185\u5b58\u5728\u91ca\u653e\u4e4b\u524d\u90fd\u4e0d\u80fd\u88ab\u5206\u914d\u7ed9\u5176\u5b83\u8fdb\u7a0b\u3002\u5728\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5185\u5b58\u4f1a\u88ab\u91ca\u653e\uff0c\u5207\u6211\u4eec\u5bf9\u4e8e\u8fdb\u7a0b\u4f55\u65f6\u91ca\u653e\u5185\u5b58\u4e0d\u505a\u5047\u8bbe\u3002</p> <p>\u6700\u7b80\u5355\u7684\u662f\u4e00\u79cd\u53ef\u53d8\u5212\u5206(variable partition)\u7684\u8bbe\u8ba1\uff0c\u5373\u4e0d\u5bf9\u5185\u5b58\u4e2d\u7684\u5212\u5206\u65b9\u5f0f\u505a\u7ea6\u675f\uff0c\u53ea\u8981\u662f\u7a7a\u95f2\u4e14\u8db3\u591f\u5927\u7684\u8fde\u7eed\u5185\u5b58\u533a\u57df\u90fd\u53ef\u4ee5\u88ab\u5206\u914d\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u60f3\u8c61\uff0c\u5728\u5185\u5b58\u88ab\u52a8\u6001\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\uff0c\u539f\u672c\u5b8c\u6574\u7684\u5185\u5b58\u53ef\u80fd\u53d8\u5f97\u652f\u79bb\u7834\u788e\u3002\u5982\u679c\u6211\u4eec\u8bb0\u4e00\u5757\u8fde\u7eed\u7684\u7a7a\u95f2\u5185\u5b58\u4e3a\u4e00\u4e2a hole\uff0c\u5219\u539f\u5148\u53ef\u80fd\u53ea\u6709\u4e00\u4e2a hole\uff0c\u800c\u5728\u957f\u65f6\u95f4\u7684\u8fd0\u884c\u540e\uff0c\u5185\u5b58\u4e2d\u53ef\u80fd\u5b58\u5728\u5927\u91cf\u8f83\u5c0f\u7684\uff0c\u96be\u4ee5\u5229\u7528\u7684 holes\u3002\u8fd9\u5c31\u662f\u5916\u90e8\u788e\u7247(external fragmentation)\uff0c\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u975e\u7a7a\u95f2\u7684\u5185\u5b58\u5212\u5206\u4e4b\u95f4\u90fd\u53ef\u80fd\u6709\u4e00\u5757\u4e0d\u5927\u4e0d\u5c0f\u7684 hole\uff0c\u800c\u8fd9\u4e9b hole \u5355\u72ec\u6765\u770b\u53ef\u80fd\u65e0\u6cd5\u5229\u7528\uff0c\u4f46\u5176\u603b\u548c\u53ef\u80fd\u5e76\u4e0d\u5c0f\uff0c\u8fd9\u662f\u4e2a\u975e\u5e38\u4e25\u91cd\u7684\u95ee\u9898\u3002</p>  ![](img/30.png)  Variable partition. 1 hole to 2 holes.  <p>\u4f46\u662f\u663e\u7136\u6211\u4eec\u4e0d\u80fd\u9891\u7e41\u5730\u8981\u6c42\u64cd\u4f5c\u7cfb\u7edf\u53bb\u91cd\u65b0\u6574\u7406\u5185\u5b58\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u60f3\u529e\u6cd5\u6765\u51cf\u5c11\u5916\u90e8\u788e\u7247\u7684\u4ea7\u751f\u3002\u6211\u4eec\u8003\u8651\u4e09\u79cd\u5206\u914d\u7b56\u7565\uff1a</p> <ul> <li>First Fit</li> <li>Best Fit</li> <li>Worst Fit</li> </ul> <p>\u5173\u4e8e\u8fd9\u4e09\u4e2a\u662f\u4ec0\u4e48\uff0c\u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7 ADS \u7b14\u8bb0\u3002</p> <p>\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0cFF \u548c BF \u7684\u901f\u5ea6\u90fd\u6bd4 WF \u5feb\uff0c\u4f46\u901a\u5e38 FF \u4f1a\u66f4\u5feb\u4e00\u4e9b\uff1b\u800c\u770b\u5185\u5b58\u7684\u5229\u7528\u6548\u7387\uff0c\u4e24\u8005\u5219\u6ca1\u6709\u660e\u663e\u7684\u533a\u522b\uff0c\u4f46\u662f FF \u548c BF \u90fd\u6df1\u53d7\u5916\u90e8\u788e\u7247\u4e4b\u5bb3\u3002</p> <p>\u9664\u4e86 variable partition \u7684\u8bbe\u8ba1\u4ee5\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u522b\u7684\u8bbe\u8ba1\uff0c\u4f8b\u5982\u56fa\u5b9a\u5212\u5206(fixed partition)\uff0c\u5185\u5bb9\u6bd4\u8f83\u7b80\u5355\u6211\u5c31\u4e0d\u4ecb\u7ecd\u4e86\u3002\u8bfb\u8005\u53ef\u4ee5\u901a\u8fc7 xxjj \u7684\u7b14\u8bb0\u6765\u505a\u4e00\u4e9b\u4e86\u89e3\u3002</p> <p>\u5728 fixed partition \u4e2d\uff0c\u8fd8\u4f1a\u4ea7\u751f\u53e6\u5916\u4e00\u79cd\u788e\u7247\uff0c\u53eb\u5185\u90e8\u788e\u7247(internal fragmentation)\uff0c\u5b83\u6307\u7684\u662f\u5728\u7c7b\u4f3c fixed partition \u7684\u7b56\u7565\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7ed9\u8fdb\u7a0b\u7684\u5185\u5b58\u5f80\u5f80\u662f\u6210\u5757\u7684\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u9700\u6c42\u7684\u5206\u914d\u91cf\u5927\u4e8e\u8fdb\u7a0b\u5b9e\u9645\u9700\u6c42\u91cf\uff0c\u800c\u90a3\u4e9b\u88ab\u5206\u914d\u4e86\u4f46\u5b9e\u9645\u95f2\u7f6e\u7684\u5185\u5b58\uff0c\u5c31\u88ab\u79f0\u4e3a\u5185\u90e8\u788e\u7247\u3002\u6211\u4eec\u4e4b\u540e\u4ecb\u7ecd\u7684\u5206\u9875\u6280\u672f\uff0c\u4e5f\u540c\u6837\u4f1a\u4ea7\u751f\u5185\u90e8\u788e\u7247\u3002</p>"},{"location":"OS/Unit3-Part1/#_7","title":"\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740","text":"<p>\u4e3a\u4e86\u8ba9\u5185\u5b58\u5177\u6709\u66f4\u5f3a\u7684\u7075\u6d3b\u6027\uff0c\u6211\u4eec\u533a\u5206\u5185\u5b58\u7684\u7269\u7406\u5730\u5740(physical address)\u548c\u865a\u62df\u5730\u5740(virtual address)\uff0c\u540e\u8005\u4e5f\u53eb\u903b\u8f91\u5730\u5740(logical address)\u3002</p> <p>\u7269\u7406\u5730\u5740\u5b9e\u9645\u5728\u5185\u5b58\u8bbe\u5907\u4e2d\u8fdb\u884c\u5185\u5b58\u5bfb\u5740\uff0c\u4e3b\u8981\u53cd\u5e94\u5185\u5b58\u5728\u786c\u4ef6\u5b9e\u73b0\u4e0a\u7684\u5c5e\u6027\uff1b\u800c CPU \u6240\u4f7f\u7528\u7684\u4e00\u822c\u6307\u7684\u662f\u865a\u62df\u5185\u5b58\uff0c\u4e3b\u8981\u53cd\u5e94\u5185\u5b58\u5728\u903b\u8f91\u4e0a\u7684\u5c5e\u6027\u3002\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u5b58\u5728\u6620\u5c04\u5173\u7cfb\uff0c\u800c\u5b9e\u73b0\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u7684\u786c\u4ef6\uff0c\u662f\u5185\u5b58\u7ba1\u7406\u5355\u5143(memory management unit, MMU)\uff0c\u9664\u4e86\u662f\u5b9e\u73b0\u865a\u62df\u5730\u5740-&gt;\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u5916\uff0cMMU \u8fd8\u8d1f\u8d23\u5185\u5b58\u8bbf\u95ee\u7684\u4fdd\u62a4\u3002\u6211\u4eec\u5728\u4e4b\u540e\u4f1a\u5c06\u4e86\u89e3\u5230\uff0cTBL \u4e5f\u5c5e\u4e8e MMU \u7684\u4e00\u90e8\u5206\u3002</p>  ![](img/29.png){ width=60% }  Dynamic relocation using a relocation register.  <p>\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u7684\u533a\u5206\u8ba9\u4f7f\u5f97\u7528\u6237\u7a0b\u5e8f\u4e0d\u518d\u9700\u8981\uff08\u4e5f\u4e0d\u88ab\u5141\u8bb8\uff09\u5173\u6ce8\u7269\u7406\u5730\u5740\u3002\u6b64\u5916\uff0c\u901a\u8fc7\u5229\u7528\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u7684\u7075\u6d3b\u6620\u5c04\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5206\u9875\u6765\u5b9e\u73b0\u826f\u597d\u7684\u5185\u5b58\u7ba1\u7406\u3002</p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u8bf7\u8bfb\u8005\u5c1d\u8bd5\u8bbe\u60f3\uff0c\u5229\u7528\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u6211\u4eec\u80fd\u505a\u5230\u54ea\u4e9b\u4e8b\uff1f</p> \u63d0\u793a <ol> <li>\u8003\u8651\u6570\u5b66\u4e0a\u5982\u4f55\u5206\u7c7b\u201c\u51fd\u6570\u6620\u5c04\u201d\uff1b</li> <li>\u8003\u8651\u5982\u4f55\u5b9e\u73b0\u5730\u5740\u8fde\u7eed\uff1b</li> </ol> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u8bf7\u8bfb\u8005\u601d\u8003\uff0c\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u7684\u957f\u5ea6\u9700\u8981\u4e00\u6837\u5417\uff1f</p> <p> \u4e00\u4e2a\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4(virtual address space)\uff0c\u6307\u7684\u662f\u5728\u865a\u62df\u5185\u5b58\u7684\u8bed\u5883\u4e0b\uff0c\u8fdb\u7a0b\u7684\u5185\u5b58\u7ed3\u6784\u3002\u901a\u5e38\u8fdb\u7a0b\u5728\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u7684\u5927\u81f4\u7ed3\u6784\u548c\u5730\u5740\u5206\u5e03\u90fd\u662f\u76f8\u540c\u7684\uff0c\u4f8b\u5982\u53ef\u80fd\u90fd\u662f\u4ece 0 \u5730\u5740\u5f00\u59cb\u653e text \u6bb5\uff0c\u6808\u5e95\u4e00\u822c\u90fd\u5728\u672b\u5c3e\u7b49\u2014\u2014\u8fd9\u5c31\u610f\u5473\u7740\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5e94\u5f53\u662f\u4e92\u4e0d\u76f8\u5173\u7684\uff0c\u7531\u5c06\u82e5\u5e72\u4e92\u76f8\u9694\u79bb\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6620\u5c04\u5230\u5404\u81ea\u7684\u7269\u7406\u5730\u5740\u8fd9\u4e2a\u4efb\u52a1\uff0c\u5219\u7531 MMU \u5b8c\u6210\u3002\uff08\u5728\u6211\u4eec\u4e4b\u540e\u4ecb\u7ecd\u4e86\u9875\u8868\u540e\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5e94\u5f53\u6709\u81ea\u5df1\u7684\u9875\u8868\u3002\uff09</p>"},{"location":"OS/Unit3-Part1/#_8","title":"\u5206\u9875\u6280\u672f","text":"<p>\u5206\u9875\u6280\u672f\u60f3\u8981\u89e3\u51b3\u7684\u95ee\u9898\u662f\u51cf\u8f7b\u8fdb\u7a0b\u201c\u5fc5\u987b\u8981\u4f7f\u7528\u8fde\u7eed\u5185\u5b58\u201d\u8fd9\u4e00\u9650\u5236\u3002\u6211\u4eec\u5728\u524d\u9762\u7684\u601d\u8003\u9898\u4e2d\u5df2\u7ecf\u63d0\u5230\uff0c\u9700\u8981\u4f7f\u7528\u8fde\u7eed\u5185\u5b58\u662f\u9700\u8981\u4e00\u79cd\u903b\u8f91\u4e0a\u7684\u8fde\u7eed\uff0c\u56e0\u6b64\uff0c\u5728\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u7684\u8bed\u5883\u4e0b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4fdd\u8bc1\u865a\u62df\u5730\u5740\u662f\u8fde\u7eed\u7684\u5373\u53ef\u3002\u5f53\u7136\uff0c\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u7269\u7406\u5730\u5740\u7684\u8fde\u7eed\u5c31\u662f\u6beb\u65e0\u610f\u4e49\u7684\u4e86\uff0c\u7269\u7406\u5730\u5740\u7684\u8fde\u7eed\u662f\u5b9e\u9645\u4e0a\u63d0\u4f9b\u9ad8\u6548\u5185\u5b58\u8bbf\u95ee\u7684\u57fa\u7840\u3002</p> <p>\u663e\u7136\u8fd9\u91cc\u7684 \u201cpage\u201d \u662f\u57fa\u4e8e Definition 2\u3002</p>"},{"location":"OS/Unit3-Part1/#_9","title":"\u57fa\u672c\u8bbe\u8ba1","text":"<p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u6211\u4eec\u4e0d\u518d\u4e25\u683c\u9700\u8981\u7269\u7406\u5730\u5740\u4e5f\u662f\u5b8c\u6574\u7684\u3001\u5927\u5757\u7684\u3001\u5b8c\u5168\u8fde\u7eed\u7684\u4e86\u3002\u542c\u8d77\u6765 external fragmentation \u7684\u95ee\u9898\u5df2\u7ecf\u89e3\u51b3\u4e86\uff0c\u8c8c\u4f3c\u6211\u4eec\u53ea\u9700\u8981\u6bcf\u6b21\u4ece\u91cc\u9762\u6162\u6162\u6361\u5783\u573e\uff0c\u51d1\u51fa\u4e00\u6574\u5757\u5c31\u884c\u4e86\u2026\u2026</p> <p>\u563f\uff01\u60f3\u7684\u6709\u70b9\u592a\u7f8e\u4e86\uff01\u867d\u7136\u903b\u8f91\u4e0a\u7269\u7406\u5730\u5740\u4e0d\u9700\u8981\u8fde\u7eed\uff0c\u4f46\u8fc7\u4e8e\u7a00\u788e\u7684\u7269\u7406\u5730\u5740\u4f1a\u5bfc\u81f4\u5185\u5b58\u8bbf\u95ee\u7f13\u6162\uff0c\u6361\u5783\u573e\u51d1\u51fa\u6765\u7684\u865a\u62df\u5185\u5b58\u5757\u4e5f\u50cf\u5783\u573e\u4e00\u6837\u98df\u4e4b\u65e0\u5473\u3002\u5185\u5b58\u6620\u5c04\u5173\u7cfb\u8fc7\u4e8e\u7410\u788e\uff0c\u867d\u7136\u7075\u6d3b\u6027\u4e0a\u5347\u4f46\u6548\u7387\u4e0b\u964d\uff1b\u5982\u679c\u6620\u5c04\u5173\u7cfb\u8f83\u4e3a\u5927\u5757\u3001\u5b8c\u6574\uff0c\u90a3\u4e48\u6548\u7387\u4e0a\u5347\u4f46\u7075\u6d3b\u6027\u4e0b\u964d\u3002\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u4e2d\u5eb8\u7684\u65b9\u6848\u3002</p>"},{"location":"OS/Unit3-Part1/#_10","title":"\u5e27 &amp; \u9875","text":"<p>\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u4e24\u8005\u7684\u4f18\u70b9\u5408\u5e76\uff0c\u6211\u4eec\u5c06\u7269\u7406\u5185\u5b58\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\uff0c\u79f0\u4e3a\u5e27(frames)\uff08\u7c7b\u4f3c\u4e8e fixed partition\uff09\uff0c\u6bcf\u4e2a\u5e27\u5bf9\u5e94\u865a\u62df\u5730\u5740\u4e2d\u7b49\u5927\u7684\u4e00\u5757\u9875(pages)\uff0c\u7528\u8fd9\u4e9b\u5e27\u6765\u4f5c\u4e3a\u8fde\u7eed\u7684\u865a\u62df\u5730\u5740\u7684\u7269\u7406\u57fa\u7840\uff0c\u7528\u865a\u62df\u7684\u9875\u53f7\u6765\u652f\u6301\u8fde\u7eed\u865a\u62df\u5730\u5740\uff08\u9a6c\u4e0a\u5c31\u4f1a\u7ec6\u8bf4\uff09\uff0c\u8fd9\u6837\u4fdd\u8bc1\u4e86\u5728\u4e00\u5b9a\u9650\u5ea6\u5185\u9875\u5206\u914d\u7684\u81ea\u7531\u5ea6\uff0c\u5229\u7528\u4e86\u865a\u62df\u5730\u5740\u7684\u7075\u6d3b\u6027\uff1b\u53c8\u4fdd\u8bc1\u4e86\u5185\u5b58\u76f8\u5bf9\u6765\u8bf4\u8fd8\u662f\u6210\u5757\u8fde\u7eed\u7684\uff0c\u63d0\u4f9b\u4e86\u7269\u7406\u5730\u5740\u8fde\u7eed\u7684\u9ad8\u6548\u6027\u3002\u800c\u5e27\u4e0e\u9875\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u662f\u901a\u8fc7\u9875\u8868(page table)\u6765\u5b9e\u73b0\u7684\uff0c\u5728\u9875\u8868\u4e2d\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u4ee5\u9875\u53f7\u4e3a\u7d22\u5f15\u7684\u5e27\u53f7\u6570\u7ec4\uff0c\u6309\u7167\u9875\u53f7\u987a\u5e8f\u6392\u5217\uff0c\u56e0\u6b64\uff0c\u9875\u53f7\u5c31\u662f\u5bf9\u5e94\u7684\u8868\u9879\u5728\u6570\u5217\u4e2d\u7684\u4f4d\u6b21\u3002</p> pages v.s. frames <p>\u4e0b\u9762\u7684\u5185\u5bb9\u662f\u5728\u6263\u5b9a\u4e49\u6263\u5b57\u773c\uff0c\u5982\u679c\u8bfb\u8005\u8ba4\u4e3a\u8fd9\u6beb\u65e0\u610f\u4e49\uff0c\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\uff0c\u4f46\u6211\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u4e9b\u4e8b\u662f\u6784\u6210\u6d41\u7545\u903b\u8f91\u7684\u4e00\u4e2a\u57fa\u7840\u3002</p> <p>\u867d\u7136\u6211\u4eec\u5df2\u7ecf\u7ed9\u51fa\u4e86\u660e\u786e\u7684 page \u548c frame \u7684\u5b9a\u4e49\uff0c\u4f46\u73b0\u5b9e\u5f88\u6df7\u4e71\uff0c\u6211\u4e3b\u8981\u67e5\u627e\u5230\u5173\u4e8e page \u548c frame \u6709\u8fde\u5957\u4e0d\u540c\u7684\u5b9a\u4e49\u3002</p> <p></p> Definition 1 <p>\u53c2\u8003\u8fd9\u4e2a\u94fe\u63a5\uff0c\u8fd9\u79cd\u6d41\u6d3e\u7684\u5b9a\u4e49\u5c31\u662f\u4e0a\u9762\u63d0\u5230\u8fc7\u7684\u8fd9\u79cd\uff1a</p> <ol> <li>page \u8868\u793a\u865a\u62df\u5185\u5b58\u4e2d\u7684\u5b8c\u6574\u4e00\u5757\uff1b</li> <li>frame \u8868\u793a\u7269\u7406\u5185\u5b58\u4e2d\u7684\u5b8c\u6574\u4e00\u5757\uff1b</li> </ol> <p>\u8fd9\u91cc\u6211\u4eec\u6293\u4f4f\u4e3b\u8981\u77db\u76fe\uff0c\u4e0d\u51c6\u786e\u63cf\u8ff0\u662f\u600e\u6837\u201c\u5b8c\u6574\u4e00\u5757\u201d\uff0c\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u52a0\u7c97\u90e8\u5206\u3002</p> <p></p> Definition 2 <p>\u53c2\u8003\u8fd9\u4e2a\u94fe\u63a5\uff0c\u8fd9\u79cd\u6d41\u6d3e\u7684\u5b9a\u4e49\u4e0d\u540c\uff0c\u5728\u8fd9\u5957\u5b9a\u4e49\u91cc\uff0c\u51c6\u786e\u7684 page \u548c frame \u4e0d\u662f\u5bf9\u7b49\u7684\u6982\u5ff5\uff0c\u800c\u662f\u8bf4\uff1a</p> <ol> <li>\u4f5c\u4e3a\u7f29\u5199\u7684 page \u6307\u4ee3 virtual page\uff0c\u5373\u865a\u62df\u5185\u5b58\u4e2d\u7684\u4e00\u5757\uff1b</li> <li>\u4f5c\u4e3a\u7f29\u5199\u7684 frame \u5168\u79f0\u662f page frame\uff0c\u4e5f\u88ab\u5b9a\u4e49\u4e3a physical page\uff1b</li> </ol> <p>\u4e3a\u4e86\u907f\u514d\u6b67\u4e49\uff0c\u672c block \u4e2d\uff0c\u6211\u4eec\u53ea\u4f7f\u7528 page\uff0cvirtual page\uff0cphysical page \u8fd9\u4e09\u4e2a\u672f\u8bed\uff01</p> <p>\u5728\u8fd9\u4e2a\u5b9a\u4e49\u91cc\uff0cpage \u8868\u793a\u7684\u5b9e\u9645\u4e0a\u662f\u62bd\u8c61\u7684\u6570\u636e\u5757\uff08\u6ce8\u610f\uff0c\u4e0d\u662f\u865a\u62df\u7684\uff09\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff1a</p> <ol> <li>page \u7684\u672c\u8d28\u662f\u201c\u6570\u636e\u4fe1\u606f\u201d\uff1b</li> <li>physical page \u662f page \u5728\u7269\u7406\u5185\u5b58\u4e0a\u7684\u5b9e\u9645\u5b58\u50a8\u5f62\u5f0f\uff1b</li> <li>virtual page \u662f page \u7684\u5728\u865a\u62df\u5185\u5b58\u4e0a\u7684\u903b\u8f91\u6620\u8c61\uff0c\u4e5f physical page \u7684\u4e00\u4e2a view\uff1b</li> </ol> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u867d\u7136\u7528\u8bcd\u6539\u53d8\uff0c\u4f46\u662f \u201cphysical page\u201d \u548c \u201cvirtual page\u201d \u7684\u5173\u7cfb\u548c\u4e4b\u524d\u662f\u4e00\u6837\u7684\uff0c\u53ea\u662f \u201cpage\u201d \u8fd9\u4e2a\u8bcd\u7684\u542b\u4e49\u4e0d\u4e00\u6837\u4e86\u3002</p> <p>\u6240\u4ee5\u6700\u8fdd\u548c\u7684\u5c31\u662f\uff0c\u4f5c\u4e3a\u7f29\u5199\u7684 page \u548c\u51c6\u786e\u7684 page \u7684\u542b\u4e49\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u751a\u81f3\u533a\u522b\u5de8\u5927\u3002\u6240\u4ee5\u6211\u4e0d\u559c\u6b22\u8fd9\u4e2a\u5b9a\u4e49\u3002\u4f46\u662f\u6ca1\u529e\u6cd5\uff0cpaging \u6280\u672f\u7684\u547d\u540d\u53cd\u800c\u5c31\u662f\u57fa\u4e8e\u8fd9\u5957\u5b9a\u4e49\u7684\uff0c\u8fd9\u91cc\u5927\u6982\u5b58\u5728\u4e00\u4e2a\u975e\u5e38\u6076\u5fc3\u7684\u5386\u53f2\u9057\u7559\u95ee\u9898\u5728\uff0c\u8bf7\u8bfb\u8005\u7559\u4e2a\u5fc3\u773c\uff0c\u5728\u4e4b\u540e\u7684\u5185\u5bb9\u4e2d\u4ed4\u7ec6\u8fa8\u522b\u3002</p> <p>\u56de\u5fc6\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u76f8\u5173\u6982\u5ff5\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5e94\u5f53\u90fd\u6709\u81ea\u5df1\u7684\u9875\u8868\uff0c\u5373\u6211\u4eec\u79f0\u9875\u8868\u662f per-process data structures\u3002</p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u7531\u4e8e\u5e27\u548c\u9875\u7684\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u867d\u7136\u7406\u8bba\u4e0a\u6211\u4eec\u9700\u8981\u7684\u662f\u6bcf\u4e00\u5e27\u7684\u9996\u5730\u5740\uff0c\u4f46\u6240\u8c13\u7684\u201c\u9996\u5730\u5740\u201d\u5b9e\u9645\u4e0a\u662f \\(m * FrameSize\\)\uff0c\u56e0\u6b64\uff0c\u53ea\u9700\u8981\u7528 \\(m\\) \u5c31\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u4e86\uff08\u5c31\u50cf\u6570\u7ec4\u7684 random access\uff09\u3002</p> <p>\u73b0\u5728\uff0c\u8bf7\u8bfb\u8005\u601d\u8003\uff0c\u5f53 \\(FrameSize = 2^k\\) \u65f6\uff0c\u4f1a\u6709\u600e\u6837\u826f\u597d\u7684\u6027\u8d28\uff1f</p> \u63d0\u793a <p>\u8054\u7cfb\u9875 &amp; \u865a\u62df\u5730\u5740\uff0c\u8003\u8651\u6574\u4e2a\u5730\u5740\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e2d\u8868\u793a\u9875\u53f7\u7684\u90e8\u5206\u5728\u6574\u4e2a\u4e8c\u8fdb\u5236\u4e32\u4e2d\u7684\u6784\u6210\uff01</p>  ![](img/31.png){ width=50% }  Paging model of logical and physical memory. \u4ee5 page table \u4e2d\u7684\u7b2c\u4e00\u9879\u4e3a\u4f8b\uff1a0:5 \u8868\u793a\u865a\u62df\u5730\u5740\u4e2d\u7684\u7b2c 0 \u9875\u5bf9\u5e94\u7269\u7406\u5730\u5740\u4e2d\u7684\u7b2c 5 \u5e27\u3002  <p>\u5934\u8111\u98ce\u66b4</p> <p>\u4e0d\u77e5\u9053\u4f60\u770b\u4e86\u8fd9\u4e2a\u5bfb\u5740\u6a21\u5f0f\u662f\u5426\u611f\u89c9\u6709\u4e9b\u5fae\u5999\u7684\u70b9\uff1f\u5728\u7ee7\u7eed\u4e4b\u524d\uff0c\u8bf7\u5c1d\u8bd5\u53d1\u73b0\u8fd9\u4e2a\u8fdd\u548c\u7684\u5730\u65b9\u5728\u4f55\u5904\u3002</p> \u9ec4\u6cb9\u732b\uff01 <p> </p> <p>\u9996\u5148\u4e00\u4e2a\u7ed3\u8bba\u662f\uff0c\u6211\u4eec\u663e\u7136\u4e0d\u80fd\u62ff\u7740\u865a\u62df\u5730\u5740\u53bb\u627e\u9875\u8868\uff0c\u56e0\u4e3a\u4f1a\u9677\u5165\uff1a\u300e\u627e\u9875\u8868\u9700\u8981\u8bbf\u95ee\u9875\u8868\u7684\u7269\u7406\u5730\u5740\u3001\u627e\u865a\u62df\u5730\u5740\u5bf9\u5e94\u7684\u7269\u7406\u5730\u5740\u9700\u8981\u9875\u8868\u3001\u627e\u9875\u8868\u9700\u8981\u8bbf\u95ee\u9875\u8868\u7684\u7269\u7406\u5730\u5740\u2026\u2026\u300f\u7684\u9ec4\u6cb9\u732b[^3]\u4e2d\u3002</p> <p>\u5c31 RSICV \u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u5728\u5b9e\u9a8c\u4e09\u7684\u624b\u518c\u91cc\u627e\u5230\u4e00\u6bb5\u63cf\u8ff0 satp \u5bc4\u5b58\u5668\u7684\u90e8\u5206\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\uff0csatp \u5bc4\u5b58\u5668\u7684\u672b\u5c3e\u5b58\u50a8\u7684\u662f\u7269\u7406\u9875\u53f7\uff0c\u4e5f\u5c31\u662f\u5e27\u53f7\uff0c\u6240\u4ee5\u975e\u5e38\u663e\u7136\u7684\uff0c\u6211\u4eec\u9700\u8981\u7279\u522b\u5730\u53bb\u5b58\u50a8\u9875\u8868\u7684\u7269\u7406\u5730\u5740\u4fe1\u606f\uff0c\u5e76\u7528\u8fd9\u4e2a\u7269\u7406\u5730\u5740\u6765\u8bbf\u95ee\u9875\u8868\u3002</p>"},{"location":"OS/Unit3-Part1/#_11","title":"\u9875 &amp; \u865a\u62df\u5730\u5740","text":"<p>\u6211\u4eec\u6765\u770b\u865a\u62df\u5730\u5740\u662f\u5982\u4f55\u5728\u8fde\u7eed\u6027\u4e0a\u53d1\u6325\u4f5c\u7528\u7684\uff1a\u4e00\u4e2a\u7a0b\u5e8f\u8f7d\u5165\u5185\u5b58\u53ef\u80fd\u9700\u8981\u591a\u4e2a\u9875\uff0c\u8fd9\u4e9b\u9875\u6309\u987a\u5e8f\u88ab\u5206\u914d\u4e86\u9875\u53f7(page number)\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u5730\u5740\u4f1a\u843d\u5728\u67d0\u4e00\u9875\u4e2d\uff0c\u5c31\u901a\u8fc7 page number \u8fdb\u884c\u7d22\u5f15\u3002\u800c\u7531\u4e8e\u4e00\u9875\u4e2d\u5305\u542b\u4e00\u5927\u5757\u5185\u5b58\uff08page size \u5e38\u5e38\u53d6 4KB\uff09\uff0c\u800c\u6211\u4eec\u6240\u9700\u8981\u5bfb\u7684\u5740\u603b\u662f\u5176\u4e2d\u7684\u4e00\u4e2a Byte\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u9875\u5185\u504f\u79fb(page offset)\u6765\u7d22\u5f15\u6211\u4eec\u6240\u9700\u8981\u7684\u5730\u5740\u5728\u9875\u4e2d\u7684\u4f4d\u7f6e\uff0c\u5bf9\u4e8e page size \u4e3a 4KB \u7684\u9875\uff0cpage offset \u9700\u8981\u6709 \\(\\log_2{4096} = 12\\) \u4f4d\u3002</p> <p>\u56e0\u6b64\uff0c\u5b9e\u9645\u5728 paging \u903b\u8f91\u4e2d\uff0c\u4e00\u4e2a\u865a\u62df\u5730\u5740\u7684\u53ef\u4ee5\u88ab\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502page number    \u2502page offset   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n p: m-n bits     d: n bits\n</code></pre> <p>\u663e\u7136\uff0c\u7531\u4e8e\u5e27\u548c\u9875\u662f\u4e00\u4f53\u4e24\u9762\u3001\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u6240\u4ee5\u5355\u4e2a\u9875\u5185\u7684\u8fde\u7eed\u5185\u5b58\u9875\u5bf9\u5e94\u5e27\u4e0a\u7684\u8fde\u7eed\u5185\u5b58\u3002\u4f7f\u7528 page offset \u6765\u6807\u8bc6\u9875\u5185\u5730\u5740\uff0c\u5b9e\u9645\u5c31\u5f97\u5230\u4e86\u76ee\u6807\u7269\u7406\u5730\u5740\u76f8\u5bf9\u4e8e\u5e27\u4e2d\u8d77\u59cb\u5730\u5740\u7684\u504f\u79fb\u91cf\u3002\u800c\u5bf9\u4e8e\u9875\u95f4\u7684\u5730\u5740\uff0c\u5047\u8bbe\u9875\u672b\u5730\u5740\u662f\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502page number    \u250211111111111111\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n p: m-n bits     d: n bits\n</code></pre> <p>\u7531\u4e8e\u865a\u62df\u5730\u5740\u8868\u73b0\u4e0a\u8fd8\u662f\u4e2a\u6b63\u5e38\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u6240\u4ee5\u5176\u4e0b\u4e00\u4e2a\u5730\u5740\u5c31\u662f\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502page number + 1\u250200000000000000\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n p: m-n bits     d: n bits\n</code></pre> <p>\u800c\u5176\u542b\u4e49\u5c31\u662f\u4e0b\u4e00\u5f20\u9875\u8868\u7684 0 \u53f7\u4f4d\u3002\u800c\u6211\u4eec\u77e5\u9053\uff0c\u76f8\u90bb\u9875\u5bf9\u5e94\u7684\u5e27\u4e0d\u4e00\u5b9a\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u8fd9\u4e2a\u4e0d\u8fde\u7eed\u7684\u6027\u8d28\u5bf9\u865a\u62df\u5730\u5740\u662f\u900f\u660e\u7684\u3002</p>"},{"location":"OS/Unit3-Part1/#_12","title":"\u603b\u4f53\u68b3\u7406","text":"<p>\u7a0d\u5fae\u5bf9\u4e0a\u9762\u7684\u5185\u5bb9\u505a\u4e00\u4e0b\u603b\u7ed3\uff0c\u6211\u4eec\u62e5\u6709\u4e86\u903b\u8f91\u7684\u9875\u5230\u7269\u7406\u7684\u5e27\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u4e2a\u6620\u5c04\u5173\u7cfb\u5b58\u5728\u9875\u8868\u91cc\uff0c\u5b9e\u73b0\u903b\u8f91\u4e0a\u8fde\u7eed\u3001\u7269\u7406\u4e0a\u79bb\u6563\u7684\u5185\u5b58\u5757\u7d22\u5f15\uff1b\u800c\u5229\u7528 page number + offset \u7684\u7ed3\u6784\u5b9a\u4f4d\u4e86\u5185\u5b58\u5757\u4e2d\u7684\u5177\u4f53\u5730\u5740\uff0c\u5176\u4e2d offset \u5728\u5e27\u548c\u9875\u4e2d\u90fd\u8868\u793a\u5bf9\u4e8e\u5757\u9996\u5730\u5740\u7684\u504f\u79fb\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u8fc1\u79fb\u4f7f\u7528\u3002</p> <p>\u56e0\u6b64\uff0c\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u9875\u8868\u4e2d\u67e5\u8be2\u865a\u62df\u5730\u5740\u4e2d\u7684 page number\uff0c\u5c06\u5176\u6362\u4e3a frame number\uff0c\u518d\u76f4\u63a5\u62fc\u63a5 offset \u5c31\u884c\u4e86\u3002</p> <p> </p> <p>\u5b9e\u9645\u4e0a\u8fd9\u662f\u4e2a\u975e\u5e38\u81ea\u7136\u7684\u8fc7\u7a0b\uff1a\u6574\u4f53\u5730\u770b\u865a\u62df\u5730\u5740\uff0c\u5c31\u662f\u76f4\u63a5\u5728\u8fde\u7eed\u7684\u865a\u62df\u5185\u5b58\u4e2d\u627e\u5230\u5bf9\u5e94\u7684 Byte\uff1b\u6574\u4f53\u5730\u770b\u7269\u7406\u5730\u5740\uff0c\u540c\u6837\u4e5f\u662f\u76f4\u63a5\u5728\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u4e2d\u627e\u5230\u5bf9\u5e94\u7684 Byte\u3002\u73b0\u5728\u901a\u8fc7\u7f6e\u6362\u4e8c\u8fdb\u5236\u5730\u5740\u5b57\u7b26\u4e32\u7684\u524d\u7f00\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u5bfb\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u3002\u800c\u8fd9\u4e2a\u6620\u5c04\u4e2d\uff0c\u8868\u793a offset \u7684\u540e\u7f00\u4e0d\u53d8\uff0c\u6b63\u5bf9\u5e94\u7740\u9875\u548c\u5e27\u4e2d\u504f\u79fb\u5bfb\u5740\u89c4\u5219\u7684\u7edf\u4e00\u3002</p> <p>Protection</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6709\u4e9b\u9875\u53ef\u80fd\u5c1a\u672a\u4e0e\u5b9e\u9645\u7684\u5e27\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\u662f\u4e0d\u53ef\u7528\u7684\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u624b\u6bb5\u6765\u6807\u8bc6\u8868\u9879\u662f\u5426\u6709\u6548\uff0c\u4e8e\u662f\u5728\u9875\u8868\u4e2d\u5f15\u5165 valid bit\uff0c\u7528\u6765\u6807\u8bc6\u9875\u662f\u5426\u6709\u6548\uff0c\u5982\u679c\u8bd5\u56fe\u8bbf\u95ee invalid \u7684\u5730\u5740\uff0c\u5219\u4f1a\u51fa\u73b0\u5f02\u5e38\uff0c\u4ee5\u6b64\u5b9e\u73b0\u4e86 protection\u3002</p> <p> </p> <p>\u4e5f\u6709\u4e00\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u7ef4\u62a4 page-table length register, PTLR \u6765\u5b9e\u73b0 protection\uff0c\u8fd9\u91cc\u4e0d\u91cd\u70b9\u4ecb\u7ecd\u3002</p> <p>page size \u7684\u9009\u62e9</p> <p>\u5bb9\u6613\u7406\u89e3\uff0cpage size \u8f83\u5927\u65f6\uff0c\u9875\u8868\u9879\u66f4\u5c11\uff0c\u800c\u9875\u66f4\u5bb9\u6613\u88ab\u6d6a\u8d39\uff0c\u4f46\u5bf9\u4e8e\u78c1\u76d8\u6765\u8bf4\uff0c\u5355\u6b21\u5927\u91cf\u7684\u4f20\u8f93\u6548\u7387\u66f4\u9ad8\uff1bpage size \u8f83\u5c0f\u65f6\uff0c\u9875\u8868\u9879\u66f4\u591a\uff0c\u9700\u8981\u66f4\u591a\u5185\u5b58\u548c\u65f6\u95f4\u6765\u5904\u7406\u9875\u8868\uff0c\u6240\u4ee5\u5177\u4f53 page size \u7684\u5927\u5c0f\u8981\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790\u3001\u4e0e\u65f6\u4ff1\u8fdb\u3002</p> <p>\u5728\u4e4b\u540e\u9875\u8868\u8bbe\u8ba1\u6539\u8fdb\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u7ee7\u7eed\u5bf9\u9875\u8868\u7684\u7ed3\u6784\u8fdb\u884c\u4fee\u6539\uff0c\u4f46\u6574\u4f53\u4f7f\u7528\u903b\u8f91\u4e0d\u53d8\u3002</p>"},{"location":"OS/Unit3-Part1/#_13","title":"\u786c\u4ef6\u652f\u6301","text":"<p>\u5bfc\u8bfb</p> <p>\u672c\u8282\u4fa7\u91cd\u4e8e\u4ece\u786c\u4ef6\u5b9e\u73b0\u7684\u89d2\u5ea6\u6765\u770b\u5206\u9875\u6280\u672f\u3002</p> <p>\u6211\u4eec\u524d\u9762\u8bf4\u8fc7\uff0c\u9875\u8868\u662f per-process data structures\uff0c\u6240\u4ee5\u9875\u8868\u5e94\u5f53\u4f5c\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5143\u4fe1\u606f\u88ab\u7ef4\u62a4\u3002\u663e\u7136\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u7528\u5927\u91cf\u5bc4\u5b58\u5668\u6765\u7ef4\u62a4\u9875\u8868\uff08\u7406\u8bba\u4e0a\u5f88\u5feb\uff0c\u4f46\u662f\u592a\u8d35\u3001\u8bbe\u8ba1\u4e0a\u4e5f\u4e0d\u73b0\u5b9e\uff09\uff0c\u6240\u4ee5\u9875\u8868\u5b9e\u9645\u4e0a\u5e94\u5f53\u88ab\u653e\u5728\u5185\u5b58\u4e2d\uff08\u8fdb\u4e00\u6b65\u7684\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6548\u7387\uff0c\u6211\u4eec\u5c06\u9875\u8868\u653e\u5728\u4e3b\u5b58\u4e2d\uff09\uff0c\u6211\u4eec\u901a\u8fc7\u7528\u5bc4\u5b58\u5668\u7ef4\u62a4\u4e00\u4e2a\u6307\u5411\u9875\u8868\u7684\u6307\u9488\u6765\u7ef4\u62a4\u9875\u8868\uff0c\u8fd9\u4e2a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\u88ab\u79f0\u4e3a\u9875\u8868\u57fa\u5740\u5bc4\u5b58\u5668(page-table base register, PTBR)\uff0c\u5f53\u8fdb\u7a0b\u4e0d\u5904\u4e8e running \u6001\u65f6\uff0cPTBR \u5e94\u5f53\u88ab\u5b58\u50a8\u5728 PCB \u4e2d\uff0c\u5728 context switch \u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e5f\u5e94\u5f53\u5bf9 PTBR \u8fdb\u884c\u4ea4\u6362\u3002</p> <p>\u563f\uff01\u53ef\u662f\u5185\u5b58\u771f\u7684\u597d\u6162\uff01</p> <p>\u4e0d\u4ec5\u5982\u6b64\uff0c\u7531\u4e8e\u5730\u5740\u6620\u5c04\u7684\u5b9e\u73b0\u903b\u8f91\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5229\u7528\u9875\u8868\u67e5\u8be2\u5e27\u53f7\uff0c\u5229\u7528\u5e27\u53f7\u53bb\u5f97\u5230\u7269\u7406\u5730\u5740\uff0c\u518d\u53bb\u5185\u5b58\u91cc\u505a\u67e5\u8be2\uff0c\u8fd9\u91cc\u6709\u8db3\u8db3\u4e24\u6b21\u5185\u5b58\u8bbf\u95ee\u64cd\u4f5c\uff01</p>"},{"location":"OS/Unit3-Part1/#tlb","title":"TLB","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5f15\u7528\u8ba1\u7ec4\u91cc\u5b66\u5230\u7684 Eight Great Ideas \u4e4b Make Common Case Fast\uff01\u5f15\u5165\u4e00\u4e2a\u7f13\u5b58\u6765\u52a0\u901f\u9875\u8868\u7684\u7ef4\u62a4\uff1a\u9875\u8868\u7f13\u5b58(translation look-aside buffer, TLB)\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f MMU \u7684\u4e00\u90e8\u5206[^1]\uff0c\u9875\u53f7\u548c\u5e27\u53f7\u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u5b58\u50a8\u5728 TLB \u4e2d\u3002\u9664\u4e86\u8bbf\u95ee\u901f\u5ea6\u5feb\u4ee5\u5916\uff0cTLB \u5141\u8bb8\u5e76\u884c\u5730\u67e5\u8be2\u6240\u6709\u952e\u503c\u5bf9\u3002\u4ece\u6548\u7387\u4e0a\u6765\u8bf4\uff0c\u73b0\u4ee3\u7684 TLB \u5df2\u7ecf\u80fd\u591f\u5728\u4e00\u4e2a\u6d41\u6c34\u7ebf\u8282\u62cd\u4e2d\u5b8c\u6210\u67e5\u8be2\u64cd\u4f5c\u3002</p> <p>\u4f46\u662f\u8fd9\u4e48\u5389\u5bb3\u7684\u4e1c\u897f\u80af\u5b9a\u8fd8\u662f\u6709\u5c40\u9650\u6027\u7684\uff0cTLB \u4e00\u822c\u90fd\u6bd4\u8f83\u5c0f\uff0c\u5f80\u5f80\u53ea\u80fd\u652f\u6301 32 - 1024 \u4e2a\u8868\u9879\u3002\u800c\u4e14\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u201c\u7f13\u5b58\u201d\uff0c\u5b83\u6709\u53ef\u80fd\u4ea7\u751f miss\uff08\u5373\u6ca1\u5728 TLB \u4e2d\u627e\u5230\u5f85\u67e5\u7684\u9875\u53f7\uff09\uff0c\u5f53 TLB miss \u51fa\u73b0\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u8bbf\u95ee\u653e\u5728\u5185\u5b58\u4e2d\u7684\u9875\u8868\uff0c\u5e76\u505a\u6734\u7d20\u7684\u67e5\u8be2\u3002\u540c\u65f6\uff0c\u6309\u7167\u4e00\u5b9a\u7b56\u7565\uff08\u5982 LRU\u3001round-robin to random \u7b49[^2]\uff09\u5c06\u5f53\u524d\u67e5\u8be2\u7684\u952e\u503c\u5bf9\u66f4\u65b0\u5230 TLB \u4e2d\u3002</p> <p> </p> <p>\u6b64\u5916\uff0cTLB \u5141\u8bb8\u7279\u5b9a\u7684\u8868\u9879\u88ab\u7ebf\u56fa(wired down)\uff0c\u88ab\u7ebf\u56fa\u7684\u8868\u9879\u4e0d\u518d\u5141\u8bb8\u88ab\u66ff\u6362\u3002\uff08~~\u8fd9\u4e2a\u4e2d\u6587\u662f\u6211\u81ea\u5df1\u624d\u534e\u6a2a\u6ea2\u51fa\u6765\u7684\uff0c\u8bf7\u4e0d\u8981\u5230\u5904\u7528\u5bb9\u6613\u88ab\u5f53\u6ca1\u89c1\u8bc6\u3002~~\uff09</p> <p>\u867d\u7136\u9875\u8868\u662f per-process data structures\uff0c\u4f46 TLB \u5e76\u4e0d\u662f\uff01</p> <p>\u6b63\u56e0\u5982\u6b64\uff0c\u5728 context switch \u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u6e05\u7a7a TLB\uff0c\u5373\u8fdb\u884c flush \u64cd\u4f5c\uff0c\u5426\u5219\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u5c31\u4f1a\u8bbf\u95ee\u5230\u4e0a\u4e00\u4e2a\u8fdb\u7a0b\u7684\u9875\u8868\u3002\u53c8\u6216\u8005\u6211\u4eec\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u6e05\u7a7a TLB\uff0c\u800c\u662f\u5728 TLB \u7684\u8868\u9879\u4e2d\u52a0\u5165\u4e00\u4e2a\u5730\u5740\u7a7a\u95f4\u6807\u8bc6\u7b26(address-space identifier, ASIDs)\u5b57\u6bb5\uff1b\u5728\u67e5\u8be2\u9875\u53f7\u65f6\uff0c\u4e5f\u6bd4\u8f83 ASID\uff0c\u53ea\u6709 ASID \u4e00\u81f4\u624d\u7b97\u5339\u914d\u6210\u529f\u3002</p> <p> </p> <p>\u5b9a\u91cf\u5206\u6790</p> <p>\u6211\u4eec\u4f7f\u7528\u51fb\u4e2d\u6bd4\u4f8b(hit ratio)\u6765\u63cf\u8ff0\u6211\u4eec\u5728 TLB \u4e2d\u6210\u529f\u627e\u5230\u6211\u4eec\u9700\u8981\u7684\u9875\u5e27\u952e\u503c\u5bf9\u7684\u6982\u7387\uff0c\u90a3\u4e48\u5047\u8bbe\u8bbf\u95ee\u4e00\u6b21\u5185\u5b58\u9700\u8981 \\(t \\text{nanoseconds}\\)\uff0c\u90a3\u4e48\u4f7f\u7528\u8be5 TLB \u7684\u6709\u6548\u5185\u5b58\u8bbf\u95ee\u65f6\u95f4(effective memory-access time)\u4e3a\uff1a</p> \\[ \\begin{aligned}     &amp;\\text{effective memory-access time} \\\\     &amp;= \\underbrace{\\text{hit ratio} \\times \\text{memory-access} }_\\text{TLB hit}      +  \\underbrace{(1 - \\text{hit ratio}) \\times 2 \\times \\text{memory-access}}_\\text{TLB miss} \\\\     &amp;= p_{\\text{hit}} \\times t + (1 - p_{\\text{hit}}) \\times 2t \\\\     &amp;= (2 - p_{\\text{hit}})t \\end{aligned}  \\] <p>\u5982\u679c\u9898\u4e2d\u7ed9\u4e86 TLB access time\uff0c\u5219\u9700\u8981\u5c06\u8fd9\u4e2a\u4e5f\u52a0\u4e0a\u53bb\uff0c\u56e0\u4e3a\u65e0\u8bba hit \u8fd8\u662f miss \u90fd\u9700\u8981\u8bbf\u95ee TLB\u3002</p> \\[ \\begin{aligned}     &amp;\\text{effective memory-access time} \\\\     &amp;= (2 - p_{\\text{hit}})t + \\varepsilon_\\text{TLB cache access} \\end{aligned}  \\] <p>\u5728\u73b0\u4ee3\u8ba1\u7b97\u673a\u4e2d\uff0cTLB \u7684\u7ed3\u6784\u53ef\u80fd\u4f1a\u66f4\u52a0\u590d\u6742\uff08\u53ef\u80fd\u6709\u66f4\u591a\u5c42\uff09\uff0c\u6240\u4ee5\u5b9e\u9645\u7684\u8ba1\u7b97\u53ef\u80fd\u6bd4\u4e0a\u8ff0\u66f4\u52a0\u590d\u6742\u3002</p>"},{"location":"OS/Unit3-Part1/#_14","title":"\u5171\u4eab\u9875","text":"<p>\u865a\u62df\u5730\u5740\u4e0e\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u5e76\u975e\u9700\u8981\u662f\u5355\u5c04\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u591a\u4e2a\u9875\u53ef\u4ee5\u5bf9\u5e94\u540c\u4e00\u4e2a\u5e27\uff0c\u8fd9\u5c31\u662f\u5171\u4eab\u9875(shared page)\u3002</p> <p>\u5171\u4eab\u9875\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u4ee3\u7801\u91cd\u7528\u7387\uff0c\u4f8b\u5982\uff0c\u591a\u4e2a\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u4f7f\u7528\u540c\u4e00\u4e2a\u5e93\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5e93\u5c31\u53ef\u4ee5\u88ab\u5171\u4eab\uff0c\u800c\u4e0d\u9700\u8981\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5404\u81ea\u5728\u7269\u7406\u5185\u5b58\u4e2d\u51c6\u5907\u4e00\u4efd\u3002\u5171\u4eab\u5e93\u5c31\u901a\u5e38\u662f\u4f7f\u7528\u5171\u4eab\u9875\u6765\u5b9e\u73b0\u7684[^7]^,^[^8]\u3002</p> <p>\u518d\u6bd4\u5982\uff0c\u6211\u4eec\u5728\u8fdb\u7a0b\u7ba1\u7406#\u8fdb\u7a0b\u95f4\u901a\u4fe1\u4e2d\u63d0\u5230\u8fc7\u901a\u8fc7\u5171\u4eab\u5185\u5b58\u6765\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c\u5728\u67d0\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u5171\u4eab\u5185\u5b58\u5c31\u662f\u901a\u8fc7\u5171\u4eab\u9875\u6765\u5b9e\u73b0\u7684\u3002</p>"},{"location":"OS/Unit3-Part1/#_15","title":"\u9875\u8868\u8bbe\u8ba1\u6539\u8fdb","text":"<p>\u6211\u4eec\u56de\u987e\u4e00\u4e0b\u76ee\u524d\u7684\u9875\u8868\u7684\u8bbe\u8ba1\uff1a\u73b0\u5728\u7684\u9875\u8868\u662f\u4ee5\u9875\u53f7\u4e3a\u7d22\u5f15\u3001\u5e27\u53f7\u4e3a\u503c\u7684\u4e00\u7ef4\u6570\u7ec4\uff0c\u800c\u7531\u4e8e\u6211\u4eec\u76f4\u63a5\u5c06\u9875\u8868\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff08\u5426\u5219\u4f1a\u9ec4\u6cb9\u732b[^3]\uff01\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u5176\u5b9e\u9700\u8981\u4e00\u5757\u5b8c\u6574\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u6765\u5b58\u50a8\u6574\u4e2a\u9875\u8868\u2014\u2014\u6bcf\u4e00\u4e2a\u865a\u62df\u5730\u5740\u6211\u4eec\u90fd\u5f97\u5b58\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u7684\u865a\u62df\u5730\u5740\u4e00\u5171 32 \u4f4d\uff0c\u800c page size \u4e3a 4 KB = 2^12^ B\uff0c\u5373 offset \u5bf9\u5e94\u865a\u62df\u5730\u5740 32 \u4f4d\u4e2d\u7684\u540e 12 \u4f4d\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u9700\u8981\u8fde\u7eed\u7684 2^20^ \u4e2a\u8868\u9879\uff08\u5bf9\u5e94\u4e00\u5171 2^20^ \u4e2a\u865a\u62df\u5730\u5740\uff09\u6765\u5b58\u50a8\u9875\u5e27\u7684\u6620\u5c04\u5173\u7cfb\u3002\u5047\u8bbe\u4e00\u4e2a\u8868\u9879 4 Bytes\uff0c\u90a3\u4e48\u5149\u4e00\u4e2a\u9875\u8868\u5c31\u8981\u5360\u636e\u6211\u4eec 4 MB \u7684\u7269\u7406\u5185\u5b58\u2014\u2014\u800c\u4e14\u662f\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u3002\u8fd9\u5b9e\u5728\u662f\u592a\u5938\u5f20\u4e86\uff01</p> <p>\u73b0\u5728\u6211\u4eec\u8981\u51b7\u9759\u5730\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff01\u73b0\u5728\u95ee\u9898\u6709\u4e24\u4e2a\uff1a\u24f5 \u9875\u8868\u5b9e\u5728\u592a\u5927\u4e86\uff0c\u24f6 \u5b83\u4e0d\u4ec5\u5927\uff0c\u800c\u4e14\u5fc5\u987b\u662f\u8fde\u7eed\u7684\u3002\u5176\u4e2d\u7b2c\u4e8c\u70b9\u662f\u6700\u5173\u952e\u7684\uff0c\u5728\u672c\u8282\u4e4b\u540e\u7684\u5185\u5bb9\u4e2d\uff0c\u6211\u5c06\u79f0\u4e4b\u4e3a\u201c\u8fde\u7eed\u5185\u5b58\u7ea6\u675f\u95ee\u9898\u201d\uff08\u975e\u6b63\u5f0f\u8868\u8ff0\uff09\u3002</p> <p>\u6211\u4eec\u4ecb\u7ecd\u4e09\u4e2a\u65b9\u6cd5\u6765\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff1a\u5206\u5c42\u9875\u8868\u3001\u54c8\u5e0c\u9875\u8868\u548c\u53cd\u8f6c\u9875\u8868\u3002</p> <p></p> \u5206\u5c42\u9875\u8868 <p>\u540c\u6837\uff0c\u6211\u4eec\u9996\u5148\u6765\u601d\u8003\u4e3a\u4ec0\u4e48\u8fd9\u91cc\u9700\u8981\u7684\u5185\u5b58\u662f\u8fde\u7eed\u7684\u2014\u2014\u4f5c\u4e3a\u4e00\u4e2a\u4e00\u7ef4\u6570\u5b57\uff0c\u53ea\u6709\u5185\u5b58\u8fde\u7eed\u624d\u80fd\u4fdd\u8bc1 random access\u3002\u7c7b\u4f3c\u7684\u95ee\u9898\u6211\u4eec\u5728\u63a2\u7d22\u8fde\u7eed\u5206\u914d\u7684\u8fc7\u7a0b\u4e2d\u5df2\u7ecf\u9047\u5230\u8fc7\u4e86\uff1a\u5728\u7269\u7406\u5730\u5740\u7a7a\u95f4\u4e2d\u5bfb\u6c42\u8fde\u7eed\uff0c\u4e00\u4e2a\u91cd\u8981\u5c31\u662f\u56e0\u4e3a\u53ea\u6709\u7269\u7406\u5730\u5740\u7684\u8bbe\u8ba1\u4e2d\uff0c\u53ea\u6709\u4fdd\u8bc1\u8fde\u7eed\u624d\u80fd\u4fdd\u8bc1\u80fd random access \u5730\u53bb\u8bbf\u95ee\u5730\u5740\uff0c\u800c\u73b0\u5728\u8fd9\u4e2a\u4e00\u7ef4\u6570\u7ec4\u592a\u5927\u5757\u4e86\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u788e\u4e00\u70b9\uff1b\u800c\u6211\u4eec\u901a\u8fc7\u4fdd\u8bc1\u5206\u5757\u5730\u8fde\u7eed\uff08\u5e27\u5185\u7269\u7406\u5730\u5740\u7684\u8fde\u7eed\uff09\uff0c\u518d\u4fdd\u8bc1\u5757\u7d22\u5f15\u7684\u8fde\u7eed\uff08\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u9875\u53f7\u7684\u8fde\u7eed\uff09\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u597d\u50cf\u628a\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\u53d8\u6210\u4e86\u4e00\u4e2a\u6307\u9488\u6570\u7ec4\uff0c\u6216\u8005\u8bf4\u903b\u8f91\u4e0a\u7684\u4e8c\u7ef4\u6570\u7ec4\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u9047\u5230\u7684\u95ee\u9898\u5b9e\u9645\u4e0a\u5c31\u662f\u8fd9\u4e2a\u201c\u6307\u9488\u6570\u7ec4\u201d\u4e5f\u592a\u5927\u5757\u4e86\uff0c\u5e0c\u671b\u5b83\u80fd\u788e\u4e00\u70b9\uff0c\u6240\u4ee5\u89e3\u51b3\u65b9\u6cd5\u5df2\u7ecf\u547c\u4e4b\u6b32\u51fa\u4e86\u2014\u2014\u5c06\u8fd9\u4e2a\u6307\u9488\u6570\u7ec4\u518d\u8fdb\u884c\u62c6\u5206\uff0c\u53d8\u6210\u4e00\u4e2a\u7ef4\u62a4\u6307\u9488\u6570\u7ec4\u6307\u9488\u7684\u6570\u7ec4\uff0c\u6216\u8005\u8bf4\u903b\u8f91\u4e0a\u7684\u4e09\u7ef4\u6570\u7ec4\uff1a</p> <pre><code>page number     page offset\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 p1    \u2502 p2    \u2502 d            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u770b\u4f5c\u5728\u539f\u5148\u7ef4\u62a4 p2 -&gt; d \u7684 inner \u9875\u8868\u5916\uff0c\u518d\u7ef4\u62a4\u4e00\u4e2a p1 -&gt; inner \u7684 outer \u9875\u8868\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u51cf\u5c11\u4e86\u5355\u4e2a\u9875\u8868\u6240\u9700\u8981\u5305\u542b\u7684\u8868\u9879\u6570\uff08\u539f\u5148\u4e00\u4e2a\u9875\u8868\u9700\u8981\u6709 2^p^ \u4e2a\u8868\u9879\uff0c\u73b0\u5728\u53ea\u9700\u8981\u6709 2^p1^ \u6216 2 ^p2^ \u4e2a\u5373\u53ef\uff09\uff1b\u9664\u6b64\u4e4b\u5916\uff0c\u867d\u7136\u770b\u8d77\u6765\u8868\u603b\u91cf\u589e\u52a0\u4e86\uff08\u73b0\u5728\u4e00\u5171\u9700\u8981 2^p1+p2^ + 2^p1^ \u4e2a\u8868\uff0c\u539f\u6765\u53ea\u9700\u8981 2^p1+p2^ \u4e2a\u8868\uff09\uff0c\u4f46\u662f \u24f5 \u4e00\u65b9\u9762\u8fd9\u4e2a\u589e\u52a0\u662f\u53ef\u4ee5\u5ffd\u7565\u7684\u76f8\u5bf9\u5c0f\u91cf\uff0c\u24f6 \u53e6\u5916\u4e00\u65b9\u9762\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u5e76\u4e0d\u603b\u662f\u9700\u8981\u521b\u5efa\u6240\u6709\u7684\u8868\u2014\u2014\u5047\u8bbe\u67d0\u4e2a inner \u8868\u91cc\u7684\u865a\u62df\u5185\u5730\u5740\u6211\u4eec\u90fd\u7528\u4e0d\u5230\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u521b\u5efa\u8fd9\u4e2a inner \u8868\uff0c\u53ea\u9700\u8981\u5728 outer \u8868\u4e2d\u6807\u8bb0\u8fd9\u4e2a inner \u8868\u662f invalid \u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>\u901a\u8fc7\u8fd9\u79cd\u8bbe\u8ba1\uff0c\u6211\u4eec\u6210\u529f\u5730\u8282\u7701\u4e86\u7ef4\u62a4\u9875\u8868\u6240\u9700\u8981\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u540c\u65f6\u51cf\u5c0f\u4e86\u8fde\u7eed\u5185\u5b58\u5bf9\u9875\u8868\u7ef4\u62a4\u7684\u7ea6\u675f\u3002</p> <p>\u5982\u4e0a\u8fd9\u79cd\u8bbe\u8ba1\uff0c\u5c31\u662f\u5206\u5c42\u5206\u9875(hierarchical paging)\uff0c\u800c\u4e0a\u9762\u8fd9\u4e2a\u5c31\u662f\u4e8c\u7ea7\u9875\u8868(two-level page table)\u8bbe\u8ba1\u3002</p> <p>\u663e\u7136\uff0c\u6709\u4e8c\u5c31\u53ef\u4ee5\u6709\u4e09\uff0c\u6709\u4e09\u5c31\u53ef\u4ee5\u6709\u56db\uff0c\u5177\u4f53\u4f7f\u7528\u54ea\u79cd\uff0c\u5e94\u5f53\u79c9\u6301\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790\u7684\u539f\u5219\u3002</p> <p>Risc-V</p> <p>\u6709\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003 xg \u7684\u8fd9\u7bc7\u300aRISC-V \u9875\u8868\u76f8\u5173\u300b\u7b14\u8bb0\uff0c\u6765\u4e86\u89e3 Risc-V \u4e2d\u7684\u5206\u9875\u8bbe\u8ba1\uff0c\u5199\u5f97\u5f88\u6e05\u695a\uff0c\u63a8\u8350\u9605\u8bfb\u3002</p> <p>\u540c\u65f6\uff0c\u5b9e\u9a8c\u4e09\u6307\u5bfc\u624b\u518c\u4e5f\u63d0\u4f9b\u4e86\u5173\u4e8e Risc-V Sv39 \u7684\u4e00\u4e9b\u4ecb\u7ecd\u3002</p> <p></p> \u54c8\u5e0c\u9875\u8868 <p>\u7b80\u5355\u56de\u987e\u4e00\u4e0b\u6211\u4eec\u9047\u5230\u7684\u95ee\u9898\uff1a\u9875\u8868\u592a\u5927\uff0c\u800c\u4e14\u5fc5\u987b\u662f\u8fde\u7eed\u7684\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\u6211\u4eec\u4f7f\u7528\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u4ece\u865a\u62df\u5730\u5740\u6765\u770b\u662f\u96c6\u4e2d\u7684\uff0c\u4ece\u7269\u7406\u5730\u5740\u6765\u770b\u662f\u7a00\u758f\u7684\uff0c\u53cd\u6b63\u9875\u8868\u4e2d\u6709\u5927\u91cf\u8868\u9879\u662f invalid \u7684\uff0c\u6240\u4ee5\u60f3\u529e\u6cd5\u4e0d\u5b58\u8fd9\u4e9b\u7528\u4e0d\u5230\u7684\u8868\u9879\uff0c\u4e5f\u662f\u4e00\u79cd\u89e3\u51b3\u601d\u8def\u3002</p> Links <ul> <li>Hash function | wikipedia</li> <li>\u54c8\u5e0c | \u9e64\u7fd4\u4e07\u91cc\u7684\u7b14\u8bb0\u672c</li> <li>Hashing | sakuratsuyu's Notes</li> </ul> <p>\u54c8\u5e0c\u9875\u8868(hashed page table)\u7ef4\u62a4\u4e86\u4e00\u5f20\u54c8\u5e0c\u8868\uff0c\u4ee5\u9875\u53f7\u7684\u54c8\u5e0c\u4e3a\u7d22\u5f15\uff0c\u7ef4\u62a4\u4e86\u4e00\u4e2a\u94fe\u8868\uff0c\u6bcf\u4e00\u4e2a\u94fe\u8868\u9879\u5305\u542b\u9875\u53f7\u3001\u5e27\u53f7\u3001\u548c\u94fe\u8868 next \u6307\u9488\uff0c\u4ee5\u6b64\u6765\u5b9e\u73b0\u9875\u53f7\u5230\u5e27\u53f7\u7684\u6620\u5c04\u3002\u6b64\u65f6\uff0c\u4e00\u65b9\u9762\u6211\u4eec\u6ca1\u5fc5\u8981\u518d\u7ef4\u62a4\u4e00\u4e2a\u5927\u82e5\u865a\u62df\u5730\u5740\u603b\u6570\u7684\u8868\uff0c\u53e6\u4e00\u65b9\u9762\u7531\u4e8e\u5f15\u5165\u94fe\u8868\uff0c\u5927\u91cf\u7684\u6307\u9488\u64cd\u4f5c\u5bfc\u81f4\u5bf9\u5730\u5740\u8fde\u7eed\u6027\u7684\u8981\u6c42\u964d\u4f4e\uff0c\u4e5f\u80fd\u53d8\u76f8\u5730\u51cf\u8f7b\u8fde\u7eed\u5185\u5b58\u7ea6\u675f\u3002</p> <p> </p> clustered page tables <p>A variation of this scheme that is useful for 64-bit address spaces has been proposed. This variation uses clustered page tables, which are similar to hashed page tables except that each entry in the hash table refers to several pages (such as 16) rather than a single page. </p> <p>Therefore, a single page-table entry can store the mappings for multiple physical-page frames. Clustered page tables are particularly useful for sparse address spaces, where memory references are noncontiguous and scattered throughout the address space.</p> <p></p> \u53cd\u5f0f\u9875\u8868 <p>\u6211\u4eec\u4e4b\u524d\u7684\u9875\u8868\u901a\u8fc7\u7ef4\u62a4\u865a\u62df\u5730\u5740\u7684\u6709\u5e8f\u6765\u5b9e\u73b0\u5bf9\u9875\u53f7\u7684 random access\uff0c\u4f46\u662f\u4ee3\u4ef7\u662f\u9700\u8981\u7ef4\u62a4\u5927\u91cf\u8fde\u7eed\u865a\u62df\u5730\u5740\u3002\u53cd\u5f0f\u9875\u8868(inverted page table)\u5219\u76f4\u63a5\u5927\u9006\u4e0d\u9053\u5730\u4fee\u6539\u4e86\u6574\u5957\u601d\u8def\u2014\u2014\u4ee5\u7269\u7406\u5730\u5740\u4e3a\u7d22\u5f15\u7ef4\u62a4\u6620\u5c04\u5173\u7cfb\u3002</p> <p>\u540c\u65f6\uff0c\u5728\u8fd9\u79cd\u8bbe\u8ba1\u4e0b\uff0c\u6574\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u53ea\u7ef4\u62a4\u4e00\u5f20\u53cd\u8f6c\u9875\u8868\u3002\u7531\u4e8e\u4e0d\u9700\u8981\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5b58\u50a8\u4e00\u5f20\u9875\u8868\uff0c\u6574\u4f53\u53ea\u5b58\u50a8\u7269\u7406\u5730\u5740\u6570\u91cf\u4e2a\u8868\u9879\uff0c\u6240\u4ee5\u76f8\u5bf9\u6765\u8bf4\u8282\u7701\u4e86\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>\u4f46\u662f\u663e\u7136\uff0c\u8fd9\u6837\u505a\u6211\u4eec\u5c31\u6ca1\u6cd5\u81ea\u7136\u5730\u652f\u6301\u5171\u4eab\u9875\u4e86[^4]\uff0c\u56e0\u4e3a\u7d22\u5f15\u5e94\u5f53\u662f unique \u7684\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u7531\u4e8e\u6211\u4eec\u53ea\u505a\u865a\u62df\u5730\u5740 -&gt; \u7269\u7406\u5730\u5740\u7684\u67e5\u8be2\uff0c\u6240\u4ee5\u5728\u8fd9\u79cd\u7ed3\u6784\u4e0b\u6211\u4eec\u53ea\u80fd\u904d\u5386\u6574\u4e2a\u8868\u6765\u627e\u6620\u5c04\u5173\u7cfb\u3002\u8bf8\u5982\u6b64\u7c7b\u8fd8\u6709\u4e0d\u5c11\u9650\u5236\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u6211\u89c9\u5f97\u8fd9\u4e2a\u65b9\u6cd5\u5f88\u81ed\u3002</p> <p>\u5176\u5b83</p> <p>\u53ef\u80fd\u8fd8\u4f1a\u6d89\u53ca\u4e00\u4e9b\u6bb5\u5f0f\u8bbe\u8ba1\u4ee5\u53ca\u76f8\u5173\u8bbe\u8ba1\uff0c\u4f46\u662f\u5e76\u4e0d\u4e3b\u6d41\uff0c\u4f46\u8003\u8bd5\u53ef\u80fd\u4f1a\u8003\uff0c\u5927\u5bb6\u53ef\u4ee5\u9009\u62e9\u6027\u53bb\u4e86\u89e3\u4e00\u4e0b\u3002</p>"},{"location":"OS/Unit3-Part1/#_16","title":"\u4ea4\u6362\u6280\u672f","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c\u53ea\u6709\u5728\u5185\u5b58\u4e2d\u7684\u6307\u4ee4(instructions)\u624d\u80fd\u88ab CPU \u6267\u884c\uff0c\u56e0\u800c\u5185\u5b58\u5927\u5c0f\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9650\u5236\u4e86\u591a\u9053\u7a0b\u5ea6(degree of multiprogramming)\u3002\u4f46\u662f\uff0c\u5927\u90e8\u5206\u5185\u5bb9\u5e76\u4e0d\u9700\u8981\u5168\u7a0b\u5f85\u5728\u5185\u5b58\u4e2d[^6]\uff0c\u5373\u4e0d\u4f1a\u9891\u7e41\u5730\u88ab\u4f7f\u7528\u3002</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5728\u4e0d\u9700\u8981\u7684\u65f6\u5019\u5c06\u90e8\u5206\u5185\u5bb9\u653e\u5728\u540e\u5907\u5b58\u50a8(backing store)\u4e2d\uff0c\u800c\u5728\u9700\u8981\u7684\u65f6\u5019\u518d\u5c06\u5b83\u4eec\u5f04\u5230\u5185\u5b58\u91cc\u2014\u2014\u8fd9\u5c31\u662f\u4ea4\u6362(swap)\u6280\u672f\u3002\u5728\u5e94\u7528\u4ea4\u6362\u6280\u672f\u540e\uff0c\u90a3\u4e9b\u5b9e\u9645\u653e\u5728\u540e\u5907\u5b58\u50a8\u91cc\u7684 instructions\uff0c\u53ef\u4ee5\u201c\u5047\u88c5\u4e5f\u5728\u5185\u5b58\u4e2d\u201d\uff0c\u5373 high level \u7684\u770b\uff0c\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u5b83\u5230\u5e95\u662f\u653e\u5728\u5185\u5b58\u8fd8\u662f\u540e\u5907\u5b58\u50a8\u91cc\uff0c\u4f46\u662f\u4fdd\u8bc1\u5f53 CPU \u9700\u8981\u8bbf\u95ee\u8fd9\u4e00\u5757\u5185\u5bb9\u65f6\uff0c\u8fd9\u4e9b\u5185\u5bb9\u4f1a\u88ab\u8f7d\u5165\u5185\u5b58\u3002</p> <p>\u5728\u8fd9\u91cc\u6211\u4eec\u53ea\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u4ea4\u6362\u7684\u601d\u60f3\uff0c\u800c\u5177\u4f53\u7684\u7ec6\u8282\u4e0e\u5b9e\u73b0\uff0c\u5c06\u4f1a\u5728\u4e4b\u540e\u8fde\u540c\u66f4\u660e\u786e\u7684\u5b9a\u4e49\u7ed9\u51fa\u3002</p>  ![](img/38.png){ width=60% }  Standard swapping of two processes using a disk as a backing store.  <p>\u5728\u6807\u51c6\u7684 swap \u64cd\u4f5c\u4e2d\uff0c\u6211\u4eec\u4ee5\u8fdb\u7a0b\u4e3a\u5355\u4f4d\u8fdb\u884c swap\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u8981\u628a\u6240\u6709 per-process \u7684\u4e1c\u897f\u90fd\u4e00\u540c swap\uff0c\u76f8\u5f53\u4e8e\u201c\u51bb\u7ed3\u201d\u6574\u4e2a process \u6216\u201c\u89e3\u51bb\u201d\u4e86\u6574\u4e2a process\uff0c\u5c31\u597d\u50cf\u8de8\u5185\u5b58\u548c\u540e\u5907\u5b58\u50a8\u8fdb\u884c context switch\u3002\u53ef\u60f3\u800c\u77e5\uff0c\u8fd9\u4e2a\u5f00\u9500\u662f\u5de8\u5927\u7684\u3002</p> <p>\u5982\u4eca\u6211\u4eec\u6709\u5206\u9875\u6280\u672f\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u4ee5\u9875/\u5e27\u4e3a\u5355\u4f4d\u8fdb\u884c swap\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u79f0\u8fd9\u79cd\u4ee5\u9875/\u5e27\u4e3a\u5355\u4f4d\u7684\u4ea4\u6362(swap)\u53eb\u6362\u9875(page)\u3002</p> <p>\u663e\u7136\u8fd9\u91cc\u7684 \u201cpage\u201d \u662f\u57fa\u4e8e Definition 2\u3002</p>  ![](img/39.png){ width=60% }  Swapping with paging.  <p>\u4f18\u52bf</p> <p>\u5229\u7528\u9875\u7f6e\u6362\u6280\u672f\u548c\u865a\u62df\u5185\u5b58\u7684\u7ec4\u5408\u62f3\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9\u8fdb\u7a0b\u6240\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u603b\u548c\u770b\u8d77\u6765\u5927\u4e8e\u786c\u4ef6\u652f\u6301\u7684\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\u4e0a\u9650\uff0c\u6269\u5c55\u62bd\u8c61\u7684\u201c\u5185\u5b58\u201d\u7684\u5bb9\u91cf\u3002</p> <p>  Diagram showing virtual memory that is larger than physical memory. </p> <p>\u5b8f\u89c2\u5730\u6765\u770b\uff0c\u6211\u4eec\u53ef\u4ee5\u6293\u4f4f\u4e3b\u8981\u77db\u76fe\uff0c\u53ea\u5c06\u6bcf\u4e2a\u8fdb\u7a0b\u4e2d\u6700\u8feb\u5207\u9700\u8981\u7684\u90a3\u4e9b\u9875\u7559\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff0c\u5bf9\u8fdb\u7a0b\u8fdb\u884c\u9875\u7ea7\u7684\u5185\u5b58\u7ba1\u7406\uff0c\u4e8e\u662f\u5e73\u5747\u6bcf\u4e2a\u8fdb\u7a0b\u9700\u8981\u5728\u7269\u7406\u5185\u5b58\u4e2d\u7684\u6570\u636e\u91cf\u66f4\u5c0f\u3001\u7269\u7406\u5185\u5b58\u4e2d\u53ef\u4ee5\u5b58\u653e\u7684\u201c\u8fdb\u7a0b\u201d\u6570\u91cf\u66f4\u591a\u3001\u591a\u9053\u7a0b\u5ea6(degree of multiprogramming)\u5f97\u4ee5\u63d0\u9ad8\u3002</p>"},{"location":"OS/Unit3-Part1/#swap","title":"swap \u7a7a\u95f4","text":"<p>\u8fdb\u884c swap \u9700\u8981\u4ece\u540e\u5907\u5b58\u50a8\u4e2d\u6765\u83b7\u53d6\u8fdb\u7a0b\u5185\u5bb9\u3002\u5728\u540e\u5907\u5b58\u50a8\u4e2d\uff0c\u6709\u4e00\u5757\u4e13\u95e8\u7528\u6765\u505a\u8fd9\u4ef6\u4e8b\u7684\u5730\u65b9\uff0c\u53eb\u4ea4\u6362\u7a7a\u95f4(swap space)\uff0c\u901a\u5e38\u548c swap space \u8fdb\u884c\u4ea4\u6362\u4f1a\u66f4\u5feb\u3002\u4f46\u662f\uff0c\u4ee3\u7801\u5e76\u4e0d\u662f\u4e00\u5f00\u59cb\u5c31\u5728\u4ea4\u6362\u7a7a\u95f4\u7684\uff0c\u6211\u4eec\u9700\u8981\u627e\u4e00\u4e2a\u65f6\u673a\u628a\u4ee3\u7801\u653e\u8fdb\u53bb\u4ee5\u540e\uff0c\u624d\u80fd\u7eb5\u4eab\u4e1d\u6ed1\u3002</p> <p>\u4e00\u79cd naive \u7684\u505a\u6cd5\u662f\uff0c\u5728\u8fdb\u7a0b\u521b\u5efa\u7684\u65f6\u5019\u5c31\u628a\u6574\u4e2a\u4ee3\u7801\u955c\u50cf\u653e\u8fdb\u4ea4\u6362\u7a7a\u95f4\uff0c\u8fd9\u4e2a\u505a\u6cd5\u7684\u7f3a\u70b9\u5c31\u662f\u5b83\u7684\u5b9a\u4e49\uff0c\u6211\u4eec\u4f1a\u9700\u8981\u5728\u4e00\u5f00\u59cb\u505a\u4e00\u4e2a\u5927\u89c4\u6a21\u7684\u590d\u5236\uff0c\u8fd9\u4e2a\u505a\u6cd5\u6709\u8bf8\u591a\u663e\u7136\u7684\u5f0a\u7aef\u3002</p> <p>\u53e6\u4e00\u79cd\u505a\u6cd5\u662f\uff0c\u5f53\u4e00\u4e2a page \u7b2c\u4e00\u6b21\u88ab\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u5b83\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u88ab page in\uff1b\u800c\u5728\u88ab replace \u800c page out \u7684\u65f6\u5019\uff0c\u5c06\u5b83\u5199\u5165 swap space\u3002\u8fd9\u6837\uff0c\u4e0b\u6b21\u9700\u8981\u8fd9\u4e2a page \u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u4ece swap space \u91cc page in\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u7b56\u7565\u662f\uff0c\u5f53\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u67d0\u4e2a\u9875\u9762\u65f6\uff0c\u5b83\u4f1a\u76f4\u63a5\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5c06\u8fd9\u4e9b\u9875\u9762\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002\u8fd9\u4e9b\u9875\u9762\u5728\u5185\u5b58\u4e2d\u7684\u526f\u672c\u662f\u4e0d\u4f1a\u88ab\u4fee\u6539\u7684\uff0c\u56e0\u6b64\u5f53\u8fd9\u4e9b\u5185\u5b58\u9700\u8981\u88ab\u66ff\u6362\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u76f4\u63a5\u88ab\u8986\u76d6\u3002\uff08\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u7cfb\u7edf\u672c\u8eab\u5c31\u50cf\u4e00\u4e2a\u540e\u5907\u5b58\u50a8\uff09\u4f46\u662f\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u4e0e\u6587\u4ef6\u76f8\u5173\u8054\u7684\u9875\u9762\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u533f\u540d\u5185\u5b58(anonymous memory)\uff0c\u4f8b\u5982\u8fdb\u7a0b\u7684\u6808\u548c\u5806\uff0c\u4ecd\u7136\u9700\u8981\u4f7f\u7528\u4ea4\u6362\u7a7a\u95f4\u3002</p> <p>\u8fd9\u4e00\u90e8\u5206\u7684\u5185\u5bb9\u5199\u7684\u6bd4\u8f83\u7b80\u7565\uff0c\u5bf9\u5e94\u8bfe\u672c 10.2.3 \u7684\u540e\u534a\u90e8\u5206\u3002</p> <p>\u4f46\u662f\u65e0\u8bba\u5982\u4f55\uff0c\u786c\u76d8\u7684\u901f\u5ea6\u8fd8\u662f\u4e0d\u5982\u5185\u5b58\uff0c\u6240\u4ee5\u5728\u5185\u5b58\u8db3\u591f\u7684\u60c5\u51b5\u4e0b\u6211\u4eec\u4e00\u822c\u4e0d\u4f7f\u7528 swap\u3002</p> <p>\u5728\u4e0b\u4e00\u8282\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u5957\u66f4\u5b8c\u5584\u7684\u865a\u62df\u5185\u5b58\u7ba1\u7406\u7cfb\u7edf\uff1ademand paging\u3002</p> <p>[^1]: Translation lookaside buffer | Wikipedia [^2]: Cache replacement policies | Wikipedia [^3]: \u51fa\u81ea Buttered cat paradox | Wikipedia\uff0c\u6211\u5728\u8fd9\u91cc\u8868\u793a\u6b7b\u5faa\u73af\u3002 [^4]: how does an inverted page table deal with multiple process accessing the same frame | Stack Overflow [^5]: What is the difference between executable and relocatable in elf format? | Stack Overflow [^6]: \u4f8b\u5982 \u24f5 \u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\uff0c\u5f02\u5e38\u7c7b\u578b\u53ef\u80fd\u5f88\u591a\uff0c\u5bf9\u5e94\u7684\u5904\u7406\u65b9\u6848\u53ef\u80fd\u4e5f\u4f1a\u6709\u5f88\u591a\uff0c\u4f46\u5747\u644a\u4e0b\u6765\u6bcf\u4e00\u4e2a\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u7684\u4f7f\u7528\u9891\u7387\u90fd\u4e0d\u4f1a\u5f88\u9ad8\uff1b\u24f6 \u6570\u7ec4\u5217\u8868\u7b49\u76f8\u5bf9\u4e0d\u90a3\u4e48\u667a\u80fd\u7684\u6570\u636e\u7ed3\u6784\u5728\u5b9a\u4e49\u58f0\u660e\u7684\u65f6\u5019\u53ef\u80fd\u5f00\u4e86\u4e00\u5927\u5757\u5185\u5b58\uff0c\u57fa\u672c\u90fd\u662f\u4e3a\u4e86 bound \u4f4f\u53ef\u80fd\u9700\u8981\u7684\u5185\u5b58\u91cf\u7684\u4e0a\u754c\uff0c\u4f46\u662f\u53ef\u80fd\u5b9e\u9645\u4e0a\u7ecf\u5e38\u78b0\u4e0d\u5230\u4e0a\u754c\uff0c\u4f8b\u5982\u6211\u7533\u8bf7\u4e86\u4e00\u4e2a 1024 \u957f\u7684 <code>int</code> \u6570\u7ec4\uff0c\u4f46\u662f\u6211\u53ef\u80fd\u4e00\u822c\u53ea\u4f1a\u7528\u5230\u5176\u4e2d\u7684\u524d 128 \u4e2a\u5143\u7d20\uff1b\u24f7 \u4e00\u4e9b\u53ef\u80fd\u5355\u7eaf\u4e0d\u600e\u4e48\u5e38\u7528\u7684\u529f\u80fd\uff0c\u9053\u7406\u548c\u7b2c\u4e00\u70b9\u662f\u7c7b\u4f3c\u7684\u3002 [^7]: Shared Memory \"Segment\" in Operating System | Stack Overflow [^8]: Where is linux shared memory actually located? | Stack Overflow</p>"},{"location":"OS/Unit3-Part2/","title":"U3 Part 2: \u5185\u5b58\u7ba1\u7406 | Memory Management","text":"<p>\u5bfc\u8bfb</p> <p>\u4e0a\u4e00\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u5185\u5b58\u7684\u4e00\u4e9b\u57fa\u672c\u8bbe\u8ba1\uff0c\u5e76\u5728\u6700\u540e\u63d0\u51fa\u4e86 swap\uff0c\u8fd9\u4e00\u8282\u6211\u4eec\u5c06\u5229\u7528 swap \u7684\u601d\u60f3\uff0c\u63d0\u51fa\u4e00\u5957\u66f4\u5b8c\u5584\u7684\u5185\u5b58\u7ba1\u7406\u7cfb\u7edf\uff1ademand paging\u3002</p>"},{"location":"OS/Unit3-Part2/#_1","title":"\u6309\u9700\u6362\u9875\u7cfb\u7edf\u6982\u8ff0","text":"<p>\u6309\u9700\u6362\u9875(demand paging)^Wiki^\u548c\u4ea4\u6362\u6280\u672f\u4e2d\u7684\u9875\u7f6e\u6362\u5f88\u7c7b\u4f3c\uff0c\u6307\u53ea\u628a\u88ab\u9700\u8981\u7684\u9875\u8f7d\u5165\u5185\u5b58\uff0c\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u7cfb\u7edf\u3002</p> <p>pure demand paging</p> <p>\u5982\u679c\u6fc0\u8fdb\u4e00\u70b9\uff0c\u5982\u679c\u5728\u88ab\u9700\u6c42\u4e4b\u524d\u9875\u4e0d\u4f1a\u88ab\u8f7d\u5165\u5185\u5b58\uff0c\u53ea\u6709\u5728\u5185\u5b58\u88ab\u9700\u6c42\u540e\u624d\u4f1a\u88ab\u8f7d\u5165\u5185\u5b58\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u7eaf\u6309\u9700\u6362\u9875(pure demand paging)\u3002</p> <p>This scheme is pure demand paging: never bring a page into memory until it is required.</p> <p></p> <p>pre-paging</p> <p>Pure demand paging \u7684\u7f3a\u70b9\u5c31\u662f\u5728\u7a0b\u5e8f\u5f00\u59cb\u7684\u65f6\u5019\u4f1a\u4ea7\u751f\u5927\u91cf\u7684 page fault\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u529e\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u5f00\u59cb\u5c06\u9700\u8981\u7684\u9875\u4e00\u8d77\u5b58\u5165\u5185\u5b58\u3002\u8fd9\u79cd\u505a\u6cd5\u53eb\u505a\u9884\u6362\u9875(pre-paging)\u3002</p> <p>\u665a\u4e9b\u6211\u4eec\u4ecb\u7ecd\u7684 working set \u7684\u8bbe\u8ba1\u601d\u8def\u53ef\u4ee5\u7528\u4e8e\u5904\u7406 pre-paging\u3002</p> <p>\u53ef\u4ee5\u60f3\u8c61\uff0c\u73b0\u5728\u7ed9\u5b9a\u4efb\u610f\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u6709\u4e09\u79cd\u53ef\u80fd\uff1a</p> <ol> <li>\u8be5\u201c\u5730\u5740\u201d\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff0c\u9875\u8868\u4e2d\u5b58\u5728\u865a\u62df\u5185\u5b58\u5230\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u662f valid \u7684\uff1b</li> <li>\u8be5\u201c\u5730\u5740\u201d\u5728\u540e\u5907\u5b58\u50a8\u4e2d\uff0c\u9875\u8868\u4e2d\u4e0d\u5b58\u5728\u865a\u62df\u5185\u5b58\u5230\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u662f invalid \u7684\uff1b</li> <li>\u8be5\u201c\u5730\u5740\u201d\u5e76\u6ca1\u6709\u88ab\u5206\u914d\uff0c\u9875\u8868\u4e2d\u4e0d\u5b58\u5728\u865a\u62df\u5185\u5b58\u5230\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u662f invalid \u7684\uff0c\u6216\u6743\u9650\u4e0d\u7b26\uff08\u5982\u8bd5\u56fe\u5199\u5165\u4e00\u4e2a\u53ea\u8bfb\u9875\uff09\uff1b</li> </ol> <p>\u4e0e\u5f15\u5165\u4ea4\u6362\u6280\u672f\u4e4b\u524d\u7684\u9875\u8868\u8bbe\u8ba1\u76f8\u6bd4\uff0c\u591a\u51fa\u6765\u7684\u5c31\u662f\u60c5\u51b5 2.\u3002\u5982\u679c\u7cfb\u7edf\u8bbf\u95ee\u4e86\u4e00\u4e2a\u5728\u9875\u8868\u4e2d\u662f invalid \u7684\u9875\uff0c\u5c31\u4f1a\u751f\u6210\u5f02\u5e38\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u60c5\u51b5\u4e3a\u7f3a\u9875(page fault)\u3002</p> major &amp; minor page fault <p>\u5b9e\u9645\u4e0a\uff0c\u60c5\u51b5 2. \u8fd8\u53ef\u4ee5\u7ec6\u5206\u4e3a\u4e24\u79cd\uff0c\u4e00\u79cd\u662f major/hard page fault\uff0c\u4e00\u79cd\u662f minor/soft page fault\u3002</p> <p>Major page fault \u6307\u7684\u662f\u7f3a\u4e86\u7684\u9875\u4e0d\u5728\u5185\u5b58\u4e2d\u7684\u60c5\u51b5\uff1b\u800c minor page fault \u6307\u7684\u662f\u7f3a\u4e86\u7684\u9875\u5728\u5185\u5b58\u4e2d\u5b58\u5728\uff0c\u53ea\u4e0d\u8fc7\u6ca1\u5728\u5f53\u524d\u9875\u8868\u4e2d\u5efa\u7acb\u6620\u5c04\u3002</p> <p>\u8fd9\u91cc\u7a0d\u5fae\u7ec6\u8bf4\u4e00\u4e0b minor page fault\uff0c\u51fa\u73b0 minor page fault \u6709\u4e24\u79cd\u53ef\u80fd\uff1a</p> <ol> <li>\u8fdb\u7a0b\u53ef\u80fd\u9700\u8981\u5f15\u7528\u4e00\u4e2a\u5171\u4eab\u5e93\u7684 page\uff0c\u800c\u8fd9\u4e2a\u5171\u4eab\u5e93\u7684 page \u5df2\u7ecf\u5728\u5185\u5b58\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u66f4\u65b0\u4e00\u4e0b\u9875\u8868\u628a\u5b83\u94fe\u4e0a\u53bb\u5c31\u884c\u4e86\uff1b</li> <li>\u8fdb\u7a0b\u53ef\u80fd\u9700\u8981\u5f15\u7528\u4e00\u4e2a\u4e4b\u524d\u88ab\u91ca\u653e\u4e86\u7684 page\uff0c\u800c\u90a3\u4e2a\u88ab\u91ca\u653e\u7684 page \u8fd8\u6ca1\u6709\u88ab flush \u6216\u5206\u914d\u7ed9\u522b\u7684\u8fdb\u7a0b\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a page\uff08~~\u6361\u5783\u573e\uff01\u4e94\u79d2\u539f\u5219\uff1f~~\uff09\uff1b</li> </ol> <p>\u533a\u522b\u4e8e\u4e4b\u524d\u7684\u9875\u8868\u8bbe\u8ba1\u2014\u2014\u8bbf\u95ee invalid \u7684\u8868\u9879\u662f\u4e00\u79cd\u9884\u671f\u5916\u884c\u4e3a\uff0c\u73b0\u5728\u4ea7\u751f\u7f3a\u9875\u53cd\u800c\u66f4\u591a\u662f\u4e00\u79cd\u9884\u671f\u5185\u7684\u884c\u4e3a\u2014\u2014\u7cfb\u7edf\u5bf9\u67d0\u4e2a\u88ab page out \u4e86\u7684\u9875\u4ea7\u751f\u4e86\u201c\u9700\u6c42\u201d\u3002\u5f53\u7136\uff0c\u60c5\u51b5 3. \u8fd9\u79cd\u975e\u6cd5\u64cd\u4f5c\u4e5f\u4f1a\u5f15\u8d77\u5f02\u5e38\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5728\u4e4b\u540e\u7684\u5f02\u5e38\u5904\u7406\u8fc7\u7a0b\u4e2d\u5bf9\u6b64\u505a\u533a\u5206\u5e76\u5206\u522b\u5904\u7406\u3002</p> <p>\u8bf4\u5b9e\u8bdd\u5176\u5b9e\u6211\u611f\u89c9\u8fd9\u91cc\u7684\u903b\u8f91\u7a0d\u5fae\u6709\u70b9\u7ed5\uff0c\u53ef\u80fd\u662f\u4e00\u4e9b\u5386\u53f2\u539f\u56e0\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u5c31\u9700\u8981\u53bb\u5904\u7406\u8fd9\u4e2a\u5f02\u5e38\u7684\u5927\u6982\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>page fault \u5904\u7406\u6d41\u7a0b</p> <ol> <li>\u68c0\u67e5\u4e00\u5f20 PCB \u91cc\u7684\u5185\u90e8\u8868\uff0c\u6765\u533a\u5206\u8fd9\u4e2a\u5730\u5740\u5230\u5e95\u662f\u60c5\u51b5 2. \u8fd8\u662f\u60c5\u51b5 3.\uff1b<ol> <li>\u5982\u679c\u662f\u60c5\u51b5 2.\uff0c\u5219\u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\u4ee5\u5c06\u5176 page in\uff1b</li> <li>\u5982\u679c\u662f\u60c5\u51b5 3.\uff0c\u5219\u7ec8\u6b62\u8fdb\u7a0b\uff1b</li> </ol> </li> <li>\u4ece\u53ef\u7528\u5e27\u5217\u8868\u91cc\u62ff\u51fa frame \u7528\u6765\u5199\u5165\uff1b<ul> <li>\u5982\u679c\u53ef\u7528\u5e27\u5217\u8868\u4e3a\u7a7a\uff0c\u5219\u8fdb\u884c\u9875\u7f6e\u6362\uff1b</li> </ul> </li> <li>\u5f00\u59cb\u4ece\u540e\u5907\u5b58\u50a8\u8bfb\u53d6\u5185\u5bb9\uff0c\u5e76\u5199\u5165 frame\uff1b</li> <li>\u5b8c\u6210\u8bfb\u5199\u540e\uff0c\u66f4\u65b0\u5185\u90e8\u8868\u548c\u9875\u8868\u7b49\u5143\u4fe1\u606f\uff1b</li> <li>\u91cd\u65b0\u6267\u884c\u5f15\u8d77 page fault \u7684 instruction\uff1b<ul> <li>\u8be5\u64cd\u4f5c\u5341\u5206\u5173\u952e\uff0c\u7c7b\u4f3c\u4e8e\u6b7b\u9501\u91cc\u7684\u56de\u6eda\u64cd\u4f5c\uff0c\u652f\u6301\u8fd9\u9879\u64cd\u4f5c\u4e5f\u5177\u6709\u4e00\u5b9a\u7684\u96be\u5ea6\uff0c\u5305\u62ec\u5982\u4f55\u786e\u5207\u5730\u6062\u590d\u56de\u6307\u4ee4\u6267\u884c\u4e4b\u524d\u7684\u72b6\u6001\u3001\u5982\u4f55\u6d88\u9664\u6267\u884c\u4e86\u4e00\u534a\u7684\u6307\u4ee4\u7684\u6548\u679c\u7b49\uff1b</li> </ul> </li> </ol> <p>  Steps in handling a page fault. </p> <p>\u6211\u4eec\u53ef\u4ee5\u5728 Lab5 \u91cc\u5bf9\u8fd9\u4e00\u7cfb\u5217\u6b65\u9aa4\u6709\u8ddf\u6df1\u523b\u7684\u5f71\u54cd\uff0cLab5 \u4e2d\u7684 vma \u5927\u6982\u5c31\u662f\u8fd9\u91cc\u7684\u201c\u5185\u90e8\u8868\u201d\u3002</p> <p>\u6162\uff01</p> <p>\u60f3\u8c61\u4e00\u4e0b\uff0c\u6bcf\u5f53\u53d1\u751f\u4e00\u6b21 page fault\uff0c\u5e76\u4e14\u6211\u4eec\u5047\u8bbe\u8fd9\u4e9b page faults \u90fd\u5c5e\u4e8e\u60c5\u51b5 2.\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u4f1a\u7ecf\u5386\u8fd9\u4e9b\u8fc7\u7a0b\uff1a</p> <ol> <li>\u4ea7\u751f\u5f02\u5e38\u540e\uff0c\u8fdb\u884c\u4e00\u6b21 context switch \u540e\u8fdb\u5165\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\uff1b<ol> <li>\u5904\u7406\u5f02\u5e38\uff0c\u5305\u62ec\u51b3\u5b9a\u5f02\u5e38\u7c7b\u578b\u3001\u5728\u5185\u90e8\u8868\u91cc\u5bfb\u627e\u5730\u5740\u5bf9\u5e94\u4e8e\u540e\u5907\u5b58\u50a8\u4e2d\u7684\u4f55\u5904\uff1b</li> <li>\u53d1\u8d77\u540e\u5907\u5b58\u50a8 -&gt; \u5185\u5b58\u7684 I/O \u8bf7\u6c42\uff1b</li> </ol> </li> <li>\uff08\u7b49\u5f85\u8fc7\u7a0b\u4e2d CPU \u88ab\u8c03\u5ea6\uff09\uff1b</li> <li>I/O \u4e2d\u65ad\u4ea7\u751f\uff0c\u6b64\u65f6\u4e5f\u4f1a\u6709\u4e00\u4e2a context switch\uff1b<ul> <li>\u5904\u7406\u4e2d\u65ad\uff0c\u5305\u62ec\u51b3\u5b9a\u4e2d\u65ad\u7c7b\u578b\u3001\u66f4\u65b0\u9875\u8868\u548c\u5176\u4ed6\u5185\u90e8\u8868\uff1b</li> </ul> </li> <li>\u7b49\u5f85 CPU \u518d\u6b21\u8c03\u5ea6\u5230\u8be5\u8fdb\u7a0b\uff0c\u663e\u7136\u8fd9\u91cc\u4e5f\u6709\u4e2a context switch\uff1b<ul> <li>\u505a\u4e00\u4e9b\u56de\u6eda\u64cd\u4f5c\uff0c\u7136\u540e\u91cd\u65b0\u6267\u884c\u5f15\u8d77 page fault \u7684\u6307\u4ee4\uff1b</li> </ul> </li> </ol> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u5904\u7406 page fault \u8d85\u6162\u7684\uff01\u56e0\u6b64\uff0c\u6211\u4eec\u5e94\u5f53\u5c3d\u53ef\u80fd\u51cf\u5c11 page fault rate\u3002</p> \u601d\u8003\u9898 <p>\u4e0b\u9762\u4e24\u6bb5\u7a0b\u5e8f\u5c55\u793a\u7684\u4ee3\u7801\u6bb5\u7684\u6267\u884c\u6548\u7387\u662f\u5426\u6709\u533a\u522b\uff1f\u5982\u679c\u4e0e\u533a\u522b\u7684\u8bdd\uff0c\u54ea\u4e2a\u66f4\u5feb\uff1f\u4e3a\u4ec0\u4e48\uff1f</p> <pre><code>const int N = PAGE_SIZE;\n\nvoid foo() {\n    /* ... */\n    for (int i = 0; i &lt; N; i++) {\n        for (int j = 0; j &lt; N; j++) {\n            a[i][j] = 0;\n        }\n    }\n    /* ... */\n}\n\nvoid bar() {\n    /* ... */\n    for (int j = 0; j &lt; N; j++) {\n        for (int i = 0; i &lt; N; i++) {\n            a[i][j] = 0;\n        }\n    }\n    /* ... */\n}\n</code></pre> \u63d0\u793a <p>\u8003\u8651 <code>a[i][j]</code> \u7684\u5143\u7d20\u5728\u5185\u5b58\u4e0a\u7684\u5206\u5e03\uff0c\u8003\u8651 page fault \u7684\u6b21\u6570\uff1a<code>foo()</code> \u4f1a\u4ea7\u751f \\(N\\) \u6b21 page fault\uff0c\u800c <code>bar()</code> \u4f1a\u4ea7\u751f \\(N^2\\) \u6b21 page fault\u3002</p> <p>\u505a\u5230\u7c7b\u4f3c\u7684\u9898\u7684\u65f6\u5019\u8981\u6ce8\u610f PAGE_SIZE \u7684\u5927\u5c0f\uff0c\u4ee5\u53ca\u4f7f\u7528\u7684 replacement algorithm\u3002</p> <p>\u7a0b\u5e8f\u6267\u884c\u7684\u5c40\u90e8\u6027\u5047\u8bbe\u4e0b\uff0c\u5e94\u5f53\u4e0d\u4f1a\u56e0\u4e3a page fault \u592a\u9891\u7e41\u5bfc\u81f4\u5e26\u6765\u4e0d\u53ef\u63a5\u53d7\u7684\u989d\u5916\u5f00\u9500\u3002\u9700\u8981\u6ce8\u610f\uff0c\u5355\u6761\u6307\u4ee4\u662f\u6709\u53ef\u80fd\u5e26\u6765\u82e5\u5e72\u6b21 page fault \u7684\uff08\u4f8b\u5982\u53ef\u80fd\u5728 instruction fetch \u7684\u65f6\u5019\u4ea7\u751f\u3001\u53ef\u80fd\u5728 operand fetch \u7684\u65f6\u5019\u4ea7\u751f\u7b49\uff09\u3002</p>"},{"location":"OS/Unit3-Part2/#copy-on-write","title":"\u56de\u987e copy on write","text":"<p>\u6211\u4eec\u5728\u8fdb\u7a0b\u7ba1\u7406\u4e00\u8282\u4e2d\u63d0\u51fa\u4e86 copy on write \u6280\u672f\u548c vfork \u6280\u672f\uff0c\u73b0\u5728\u8bfb\u8005\u53ef\u4ee5\u5c1d\u8bd5\u518d\u56de\u987e\u4e00\u4e0b\u8fd9\u4e24\u4e2a\u77e5\u8bc6\u70b9\u4e0e\u672c\u8282\u5185\u5bb9\u7684\u8054\u7cfb\u3002</p>"},{"location":"OS/Unit3-Part2/#_2","title":"\u53ef\u7528\u5e27\u5217\u8868","text":"<p>\u5728 demand paging \u7cfb\u7edf\u91cc\uff0c\u9875\u662f\u52a8\u6001\u5730\u88ab\u6620\u5c04\u5230\u5e27\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u53ef\u7528\u5e27\u5217\u8868(free-frame list)\uff0c\u7528\u6765\u8bb0\u5f55\u5f53\u524d\u54ea\u4e9b\u5e27\u662f\u7a7a\u95f2\u7684\u3002</p>  ![](img/42.svg)  Example of free-frame list.  <p>\u5728\u7cfb\u7edf\u542f\u52a8\u540e\uff0c\u6211\u4eec\u9700\u8981\u5c06\u6240\u6709\u53ef\u7528\u7684\u5e27\u90fd\u52a0\u5165\u5230 free-frame list \u4e2d\uff1b\u5f53\u6709\u7528\u6237\u9700\u8981\u7269\u7406\u5185\u5b58\u65f6\u5019\uff0c\u5c31\u4ece free-frame list \u4e2d\u53d6\u51fa\u4e00\u9879\uff0c\u5bf9\u5176\u8fdb\u884c\u64e6\u9664\uff0c\u5373\u88ab\u9700\u6c42\u65f6\u6e05\u96f6(zero-fill-on-deman)\u3002</p> <p>\u8003\u8651\u4e3a\u4ec0\u4e48\u8981\u6267\u884c zero-fill-on-deman\uff01</p> <p>\u5982\u679c\u8bfb\u8005\u8db3\u591f\u654f\u9510\u5c31\u4f1a\u53d1\u73b0\uff0c\u6211\u4eec\u53ea\u8bf4\u4e86\u600e\u4e48\u53d6\u51fa free-frame\uff0c\u800c\u6ca1\u8bf4 free-frame \u5982\u4f55\u201c\u518d\u751f\u201d\u3002</p> <p>\u5f53\u6211\u4eec\u53d1\u73b0 free-frame list \u4e3a\u7a7a\uff0c\u5373\u6ca1\u6709\u7a7a\u95f2\u7684 frame \u65f6\uff0c\u6211\u4eec\u8003\u8651\u5c06\u4e00\u4e9b\u5148\u524d\u5df2\u7ecf\u88ab\u5206\u914d\u7684 frame \u7ed9 page out \u8d70\uff0c\u62ff\u6765\u7ed9\u5f53\u524d\u8fd9\u4e2a\u9875\u7528\u3002\u800c\u5177\u4f53\u5982\u4f55\u9009\u62e9\u6362\u8d70\u54ea\u4e2a frame\uff0c\u6211\u4eec\u4f1a\u5728\u7f6e\u6362\u7b56\u7565\u4e00\u8282\u4e2d\u4ecb\u7ecd\u3002</p> <p></p> <p>free-frame buffer pool</p> <p>\u867d\u7136\u6211\u4eec\u8fd8\u6ca1\u4ecb\u7ecd\u7f6e\u6362\u7b56\u7565\uff0c\u4f46\u662f\u60f3\u8c61\u4e00\u4e0b\uff0c\u5982\u679c\u7b49\u5230\u6ca1\u6709 free-frame \u7684\u65f6\u5019\u518d\u53bb\u505a\u7f6e\u6362\uff0c\u90a3\u4e48\u8fdb\u7a0b\u5c31\u9700\u8981\u7b49\u5f85\u7f6e\u6362\u5b8c\u6210\u4ee5\u540e\u518d\u5206\u914d\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5728\u8fd9\u91cc\u5f15\u5165\u4e00\u4e2a\u62bd\u8c61\u7684 buffer\uff0c\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1 free-frame list \u59cb\u7ec8\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u7a7a\u95f2\u5e27\uff0c\u4f8b\u5982 3 \u4e2a\u3002\u8fd9\u6837\u5f53\u8fdb\u7a0b\u6765\u7d22\u53d6 free-frame \u7684\u65f6\u5019\uff0cfree-frame list \u5927\u6982\u7387\u603b\u662f\u80fd\u591f\u76f4\u63a5\u7ed9\u51fa\u4e00\u4e2a free-frame \u7684\uff0c\u800c\u7ed9\u51fa free-frame \u540e\uff0c\u5982\u679c\u53d1\u73b0 free-frame list \u4e2d\u7684\u5269\u4f59\u5e27\u6570\u5c0f\u4e8e 3\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u72ec\u7acb\u5730\u5f00\u59cb\u8fdb\u884c\u7f6e\u6362\uff0c\u800c\u4e0d\u5fc5\u963b\u585e\u8fdb\u7a0b\u3002</p> <p>\u53c8\u6216\u8005\uff0c\u6211\u4eec\u4e0d\u4f7f\u7528\u4e00\u4e2a\u786e\u5207\u7684\u754c\uff0c\u800c\u662f\u901a\u8fc7\u4e00\u79cd\u8d1f\u53cd\u9988\u63a7\u5236\uff0c\u7ef4\u62a4\u4e00\u4e2a\u4e0a\u754c\u548c\u4e0b\u754c\uff1a\u5f53 free-frame \u6570\u5c0f\u4e8e\u4e0b\u754c\u65f6\uff0c\u4e00\u7c7b\u53eb\u6536\u5272\u8005(reapers)\u7684\u5185\u6838\u4f8b\u7a0b\u5c31\u5f00\u59cb\u4f7f\u7528 replacement algorithm \u6765 reclaim \u5df2\u7ecf\u88ab\u5206\u914d\u7684 frame\uff0c\u76f4\u5230 free-frame \u7684\u6570\u91cf\u89e6\u78b0\u5230\u4e0a\u754c\u3002</p> <p>  Reclaiming pages. </p> <p>\u8fdb\u4e00\u6b65\u7684\uff0c\u4e07\u4e00\u6b64\u65f6\u51fa\u73b0\u4e86\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\uff0c\u5bfc\u81f4\u5b9e\u9645\u7684 free-frame \u6570\u975e\u5e38\u5c11\uff0c\u8fbe\u5230\u4e86\u4e00\u4e2a\u975e\u5e38\u4f4e\u7684\u754c\uff0c\u6b64\u65f6\u5c31\u51fa\u73b0\u4e86 OOM(out-of-memory)\u3002\u6b64\u65f6\uff0c\u4e00\u4e2a\u53eb\u505a OOM killer \u7684\u4f8b\u7a0b\u5c31\u4f1a\u6740\u6b7b\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u4ee5\u817e\u51fa\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>\u5728 Linux \u4e2d\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u4f1a\u6709\u4e00\u4e2a OOM score\uff0cOOM score \u8d8a\u9ad8\u7ea6\u5bb9\u6613\u88ab OOM killer \u76ef\u4e0a\uff0c\u800c OOM score \u4e0e\u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\u7684\u767e\u5206\u6bd4\u6b63\u76f8\u5173\uff0c\u6240\u4ee5\u5927\u6982\u7684\u611f\u89c9\u5c31\u662f\u8c01\u5185\u5b58\u7528\u7684\u6700\u591a\u5c31\u6740\u8c01\u3002[^1]\u5982\u679c\u8bfb\u8005\u5bf9 Linux \u7684 OOM \u673a\u5236\u6709\u5174\u8da3\uff0c\u53ef\u4ee5\u770b\u770b\u89d2\u6ce8 1\u3002</p> <p></p> <p>\u5bfc\u8bfb</p> <p>\u51c6\u786e\u6765\u8bf4\u63a5\u4e0b\u6765\u5206\u914d\u7b56\u7565\u548c\u7f6e\u6362\u7b56\u7565\u90fd\u5e94\u5f53\u662f demand paging \u7684\u5b50\u6761\u76ee\uff0c\u4f46\u662f\u56db\u7ea7\u6807\u9898\u5b9e\u5728\u592a\u5c0f\u4e86\uff0c\u6240\u4ee5\u6211\u8bbe\u4e3a\u4e86\u4e09\u7ea7\u6807\u9898\u3002</p> <p>\u6211\u4eec\u5df2\u7ecf\u9610\u8ff0\u4e86\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u4e2d\u7684 demand paging \u7cfb\u7edf\u662f\u5982\u4f55\u8fd0\u4f5c\u7684\uff0c\u73b0\u5728\u9700\u8981\u8865\u8db3\u4e00\u4e9b\u7ec6\u8282\u3002</p> <ol> <li>\u5206\u914d\u7b56\u7565\uff1a\u521d\u59cb\u5316\u65f6\uff0c\u5982\u4f55\u5206\u914d\u8fdb\u7a0b\u6240\u9700\u8981\u7684 frame\uff1f</li> <li>\u7f6e\u6362\u7b56\u7565\uff1a\u5f53 free-frame \u4e0d\u8db3\u65f6\uff0c\u5982\u4f55\u8fdb\u884c replacement\uff1f</li> </ol>"},{"location":"OS/Unit3-Part2/#_3","title":"\u5206\u914d\u7b56\u7565","text":"<p>\u5728 pure demand paging \u91cc\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u901a\u8fc7 page fault \u4e0d\u65ad\u201c\u8695\u98df\u201d free-frame\uff0c\u4f46\u5982\u679c\u6211\u4eec\u4e0d\u9002\u7528 pure \u7684 demand paging\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u51b3\u5b9a\u4e00\u5f00\u59cb\u5206\u914d\u591a\u5c11 frames \u7ed9\u4e00\u4e2a process\u3002</p> <p>\u9996\u5148\uff0c\u5bf9\u4e8e\u5355\u4e2a\u8fdb\u7a0b\u7684\u5206\u914d\uff0c\u5b58\u5728\u4e00\u4e2a\u8f83\u4e25\u683c\u7684\u4e0a\u4e0b\u754c\uff1a</p> <p>lower bound &amp; upper bound</p> <ol> <li>\u5206\u914d\u7ed9\u4e00\u4e2a process \u7684 frames \u6570\u91cf\u4e0d\u80fd\u5927\u4e8e free-frame \u603b\u91cf\uff1b<ul> <li>\u5373 the maximum number of frames per process is defined by the amount of available physical memory\uff1b</li> </ul> </li> <li>\u5206\u914d\u7ed9\u4e00\u4e2a process \u7684 frames \u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e process\u300c\u6267\u884c\u6bcf\u4e00\u6761\u6307\u4ee4\u6240\u9700\u8981\u6d89\u53ca\u7684 frames\u300d\u7684\u6700\u5927\u503c\uff1b<ul> <li>\u8fd9\u53e5\u8bdd\u6709\u70b9\u7ed5\uff0c\u7a0d\u5fae\u89e3\u91ca\u4e00\u4e0b\uff1a<ul> <li>\u4e00\u4e9b\u6307\u4ee4\u53ef\u80fd\u4f1a\u9700\u8981\u5f15\u7528\u5176\u5b83 frame\uff08\u4f8b\u5982\u7684 load\uff0cmove\uff0c\u4ee5\u53ca\u4f1a\u4ea7\u751f indirect references \u7684\u6307\u4ee4\u7b49\uff09\uff0c\u800c\u4e14 instruction fetch \u4ee5\u5916\u7684\u989d\u5916 memory reference \u53ef\u80fd\u4e0d\u6b62\u4e00\u4e2a\uff1b</li> <li>\u6211\u4eec\u5e94\u5f53\u4fdd\u8bc1\u6d89\u53ca\u7684\u82e5\u5e72 page \u90fd\u80fd\u88ab\u5b58\u5728\u5185\u5b58\u4e2d\uff1b</li> <li>\u56e0\u6b64\uff0c\u4ece\u67d0\u79cd\u89d2\u5ea6\u6765\u8bf4\uff1athe minimum number of frames per process is defined by architecture\uff1b</li> </ul> </li> </ul> </li> </ol> <p>\u65e9\u671f\u5206\u914d\u7b97\u6cd5(frame-allocation algorithm)\u6309\u7167\u5206\u914d\u7684\u5e27\u7684\u5927\u5c0f\u6765\u5206\uff0c\u4e3b\u8981\u6709\u8fd9\u4e48\u4e24\u79cd\uff1a</p> equal allocation <p>\u987e\u540d\u601d\u4e49\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u5206\u914d\u7684 frame \u603b\u91cf\u90fd\u76f8\u540c\uff0c\u5047\u8bbe\u5171 \\(n\\) \u4e2a process\uff0c\\(m\\) \u5757\u53ef\u7528 frame\uff0c\u90a3\u4e48\u6bcf\u4e2a\u8fdb\u7a0b\u88ab\u5206\u914d\u7684 \\(\\left\\lceil\\frac{m}{n}\\right\\rceil\\)\u3002</p> proportional allocation <p>\u6bd4\u4f8b\u6307\u6309\u8fdb\u7a0b\u7684\u5927\u5c0f\u6765\u5206\u914d\uff0c\u5047\u8bbe\u5171 \\(n\\) \u4e2a process\uff0c\\(m\\) \u5757\u53ef\u7528 frame\uff0c\u5176\u4e2d\u6bcf\u4e2a process \u7684\u5927\u5c0f\u4e3a \\(s_i\\)\uff0c\u90a3\u4e48\u6bcf\u4e2a\u8fdb\u7a0b\u88ab\u5206\u914d\u7684 frame \u5927\u5c0f\u4e3a \\(a_i = \\left\\lceil \\frac{s_i}{\\sum_{j}^n s_j} \\times m\\right\\rceil\\)\u3002</p> proportional allocation with priority <p>\u6ce8\u610f\u5230\uff0c \u76ee\u524d\u63d0\u5230\u7684\u4e24\u79cd\u505a\u6cd5\u90fd\u548c\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u65e0\u5173\uff0c\u4f46\u4ece\u9700\u6c42\u4e0a\u6765\u8bb2\uff0c\u6211\u4eec\u53ef\u80fd\u503e\u5411\u4e8e\u8ba9\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u88ab\u5206\u914d\u66f4\u591a\u7684 frame \u4ee5\u964d\u4f4e page fault rate \u6765\u589e\u52a0\u5b83\u4eec\u7684\u6548\u7387\u3002</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 proportional allocation \u7684\u57fa\u7840\u4e0a\uff0c\u5728\u8ba1\u7b97 \\(a_i\\) \u65f6\u7efc\u5408\u8003\u8651 priority\u3002</p> <p>\u6211\u4eec\u53d1\u73b0\uff0c\u4e0a\u9762\u5173\u4e8e\u5185\u5b58\u5206\u914d\u5927\u5c0f\u7684\u5f0f\u5b50\u4e2d\uff0c\u6709\u4e00\u9879 \\(n\\) \u8868\u793a #process\uff0c\u533a\u522b\u4e8e\u5176\u5b83\u76f8\u5bf9\u9759\u6001\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u4f1a\u5728\u8c03\u5ea6\u8fc7\u7a0b\u4e2d\u52a8\u6001\u53d8\u5316\u7684\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u5206\u914d\u7ed9\u6bcf\u4e2a\u8fdb\u7a0b\u7684 frame \u6570\u91cf\u4e5f\u662f\u4f1a\u52a8\u6001\u53d8\u5316\u7684\u3002</p> <p>\u5728\u591a\u6838\u8bbe\u8ba1\u4e0b\uff0c\u6709\u4e00\u79cd\u8bbe\u8ba1\u53eb\u505a NUMA^Wiki^\uff0c\u6211\u4eec\u5728 Overview \u5176\u5b9e\u4e5f\u63d0\u5230\u8fc7\u3002\u5728\u8fd9\u79cd\u8bbe\u8ba1\u91cc\uff0c\u7531\u4e8e\u786c\u4ef6\u8bbe\u8ba1\u95ee\u9898\uff0c\u4e0d\u540c\u7684 CPU \u90fd\u6709\u81ea\u5df1\u201c\u66f4\u5feb\u201d\u8bbf\u95ee\u7684\u5185\u5b58\u3002\u8bfb\u8005\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684 Wiki \u94fe\u63a5\u505a\u8be6\u7ec6\u4e86\u89e3\u3002</p>"},{"location":"OS/Unit3-Part2/#_4","title":"\u7f6e\u6362\u7b56\u7565","text":"<p>\u5f53 free-frame list \u4e3a\u7a7a\uff0c\u4f46\u7528\u6237\u4ecd\u7136\u9700\u8981 frame \u6765\u8fdb\u884c page in \u65f6\uff0c\u5c31\u9700\u8981\u8fdb\u884c\u9875\u7f6e\u6362(page replacement)\uff0c\u5c06\u5e76\u6ca1\u6709\u6b63\u5728\u88ab\u4f7f\u7528\u7684\u9875\u817e\u51fa\u6765\u7ed9\u9700\u8981 page in \u7684\u5185\u5bb9\u7528\uff0c\u800c\u8fd9\u4e2a\u201c\u88ab\u8981\u6c42\u817e\u51fa\u5730\u65b9\u201d\u7684\u9875\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u727a\u7272\u5e27(victim frame)\u3002</p> <p>\u663e\u7136\u8fd9\u91cc\u7684 \u201cpage\u201d \u662f\u57fa\u4e8e Definition 2\u3002</p> <p>\u6211\u4eec\u7ec6\u5316 page fault \u5904\u7406\u6d41\u7a0b\u7684 2.a. \u9879\uff0c\u5927\u6982\u662f\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a</p> <p>page replacement</p> <ol> <li>\u5229\u7528\u7f6e\u6362\u7b97\u6cd5(replacement algorithm)\u51b3\u5b9a\u54ea\u4e2a frame \u662f victim frame\uff1b</li> <li>\u5982\u679c\u6709\u5fc5\u8981\uff08dirty\uff09\uff0cvictim frame -&gt; \u540e\u5907\u5b58\u50a8\uff1b</li> <li>\u66f4\u65b0\u76f8\u5173\u5143\u4fe1\u606f\uff1b</li> <li>\u8fd4\u56de\u8fd9\u4e2a victim frame \u4f5c\u4e3a free-frame\uff1b</li> </ol> <p>\u5982\u679c\u8fd9\u4e2a victim frame \u5728\u88ab page in \u4ee5\u540e\u6ca1\u6709\u88ab\u4fee\u6539\u8fc7\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5c06\u5b83\u8986\u76d6\uff0c\u4e0d\u9700\u8981\u5199\u56de\u540e\u5907\u5b58\u50a8\uff0c\u80fd\u8282\u7701\u4e00\u6b21\u5185\u5b58\u64cd\u4f5c\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u8fd9\u4e2a victim frame \u88ab\u4fee\u6539\u8fc7\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5c06\u5b83\u5199\u56de\u540e\u5907\u5b58\u50a8\uff0c\u7c7b\u4f3c\u4e8e\u5c06\u4fee\u6539\u7ed9 \u201ccommit\u201d \u4e86\u3002\u800c\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u4f18\u5316\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u4fee\u6539\u4f4d(dirty bit \u6216 modified bit)\u6765\u8bb0\u5f55\u9875\u662f\u5426\u88ab\u4fee\u6539\u8fc7\uff0c\u5f53 frame \u521a\u88ab\u8f7d\u5165\u5185\u5b58\u65f6\uff0cdirty bit \u5e94\u5f53\u4e3a 0\uff1b\u800c\u4e00\u65e6\u5e27\u5185\u6709\u4efb\u4f55\u5199\u5165\u64cd\u4f5c\u53d1\u751f\uff0cdirty bit \u5c31\u4f1a\u88ab\u7f6e 1\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u6765\u8ba8\u8bba\u5177\u4f53\u7684\u7f6e\u6362\u7b97\u6cd5(replacement algorithm)\u3002</p>"},{"location":"OS/Unit3-Part2/#opt","title":"OPT","text":"<p>\u7406\u8bba\u4e0a\u6700\u4f18\uff0c\u5373 \u24f5 \u80fd\u5e26\u6765\u6700\u4f4e\u7684 page fault rate\uff0c\u24f6 \u7edd\u5bf9\u4e0d\u4f1a\u906d\u53d7 Belady's anomaly \u7684\u505a\u6cd5\u662f\uff1a\u5728\u672a\u6765\u6700\u4e45\u7684\u65f6\u95f4\u5185\u4e0d\u4f1a\u88ab\u8bbf\u95ee\u5230\u7684\u9875\u4f5c\u4e3a victim frame\u3002\u8fd9\u53e5\u8bdd\u8bf4\u8d77\u6765\u6709\u70b9\u7ed5\uff0c\u7528\u82f1\u6587\u63cf\u8ff0\u662f\uff1aReplace the page that will not be used for the longest period of time.</p> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\u5c31\u662f\u9009\u4e4b\u540e\u518d\u4e5f\u4e0d\u4f1a\u88ab\u7528\u5230\u7684\u6216\uff08\u5982\u679c\u6ca1\u6709\u524d\u8005\uff09\u4e0b\u4e00\u6b21\u7528\u5230\u7684\u65f6\u95f4\u6700\u665a\u7684\u9875\u4f5c\u4e3a victim frame\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u5b9e\u9645\u4e0a\u5f88\u96be\u6765\u9884\u6d4b\u4e00\u4e2a frame \u4e0b\u4e00\u6b21\u88ab\u4f7f\u7528\u662f\u4ec0\u4e48\u65f6\u5019\uff0c\u6240\u4ee5\u8be5\u65b9\u6cd5\u53ea\u662f\u4e00\u4e2a\u7406\u8bba\u4e0a\u7684\u6700\u4f18\u5efa\u6a21\uff0c\u6211\u4eec\u5728\u540e\u9762\u5e94\u5f53\u8003\u8651\u53bb\u903c\u8fd1\u8fd9\u4e2a\u5efa\u6a21\u3002</p> \u5934\u8111\u98ce\u66b4 <p>\u8fd9\u6bb5\u5185\u5bb9\u6709\u6ca1\u6709\u8ba9\u4f60\u60f3\u8d77\u6211\u4eec\u5df2\u7ecf\u5b66\u8fc7\u7684\u67d0\u4e2a\u4e1c\u897f\uff1f</p> \u63d0\u793a <p>Shortest-Job-First Scheduling!</p> <p>\u5b9e\u9645\u4e0a\uff0c\u4e0b\u9762\u4ecb\u7ecd FIFO \u4f60\u4e5f\u5e94\u5f53\u4f1a\u60f3\u8d77 FCFS \u8c03\u5ea6\u7b97\u6cd5\u3002</p>"},{"location":"OS/Unit3-Part2/#fifo","title":"FIFO","text":"<p>\u5148\u5165\u5148\u51fa(first-in, first-out, FIFO)\u7b56\u7565\uff0c\u5373\u9009\u62e9\u6b63\u5728\u4f7f\u7528\u4e2d\u7684\u3001\u6700\u65e9\u8fdb\u5165\u5185\u5b58\u7684 frame \u4f5c\u4e3a victim frame\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728\u5185\u5b58\u4e2d\u5b8c\u6574\u5730\u7ef4\u62a4\u4e00\u4e2a FIFO \u961f\u5217\u6765\u5b9e\u73b0\u8fd9\u4e2a\u7b56\u7565\u3002</p> <p>FIFO \u7b56\u7565\u7684\u4f18\u70b9\u5c31\u662f\u7b80\u5355\uff0c\u65b9\u4fbf\u5b9e\u73b0\uff1b\u7f3a\u70b9\u662f\u5e76\u4e0d\u591f\u597d\u2014\u2014\u65e9\u88ab\u8f7d\u5165\u7684 page \u4e5f\u53ef\u80fd\u4f1a\u88ab\u9891\u7e41\u7684\u4f7f\u7528\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7528\u88ab\u8f7d\u5165\u7684\u65e9\u665a\u6765\u5efa\u6a21 page \u7684\u4f7f\u7528\u9891\u7387\uff0c\u4f46\u662f\u8fd9\u4e2a\u5efa\u6a21\u76f8\u6bd4 optimal \u7684\u5efa\u6a21\u5e76\u4e0d\u8db3\u591f\u63a5\u8fd1\u3002</p> \u5934\u8111\u98ce\u66b4 <p>\u8bf7\u8bfb\u8005\u8bd5\u7740\u601d\u8003\u4e00\u4e0b\uff0c\u5047\u8bbe\u73b0\u5728\u6700\u65e9\u88ab\u8f7d\u5165\u7684 page \u6b63\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u65f6\u5019\u51fa\u73b0\u4e86\u4e00\u4e2a page fault\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u4f1a\u5bfc\u81f4\u51fa\u73b0\u9519\u8bef\u5417\uff1f</p> \u63d0\u793a <p>\u4f1a\u5f71\u54cd\u6548\u7387\uff0c\u4f46\u662f\u4e0d\u4f1a\u51fa\u9519\u54e6\uff01</p> <p> Belady's anomaly <p>\u8fd9\u4e00\u6bb5\u5185\u5bb9\u6ca1\u5565\u7528\uff0c\u53ea\u662f\u4e00\u4e2a\u6709\u8da3\u7684\u73b0\u8c61\u3002</p> <p>\u6709\u4e00\u79cd\u60c5\u51b5\u53eb\u505a Belady's anomaly\uff0c\u5728 FIFO \u7b56\u7565\u4e0b\uff08\u5176\u5b83 replacement algorithm \u53ef\u80fd\u4e5f\u4f1a\u53d1\u751f\uff09\uff0c\u968f\u7740 frame \u6570\u91cf\u7684\u589e\u52a0\uff0cpage fault rate \u53ef\u80fd\u4f1a\u589e\u52a0\u3002</p> <p>\u4f8b\u5982\u5982\u4e0b page \u8bbf\u95ee\u5e8f\u5217\uff1a</p> \\[ 1, 2, 3, 4, 1, 2, 5, 1, 2, 3, 4, 5 \\] <p>\u5728 3 \u4e2a frame \u7684\u60c5\u51b5\u4e0b\uff0cpage fault rate \u4e3a \\(\\frac{9}{12} = 75.0%\\)\uff1b\u800c\u5728 4 \u4e2a frame \u7684\u60c5\u51b5\u4e0b\uff0cpage fault rate \u4e3a\\(\\frac{10}{12} = 83.3%\\)\u3002</p>"},{"location":"OS/Unit3-Part2/#lru","title":"LRU","text":"<p>\u6211\u4eec\u7684\u76ee\u6807\u662f\u4e3a\u4e86\u903c\u8fd1\u96be\u4ee5\u5b9e\u73b0\u7684 optimal\uff0c\u800c optimal \u4e4b\u6240\u4ee5\u96be\u4ee5\u5b9e\u73b0\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u5f88\u96be\u201c\u9884\u77e5\u672a\u6765\u201d\uff0c\u6211\u4eec\u80fd\u5229\u7528\u7684\u53ea\u6709\u5df2\u7ecf\u7ecf\u5386\u8fc7\u7684\u4e8b\u60c5\u3002</p> <p>Least recently used(LRU) \u7b97\u6cd5\u7684\u601d\u8def\u662f\uff0c\u57fa\u4e8e\u300c\u5f88\u4e45\u6ca1\u88ab\u7528\u8fc7\u7684 page \u53ef\u80fd\u5728\u77ed\u671f\u4e0d\u592a\u4f1a\u88ab\u518d\u6b21\u4f7f\u7528\uff0c\u521a\u521a\u7528\u8fc7\u7684 page \u53ef\u80fd\u5728\u77ed\u671f\u88ab\u9891\u7e41\u5730\u7528\u300d\u7684\u5047\u8bbe\uff0c\u7528\u201c\u6700\u4e45\u6ca1\u7528\u8fc7\u201d\u6765\u5efa\u6a21\u300c\u672a\u6765\u6700\u4e45\u65f6\u95f4\u5185\u4e0d\u4f1a\u88ab\u8bbf\u95ee\u300d\uff0c\u5373\u9009\u62e9\u6700\u4e45\u6ca1\u88ab\u8bbf\u95ee\u8fc7\u7684 frame \u4f5c\u4e3a victim\u3002</p> <p>LRU \u662f\u6bd4\u8f83\u5e38\u7528\u7684 replacement algorithm\uff08\u5b9e\u9645\u4e0a\u662f LRU-Approximation\uff09\uff0c\u56e0\u4e3a\u662f\u88ab\u8ba4\u4e3a\u6bd4\u8f83\u597d\u7684 replacement algorithm\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u6765\u8003\u8651\u5982\u4f55\u5b9e\u73b0 LRU\uff0c\u6216\u8005\u8bf4\uff0c\u5982\u4f55\u6765\u7ef4\u62a4\u4e00\u4e2a frame \u6709\u591a\u4e45\u6ca1\u88ab\u8bbf\u95ee\u8fc7\u3002</p> <p>stack algorithms</p> <ol> <li>\u8ba1\u6570\u5668\uff1a\u4f7f\u7528\u4e00\u4e2a\u8ba1\u6570\u5668\u6765\u6807\u8bb0\u4e00\u4e2a\u5e27\u6709\u591a\u4e45\u6ca1\u88ab\u4f7f\u7528\u8fc7\uff1b<ol> <li>\u5f53\u4e00\u4e2a frame \u88ab\u4f7f\u7528\u7684\u65f6\u5019\u5c06\u8ba1\u6570\u5668\u5f52\u96f6\uff1b</li> <li>\u9700\u8981\u8003\u8651\u6bcf\u4e2a frame \u7684\u8ba1\u6570\u5668\u90fd\u9700\u8981\u88ab\u5b9a\u671f\u66f4\u65b0\uff1b</li> <li>\u9700\u8981\u8003\u8651\u8ba1\u6570\u5668\u53ef\u80fd\u6ea2\u51fa\uff1b</li> <li>\u5728\u627e least recently used frame \u7684\u65f6\u5019\u9700\u8981\u53bb\u641c\u7d22 counter \u6700\u5927\u7684 frame\uff08\u4f60\u4e5f\u53ef\u4ee5\u8003\u8651\u7528\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53bb\u7ef4\u62a4\u5b83\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u8bbe\u8ba1\u590d\u6742\u5ea6\uff09\uff1b</li> </ol> </li> <li>\u94fe\u8868\u5e8f\u5217\uff1a\u4f7f\u7528\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u6765\u7ef4\u62a4\u4e00\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0cframe \u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\u6697\u793a\u4e86\u5b83\u4eec\u6700\u8fd1\u88ab\u4f7f\u7528\u7684\u65f6\u95f4\uff1b<ul> <li> <p>\u8c8c\u4f3c\u4e3b\u6d41\u90fd\u7528\u201c\u6808\u201d\u6765\u5efa\u6a21\uff0c\u4f46\u6211\u89c9\u5f97\u8fd9\u4e0d\u662f\u6808\uff0c\u51b5\u4e14\u8bf4\u662f\u6808\uff0c\u5176\u5b9e\u73b0\u8fd8\u662f\u7528\u53cc\u5411\u94fe\u8868\uff1b</p> </li> <li>\u6bcf\u5f53\u4e00\u4e2a frame \u88ab\u4f7f\u7528\u7684\u65f6\u5019\uff1a<ol> <li>\u5982\u679c\u5b83\u5728\u94fe\u8868\u4e2d\uff0c\u5c31\u5c06\u5b83\u79fb\u52a8\u5230\u94fe\u8868\u5934\u90e8\uff1b</li> <li>\u5982\u679c\u5b83\u4e0d\u5728\u94fe\u8868\u4e2d\uff0c\u5c31\u5c06\u5b83\u52a0\u5165\u5230\u94fe\u8868\u5934\u90e8\uff1b</li> </ol> </li> <li>\u8fd9\u79cd\u8bbe\u8ba1\u4e0b\u6bcf\u6b21\u7684 \u201cleast used frame\u201d \u603b\u662f\u4f4d\u4e8e\u5e8f\u5217\u672b\u5c3e\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u505a\u989d\u5916\u7684\u641c\u7d22\uff1b</li> </ul> </li> </ol> <p>\u4e0a\u9762\u4e24\u79cd\u505a\u6cd5\u90fd\u88ab\u79f0\u4e3a\u6808\u7b97\u6cd5(Stack Algorithms)\u3002</p> <p>\u867d\u7136\u6211\u575a\u6301\u8ba4\u4e3a\u8fd9\u91cc\u548c\u6808\u6ca1\u5173\u7cfb\u3002</p> <p>\u4f18\u52bf</p> <ol> <li>LRU \u5bf9\u4e8e optimal \u7684\u62df\u5408\u662f\u6bd4\u8f83\u597d\u7684\uff1b</li> <li>LRU \u7b97\u6cd5\u4e0d\u4f1a\u51fa\u73b0 Belady's anomaly\uff1b</li> </ol> <p>\u7f3a\u9677</p> <ol> <li>\u5bf9\u4e8e\u8ba1\u6570\u5668\u505a\u6cd5\uff0c\u7ef4\u62a4\u6bcf\u4e2a frame \u7684 clock \u60f3\u60f3\u5c31\u5f88\u6162\uff0c\u9664\u975e\u6709\u7279\u5b9a\u7684\u786c\u4ef6\u6765\u4f18\u5316\u8fd9\u4e2a\u64cd\u4f5c\uff08\u4f8b\u5982\u4e0d\u9700\u8981\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u64cd\u5fc3 clock \u7684\u7ef4\u62a4\uff09\uff1b</li> <li>\u5bf9\u4e8e\u4e24\u8005\uff0c\u7531\u4e8e\u6bcf\u6b21\u5185\u5b58\u88ab\u8bbf\u95ee\u7684\u65f6\u5019\u90fd\u9700\u8981\u8fdb\u884c\u7ef4\u62a4\uff0c\u5982\u679c\u901a\u8fc7 interrupt \u6765\u8c03\u7528 stack algorithms\uff0c\u90a3\u4e48\u5f00\u9500\u5c06\u4f1a\u5de8\u5927\uff1b</li> </ol>"},{"location":"OS/Unit3-Part2/#lru-approx","title":"LRU Approx.","text":"<p>\u7531\u4e8e\u6211\u4eec\u5728 Stack Algorithm \u91cc\u63d0\u5230\u7684\u8bf8\u591a\u5f0a\u7aef\uff0c\u6211\u4eec\u8003\u8651\u8fd1\u4f3c\u5730\uff0c\u5b9e\u73b0 LRU \u7b97\u6cd5\u2014\u2014\u5b9e\u9645\u4e0a\u662f\u8fd1\u4f3c\u5b9e\u73b0 Stack Algorithm\u3002</p> <p>\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u53eb reference bit \u7684\u529f\u80fd\u3002\u6240\u6709 frame \u90fd\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5173\u8054\u7684 reference bit\uff0c\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u90fd\u4f1a\u88ab\u7f6e 0\uff1b\u800c\u6bcf\u5f53 frame \u88ab\u4f7f\u7528\u65f6\uff0creference bit \u5c31\u4f1a\u88ab\u7f6e 1\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u89c2\u5bdf reference bit \u6765\u89c2\u5bdf\u67d0\u4e9b frame \u662f\u5426\u88ab\u4f7f\u7528\u8fc7\u3002</p> <p>\u5f00\u59cb\u4e4b\u524d\uff0c\u6211\u4eec\u5206\u6790 LRU \u7684\u9650\u5236\uff0c\u4e3b\u8981\u4f53\u73b0\u5728\u4e24\u4e2a\u65b9\u9762\uff1a\u24f5 \u9700\u8981\u5168\u90e8\u5386\u53f2\u4fe1\u606f\uff0c\u7ef4\u62a4\u6210\u672c\u8f83\u5927\uff08\u9700\u8981\u8bbe\u8ba1\u6570\u636e\u7ed3\u6784\u6765\u5b58\u50a8\uff09\uff1b\u24f6 \u6570\u636e\u7ef4\u62a4\u8fc7\u4e8e\u9891\u7e41\uff0c\u6bcf\u6b21\u4f7f\u7528 frame \u90fd\u9700\u8981\u7528\u4e00\u6bb5\u4e0d\u5c0f\u7684\u5f00\u9500\u53bb\u66f4\u65b0\u72b6\u6001\u3002</p> <p>\u5bf9\u5e94\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a\u24f5 \u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u53ea\u5173\u6ce8\u4e00\u4e2a\u90bb\u57df\u91cc\u7684\u5386\u53f2\u4fe1\u606f\uff0c\u24f6 \u6211\u4eec\u53ef\u4ee5\u964d\u4f4e\u66f4\u65b0 frame \u4fe1\u606f\u7684\u9891\u7387\u3002\uff08\u867d\u7136\u5bf9\u4e8e\u540e\u8005\uff0c\u5b9e\u9645\u4e0a\u5982\u679c\u5bf9\u5e94\u4e8e reference bit \u7684\u66f4\u65b0\uff0c\u5176\u5b9e\u5e76\u6ca1\u6709\u964d\u4f4e\u9891\u7387\u3002\uff09</p> Additional-Reference-Bits Algorithm <p>\u53ea\u6709 reference bit \u7684\u8bdd\u6ca1\u6cd5\u53cd\u5e94\u51fa frame \u4f7f\u7528\u7684\u201c\u8fdc\u8fd1\u201d\uff0c\u4e5f\u5c31\u662f\u4f7f\u7528\u7684\u987a\u5e8f\u3002</p> <p>\u65e2\u7136\u7f3a\u7684\u662f\u987a\u5e8f\uff0c\u6211\u4eec\u5c31\u8003\u8651\u5efa\u6a21 frame \u7684\u4f7f\u7528\u8fdc\u8fd1\u3002\u5176\u4e2d\u6700\u9996\u8981\u7684\u4e00\u4e2a\u4efb\u52a1\u5c31\u662f\u83b7\u53d6\u5386\u53f2\u4fe1\u606f\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7528\u4e00\u4e9b bits \u6765\u5b58\u50a8\u6bcf\u4e2a frame \u7684\u5386\u53f2\u4f7f\u7528\u4fe1\u606f\uff1b\u7136\u540e\u5b9a\u671f\uff08\u5229\u7528\u65f6\u949f\u4e2d\u65ad\uff09\u5730\u53bb\u68c0\u67e5\u3001\u5b58\u50a8\u5f53\u524d\u65f6\u95f4\u5f53\u524d frame \u7684 reference bit\uff0c\u76f8\u5f53\u4e8e\u68c0\u6d4b\u4e0a\u4e00\u4e2a\u91c7\u6837\u95f4\u9694\u4e2d\u8be5\u5e27\u6709\u6ca1\u6709\u88ab\u7528\u8fc7\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u6bcf\u4e2a frame \u4e00\u4e2a \\(k\\) bits \u7684 bits vector \\(h = (h_{k-1}h_{k-2} \\dots h_{1}h_{0})_2, \\quad h_i \\in \\{0, 1\\}\\) \u7528\u6765\u5b58\u50a8\u5386\u53f2\u7684 reference bits\uff1b\u7136\u540e\u6bcf\u8fc7 \\(\\Delta t\\) ms\uff0c\u5c31\u4ea7\u751f\u4e00\u6b21\u65f6\u949f\u4e2d\u65ad\uff0c\u68c0\u67e5 frame \\(f_i\\) \u7684 reference bit \\(r_{t}\\)\uff08\u4e3a\u4e86\u7b80\u6d01\u6211\u4eec\u7701\u7565\u8fd9\u4e2a \\(i\\)\uff09\uff0c\u6b64\u65f6\u6211\u4eec\u66f4\u65b0 \\(h' = (r_{i,t}h_{k-1}h_{k-2} \\dots h_{2}h_{1})_2\\)\uff0c\u5373\u5c06 \\(h\\) \u53f3\u79fb\u4e00\u4f4d\uff0c\u5728\u9ad8\u4f4d\u8865 \\(r_{i,t}\\)\u3002</p> <p>\u5b9e\u9645\u4e0a \\(h\\) \u662f\u4e00\u4e2a\u7c7b\u4f3c\u961f\u5217\u7684\u5b58\u5728\uff0c\u800c\u6bcf\u6b21\u68c0\u67e5\u4f1a\u628a reference bit \u7ed9 push \u8fdb\u8fd9\u4e2a\u961f\u5217\u91cc\u3002\u56e0\u6b64\uff0c\\(h\\) \u6362\u4e00\u4e2a\u5199\u6cd5\u5c31\u662f\uff1a\\(h' = (\\underbrace{r_{t}r_{t-1}r_{t-2}r_{t-3} \\dots }_{k\\text{ bits}})_2\\)\uff0c\u4e5f\u5c31\u662f\u6700\u8fd1\u7684 \\(k\\) \u6b21\u68c0\u6d4b\u7684\u5386\u53f2\u8bb0\u5f55\u3002</p> <p>\u800c\u4e4b\u6240\u4ee5\u4ece\u9ad8\u4f4d\u5f00\u59cb\uff0c\u662f\u56e0\u4e3a\u5728\u6570\u503c\u5927\u5c0f\u4f53\u7cfb\u4e2d\uff0c\u9ad8\u4f4d\u4ee3\u8868\u7740\u9ad8\u6743\u91cd\uff0c\u6b63\u597d\u5bf9\u5e94 reference \u51fa\u73b0\u7684\u8d8a\u8fd1\uff0cframe \u8d8a\u65b0\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u627e\u8fd9\u4e2a bits vector \u4e2d\u6700\u5c0f\u7684\u90a3\u4e2a frame \u4f5c\u4e3a victim frame\u3002</p> Second-Chance Algorithm <p>Second-Chance Algorithm \u53ea\u5229\u7528 reference bit \u6765\u8fdb\u884c\u7f6e\u6362\uff0c\u7c7b\u4f3c FIFO \u7684\u6539\u8fdb\u7248\uff0c\u5728 FIFO \u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u5f15\u5165\u4e86 reference bit\uff0c\u5e76\u4e14\u5b9a\u671f\u64e6\u9664 reference bit\u3002</p> <p>\u6211\u4eec\u5faa\u73af\u5730\u904d\u5386 frames\uff0c\u5e76\u9010\u4e00\u68c0\u6d4b reference bit\uff1a</p> <ol> <li>\u5982\u679c reference bit \u4e3a 0\uff0c\u8bf4\u660e\u91c7\u6837\u95f4\u9694\u4e2d\u8fd9\u4e2a frame \u6ca1\u88ab\u7528\u8fc7\uff0c\u90a3\u4e48\u8fd9\u4e2a frame \u5c31\u662f\u6211\u4eec\u8981\u627e\u7684 victim frame\uff1b</li> <li>\u5982\u679c reference bit \u4e3a 1\uff0c\u8bf4\u660e\u91c7\u6837\u95f4\u9694\u4e2d\u8fd9\u4e2a frame \u88ab\u7528\u8fc7\uff0c\u4e8e\u662f\u7ed9\u8fd9\u4e2a frame \u4e00\u6b21\u201c\u8c41\u514d\u201d\u7684\u673a\u4f1a\uff0c\u5c06\u5b83\u7684 reference bit \u8bbe\u7f6e\u4e3a 0\uff0c\u5e76\u7ee7\u7eed\u5bfb\u627e\u4e0b\u4e00\u4e2a frame\uff1b</li> </ol> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u5728 2. \u4e2d\u4e3a\u4ec0\u4e48\u8981\u5c06\u5b83\u7f6e 0\uff1f\u8fd9\u4e2a\u7f6e 0 \u7684\u542b\u4e49\u548c\u5728\u65f6\u949f\u4e2d\u65ad\u91c7\u6837\u7684\u65f6\u5019\u7684\u7f6e 0 \u4e00\u6837\u5417\uff1f</p> \u63d0\u793a <p>\u8fd9\u5c31\u662f Second-Chance Algorithm \u4e2d\u7684 \u201csecond\u201d \u7684\u6765\u6e90\u3002\u5c06\u5b83\u7f6e 0 \u540e\u4e0b\u4e00\u5faa\u73af\u518d\u78b0\u5230\u5b83\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u4f1a\u518d\u88ab\u201c\u8c41\u514d\u201d\u4e86\u3002</p> <p>\u663e\u800c\u6613\u89c1\u7684\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8be5\u7b97\u6cd5\u53ef\u80fd\u4f1a\u9000\u5316\u4e3a FIFO\uff0c\u751a\u81f3\u66f4\u5dee\uff0c\u627e\u5230 victim page \u4e4b\u524d\uff0c\u8be5\u7b97\u6cd5\u6700\u591a\u53ef\u80fd\u4f1a\u904d\u5386\u4e00\u6574\u904d frames\u3002\u800c\u8be5\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u770b\u4f5c Additional-Reference-Bits Algorithm \u7684\u7b80\u5316\u7248\uff0c\u5982\u679c\u8bf4 Additional-Reference-Bits Algorithm \u662f\u901a\u8fc7\u6bd4\u8f83\u82e5\u5e72\u8f6e\u91c7\u6837\u7684\u5386\u53f2\u91c7\u6837\u8bb0\u5f55\u6765\u5bf9 frames \u505a\u6392\u5e8f\uff0c\u4ee5\u51b3\u5b9a\u54ea\u4e00\u4e2a\u662f \u201cLRU\u201d\uff1b\u90a3\u4e48 Second-Chance Algorithm \u5c31\u662f\u5728\u4e00\u4e2a\u91c7\u6837\u5468\u671f\u91cc\uff0c\u5c06 frames \u505a\u4e8c\u503c\u5206\u7c7b\uff0c\u5728\u201c\u8fdc\u8fd1\u201d\u8fd9\u4ef6\u4e8b\u7684\u5efa\u6a21\u4e0a\uff0c\u66f4\u52a0\u6fc0\u8fdb\u548c\u7c97\u7c92\u5ea6\u3002</p> Enhanced Second-Chance Algorithm / NRU <p>\u4e66\u4e2d\u6709\u4e00\u53e5\u8bdd\u4ee4\u4eba\u8d39\u89e3\uff0c\u6211\u53d1\u73b0\u5df2\u7ecf\u6709\u4eba\u5728 StackOverflow \u4e0a\u95ee\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u65e2\u7136 Second-Chance Algorithm \u7684\u5efa\u6a21\u6709\u70b9\u592a\u6fc0\u8fdb\u548c\u7c97\u7c92\u5ea6\uff0c\u90a3\u6211\u4eec\u8003\u8651\u628a\u7c92\u5ea6\u518d\u5f04\u7ec6\u4e00\u70b9\u3002</p> <p>\u4e4b\u524d\u6211\u4eec\u90fd\u53ea\u770b reference bit\uff0c\u73b0\u5728\u6211\u4eec\u628a dirty bit \u4e5f\u7eb3\u5165\u8003\u8651\u3002\u8003\u8651\u4e8c\u5143\u7ec4 \\((reference, dirty)\\)\uff0c\u4e24\u4e2a bit \u6709\u56db\u79cd\u7ec4\u5408\uff1a</p> <ol> <li>\\((0, 0)\\)\uff1a\u6ca1\u88ab\u7528\u8fc7\uff0c\u4e5f\u6ca1\u88ab\u4fee\u6539\u8fc7\uff1b</li> <li>\\((0, 1)\\)\uff1a\u6ca1\u88ab\u7528\u8fc7\uff0c\u4f46\u88ab\u4fee\u6539\u8fc7\uff1b</li> <li>\\((1, 0)\\)\uff1a\u88ab\u7528\u8fc7\uff0c\u4f46\u6ca1\u88ab\u4fee\u6539\u8fc7\uff1b</li> <li>\\((1, 1)\\)\uff1a\u88ab\u7528\u8fc7\uff0c\u4e5f\u88ab\u4fee\u6539\u8fc7\uff1b</li> </ol> <p>\u7531\u4e8e\u88ab\u4fee\u6539\u8fc7\u7684 frame \u5728\u88ab\u7f6e\u6362\u7684\u65f6\u5019\u9700\u8981\u6267\u884c\u5199\u56de\uff0c\u6240\u4ee5\u6211\u4eec\u5e0c\u671b\u5c3d\u91cf\u665a\u4e00\u70b9\u4f7f\u7528\u8fd9\u7c7b frame\u3002\u5728\u8fd9\u79cd\u5206\u7c7b\u4e0b\uff0c\u524d\u4e24\u79cd\u5408\u5e76\uff0c\u540e\u4e24\u79cd\u5408\u5e76\uff0c\u5c31\u662f\u5148\u524d\u7684 Second-Chance Algorithm \u4e86\u3002</p> <p>\u5728 Enhanced Second-Chance Algorithm \u4e2d\uff0c\u6211\u4eec\u627e\u5230\u7b2c\u4e00\u4e2a 1. \u60c5\u51b5\u7684 frame \u4f5c\u4e3a victim\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u53bb\u627e\u7b2c\u4e00\u4e2a 2. \u60c5\u51b5\u7684 frame \u4f5c\u4e3a victim\u2026\u2026\u4ee5\u6b64\u7c7b\u63a8\u3002[^2]</p> <p>\u56e0\u6b64\uff0cEnhanced Second-Chance Algorithm \u53ef\u80fd\u6700\u591a\u4f1a\u904d\u5386 4 \u6b21 frames\u3002\u5728\u5df2\u7ecf\u4ecb\u7ecd\u7684\u4e09\u4e2a\u7b97\u6cd5\u91cc\uff0c\u5b83\u662f\u552f\u4e00\u4e00\u4e2a\u8003\u8651\u4e86 dirty bit \u7684\u3002\u4e8b\u5b9e\u4e0a\uff0c\u7531\u4e8e dirty bit \u4e5f\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53cd\u6620\u4e86\u9875\u201c\u88ab\u4f7f\u7528\u201d\u7684\u7a0b\u5ea6\uff0c\u867d\u7136\u627e\u7684\u4e0d\u662f\u6700\u4e45\u6ca1\u88ab\u7528\u8fc7\u7684 frame\uff0c\u4f46\u80fd\u591f\u5c3d\u53ef\u80fd\u5730\u6392\u9664\u8fd1\u671f\u4f7f\u7528\u8fc7\u7684 frame\uff0c\u56e0\u6b64\uff0c\u8be5\u7b97\u6cd5\u4e5f\u53eb\u505a NRU(Not Recently Used)\uff0c\u662f\u5b9e\u8df5\u4e2d\u6bd4\u8f83\u5e38\u89c1\u7684\u4e00\u79cd\u5bf9 LRU \u7684\u8fd1\u4f3c\u3002</p>"},{"location":"OS/Unit3-Part2/#_5","title":"\u57fa\u4e8e\u8ba1\u6570\u7684\u7f6e\u6362","text":"<p>\u6211\u4eec\u8003\u8651\u7528 counter \u6765\u8bb0\u5f55\u6b63\u5728\u4f7f\u7528\u7684 frame \u4e2d\u6bcf\u4e2a frame \u88ab\u4f7f\u7528\u7684\u6b21\u6570\uff0c\u7528 counter \u7684\u503c\u6765\u5efa\u6a21\u201c\u4f7f\u7528\u9891\u7387\u201d\u3002\u6309\u7167\u540e\u7eed\u64cd\u4f5c\u4e0d\u540c\u5206\u4e3a\u8fd9\u4e24\u79cd\uff1a</p> <ul> <li>Least frequently used(LFU) \u9009\u62e9 counter \u6700\u5c0f\u7684 frame \u4f5c\u4e3a victim frame\uff1b</li> <li>Most frequently used(MFU) \u9009\u62e9 counter \u6700\u5927\u7684 frame \u4f5c\u4e3a victim frame\uff1b<ul> <li>\u8fd9\u4e2a\u505a\u6cd5\u57fa\u4e8e\u300ccounter \u5c0f\u7684 frame \u53ef\u80fd\u624d\u521a\u521a\u88ab load \u8fdb\u6765\u300d\u8fd9\u4e2a\u5047\u8bbe\uff1b</li> </ul> </li> </ul> <p>\u7f3a\u9677</p> <p>\u663e\u800c\u6613\u89c1\u7684\uff0c\u8fd9\u4e24\u4e2a\u8bbe\u8ba1\u5bf9 optimal \u7684\u62df\u5408\u90fd\u4e0d\u662f\u5f88\u597d\uff0c\u5f00\u9500\u4e5f\u90fd\u5f88\u5927\u3002</p> <p></p> <p>\u9644\u52a0\u9605\u8bfb</p> <p>\u5efa\u8bae\u53bb\u6d4f\u89c8\u4e00\u4e0b Wiki \u7684\u5bf9\u5e94\u6761\u76ee\uff0c\u4e86\u89e3\u4e00\u4e0b\u5e38\u89c1\u7684 replacement algorithm \u6709\u54ea\u4e9b\u3002\u4e0a\u8ff0\u5206\u7c7b\u548c\u8109\u7edc\u548c Wiki \u6709\u4e00\u4e9b\u4e0d\u540c\uff0c\u5b9e\u5728\u662f\u6ca1\u65f6\u95f4\u8003\u7a76\u8fd9\u4e48\u591a\u7c98\u7a20\u7684\u8109\u7edc\u4e86\uff08\u6211\u751a\u81f3\u8fd8\u6ca1\u641e\u6e05\u695a NRU \u548c Enhanced Second Chance \u5230\u5e95\u662f\u4e0d\u662f\u540c\u4e00\u4e2a\u4e1c\u897f\uff0c\u53cd\u6b63\u5c31\u7b97\u4e0d\u4e00\u6837\u5927\u6982\u601d\u8def\u4e5f\u5dee\u4e0d\u591a\uff09\uff0c\u6240\u4ee5\u8bf7\u8bfb\u8005\u81ea\u884c\u4e86\u89e3\u66f4\u591a\u5185\u5bb9\u3002\u8fd9\u4e9b\u7b97\u6cd5\u5185\u5bb9\u90fd\u4e0d\u7b97\u5f88\u591a\uff0c\u4e86\u89e3\u4e00\u4e0b\u66f4\u597d\u3002</p> <p>\u7f6e\u6362\u8303\u56f4</p> <p>\u5728\u5206\u914d\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e3a\u8fdb\u7a0b\u5206\u914d\u4e86\u4e00\u4e9b\u5e27\u4ee5\u7528\u4e8e\u5fc5\u8981\u7684\u8fd0\u7b97\u6d3b\u52a8\u3002\u4f46\u6211\u4eec\u77e5\u9053\uff0c\u7f6e\u6362\u64cd\u4f5c\u4f1a\u52a8\u6001\u5730\u66f4\u65b0 frame \u7684\u4f7f\u7528\u60c5\u51b5\u3002\u4e0d\u77e5\u9053\u4f60\u662f\u5426\u7591\u60d1\u8fc7\uff1a\u7f6e\u6362\u7684\u65f6\u5019\uff0c\u6211\u4eec\u80fd\u5426\u7f6e\u6362\u5176\u5b83\u8fdb\u7a0b\u7684 frame\uff1f\u4ee5\u53ca\u6211\u4eec\u8981\u5982\u4f55\u5b9e\u73b0\u548c\u7ef4\u62a4\u8fd9\u4e9b\u7b56\u7565\u5462\uff1f</p> <p>\u5b9e\u9645\u4e0a\uff0creplacement \u5206\u4e3a local \u548c global \u4e24\u79cd\uff1a</p> <ol> <li>\u4f7f\u7528 local replacement \u65f6\uff0creplacement \u53ea\u53d1\u751f\u5728\u5c5e\u4e8e\u5f53\u524d\u8fdb\u7a0b\u7684\u5e27\u4e2d\uff0c\u56e0\u800c\u4e5f\u5c31\u4e0d\u4f1a\u5f71\u54cd\u5176\u5b83\u8fdb\u7a0b\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff1b</li> <li>\u800c\u5bf9\u5e94\u7684\uff0cglobal replacement \u7684 scope \u662f\u6240\u6709\u5e27\uff0c\u751a\u81f3\u53ef\u80fd\u4e00\u90e8\u5206\u539f\u6765\u5c5e\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u5e27\uff0c\u56e0\u800c\u5b83\u80fd\u5b9e\u73b0\u4e00\u4e9b\u7c7b\u4f3c\u201c\u62a2\u5360\u201d\u7684\u6548\u679c\uff1b<ul> <li>Free-frame buffer pool \u5c31\u662f\u4e00\u79cd\u5929\u7136\u7684 global replacement \u7684\u5b9e\u73b0\u65b9\u5f0f\uff1b</li> </ul> </li> <li>\u5982\u679c\u6211\u4eec\u7a0d\u5fae\u505a\u4e00\u4e9b\u8bbe\u8ba1\uff0c\u6bd4\u5982\u53ea\u5141\u8bb8\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u80fd\u591f\u7f6e\u6362\u4f4e\u4f18\u5148\u7ea7\u7684 frame\uff0c\u5373 priority replacement\uff0c\u5219\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u4f7f\u7528\u7684 frame \u53ef\u80fd\u8d8a\u6765\u8d8a\u591a\uff0c\u8fdb\u800c\u4e0d\u65ad\u4f18\u5316\u9ad8\u4f18\u5148\u7ea7\u8fdb\u7a0b\u7684\u6548\u7387\uff1b</li> </ol> <p>\u5f53\u7136\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u6bcf\u4e2a\u8fdb\u7a0b\u6240\u62e5\u6709\u7684 frame \u6570\u91cf\u88ab minimum frame number \u7ed9 bound \u9650\u4f4f\u3002</p> <p>\u5bf9\u6bd4 local replacement \u548c global replacement\uff0c\u4e3b\u8981\u5c31\u662f\u4e00\u4e2a\u5c01\u95ed\u6027\u548c\u7075\u6d3b\u6027\u7684 trade-off\uff0c\u5f88\u76f4\u89c2\uff1aglobal replacement \u5206\u914d\u66f4\u7075\u6d3b\uff0c\u5185\u5b58\u7684\u5229\u7528\u7387\u66f4\u9ad8\uff0c\u4f46\u5bf9\u4e8e frame \u88ab\u201c\u62a2\u201d\u7684\u8fdb\u7a0b\u6765\u8bf4\uff0c\u6574\u4f53\u8fd0\u884c\u7684\u6548\u7387\u5c31\u4e0d\u7a33\u5b9a\u4e86\uff1b\u53cd\u89c2 local replacement\uff0c\u867d\u7136\u7531\u4e8e\u80fd\u591f\u5229\u7528\u7684\u5185\u5b58\u6709\u9650\uff0c\u53ef\u80fd\u51fa\u73b0\u522b\u7684\u8fdb\u7a0b\u7701\u4e86\u4e0d\u5c11\u4f46\u662f\u81ea\u5df1\u5f88\u5403\u7d27\u7684\u60c5\u51b5\uff0c\u51fa\u73b0\u5185\u5b58\u5229\u7528\u7387\u8f83\u4f4e\u7684\u60c5\u51b5\uff0c\u4f46\u6574\u4f53\u6765\u8bf4\u8f83\u4e3a\u7a33\u5b9a\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u76f8\u5bf9\u6765\u8bf4\u4e0d\u4f1a\u4e92\u76f8\u5e72\u6270\u3002</p> <p>\u4e0a\u9762\u662f\u4e66\u4e0a\u7684\u610f\u601d\uff0c\u4f46\u6211\u8ba4\u4e3a\u8fd9\u4e2a\u8bc4\u4ef7\u8fd8\u662f\u4e0d\u516c\u5e73\u7684\uff0c\u56e0\u4e3a\u6240\u8c13\u7684\u3001\u5c5e\u4e8e\u8fdb\u7a0b\u7684 frames \u7684\u6570\u91cf\u662f\u4f1a\u53d8\u7684\uff0c\u5728\u65b0\u7684\u8fdb\u7a0b\u88ab allocation \u540e\uff0c\u8fdb\u7a0b\u603b\u6570\u4f1a\u589e\u52a0\uff0c\u800c\u8fd9\u4e2a\u65b0\u8fdb\u7a0b\u53ea\u80fd\u4ece\u522b\u7684\u5730\u65b9\u522e\u4e00\u4e9b\u5185\u5b58\u6765\u7528\uff0c\u6240\u4ee5\u5c31\u7b97\u7528\u7684\u662f local replacement\uff0c\u4e5f\u8bf4\u4e0d\u4e0a\u7279\u522b\u7a33\u5b9a\u3002</p> <p>\u800c\u5982\u4eca\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u7684\u4e3b\u8981\u90fd\u662f global replacement\u3002</p>"},{"location":"OS/Unit3-Part2/#_6","title":"\u6296\u52a8","text":"<p>\u5018\u82e5\u7cfb\u7edf\u7684\u591a\u9053\u7a0b\u5ea6\u8fc7\u9ad8\uff0c\u90a3\u4e48\u53ef\u80fd\u5206\u914d\u7ed9\u6bcf\u4e00\u4e2a process \u7684 frames \u6570\u91cf\u5c31\u4f1a\u6bd4\u8f83\u5c11\uff0cprocess \u6240\u4f7f\u7528\u7684 frames \u4e2d\u88ab\u9891\u7e41\u4f7f\u7528\u7684 page \u5360\u6bd4\u66f4\u5927\u3002\u8fd9\u65f6\u5019\u53ef\u80fd\u5c31\u4f1a\u4ea7\u751f\u8f83\u4e3a\u9891\u7e41\u7684 paging \u6d3b\u52a8\u2014\u2014\u51e0\u4e4e\u6240\u6709 frames \u90fd\u6b63\u5728\u88ab\u4f7f\u7528\uff0c\u76f8\u5f53\u4e8e\u6bcf\u6b21\u7f6e\u6362\u90fd\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u65b0\u7684 page fault\u2014\u2014\u8fdb\u800c\u5bfc\u81f4 CPU \u7684\u5229\u7528\u7387\u4e0b\u964d\uff0c\u8fd9\u79cd\u73b0\u8c61\u88ab\u79f0\u4e3a\u6296\u52a8(thrashing)\u3002</p> <p>\u4f8b\u5982\uff0cprocess A \u53ef\u80fd\u62a2\u8d70\u4e86 process B \u7684\u6b63\u8981\u88ab\u4f7f\u7528\u7684 frame\uff0c\u4e8e\u662f\u5bfc\u81f4 process B \u4e4b\u540e\u4f1a\u4ea7\u751f\u4e00\u6b21 page fault\uff1b\u800c\u5728\u5904\u7406\u8fd9\u4e2a page fault \u7684\u65f6\u5019\uff0c\u53ef\u80fd\u53c8\u628a process C \u7684\u6b63\u8981\u4f7f\u7528\u7684 frame \u7ed9\u62a2\u8d70\u4e86\u2026\u2026</p> <p>early paging systems</p> <p></p> <p>\u65e9\u671f\u7684\u8bbe\u8ba1\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u76d1\u63a7 CPU \u5229\u7528\u7387\uff0c\u5982\u679c\u53d1\u73b0 CPU \u5229\u7528\u7387\u4e0d\u591f\u9ad8\uff0c\u5c31\u4f1a\u8ba4\u4e3a CPU \u592a\u95f2\u4e86\uff0c\u4e8e\u662f\u5c1d\u8bd5\u589e\u52a0 degree of multiprogramming\u3002</p> <p>\u4f46\u5982\u679c CPU \u5229\u7528\u7387\u4e0b\u964d\u662f\u7531\u4e8e\u53d1\u751f thrashing\uff0c\u4ea7\u751f\u5927\u91cf I/O \u5bfc\u81f4\u7684\uff0c\u90a3 degree of multiprogramming \u7684\u589e\u52a0\u53cd\u800c\u4f1a\u52a0\u5267 thrashing\uff0c\u8fdb\u800c\u5bfc\u81f4 CPU \u5229\u7528\u7387\u4e0b\u964d\uff0c\u5f62\u6210\u6076\u6027\u5faa\u73af\u3002</p> <p>\u5728\u9047\u5230 thrashing \u95ee\u9898\u7684\u65f6\u5019\uff0c\u7406\u8bba\u4e0a\u6211\u4eec\u5e94\u5f53\u964d\u4f4e degree of multiprogramming \u624d\u5bf9\u3002</p>"},{"location":"OS/Unit3-Part2/#priority","title":"\u4f7f\u7528 Priority","text":"<p>\u53ef\u4ee5\u60f3\u8c61\u5230\uff0c\u8fd9\u91cc\u51fa\u73b0\u4e86\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u4e92\u76f8\u62a2 frame \u7684\u60c5\u51b5\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8ba9\u4e00\u65b9\u201c\u8ba9\u6b65\u201d\u6765\u89e3\u51b3\uff0c\u4f8b\u5982\u4f7f\u7528 priority replacement algorithm \u6765\u89e3\u51b3\u3002</p>"},{"location":"OS/Unit3-Part2/#working-set","title":"Working Set","text":"<p>\u8fd8\u6709\u4e00\u79cd\u57fa\u4e8e\u5c40\u90e8\u6027\u5047\u8bbe\u7684\u505a\u6cd5\uff0c\u53eb working set model\u3002\u5b83\u7684\u5927\u81f4\u601d\u8def\u662f\u5c06\u300c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u5728\u4e00\u4e2a \\(\\Delta\\) \u65f6\u95f4\u7a97\u53e3\u5185\u7528\u5230\u8fc7\u7684 frame\u300d\u5efa\u6a21\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u7684 working set \\(WS_i\\)\uff0c\u5982\u679c \\(\\sum_i |WS_i| &gt; m\\)\uff0c\u5373\u6240\u6709\u8fdb\u7a0b\u7684 working set \u7684\u5927\u5c0f\u4e4b\u548c\u5927\u4e8e\u53ef\u7528 frame \u7684\u6570\u91cf\uff0c\u90a3\u4e48\u5c31\u53ef\u80fd\u4f1a\u51fa\u73b0 thrashing\u3002\u6b64\u65f6\u64cd\u4f5c\u7cfb\u7edf\u53ef\u80fd\u5c31\u4f1a\u9009\u62e9\u6302\u8d77\u67d0\u4e2a process\uff0c\u4ee5\u964d\u4f4e degree of multiprogramming\u3002\u8fd9\u4e2a\u505a\u6cd5\u7684\u4e00\u4e2a\u95ee\u9898\u548c LRU \u662f\u7c7b\u4f3c\u7684\uff0c\u8981\u53bb\u7ef4\u62a4 \\(WS_i\\) \u662f\u6bd4\u8f83\u5403\u529b\u7684\uff0c\u800c\u89e3\u51b3\u529e\u6cd5\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd1\u4f3c\u5730\u53bb\u7ef4\u62a4 \\(WS_i\\)\u3002</p> <p>\u8be6\u7ec6\u5185\u5bb9\u4e0d\u518d\u5c55\u5f00\uff0c\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003 Wiki \u505a\u66f4\u591a\u4e86\u89e3\u3002\u6b64\u5916\uff0cworking set \u7684\u601d\u8def\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0 pre-paging\u3002</p>"},{"location":"OS/Unit3-Part2/#pff","title":"PFF","text":"<p>\u6216\u8005\u4e5f\u80fd\u5229\u7528\u7f3a\u9875\u9891\u7387(Page-Fault Frequency, PFF)\u6765\u505a\u52a8\u6001\u8c03\u8282\uff0c\u7531\u4e8e PFF \u4e0e\u8fdb\u7a0b\u53ef\u7528\u7684 frames \u6570\u91cf\u5927\u81f4\u6210\u8d1f\u76f8\u5173\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u5b9a\u4e0a\u4e0b\u754c\u5e76\u8fdb\u884c\u8d1f\u53cd\u9988\u63a7\u5236\uff1aprocess \u7684 PFF \u8fc7\u9ad8\u65f6\u589e\u52a0\u5b83\u53ef\u7528\u7684 frames \u6570\u91cf\uff0c\u5f53 process \u7684 PFF \u8f83\u4f4e\u65f6\u53ef\u4ee5\u51cf\u5c11\u5b83\u53ef\u7528\u7684 frames \u6570\u91cf\u3002</p> <p>\u4e0d\u8fc7\uff0c\u5bf9\u4e8e\u8be5\u95ee\u9898\uff0c\u5148\u884c\u7684\u6700\u4f73\u89e3\u51b3\u65b9\u6848\u5176\u5b9e\u662f\u589e\u52a0\u7269\u7406\u5185\u5b58\uff0c\u4ece\u786c\u4ef6\u4e0a\u89e3\u51b3\u95ee\u9898\u3002</p>"},{"location":"OS/Unit3-Part2/#_7","title":"\u5185\u5b58\u538b\u7f29","text":"<p>\u5185\u5b58\u538b\u7f29(memory compression)\u7684\u601d\u8def\u533a\u522b\u4e8e swap\uff0c\u628a frame \u6362\u5230 backing store \u91cc\uff0c\u800c\u4e14\u5c1d\u8bd5\u53bb merge \u4e00\u4e9b frame\uff0c\u5373\u5229\u7528\u5185\u90e8\u788e\u7247\u3002</p>"},{"location":"OS/Unit3-Part2/#_8","title":"\u5185\u6838\u5185\u5b58","text":"<p>\u6211\u4eec\u4e4b\u524d\u8ba8\u8bba\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff0c\u5c24\u5176\u662f\u5185\u5b58\u7684\u5206\u914d\u548c\u7f6e\u6362\u673a\u5236\uff0c\u90fd\u662f\u9488\u5bf9 user process \u7684\u3002\u800c\u5185\u6838\u7684\u8fd0\u884c\u540c\u6837\u9700\u8981 memory\uff0c\u4f46\u5b83\u4e0d\u80fd\u4f7f\u7528\u548c user process \u76f8\u540c\u7684\u5185\u5b58\u8bbe\u8ba1\u3002\u7531\u4e8e kernel \u7a0b\u5e8f\u662f\u4e00\u76f4\u8fd0\u884c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u66f4\u4fdd\u5b88\u5730\u4f7f\u7528\u5185\u5b58\uff0c\u8bf8\u5185\u90e8\u788e\u7247\u7684\u95ee\u9898\u5e94\u5f53\u5c3d\u53ef\u80fd\u907f\u514d\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u8bb8\u591a\u64cd\u4f5c\u7cfb\u7edf\u90fd\u5bf9 kernel \u4f7f\u7528 paging \u8bbe\u8ba1\u3002\u518d\u52a0\u4e0a\u7531\u4e8e kernel \u9700\u8981\u548c\u4e00\u4e9b\u786c\u4ef6\u505a\u4ea4\u4e92\uff0c\u800c\u8bb8\u591a\u786c\u4ef6\u8bbe\u5907\u90fd\u53ea\u76f4\u63a5\u4e0e\u7269\u7406\u5185\u5b58\u505a\u4ea4\u4e92\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u5bf9 kernel \u5185\u5b58\u5728\u7269\u7406\u5185\u5b58\u4e0a\u7684\u8fde\u7eed\u6027\u6709\u4e00\u5b9a\u4fdd\u8bc1\u3002</p>"},{"location":"OS/Unit3-Part2/#buddy","title":"Buddy \u7cfb\u7edf","text":"<p>Buddy system^Wiki^ \u53ef\u4ee5\u7528\u6765\u5206\u914d\u7269\u7406\u8fde\u7eed\u7684\u5185\u5b58\uff0c\u5b83\u7531 power-of-2 allocator \u5b9e\u73b0\u3002</p> <p>\u5f53 kernel \u9700\u8981 \\(n\\) KB \u7684\u5185\u5b58\u65f6\u5019\uff0cBuddy system \u4f1a\u5206\u914d\u4e00\u5757 \\(2^k\\) KB \u7684\u7a7a\u95f4\uff0c\u5176\u4e2d \\(k = \\lceil \\log_2{n} \\rceil\\)\u3002</p> <p>\u663e\u800c\u6613\u89c1\u7684\uff0c\u8fd9\u6837\u8fd8\u662f\u5bb9\u6613\u51fa\u73b0\u5185\u90e8\u788e\u7247\uff0cBuddy system \u65e0\u6cd5\u89e3\u51b3\u8fd9\u79cd\u5185\u90e8\u788e\u7247\uff0c\u4f46\u662f\u7a0d\u5019\u63a5\u53d7\u7684 Slab allocation \u53ef\u4ee5\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cBuddy system \u901a\u8fc7\u4e0d\u65ad\u4e8c\u5206\u7684\u65b9\u5f0f\u6765\u5bfb\u627e\u4e00\u5757\u5408\u9002\u7684\u5185\u5b58\uff0c\u5982\u4e0b\u56fe\uff1a</p>  ![](img/45.png){ width=60% }  \u4f8b\u5982 kernel \u7533\u8bf7\u4e00\u5757 21KB \u7684\u5185\u5b58\uff0c\u90a3\u4e48 $C_L$ \u5c31\u662f\u6211\u4eec\u6700\u7ec8\u5206\u914d\u7684\u5185\u5b58\u3002  <p>Buddy system \u8fd8\u6709\u4e00\u4e2a\u7279\u70b9\u662f\uff0c\u5b83\u901a\u8fc7 coalesce \u76f8\u90bb\u7684\u7a7a\u95f2\u5757\u6765\u5f62\u6210\u66f4\u5927\u7684\u5185\u5b58\u5757\uff0c\u4f8b\u5982\u4e0a\u56fe\u53ef\u4ee5\u6309\u7167\u5206\u88c2\u7684\u65b9\u5f0f\u5408\u5e76\u56de 256 KB \u7684\u5927\u5185\u5b58\u5757\uff08~~\u5408\u5e76\u5927\u5185\u5b58~~\uff09\u3002</p>"},{"location":"OS/Unit3-Part2/#slab","title":"Slab \u5206\u914d","text":"<p>Slab \u5206\u914d\u7684\u5927\u6982\u601d\u8def\u662f\u9884\u5148\u4e86\u89e3\u5230 kernel \u5185\u7684\u5e38\u89c1\u6570\u636e\u7ed3\u6784\uff08\u88ab\u79f0\u4e3a\u5404\u79cd object\uff09\u7684\u5927\u5c0f\uff0c\u5e76\u9884\u5148\u51c6\u5907\u597d\u5bf9\u5e94\u7c92\u5ea6\u7684\u5c0f\u5185\u5b58\u5757\uff0c\u6ce8\u518c\u5230\u6bcf\u7c7b object \u7684 cache \u91cc\u3002\u5f53\u4e00\u4e2a object \u9700\u8981\u4f7f\u7528\u5185\u5b58\u65f6\uff0c\u5c31\u67e5\u8be2\u5bf9\u5e94\u7684 cache \u91cc\u662f\u5426\u6709\u7a7a\u95f2\u7684\u5185\u5b58\u5757\uff0c\u5982\u679c\u6709\u5c31\u5206\u914d\u7ed9\u5b83\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u5411 Buddy system \u7533\u8bf7\u3002</p> <p>\u76f8\u5f53\u4e8e\u9884\u5148\u628a\u5185\u5b58\u5206\u6210\u4e86\u82f9\u679c\u5c0f\u76d2\u3001\u51b0\u7bb1\u5927\u7bb1\u3001\u8d85\u5927\u8f66\u5e93\uff0c\u7136\u540e\u6839\u636e\u8981\u653e\u7684\u4e1c\u897f\u7684\u5927\u5c0f\u9009\u62e9\u5408\u9002\u7684\u7a7a\u95f4\u6765\u653e\u3002</p> <p>[^1]: Linux OOM (Out-of-memory) Killer | Medium [^2]: Enhanced Second-Chance Algorithm</p>"},{"location":"OS/Unit4/","title":"Unit 4: \u8f93\u5165/\u8f93\u51fa | I/O","text":"<p>\u8bf4\u660e</p> <p>\u8fd9\u90e8\u5206\u5185\u5bb9\uff08\u5176\u5b9e\u4e5f\u5305\u62ec\u4e4b\u540e\u7684\u5185\u5bb9\uff09\u5199\u7684\u6bd4\u8f83\u7b80\u7565\uff0c\u56e0\u4e3a\u8bf4\u662f\u4e0d\u592a\u96be\uff0c\u4e3b\u8981\u662f\u671f\u672b\u4e86\u6211\u4e5f\u6ca1\u5fc3\u601d\u5199\u592a\u7ec6\u4e86\uff0c\u5982\u679c\u6709\u597d\u4eba\u53ef\u4ee5\u5e2e\u6211\u5b8c\u5584\u4e00\u4e0b\u3002</p>"},{"location":"OS/Unit4/#io","title":"I/O \u6982\u8ff0","text":"<p>I/O \u662f\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u5b83\u662f\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e0e\u5916\u90e8\u4e16\u754c\u4ea4\u6362\u4fe1\u606f\u7684\u901a\u9053\u3002I/O \u8bbe\u5907\u7684\u79cd\u7c7b\u5f88\u591a\uff0c\u5982\u78c1\u76d8\u3001\u6253\u5370\u673a\u3001\u952e\u76d8\u3001\u9f20\u6807\u3001\u663e\u793a\u5668\u3001\u7f51\u5361\u7b49\uff0c\u627f\u62c5\u4e86\u5b58\u50a8\u3001\u901a\u4fe1\u3001\u4eba\u673a\u4ea4\u4e92\u7b49\u82e5\u5e72\u529f\u80fd\u3002\u800c\u6211\u4eec\u77e5\u9053 I/O \u53c8\u662f CPU \u7684\u91cd\u8981\u74f6\u9888\uff0c\u6240\u4ee5 I/O \u7cfb\u7edf\u7684\u8bbe\u8ba1\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u95ee\u9898\u3002\uff08~~\u4f46\u4e0d\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u8003\u70b9\uff1f~~\uff09</p> <p>\u5728 Linux \u4e2d\uff0c\u53d7 \u201ceverything is a file\u201d \u601d\u60f3\u7684\u6307\u5bfc\uff0cI/O \u8bbe\u5907\u4e5f\u88ab\u770b\u4f5c\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\u3002</p> <p>concepts</p> <ul> <li>\u603b\u7ebf(bus)\uff1a\u8fde\u63a5\u5404\u4e2a\u786c\u4ef6\u7ec4\u6210\u7684\u201c\u62bd\u8c61\u201d\u5185\u90e8\u901a\u4fe1\u7ebf\u8def\uff0c\u66f4\u4fa7\u91cd\u4e8e\u5982\u4f55\u89c4\u8303\u5316\u5730\u4f20\u8f93\u6570\u636e\uff0c\u662f\u786c\u4ef6\u4e0e\u534f\u8bae\u7684\u7edf\u4e00[^1]\uff1b</li> <li>\u7aef\u53e3(port)\uff1a\u8bbe\u5907\u4e0e\u603b\u7ebf\u7684\u8fde\u63a5\u70b9\uff1b</li> <li>\u63a7\u5236\u5668(controller)\uff1a\u63a7\u5236\u8bbe\u5907\u7684\u786c\u4ef6\u7ec4\u6210\uff1b<ul> <li>\u96c6\u6210\u5728\u8bbe\u5907\u4e0a\u6216\u5355\u72ec\u5728\u7535\u8def\u677f\u4e0a\uff1b</li> <li>\u901a\u5e38\u5305\u62ec\u5904\u7406\u5668\u3001\u79c1\u6709\u5185\u5b58\u3001\u5fae\u4ee3\u7801\uff08\u5c0f\u91cf\u4ee3\u7801\uff09\u3001\u603b\u7ebf\u63a7\u5236\u5668\u7b49\uff1b</li> </ul> </li> </ul>"},{"location":"OS/Unit4/#io_1","title":"I/O \u8bbf\u95ee\u65b9\u5f0f","text":"<p>\u5f53\u8ba1\u7b97\u673a\u9700\u8981\u8bbe\u5907\u505a\u67d0\u4e9b\u4e8b\u7684\u65f6\u5019\uff0c\u53d1\u51fa\u8bf7\u6c42\uff0c\u6b64\u65f6\u8ba1\u7b97\u673a\u9700\u8981\u7b49\u5f85\u8bbe\u5907\u7684\u54cd\u5e94\uff0c\u6309\u7167\u7b49\u5f85\u65b9\u5f0f\u7684\u4e0d\u540c\uff0c\u5206\u4e3a\u8f6e\u8be2(polling)\u3001\u4e2d\u65ad(interrupt)\u4e24\u79cd\u3002</p> <p>polling</p> <p>\u8f6e\u8be2\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e0e I/O \u8bbe\u5907\u4ea4\u4e92\u7684\u6700\u7b80\u5355\u65b9\u5f0f\u3002\u901a\u5e38\u8bbe\u5907\u4f1a\u7528\u67d0\u79cd\u65b9\u5f0f\u6765\u6807\u8bc6\u8bbe\u5907\u662f\u5426\u53ef\u7528\u6216\u7a7a\u95f2\uff0c\u8f6e\u8be2\u6307\u7684\u662f CPU \u4e0d\u65ad\u5411\u8bbe\u5907\u63a7\u5236\u5668\u67e5\u8be2\u8bbe\u5907\u72b6\u6001\uff0c\u76f4\u5230\u8bbe\u5907\u5c31\u7eea\uff0c\u7136\u540e\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002\u8fd9\u79cd\u65b9\u5f0f\u7684\u7f3a\u70b9\u662f\u9700\u8981\u8fdb\u884c busy wait\uff0c\u5728\u8bbe\u5907\u6bd4\u8f83\u7f13\u6162\u7684\u60c5\u51b5\u4e0b\u4f1a\u964d\u4f4e CPU \u7684\u5229\u7528\u7387\u3002</p> <p>interrupt</p> <p>\u6211\u4eec\u5df2\u7ecf\u5728 Overview \u8bb2\u8fc7\u4e2d\u65ad\u4e86\uff0c\u6240\u4ee5\u6709\u5173\u4e2d\u65ad\u7684\u5177\u4f53\u6280\u672f\u7ec6\u8282\u5c31\u4e0d\u518d\u5c55\u5f00\u3002</p> <p>\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u4e2d\u65ad\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e0e I/O \u8bbe\u5907\u4ea4\u4e92\u7684\u4e3b\u8981\u65b9\u5f0f\uff0c\u8ba1\u7b97\u673a\u5411\u8bbe\u5907\u53d1\u51fa\u8bf7\u6c42\u4ee5\u540e\uff0c\u53ef\u4ee5\u5c06\u5f53\u524d\u8fdb\u7a0b\u8c03\u5ea6\u8d70\uff0c\u7b49\u5230\u8bbe\u5907\u5904\u7406\u5b8c\u6210\u540e\u4f1a\u5411 CPU \u53d1\u9001\u4e2d\u65ad\uff0c\u6b64\u65f6\u8ba1\u7b97\u673a\u518d\u5bf9\u7ed3\u679c\u505a\u5904\u7406\u3002\u4e2d\u65ad\u7684\u4f18\u70b9\u662f CPU \u4e0d\u9700\u8981\u8fdb\u884c busy wait\uff0c\u5728\u8bbe\u5907\u5904\u7406\u65f6\u95f4\u8fdc\u5927\u4e8e\u4e0a\u4e0b\u6587\u4ea4\u6362\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u63d0\u9ad8 CPU \u7684\u5229\u7528\u7387\u3002</p> <p>  Interrupt-driven I/O cycle. </p> <p>\u5b9e\u9645\u4e0a\u4f7f\u7528\u54ea\u79cd\u65b9\u6848\uff0c\u5176\u5b9e\u4e0e \u201cbusy wait\u201d \u7684\u4f18\u52a3\u8fd9\u4e2a\u95ee\u9898\u662f\u7b49\u4ef7\u7684\uff0c\u6211\u4eec\u5df2\u7ecf\u5728\u540c\u6b65\u4e2d\u6709\u6240\u6d89\u53ca\u3002</p> <p>DMA</p> <p>\u4e0a\u9762\u63d0\u5230\u7684\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u57fa\u4e8e CPU \u5168\u6743\u8d1f\u8d23 I/O \u4e0e\u5185\u5b58\u4ea4\u4e92\u7684\u5047\u8bbe\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u4e8b\u60c5\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u5fc5\u987b\u7531 CPU \u6765\u8d1f\u8d23\u3002DMA(direct memory access)\u5141\u8bb8\u5185\u5b58\u548c I/O \u8bbe\u5907\u4e4b\u95f4\u76f4\u63a5\u4ea4\u4e92\uff0c\u4e0d\u7ecf\u8fc7 CPU\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11 CPU \u7684\u8d1f\u62c5\uff0c\u63d0\u9ad8 I/O \u6027\u80fd\u3002DMA \u901a\u5e38\u7531\u72ec\u7acb\u7684\u786c\u4ef6\u8bbe\u5907 DMA controller \u6765\u5b9e\u73b0\u3002</p> <p>\u5bb9\u6613\u60f3\u8c61\uff0cDMA \u6709\u4e00\u5b9a\u9650\u5236\uff0c\u901a\u5e38 DMA \u53ea\u8d1f\u8d23\u505a\u5927\u91cf\u7684\u3001\u4ee5 blocks \u4e3a\u5355\u4f4d\u7684\u6570\u636e\u4f20\u8f93\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5b57\u8282\u7684\u4f20\u8f93\u3002CPU \u9700\u8981\u5411 DMA controller \u53d1\u51fa\u5bf9\u5e94\u7684\u547d\u4ee4\uff0c\u4e4b\u540e\u7684\u4e8b\u60c5\u5c31\u4ea4\u7ed9 DMA \u6765\u5b8c\u6210\u3002\u547d\u4ee4\u901a\u5e38\u5305\u62ec\u64cd\u4f5c\u7c7b\u578b\u3001\u8d77\u59cb\u5730\u5740\u3001\u6570\u636e\u957f\u5ea6\u7b49\uff0c\u4f20\u8f93\u65b9\u5f0f\u4e00\u822c\u662f\u628a\u8981\u6267\u884c\u7684\u6307\u4ee4\u7684\u5730\u5740\u5b58\u5230 DMA controller \u7684\u5bc4\u5b58\u5668\u4e2d\uff0c\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u59d4\u6258 DMA controller \u8fdb\u884c\u4f5c\u4e1a\uff0c\u6709\u70b9\u50cf\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u5f53\u64cd\u4f5c\u5b8c\u6210\u540e\uff0cDMA controller \u4f1a\u5411 CPU \u53d1\u9001\u4e2d\u65ad\u4fe1\u53f7\uff0c\u8868\u793a\u4efb\u52a1\u5b8c\u6210\u3002</p> <p>\u78c1\u76d8\u5c31\u662f\u5178\u578b\u7684\uff0c\u901a\u5e38\u4f7f\u7528 DMA \u6765\u5b9e\u73b0 I/O \u7684\u8bbe\u5907\u3002</p>"},{"location":"OS/Unit4/#io_2","title":"\u5e94\u7528\u7a0b\u5e8f I/O \u63a5\u53e3","text":"<p>\u968f\u7740\u6280\u672f\u53d1\u5c55\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u6807\u51c6\u5316\u3001\u901a\u7528\u5316\u7684 I/O \u65b9\u5f0f\u7684\u9700\u6c42\u4e0e\u5e02\u573a\u591a\u5143\u5316\u3001\u5dee\u5f02\u5316\u7684 I/O \u8bbe\u5907\u4e4b\u95f4\u7684\u77db\u76fe\u65e5\u76ca\u7a81\u51fa\u3002\u56e0\u6b64\uff0c\u4e00\u5957\u901a\u7528\u7684\u3001\u6807\u51c6\u5316\u7684 I/O \u63a5\u53e3\u662f\u5341\u5206\u5fc5\u8981\u7684\u3002</p> <p>\u4e8e\u662f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u4f7f\u7528\u7cfb\u7edf\u8c03\u7528\u5c01\u88c5 I/O \u64cd\u4f5c\uff0c\u5c06\u4e0d\u540c\u64cd\u4f5c\u7684\u5dee\u5f02\u6027\u900f\u660e\u5316\uff0c\u5728 UNIX \u4e2d\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u662f <code>ioctl</code>^Wiki^\u3002</p>  ![](img/50.png){ width=80% }  A kernel I/O structure.  <p>\u5177\u4f53\u6765\u8bf4\uff0c\u4e0d\u540c\u8bbe\u5907\u53ef\u80fd\u5728\u8fd9\u4e9b\u65b9\u9762\u6709\u533a\u522b\uff1a</p> <p>dimensions</p> <ul> <li>\u6570\u636e\u4f20\u8f93\u6a21\u5f0f(data transfer mode)\uff1a<ul> <li>\u9010\u4e2a\u5b57\u8282\u4f20\u8f93\uff0c\u5982 terminal\uff1b</li> <li>\u4ee5\u5757\u4e3a\u5355\u4f4d\u4f20\u8f93\uff0c\u5982 disk\uff1b</li> </ul> </li> <li>\u8bbf\u95ee\u65b9\u6cd5(access method)\uff1a<ul> <li>\u9700\u8981\u987a\u5e8f\u8bbf\u95ee\uff0c\u5982 modem^Wiki^\uff1b</li> <li>\u53ef\u4ee5\u968f\u673a\u8bbf\u95ee\uff0c\u5982 CD-ROM\uff1b</li> </ul> </li> <li>\u4f20\u8f93\u65b9\u6cd5(transfer method)\uff1a<ul> <li>\u540c\u6b65\u7684\uff0c\u9700\u8981\u6309\u9884\u8ba1\u7684\u54cd\u5e94\u65f6\u95f4\u8fdb\u884c\u4f20\u8f93\u5e76\u548c\u7cfb\u7edf\u7684\u5176\u4ed6\u65b9\u9762\u76f8\u534f\u8c03\uff0c\u5982 keyboard\uff1b<ul> <li>\u963b\u585e\u5f0f\uff1a\u4e00\u76f4\u7b49\u5f85\u76f4\u5230 I/O \u5b8c\u6210\uff1b</li> <li>\u975e\u963b\u585e\u5f0f\uff1a\u8fd4\u56de\u5c3d\u53ef\u80fd\u591a\u7684\u6570\u636e\uff0c\u4e0d\u7ba1\u662f\u5426\u5b8c\u6210\uff1b</li> </ul> </li> <li>\u5f02\u6b65\u7684\uff0c\u54cd\u5e94\u65f6\u95f4\u4e0d\u9700\u8981\u89c4\u5219\u6216\u8005\u53ef\u9884\u6d4b\uff0c\u4e0d\u9700\u8981\u4e0e\u5176\u4ed6\u8ba1\u7b97\u673a\u4e8b\u4ef6\u534f\u8c03\uff0c\u5982\u7f51\u7edc I/O\uff1b</li> </ul> </li> <li>\u5171\u4eab(sharing)\uff1a<ul> <li>\u53ef\u5171\u4eab\uff1a\u53ef\u4ee5\u88ab\u591a\u4e2a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5e76\u53d1\u4f7f\u7528\uff0c\u5982 keyboard\uff1b</li> <li>\u72ec\u5360\u7684\uff1a\u4e0d\u80fd\u88ab\u5171\u4eab\uff0c\u5982 tape\uff1b</li> </ul> </li> <li>\u8bbe\u5907\u901f\u5ea6(device speed)</li> <li>I/O \u65b9\u5411(I/O direction)\uff1a<ul> <li><code>R-</code>\uff0c\u5982 CD-ROM\uff1b</li> <li><code>-W</code>\uff0c\u5982 graphics controller^Wiki^\uff1b</li> <li><code>RW</code> \u5982 disk\uff1b</li> </ul> </li> </ul> <p>\u4fee\u6539\u81ea xyx \u7684\u64cd\u4f5c\u7cfb\u7edf\u7b14\u8bb0\u3002</p> <p>[^1]: Bus (computing) | Wikipedia</p>"},{"location":"OS/Unit5/","title":"Unit 5: \u5b58\u50a8 | Storage","text":"<p>\u8bf4\u660e</p> <p>\u8fd9\u90e8\u5206\u5185\u5bb9\uff08\u5176\u5b9e\u4e5f\u5305\u62ec\u4e4b\u540e\u7684\u5185\u5bb9\uff09\u5199\u7684\u6bd4\u8f83\u7b80\u7565\uff0c\u56e0\u4e3a\u8bf4\u662f\u4e0d\u592a\u96be\uff0c\u4e3b\u8981\u662f\u671f\u672b\u4e86\u6211\u4e5f\u6ca1\u5fc3\u601d\u5199\u592a\u7ec6\u4e86\uff0c\u5982\u679c\u6709\u597d\u4eba\u53ef\u4ee5\u5e2e\u6211\u5b8c\u5584\u4e00\u4e0b\u3002</p>"},{"location":"OS/Unit5/#_1","title":"\u786c\u76d8","text":""},{"location":"OS/Unit5/#_2","title":"\u7ed3\u6784","text":"<p>\u786c\u76d8(hard disk, HD)\u662f\u5e38\u89c1\u7684\u4e8c\u7ea7\u5b58\u50a8\uff0c\u5176\u7ed3\u6784\u6309\u7167\u4ece\u5c0f\u5230\u5927\u5206\u4e3a\uff1a\u6247\u533a(sectors)\u3001\u78c1\u9053(tracks)\u3001\u67f1\u9762(cylinders)\uff0c\u4fa7\u9762\u7684\u78c1\u81c2(disk arm)\u4f1a\u4ee5\u6574\u4f53\u79fb\u52a8\u4e0a\u9762\u7684\u6240\u6709\u8bfb\u5199\u78c1\u5934(r/w heads)\u3002</p>  ![](img/46.png){ width=80% }  HDD moving-head disk mechanism.  <p>\u4ece\u786c\u76d8\u4e0a\u8bfb\u5199\u5185\u5bb9\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p>steps</p> <ol> <li>\u78c1\u5934\u79fb\u52a8\u5230\u6307\u5b9a\u7684\u67f1\u9762\uff1b</li> <li>\u78c1\u5934\u79fb\u52a8\u5230\u6307\u5b9a\u7684\u78c1\u9053\uff1b</li> <li>\u78c1\u76d8\u65cb\u8f6c\u5230\u6247\u533a\u4f4d\u4e8e\u78c1\u5934\u4e0b\u65b9\uff1b</li> <li>\u8bfb\u5199\u6247\u533a\u5185\u5bb9\uff1b</li> </ol> <p>\u6309\u7167\u5176\u673a\u68b0\u8fc7\u7a0b\uff0cdisk I/O \u64cd\u4f5c\u7684\u4e3b\u8981\u65f6\u95f4\u6784\u6210\u4e3a\uff1a</p> <p>components</p> <ul> <li>\u5b9a\u4f4d\u65f6\u95f4(positioning time / random-access time)\uff1a<ul> <li>\u5bfb\u9053\u65f6\u95f4(seek time)\uff1a\u78c1\u5934\u79fb\u52a8\u5230\u6307\u5b9a\u67f1\u9762\u7684\u65f6\u95f4\uff1b</li> <li>\u65cb\u8f6c\u65f6\u5ef6(rotational latency)\uff1a\u76ee\u6807\u6247\u533a\u65cb\u8f6c\u5230\u78c1\u5934\u4e0b\u65b9\u7684\u65f6\u95f4\uff1b<ul> <li>\u53d6\u51b3\u4e8e\u78c1\u76d8\u7684\u8f6c\u901f\uff0c\u4e00\u822c\u4ee5 round per minute(rpm) \u8868\u793a\uff0c\u5bb9\u6613\u5f97\u5230\uff0c\u5e73\u5747\u65cb\u8f6c\u65f6\u5ef6\u4e3a \\(\\frac{1}{2} \\cdot \\frac{1}{rpm} \\cdot 60\\) \u79d2\uff1b</li> </ul> </li> </ul> </li> <li>\u4f20\u8f93\u65f6\u95f4(transfer time)\uff1a\u6570\u636e\u5728 disk \u548c\u3000memory \u4e4b\u95f4\u4f20\u8f93\u7684\u65f6\u95f4\uff1b</li> </ul> <p>\u56e0\u6b64\uff0cdisk \u7684\u5e73\u5747 I/O \u64cd\u4f5c\u65f6\u95f4\u4e3a\uff1a</p> \\[ \\begin{aligned}     \\text{Average I/O time}      &amp;= \\underbrace{\\text{average seek time} + \\text{rotational latency}}_\\text{average access time} \\\\     &amp;+ \\underbrace{\\frac{\\text{data to transfer}}{\\text{transfer rate}}}_{\\text{transfer time}} \\\\     &amp;+ \\text{controller overhead} \\end{aligned} \\] \ud83c\udf30 <p>\u7ed9\u51fa\u4e00\u4e2a\u5305\u542b\u5177\u4f53\u53c2\u6570\u7684\u4f8b\u5b50\u6765\u611f\u53d7 I/O \u64cd\u4f5c\u6162\u5728\u54ea\u91cc</p> <p>\u4e00\u4e2a 7200 rpm \u7684\u786c\u76d8\uff08\u6240\u4ee5\u65cb\u8f6c\u65f6\u5ef6\u4e3a 4.17 ms\uff09\uff0c\u5176\u5e73\u5747\u5bfb\u9053\u65f6\u95f4\u4e3a 5 ms\uff0c\u4f20\u8f93\u901f\u7387\u4e3a 1 Gb/sec\uff0c\u63a7\u5236\u5668\u5f00\u9500\u4e3a 0.1 ms\uff0c\u90a3\u4e48\u8bfb\u53d6 4 KB \u7684\u6570\u636e\u5bf9\u5e94\u7684\u5e73\u5747 I/O \u64cd\u4f5c\u65f6\u95f4\u4e3a\uff1a</p> \\[ 5 \\text{ms} + 4.17 \\text{ms} + \\frac{4 \\times 1000 \\times 8}{1 \\times 1000 \\times 1000 \\times 1000} \\text{sec} + 0.1 \\text{ms} = 9.302 \\text{ms} \\] <p>\u6839\u636e\u4e0a\u9762\u7684\u5206\u6790\u6211\u4eec\u4e0d\u96be\u5f97\u5230\u5982\u4e0b\u7ed3\u8bba\uff1a</p> <p>conclusion</p> <ol> <li>\u5f00\u9500\u7684\u5927\u5934\u662f access time\uff1b</li> <li>\u8bf7\u6c42\u6d89\u53ca\u7684\u5185\u5b58\u8ddd\u79bb\u8d8a\u8fdc\uff0c\u5177\u4f53\u7684 access time \u8d8a\u5927\uff1b</li> <li>\u6211\u4eec\u5728\u4e0d\u8003\u8651\u66f4\u65b0\u786c\u4ef6\u80fd\u529b\u7684\u60c5\u51b5\u4e0b\uff0c\u8981\u60f3\u964d\u4f4e I/O \u65f6\u95f4\uff0c\u5c31\u9700\u8981\u8ba9 I/O \u64cd\u4f5c\u7684\u5bf9\u8c61\u5c3d\u53ef\u80fd\u201c\u987a\u5e8f\u201d\uff1b</li> </ol> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u63d0\u51fa disk scheduling\u3002</p>"},{"location":"OS/Unit5/#_3","title":"\u8c03\u5ea6","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u5f15\u5165\u4e00\u4e2a\u5ea6\u91cf\u91cf\uff1adisk bandwidth = \u4f20\u8f93\u6570\u636e\u91cf / \u8bf7\u6c42\u5f00\u59cb\u5230\u4f20\u8f93\u5b8c\u6210\u7684\u65f6\u95f4\u95f4\u9694\u3002\u6211\u4eec\u60f3\u63d0\u9ad8 I/O \u6027\u80fd\uff0c\u5b9e\u9645\u4e0a\u662f\u60f3\u63d0\u5347 disk bandwidth\u3002</p> <p>\u5728 I/O \u8bf7\u6c42\u5341\u5206\u7a00\u758f\u7684\u65f6\u5019\uff0cI/O \u64cd\u4f5c\u603b\u662f\u7a7a\u95f2\uff0c\u6bcf\u5f53\u51fa\u73b0\u4e00\u4e2a I/O \u8bf7\u6c42\u6211\u4eec\u5c31\u76f4\u63a5\u5904\u7406\uff0c\u5904\u7406\u8fc7\u7a0b\u4e2d\u4e5f\u6ca1\u6709\u5176\u5b83 I/O \u8bf7\u6c42\u51fa\u73b0\uff0c\u6b64\u65f6\u6211\u4eec\u6ca1\u6709\u529e\u6cd5\u6765\u52a0\u901f\u8fd9\u4e2a\u8fc7\u7a0b\u3002\u4f46\u5f53 I/O \u8bf7\u6c42\u6bd4\u8f83\u5bc6\u96c6\uff0c\u6211\u4eec\u9700\u8981\u7528\u4e00\u4e2a queue \u6765\u7ef4\u62a4\u7b49\u5f85\u4e2d\u7684\u8bf7\u6c42\uff0c\u6b64\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 disk scheduling \u6765\u8c03\u6574\u8fd9\u4e9b\u8bf7\u6c42\u88ab\u5904\u7406\u7684\u987a\u5e8f\uff0c\u6765\u63d0\u9ad8 disk bandwidth\u3002\u800c disk scheduling \u5728\u8fd9\u4e2a queue \u5b58\u5728\u7684\u60c5\u51b5\u4e0b\u624d\u6709\u610f\u4e49\u3002</p> <p>\u6bcf\u4e00\u4e2a I/O \u8bf7\u6c42\u53ef\u80fd\u5305\u62ec\u8fd9\u4e9b\u4fe1\u606f\uff1a\u24f5 \u8f93\u5165\u8fd8\u662f\u8f93\u51fa\uff1b\u24f6 \u6307\u4ee3\u76ee\u6807\u6587\u4ef6\u7684\u6587\u4ef6\u53e5\u67c4\uff1b\u24f7 \u4f20\u8f93\u6d89\u53ca\u7684\u5185\u5b58\u5730\u5740\uff1b\u24f8 \u4f20\u8f93\u7684\u6570\u636e\u91cf\u2026\u2026</p> <p>\u5982\u4eca\u7684 disk driver \u4e0d\u5728\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u66b4\u9732\u64cd\u4f5c\u7684 tracks\u3001sectors \u7b49\uff0c\u800c\u662f\u63d0\u4f9b\u4e0e\u7269\u7406\u5730\u5740\u76f8\u5173\u7684 logical block address(LBA)^Wiki^\uff0c\u800c logical block \u662f\u6570\u636e\u4f20\u8f93\u7684\u6700\u5c0f\u5355\u5143\u3002\u867d\u7136\u4e0d\u5b8c\u5168\u7b49\u4ef7\uff0c\u4f46\u662f\u6211\u4eec\u5728\u8ba8\u8bba disk scheduling \u7684\u65f6\u5019\u53ef\u4ee5\u8ba4\u4e3a LBA \u7684\u5c40\u90e8\u6027\u548c\u987a\u5e8f\u6027\u4e0e\u7269\u7406\u5730\u5740\u7684\u5c40\u90e8\u6027\u548c\u987a\u5e8f\u6027\u662f\u4e00\u81f4\u7684\u3002</p>"},{"location":"OS/Unit5/#fcfs","title":"FCFS","text":"<p>\u53c8\u89c1 FCFS\uff0c\u4ecd\u7136\u4e00\u6837\uff0c\u5148\u8fdb queue \u7684\u5148\u5904\u7406\uff0c\u662f\u6700\u57fa\u672c\u7684 disk scheduling \u7b97\u6cd5\u3002\u7531\u4e8e\u6ca1\u6709\u5bf9\u6570\u636e\u505a\u4efb\u4f55\u8c03\u6574\uff0c\u6240\u4ee5\u4e5f\u5e76\u6ca1\u6709\u4efb\u4f55\u4f18\u5316\u3002</p>"},{"location":"OS/Unit5/#sstf","title":"SSTF","text":"<p>SSTF \u5373 shortest seek time first\uff0c\u7531\u4e8e seek time \u57fa\u672c\u548c\u7269\u7406\u5730\u5740\u8ddd\u79bb\u6b63\u76f8\u5173\uff0c\u6240\u4ee5\u5c31\u662f\u603b\u662f\u9009\u62e9\u8ddd\u79bb\u5f53\u524d\u78c1\u5934\u6700\u8fd1\u7684\u90a3\u4e2a\u8bf7\u6c42\u53bb\u5904\u7406\u3002</p> <p>\u4e0d\u540c\u4e8e\u4e4b\u524d\u63d0\u5230\u8fc7\u7684 short xxx first \u7b97\u6cd5\uff0cSSTF \u5e76\u4e0d\u662f\u7406\u8bba\u6700\u4f18\u65b9\u6848\uff01</p> <p>Advantages</p> <ul> <li>\u4f4e\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\uff1b</li> <li>\u9ad8\u541e\u5410\u91cf\uff1b</li> </ul> <p>Disadvantages</p> <ul> <li>\u54cd\u5e94\u65f6\u95f4\u65b9\u5dee\u8f83\u5927\uff1b</li> <li>\u5b58\u5728\u9965\u997f\u95ee\u9898\uff08\u4e0a\u9762\u90a3\u4e2a\u95ee\u9898\u7684\u6781\u7aef\u60c5\u51b5\uff09\uff1b</li> <li>\u8ba1\u7b97 seek time \u9700\u8981\u989d\u5916\u5f00\u9500\uff1b</li> </ul>"},{"location":"OS/Unit5/#scan-look","title":"SCAN &amp; LOOK","text":"<p>SCAN \u7b97\u6cd5\u4e0b\u78c1\u5934\u5728\u78b0\u5230 LBA \u8fb9\u754c\u524d\u53ea\u4f1a\u5355\u5411\u79fb\u52a8\uff0c\u800c\u5728\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u5904\u7406\u80fd\u591f\u5904\u7406\u7684\u8bf7\u6c42\u3002\u8fd9\u6837\u4fdd\u8bc1\u4e86\u5904\u7406\u8bf7\u6c42\u7684\u8fc7\u7a0b\u4e2d\u603b\u662f\u987a\u5e8f\u7684\u3002</p>  ![](img/47.png){ width=80% }  SCAN disk scheduling.  <p>Advantages</p> <ul> <li>\u9ad8\u541e\u5410\u91cf\uff1b</li> <li>\u54cd\u5e94\u65f6\u95f4\u65b9\u5dee\u4f4e\uff08\u66f4\u5747\u5300\u5730\u54cd\u5e94\uff09\uff1b</li> <li>\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u4f4e\uff1b</li> </ul> <p>Disadvantages</p> <ul> <li>\u7531\u4e8e\u79fb\u52a8\u5355\u5411\uff0c\u6240\u4ee5\u5982\u679c\u8bf7\u6c42\u53d1\u751f\u5728\u78c1\u5934\u521a\u521a\u7ecf\u8fc7\u7684\u5730\u65b9\uff0c\u90a3\u4e48\u53ef\u80fd\u4f1a\u9700\u8981\u7b49\u5f85\u8f83\u957f\u65f6\u95f4\u624d\u4f1a\u88ab\u54cd\u5e94\uff1b</li> </ul> <p>\u5982\u679c\u6211\u4eec\u4e0d\u8d70\u5230\u5e95\uff0c\u800c\u662f\u8d70\u5230\u6700\u9760\u8fd1\u8fb9\u754c\u7684\u8bf7\u6c42\u5bf9\u5e94\u7684 LBA \u5c31\u63d0\u524d\u6389\u5934\uff0c\u90a3\u4e48\u5c31\u662f LOOK \u7b97\u6cd5\u3002\u663e\u800c\u6613\u89c1\u7684\uff0cLOOK \u7b97\u6cd5\u53ef\u4ee5\u51cf\u5c11\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684 SCAN\u3002</p>"},{"location":"OS/Unit5/#c-scan-c-look","title":"C-SCAN &amp; C-LOOK","text":"<p>C-SCAN \u5373 Circular SCAN\uff0cC-SCAN \u4e0e SCAN \u7684\u552f\u4e00\u533a\u522b\u662f\uff0cC-SCAN \u7684\u78c1\u5934\u79fb\u52a8\u662f\u59cb\u7ec8\u5355\u5411\u7684\uff0c\u5f53\u78c1\u5934\u8fbe\u5230 LBA \u7684\u8fb9\u754c\u65f6\uff0c\u5f84\u76f4\u8fd4\u56de\u5230\u53e6\u4e00\u7aef\uff0c\u56de\u7a0b\u4e2d\u4e0d\u54cd\u5e94\u4efb\u4f55\u8bf7\u6c42\uff0c\u7c7b\u4f3c\u4e8e\u201c\u9996\u5c3e\u76f8\u649e\u201d\u4e86\uff0c\u6240\u4ee5\u624d\u53eb \u201ccircular\u201d\u3002</p>  ![](img/48.png){ width=80% }  C-SCAN disk scheduling.  <p>Advantages</p> <ul> <li>C-SCAN \u76f8\u6bd4 SCAN \u6709\u66f4\u5747\u5300\u7684\u7b49\u5f85\u65f6\u95f4\uff1b</li> </ul> <p>\u7c7b\u4f3c\u7684\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u8d70\u5230\u5e95\uff0c\u5728\u5904\u7406\u5b8c\u6700\u9760\u8fd1\u8fb9\u754c\u7684\u8bf7\u6c42\u540e\u5c31\u76f4\u63a5\u8fd4\u56de\uff1b\u5bf9\u5e94\u7684\uff0c\u5728\u8fd4\u7a0b\u7684\u65f6\u5019\u4e0d\u662f\u8fd4\u56de\u5230\u6700\u4f4e LBA\uff0c\u800c\u662f\u4ece\u6700\u9760\u8fd1\u8fb9\u754c\u7684\u8bf7\u6c42\u5f00\u59cb\uff0c\u90a3\u4e48\u5c31\u662f C-LOOK \u7b97\u6cd5\u3002\u540c\u6837\uff0cC-LOOK \u53ef\u4ee5\u51cf\u5c11\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684 C-SCAN\u3002</p> \ud83c\udf30 <p>=== \"\u9898\u9762\"</p> <pre><code>\u5047\u8bbe\u8bbe\u5907 LBA \u4ece 0 \u5230 4999\uff0c\u73b0\u5728\u78c1\u5934\u4f4d\u4e8e `143`\u3002\u6b64\u65f6\uff0c\u63a5\u4e0b\u6765\u5f85\u89e3\u51b3\u8bf7\u6c42\u6309\u7167\u5148\u6765\u540e\u5230\u7684\u987a\u5e8f\u6392\u5217\u4e3a\uff1a`86`, `1470`, `913`, `1774`, `948`, `1509`, `1022`, `1750`, `130`\uff0c\u5e76\u5047\u8bbe\u4e4b\u540e\u4e0d\u4f1a\u518d\u6709\u65b0\u7684\u8bf7\u6c42\u3002\n\n\u5982\u679c\u78c1\u5934\u4ece LBA = x \u7684\u5730\u65b9\u79fb\u52a8\u5230 LBA = y \u7684\u5730\u65b9\u9700\u8981\u7ecf\u8fc7\u7684\u8ddd\u79bb\u4e3a |x - y|\uff0c\u8bf7\u95ee\u91c7\u7528\u5982\u4e0b\u8fd9\u4e9b\u7b56\u7565\uff0c\u78c1\u5934\u7684 seek distance \u5206\u522b\u4e3a\u591a\u5c11\uff1f\n\n1. FCFS\n2. SSTF\n3. SCAN\uff08\u5148\u5411\u53f3\uff09\n4. LOOK\uff08\u5148\u5411\u53f3\uff09\n5. C-SCAN\uff08\u5411\u53f3\uff09\n6. C-LOOK\uff08\u5411\u53f3\uff09\n\n&gt; **\u63d0\u793a**\uff1a\u4ece\u8ba1\u7b97\u4e0a\u6765\u8bb2\u6bd4\u8f83\u7e41\u7410\u7684\u5c31\u53ea\u6709\u7b2c\u4e00\u4e2a\uff0c\u540e\u9762\u7684\u90fd\u6709\u6bd4\u8f83\u5bb9\u6613\u7684\u7b97\u6cd5\u3002\n</code></pre> <p>=== \"\u89e3\u6790\"</p> <pre><code>**FCFS**\uff1a\n\n\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\uff0c\u8001\u8001\u5b9e\u5b9e\u4e00\u4e2a\u4e00\u4e2a\u7b97\u8fc7\u6765\u5427\uff0c\u7b54\u6848\u662f 7081\u3002\n\n**SSTF**\uff1a\n\n\u9700\u8981\u5bfb\u627e\u6700\u8fd1\u7684\uff0c\u4f46\u662f\u4e71\u5e8f\u6765\u770b\u5f88\u96be\u53d7\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u6392\u5e8f\u4e00\u4e0b\uff0c\u5f97\u5230\uff1a\n\n`86`, `130`, `913`, `948`, `1022`, `1470`, `1509`, `1750`, `1774`\n\n\u800c\u6211\u4eec\u5f53\u524d\u7684\u4f4d\u7f6e\u662f `143`\uff0c\u6240\u4ee5\u6700\u8fd1\u7684\u5c31\u662f `130`\uff0c\u56e0\u6b64\u8ba1\u5165 `143 - 130`\uff1b\u7136\u540e\u5c31\u662f `86`\uff0c\u8ba1\u5165 `130 - 86`\uff1b\u63a5\u4e0b\u6765\u6211\u4eec\u53d1\u73b0\u5de6\u4fa7\u90fd\u6ca1\u6570\u5b57\u4e86\uff0c\u53f3\u4fa7\u662f\u5355\u5411\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u52a0\u4e0a\u4e00\u4e2a `1774` - `86` \u5c31\u597d\u4e86\u3002\u6700\u7ec8\u7ed3\u679c\u662f `1745`\u3002\n\n**SCAN**\uff1a\n\n\u7531\u4e8e\u8fd9\u91cc\u7684\u4e1c\u897f\u90fd\u662f\u4e00\u6b21\u6027\u7ed9\u51fa\u6765\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5411\u53f3\u626b\u5230\u5e95\uff0c\u7136\u540e\u626b\u56de\u6765\u5230 `86` \u5373\u53ef\u3002\n\n\u6240\u4ee5\u7b54\u6848\u662f `4999` - `143` + `4999` - `86` = `9769`\u3002\n\n**LOOK**\uff1a\n\n\u6211\u4eec\u5f88\u5bb9\u6613\u53d1\u73b0\uff0c\u6211\u4eec\u9700\u8981\u5904\u7406\u7684\u660e\u660e\u6700\u5927\u624d `1774`\uff0c\u4f46\u662f\u5374\u5f97\u8dd1\u5230 `4999`\uff0c\u6240\u4ee5\u4f7f\u7528 LOOK \u7684\u8bdd\u6211\u4eec\u5c31\u53ef\u4ee5\u7701\u5f88\u591a\u8ddd\u79bb\u3002\u53ea\u9700\u8981\u626b\u5230 `1774` \u7136\u540e\u518d\u626b\u56de\u5230 `130` \u5373\u53ef\u3002\n\n\u6240\u4ee5\u7b54\u6848\u662f `1774` - `143` + `1774` - `86` = `3319`\u3002\n\n**C-SCAN**\uff1a\n\n\u7c7b\u4f3c SCAN\uff0c\u5411\u53f3\u626b\u5230\u5e95\uff0c\u7136\u540e\u4ece\u5de6\u626b\u5230 **`130`**\uff08\u56e0\u4e3a\u8fd4\u7a0b\u4e0d\u4f1a\u5904\u7406\uff0c\u6240\u4ee5\u5904\u7406\u7684\u987a\u5e8f\u662f\u5148 `86` \u518d `130`\uff09\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff0c\u867d\u7136 LOOK \u53ea\u5728\u5411\u53f3\u626b\u7684\u65f6\u5019\u505a\u5904\u7406\uff0c\u4f46\u662f**\u8fd4\u7a0b\u4e5f\u9700\u8981\u8ba1\u5165 seek distance**\uff0c\u6bd5\u7adf arm \u4e0d\u53ef\u80fd\u662f\u95ea\u73b0\u56de `0`\u3002\n\n\u6240\u4ee5\u7b54\u6848\u662f `4999` - `143` + `4999` + `130` = `9985`\u3002\n\n**C-LOOK**\uff1a\n\n\u7c7b\u4f3c LOOK\uff0c\u5411\u53f3\u626b\u5230 `1774`\uff0c\u7136\u540e\u4ece\u5de6\u626b\u5230 `130`\uff0c\u540c\u6837\uff0c\u4e0d\u80fd\u5fd8\u8bb0\u8ba1\u5165\u8fd4\u7a0b\u7684 seek distance\u3002\n\n\u6240\u4ee5\u7b54\u6848\u662f &lt;u&gt;`1774` - `143` + `1774` - `86`&lt;/u&gt; + `130` - `86` = `3363`\uff0c\u7136\u540e\u4f60\u4f1a\u53d1\u73b0\uff0c\u753b\u6a2a\u7ebf\u7684\u90e8\u5206\u5c31\u662f LOOK \u7684\u8ba1\u7b97\u65f6\u95f4\uff0c\u800c `130` - `86` \u5c31\u53cd\u5e94\u4e86 C-XXXX \u7b97\u6cd5\u8fd4\u7a0b\u4e0d\u5904\u7406\u7684\u7279\u70b9\u3002\n</code></pre>"},{"location":"OS/Unit5/#_4","title":"\u8c03\u5ea6\u7b97\u6cd5\u7684\u9009\u62e9","text":"<p>Disk scheduling \u5e94\u5f53\u88ab\u8bbe\u8ba1\u4e3a\u4e00\u4e2a\u53ef\u66ff\u6362\u7684\u6a21\u5757\uff0c\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\u9009\u62e9\u4e0d\u540c\u7684\u7b97\u6cd5\u3002\u901a\u5e38\uff0cSSTF \u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u9ed8\u8ba4\u9009\u62e9\uff1b\u800c\u5f53 I/O \u8f83\u4e3a\u9891\u7e41\u7684\u65f6\u5019\uff0c\u4e00\u822c\u4f7f\u7528 LOOK \u6216\u8005 C-LOOK\u3002</p> <p>\u8868\u73b0\u672c\u8eab\u4f9d\u8d56\u4e8e\u8bf7\u6c42\u7684\u6a21\u5f0f\uff0c\u800c\u8bf7\u6c42\u672c\u8eab\u53c8\u4f9d\u8d56\u4e8e\u6587\u4ef6\u5206\u914d\u7b56\u7565\u3002\u6587\u4ef6\u7cfb\u7edf\u5982\u679c\u6ce8\u91cd\u7a7a\u95f4\u5c40\u90e8\u6027\uff0c\u80fd\u591f\u63d0\u4f9b\u5f88\u597d\u7684\u8868\u73b0\u63d0\u5347\u3002\u2014\u2014xyx \u7684\u7b14\u8bb0</p>"},{"location":"OS/Unit5/#_5","title":"\u975e\u6613\u5931\u6027\u5185\u5b58","text":"<p>\u867d\u7136\u5b58\u5728\u5176\u5b83\u8bbe\u8ba1\uff0c\u4f46\u662f\u5e76\u4e0d\u5e38\u89c1\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8ba8\u8bba\u57fa\u4e8e flash NAND die semiconductor \u7684 NVM\u3002\u5982\u679c\u662f disk-like \u7684 NVM \u8bbe\u5907\uff0c\u901a\u5e38\u88ab\u79f0\u4f5c\u56fa\u6001\u786c\u76d8(solid-state disk, SSD)\uff1b\u53c8\u6216\u8005\u662f\u4ee5 USB drive \u7684\u5f62\u5f0f\u88ab\u4f7f\u7528\u3002</p> <p>\u7531\u4e8e NVM \u7684\u5de5\u4f5c\u673a\u5236\u662f\u7535\u5b50\u7684\u800c\u975e\u673a\u68b0\u7684\uff0c\u53ef\u4ee5\u60f3\u8c61\uff0cNVM \u5e76\u6ca1\u6709 seek time \u548c rotational latency\uff0c\u6240\u4ee5\u76f8\u6bd4 HDDs \u66f4\u52a0\u53ef\u9760\uff0c\u66f4\u52a0\u5feb\u901f\uff0c\u66f4\u52a0\u5c0f\u5de7\uff0c\u529f\u8017\u4e5f\u66f4\u4f4e\u3002\u4e0d\u8fc7\u5bf9\u5e94\u7684\uff0cNVM \u4e5f\u66f4\u52a0\u6602\u8d35\uff0c\u4e0d\u8fc7\u968f\u7740\u6280\u672f\u7684\u53d1\u5c55\uff0c\u8fd9\u4e00\u52a3\u52bf\u4e5f\u5728\u9010\u6e10\u88ab\u586b\u8865\u3002\u7531\u4e8e\u8fd9\u4e9b\u6027\u8d28\uff0cNVM \u4e5f\u901a\u5e38\u4ee5 cache tier \u7684\u5f62\u5f0f\u88ab\u4f7f\u7528\u3002</p> <p>\u540c\u65f6\uff0c\u7531\u4e8e NVM \u672c\u8eab\u7684\u8bfb\u5199\u6548\u7387\u8f83\u9ad8\uff0c\u6240\u4ee5\u541e\u5410\u91cf\u7684\u74f6\u9888\u53ef\u80fd\u53cd\u800c\u5728\u6807\u51c6\u603b\u7ebf\u63a5\u53e3(standard bus interface)\u7684\u4f20\u8f93\u901f\u7387\u4e0a\u3002\u6240\u4ee5\uff0cNVM \u901a\u5e38\u4f1a\u76f4\u63a5\u8fde\u5230\u7cfb\u7edf\u603b\u7ebf(system bus)\uff0c\u4f8b\u5982 PCIe^Wiki^\u3002</p> <p>\u56e0\u4e3a NAND semiconductor \u7684\u6027\u8d28\uff0cNVM \u7684\u548c HDDs \u5728\u4f7f\u7528\u903b\u8f91\u4e0a\u6709\u6240\u4e0d\u540c\uff1a</p> <ol> <li>\u867d\u7136 NVM \u652f\u6301\u4ee5 page \u7684\u7c92\u5ea6\uff08\u6bd4 block \u66f4\u5c0f\uff09\u8fdb\u884c\u8bfb\u5199\uff0c\u4f46\u5e76\u4e0d\u652f\u6301\u201c\u6570\u636e\u8986\u76d6\u201d\uff0c\u5373\u5fc5\u987b\u5148\u64e6\u9664\u6570\u636e\u624d\u80fd\u5199\u5165\u6570\u636e\uff0c\u800c\u64e6\u9664\u7684\u5f00\u9500\u76f8\u6bd4\u8bfb\u5199\u53c8\u8981\u5927\u4e00\u4e9b\u3002</li> <li>\u4e0d\u8fc7\uff0c\u7531\u4e8e NVM \u7531\u82e5\u5e72\u4e2a die \u7ec4\u6210\uff0c\u6240\u4ee5\u53ef\u4ee5\u5e76\u884c\u5730\u8fdb\u884c\u8bfb\u5199\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\u3002</li> <li>\u6b64\u5916\uff0cNAND semiconductor \u5728\u8fdb\u884c\u4e00\u5b9a\u91cf\u7684\u64e6\u9664\u64cd\u4f5c\u4e4b\u540e\u5c31\u4e0d\u518d\u80fd\u5b58\u50a8\u6570\u636e\uff0c\u56e0\u6b64\u5b58\u5728\u4f7f\u7528\u5bff\u547d\u3002</li> </ol> <p>\u6240\u4ee5\uff0cNVM \u7684\u8bfb\u5199\u63a7\u5236\u7b97\u6cd5\u5e94\u5f53\u4e0e HDDs \u6709\u6240\u4e0d\u540c\uff0c\u4e0d\u8fc7\u8fd9\u901a\u5e38\u7531 NVM controller \u8d1f\u8d23\uff0c\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u65e0\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u505a\u8ba8\u8bba\u3002</p>"},{"location":"OS/Unit5/#_6","title":"\u5b58\u50a8\u4ecb\u8d28\u7ba1\u7406","text":""},{"location":"OS/Unit5/#_7","title":"\u683c\u5f0f\u5316 &amp; \u5206\u533a &amp; \u5206\u5377","text":"<p>\u5d2d\u65b0\u7684\u5b58\u50a8\u8bbe\u5907\u5728\u88ab\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u7ecf\u8fc7\u4f4e\u7ea7\u683c\u5f0f\u5316(low-level formatting or physical formatting)\uff0c\u4ee5\u5c06\u5176\u5206\u4e3a\u63a7\u5236\u5668\u53ef\u4ee5\u8bfb\u5199\u7684\u6247\u533a\uff0c\u521b\u5efa\u903b\u8f91\u5757\u7684\u6620\u5c04\uff0c\u4ee5\u53ca\u521b\u5efa\u95ea\u5b58\u8f6c\u6362\u5c42(flash translation layer, FTL)^Wiki^\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u4f4e\u7ea7\u683c\u5f0f\u5316\u7684\u65f6\u5019\u4f1a\u4e3a sectors \u6216 pages \u7ef4\u62a4\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\u4fe1\u606f\uff0c\u5c06\u6570\u636e\u5305\u88c5\u4e3a header + data + tail \u7684\u5f62\u5f0f\u3002\u901a\u5e38 header \u548c tail \u4e2d\u4f1a\u5b58\u50a8\u4e00\u4e9b\u5143\u4fe1\u606f\uff0c\u4f8b\u5982\u6247/\u9875\u53f7\u548c\u6821\u9a8c/\u7ea0\u9519\u7801\u3002\u4e00\u4e2a\u6247\u533a\u7684\u5927\u5c0f\u6709\u82e5\u5e72\u53ef\u9009\u7684\u503c\uff0c\u901a\u5e38\u662f 512 B \u6216 4 KB\uff0c\u7531\u4e8e\u6247\u533a\u6570\u91cf\u4e0e header &amp; tail \u5360\u7528\u7684\u7a7a\u95f4\u6b63\u76f8\u5173\uff0c\u6240\u4ee5\u6247\u533a\u8d8a\u5927\u4e00\u822c\u610f\u5473\u7740\u7528\u6237\u53ef\u7528\u7a7a\u95f4\u8d8a\u5927\u3002</p> <p>\u5728\u5b8c\u6210\u4f4e\u7ea7\u683c\u5f0f\u5316\u540e\uff0c\u8bbe\u5907\u5b9e\u73b0\u4e86\u81ea\u8eab\u7684\u7ed3\u6784\u5316\u7ba1\u7406\uff0c\u4f46\u4e3a\u4e86\u80fd\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\uff0c\u8fd8\u9700\u8981\u5728\u8bbe\u5907\u4e0a\u8bb0\u5f55\u4e00\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u6240\u9700\u8981\u7684\u6570\u636e\u7ed3\u6784\uff08~~\u67d3\u4e0a\u64cd\u4f5c\u7cfb\u7edf\u7684\u989c\u8272~~\uff09\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5927\u81f4\u5206\u4e3a\u4e09\u6b65\uff1a</p> <p>steps</p> <ol> <li>\u5206\u533a(partitioning)\uff1a\u5c06\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u505a\u5212\u5206\uff0c\u6bcf\u4e00\u4e2a\u90fd\u88ab\u89c6\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u5b58\u50a8\u7a7a\u95f4\uff08\u5373\u4e00\u4e2a logical disk\uff09\u3002\u5206\u533a\u4fe1\u606f\u4f1a\u4ee5\u56fa\u5b9a\u7684\u683c\u5f0f\u88ab\u5199\u5165\u5b58\u50a8\u8bbe\u5907\u7684\u56fa\u5b9a\u4f4d\u7f6e\u3002</li> <li>\u5377\u521b\u5efa\u4e0e\u5377\u7ba1\u7406(volume creating &amp; management)\uff1a\u5377(volume)\u662f\u5305\u542b\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf(file system)\u7684\u5b58\u50a8\u7a7a\u95f4[^1]\uff0c\u8fd9\u4e00\u6b65\u4e3b\u8981\u662f\u5bf9\u4e0b\u4e00\u6b65\u505a\u51c6\u5907\uff0c\u5212\u5b9a\u6587\u4ef6\u7cfb\u7edf\u6240\u8986\u76d6\u7684\u8303\u56f4\u3002\u5982\u679c\u76f4\u63a5\u5728\u4e00\u4e2a\u5206\u533a\u91cc\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf\uff0c\u90a3\u5176\u5b9e\u8fd9\u4e00\u6b65\u5df2\u7ecf\u88ab\u9690\u5f0f\u5730\u5b8c\u6210\uff1b\u4f46\u5982\u679c\u4f7f\u7528\u6bd4\u5982 RAID \u6280\u672f\uff0c\u5c31\u9700\u8981\u663e\u793a\u5730\u505a\u8fd9\u4e00\u6b65\u3002</li> <li>\u903b\u8f91\u683c\u5f0f\u5316(logical formatting)\uff1a\u5728\u5377\u4e0a\u521b\u5efa\u548c\u521d\u59cb\u5316\u6587\u4ef6\u7cfb\u7edf\u3002</li> </ol> <p>\u540c\u65f6\uff0c\u5982\u679c\u5f53\u524d\u5206\u533a\u5305\u542b OS \u955c\u50cf\uff0c\u5219\u9700\u8981\u5bf9\u5e94\u521d\u59cb\u5316\u5f15\u5bfc\u5757(boot sector)\u3002</p> <p>raw disk</p> <p>\u4e00\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u5141\u8bb8\u90e8\u5206\u7279\u6b8a\u7a0b\u5e8f\u7ed5\u8fc7\u6587\u4ef6\u7cfb\u7edf\uff0c\u76f4\u63a5\u4f7f\u7528\u4e00\u5927\u5757\u8fde\u7eed\u7684\u903b\u8f91\u5757\uff0c\u8fd9\u79cd\u4e0d\u5305\u542b\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\u7a7a\u95f4\u88ab\u79f0\u4e3a raw disk\uff0c\u5bf9\u8fd9\u79cd\u5b58\u50a8\u7a7a\u95f4\u7684\u8bbf\u95ee\u88ab\u79f0\u4e3a raw I/O\uff0c\u5bf9 raw disk \u7684\u64cd\u4f5c\u4e00\u822c\u66f4\u9ad8\u6548\u4e5f\u66f4\u7cbe\u786e\uff08\u4e0d\u9700\u8981\u518d\u7ecf\u8fc7\u7cfb\u7edf\u8c03\u7528\uff09\uff0c\u5b83\u53ef\u4ee5\u88ab\u7528\u6765\u5b9e\u73b0 swap \u7a7a\u95f4\uff0c\u6216\u8005\u662f\u7528\u6765\u5b58\u50a8\u6570\u636e\u5e93\u7684\u6570\u636e\u6587\u4ef6\u3002</p>"},{"location":"OS/Unit5/#_8","title":"\u574f\u5757","text":"<p>\u524d\u9762\u5df2\u7ecf\u63d0\u5230 NVM \u6709\u4f7f\u7528\u5bff\u547d\uff1b\u4ee5\u53ca\u867d\u7136\u6211\u4eec\u6ca1\u8bf4\uff0c\u4f46\u662f HDDs \u7684\u673a\u68b0\u7ed3\u6784\u4e5f\u5fc5\u7136\u5e26\u6765\u4e0d\u5c0f\u7684\u786c\u4ef6\u635f\u8017\u3002\u6240\u4ee5\uff0c\u5b9e\u9645\u7684\u5b58\u50a8\u8bbe\u5907\u4e2d\u4e0d\u53ef\u907f\u514d\u7684\u4f1a\u51fa\u73b0\u7531\u4e8e\u786c\u4ef6\u635f\u574f\u5bfc\u81f4\u7684\u65e0\u6cd5\u4f7f\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u8fd9\u79cd\u65e0\u6cd5\u4f7f\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u88ab\u79f0\u4e3a\u574f\u5757(bad block)\u3002</p> <p>\u521a\u51fa\u5382\u7684\u786c\u76d8\u5c31\u5f88\u53ef\u80fd\u5df2\u7ecf\u5e26\u6709\u4e00\u4e9b bad block\uff0c\u4f46\u901a\u5e38\u4f1a\u5728\u505a low-level formatting \u7684\u65f6\u5019\u505a\u4e00\u4e9b\u5904\u7406\uff0clow-level formatting \u9636\u6bb5\uff0c\u4f1a\u7ef4\u62a4\u4e00\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u53ef\u89c1\u7684\u5907\u7528\u6247\u533a\uff0c\u4e13\u95e8\u7528\u4e8e\u5c06 bad block \u6620\u5c04\u5230\u8fd9\u4e9b\u53ef\u7528\u5206\u533a\u4e2d\u6765\u4fdd\u8bc1\u903b\u8f91\u7a7a\u95f4\u4e0a\u7684\u8fde\u7eed\u6027\u3002</p>"},{"location":"OS/Unit5/#raid","title":"RAID","text":"<p>\u867d\u7136\u5355\u72ec\u7684\u786c\u76d8\u4fbf\u5b9c\uff0c\u4f46\u662f\u5b83\u4e0d\u53ef\u9760\u800c\u4e14\u901f\u5ea6\u6162\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u4f7f\u7528\u5197\u4f59(redundancy)\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002</p> <p>\u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217(redundant array of independent disk, RAID)\u6280\u672f\u5728\u590d\u6570\u78c1\u76d8\u4e0a\u521b\u5efa\u82e5\u5e72\u6570\u636e\u7684\u955c\u50cf\uff0c\u540c\u65f6\u5141\u8bb8\u5728\u591a\u4e2a\u78c1\u76d8\u4e0a\u540c\u65f6\u8fdb\u884c\u6570\u636e\u7684\u8bfb\u53d6\uff08\u5e76\u884c\u5730\u8bfb\u53d6\u6570\u636e\u7684\u4e0d\u540c\u90e8\u5206\uff09\uff0c\u5e76\u91c7\u7528\u7279\u5b9a\u7684\u9519\u8bef\u6821\u9a8c\u7801\u6765\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027\u3002</p> <p>\u6309\u7167\u7ec4\u5408\u7b56\u7565\uff0cRAID \u6280\u672f\u88ab\u5206\u4e3a\u4e0d\u540c\u7684 level\uff0c\u8bfb\u8005\u53ef\u4ee5\u5728\u6b64\u548c\u505a\u8be6\u7ec6\u4e86\u89e3\u3002\u9ad8 level \u7684 RAID \u5bf9\u4f4e level \u7684 RAID \u5e76\u4e0d\u662f\u4e0a\u4f4d\u66ff\u4ee3\u7684\uff0c\u5b83\u4eec\u4e4b\u95f4\u5404\u6709\u4f18\u52a3\uff0c\u9700\u8981\u6309\u9700\u4f7f\u7528\u3002\u8bfb\u8005\u53ef\u4ee5\u5728\u6b64\u6587\u6587\u672b\u505a\u4e86\u89e3\u3002</p> <p>[^1]: Volume (computing) | Wikipedia</p>"},{"location":"OS/Unit6/","title":"Unit 6: \u6587\u4ef6\u7cfb\u7edf | File System","text":"<p>\u5173\u4e8e FCB</p> <p>\u4e66\u672c\u4e0a\u5e76\u6ca1\u6709\u5f3a\u8c03 FCB \u7ef4\u62a4\u7684\u662f\u6253\u5f00\u7684\u6587\u4ef6\u7684\u4fe1\u606f\uff08\u751a\u81f3\u6697\u6233\u6233\u5730\u5728\u5426\u5b9a\u8fd9\u53e5\u8bdd\uff09\uff0c\u4f46\u662f\u505a\u9898\u7684\u65f6\u5019\u53ef\u80fd\u4f1a\u5f3a\u8c03\u8fd9\u4e00\u70b9\u3002\u5173\u4e8e\u8fd9\u4e00\u70b9\u6211\u8fd8\u9700\u8981\u505a\u4e00\u4e9b\u8003\u8bc1\uff0c\u8bf7\u8bfb\u8005\u4fdd\u6301\u5ba1\u614e\u7684\u6001\u5ea6\u3002</p> <p>\u5bfc\u8bfb</p> <p>\u5728\u5b58\u50a8\u4e00\u7ae0\uff0c\u6211\u4eec\u63d0\u5230\u8fc7\uff0c\u5377(volume)\u505a\u521d\u59cb\u5316\u65f6\uff0c\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u3002\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u4e86\u6570\u636e\u5b58\u50a8\u5f62\u5f0f\u7684\u903b\u8f91\u89c6\u56fe\uff0c\u5c06\u6570\u636e\u4ee5\u6587\u4ef6(file)\u7684\u5f62\u5f0f\u4ece\u786c\u4ef6\u5b58\u50a8\u4e2d\u62bd\u8c61\u51fa\u6765\uff0c\u5e76\u4f7f\u7528\u76ee\u5f55(directory)\u5bf9\u6587\u4ef6\u8fdb\u884c\u8fdb\u884c\u7ed3\u6784\u5316\u7684\u7ec4\u7ec7\u548c\u7ba1\u7406\u3002</p>"},{"location":"OS/Unit6/#_1","title":"\u6587\u4ef6","text":"<p>\u4e00\u4e2a\u6587\u4ef6\u662f\u5b58\u50a8\u5728\u4e8c\u7ea7\u4ecb\u8d28\u4e0a\u7684\uff0c\u5177\u540d\u7684\u4e00\u7cfb\u5217\u76f8\u5173\u4fe1\u606f\u96c6\u5408\uff0c\u65e0\u8bba\u662f\u7528\u6237\u8fd8\u662f\u7a0b\u5e8f\uff0c\u90fd\u9700\u8981\u901a\u8fc7\u6587\u4ef6\u6765\u4e0e\u4e8c\u7ea7\u4ecb\u8d28\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362\u3002</p>"},{"location":"OS/Unit6/#_2","title":"\u6587\u4ef6\u5c5e\u6027","text":"<p>\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0b\uff0c\u6587\u4ef6\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u5c5e\u6027\uff0c\u4f46\u901a\u5e38\u6709\u4ee5\u4e0b\u51e0\u4e2a\uff08\u5f53\u7136\u8fd8\u6709\u5176\u5b83\u7684\uff09\uff1a</p> <ul> <li><code>name</code>\uff1a\u8fd9\u662f\u552f\u4e00\u7684\u4ee5 human-readable \u5f62\u5f0f\u4fdd\u5b58\u7684\u4fe1\u606f\uff0c\u5373\u6587\u4ef6\u540d\uff1b</li> <li><code>identifier</code>\uff1a\u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7528\u4e8e\u552f\u4e00\u6807\u8bc6\u4e00\u4e2a\u6587\u4ef6\uff1b</li> <li><code>type</code>\uff1a\u4e00\u4e9b\u6587\u4ef6\u7cfb\u7edf\u9700\u8981\u652f\u6301\u4e0d\u540c\u7684\u6587\u4ef6\u7c7b\u578b\uff0c\u6b64\u65f6\u8fd9\u4e9b\u4fe1\u606f\u7528\u4e8e\u6807\u8bc6\u7c7b\u578b\uff1b</li> <li><code>location</code>\uff1a\u6807\u8bc6\u6587\u4ef6\u5728\u54ea\u4e2a\u8bbe\u5907\u7684\u54ea\u4e2a\u4f4d\u7f6e\uff1b</li> <li><code>size</code>\uff1a\u5f53\u524d\u6587\u4ef6\u5927\u5c0f\uff0c\u4e5f\u53ef\u80fd\u5305\u542b\u6587\u4ef6\u88ab\u5141\u8bb8\u7684\u6700\u5927\u5927\u5c0f\uff1b</li> <li><code>protection</code>\uff1a\u8bbf\u95ee\u63a7\u5236\u4fe1\u606f\uff0c\u51b3\u5b9a\u54ea\u4e9b\u7528\u6237\u5177\u6709\u5bf9\u5e94\u7684\u8bfb/\u5199/\u6267\u884c\u6743\u9650\u7b49\uff1b</li> <li><code>timestamp</code>\uff1a\u4fdd\u5b58\u521b\u5efa\u65f6\u95f4\u3001\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\u3001\u4e0a\u6b21\u4f7f\u7528\u65f6\u95f4\u7b49\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u7528\u6765\u505a\u4e00\u4e9b\u5b89\u5168\u4fdd\u62a4\u548c\u4f7f\u7528\u76d1\u63a7\uff1b</li> <li><code>user indentification</code>\uff1a\u521b\u5efa\u8005\u3001\u4e0a\u6b21\u4fee\u6539\u8005\u3001\u4e0a\u6b21\u8bbf\u95ee\u8005\u7b49\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u7528\u6765\u505a\u4e00\u4e9b\u5b89\u5168\u4fdd\u62a4\u548c\u4f7f\u7528\u76d1\u63a7\uff1b</li> </ul> <p>\u8fd9\u4e9b\u4fe1\u606f\u4e5f\u88ab\u79f0\u4e3a\u6587\u4ef6\u7684\u5143\u6570\u636e(meta data)\u3002</p>"},{"location":"OS/Unit6/#_3","title":"\u6587\u4ef6\u64cd\u4f5c","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u63d0\u4f9b\u76f8\u5173\u7684\u7cfb\u7edf\u8c03\u7528\u6765\u5b8c\u6210\u4e00\u4e9b\u57fa\u672c\u7684\u6587\u4ef6\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a</p> <ul> <li><code>create</code>\uff1a\u5206\u4e3a\u4e24\u6b65\uff0c\u24f5 \u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\u4e3a\u6587\u4ef6\u5206\u914d\u4e00\u5757\u7a7a\u95f4\uff0c\u24f6 \u5728\u76ee\u5f55\u4e2d\u521b\u5efa\u5bf9\u5e94\u7684\u6761\u76ee\uff1b</li> <li><code>open</code> / <code>close</code>\uff1a\u6253\u5f00\u6587\u4ef6\u540e\u4f1a\u5f97\u5230\u6587\u4ef6\u7684\u53e5\u67c4(handle)\uff0c\u5176\u5b83\u5bf9\u7279\u5b9a\u6587\u4ef6\u7684\u64cd\u4f5c\u4e00\u822c\u90fd\u9700\u8981\u901a\u8fc7\u8fd9\u4e2a\u53e5\u67c4\u6765\u5b8c\u6210\uff0c\u7c7b\u4f3c\u4e8e\u201c\u4e0e\u6587\u4ef6\u5efa\u7acb\u4e00\u4e2a\u4f1a\u8bdd\u201d\uff0c\u5173\u95ed\u6587\u4ef6\u5c31\u662f\u201c\u7ed3\u675f\u8fd9\u4e2a\u4f1a\u8bdd\u201d\uff1b<ul> <li>\u901a\u5e38\u6765\u8bf4\uff0c\u6587\u4ef6\u88ab\u6253\u5f00\u540e\u9700\u8981\u7531\u7528\u6237\u6765\u8d1f\u8d23\u5173\u95ed\uff1b</li> <li>\u6253\u5f00\u540e\u7684\u6587\u4ef6\u4f1a\u88ab\u52a0\u5165\u5230\u4e00\u4e2a\u6253\u5f00\u6587\u4ef6\u8868(open-file table)\u4e2d\uff0c\u8fd9\u4e2a\u8868\u4e2d\u4fdd\u5b58\u4e86\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6587\u4ef6\u7684\u53e5\u67c4\u3001\u6587\u4ef6\u7684\u4f4d\u7f6e\u3001\u6587\u4ef6\u7684\u8bbf\u95ee\u6743\u9650\u7b49\uff1b</li> <li>\u6587\u4ef6\u53ef\u80fd\u88ab\u591a\u65b9\u7528\u6237\uff08\u8fdb/\u7ebf\u7a0b\uff09\u6253\u5f00\uff0c\u800c\u53ea\u6709\u6240\u6709\u7528\u6237\u90fd\u5173\u95ed\u6587\u4ef6\u540e\u624d\u5e94\u5f53\u91ca\u653e\u6587\u4ef6\u5728\u6253\u5f00\u6587\u4ef6\u8868\u4e2d\u7684\u6761\u76ee\uff0c\u6240\u4ee5\u7ef4\u62a4\u4e00\u4e2a open-file count \u7528\u4e8e\u8bb0\u5f55\u5f53\u524d\u6587\u4ef6\u88ab\u6253\u5f00\u7684\u6b21\u6570\uff0c\u6709\u70b9\u7c7b\u4f3c\u667a\u80fd\u6307\u9488\uff1b</li> </ul> </li> <li><code>read</code> / <code>write</code>\uff1a\u7ef4\u62a4\u4e00\u4e2a current-file-position pointer \u8868\u793a\u5f53\u524d\u64cd\u4f5c\u7684\u4f4d\u7f6e\uff0c\u5728\u5bf9\u5e94\u4f4d\u7f6e\u4e0a\u505a\u8bfb\u5199\u64cd\u4f5c\uff0c\u6709\u4e00\u70b9\u50cf\u56fe\u7075\u673a\uff1b</li> <li><code>repositioning within a file</code>\uff1a\u5c06 current-file-position pointer \u7684\u4f4d\u7f6e\u91cd\u65b0\u5b9a\u4f4d\u5230\u7ed9\u5b9a\u503c\uff08\u5982\u6587\u4ef6\u5f00\u5934\u6216\u7ed3\u5c3e\uff09\uff0c\u4e5f\u88ab\u53eb\u505a <code>seek</code>\uff1b</li> <li><code>delete</code>\uff1a\u5728 directory \u4e2d\u627e\u5230\u5bf9\u5e94\u6761\u76ee\u5e76\u5220\u9664\u8be5\u6761\u76ee\uff0c\u5982\u679c\u6b64\u65f6\u5bf9\u5e94\u7684\u6587\u4ef6\u6ca1\u6709\u5176\u5b83\u786c\u94fe\u63a5\uff0c\u5219\u9700\u8981\u91ca\u653e\u5176\u7a7a\u95f4\uff0c\u7c7b\u4f3c\u4e8e\u667a\u80fd\u6307\u9488\uff1b</li> <li><code>truncate</code>\uff1a\u6e05\u7a7a\u6587\u4ef6\u5185\u5bb9\uff0c\u4f46\u4fdd\u7559\u6587\u4ef6\u5c5e\u6027\uff1b</li> <li><code>locking</code>\uff1b</li> </ul> <p>\u5728 C \u7684\u6587\u4ef6\u64cd\u4f5c\u51fd\u6570\u4e2d\uff0c\u4f60\u90fd\u80fd\u770b\u5230\u7c7b\u4f3c\u7684\u64cd\u4f5c\u3002</p>"},{"location":"OS/Unit6/#_4","title":"\u6743\u9650\u4fdd\u62a4","text":"<p>\u4e0d\u540c\u7684\u6587\u4ef6\u64cd\u4f5c\u5bf9\u5e94\u7740\u4e0d\u540c\u7684\u6743\u9650\u3002</p> <p>\u7406\u8bba\u4e0a\uff0c\u6587\u4ef6\u7684\u6240\u5c5e\u8005\u5e94\u5f53\u80fd\u591f\u51b3\u5b9a\u80fd\u5bf9\u6587\u4ef6\u505a\u4ec0\u4e48\u64cd\u4f5c\uff0c\u4ee5\u53ca\u8c01\u5177\u6709\u8fd9\u4e9b\u6743\u9650\uff0c\u8fd9\u4e2a\u6743\u9650\u901a\u8fc7\u8bbf\u95ee\u63a7\u5236\u5217\u8868(access control list, ACL)\u6765\u7ef4\u62a4\u7528\u6237\u4eec\u5bf9\u6587\u4ef6\u6240\u5177\u6709\u7684\u6743\u9650\u3002\u4f46\u662f\u8fd9\u4e48\u505a\u7684\u574f\u5904\u662f\uff0c\u6784\u5efa ACL \u6027\u4ef7\u6bd4\u4f4e\uff0c\u800c\u4e14\u539f\u5148\u56fa\u5b9a\u957f\u7684\u8868\u9879\u53ef\u80fd\u4e0d\u5b9a\u957f\u4e86\u3002</p> <p>\u56e0\u6b64\uff0c\u53ef\u4ee5\u7cbe\u7b80\u5316\u8fd9\u4e2a\u5217\u8868\u3002\u4f8b\u5982\uff0cUnix \u548c Linux \u7cfb\u7edf\u91c7\u7528\u4e86\u8bbf\u95ee\u6743\u9650\u4f4d(access permission bits)\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u6743\u9650\u63a7\u5236\uff1a</p> \ud83c\udf30 <p>\u5728 Linux \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 ls -l \u5c31\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u6743\u9650\u3002</p> <pre><code>$ ls -l\ntotal 72\n-rw-r--r--   1 isshikih  staff  18658 Oct 18 23:51 LICENSE\n-rw-r--r--   1 isshikih  staff   1778 Dec 18 10:27 README.md\nlrwxr-xr-x   1 isshikih  staff     18 Nov 21  2022 _deploy.sh@ -&gt; scripts/_deploy.sh\nlrwxr-xr-x   1 isshikih  staff     16 Nov 21  2022 _sync.sh@ -&gt; scripts/_sync.sh\ndrwxr-xr-x  14 isshikih  staff    448 Oct 29 22:53 docs/\ndrwxr-xr-x  33 isshikih  staff   1056 Nov  3  2022 mkdocs-material/\n-rw-r--r--@  1 isshikih  staff  10937 Dec 21 10:01 mkdocs.yaml\ndrwxr-xr-x   3 isshikih  staff     96 Nov  2  2022 overrides/\ndrwxr-xr-x   5 isshikih  staff    160 Oct 10 15:39 scripts/\ndrwxr-xr-x  19 isshikih  staff    608 Dec 20 21:39 site/\n</code></pre> <p>\u7b2c\u4e00\u5217\u4e2d\u6709 10 \u4e2a\u5b57\u7b26\uff0c\u5176\u542b\u4e49\u5982\u4e0b\uff1a</p> <p>A \"d\" indicates a directory. The second set of three characters represent the read, write, and execution rights of the file's owner. The next three represent the rights of the file's group, and the final three represent the rights granted to everybody else. We'll discuss this in more detail in a later lesson.[^3]</p> <p>\u540e 9 \u4e2a\u5b57\u7b26\u5c06\u6743\u9650\u88ab\u5206\u4e3a\u4e09\u7ec4\uff0c\u5206\u522b\u4ee3\u8868\u6587\u4ef6\u6240\u6709\u8005(owner)\u3001\u6587\u4ef6\u6240\u5c5e\u7ec4(group)\u3001\u5176\u4ed6\u4eba(other)\u7684\u8bfb(r)\u3001\u5199(w)\u3001\u6267\u884c(x)\u6743\u9650\u3002</p>"},{"location":"OS/Unit6/#_5","title":"\u6587\u4ef6\u7c7b\u578b","text":"<p>\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u6765\u6240\uff0c\u6587\u4ef6\u4e3b\u8981\u5206\u4e3a\u6570\u636e(data)\u548c\u7a0b\u5e8f(program)\u4e24\u5927\u7c7b\u3002\u800c\u5bf9\u7528\u6237\u6765\u8bf4\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u8ba4\u4e3a\u540e\u7f00\u6269\u5c55(extension)\u6807\u8bc6\u4e86\u4e00\u4e2a\u6587\u4ef6\u7684\u7c7b\u578b\u3002\u4f8b\u5982\u6211\u4eec\u4f1a\u8ba4\u4e3a <code>sketch.psd</code> \u662f Photoshop \u7684\u5de5\u7a0b\u6587\u4ef6\uff0c<code>img.png</code> \u662f\u4e00\u4e2a\u56fe\u7247\u6587\u4ef6\uff0c<code>main.exe</code> \u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e9b\u540e\u7f00\u6269\u5c55\u66f4\u591a\u7684\u53ea\u662f\u4e00\u79cd\u201c\u63d0\u793a\u201d\uff0c\u53ea\u662f\u7528\u6765\u5e2e\u52a9\u7cfb\u7edf\u9009\u62e9\u5408\u9002\u7684\u65b9\u5f0f\u6765\u6253\u5f00\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u51b3\u5b9a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u662f\u5426\u8981\u53c2\u8003\u540e\u7f00\u540d\uff0c\u5e94\u5f53\u7531\u5f00\u53d1\u8005\u6765\u51b3\u5b9a\u3002</p> <p>UNIX \u7cfb\u7edf\u4f1a\u5728\u6587\u4ef6\u5f00\u5934\uff0c\u4f7f\u7528\u4e00\u4e32 magic number \u6765\u6807\u8bc6\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\u56fe\u7247\u6587\u4ef6\u7684\u5f00\u5934\u901a\u5e38\u662f <code>0xFFD8</code>[^1]\uff0c\u811a\u672c\u6587\u672c\u6587\u4ef6\u5f00\u5934\u4f1a\u4ee5\u7c7b\u4f3c <code>#!bash</code> \u7684\u5f62\u5f0f\u6765\u6307\u5b9a\u7531\u8c01\u6765\u6267\u884c\uff08\u4f8b\u5982\u8fd9\u4e2a\u662f\u7528 <code>bash</code> \u6267\u884c\uff09\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff0c\u5e76\u975e\u6240\u6709\u6587\u4ef6\u90fd\u652f\u6301 magic number\uff0c\u6240\u4ee5\u5e76\u4e0d\u80fd\u4ec5\u4ec5\u7528 magic number \u6765\u5b9e\u73b0\u6587\u4ef6\u7c7b\u578b\u7684\u5224\u65ad\u3002</p>"},{"location":"OS/Unit6/#_6","title":"\u6587\u4ef6\u7ed3\u6784","text":"<p>\u6587\u4ef6\u7ed3\u6784\u6307\u7684\u662f\u6587\u4ef6\u6570\u636e\u5b58\u50a8\u7684\u5f62\u5f0f\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u6216\u7528\u6237\u7a0b\u5e8f\u51b3\u5b9a\u3002\u5e38\u89c1\u7684\u6587\u4ef6\u7ed3\u6784\u6709\uff1a</p> <ul> <li>\u65e0\u7ed3\u6784\uff1a\u6d41\u5f0f\u7684\u5b58\u50a8\u6240\u6709\u7684 words/bytes\uff0cUNIX \u5c31\u5b9a\u4f4d\u4eea\u6240\u6709\u6587\u4ef6\u5c31\u662f\u666e\u901a\u7684\u4e00\u4e32\u5b57\u8282\uff1b</li> <li>\u7b80\u5355\u8bb0\u5f55\u7ed3\u6784(simple record structure)\uff1a\u5c06\u6587\u4ef6\u4ee5 record \u4e3a\u5355\u4f4d\u5b58\u50a8\uff0crecord \u7684\u957f\u5ea6\u53ef\u4ee5\u662f fixed \u4e5f\u53ef\u4ee5\u662f variable \u7684\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u6587\u4ef6\uff1b</li> <li>\u590d\u6742\u7ed3\u6784(complex structures)\uff1b</li> </ul>"},{"location":"OS/Unit6/#_7","title":"\u8bbf\u95ee\u65b9\u5f0f","text":"<p>\u8bbf\u95ee\u65b9\u5f0f\u5373\u6570\u636e\u7684\u5b58\u53d6\u65b9\u5f0f\uff0c\u6700\u7b80\u5355\u4e5f\u6700\u5e38\u89c1\u7684\u8bbf\u95ee\u65b9\u5f0f\u662f\u987a\u5e8f\u8bbf\u95ee(sequential access)\uff0c\u5373\u50cf\u78c1\u5e26\u90a3\u6837\uff0c\u9010 byte \u6216\u8005\u9010 record \u5730\u8bbf\u95ee\u3002</p> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u76f4\u63a5\u8bbf\u95ee(direct access)\u6216\u76f8\u5bf9\u8bbf\u95ee(relative access)/\u968f\u673a\u8bbf\u95ee(random access)\uff0c\u5373\u652f\u6301\u4ee5\u51e0\u4e4e\u76f8\u540c\u7684\u65f6\u95f4\u8bbf\u95ee\u4efb\u610f\u4f4d\u7f6e\u3002</p> <p>\u5728\u76f4\u63a5\u8bbf\u95ee\u7684\u65b9\u6cd5\u4e4b\u4e0a\uff0c\u8fd8\u6709\u53ef\u80fd\u63d0\u4f9b\u7d22\u5f15\uff0c\u5373\u5148\u901a\u8fc7\u7d22\u5f15\u8868\u5f97\u77e5\u6240\u9700\u8bbf\u95ee\u7684\u5185\u5bb9\u5728\u54ea\u91cc\uff0c\u7136\u540e\u53bb\u8bbf\u95ee\u3002\u5728\u6b64\u4e4b\u4e0a\u8fd8\u6709\u4e00\u79cd\u7d22\u5f15\u987a\u5e8f\u8bbf\u95ee(indexed sequential-access)\u3002</p>"},{"location":"OS/Unit6/#_8","title":"\u76ee\u5f55\u7ed3\u6784","text":"<p>\u76ee\u5f55\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\uff08Linux \u4e2d\uff09\uff0c\u800c\u5b9e\u9645\u4e0a\uff0c\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u662f\u88ab\u5b58\u50a8\u5728\u76ee\u5f55\u4e2d\u7684\u3002\u76ee\u5f55\u7684\u7ed3\u6784\u8868\u793a\u7684\u662f\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u76ee\u5f55\u80fd\u591f\u5b9e\u73b0 filename \u5230 FCB \u7684\u6620\u5c04\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u4ecb\u7ecd\u82e5\u5e72\u76ee\u5f55\u7ed3\u6784\u7684\u8bbe\u8ba1\u3002</p> <p>\u800c\u5728 Windows \u4e2d\uff0c\u76ee\u5f55\u548c\u6587\u4ef6\u6709\u4e0d\u540c\u7684\u7cfb\u7edf\u8c03\u7528\u6765\u63a7\u5236\u3002</p>"},{"location":"OS/Unit6/#_9","title":"\u5355\u7ea7\u76ee\u5f55","text":"<p>\u6700\u539f\u59cb\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u4e0d\u5b58\u5728\u5206\u7ec4\u7b56\u7565\uff0c\u6240\u6709\u7684\u6587\u4ef6\u90fd\u88ab\u94fa\u5728\u6839\u76ee\u5f55\u4e0b\u3002</p>  ![](img/52.png){ width=80% }  Single-level directory.  <p>disadvantages</p> <ul> <li>\u4e3a\u4e86\u5b9e\u73b0\u7d22\u5f15\uff0c\u6587\u4ef6\u7684\u540d\u5b57\u5fc5\u987b\u662f\u552f\u4e00\u7684\uff1b</li> <li>\u968f\u7740\u6587\u4ef6\u6570\u91cf\u7684\u589e\u5927\uff0c\u8fd9\u4e2a\u8bbe\u8ba1\u6108\u53d1\u4e0d\u5408\u7406\uff1b</li> </ul>"},{"location":"OS/Unit6/#_10","title":"\u4e8c\u7ea7\u76ee\u5f55","text":"<p>\u7279\u6307\u4ee5\u7528\u6237\u4e3a\u4f9d\u636e\uff0c\u5c06\u6587\u4ef6\u5206\u7ec4\u3002\u5373\u4e3b\u6587\u4ef6\u76ee\u5f55(master file directory, MFD)\u4e0b\u4e3a\u6bcf\u4e2a\u7528\u6237\u5206\u914d\u4e00\u4e2a\u7528\u6237\u6587\u4ef6\u76ee\u5f55(user file directory, UFD)\uff0c\u6bcf\u4e2a\u7528\u6237\u7684\u76ee\u5f55\u4e0b\u518d\u5b58\u653e\u8be5\u7528\u6237\u7684\u6587\u4ef6\u3002</p>  ![](img/53.png){ width=80% }  Two-level directory structure.  <p>\u7531\u4e8e\u51fa\u73b0\u4e86\u5206\u5c42\u7ed3\u6784\uff0c\u6240\u4ee5\u5bf9\u6587\u4ef6\u7684\u7d22\u5f15\u4ece\u4f9d\u8d56\u6587\u4ef6\u540d\u8f6c\u4e3a\u4f9d\u8d56\u6587\u4ef6\u8def\u5f84(path)\u3002</p> <p>advantages</p> <ul> <li>\u76f8\u6bd4\u4e8e\u5355\u7ea7\u76ee\u5f55\uff0c\u4e0d\u540c\u7528\u6237\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u540d\u53ef\u4ee5\u76f8\u540c\u4e86\uff1b</li> </ul> <p>disadvantages</p> <ul> <li>\u5e76\u6ca1\u6709\u4ece\u6839\u6e90\u4e0a\u89e3\u51b3\u65e0\u6cd5\u5206\u7ec4\u7684\u95ee\u9898\uff1b</li> </ul>"},{"location":"OS/Unit6/#_11","title":"\u6811\u5f62\u76ee\u5f55","text":"<p>\u6811\u5f62\u76ee\u5f55(tree-structured directories)\u5c06\u76ee\u5f55\u89c6\u4e3a\u4e00\u79cd\u7279\u6b8a\u6587\u4ef6\uff0c\u5373\u5c06\u201c\u76ee\u5f55\u201d\u7684\u6982\u5ff5\u901a\u7528\u5316\uff0c\u4e8e\u662f\u5141\u8bb8\u7528\u6237\u5728\u76ee\u5f55\u4e0b\u81ea\u7531\u5730\u521b\u5efa\u76ee\u5f55\u8fdb\u884c\u5206\u7ec4\uff0c\u4e8e\u662f\u603b\u4f53\u6587\u4ef6\u7ed3\u6784\u6210\u4e3a\u4e00\u79cd\u6811\u5f62\u7ed3\u6784\u3002</p>  ![](img/54.png){ width=80% }  Tree-structured directory structure.  <p>\u6587\u4ef6\u90fd\u76f8\u5f53\u4e8e\u6811\u4e0a\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u975e\u76ee\u5f55\u8282\u70b9\u90fd\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u76ee\u5f55\u8282\u70b9\u90fd\u662f\u975e\u53f6\u5b50\u8282\u70b9\uff08\u4e0d\u8003\u8651\u7a7a\u76ee\u5f55\uff09\u3002\u4e3a\u4e86\u5728\u8fd9\u79cd\u7ed3\u6784\u4e0b\u627e\u5230\u552f\u4e00\u786e\u5b9a\u7684\u90a3\u4e2a\u6587\u4ef6\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u6587\u4ef6\u7684\u8def\u5f84(path)\uff0c\u5206\u4e3a\u7edd\u5bf9\u8def\u5f84(absolute path)\u548c\u76f8\u5bf9\u8def\u5f84(relative path)\u4e24\u79cd\u3002</p> <p>\u8fd9\u4e1c\u897f\u592a\u7b80\u5355\u4e86\uff0c\u53ea\u8981\u6709 Linux \u5b9e\u8df5\u7ecf\u5386\u5c31\u80af\u5b9a\u641e\u5f97\u660e\u767d\uff0c\u6240\u4ee5\u6211\u5c31\u4e0d\u5c55\u5f00\u4e86\u3002\u6ca1\u6709 Linux \u5b9e\u8df5\u7ecf\u5386\u5efa\u8bae\u5148\u6709 Linux \u5b9e\u8df5\u7ecf\u5386\u3002</p> <p>advantages</p> <ul> <li>\u89e3\u51b3\u4e86\u81ea\u7531\u5206\u7ec4\u7684\u95ee\u9898\uff0c\u4f7f\u6587\u4ef6\u7cfb\u7edf\u7684\u7ed3\u6784\u5316\u7ba1\u7406\u80fd\u529b\u5927\u5927\u589e\u5f3a\uff1b</li> </ul>"},{"location":"OS/Unit6/#_12","title":"\u65e0\u73af\u56fe\u76ee\u5f55","text":"<p>\u65e0\u73af\u56fe\u76ee\u5f55(acyclic-graph directories)\u662f\u5728\u6811\u5f62\u76ee\u5f55\u7684\u57fa\u7840\u4e0a\uff0c\u5141\u8bb8\u76ee\u5f55\u4e4b\u95f4\u5b58\u5728\u94fe\u63a5\u5173\u7cfb\uff0c\u94fe\u63a5\u5206\u4e3a\u8f6f\u94fe\u63a5(soft link)\u548c\u786c\u94fe\u63a5(hard link)\u4e24\u79cd\u3002</p>  ![](img/55.png){ width=80% }  Acyclic-graph directory structure.  soft link <p>\u8f6f\u94fe\u63a5\u53c8\u79f0\u7b26\u53f7\u94fe\u63a5(symbolic link)\uff0c\u662f\u4e00\u4e2a\u6307\u5411\u6587\u4ef6\u7684\u6307\u9488\uff0c\u7c7b\u4f3c\u4e8e Windows \u4e0b\u7684\u5feb\u6377\u65b9\u5f0f\u3002</p> <p>\u5220\u9664\u88ab\u8f6f\u94fe\u63a5\u6307\u5411\u7684\u90a3\u4e2a\u6587\u4ef6\u5e76\u4e0d\u4f1a\u8fde\u5e26\u5730\u5904\u7406\u8f6f\u94fe\u63a5\uff0c\u4f46\u662f\u539f\u5148\u7684\u8fd9\u4e2a\u8f6f\u94fe\u63a5\u5df2\u7ecf\u5931\u6548\u4e86\u3002</p> <p>\u4ece\u672c\u8d28\u4e0a\u6765\u770b\uff0c\u8f6f\u94fe\u63a5\u662f\u7279\u6b8a\u7684\u6587\u4ef6\u3002</p> <p></p> hard link <p>\u786c\u94fe\u63a5\u662f\u590d\u5236\u94fe\u63a5\u6587\u4ef6\u76ee\u5f55\u9879\u7684\u6240\u6709\u5143\u4fe1\u606f\uff0c\u5b58\u5230\u76ee\u6807\u76ee\u5f55\u4e2d\uff0c\u6b64\u65f6\u6587\u4ef6\u5e73\u7b49\u5730\u5c5e\u4e8e\u4e24\u4e2a\u76ee\u5f55\u3002</p> <p>\u7531\u4e8e\u6b64\u65f6\u6587\u4ef6\u7b49\u4ef7\u5730\u5c5e\u4e8e\u590d\u6570\u4e2a\u76ee\u5f55\uff0c\u6240\u4ee5\u5728\u6587\u4ef6\u5143\u4fe1\u606f\u88ab\u66f4\u65b0\u65f6\uff0c\u9700\u8981\u4fdd\u8bc1\u5728\u82e5\u5e72\u76ee\u5f55\u4e0b\u8be5\u6587\u4ef6\u7684\u4fe1\u606f\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u5220\u9664\u88ab\u786c\u94fe\u63a5\u7684\u6587\u4ef6\u5e76\u4e0d\u4f1a\u76f4\u63a5\u5bfc\u81f4\u6587\u4ef6\u88ab\u5220\u9664\uff0c\u53ea\u6709\u5f53\u7528\u6765\u8bb0\u5f55\u300c\u88ab\u786c\u94fe\u63a5\u6570\u91cf\u300d\u7684 reference counter \u88ab\u51cf\u81f3 0\uff0c\u5373\u4e0d\u518d\u6709\u5176\u4ed6\u786c\u94fe\u63a5\u6307\u5411\u8be5\u6587\u4ef6\u65f6\uff0c\u6587\u4ef6\u624d\u4f1a\u88ab\u5220\u9664\uff1b\u5176\u4ed6\u60c5\u51b5\u4e0b\u90fd\u53ea\u9700\u8981\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\u5220\u9664\u8be5\u8868\u9879\uff0c\u5e76\u5c06 reference counter \u51cf 1\uff0c\u66f4\u65b0\u76f8\u5173\u5143\u4fe1\u606f\u5373\u53ef\u3002</p> <p>\u4ece\u672c\u8d28\u4e0a\u6765\u770b\uff0c\u786c\u94fe\u63a5\u662f\u76ee\u5f55\u8868\u9879\u3002</p> <p>\u5728\u65e0\u73af\u56fe\u76ee\u5f55(acyclic-graph directories)\u4e2d\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u65e0\u73af\uff0c\u6211\u4eec\u53ea\u5141\u8bb8\u521b\u5efa\u5173\u4e8e\u6587\u4ef6\u8fd9\u79cd\u53f6\u5b50\u8282\u70b9\u7684\u786c\u94fe\u63a5[^2]\u3002\u4e0d\u8fc7\u8fd9\u4e2a\u8bf4\u6cd5\u5b58\u5728\u4e00\u4e2a\u4f8b\u5916\uff0c\u6211\u4eec\u90fd\u77e5\u9053\u901a\u5e38\u5728\u4efb\u610f\u8def\u5f84\u90fd\u4f1a\u6709 <code>.</code> \u548c <code>..</code> \u8fd9\u4e24\u4e2a\u7279\u6b8a\u76ee\u5f55\uff0c\u5b83\u4eec\u901a\u8fc7\u786c\u94fe\u63a5\u5206\u522b\u6307\u5411\u5f53\u524d\u76ee\u5f55\u548c\u7236\u76ee\u5f55\uff08\u6839\u76ee\u5f55\u7684\u7236\u76ee\u5f55\u4e5f\u662f\u6839\u76ee\u5f55\uff09\u3002</p> <p>\u6b64\u5916\uff0c\u7531\u4e8e\u786c\u94fe\u63a5\u672c\u8d28\u4e0a\u662f\u8868\u9879\uff0c\u800c\u8868\u9879\u4e0e\u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\uff0c\u6240\u4ee5\u786c\u94fe\u63a5\u53ea\u80fd\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e0b\u521b\u5efa\uff0c\u65e0\u6cd5\u8de8\u8d8a file-system boundary\u3002</p>"},{"location":"OS/Unit6/#_13","title":"\u901a\u7528\u56fe\u76ee\u5f55","text":"<p>\u65e0\u73af\u56fe\u76ee\u5f55\u901a\u8fc7\u4fdd\u8bc1\u4e0d\u5b58\u5728\u73af\u6765\u4fdd\u8bc1\u6587\u4ef6\u7cfb\u7edf\u7684\u7b80\u4ecb\u6027\uff0c\u907f\u514d\u904d\u5386\u76ee\u5f55\u65f6\u5019\u51fa\u73b0\u6b7b\u5faa\u73af\u6216\u8005\u5220\u9664\u6587\u4ef6\u65f6\u51fa\u73b0\u7684\u5faa\u73af\u4f9d\u8d56\u7b49\u95ee\u9898\u3002</p> <p>\u800c\u901a\u7528\u56fe\u76ee\u5f55(general-graph directories)\u5219\u5141\u8bb8\u76ee\u5f55\u4e4b\u95f4\u5b58\u5728\u73af\uff0c\u4f46\u662f\u5728\u5404\u79cd\u64cd\u4f5c\u65f6\uff0c\u901a\u8fc7\u7b97\u6cd5\u6765\u907f\u514d\u51fa\u73b0\u95ee\u9898\uff0c\u4f8b\u5982\u90e8\u5206\u80fd\u5904\u7406\u73af\u7684\u56fe\u904d\u5386\u7b97\u6cd5\u3001\u5783\u573e\u56de\u6536\u673a\u5236\u7b49\u3002</p>  ![](img/56.png){ width=80% }  General graph directory."},{"location":"OS/Unit6/#_14","title":"\u6587\u4ef6\u7cfb\u7edf","text":"<p>\u6587\u4ef6\u7cfb\u7edf(file system, FS)\u5728\u4e8c\u7ea7\u5b58\u50a8\u4e0a\uff0c\u5b83\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u5feb\u901f\u3001\u4fbf\u6377\u7684\uff0c\u5bf9\u786c\u76d8\u6570\u636e\u7684\u64cd\u4f5c\u3002\u6587\u4ef6\u7cfb\u7edf\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4ee5\u6587\u4ef6\u7684\u65b9\u5f0f\u7ba1\u7406\u8ba1\u7b97\u673a\u8f6f\u4ef6\u8d44\u6e90\u7684\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u88ab\u7ba1\u7406\u7684\u6587\u4ef6\u548c\u6570\u636e\u7ed3\u6784\u7684\u96c6\u5408\u3002</p> common file system types <ul> <li>FAT</li> <li>FAT32, exFAT</li> <li>NTFS</li> <li>ReFS</li> <li>S51K/S52K</li> <li>ext</li> <li>ext2, ext3, ext4(Linux, Android)</li> <li>proc, sysfs</li> <li>yaffs</li> <li>ReiserFS</li> <li>HPFS</li> <li>UFS</li> <li>HFS+(MacOS, iOS | old)</li> <li>iso9660(CD)</li> <li>NFS(network FS)</li> <li>VFS(virtual FS)</li> <li>ZFS(Open Solaris)</li> <li>LTFS</li> <li>APFS(MacOS, iOS | new)</li> <li>...</li> </ul>"},{"location":"OS/Unit6/#_15","title":"\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d","text":"<p>\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d(mount)\u662f\u6307\u5c06\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u6839\u76ee\u5f55\u6302\u8f7d\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u67d0\u4e2a\u76ee\u5f55\uff08\u88ab\u79f0\u4e3a mount point\uff09\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u53ef\u4ee5\u8bbf\u95ee\u5230\u88ab\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u3002\u53ea\u6709\u88ab\u6302\u8f7d\u4e86\uff0c\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u624d\u80fd\u88ab\u8bbf\u95ee\u3002</p>  ![](img/57.png){ width=80% }  Volume mounted at /users."},{"location":"OS/Unit6/#_16","title":"\u6587\u4ef6\u7cfb\u7edf\u5206\u5c42\u8bbe\u8ba1","text":"<p>\u6587\u4ef6\u7cfb\u7edf\u88ab\u5206\u4e3a\u82e5\u5e72\u5c42\uff0c\u5411\u4e0b\u4e0e device \u4ea4\u4e92\uff0c\u5411\u4e0a\u63a5\u53d7 application programs \u7684\u8bf7\u6c42\uff0c\u5982\u4e0b\u662f\u5404\u4e2a\u5206\u5c42\u7684\u8bbe\u8ba1\uff1a</p> <pre><code>graph LR;\n    A([\"application programs\"]) --&gt; B[\"logical file system\"];\n    B --&gt; C[\"file-organization module\"];\n    C --&gt; D[\"basic file system\"];\n    D --&gt; E[\"I/O control\"];\n    E --&gt; F([\"devices\"]);\n</code></pre> <ol> <li>I/O control<ul> <li>\u5411\u4e0b\u63a7\u5236 I/O devices\uff0c\u5411\u4e0a\u4e3a\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b I/O \u529f\u80fd\uff1b</li> <li>\u5305\u542b device drivers \u548c interrupt handlers\uff0c\u662f\u4e0e\u5177\u4f53 device \u4ea4\u4e92\u7684\u63a5\u53e3\u5c42\uff1b[^4]<ul> <li>\u5176\u4e2d\u8bbe\u5907\u9a71\u52a8(device driver)\u63d0\u4f9b\u4e86\u4e00\u5957\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u901a\u5e38\u662f\u4e00\u7cfb\u5217\u5f02\u6b65\u4e2d\u65ad\u5904\u7406\u65b9\u6848\uff1b[^5]</li> </ul> </li> </ul> </li> <li>Basic file system<ul> <li>\u5411\u4e0b\u4e00\u5c42\u53d1\u5c04\u201c\u62bd\u8c61\u201d\uff08\u4e0e\u8bbe\u5907\u578b\u53f7\u65e0\u5173\uff09\u7684\u64cd\u4f5c\u6307\u4ee4\uff08\u7531\u4e0b\u4e00\u5c42\u8f6c\u5316\u4e3a\u8bbe\u5907\u76f4\u63a5\u652f\u6301\u7684\u6307\u4ee4\uff09\uff1b</li> <li>\u4e0e I/O \u8c03\u5ea6\u6709\u5173\uff1b</li> <li>\u7ba1\u7406\u5185\u5b58\u7f13\u51b2\u533a(memory buffer)\u548c\u7f13\u5b58(caches)\uff1b<ul> <li>Buffer \u7684\u4f5c\u7528\u53ef\u4ee5\u53c2\u8003 ADS \u4e2d\u7684\u5916\u6392\u5e8f\u4e2d\u7684\u76f8\u5173\u5185\u5bb9\u6765\u7406\u89e3\uff1b</li> <li>Caches \u7528\u6765\u5b58\u50a8\u4e00\u4e9b\u4f1a\u88ab\u9891\u7e41\u7528\u5230\u7684\u6587\u4ef6\u7cfb\u7edf\u5143\u6570\u636e\uff0c\u4ee5\u63d0\u9ad8\u6587\u4ef6\u7cfb\u7edf\u6027\u80fd\uff1b</li> </ul> </li> </ul> </li> <li>File-organization module<ul> <li>\u4ee5 basic file system \u63d0\u4f9b\u7684\u529f\u80fd\u4e3a\u57fa\u7840\uff1b</li> <li>\u80fd\u591f\u5b9e\u73b0 file \u7684 logical block \u5230 physical address \u7684\u6620\u5c04\uff1b[^4] </li> <li>\u540c\u65f6\uff0cfile-organization module \u4e5f\u56ca\u62ec\u4e86 free-space manager\uff1b<ul> <li>Free-space manager \u7ef4\u62a4\u90a3\u4e9b\u6ca1\u6709\u88ab\u5206\u914d\u7684 blocks\uff0c\u5e76\u5728 file-organization module \u8bf7\u6c42\u7684\u65f6\u5019\u63d0\u4f9b\u8fd9\u4e9b blocks\uff1b </li> </ul> </li> </ul> </li> <li>Logical file system<ul> <li>\u5b58\u50a8\u4e00\u4e9b\u6587\u4ef6\u7cfb\u7edf\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u4e0d\u5305\u62ec\u5b9e\u9645\u7684\u6587\u4ef6\u5185\u5bb9\u4fe1\u606f\uff1b</li> <li>\u5177\u4f53\u6765\u8bf4\uff0clogical file system \u4f1a\u7ef4\u62a4 directory \u7684\u4fe1\u606f\uff0c\u4e3a\u4e4b\u540e\u7684 file-organization module \u63d0\u4f9b\u4e00\u4e9b\u4fe1\u606f\uff0c\u4f8b\u5982\u7b26\u53f7\u6587\u4ef6\u540d\uff1b</li> <li>FCB \u4f1a\u7ef4\u62a4\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u7684\u4e00\u4e9b\u5177\u4f53\u4fe1\u606f\uff1b</li> </ul> </li> </ol>"},{"location":"OS/Unit6/#_17","title":"\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u6587\u4ef6\u7cfb\u7edf\uff0c\u6211\u4eec\u9700\u8981\u5728\u786c\u76d8\u548c\u5185\u5b58\u4e2d\u7ef4\u62a4\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u4e0b\u9762\u5206\u522b\u4ecb\u7ecd on-disk structures \u548c in-memory structures\u3002</p>"},{"location":"OS/Unit6/#_18","title":"\u786c\u76d8\u6570\u636e\u7ed3\u6784","text":"<p>On-Disk \u7684\u6570\u636e\u7ed3\u6784\u7ef4\u62a4 \u24f5 \u5982\u4f55\u542f\u52a8\u786c\u76d8\u4e2d\u7684 OS\uff0c\u24f6 \u786c\u76d8\u4e2d\u5305\u62ec\u7684 block \u603b\u6570\uff0c\u24f7 \u7a7a\u95f2 block \u7684\u6570\u91cf\u548c\u4f4d\u7f6e\uff0c\u24f8 \u76ee\u5f55\u7ed3\u6784\u4ee5\u53ca\u6587\u4ef6\u4e2a\u4f53\u7b49\uff0c\u4e0b\u9762\u4ecb\u7ecd\u51e0\u4e2a\u4e3b\u8981\u7684\u6570\u636e\u7ed3\u6784\u3002</p> <ul> <li>Boot control block<ul> <li>\u64cd\u4f5c\u7cfb\u7edf\u88ab\u4fdd\u5b58\u5728\u5f15\u5bfc\u63a7\u5236\u5757(boot control block)\u4e2d\uff0c\u4e00\u822c boot control block \u662f\u64cd\u4f5c\u7cfb\u7edf\u6240\u5728\u7684 volume \u7684\u7b2c\u4e00\u4e2a block\u3002</li> <li>\u5728 UFS \u4e2d\uff0cboot control block \u4e5f\u88ab\u79f0\u4e3a boot block\uff1b\u5728 NTFS \u4e2d\uff0c\u4e5f\u88ab\u79f0\u4e3a partition boot sector\u3002</li> <li>\u8be5\u6570\u636e\u7ed3\u6784\u662f per volume \u7684\u3002</li> </ul> </li> <li>Volume control block<ul> <li>\u5377\u63a7\u5236\u5757(volume control block)\u7ef4\u62a4\u4e86 volume \u7684\u5177\u4f53\u4fe1\u606f\uff0c\u4f8b\u5982 volume \u7684 blocks \u6570\u91cf\u3001\u7a7a\u95f2 block \u7684\u6570\u91cf\u4e0e\u6307\u9488\u3001\u7a7a\u95f2 PCB \u7684\u6570\u91cf\u4e0e\u6307\u9488\u7b49\u3002</li> <li>\u5728 UFS volume control block \u4e5f\u88ab\u79f0\u4e3a superblock\uff1b\u5728 NTFS \u4e2d\uff0c\u4e5f\u88ab\u79f0\u4e3a master file table\u3002</li> <li>\u8be5\u6570\u636e\u7ed3\u6784\u662f per volume \u7684\u3002</li> </ul> </li> <li>Directory structure<ul> <li>\u76ee\u5f55\u7ed3\u6784(directory structure)\u5df2\u7ecf\u5728\u524d\u9762\u63d0\u5230\u8fc7\uff0c\u5b83\u7528\u6765\u7ec4\u7ec7 files\uff0c\u540c\u65f6\u4e5f\u7ef4\u62a4\u4e86 files \u7684\u5143\u4fe1\u606f\u3002</li> <li>\u5728 UFS \u4e2d\uff0c\u5b83\u7ef4\u62a4\u4e86\u6587\u4ef6\u4ee5\u53ca\u5bf9\u5e94\u7684 inode numbers\uff1b\u5728 NTFS \u4e2d\uff0c\u5b83\u5728 master file table \u4e2d\u88ab\u7ef4\u62a4\u3002</li> <li>\u8be5\u6570\u636e\u7ed3\u6784\u662f per FS \u7684\u3002</li> </ul> </li> <li> File control block <ul> <li>\u6587\u4ef6\u63a7\u5236\u5757(file control block, FCB)^Wiki^\u7ef4\u62a4\u4e86\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u7684\u5177\u4f53\u4fe1\u606f\u3002PCB \u4e00\u822c\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\u7b26\u4e0e\u76ee\u5f55\u9879\u5173\u8054\u3002</li> <li>\u6ce8\u610f\uff1a\u7406\u8bba\u4e0a\u7684 FCB \u5b9a\u4e49\u5982\u4e0a\uff0c\u5e94\u5f53\u4e3b\u8981\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\uff1b\u4f46\u662f\u8bfe\u672c\u4e2d\u7684 FCB \u6307\u7684\u662f\u66f4\u5e7f\u6cdb\u7684\uff0c\u56e0\u6b64\u5728\u786c\u76d8\u4e2d\u7ef4\u62a4\u6587\u4ef6\u5143\u4fe1\u606f\u7684\u90a3\u4e9b\u4e1c\u897f\u4e5f\u88ab\u79f0\u4e3a FCB\uff0c\u8bfb\u8005\u9700\u8981\u5728\u8fd9\u91cc\u68b3\u7406\u6e05\u695a\u8fd9\u79cd\u5b9a\u4e49\u4e0a\u7684\u504f\u5dee\uff01</li> <li>\u4f8b\u5982\uff0c\u5b83\u53ef\u80fd\u88ab\u5305\u542b\u5982\u4e0b\u4fe1\u606f\uff1a<ul> <li>\u6587\u4ef6\u6743\u9650\uff1b</li> <li>\u6587\u4ef6\u64cd\u4f5c\u65e5\u671f\uff1b</li> <li>ACL\uff1b</li> <li>\u6587\u4ef6\u5927\u5c0f\uff1b</li> <li>\u6587\u4ef6\u6570\u636e\u6240\u5728\u7684 block \u6216\u8fd9\u4e2a block \u7684\u6307\u9488\uff1b</li> <li>...</li> </ul> </li> <li>\u5728 UFS \u4e2d\uff0cFCB \u6307\u7684\u5c31\u662f\u4e00\u4e2a inode\uff1b\u5728 NTFS \u4e2d\uff0cPCB \u901a\u5e38\u5728 master file table \u4e2d\u88ab\u7ef4\u62a4\uff0c\u5176\u7ef4\u62a4\u5f62\u5f0f\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u5f62\u6570\u636e\u5e93\u3002</li> </ul> </li> </ul>"},{"location":"OS/Unit6/#_19","title":"\u5185\u5b58\u6570\u636e\u7ed3\u6784","text":"<p>In-Memory \u7684\u6570\u636e\u7ed3\u6784\u5728 main memory \u4e2d\u7ef4\u62a4\uff0c\u7528\u4e8e\u5e2e\u52a9\u6587\u4ef6\u7cfb\u7edf\u7ba1\u7406\u548c\u4e00\u4e9b\u7f13\u5b58\u64cd\u4f5c\u3002</p> <ul> <li>Mount table<ul> <li>\u5df2\u88ab\u6302\u8f7d\u7684 volume \u4f1a\u88ab\u8bb0\u5f55\u5728 mount table \u4e2d\u3002</li> </ul> </li> <li>Directory cache<ul> <li>\u4e3a\u4e86\u63d0\u9ad8\u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u4e00\u4e9b\u6700\u8fd1\u88ab\u8bbf\u95ee\u7684\u76ee\u5f55\u4fe1\u606f\u4f1a\u88ab\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u8fd9\u4e9b\u7f13\u5b58\u7684\u76ee\u5f55\u4fe1\u606f\u88ab\u79f0\u4e3a directory cache\u3002</li> </ul> </li> <li>System-wide open-file table<ul> <li>\u8bb0\u5f55\u8fd9\u4e2a\u7cfb\u7edf\u4e2d\u6240\u6709\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u3002</li> </ul> </li> <li>Per-process open-file table<ul> <li>\u8bb0\u5f55\u6bcf\u4e2a\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u5176 entry \u6307\u5411 system-wide open-file table \u4e2d\u7684 entry\u3002</li> </ul> </li> <li>Buffers<ul> <li>\u5728\u5185\u5b58\u4e2d\uff0c\u7528\u4e8e\u7f13\u51b2 disk block \u7684\u5185\u5bb9\u3002</li> <li>\u5f53\u4e00\u4e2a disk block \u88ab\u8bfb\u65f6\uff0c\u5b83\u7684\u5185\u5bb9\u4f1a\u88ab\u653e\u5230 buffer \u91cc\uff1b\u5f53\u4e00\u4e2a\u5411 disk block \u5199\u7684\u52a8\u4f5c\u53d1\u751f\u65f6\uff0c\u4f1a\u5148\u88ab\u5199\u5165 buffer\u3002</li> <li>\u901a\u8fc7\u4e0a\u9762\u8fd9\u79cd\u65b9\u5f0f\uff0cbuffer \u6280\u672f\u53ef\u4ee5\u5b9e\u73b0\u7edf\u4e00 CPU \u548c I/O \u8bbe\u5907\u4e4b\u95f4\u7684\u901f\u5ea6\u5dee\u5f02\u3002</li> </ul> </li> </ul>"},{"location":"OS/Unit6/#_20","title":"\u6587\u4ef6\u64cd\u4f5c","text":"<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4e3e\u4f8b\u8bf4\u660e\u5177\u4f53\u7684\u64cd\u4f5c\u662f\u5982\u4f55\u5728\u8fd9\u4e9b\u8bbe\u8ba1\u4e0b\u8fd0\u4f5c\u7684\u3002</p> file creation <p>Application program \u9700\u8981\u521b\u5efa\u6587\u4ef6\u65f6\uff0c\u8c03\u7528 logical file system\uff0c\u5e76\u7ed9\u51fa\u9700\u8981\u521b\u5efa\u7684\u6587\u4ef6\u540d\u3002\u5b83\u4e86\u89e3 directory \u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u4f1a\u505a\u76f8\u5e94\u5904\u7406\u3002</p> <p>\u521b\u5efa\u6587\u4ef6\u65f6\uff0c\u4e00\u4e2a\u5bf9\u5e94\u7684 FCB \u4f1a\u88ab\u521b\u5efa\uff1b\u4e0e\u6b64\u540c\u65f6\uff0c\u5bf9\u5e94\u7684 parent directory \u4e5f\u4f1a\u88ab\u8f7d\u5165\u5185\u5b58\uff0c\u5e76\u88ab\u66f4\u65b0\u3002</p> file open &amp; close <p>Application program \u9700\u8981\u5148\u6253\u5f00\u6587\u4ef6\u624d\u80fd\u5bf9\u6587\u4ef6\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684 I/O \u64cd\u4f5c\uff0c\u8fd9\u4e00\u6b65\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528 <code>open()</code> \u6765\u5b9e\u73b0\u3002</p> <p>\u6253\u5f00\u6587\u4ef6\u65f6\uff0c<code>open()</code> \u4f1a\u5c06\u6587\u4ef6\u540d\u4f20\u8f93\u7ed9 logical file system\u3002\u540c\u65f6\uff0c<code>open()</code> \u4f1a\u5728 system-wide open-file table \u91cc\u67e5\u627e\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5982\u679c\u627e\u5230\u4e86\uff0c\u8bf4\u660e\u8fd9\u4e2a\u6587\u4ef6\u6b63\u5728\u88ab\u5176\u5b83\u8fdb\u7a0b\u4f7f\u7528\uff0c\u5c31\u53ef\u4ee5\u5269\u4e0b\u4e00\u4e9b\u989d\u5916\u7684\u5f00\u9500\u76f4\u63a5\u8fdb\u884c\u4e0b\u4e00\u6b65\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u9700\u8981\u5728 directory structure \u4e2d\u67e5\u627e\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5f53\u8fd9\u4e2a\u6587\u4ef6\u88ab\u627e\u5230\u540e\uff0c\u5176 FCB \u4f1a\u88ab\u590d\u5236\u8fdb system-wide open-file table \u8868\u793a\u8be5\u6587\u4ef6\u88ab\u6253\u5f00\u3002</p> <p>\u968f\u540e\uff0c\u5728 per-process open-file table \u4e2d\u521b\u5efa\u4e00\u4e2a entry\uff0c\u6307\u5411 system-wide open-file table \u4e2d\u7684 entry\uff0c\u8868\u793a\u5f53\u524d\u8fdb\u7a0b\u6253\u5f00\u4e86\u4e00\u4e2a\u6587\u4ef6\u3002\u540c\u65f6\uff0c\u8fd9\u4e2a\u6307\u5411\u7684 entry \u7684 reference counter \u4f1a\u88ab\u52a0 1\u3002</p> <p>\u6211\u4eec\u4e4b\u540e\u5bf9\u6587\u4ef6\u7684\u64cd\u4f5c\u90fd\u4f9d\u8d56\u8fd9\u4e2a\u6307\u5411 system-wide open-file table \u4e2d entry \u7684\u6307\u9488\uff0c\u5b83\u5728 UNIX \u4e2d\u88ab\u79f0\u4e3a file descriptor\uff0c\u5728 Windows \u4e2d\u88ab\u79f0\u4e3a file handle\u3002</p> <p>\u5bf9\u5e94\u7684\uff0c\u5728\u6587\u4ef6 close \u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5148\u5220\u9664 per-process open-file table \u4e2d\u7684 entry\uff0c\u7136\u540e\u5c06 system-wide open-file table \u4e2d\u7684 entry \u7684 reference counter \u51cf 1\uff0c\u5982\u679c\u6b64\u65f6 reference counter \u4e3a 0\uff0c\u8bf4\u660e\u6ca1\u6709\u5176\u5b83\u8fdb\u7a0b\u6253\u5f00\u8fd9\u4e2a\u6587\u4ef6\u4e86\uff0c\u90a3\u4e48\u8fd9\u4e2a entry \u4f1a\u88ab\u5220\u9664\uff0c\u6b64\u65f6\u9700\u8981\u66f4\u65b0 directory structure \u4e2d\u7684\u4fe1\u606f\u3002</p>"},{"location":"OS/Unit6/#_21","title":"\u76ee\u5f55\u7684\u5b9e\u73b0","text":"<p>\u672c\u8282\u4ecb\u7ecd\u4e24\u79cd\u76ee\u5f55\u7684\u5b9e\u73b0\u65b9\u6cd5\u3002</p> linear list based <p>\u7ebf\u6027\u68c0\u7d22\u6cd5\u901a\u8fc7\u7ebf\u6027\u8868\uff08\u6570\u7ec4/\u94fe\u8868\u7b49\uff09\u6765\u5b58\u50a8\u76ee\u5f55\u4fe1\u606f\uff0c\u6bcf\u4e2a\u76ee\u5f55\u9879\u5305\u542b file name \u548c\u6307\u5411 FCB/Inode \u7684\u6307\u9488\uff0c\u67e5\u627e\u65f6\u9700\u8981\u904d\u5386\u67e5\u627e\u3002</p> <p>advantages</p> <ul> <li>\u5b9e\u73b0\u7b80\u5355\uff1b</li> </ul> <p>disadvantages</p> <ul> <li>\u968f\u7740\u6587\u4ef6\u6570\u91cf\u7684\u589e\u52a0\uff0c\u68c0\u7d22\u6548\u7387\u4f1a\u964d\u4f4e\uff1b</li> </ul> <p>improvement</p> <ul> <li>\u4f7f\u7528\u6709\u5e8f\u6570\u636e\u7ed3\u6784\uff08\u5e73\u8861\u6811\u3001B+ \u6811\u7b49\uff09\u53ef\u4ee5\u6539\u5584\u7f3a\u70b9\uff1b</li> </ul> hash table based <p>\u54c8\u5e0c\u8868\u6cd5\u901a\u8fc7\u54c8\u5e0c\u8868\u6765\u5b58\u50a8\u76ee\u5f55\u4fe1\u606f\uff0c\u6bcf\u4e2a\u76ee\u5f55\u9879\u5305\u542b file name \u548c\u6307\u5411 FCB/Inode \u7684\u6307\u9488\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 hash function \u8fdb\u884c random access\u3002</p> <p>advantages</p> <ul> <li>\u68c0\u7d22\u6548\u7387\u66f4\u9ad8\uff1b</li> </ul> <p>disadvantages</p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u51b2\u7a81\u95ee\u9898\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u7b97\u6cd5\u89e3\u51b3\uff1b</li> <li>\u54c8\u5e0c\u8868\u5bf9\u5bb9\u7eb3\u5185\u5bb9\u7684\u5927\u5c0f\u6709\u5047\u8bbe\uff1b</li> </ul>"},{"location":"OS/Unit6/#_22","title":"\u5757\u5206\u914d\u4e0e\u5757\u7ec4\u7ec7","text":"<p>\u6211\u4eec\u5728\u8bb2\u5185\u5b58\u7684\u65f6\u5019\uff0c\u8ba8\u8bba\u8fc7\u8fdb\u7a0b\u7684\u5185\u5b58\u5206\u914d\u7b56\u7565\u3002\u8fd9\u91cc\u8ba8\u8bba\u7684\u5185\u5bb9\u662f\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u8003\u8651\u6587\u4ef6\u5185\u5b58\u8981\u5982\u4f55\u88ab\u5206\u914d\uff0c\u540c\u65f6\uff0c\u5757\u5982\u4f55\u5206\u914d\u4e5f\u6697\u793a\u4e86\u5757\u662f\u5982\u4f55\u7ec4\u7ec7\u7684\u3002</p> <p>\u901a\u5e38\u6765\u8bf4\u4e3b\u8981\u6709\u4e09\u79cd\uff1a\u8fde\u7eed(contiguous)\u3001\u94fe\u63a5(linked)\u548c\u7d22\u5f15(indexed)\uff0c\u5b83\u4eec\u4e4b\u95f4\u5404\u6709\u4f18\u52a3\uff0c\u9700\u8981\u6ce8\u610f\u638c\u63e1\u5b83\u4eec\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u4f1a\u6709\u8ba1\u7b97\u9898\u3002</p> continuous <p>\u8fde\u7eed\u5206\u914d\u6307\u7684\u662f\u6bcf\u4e2a\u6587\u4ef6\u5360\u7528\u4e00\u6bb5\u8fde\u7eed\u7684 block\u3002</p> <p>  Contiguous allocation of disk space. </p> <p>\u5047\u8bbe\u5757\u5927\u5c0f\u4e3a 512 B\uff0c\u5982\u679c\u7ed9\u5b9a\u5b58\u53d6\u6587\u4ef6\u7684\u903b\u8f91\u5730\u5740 LA\uff0c\u5219\u5176\u5bf9\u5e94\u7684\u7ed3\u6784\u5185\u5757\u53f7 Q \u548c\u5757\u5185\u504f\u79fb R \u4e3a\uff1a</p> <pre><code>block_size = 512 # Bytes\nQ = LA / block_size\nR = LA % block_size\n</code></pre> <p>advantages</p> <ul> <li>\u5b9e\u73b0\u7b80\u5355\uff0c\u53ea\u9700\u8981\u8bb0\u5f55\u6587\u4ef6\u7684 start block \u548c length \u5373\u53ef\uff1b</li> <li>\u6587\u4ef6\u8bbf\u95ee\u6548\u7387\u9ad8\uff1b</li> </ul> <p>disadvantages</p> <ul> <li>\u5206\u914d\u65f6\u5bfb\u627e\u5408\u9002\u7a7a\u95f4\u6bd4\u8f83\u56f0\u96be\uff1b<ul> <li>\u7c7b\u4f3c\u8fdb\u7a0b\u7684\u5185\u5b58\u5206\u914d\u7b56\u7565\uff0c\u9700\u8981\u8003\u8651\u5916\u90e8\u788e\u7247\u7b49\u95ee\u9898\uff1b</li> </ul> </li> <li>\u5728\u6587\u4ef6\u53ef\u80fd\u52a8\u6001\u53d8\u5316\u7684\u60c5\u51b5\u4e0b\u4f1a\u5f88\u7cdf\u7cd5\uff08\u6216\u8005\u8bf4\uff0c\u6587\u4ef6\u9700\u8981\u591a\u5c11\u7a7a\u95f4\u6709\u65f6\u662f\u96be\u4ee5\u9884\u8ba1\u7684\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5b9e\u9645\u4f7f\u7528\u7a7a\u95f4\u6bd4\u9884\u671f\u5927\u6216\u5c0f\u7684\u60c5\u51b5\uff09\uff1b<ul> <li>\u5982\u679c\u6587\u4ef6\u53d8\u5c0f\uff0c\u53ef\u80fd\u53ea\u662f\u5e26\u6765\u5916\u90e8\u788e\u7247\uff0c\u4f46\u662f\u6587\u4ef6\u53d8\u5927\u5c31\u65e0\u6cd5\u89e3\u51b3\u4e86\uff1b</li> </ul> </li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u5916\u90e8\u788e\u7247\u7684\u95ee\u9898\uff0c\u6709\u4e00\u79cd\u7b56\u7565\u53eb compacts\uff0c\u6307\u7684\u662f\u5148\u6682\u65f6\u5c06\u6587\u4ef6\u7cfb\u7edf\u590d\u5236\u5230\u53e6\u5916\u4e00\u4e2a\u8bbe\u5907\u4e0a\uff0c\u7136\u540e\u5b8c\u5168\u91ca\u653e\u539f\u59cb\u8bbe\u5907\u7684\u8d44\u6e90\uff0c\u518d\u5c06\u6587\u4ef6\u590d\u5236\u56de\u53bb\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u201c\u538b\u7f29\u201d\u3002\u4e0d\u8fc7\u663e\u7136\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u7684\u5f00\u9500\u662f\u5de8\u5927\u7684\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u6587\u4ef6\u5927\u5c0f\u53d8\u5927\uff0c\u65e0\u6cd5\u6269\u5c55\u7684\u95ee\u9898\uff0c\u6709\u4e00\u79cd\u673a\u5236\u53eb\u505a extent\uff0c\u53ef\u4ee5\u4fee\u6b63\u8fd9\u4e2a\u95ee\u9898\u3002\u5f53\u7a7a\u95f4\u4e0d\u591f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u88ab\u5206\u914d\u4e00\u5757\u65b0\u7684\u8fde\u7eed\u7a7a\u95f4\uff0c\u94fe\u5f0f\u5730\u52a0\u5165\u5230\u539f\u59cb\u7a7a\u95f4\u7684\u540e\u9762\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u89e3\u51b3\u6587\u4ef6\u5927\u5c0f\u53d8\u5927\u7684\u95ee\u9898\u4e86\uff08\u7c7b\u4f3c\u4e8e\u4e00\u79cd\u4e0d\u5b9a\u7684\u5927\u7c92\u5ea6\u7684\uff0c\u7531 FCB \u7ef4\u62a4\u7684\u94fe\u63a5\u65b9\u6848\uff09\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u9664\u4e86 start blok \u548c length\uff0c\u8fd8\u9700\u8981\u5728 FCB \u4e0a\u8bb0\u5f55\u6307\u5411 extent \u7684\u6307\u9488\u3002</p> linked <p>\u6bcf\u4e2a block \u4f5c\u4e3a\u4e00\u4e2a\u94fe\u8282\uff0c\u7ef4\u62a4\u5b58\u50a8\u4fe1\u606f\u4ee5\u5916\u8fd8\u9700\u8981\u7ef4\u62a4\u6307\u5411\u4e0b\u4e00\u4e2a block \u7684\u6307\u9488\u3002\u6b64\u65f6\uff0cFCB \u4e2d\u53ea\u9700\u8981\u8bb0\u5f55\u8d77\u59cb\u5730\u5740\u5373\u53ef\u3002</p> <p>  Linked allocation of disk space. </p> <p>\u5047\u8bbe\u5757\u5927\u5c0f\u4e3a 512 B\uff0c\u6bcf\u4e2a\u5757\u7684\u5f00\u5934\u6d88\u8017 1 B \u6765\u5b58\u653e\u6307\u9488\uff0c\u5982\u679c\u7ed9\u5b9a\u5b58\u53d6\u6587\u4ef6\u7684\u903b\u8f91\u5730\u5740 LA\uff0c\u5219\u5176\u5bf9\u5e94\u7684\u7ed3\u6784\u5185\u5757\u53f7 Q \u548c\u5757\u5185\u504f\u79fb R \u4e3a\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502pointer\u2502              data             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n0       1                               512\n</code></pre> <pre><code>valid_block_size = 512 - 1 # Bytes\nQ = LA / valid_block_size\nR = (LA % valid_block_size) + 1\n</code></pre> <p>advantages</p> <ul> <li>\u5b9e\u73b0\u7b80\u5355\uff0c\u53ea\u9700\u8981\u8bb0\u5f55\u6587\u4ef6\u7684 start pointer \u5373\u53ef\uff1b</li> <li>\u6587\u4ef6\u7684\u521b\u5efa\uff08\u5206\u914d\uff09\u548c\u589e\u957f\u5f88\u5bb9\u6613\uff1b</li> <li>\u89e3\u51b3\u4e86\u8fde\u7eed\u5206\u914d\u4e2d\u7684\u5916\u90e8\u788e\u7247\u95ee\u9898\uff1b</li> </ul> <p>disadvantages</p> <ul> <li>\u65e0\u6cd5\u968f\u673a\u8bbf\u95ee\uff0c\u6587\u4ef6\u8bbf\u95ee\u6548\u7387\u4f4e\uff0c\u56e0\u4e3a\u9700\u8981\u4ece\u5934\u5f00\u59cb\u904d\u5386\uff1b</li> <li>\u9700\u8981\u989d\u5916\u7684\u7a7a\u95f4\u6765\u5b58\u50a8\u6307\u9488\uff1b<ul> <li>\u989d\u5916\u7a7a\u95f4\u4e8e\u94fe\u8282\u6570\u91cf\u6b63\u76f8\u5173\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u7c07(cluster)\uff0c\u5373\u591a\u4e2a\u8fde\u7eed\u5757\u4e3a\u4e00\u4e2a\u94fe\u8282\uff0c\u6765\u51cf\u5c11\u6307\u9488\u5e26\u6765\u7684\u989d\u5916\u5f00\u9500\uff1b</li> </ul> </li> <li>\u53ef\u9760\u6027\u5b58\u5728\u95ee\u9898\uff1b</li> </ul> index <p>\u867d\u7136\u94fe\u63a5\u5f0f\u65b9\u6848\u89e3\u51b3\u4e86\u8fde\u7eed\u5f0f\u65b9\u6848\u4e2d\u5206\u914d\u4e0d\u7075\u6d3b\u7684\u95ee\u9898\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002</p> <p>\u7d22\u5f15\u65b9\u6cd5\u5c06\u6240\u6709\u6307\u9488\u7edf\u4e00\u7ef4\u62a4\u5230 index block \u4e2d\uff0c\u800c\u4e0d\u662f\u5229\u7528\u94fe\u8868\u7684\u65b9\u5f0f\u3002\u6bcf\u4e2a\u6587\u4ef6\u6709\u81ea\u5df1\u7684 index block\uff0c\u5728 index block \u4e2d\uff0c\u987a\u5e8f\u5b58\u653e\u7740\u6307\u5411\u6587\u4ef6\u7684\u6240\u6709 block \u7684\u6307\u9488\uff0cindex block \u4e2d\u7b2c i \u4e2a entry \u6307\u5411\u4e86\u5b58\u50a8\u6587\u4ef6\u6570\u636e\u7684\u7b2c i \u4e2a block\u3002</p> <p>  Indexed allocation of disk space. </p> <p>\u5047\u8bbe\u5757\u5927\u5c0f\u4e3a 512 B\uff0c\u5982\u679c\u7ed9\u5b9a\u5b58\u53d6\u6587\u4ef6\u7684\u903b\u8f91\u5730\u5740 LA\uff0c\u5219\u5176\u5bf9\u5e94\u7684\u7ed3\u6784\u5185\u5757\u53f7 Q \u548c\u5757\u5185\u504f\u79fb R \u4e3a\uff1a</p> <pre><code>block_size = 512 # Bytes\nQ = LA / block_size\nR = LA % block_size\n</code></pre> <p>advantages</p> <ul> <li>\u6587\u4ef6\u7684\u521b\u5efa\uff08\u5206\u914d\uff09\u548c\u589e\u957f\u5f88\u5bb9\u6613\uff1b</li> <li>\u89e3\u51b3\u4e86\u8fde\u7eed\u5206\u914d\u4e2d\u7684\u5916\u90e8\u788e\u7247\u95ee\u9898\uff1b</li> <li>\u652f\u6301\u968f\u673a\u8bbf\u95ee\uff1b</li> </ul> <p>disadvantages</p> <ul> <li>\u901a\u5e38\u6709\u66f4\u5927\u7684\u6307\u9488\u7a7a\u95f4\u5f00\u9500\uff0c\u56e0\u4e3a index \u4ee5 block \u4e3a\u6700\u5c0f\u5360\u7528\u5355\u4f4d\uff1b</li> </ul> <p>\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u8981\u8003\u8651 index block \u592a\u5c0f\u7684\u60c5\u51b5\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u590d\u6570\u4e2a index blocks\uff0c\u51e0\u79cd\u5e38\u89c1\u7684\u65b9\u6848\uff1a</p> <ol> <li>\u4f7f\u7528\u94fe\u63a5\u7d22\u5f15\uff0c\u7528\u94fe\u8868\u5c06\u5b83\u4eec\u8fde\u8d77\u6765\uff1b</li> <li>\u4f7f\u7528\u591a\u7ea7\u7d22\u5f15\uff08\u56de\u987e\u591a\u7ea7\u9875\u8868\uff09\uff1b</li> <li>\u4f7f\u7528\u6df7\u5408\u6a21\u5f0f\uff0c\u8be5\u65b9\u6848\u4e3a UNIX \u6240\u91c7\u7528\uff0c\u7c7b\u4f3c\u4e8e\u5206\u7ea7\u7535\u8d39\uff0cinode \u4e2d\u6709 15 \u4e2a\u6307\u9488\uff0c\u5404\u81ea\u7528\u9014\u4e0d\u540c\uff1a<ol> <li>\u524d 12 \u4e2a\u76f4\u63a5\u7d22\u5f15 12 \u4e2a block\uff1b</li> <li>\u7b2c 13 \u4e2a\u6307\u5411\u4e00\u4e2a indirect index block\uff08\u7528\u4e0d\u5230\u7684\u65f6\u5019\u5c31\u4e0d\u7528\uff09\uff1b</li> <li>\u7b2c 14 \u4e2a\u6307\u5411\u4e00\u4e2a\u4e8c\u7ea7 indirect index block\uff08\u7528\u4e0d\u5230\u7684\u65f6\u5019\u5c31\u4e0d\u7528\uff09\uff1b</li> <li>\u7b2c 15 \u4e2a\u6307\u5411\u4e00\u4e2a\u4e09\u7ea7 indirect index block\uff08\u7528\u4e0d\u5230\u7684\u65f6\u5019\u5c31\u4e0d\u7528\uff09\uff1b</li> </ol> </li> </ol> <p>  The UNIX inode. </p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u8bf7\u601d\u8003\u8fd9\u4e09\u79cd\u8bbe\u8ba1\u4e0b\uff0c\u5982\u4f55\u8ba1\u7b97\u5bf9\u5e94\u7684\u7ed3\u6784\u5185\u5757\u53f7 Q \u548c\u5757\u5185\u504f\u79fb R\u3002</p> \u63d0\u793a <p>\u94fe\u63a5\u7d22\u5f15\uff1a</p> <pre><code>block_size = 512 # Bytes\nnormal_block_size = block_size # Bytes\nptr_valid_block_size = block_size - 1 # Bytes\n\nQ1 = LA / (normal_block_size * ptr_valid_block_size) # the index block\nR1 = LA % (normal_block_size * ptr_valid_block_size)\n\nQ2 = R1 / normal_block_size # the data block\nR2 = R1 % normal_block_size # the offset in the data block\n</code></pre> <p>\u4e8c\u7ea7\u7d22\u5f15\uff1a</p> <pre><code>block_size = 512 # Bytes\n\nQ1 = LA / (block_size ** 2) # the inner index block\nR1 = LA % (block_size ** 2)\n\nQ2 = R1 / block_size # the data block\nR2 = R1 % block_size # the offset in the data block\n</code></pre> \ud83c\udf30 <p>=== \"\u9898\u9762\"</p> <pre><code>\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4f7f\u7528\u4e8c\u7ea7\u7d22\u5f15\u5206\u914d\uff0c\u4e00\u4e2a\u5757\u7684\u5927\u5c0f\u4e3a 1 KiB\uff0c\u7d22\u5f15\u4e2d\u7684\u5757\u5730\u5740\u4e3a 4 B\uff0c\u5219\u6587\u4ef6\u7cfb\u7edf\u80fd\u652f\u6301\u7684\u6700\u5927\u7a7a\u95f4\u5927\u5c0f\u4e3a\uff1f\n</code></pre> <p>=== \"\u89e3\u6790\"</p> <pre><code>\u8fd9\u91cc\u6709\u4e24\u6761\u7ebf\uff0c\u7b2c\u4e00\u6761\u662f\u7d22\u5f15\u7cfb\u7edf\u6240\u80fd\u652f\u6301\u7684\u6700\u5927\u5757\u6570\u91cf\uff0c\u7b2c\u4e8c\u6761\u662f\u5757\u5730\u5740\u80fd\u652f\u6301\u7684\u6700\u5927\u5730\u5740\u7a7a\u95f4\u5927\u5c0f\uff0c\u6211\u4eec\u5e94\u5f53\u5206\u522b\u8ba1\u7b97\uff0c\u53d6\u6700\u5c0f\u7684\u90a3\u4e2a\u4f5c\u4e3a\u7b54\u6848\u3002\n\n\u9996\u5148\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u4e8c\u7ea7\u7d22\u5f15\u5b9e\u9645\u4e0a\u5c31\u662f\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u4e00\u4e2a\u7ef4\u5ea6\u7531\u4e00\u4e2a\u5757\u7ef4\u62a4\uff0c\u6240\u4ee5\u6bcf\u4e2a\u7ef4\u5ea6\u4e2d\u6709 1 KiB / 4 B = 2^8^ \u4e2a\u9879\uff0c\u6240\u4ee5\u4e00\u5171\u652f\u6301 2 ^16^ \u4e2a\u9879\u3002\n\n\u5176\u6b21\uff0c\u7531\u4e8e\u5757\u5730\u5740\u7531 4 B \u8868\u793a\uff0c\u6240\u4ee5\u5730\u5740\u7a7a\u95f4\u6700\u591a\u6709 2^32^ \u4e2a\u9879\u3002\n\n\u6240\u4ee5\uff0c\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u7684\u6700\u591a\u9879\u6570\u4e3a 2^16^ \u9879\uff0c\u6700\u5927\u7a7a\u95f4\u4e3a 1 KiB * 2^16^ = 64 MB\u3002\n</code></pre> \ud83c\udf30 <p>=== \"\u9898\u9762\"</p> <pre><code>\u6587\u4ef6 F \u7531 200 \u6761\u8bb0\u5f55\u7ec4\u6210\uff0c\u8bb0\u5f55\u4ece 1 \u5f00\u59cb\u7f16\u53f7\u3002\u7528\u6237\u6253\u5f00\u6587\u4ef6\u540e\uff0c\u6b32\u5c06\u5185\u5b58\u4e2d\u7684\u4e00\u6761\u8bb0\u5f55\u63d2\u5165\u5230\u6587\u4ef6 F \u4e2d\uff0c\u4f5c\u4e3a\u5176\u7b2c 30 \u6761\u8bb0\u5f55\u3002\u8bf7\u56de\u7b54\u4e0b\u5217\u95ee\u9898\uff0c\u5e76\u8bf4\u660e\u7406\u7531\u3002\n\n1. \u82e5\u6587\u4ef6\u7cfb\u7edf\u91c7\u7528**\u8fde\u7eed\u5206\u914d**\u65b9\u5f0f\uff0c\u6bcf\u4e2a\u78c1\u76d8\u5757\u5b58\u653e\u4e00\u6761\u8bb0\u5f55\uff0c\u6587\u4ef6 F \u7684\u5b58\u50a8\u533a\u57df**\u524d\u540e**\u5747\u6709\u8db3\u591f\u7a7a\u95f2\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u5219\u5b8c\u6210\u4e0a\u8ff0\u63d2\u5165\u64cd\u4f5c\u6700\u5c11\u9700\u8981\u8bbf\u95ee\u51e0\u6b21\u5b58\u50a8\u5757? F \u7684\u6587\u4ef6\u63a7\u5236\u5757\u5185\u5bb9\u4f1a\u53d1\u751f\u54ea\u4e9b\u6539\u53d8\uff1f\n\n2. \u82e5\u6587\u4ef6\u7cfb\u7edf\u91c7\u7528**\u94fe\u63a5\u5206\u914d**\u65b9\u5f0f\uff0c\u6bcf\u4e2a\u78c1\u76d8\u5757\u5b58\u653e\u4e00\u6761\u8bb0\u5f55\u548c\u4e00\u4e2a\u94fe\u63a5\u6307\u9488\uff0c\u5219\u5b8c\u6210\u4e0a\u8ff0\u63d2\u5165\u64cd\u4f5c\u9700\u8981\u8bbf\u95ee\u51e0\u6b21\u78c1\u76d8\u5757\uff1f\u82e5\u6bcf\u4e2a\u78c1\u76d8\u5757\u5927\u5c0f\u4e3a 1 KiB\uff0c\u5176\u4e2d 4 B \u5b58\u653e\u94fe\u63a5\u6307\u9488\uff0c\u5219\u8be5\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u7684\u6587\u4ef6\u6700\u5927\u957f\u5ea6\u662f\u591a\u5c11 GiB\uff1f\n</code></pre> <p>=== \"\u89e3\u6790\"</p> <pre><code>**\u7b2c\u4e00\u9898**\uff1a\n\n\u7b2c\u4e00\u5c0f\u95ee\uff1a\n\n- \u8fde\u7eed\u5206\u914d\u7684\u8bdd\uff0c\u5c31\u6709\u70b9\u7c7b\u4f3c\u4e8e\u6570\u7ec4\u3002\u8981\u5bf9\u6570\u7ec4\u505a\u63d2\u5165\uff0c\u5c31\u9700\u8981\u79fb\u52a8\u540e\u9762\u7684\u5143\u7d20\uff0c\u4f46\u662f\u8fd9\u91cc\u63d0\u5230\uff0cF \u7684\u524d\u540e\u5747\u6709\u8db3\u591f\u7a7a\u95f2\u7684\u7a7a\u95f4\uff0c\u90a3\u4e48\u5728\u8fd9\u91cc\u628a 30 \u53f7\u4e4b\u524d\u7684\u5143\u7d20\u5f80\u524d\u79fb\u5e94\u5f53\u6bd4\u628a 29 \u53f7\u4e4b\u540e\u7684\u5143\u7d20\u5f80\u540e\u79fb\u66f4\u5feb\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u9009\u62e9\u5c06 1 ~ 29 \u5757\u7684\u5185\u5bb9\u5411\u524d\u79fb\u52a8\u3002\n- \u5bf9\u4e8e\u8fde\u7eed\u5206\u914d\uff0c\u8981\u60f3\u79fb\u52a8\u4e00\u5757\u7684\u5185\u5bb9\uff0c\u24f5 \u9996\u5148\u9700\u8981\u8bfb\u53d6\u4e00\u5757\u7684\u5185\u5bb9\uff0c\u24f6 \u7136\u540e\u662f\u5199\u5165\u53e6\u5916\u4e00\u4e2a\u5757\u3002\u56e0\u6b64\uff0c\u6bcf\u6b21\u79fb\u52a8\u90fd\u9700\u8981\u4e24\u6b21\u5bf9\u5757\u7684 I/O \u8bbf\u95ee\uff0c\u8fd9\u91cc\u4e00\u5171\u6709 29 \u4e2a\u5757\u8981\u79fb\u52a8\uff0c\u6240\u4ee5\u9700\u8981 29 * 2 = 58 \u6b21\u79fb\u52a8\u3002\n- \u5b8c\u6210\u79fb\u52a8\u4e4b\u540e\uff0c\u9700\u8981\u5728 30 \u5757\u7684\u4f4d\u7f6e\u5199\u5165\u65b0\u7684\u8bb0\u5f55\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e5f\u6709\u4e00\u6b21 I/O \u8bbf\u95ee\uff0c\u4e00\u5171\u662f 58 + 1 = 59 \u6b21\u3002\n\n\u7b2c\u4e8c\u5c0f\u95ee\uff1a\n\n- \u800c\u5173\u4e8e\u6587\u4ef6\u63a7\u5236\u5757\u7684\u53d8\u5316\uff0c\u4e0e\u6587\u4ef6\u5b58\u50a8\u76f4\u63a5\u76f8\u5173\u7684\u662f\uff1a\u6587\u4ef6\u8d77\u59cb\u5730\u5740\u6539\u53d8\uff08\u5411\u524d\u79fb\u52a8\u4e00\u5757\uff09\u4ee5\u53ca\u6587\u4ef6\u957f\u5ea6\u6539\u53d8\uff08\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\uff09\u3002\n- \u6b64\u5916\uff0c\u53ef\u80fd\u8fd8\u4f1a\u66f4\u65b0 dirty bit\u3001\u6700\u540e\u66f4\u65b0\u65f6\u95f4\u7b49\u3002\n\n**\u7b2c\u4e8c\u9898**\uff1a\n\n\u7b2c\u4e00\u5c0f\u95ee\uff1a\n\n- \u94fe\u63a5\u5206\u914d\u5c31\u7c7b\u4f3c\u4e8e\u94fe\u8868\u63d2\u5165\uff0c\u53ea\u9700\u8981\u627e\u5230\u76ee\u6807\u4f4d\u7f6e\uff0c\u7136\u540e\u5c06\u524d\u9a71\u7684 `next` \u6307\u9488\u4fee\u6539\u4e3a\u63d2\u5165\u8282\u70b9\uff0c\u5c06\u63d2\u5165\u8282\u70b9\u7684 `next` \u6539\u4e3a\u540e\u9a71\u5373\u53ef\u3002\n- \u9996\u5148\u9700\u8981\u627e\u5230 29 \u53f7\u94fe\u8282\uff0c\u94fe\u5f0f\u53ea\u652f\u6301\u987a\u5e8f\u8bbf\u95ee\uff0c\u6240\u4ee5\u9700\u8981 29 \u6b21 I/O \u8bbf\u95ee\u624d\u80fd\u627e\u5230\u7b2c 29 \u4e2a\u94fe\u8282\uff0c\u6b64\u65f6\u62ff\u5230 29 \u53f7\u94fe\u8282\u7684 `next` \u6307\u9488\u5c31\u77e5\u9053 30 \u53f7\u94fe\u8282\u5728\u54ea\u91cc\u4e86\u3002\n- \u63a5\u4e0b\u6765\u521b\u5efa\u65b0\u94fe\u8282\uff0c\u5176 `next` \u6307\u9488\u6307\u5411\u521a\u521a\u62ff\u5230\u7684 29 \u94fe\u8282\u7684 `next` \u6307\u9488\uff0c\u9700\u8981 1 \u6b21 I/O \u8bbf\u95ee\u3002\n- \u7136\u540e\u4fee\u6539 29 \u53f7\u94fe\u8282\u7684 `next` \u6307\u9488\u6307\u5411\u65b0\u94fe\u8282\uff0c\u9700\u8981 1 \u6b21 I/O \u8bbf\u95ee\u3002\n- \u6240\u4ee5\uff0c\u4e00\u5171\u662f 29 + 1 + 1 = 31 \u6b21 I/O \u8bbf\u95ee\u3002\n\n\u7b2c\u4e8c\u5c0f\u95ee\uff1a\n\n- \u8fd9\u79cd\u95ee\u9898\u4e4d\u4e00\u773c\u770b\u53ef\u80fd\u4f1a\u89c9\u5f97\uff1a\u300c\u94fe\u8868\u4e0d\u662f\u4e0d\u9650\u957f\u5ea6\u5417\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u6709\u6700\u5927\u5927\u5c0f\u300d\uff0c\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff0c**\u6307\u9488\u662f\u5b9a\u957f\u7684**\uff0c\u5730\u5740\u662f\u6709\u9650\u7684\uff0c\u56e0\u6b64\u51b3\u5b9a\u4e86\u94fe\u8282\u4e5f\u662f\u6709\u9650\u7684\u3002\n- \u6240\u4ee5\uff0c\u8fd9\u91cc\u7684\u300c\u5176\u4e2d 4 B \u5b58\u653e\u94fe\u63a5\u6307\u9488\u300d\u5305\u542b\u4e86\u4e24\u4e2a\u4fe1\u606f\uff1a\u24f5 \u6bcf\u4e2a\u78c1\u76d8\u5757\u6709\u6548\u5b58\u50a8\u7a7a\u95f4\u4e3a 1 KiB - 4 B\uff0c\u24f6 \u6700\u591a\u53ea\u6709 2^32^ \u4e2a\u94fe\u8282\u3002\n- \u56e0\u6b64\uff0c\u8be5\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u7684\u6587\u4ef6\u6700\u5927\u957f\u5ea6\u4e3a 2^32^ * (1 KiB - 4 B) = 4080 GiB\u3002\n</code></pre>"},{"location":"OS/Unit6/#_23","title":"\u7a7a\u95f2\u7a7a\u95f4\u7ba1\u7406","text":"<p>\u6211\u4eec\u524d\u9762\u5728\u6587\u4ef6\u7cfb\u7edf\u5206\u5c42\u8bbe\u8ba1\u91cc\u63d0\u5230\u8fc7\uff0cfile-organization module \u9700\u8981\u8d1f\u8d23\u8fdb\u884c\u7a7a\u95f2\u7a7a\u95f4\u7684\u7ba1\u7406\u3002\u73b0\u5728\u6211\u4eec\u6765\u8003\u8651\u5982\u4f55\u7ba1\u7406\u7a7a\u95f2\u7a7a\u95f4\u3002</p> \u4f4d\u56fe <p>\u4f4d\u56fe(bitmap)\u5373\u4f4d\u5411\u91cf\uff0c\u7528\u5bf9\u5e94 bit \u7684 0 \u6216 1 \u6765\u6807\u8bb0\u5bf9\u5e94\u7684 block \u662f\u5426\u7a7a\u95f2\u3002</p> <p>\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u5e26\u6765\u7684\u989d\u5916\u5f00\u9500\u662f\uff0c\u6709\u591a\u5c11 blocks \u5c31\u9700\u8981\u591a\u5c11\u4e2a\u989d\u5916\u7684 bits\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u5757\u5927\u5c0f\u4e3a 4 KiB\uff0c\u786c\u76d8\u4e00\u5171\u6709 1 GiB\uff0c\u5219\u9700\u8981 2^30^ / 2^12^ = 2^18^ = 256 KiB \u7684\u989d\u5916\u7a7a\u95f4\u6765\u5b58\u50a8\u4f4d\u56fe\u3002</p> <p>\u76f8\u5bf9\u6765\u8bf4\u5bb9\u6613\u5f97\u5230\u8fde\u7eed\u7684\u7a7a\u95f4\uff0c\u56e0\u4e3a bitmap \u4e2d bit \u7684\u76f8\u90bb\u6697\u793a block \u7684\u76f8\u90bb\u3002</p> \ud83c\udf30 <p>=== \"\u9898\u9762\"</p> <pre><code>\u6587\u4ef6\u7cfb\u7edf\u7528**\u4f4d\u56fe\u6cd5**\u8868\u793a\u78c1\u76d8\u7a7a\u95f4\u7684\u5206\u914d\u60c5\u51b5\uff0c\u4f4d\u56fe\u5b58\u4e8e\u78c1\u76d8\u7684 32 ~ 127 \u53f7\u5757\u4e2d\uff0c\u6bcf\u4e2a\u76d8\u5757\u5360 1024 B\uff0c\u76d8\u5757\u548c\u5757\u5185\u5b57\u8282\u5747\u4ece 0 \u5f00\u59cb\u7f16\u53f7\u3002\u5047\u8bbe\u8981\u91ca\u653e\u7684\u76d8\u5757\u53f7\u4e3a 409612\uff0c\u5219\u4f4d\u56fe\u4e2d\u4fee\u6539\u7684\u4f4d\u6240\u5728\u7684**\u76d8\u5757\u53f7**\u548c**\u5757\u5185\u5b57\u8282\u504f\u79fb\u91cf**\u5206\u522b\u662f_____\u3002\n\n- A. 82 \u548c 2\uff1b\n- B. 82 \u548c 1\uff1b\n- C. 81 \u548c 2\uff1b\n- D. 81 \u548c 1\uff1b\n</code></pre> <p>=== \"\u89e3\u6790\"</p> <pre><code>\u9996\u5148\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u8003\u8651\u4f4d\u56fe\u5728\u78c1\u76d8\u4e2d\u7684\u4f4d\u7f6e\u662f\u5426\u5bf9\u8ba1\u7b97\u6709\u6ca1\u6709\u5f71\u54cd\uff0c\u53ea\u9700\u8981\u5c06\u5b83\u4eec\u770b\u4f5c\u6b63\u5e38\u7684\u78c1\u76d8\u5373\u53ef\u3002\u4e8e\u662f\u6211\u4eec\u77e5\u9053\uff0c\u5728\u300c\u4f4d\u56fe\u5b58\u4e8e\u78c1\u76d8\u7684 32 ~ 127 \u53f7\u5757\u4e2d\u300d\u8fd9\u53e5\u8bdd\u4e2d\uff0c\u6709\u7528\u7684\u4fe1\u606f\u5b9e\u9645\u4e0a\u662f \u24f5 \u4f4d\u56fe\u4ece 32 \u53f7\u76d8\u5f00\u59cb\uff0c\u24f6 \u4f4d\u56fe\u4e00\u5171\u7528\u4e86 127 - 32 + 1 = 96 \u4e2a\u76d8\u5757\uff0c\u5176\u4e2d\u540e\u8005\u5728\u672c\u9053\u9898\u91cc\u7528\u4e0d\u5230\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97 409612 \u5bf9\u5e94\u7684\u4f4d\u6bd4\u7279\u5728\u54ea\u91cc\u3002\n\n\u6839\u636e\u4f4d\u56fe\u6cd5\u7684\u539f\u7406\uff0c\u4e00\u4e2a\u5b57\u8282\u80fd\u8868\u793a 8 \u4e2a\u5757\u3001\u4e00\u4e2a\u76d8\u5757\u80fd\u8868\u793a 8 * 1024 \u4e2a\u5757\u3002\u56e0\u6b64\uff1a\n\n409612 / (8 * 1024) = 50 ... 12\n\n\u5176\u4e2d\uff0c50 \u8868\u793a\u5b83\u88ab\u7b2c 50 \u4e2a\u4f4d\u56fe\u5757\u4e2d\u88ab\u8868\u793a\uff0c\u5757\u5185**\u6bd4\u7279**\u504f\u79fb\u91cf\u4e3a 12\u3002\n\n\u4f46\u662f\uff0c\u4f4d\u56fe\u4ece 32 \u5757\u624d\u5f00\u59cb\uff0c\u6240\u4ee5\u8868\u793a\u8fd9\u4e00\u5757\u7684\u4f4d\u56fe\u5757\u53f7\u5e94\u5f53\u662f 50 + 32 = 82\uff0c\u800c\u5757\u5185**\u5b57\u8282**\u504f\u79fb\u91cf\u4e3a 12 / 8 = 1\u3002\uff08\u5b57\u8282\u504f\u79fb\u91cf\u662f 1 \u8bf4\u660e\u662f\u7b2c\u4e8c\u4e2a\u5b57\u8282\uff01\u4ece 0 \u5f00\u59cb\u7b97\uff01\uff09\n</code></pre> \u94fe\u8868 <p>\u7c7b\u4f3c free-frame list\uff0c\u7528\u94fe\u8868\u5c06\u7a7a\u95f2\u7684 block \u8fde\u8d77\u6765\u3002</p> <p>\u4e0d\u5bb9\u6613\u9020\u6210\u7a7a\u95f4\u6d6a\u8d39\uff0c\u4f46\u4e0d\u592a\u5bb9\u6613\u5f97\u5230\u8fde\u7eed\u7684\u7a7a\u95f4\u3002</p> \u5206\u7ec4 <p>\u5c06 n \u4e2a\u7a7a\u95f2\u5757\u7684\u5730\u5740\u5b58\u653e\u5728\u7b2c 0 \u4e2a\u7a7a\u95f2\u5757\u4e2d\uff0c\u5728\u7b2c n \u4e2a\u7a7a\u95f2\u5757\u5b58\u50a8\u540e n \u4e2a\u7a7a\u95f2\u5757\u7684\u5730\u5740\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> \u8ba1\u6570 <p>\u8ba1\u6570\u65b9\u6cd5\u662f\u57fa\u4e8e\u94fe\u8868\u65b9\u6cd5\u7684\u6539\u8fdb\uff0c\u57fa\u4e8e\u8fde\u7eed\u7a7a\u95f4\u901a\u5e38\u88ab\u4e00\u8d77\u4f7f\u7528\u7684\u5047\u8bbe\uff0c\u4e0d\u662f\u5b58\u50a8\u6bcf\u4e2a\u4e00\u4e2a block\uff0c\u800c\u662f\u53ea\u7ef4\u62a4\u6bcf\u4e2a\u8fde\u7eed\u5185\u5b58\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u548c\u957f\u5ea6\uff08\u5757\u6570\uff09\u3002</p>"},{"location":"OS/Unit6/#_24","title":"\u5178\u578b\u6587\u4ef6\u7cfb\u7edf","text":"ext <p>TODO: \u5b8c\u5584\u8fd9\u90e8\u5206\u3002</p> <p>Links</p> <ul> <li>ext2 | Wikipedia</li> </ul> <p>Inode structure - record rec_len? | StackOverflow</p> FAT <p>TODO: \u5b8c\u5584\u8fd9\u90e8\u5206\u3002</p> <p>Links</p> <ul> <li>FAT | Wikipedia</li> </ul> <p>FAT \u5373 file-allocation table\uff0c\u662f\u4e00\u79cd\u94fe\u63a5\u5206\u914d\u7684\u53d8\u79cd\uff0c\u4f7f\u7528 FAT \u7684\u6587\u4ef6\u7cfb\u7edf\u6709 FAT12\u3001FAT16\u3001FAT32\u3001exFAT\uff0864\u4f4d\uff09\u3002\u7531\u4e8e\u7b80\u5355\u9ad8\u6548\uff0c\u5b83\u88ab MS-DOS \u4f7f\u7528\u3002</p> <ul> <li>FAT \u7684\u6bcf\u4e2a\u76ee\u5f55\u9879\u4e3a 32 \u4e2a\u5b57\u8282\u3002</li> <li>FAT32 \u957f\u6587\u4ef6\u540d\u7684\u76ee\u5f55\u9879\u7531\u51e0\u4e2a 32 B \u8868\u9879\u7ec4\u6210\u3002</li> <li>\u7528\u4e00\u4e2a\u8868\u9879\u5b58\u653e\u77ed\u6587\u4ef6\u540d\u548c\u5176\u4ed6\u5c5e\u6027\uff08\u5305\u62ec\u7c07\u53f7\u3001\u6587\u4ef6\u5927\u5c0f\uff0c\u6700\u540e\u4fee\u6539\u65f6\u95f4\u548c\u6700\u540e\u4fee\u6539\u65e5\u671f\u3001\u521b\u5efa\u65f6\u95f4\u3001\u521b\u5efa\u65e5\u671f\u548c\u6700\u540e\u5b58\u53d6\u65e5\u671f\uff09\uff0c\u77ed\u6587\u4ef6\u540d\u7684\u5c5e\u6027\u662f <code>0x20</code>\u3002</li> <li>\u7528\u8fde\u7eed\u82e5\u5e72\u4e2a\u8868\u9879\u5b58\u653e\u957f\u6587\u4ef6\u540d\uff0c\u6bcf\u4e2a\u8868\u9879\u5b58\u653e 13 \u4e2a\u5b57\u7b26\uff08\u4f7f\u7528 Unicode \u7f16\u7801\uff0c\u6bcf\u4e2a\u5b57\u7b26\u5360\u7528 2 \u4e2a\u5b57\u8282\uff09\u3002</li> <li>\u957f\u6587\u4ef6\u540d\u7684\u8868\u9879\u9996\u5b57\u8282\u7684\u4e8c\u8fdb\u5236\u6570\u4f4e 5 \u4f4d\u503c\uff0c\u5206\u522b\u4e3a <code>00001</code>\u3001<code>00010</code>\u3001<code>00011</code>\u3001...\u8868\u793a\u5b83\u4eec\u7684\u6b21\u5e8f\uff0c\u5de6\u8d77\u7b2c 2 \u4f4d\u4e3a 1\uff08\u4e5f\u5c31\u662f\u5728\u4f4e 5 \u4f4d\u57fa\u7840\u4e0a\u52a0<code>0x40</code>\uff09\u8868\u793a\u8be5\u8868\u9879\u662f\u6700\u540e\u4e00\u9879\u3002\u6700\u540e\u9879\u5b58\u653e 13 \u4e2a\u5b57\u7b26\u4f4d\u7f6e\u591a\u4f59\u65f6\uff0c\u5148\u7528 2 \u4e2a\u5b57\u8282 0 \u8868\u793a\u7ed3\u675f\uff0c\u518d\u7528 <code>0xFF`` \u586b\u5145\u3002\u957f\u6587\u4ef6\u540d\u7684\u5c5e\u6027\u662f</code>0x0F<code>\u3002\u957f\u6587\u4ef6\u540d\u9879\u7684\u7b2c 13\u300127\u300128 \u5b57\u8282\u4e3a</code>0x00`\uff0c\u7b2c 14 \u5b57\u8282\u4e3a\u77ed\u6587\u4ef6\u540d\u6821\u9a8c\u548c\u3002</li> </ul> NTFS <p>TODO: \u5b8c\u5584\u8fd9\u90e8\u5206\u3002</p> <p>Links</p> <ul> <li>NTFS | Wikipedia</li> </ul> <ul> <li>\u6bcf\u4e2a\u5206\u533a\u90fd\u6709 MFT \u5373 master file table\u3002</li> <li>MFT \u7531\u4e00\u4e2a\u4e2a MFT entry\uff08\u4e5f\u79f0\u4e3a\u6587\u4ef6\u8bb0\u5f55\uff09\u7ec4\u6210\uff0c\u6bcf\u4e2a MFT entry \u5360\u7528 1 KB \u7684\u7a7a\u95f4\u3002</li> <li>MFT \u524d 16 \u4e2a\u8bb0\u5f55\u7528\u6765\u5b58\u653e\u5143\u6570\u636e\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u5b83\u4eec\u5360\u6709\u56fa\u5b9a\u7684\u4f4d\u7f6e\u3002</li> <li>\u6bcf\u4e2a MFT entry \u5934\u90e8(header)\u7684\u51e0\u5341\u4e2a\u5b57\u8282\u6709\u7740\u56fa\u5b9a\u7684\u7ed3\u6784\uff0c\u7528\u6765\u63cf\u8ff0\u8be5 MFT entry \u7684\u76f8\u5173\u4fe1\u606f\uff1b\u540e\u9762\u7684\u5b57\u8282\u5b58\u653e\u7740\u6587\u4ef6\u5c5e\u6027\u7b49\u4fe1\u606f\u3002</li> <li>\u6bcf\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u4fe1\u606f\u90fd\u5305\u542b\u5728 MFT \u4e2d\uff0c\u6bcf\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u81f3\u5c11\u5bf9\u5e94\u4e00\u4e2a MFT entry\u3002</li> </ul>"},{"location":"OS/Unit6/#_25","title":"\u865a\u62df\u6587\u4ef6\u7cfb\u7edf","text":"<p>\u6211\u4eec\u5728\u524d\u9762\u7ed9\u51fa\u4e86\u5927\u91cf\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u662f\u64cd\u4f5c\u7cfb\u7edf\u5e94\u5f53\u80fd\u5e7f\u6cdb\u652f\u6301\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\uff08\u4e0d\u540c\u7684 disk \u4f7f\u7528\u7684 FS \u53ef\u80fd\u4e0d\u540c\uff09\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u518d\u505a\u4e00\u6b21\u62bd\u8c61\uff0c\u5373\u865a\u62df\u6587\u4ef6\u7cfb\u7edf(virtual FS, VFS)\u3002</p>  ![](img/59.png){ width=80% }  Schematic view of a virtual file system.  <p>VFS \u6709\u4e24\u4e2a\u4e3b\u8981\u529f\u80fd\uff1a</p> <ol> <li>\u5c01\u88c5\u5e76\u900f\u660e\u5316\u5177\u4f53\u6587\u4ef6\u64cd\u4f5c\uff0c\u540c\u4e00\u63a5\u53e3\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u5177\u4f53\u5b9e\u73b0\uff08\u7c7b\u4f3c\u4e8e\u201c\u591a\u6001\u201d\uff09\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6765\u652f\u6301\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\uff1b</li> <li>\u53cd\u8fc7\u6765\u4e3a\u6587\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\u6587\u4ef6\u7684\u65b9\u5f0f\uff0cVFS \u57fa\u4e8e\u4e00\u4e2a\u540d\u4e3a vnode \u7684 file-representation structure \u7684\u4e1c\u897f\u6765\u8868\u793a\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u5728\u6574\u4e2a\u6587\u4ef6\u7f51\u7edc\u4e2d\u6807\u8bc6\u6587\u4ef6\u7684\u6570\u5b57\u6307\u793a\u7b26\uff1b</li> </ol>"},{"location":"OS/Unit6/#_26","title":"\u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\u4e0e\u5b89\u5168","text":"<p>TODO: \u5b8c\u5584\u8fd9\u90e8\u5206\u3002</p>"},{"location":"OS/Unit6/#_27","title":"\u9875\u7f13\u51b2","text":"<p>\u9875\u7f13\u51b2(page cache)\u6280\u672f\u901a\u8fc7\u865a\u62df\u5185\u5b58\u6280\u672f\uff0c\u4ee5\u9875\u4e3a\u5355\u4f4d\u8fdb\u884c\u7f13\u51b2\uff0c\u800c\u975e\u4ee5\u9762\u5411 FS \u7684 block \u4e3a\u5355\u4f4d\u3002\u56e0\u4e3a\u4f7f\u7528\u865a\u62df\u5185\u5b58\u76f8\u5173\u7684\u63a5\u53e3\u4f1a\u6bd4\u4f7f\u7528\u6587\u4ef6\u7cfb\u7edf\u7684\u76f8\u5173\u63a5\u53e3\u66f4\u5feb\u3002</p>"},{"location":"OS/Unit6/#_28","title":"\u6062\u590d","text":"<p>\u5907\u4efd\u6570\u636e\uff0c\u5e76\u65f6\u5e38\u68c0\u67e5\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u5b8c\u6574\u6027\uff0c\u5982\u679c\u53d1\u73b0\u95ee\u9898\u5219\u5c1d\u8bd5\u5229\u7528\u5907\u4efd\u6570\u636e\u8fdb\u884c\u6062\u590d\u3002</p>"},{"location":"OS/Unit6/#_29","title":"\u65e5\u5fd7\u7cfb\u7edf","text":"<p>\u65e5\u5fd7\u7ed3\u6784\u7684\u6587\u4ef6\u7cfb\u7edf(log-structured FS)\u662f\u4e00\u79cd\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5b83\u5c06\u6240\u6709\u7684\u4fee\u6539\u64cd\u4f5c\u90fd\u4f5c\u4e3a\u4e00\u4e2a\u4e8b\u52a1(transaction)\u8bb0\u5f55\u5728\u4e00\u4e2a\u65e5\u5fd7\u4e2d\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4fee\u6539\u6587\u4ef6\u672c\u8eab\uff08\u5bf9\u4e8e\u6587\u4ef6\u7684\u4fee\u6539\u548c\u65e5\u5fd7\u7684\u521b\u5efa\u662f\u5f02\u6b65\u7684\uff09\u3002</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u662f\uff0c\u5f53\u7cfb\u7edf\u5d29\u6e83\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u65e5\u5fd7\u6765\u6062\u590d\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>[^1]: ISO/IEC 10918-1: 1993(E) p.36\uff0c\u5176\u4e2d SOI (Start Of Image) \u7684\u503c\u4e3a <code>0xFFD8</code>\u3002 [^2]: Why are hard links not allowed for directories? [^3]: File Permissions [^4]: Implementation of File Systems [^5]: Device driver | Wikipedia</p>"}]}